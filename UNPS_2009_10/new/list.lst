GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  *File to estimate quantities consistent with revealed preferences
   2   
      This file uses:
               work\product_flex.inc
               work\price_unit_flex.inc
               work\quan_flex.inc
       
      This file creates:
               work\qent.csv
               work\povline_ali_ent.csv
               work\povline_rp_inout.csv
       
  15   
  16  SETS
  17   cod        200910 codes for products used in basket
  18  /
INCLUDE    /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/product_flex.inc
  20  100
  21  105
  22  107
  23  108
  24  109
  25  110
  26  111
  27  112
  28  113
  29  114
  30  115
  31  116
  32  117
  33  118
  34  119
  35  121
  36  122
  37  123
  38  125
  39  127
  40  132
  41  134
  42  135
  43  136
  44  137
  45  138
  46  139
  47  140
  48  141
  49  144
  50  145
  51  146
  52  147
  53  149
  54  150
  55  /
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


  56   
  57   reg        4 spatial domains /1*4/
  58   r(reg)     all included spatial regions /1*4/
  59   
  60   ptit       price table titles
  61  /
  62    count      number of observations making up the price average
  63    price_uw5  average price
  64  /
  65   
  66   qtit       quantity table titles
  67  /
  68    calperg          calories per gram
  69    quan5            quantities in grams
  70    calpp            calories per person by region
  71    povline_a_flex5    value of flexible food bundle
  72  /
  73   
  74   
  75    posquan(cod,reg)  mark positive quantities in each region
  76    posprice(cod,reg) mark the existence of acceptable price info in each region
  77    chkprice(cod,reg) ensure that prices exist once all estimated
  78  ;
  79   
  80  alias(reg,regq);
  81  alias(r,rq);
  82   
  83  SCALAR
  84     caltarg single level of calories to target across regions / 2150 /
  85   ;
  86   
  87  PARAMETERS
  88   
  89    shr(cod,reg)         shares in each basket by region
  90    chkshr(reg)          check that the calculated shares sum to .9
  91    shrmiss(regq,reg)    shares missing in each region pair
  92    povline_ali(reg)       food poverty line
  93    perc_chng(reg)       percent change in line
  94    finmiss(reg)         final missing shares post optimization procedure
  95   ;
  96   
  97  Table  price(cod,reg,ptit)  price and related information
  98                          count   price_uw5
INCLUDE    /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/price_unit_flex.inc
 100  100     .       1       103     .1995082
 101  100     .       2       80      .1837012
 102  100     .       3       11      .1812616
 103  100     .       4       202     .2358728
 104  105     .       1       105     .2996547
 105  105     .       2       168     .2789927
 106  105     .       3       60      .1841896
 107  105     .       4       190     .3584601
 108  107     .       1       99      .0849737
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 109  107     .       2       120     .0720946
 110  107     .       3       93      .0567869
 111  107     .       4       128     .0792644
 112  108     .       1       25      .8555189
 113  108     .       2       130     .7475146
 114  108     .       3       51      .7749497
 115  108     .       4       85      .7567931
 116  109     .       1       11      1.109409
 117  109     .       2       12      .6721903
 118  109     .       3       2       1.096642
 119  109     .       4       40      1.073471
 120  110     .       1       28      1.84392
 121  110     .       2       39      1.714604
 122  110     .       3       2       1.625357
 123  110     .       4       22      1.942316
 124  111     .       1       5       .3960107
 125  111     .       2       8       1.198174
 126  111     .       3       28      1.131027
 127  111     .       4       7       .8062435
 128  112     .       1       21      .3985266
 129  112     .       2       45      .3488988
 130  112     .       3       25      .2469166
 131  112     .       4       27      .3994375
 132  113     .       1       120     1.138484
 133  113     .       2       149     .8975917
 134  113     .       3       58      1.182202
 135  113     .       4       137     1.079561
 136  114     .       1       25      2.573371
 137  114     .       2       23      2.501453
 138  114     .       3       5       2.599799
 139  114     .       4       9       2.707855
 140  115     .       1       5       1.080527
 141  115     .       2       38      .9518308
 142  115     .       3       19      1.030133
 143  115     .       4       66      1.016336
 144  116     .       1       4       1.324095
 145  116     .       2       70      .6222835
 146  116     .       3       76      .7958845
 147  116     .       4       6       1.054614
 148  117     .       1       35      3.972174
 149  117     .       2       50      4.037138
 150  117     .       3       31      3.737226
 151  117     .       4       64      4.101431
 152  118     .       1       11      3.272732
 153  118     .       2       20      3.254801
 154  118     .       3       5       2.829835
 155  118     .       4       10      3.784202
 156  119     .       1       4       2.743828
 157  119     .       2       9       3.70117
 158  119     .       3       6       6.142638
 159  119     .       4       10      4.240703
 160  121     .       1       3       6.23049
 161  121     .       2       26      5.080668
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 162  121     .       3       8       4.026635
 163  121     .       4       6       5.227022
 164  122     .       1       25      1.044455
 165  122     .       2       54      .597783
 166  122     .       3       15      .6286831
 167  122     .       4       24      .9466699
 168  123     .       1       24      6.004713
 169  123     .       2       61      5.787879
 170  123     .       3       43      6.591367
 171  123     .       4       22      5.363903
 172  125     .       1       53      .5449679
 173  125     .       2       87      .5955617
 174  125     .       3       17      .438356
 175  125     .       4       61      .4577087
 176  127     .       1       105     2.320333
 177  127     .       2       177     1.850217
 178  127     .       3       109     2.599707
 179  127     .       4       58      1.976907
 180  132     .       1       16      .2626461
 181  132     .       2       28      .161007
 182  132     .       3       26      .1041133
 183  132     .       4       21      .2319471
 184  134     .       1       33      1.677383
 185  134     .       2       27      1.49172
 186  134     .       3       17      .8946471
 187  134     .       4       47      .5413278
 188  135     .       1       120     .3083276
 189  135     .       2       167     .2233862
 190  135     .       3       104     .283692
 191  135     .       4       162     .3736519
 192  136     .       1       137     .1334951
 193  136     .       2       171     .1454154
 194  136     .       3       59      .1781978
 195  136     .       4       155     .2142113
 196  137     .       1       23      .346612
 197  137     .       2       71      .4758629
 198  137     .       3       19      .6426332
 199  137     .       4       44      .435698
 200  138     .       1       52      .4796055
 201  138     .       2       128     .5347914
 202  138     .       3       30      .2506077
 203  138     .       4       166     .3481294
 204  139     .       1       20      .5618044
 205  139     .       2       135     .7003802
 206  139     .       3       164     .4661958
 207  139     .       4       36      .6134698
 208  140     .       1       41      4.725954
 209  140     .       2       30      2.902589
 210  140     .       3       13      2.290602
 211  140     .       4       83      4.551548
 212  141     .       1       78      1.300537
 213  141     .       2       120     1.30482
 214  141     .       3       129     1.373002
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 5
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 215  141     .       4       190     1.447421
 216  144     .       1       60      2.682802
 217  144     .       2       65      2.129502
 218  144     .       3       1       1.77419
 219  144     .       4       111     2.535281
 220  145     .       1       2       2.700185
 221  145     .       2       17      1.830377
 222  145     .       3       28      1.799268
 223  145     .       4       4       3.487448
 224  146     .       1       3       2.019495
 225  146     .       2       7       1.900969
 226  146     .       3       57      2.082065
 227  146     .       4       3       1.704909
 228  147     .       1       111     2.336171
 229  147     .       2       190     2.311761
 230  147     .       3       57      2.499254
 231  147     .       4       92      2.402361
 232  149     .       1       112     .7554565
 233  149     .       2       176     .753539
 234  149     .       3       57      .7329082
 235  149     .       4       82      .9672609
 236  150     .       1       157     .8376988
 237  150     .       2       270     .7431083
 238  150     .       3       187     .6373043
 239  150     .       4       284     .8915389
 240  ;
 241   
 242  Table   quan(cod,reg,qtit)   quantity and related information
 243                             calperg          quan5           calpp      povline_a_flex5
INCLUDE    /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/quan_flex.inc
 245  100     .       1       3.8500000e-01   4.0859024e+02   2.4773413e+03   612.1146
 246  105     .       1       7.1400000e-01   2.3345251e+02   2.4773413e+03   612.1146
 247  107     .       1       2.2750000e+00   6.0529285e+02   2.4773413e+03   612.1146
 248  108     .       1       3.1700000e+00   1.4755241e+01   2.4773413e+03   612.1146
 249  109     .       1       6.3700000e-01   5.6282640e+00   2.4773413e+03   612.1146
 250  110     .       1       3.6000000e+00   8.3472366e+00   2.4773413e+03   612.1146
 251  112     .       1       8.1100000e-01   2.6278461e+01   2.4773413e+03   612.1146
 252  113     .       1       3.5400000e+00   6.5277145e+01   2.4773413e+03   612.1146
 253  117     .       1       1.8720000e+00   4.9469571e+00   2.4773413e+03   612.1146
 254  122     .       1       6.1800000e-01   1.1822950e+01   2.4773413e+03   612.1146
 255  123     .       1       2.1030000e+00   1.3884310e+00   2.4773413e+03   612.1146
 256  125     .       1       6.4000000e-01   2.5509003e+01   2.4773413e+03   612.1146
 257  127     .       1       8.5700000e+00   5.3499556e+00   2.4773413e+03   612.1146
 258  134     .       1       4.9400000e-01   5.4269958e+00   2.4773413e+03   612.1146
 259  135     .       1       3.6400000e-01   2.3237473e+01   2.4773413e+03   612.1146
 260  136     .       1       1.9000000e-01   1.0541150e+02   2.4773413e+03   612.1146
 261  138     .       1       2.0160000e-01   1.5819979e+01   2.4773413e+03   612.1146
 262  140     .       1       7.8000000e-01   3.6380422e+00   2.4773413e+03   612.1146
 263  141     .       1       4.0500000e+00   3.0170744e+01   2.4773413e+03   612.1146
 264  144     .       1       2.1850000e+00   6.7215619e+00   2.4773413e+03   612.1146
 265  147     .       1       3.7500000e+00   1.7041006e+01   2.4773413e+03   612.1146
 266  150     .       1       0.0000000e+00   1.2051161e+01   2.4773413e+03   612.1146
 267  100     .       2       3.8500000e-01   2.1949054e+02   2.3678511e+03   661.9043
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 6
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 268  105     .       2       7.1400000e-01   3.1441122e+02   2.3678511e+03   661.9043
 269  107     .       2       2.2750000e+00   3.8967401e+02   2.3678511e+03   661.9043
 270  108     .       2       3.1700000e+00   8.5385056e+01   2.3678511e+03   661.9043
 271  110     .       2       3.6000000e+00   4.8460345e+00   2.3678511e+03   661.9043
 272  112     .       2       8.1100000e-01   4.6030197e+01   2.3678511e+03   661.9043
 273  113     .       2       3.5400000e+00   9.7659454e+01   2.3678511e+03   661.9043
 274  115     .       2       2.1000000e+00   1.1001623e+01   2.3678511e+03   661.9043
 275  116     .       2       3.1050000e+00   1.8431177e+01   2.3678511e+03   661.9043
 276  117     .       2       1.8720000e+00   4.1226983e+00   2.3678511e+03   661.9043
 277  121     .       2       8.9060000e-01   2.3412111e+00   2.3678511e+03   661.9043
 278  122     .       2       6.1800000e-01   2.9683735e+01   2.3678511e+03   661.9043
 279  123     .       2       2.1030000e+00   2.0033090e+00   2.3678511e+03   661.9043
 280  125     .       2       6.4000000e-01   3.8897507e+01   2.3678511e+03   661.9043
 281  127     .       2       8.5700000e+00   7.1785765e+00   2.3678511e+03   661.9043
 282  136     .       2       1.9000000e-01   8.5246101e+01   2.3678511e+03   661.9043
 283  137     .       2       1.7900000e-01   1.6135063e+01   2.3678511e+03   661.9043
 284  138     .       2       2.0160000e-01   3.6046356e+01   2.3678511e+03   661.9043
 285  139     .       2       2.6100000e-01   3.4147141e+01   2.3678511e+03   661.9043
 286  140     .       2       7.8000000e-01   2.9329662e+00   2.3678511e+03   661.9043
 287  141     .       2       4.0500000e+00   2.0160049e+01   2.3678511e+03   661.9043
 288  144     .       2       2.1850000e+00   3.6548977e+00   2.3678511e+03   661.9043
 289  147     .       2       3.7500000e+00   1.5067195e+01   2.3678511e+03   661.9043
 290  150     .       2       0.0000000e+00   9.0966263e+00   2.3678511e+03   661.9043
 291  105     .       3       7.1400000e-01   1.0669417e+02   2.4028633e+03   382.4497
 292  107     .       3       2.2750000e+00   6.6799994e+02   2.4028633e+03   382.4497
 293  108     .       3       3.1700000e+00   3.2728722e+01   2.4028633e+03   382.4497
 294  111     .       3       3.1230000e+00   1.7410223e+01   2.4028633e+03   382.4497
 295  112     .       3       8.1100000e-01   2.2604292e+01   2.4028633e+03   382.4497
 296  113     .       3       3.5400000e+00   2.8620331e+01   2.4028633e+03   382.4497
 297  115     .       3       2.1000000e+00   5.7003484e+00   2.4028633e+03   382.4497
 298  116     .       3       3.1050000e+00   3.8358997e+01   2.4028633e+03   382.4497
 299  117     .       3       1.8720000e+00   2.4737892e+00   2.4028633e+03   382.4497
 300  122     .       3       6.1800000e-01   7.3385692e+00   2.4028633e+03   382.4497
 301  123     .       3       2.1030000e+00   1.1949412e+00   2.4028633e+03   382.4497
 302  125     .       3       6.4000000e-01   1.1233849e+01   2.4028633e+03   382.4497
 303  127     .       3       8.5700000e+00   3.3337510e+00   2.4028633e+03   382.4497
 304  132     .       3       4.3310000e-01   5.6847515e+01   2.4028633e+03   382.4497
 305  136     .       3       1.9000000e-01   2.0143644e+01   2.4028633e+03   382.4497
 306  138     .       3       2.0160000e-01   1.6282156e+01   2.4028633e+03   382.4497
 307  139     .       3       2.6100000e-01   7.6182823e+01   2.4028633e+03   382.4497
 308  140     .       3       7.8000000e-01   1.4169443e+00   2.4028633e+03   382.4497
 309  141     .       3       4.0500000e+00   2.9979992e+01   2.4028633e+03   382.4497
 310  145     .       3       8.1000000e-01   3.6233332e+00   2.4028633e+03   382.4497
 311  146     .       3       5.9300000e+00   6.5913787e+00   2.4028633e+03   382.4497
 312  147     .       3       3.7500000e+00   3.8388855e+00   2.4028633e+03   382.4497
 313  150     .       3       0.0000000e+00   1.1093981e+01   2.4028633e+03   382.4497
 314  100     .       4       3.8500000e-01   5.8749091e+02   2.5112476e+03   702.3891
 315  105     .       4       7.1400000e-01   2.6717606e+02   2.5112476e+03   702.3891
 316  107     .       4       2.2750000e+00   5.6281354e+02   2.5112476e+03   702.3891
 317  108     .       4       3.1700000e+00   4.2563019e+01   2.5112476e+03   702.3891
 318  109     .       4       6.3700000e-01   1.2727412e+01   2.5112476e+03   702.3891
 319  112     .       4       8.1100000e-01   2.5142517e+01   2.5112476e+03   702.3891
 320  113     .       4       3.5400000e+00   4.7939087e+01   2.5112476e+03   702.3891
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 7
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 321  115     .       4       2.1000000e+00   1.9441469e+01   2.5112476e+03   702.3891
 322  117     .       4       1.8720000e+00   5.7042074e+00   2.5112476e+03   702.3891
 323  122     .       4       6.1800000e-01   9.8314018e+00   2.5112476e+03   702.3891
 324  125     .       4       6.4000000e-01   3.3468307e+01   2.5112476e+03   702.3891
 325  136     .       4       1.9000000e-01   4.8951771e+01   2.5112476e+03   702.3891
 326  138     .       4       2.0160000e-01   3.8609512e+01   2.5112476e+03   702.3891
 327  140     .       4       7.8000000e-01   7.9436736e+00   2.5112476e+03   702.3891
 328  141     .       4       4.0500000e+00   5.3848152e+01   2.5112476e+03   702.3891
 329  144     .       4       2.1850000e+00   7.3397541e+00   2.5112476e+03   702.3891
 330  147     .       4       3.7500000e+00   5.0148621e+00   2.5112476e+03   702.3891
 331  150     .       4       0.0000000e+00   1.0166528e+01   2.5112476e+03   702.3891
 332  ;
 333   
 334    shr(cod,reg)$quan(cod,reg,'povline_a_flex5')
 335                        =price(cod,reg,'price_uw5')*quan(cod,reg,'quan5')/
 336                         quan(cod,reg,'povline_a_flex5');
 337   
 338    chkshr(reg)=sum(cod,shr(cod,reg));
 339   
 340  loop(reg,
 341    abort$(abs(chkshr(reg)-.9) gt .0001) "share does not sum to .9", chkshr ;
 342  );
 343   
 344   
 345  *turn on dynamic sets to indicate positive quantities and existence of
 346  *price info for each region
 347   
 348   posprice(cod,reg)$(price(cod,reg,'price_uw5')
 349                        AND price(cod,reg,'count') gt 4) = yes;
 350   
 351   posquan(cod,reg)$quan(cod,reg,'quan5')=yes;
 352   
 353   shrmiss(regq,reg)=sum(cod$(NOT posprice(cod,reg)), shr(cod,regq));
 354   display shrmiss;
 355   
 356    povline_ali(reg)=sum(cod$posquan(cod,reg),price(cod,reg,'price_uw5')*
 357                                             quan(cod,reg,'quan5'))/.9;
 358   
 359    display povline_ali;
 360   
 361   
 362  *boost values so shares sum to one;
 363  shr(cod,reg)=shr(cod,reg)/chkshr(reg);
 364   
 365  *fill out price matrix with maximum observed price outside of Maputo
 366   
 367  loop((cod,reg)$(NOT posprice(cod,reg) AND posquan(cod,reg)),
 368           loop(r,
 369                   price(cod,reg,'price_uw5')=max(price(cod,reg,'price_uw5'),
 370                                                price(cod,r,'price_uw5'));
 371           );
 372  );
 373   
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 8
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 374  chkprice(cod,reg)$(NOT price(cod,reg,'price_uw5') AND posquan(cod,reg))=yes;
 375   
 376  display 'should be an empty set', chkprice;
 377   
 378   
 379   
 380   
 381  Variables
 382     z                objective value
 383     q(cod,reg)       revised maximum entropy quanties in grams
 384     s(cod,reg)       derived maximum entropy shares
 385     povline(regq,reg)  estimated revealed preference matrix
 386  ;
 387   
 388   
 389  Equations
 390     obj              objective equation
 391     rev(regq,reg)    revealed preference tests
 392     deflin(regq,reg) define revealed preference matrix
 393     defshr(cod,regq) define the endogenous budget shares
 394     cals(regq)       ensure that each bundle hits the calorie
 395   
 396  ;
 397   
 398     obj ..  z=e= sum((cod,rq)$posquan(cod,rq),
 399                     s(cod,rq)*log(s(cod,rq)/shr(cod,rq)));
 400   
 401     deflin(rq,r) .. povline(rq,r) =e= sum(cod$posquan(cod,rq),
 402                            q(cod,rq)*price(cod,r,'price_uw5'));
 403   
 404     rev(rq,r) ..    povline(r,rq)=g=povline(rq,rq);
 405   
 406     defshr(cod,rq)$posquan(cod,rq) ..
 407               povline(rq,rq)*s(cod,rq)=e= q(cod,rq)*price(cod,rq,'price_uw5');
 408   
 409     cals(rq) .. sum(cod$posquan(cod,rq),
 410                      q(cod,rq)*quan(cod,rq,'calperg'))=e=.95*caltarg;
 411   
 412  *set bounds and starting values for variables
 413   
 414    q.lo(cod,reg)=.00001;
 415    q.up(cod,reg)=inf;
 416    q.l(cod,reg)=quan(cod,reg,'quan5');
 417    q.fx(cod,reg)$(NOT posquan(cod,reg))=0;
 418   
 419    povline.l(regq,reg)= sum(cod$posquan(cod,regq),
 420                            q.l(cod,regq)*price(cod,reg,'price_uw5'));
 421   
 422   
 423    display povline.l;
 424   
 425  *print the revealed preference matrix prior to optimisation;
 426  file povline_rp/"/home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/povline_rp_inout.csv"/;
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                         06/11/14 16:30:14 Page 9
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 427  put povline_rp;
 428  povline_rp.pc=5;
 429  povline_rp.nd=0;
 430  put " ";
 431  loop(reg,
 432        put reg.tl;
 433  );
 434  put /;
 435  loop(regq,
 436       put regq.tl;
 437       loop(reg,
 438           put povline.l(regq,reg);
 439       );
 440       put /;
 441  );
 442  put /; put /; put /;
 443   
 444     s.l(cod,regq)= q.l(cod,regq)*price(cod,regq,'price_uw5')/povline.l(regq,regq);
 445     s.lo(cod,regq)=.0001;
 446     s.fx(cod,regq)$(NOT posquan(cod,regq))=0;
 447   
 448   
 449     model revpref /obj, deflin, rev, defshr, cals/;
 450   
 451     revpref.holdfixed=1;
 452   
 453     option limrow=100;
 454   
 455     option nlp=conopt;
 456   
 457     solve revpref using nlp minimizing z;
 458   
 459     povline.l(regq,reg)$(NOT rq(regq) OR NOT r(reg))=0;
 460     display "this is without adjustment for calorie target or 90%", povline.l;
 461   
 462  put /;
 463  loop(rq,
 464       put rq.tl;
 465       loop(r,
 466           put povline.l(rq,r);
 467       );
 468       put /;
 469  );
 470  put /;
 471   
 472   
 473  PARAMETERS
 474     qent(cod,reg)  entropy quantities with all adjustments accounted for
 475     povline_ent(reg) entropy line that hits calorie targets (100% food expen)
 476    ;
 477  *readjust quantities to hit regional calorie target and calculate line;
 478     qent(cod,r)=q.l(cod,r)*quan(cod,r,'calpp')/caltarg;
 479   
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 10
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 480     povline_ent(r)=sum(cod$posquan(cod,r),price(cod,r,'price_uw5')*
 481                                             qent(cod,r))/.9;
 482   
 483     perc_chng(r)=100*(povline_ent(r)/povline_ali(r)-1);
 484   
 485     display perc_chng, povline_ent, povline_ali;
 486   
 487     file res/"/home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/qent.csv"/;
 488   
 489     put res;
 490     res.pc=5;
 491     res.nd=6;
 492   
 493  *recall that the basket reflects 90% of expenditure and 95% of calories";
 494     put "spdomain" ;
 495     put "product" ;
 496     put "quan5";
 497     put "qent";
 498     put "price";
 499     put "calperg";
 500   
 501     put /;
 502   
 503     loop(reg,
 504         loop(cod,
 505             put reg.tl;
 506             put cod.tl;
 507             put quan(cod,reg,'quan5');
 508             put qent(cod,reg);
 509             put price(cod,reg,'price_uw5')
 510             put quan(cod,reg,'calperg');
 511             put /;
 512         );
 513     );
 514   
 515     file lin/"/home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/povline_food_ent.csv"/;
 516   
 517     put lin;
 518     lin.pc=5;
 519  *Flexible, entropy, and fixed food pov lines at 100% expenditure
 520   
 521     put "spdomain";
 522     put "flex";
 523     put "ent";
 524     put /;
 525   
 526     loop(reg,
 527           put reg.tl;
 528           put povline_ali(reg);
 529           put povline_ent(reg);
 530           put /;
 531     );
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 11
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/new/190a_revpref13_r_bjorn.gms
     2       19 INCLUDE        1      19  ./home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/product_flex.inc
     3       99 INCLUDE        1      64  ./home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/price_unit_flex.inc
     4      244 INCLUDE        1      69  ./home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/quan_flex.inc


COMPILATION TIME     =        0.003 SECONDS      3 MB  24.1.2 r40979 LEX-LEG
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 12
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


----    354 PARAMETER shrmiss  shares missing in each region pair

            1           3           4

1                   0.065
2       0.035       0.024
3       0.133                   0.053
4                   0.046


----    359 PARAMETER povline_ali  food poverty line

1 612.115,    2 661.904,    3 382.450,    4 702.389


----    376 should be an empty set

----    376 SET chkprice  ensure that prices exist once all estimated

                                                      ( EMPTY )


----    423 VARIABLE povline.L  estimated revealed preference matrix

            1           2           3           4

1     550.903     490.546     472.580     572.268
2     676.921     595.714     573.955     678.707
3     415.967     373.931     344.205     414.144
4     604.946     538.419     502.245     632.150

GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 13
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE revpref Using NLP From line 457


---- obj  =E=  objective equation

obj..  z - (1)*s(100,1) - (1)*s(100,2) - (1)*s(100,4) - (1)*s(105,1) - (1)*s(105,2) - (1)*s(105,3) - (1)*s(105,4) - (1)*s(107,1) - (1)*s(107,2) - (0.999999999999999)*s(107,3) - (1)*s(107,4) - (1)*s(108,1) - (1)*s(108,2) - (1)*s(108,3) - (1)*s(108,4)
     
      - (1)*s(109,1) - (1)*s(109,4) - (1)*s(110,1) - (1)*s(110,2) - (1)*s(111,3) - (1)*s(112,1) - (0.999999999999999)*s(112,2) - (1)*s(112,3) - (1)*s(112,4) - (1)*s(113,1) - (1)*s(113,2) - (1)*s(113,3) - (1)*s(113,4) - (0.999999999999999)*s(115,2)
     
      - (1)*s(115,3) - (1)*s(115,4) - (1)*s(116,2) - (1)*s(116,3) - (1)*s(117,1) - (1)*s(117,2) - (0.999999999999999)*s(117,3) - (1)*s(117,4) - (1)*s(121,2) - (1)*s(122,1) - (0.999999999999999)*s(122,2) - (1)*s(122,3) - (1)*s(122,4) - (1)*s(123,1)
     
      - (1)*s(123,2) - (1)*s(123,3) - (1)*s(125,1) - (1)*s(125,2) - (1)*s(125,3) - (1)*s(125,4) - (1)*s(127,1) - (1)*s(127,2) - (1)*s(127,3) - (0.999999999999999)*s(132,3) - (1)*s(134,1) - (1)*s(135,1) - (1)*s(136,1) - (1)*s(136,2) - (1)*s(136,3)
     
      - (1)*s(136,4) - (0.999999999999999)*s(137,2) - (1)*s(138,1) - (1)*s(138,2) - (1)*s(138,3) - (1)*s(138,4) - (1)*s(139,2) - (1)*s(139,3) - (1)*s(140,1) - (0.999999999999999)*s(140,2) - (1)*s(140,3) - (1)*s(140,4) - (1)*s(141,1) - (1)*s(141,2)
     
      - (1)*s(141,3) - (1)*s(141,4) - (1)*s(144,1) - (1)*s(144,2) - (1)*s(144,4) - (1)*s(145,3) - (1)*s(146,3) - (1)*s(147,1) - (0.999999999999999)*s(147,2) - (0.999999999999999)*s(147,3) - (1)*s(147,4) - (1)*s(150,1) - (1)*s(150,2) - (1)*s(150,3)
     
      - (1)*s(150,4) =E= 0 ; (LHS = 0)
     

---- deflin  =E=  define revealed preference matrix

deflin(1,1)..  - 0.1995082*q(100,1) - 0.2996547*q(105,1) - 0.0849737*q(107,1) - 0.8555189*q(108,1) - 1.109409*q(109,1) - 1.84392*q(110,1) - 0.3985266*q(112,1) - 1.138484*q(113,1) - 3.972174*q(117,1) - 1.044455*q(122,1) - 6.004713*q(123,1)
     
      - 0.5449679*q(125,1) - 2.320333*q(127,1) - 1.677383*q(134,1) - 0.3083276*q(135,1) - 0.1334951*q(136,1) - 0.4796055*q(138,1) - 4.725954*q(140,1) - 1.300537*q(141,1) - 2.682802*q(144,1) - 2.336171*q(147,1) - 0.8376988*q(150,1) + povline(1,1) =E= 0 ;
     
      (LHS = 0)
     
deflin(1,2)..  - 0.1837012*q(100,1) - 0.2789927*q(105,1) - 0.0720946*q(107,1) - 0.7475146*q(108,1) - 0.6721903*q(109,1) - 1.714604*q(110,1) - 0.3488988*q(112,1) - 0.8975917*q(113,1) - 4.037138*q(117,1) - 0.597783*q(122,1) - 5.787879*q(123,1)
     
      - 0.5955617*q(125,1) - 1.850217*q(127,1) - 1.49172*q(134,1) - 0.2233862*q(135,1) - 0.1454154*q(136,1) - 0.5347914*q(138,1) - 2.902589*q(140,1) - 1.30482*q(141,1) - 2.129502*q(144,1) - 2.311761*q(147,1) - 0.7431083*q(150,1) + povline(1,2) =E= 0 ;
     
      (LHS = 0)
     
deflin(1,3)..  - 0.1812616*q(100,1) - 0.1841896*q(105,1) - 0.0567869*q(107,1) - 0.7749497*q(108,1) - 1.096642*q(109,1) - 1.625357*q(110,1) - 0.2469166*q(112,1) - 1.182202*q(113,1) - 3.737226*q(117,1) - 0.6286831*q(122,1) - 6.591367*q(123,1)
     
      - 0.438356*q(125,1) - 2.599707*q(127,1) - 0.8946471*q(134,1) - 0.283692*q(135,1) - 0.1781978*q(136,1) - 0.2506077*q(138,1) - 2.290602*q(140,1) - 1.373002*q(141,1) - 1.77419*q(144,1) - 2.499254*q(147,1) - 0.6373043*q(150,1) + povline(1,3) =E= 0 ;
     
      (LHS = 0)
     
deflin(1,4)..  - 0.2358728*q(100,1) - 0.3584601*q(105,1) - 0.0792644*q(107,1) - 0.7567931*q(108,1) - 1.073471*q(109,1) - 1.942316*q(110,1) - 0.3994375*q(112,1) - 1.079561*q(113,1) - 4.101431*q(117,1) - 0.9466699*q(122,1) - 5.363903*q(123,1)
     
      - 0.4577087*q(125,1) - 1.976907*q(127,1) - 0.5413278*q(134,1) - 0.3736519*q(135,1) - 0.2142113*q(136,1) - 0.3481294*q(138,1) - 4.551548*q(140,1) - 1.447421*q(141,1) - 2.535281*q(144,1) - 2.402361*q(147,1) - 0.8915389*q(150,1) + povline(1,4) =E= 0 ;
     
      (LHS = 0)
     
deflin(2,1)..  - 0.1995082*q(100,2) - 0.2996547*q(105,2) - 0.0849737*q(107,2) - 0.8555189*q(108,2) - 1.84392*q(110,2) - 0.3985266*q(112,2) - 1.138484*q(113,2) - 1.080527*q(115,2) - 1.324095*q(116,2) - 3.972174*q(117,2) - 6.23049*q(121,2)
     
      - 1.044455*q(122,2) - 6.004713*q(123,2) - 0.5449679*q(125,2) - 2.320333*q(127,2) - 0.1334951*q(136,2) - 0.346612*q(137,2) - 0.4796055*q(138,2) - 0.5618044*q(139,2) - 4.725954*q(140,2) - 1.300537*q(141,2) - 2.682802*q(144,2) - 2.336171*q(147,2)
     
      - 0.8376988*q(150,2) + povline(2,1) =E= 0 ; (LHS = 0)
     
deflin(2,2)..  - 0.1837012*q(100,2) - 0.2789927*q(105,2) - 0.0720946*q(107,2) - 0.7475146*q(108,2) - 1.714604*q(110,2) - 0.3488988*q(112,2) - 0.8975917*q(113,2) - 0.9518308*q(115,2) - 0.6222835*q(116,2) - 4.037138*q(117,2) - 5.080668*q(121,2)
     
      - 0.597783*q(122,2) - 5.787879*q(123,2) - 0.5955617*q(125,2) - 1.850217*q(127,2) - 0.1454154*q(136,2) - 0.4758629*q(137,2) - 0.5347914*q(138,2) - 0.7003802*q(139,2) - 2.902589*q(140,2) - 1.30482*q(141,2) - 2.129502*q(144,2) - 2.311761*q(147,2)
     
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 14
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE revpref Using NLP From line 457


     deflin  =E=  define revealed preference matrix     
     
      - 0.7431083*q(150,2) + povline(2,2) =E= 0 ; (LHS = 0)
     
deflin(2,3)..  - 0.1812616*q(100,2) - 0.1841896*q(105,2) - 0.0567869*q(107,2) - 0.7749497*q(108,2) - 1.625357*q(110,2) - 0.2469166*q(112,2) - 1.182202*q(113,2) - 1.030133*q(115,2) - 0.7958845*q(116,2) - 3.737226*q(117,2) - 4.026635*q(121,2)
     
      - 0.6286831*q(122,2) - 6.591367*q(123,2) - 0.438356*q(125,2) - 2.599707*q(127,2) - 0.1781978*q(136,2) - 0.6426332*q(137,2) - 0.2506077*q(138,2) - 0.4661958*q(139,2) - 2.290602*q(140,2) - 1.373002*q(141,2) - 1.77419*q(144,2) - 2.499254*q(147,2)
     
      - 0.6373043*q(150,2) + povline(2,3) =E= 0 ; (LHS = 0)
     
deflin(2,4)..  - 0.2358728*q(100,2) - 0.3584601*q(105,2) - 0.0792644*q(107,2) - 0.7567931*q(108,2) - 1.942316*q(110,2) - 0.3994375*q(112,2) - 1.079561*q(113,2) - 1.016336*q(115,2) - 1.054614*q(116,2) - 4.101431*q(117,2) - 5.227022*q(121,2)
     
      - 0.9466699*q(122,2) - 5.363903*q(123,2) - 0.4577087*q(125,2) - 1.976907*q(127,2) - 0.2142113*q(136,2) - 0.435698*q(137,2) - 0.3481294*q(138,2) - 0.6134698*q(139,2) - 4.551548*q(140,2) - 1.447421*q(141,2) - 2.535281*q(144,2) - 2.402361*q(147,2)
     
      - 0.8915389*q(150,2) + povline(2,4) =E= 0 ; (LHS = 0)
     
deflin(3,1)..  - 0.2996547*q(105,3) - 0.0849737*q(107,3) - 0.8555189*q(108,3) - 0.3960107*q(111,3) - 0.3985266*q(112,3) - 1.138484*q(113,3) - 1.080527*q(115,3) - 1.324095*q(116,3) - 3.972174*q(117,3) - 1.044455*q(122,3) - 6.004713*q(123,3)
     
      - 0.5449679*q(125,3) - 2.320333*q(127,3) - 0.2626461*q(132,3) - 0.1334951*q(136,3) - 0.4796055*q(138,3) - 0.5618044*q(139,3) - 4.725954*q(140,3) - 1.300537*q(141,3) - 2.700185*q(145,3) - 2.019495*q(146,3) - 2.336171*q(147,3) - 0.8376988*q(150,3)
     
      + povline(3,1) =E= 0 ; (LHS = 0)
     
deflin(3,2)..  - 0.2789927*q(105,3) - 0.0720946*q(107,3) - 0.7475146*q(108,3) - 1.198174*q(111,3) - 0.3488988*q(112,3) - 0.8975917*q(113,3) - 0.9518308*q(115,3) - 0.6222835*q(116,3) - 4.037138*q(117,3) - 0.597783*q(122,3) - 5.787879*q(123,3)
     
      - 0.5955617*q(125,3) - 1.850217*q(127,3) - 0.161007*q(132,3) - 0.1454154*q(136,3) - 0.5347914*q(138,3) - 0.7003802*q(139,3) - 2.902589*q(140,3) - 1.30482*q(141,3) - 1.830377*q(145,3) - 1.900969*q(146,3) - 2.311761*q(147,3) - 0.7431083*q(150,3)
     
      + povline(3,2) =E= 0 ; (LHS = 0)
     
deflin(3,3)..  - 0.1841896*q(105,3) - 0.0567869*q(107,3) - 0.7749497*q(108,3) - 1.131027*q(111,3) - 0.2469166*q(112,3) - 1.182202*q(113,3) - 1.030133*q(115,3) - 0.7958845*q(116,3) - 3.737226*q(117,3) - 0.6286831*q(122,3) - 6.591367*q(123,3)
     
      - 0.438356*q(125,3) - 2.599707*q(127,3) - 0.1041133*q(132,3) - 0.1781978*q(136,3) - 0.2506077*q(138,3) - 0.4661958*q(139,3) - 2.290602*q(140,3) - 1.373002*q(141,3) - 1.799268*q(145,3) - 2.082065*q(146,3) - 2.499254*q(147,3) - 0.6373043*q(150,3)
     
      + povline(3,3) =E= 0 ; (LHS = 0)
     
deflin(3,4)..  - 0.3584601*q(105,3) - 0.0792644*q(107,3) - 0.7567931*q(108,3) - 0.8062435*q(111,3) - 0.3994375*q(112,3) - 1.079561*q(113,3) - 1.016336*q(115,3) - 1.054614*q(116,3) - 4.101431*q(117,3) - 0.9466699*q(122,3) - 5.363903*q(123,3)
     
      - 0.4577087*q(125,3) - 1.976907*q(127,3) - 0.2319471*q(132,3) - 0.2142113*q(136,3) - 0.3481294*q(138,3) - 0.6134698*q(139,3) - 4.551548*q(140,3) - 1.447421*q(141,3) - 3.487448*q(145,3) - 1.704909*q(146,3) - 2.402361*q(147,3) - 0.8915389*q(150,3)
     
      + povline(3,4) =E= 0 ; (LHS = 0)
     
deflin(4,1)..  - 0.1995082*q(100,4) - 0.2996547*q(105,4) - 0.0849737*q(107,4) - 0.8555189*q(108,4) - 1.109409*q(109,4) - 0.3985266*q(112,4) - 1.138484*q(113,4) - 1.080527*q(115,4) - 3.972174*q(117,4) - 1.044455*q(122,4) - 0.5449679*q(125,4)
     
      - 0.1334951*q(136,4) - 0.4796055*q(138,4) - 4.725954*q(140,4) - 1.300537*q(141,4) - 2.682802*q(144,4) - 2.336171*q(147,4) - 0.8376988*q(150,4) + povline(4,1) =E= 0 ; (LHS = 0)
     
deflin(4,2)..  - 0.1837012*q(100,4) - 0.2789927*q(105,4) - 0.0720946*q(107,4) - 0.7475146*q(108,4) - 0.6721903*q(109,4) - 0.3488988*q(112,4) - 0.8975917*q(113,4) - 0.9518308*q(115,4) - 4.037138*q(117,4) - 0.597783*q(122,4) - 0.5955617*q(125,4)
     
      - 0.1454154*q(136,4) - 0.5347914*q(138,4) - 2.902589*q(140,4) - 1.30482*q(141,4) - 2.129502*q(144,4) - 2.311761*q(147,4) - 0.7431083*q(150,4) + povline(4,2) =E= 0 ; (LHS = 0)
     
deflin(4,3)..  - 0.1812616*q(100,4) - 0.1841896*q(105,4) - 0.0567869*q(107,4) - 0.7749497*q(108,4) - 1.096642*q(109,4) - 0.2469166*q(112,4) - 1.182202*q(113,4) - 1.030133*q(115,4) - 3.737226*q(117,4) - 0.6286831*q(122,4) - 0.438356*q(125,4)
     
      - 0.1781978*q(136,4) - 0.2506077*q(138,4) - 2.290602*q(140,4) - 1.373002*q(141,4) - 1.77419*q(144,4) - 2.499254*q(147,4) - 0.6373043*q(150,4) + povline(4,3) =E= 0 ; (LHS = 0)
     
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 15
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE revpref Using NLP From line 457


     deflin  =E=  define revealed preference matrix

deflin(4,4)..  - 0.2358728*q(100,4) - 0.3584601*q(105,4) - 0.0792644*q(107,4) - 0.7567931*q(108,4) - 1.073471*q(109,4) - 0.3994375*q(112,4) - 1.079561*q(113,4) - 1.016336*q(115,4) - 4.101431*q(117,4) - 0.9466699*q(122,4) - 0.4577087*q(125,4)
     
      - 0.2142113*q(136,4) - 0.3481294*q(138,4) - 4.551548*q(140,4) - 1.447421*q(141,4) - 2.535281*q(144,4) - 2.402361*q(147,4) - 0.8915389*q(150,4) + povline(4,4) =E= 0 ; (LHS = 0)
     

---- rev  =G=  revealed preference tests

rev(1,2)..  - povline(1,1) + povline(2,1) =G= 0 ; (LHS = 126.018073597454)
     
rev(1,3)..  - povline(1,1) + povline(3,1) =G= 0 ; (LHS = -134.936376034019, INFES = 134.936376034019 ****)
     
rev(1,4)..  - povline(1,1) + povline(4,1) =G= 0 ; (LHS = 54.0432280710278)
     
rev(2,1)..  povline(1,2) - povline(2,2) =G= 0 ; (LHS = -105.167446149138, INFES = 105.167446149138 ****)
     
rev(2,3)..  - povline(2,2) + povline(3,2) =G= 0 ; (LHS = -221.782972216801, INFES = 221.782972216801 ****)
     
rev(2,4)..  - povline(2,2) + povline(4,2) =G= 0 ; (LHS = -57.2945480244373, INFES = 57.2945480244373 ****)
     
rev(3,1)..  povline(1,3) - povline(3,3) =G= 0 ; (LHS = 128.374749250035)
     
rev(3,2)..  povline(2,3) - povline(3,3) =G= 0 ; (LHS = 229.749753147012)
     
rev(3,4)..  - povline(3,3) + povline(4,3) =G= 0 ; (LHS = 158.039803724659)
     
rev(4,1)..  povline(1,4) - povline(4,4) =G= 0 ; (LHS = -59.8825983965223, INFES = 59.8825983965223 ****)
     
rev(4,2)..  povline(2,4) - povline(4,4) =G= 0 ; (LHS = 46.5570634576795)
     
rev(4,3)..  povline(3,4) - povline(4,4) =G= 0 ; (LHS = -218.00653322096, INFES = 218.00653322096 ****)
     

---- defshr  =E=  define the endogenous budget shares

defshr(100,1)..  - 0.1995082*q(100,1) + (550.903177759207)*s(100,1) + (0.147969927586074)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(100,2)..  - 0.1837012*q(100,2) + (595.713866955091)*s(100,2) + (0.067684634894839)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(100,4)..  - 0.2358728*q(100,4) + (632.150195509805)*s(100,4) + (0.219209179876143)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(105,1)..  - 0.2996547*q(105,1) + (550.903177759207)*s(105,1) + (0.126982643543352)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(105,2)..  - 0.2789927*q(105,2) + (595.713866955091)*s(105,2) + (0.147249275271121)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(105,3)..  - 0.1841896*q(105,3) + (344.204767902195)*s(105,3) + (0.0570937951104038)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(105,4)..  - 0.3584601*q(105,4) + (632.150195509805)*s(105,4) + (0.151501902341373)*povline(4,4) =E= 0 ; (LHS = 0)
     
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 16
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE revpref Using NLP From line 457


     defshr  =E=  define the endogenous budget shares

defshr(107,1)..  - 0.0849737*q(107,1) + (550.903177759207)*s(107,1) + (0.0933629993881179)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(107,2)..  - 0.0720946*q(107,2) + (595.713866955091)*s(107,2) + (0.0471592041745503)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(107,3)..  - 0.0567869*q(107,3) + (344.204767902195)*s(107,3) + (0.110206625038863)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(107,4)..  - 0.0792644*q(107,4) + (632.150195509805)*s(107,4) + (0.0705703769086061)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(108,1)..  - 0.8555189*q(108,1) + (550.903177759207)*s(108,1) + (0.0229139857223195)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(108,2)..  - 0.7475146*q(108,2) + (595.713866955091)*s(108,2) + (0.10714300861932)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(108,3)..  - 0.7749497*q(108,3) + (344.204767902195)*s(108,3) + (0.0736861184400859)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(108,4)..  - 0.7567931*q(108,4) + (632.150195509805)*s(108,4) + (0.0509552940474718)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(109,1)..  - 1.109409*q(109,1) + (550.903177759207)*s(109,1) + (0.0113341998885786)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(109,4)..  - 1.073471*q(109,4) + (632.150195509805)*s(109,4) + (0.0216127556142472)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(110,1)..  - 1.84392*q(110,1) + (550.903177759207)*s(110,1) + (0.0279389140104026)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(110,2)..  - 1.714604*q(110,2) + (595.713866955091)*s(110,2) + (0.0139480220265955)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(111,3)..  - 1.131027*q(111,3) + (344.204767902195)*s(111,3) + (0.0572084820586108)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(112,1)..  - 0.3985266*q(112,1) + (550.903177759207)*s(112,1) + (0.0190099932953011)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(112,2)..  - 0.3488988*q(112,2) + (595.713866955091)*s(112,2) + (0.0269590509604073)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(112,3)..  - 0.2469166*q(112,3) + (344.204767902195)*s(112,3) + (0.0162152748785663)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(112,4)..  - 0.3994375*q(112,4) + (632.150195509805)*s(112,4) + (0.0158868322837238)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(113,1)..  - 1.138484*q(113,1) + (550.903177759207)*s(113,1) + (0.134900265869701)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(113,2)..  - 0.8975917*q(113,2) + (595.713866955091)*s(113,2) + (0.147148354603503)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(113,3)..  - 1.182202*q(113,3) + (344.204767902195)*s(113,3) + (0.0982990815469359)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(113,4)..  - 1.079561*q(113,4) + (632.150195509805)*s(113,4) + (0.0818684690258935)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(115,2)..  - 0.9518308*q(115,2) + (595.713866955091)*s(115,2) + (0.0175783781480746)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(115,3)..  - 1.030133*q(115,3) + (344.204767902195)*s(115,3) + (0.0170599525222316)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(115,4)..  - 1.016336*q(115,4) + (632.150195509805)*s(115,4) + (0.0312569148565225)*povline(4,4) =E= 0 ; (LHS = 0)
     
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 17
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE revpref Using NLP From line 457


     defshr  =E=  define the endogenous budget shares

defshr(116,2)..  - 0.6222835*q(116,2) + (595.713866955091)*s(116,2) + (0.0192532320781852)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(116,3)..  - 0.7958845*q(116,3) + (344.204767902195)*s(116,3) + (0.0886952593187825)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(117,1)..  - 3.972174*q(117,1) + (550.903177759207)*s(117,1) + (0.0356690161992935)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(117,2)..  - 4.037138*q(117,2) + (595.713866955091)*s(117,2) + (0.0279394234257772)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(117,3)..  - 3.737226*q(117,3) + (344.204767902195)*s(117,3) + (0.0268593296168)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(117,4)..  - 4.101431*q(117,4) + (632.150195509805)*s(117,4) + (0.0370092633474896)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(121,2)..  - 5.080668*q(121,2) + (595.713866955091)*s(121,2) + (0.0199674994604608)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(122,1)..  - 1.044455*q(122,1) + (550.903177759207)*s(122,1) + (0.0224150807996381)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(122,2)..  - 0.597783*q(122,2) + (595.713866955091)*s(122,2) + (0.029786837513458)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(122,3)..  - 0.6286831*q(122,3) + (344.204767902195)*s(122,3) + (0.0134037493505362)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(122,4)..  - 0.9466699*q(122,4) + (632.150195509805)*s(122,4) + (0.01472291272703)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(123,1)..  - 6.004713*q(123,1) + (550.903177759207)*s(123,1) + (0.015133566136275)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(123,2)..  - 5.787879*q(123,2) + (595.713866955091)*s(123,2) + (0.0194638915338278)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(123,3)..  - 6.591367*q(123,3) + (344.204767902195)*s(123,3) + (0.0228825882936591)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(125,1)..  - 0.5449679*q(125,1) + (550.903177759207)*s(125,1) + (0.0252341760897954)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(125,2)..  - 0.5955617*q(125,2) + (595.713866955091)*s(125,2) + (0.0388875711641413)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(125,3)..  - 0.438356*q(125,3) + (344.204767902195)*s(125,3) + (0.0143066731534738)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(125,4)..  - 0.4577087*q(125,4) + (632.150195509805)*s(125,4) + (0.0242327462634365)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(127,1)..  - 2.320333*q(127,1) + (550.903177759207)*s(127,1) + (0.0225333216949434)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(127,2)..  - 1.850217*q(127,2) + (595.713866955091)*s(127,2) + (0.022295811819841)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(127,3)..  - 2.599707*q(127,3) + (344.204767902195)*s(127,3) + (0.0251791277145227)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(132,3)..  - 0.1041133*q(132,3) + (344.204767902195)*s(132,3) + (0.0171949459605721)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(134,1)..  - 1.677383*q(134,1) + (550.903177759207)*s(134,1) + (0.0165240478971611)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(135,1)..  - 0.3083276*q(135,1) + (550.903177759207)*s(135,1) + (0.0130054691448638)*povline(1,1) =E= 0 ; (LHS = 0)
     
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 18
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE revpref Using NLP From line 457


     defshr  =E=  define the endogenous budget shares

defshr(136,1)..  - 0.1334951*q(136,1) + (550.903177759207)*s(136,1) + (0.0255433609783981)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(136,2)..  - 0.1454154*q(136,2) + (595.713866955091)*s(136,2) + (0.020808808662985)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(136,3)..  - 0.1781978*q(136,3) + (344.204767902195)*s(136,3) + (0.0104285395773575)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(136,4)..  - 0.2142113*q(136,4) + (632.150195509805)*s(136,4) + (0.0165878656333496)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(137,2)..  - 0.4758629*q(137,2) + (595.713866955091)*s(137,2) + (0.0128888687955312)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(138,1)..  - 0.4796055*q(138,1) + (550.903177759207)*s(138,1) + (0.0137725633915309)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(138,2)..  - 0.5347914*q(138,2) + (595.713866955091)*s(138,2) + (0.0323599671914162)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(138,3)..  - 0.2506077*q(138,3) + (344.204767902195)*s(138,3) + (0.0118546692164376)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(138,4)..  - 0.3481294*q(138,4) + (632.150195509805)*s(138,4) + (0.0212625201136149)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(139,2)..  - 0.7003802*q(139,2) + (595.713866955091)*s(139,2) + (0.0401467596603911)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(139,3)..  - 0.4661958*q(139,3) + (344.204767902195)*s(139,3) + (0.10318309165559)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(140,1)..  - 4.725954*q(140,1) + (550.903177759207)*s(140,1) + (0.0312091503214631)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(140,2)..  - 2.902589*q(140,2) + (595.713866955091)*s(140,2) + (0.0142907457786837)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(140,3)..  - 2.290602*q(140,3) + (344.204767902195)*s(140,3) + (0.00942943198390223)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(140,4)..  - 4.551548*q(140,4) + (632.150195509805)*s(140,4) + (0.0571952867270323)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(141,1)..  - 1.300537*q(141,1) + (550.903177759207)*s(141,1) + (0.0712251634654367)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(141,2)..  - 1.30482*q(141,2) + (595.713866955091)*s(141,2) + (0.0441575000941905)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(141,3)..  - 1.373002*q(141,3) + (344.204767902195)*s(141,3) + (0.119587503760785)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(141,4)..  - 1.447421*q(141,4) + (632.150195509805)*s(141,4) + (0.123294980480289)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(144,1)..  - 2.682802*q(144,1) + (550.903177759207)*s(144,1) + (0.0327328293544998)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(144,2)..  - 2.129502*q(144,2) + (595.713866955091)*s(144,2) + (0.0130651851395162)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(144,4)..  - 2.535281*q(144,4) + (632.150195509805)*s(144,4) + (0.0294365789120656)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(145,3)..  - 1.799268*q(145,3) + (344.204767902195)*s(145,3) + (0.0189403171833752)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(146,3)..  - 2.082065*q(146,3) + (344.204767902195)*s(146,3) + (0.0398706821426572)*povline(3,3) =E= 0 ; (LHS = 0)
     
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 19
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE revpref Using NLP From line 457


     defshr  =E=  define the endogenous budget shares

defshr(147,1)..  - 2.336171*q(147,1) + (550.903177759207)*s(147,1) + (0.0722644298222342)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(147,2)..  - 2.311761*q(147,2) + (595.713866955091)*s(147,2) + (0.0584706109972439)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(147,3)..  - 2.499254*q(147,3) + (344.204767902195)*s(147,3) + (0.0278739600264434)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(147,4)..  - 2.402361*q(147,4) + (632.150195509805)*s(147,4) + (0.0190579852936726)*povline(4,4) =E= 0 ; (LHS = 0)
     
defshr(150,1)..  - 0.8376988*q(150,1) + (550.903177759207)*s(150,1) + (0.0183248954006203)*povline(1,1) =E= 0 ; (LHS = 0)
     
defshr(150,2)..  - 0.7431083*q(150,2) + (595.713866955091)*s(150,2) + (0.0113473579859404)*povline(2,2) =E= 0 ; (LHS = 0)
     
defshr(150,3)..  - 0.6373043*q(150,3) + (344.204767902195)*s(150,3) + (0.0205408014494073)*povline(3,3) =E= 0 ; (LHS = 0)
     
defshr(150,4)..  - 0.8915389*q(150,4) + (632.150195509805)*s(150,4) + (0.0143381355480394)*povline(4,4) =E= 0 ; (LHS = 0)
     

---- cals  =E=  ensure that each bundle hits the calorie

cals(1)..  0.385*q(100,1) + 0.714*q(105,1) + 2.275*q(107,1) + 3.17*q(108,1) + 0.637*q(109,1) + 3.6*q(110,1) + 0.811*q(112,1) + 3.54*q(113,1) + 1.872*q(117,1) + 0.618*q(122,1) + 2.103*q(123,1) + 0.64*q(125,1) + 8.57*q(127,1) + 0.494*q(134,1)
     
      + 0.364*q(135,1) + 0.19*q(136,1) + 0.2016*q(138,1) + 0.78*q(140,1) + 4.05*q(141,1) + 2.185*q(144,1) + 3.75*q(147,1) =E= 2042.5 ; (LHS = 2353.4743421863, INFES = 310.9743421863 ****)
     
cals(2)..  0.385*q(100,2) + 0.714*q(105,2) + 2.275*q(107,2) + 3.17*q(108,2) + 3.6*q(110,2) + 0.811*q(112,2) + 3.54*q(113,2) + 2.1*q(115,2) + 3.105*q(116,2) + 1.872*q(117,2) + 0.8906*q(121,2) + 0.618*q(122,2) + 2.103*q(123,2) + 0.64*q(125,2)
     
      + 8.57*q(127,2) + 0.19*q(136,2) + 0.179*q(137,2) + 0.2016*q(138,2) + 0.261*q(139,2) + 0.78*q(140,2) + 4.05*q(141,2) + 2.185*q(144,2) + 3.75*q(147,2) =E= 2042.5 ; (LHS = 2249.45857867536, INFES = 206.958578675361 ****)
     
cals(3)..  0.714*q(105,3) + 2.275*q(107,3) + 3.17*q(108,3) + 3.123*q(111,3) + 0.811*q(112,3) + 3.54*q(113,3) + 2.1*q(115,3) + 3.105*q(116,3) + 1.872*q(117,3) + 0.618*q(122,3) + 2.103*q(123,3) + 0.64*q(125,3) + 8.57*q(127,3) + 0.4331*q(132,3)
     
      + 0.19*q(136,3) + 0.2016*q(138,3) + 0.261*q(139,3) + 0.78*q(140,3) + 4.05*q(141,3) + 0.81*q(145,3) + 5.93*q(146,3) + 3.75*q(147,3) =E= 2042.5 ; (LHS = 2282.7201167687, INFES = 240.220116768699 ****)
     
cals(4)..  0.385*q(100,4) + 0.714*q(105,4) + 2.275*q(107,4) + 3.17*q(108,4) + 0.637*q(109,4) + 0.811*q(112,4) + 3.54*q(113,4) + 2.1*q(115,4) + 1.872*q(117,4) + 0.618*q(122,4) + 0.64*q(125,4) + 0.19*q(136,4) + 0.2016*q(138,4) + 0.78*q(140,4)
     
      + 4.05*q(141,4) + 2.185*q(144,4) + 3.75*q(147,4) =E= 2042.5 ; (LHS = 2385.6851662769, INFES = 343.1851662769 ****)
     
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 20
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Column Listing      SOLVE revpref Using NLP From line 457


---- z  objective value

z
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       obj


---- q  revised maximum entropy quanties in grams

q(100,1)
                (.LO, .L, .UP, .M = 1E-5, 408.59024, +INF, 0)
       -0.1995  deflin(1,1)
       -0.1837  deflin(1,2)
       -0.1813  deflin(1,3)
       -0.2359  deflin(1,4)
       -0.1995  defshr(100,1)
        0.385   cals(1)

q(100,2)
                (.LO, .L, .UP, .M = 1E-5, 219.49054, +INF, 0)
       -0.1995  deflin(2,1)
       -0.1837  deflin(2,2)
       -0.1813  deflin(2,3)
       -0.2359  deflin(2,4)
       -0.1837  defshr(100,2)
        0.385   cals(2)

q(100,4)
                (.LO, .L, .UP, .M = 1E-5, 587.49091, +INF, 0)
       -0.1995  deflin(4,1)
       -0.1837  deflin(4,2)
       -0.1813  deflin(4,3)
       -0.2359  deflin(4,4)
       -0.2359  defshr(100,4)
        0.385   cals(4)

REMAINING 84 ENTRIES SKIPPED

---- s  derived maximum entropy shares

s(100,1)
                (.LO, .L, .UP, .M = 0.0001, 0.147969927586074, +INF, 0)
      (-1)      obj
     (550.9032) defshr(100,1)

s(100,2)
                (.LO, .L, .UP, .M = 0.0001, 0.067684634894839, +INF, 0)
      (-1)      obj
     (595.7139) defshr(100,2)

s(100,4)
                (.LO, .L, .UP, .M = 0.0001, 0.219209179876143, +INF, 0)
      (-1)      obj
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 21
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Column Listing      SOLVE revpref Using NLP From line 457


     s  derived maximum entropy shares

     (632.1502) defshr(100,4)

REMAINING 84 ENTRIES SKIPPED

---- povline  estimated revealed preference matrix

povline(1,1)
                (.LO, .L, .UP, .M = -INF, 550.903177759207, +INF, 0)
        1       deflin(1,1)
       -1       rev(1,2)
       -1       rev(1,3)
       -1       rev(1,4)
       (0.148)  defshr(100,1)
       (0.127)  defshr(105,1)
       (0.0934) defshr(107,1)
       (0.0229) defshr(108,1)
       (0.0113) defshr(109,1)
       (0.0279) defshr(110,1)
       (0.019)  defshr(112,1)
       (0.1349) defshr(113,1)
       (0.0357) defshr(117,1)
       (0.0224) defshr(122,1)
       (0.0151) defshr(123,1)
       (0.0252) defshr(125,1)
       (0.0225) defshr(127,1)
       (0.0165) defshr(134,1)
       (0.013)  defshr(135,1)
       (0.0255) defshr(136,1)
       (0.0138) defshr(138,1)
       (0.0312) defshr(140,1)
       (0.0712) defshr(141,1)
       (0.0327) defshr(144,1)
       (0.0723) defshr(147,1)
       (0.0183) defshr(150,1)

povline(1,2)
                (.LO, .L, .UP, .M = -INF, 490.546420805953, +INF, 0)
        1       deflin(1,2)
        1       rev(2,1)

povline(1,3)
                (.LO, .L, .UP, .M = -INF, 472.57951715223, +INF, 0)
        1       deflin(1,3)
        1       rev(3,1)

REMAINING 13 ENTRIES SKIPPED
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 22
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Model Statistics    SOLVE revpref Using NLP From line 457


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS          120
BLOCKS OF VARIABLES           4     SINGLE VARIABLES          191
NON ZERO ELEMENTS           820     NON LINEAR N-Z            261
DERIVATIVE POOL              10     CONSTANT POOL             103
CODE LENGTH                 785


GENERATION TIME      =        0.007 SECONDS      4 MB  24.1.2 r40979 LEX-LEG


EXECUTION TIME       =        0.009 SECONDS      4 MB  24.1.2 r40979 LEX-LEG
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 23
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


               S O L V E      S U M M A R Y

     MODEL   revpref             OBJECTIVE  z
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  CONOPT              FROM LINE  457

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      2 Locally Optimal           
**** OBJECTIVE VALUE                0.0355

 RESOURCE USAGE, LIMIT          0.048      1000.000
 ITERATION COUNT, LIMIT        86    2000000000
 EVALUATION ERRORS              0             0
CONOPT 3         24.1.2 r40979 Released Jun 16, 2013 LEG x86_64/Linux         
 
 
    C O N O P T 3   version 3.15K
    Copyright (C)   ARKI Consulting and Development A/S
                    Bagsvaerdvej 246 A
                    DK-2880 Bagsvaerd, Denmark
 
 
    The model has 191 variables and 120 constraints
    with 820 Jacobian elements, 261 of which are nonlinear.
    The Hessian of the Lagrangian has 87 elements on the diagonal,
    87 elements below the diagonal, and 91 nonlinear variables.
 
 ** Optimal solution. Reduced gradient less than tolerance.
 
 
 CONOPT time Total                            0.048 seconds
   of which: Function evaluations             0.013 = 27.1%
             1st Derivative evaluations       0.002 =  4.2%
             2nd Derivative evaluations       0.002 =  4.2%
             Directional 2nd Derivative       0.001 =  2.1%
 

                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU obj                 .              .              .             1.0000      

  obj  objective equation

---- EQU deflin  define revealed preference matrix

           LOWER          LEVEL          UPPER         MARGINAL

1.1          .              .              .            -0.0015      
1.2          .              .              .            -0.0006      
1.3          .              .              .             EPS         
1.4          .              .              .             EPS         
2.1          .              .              .             EPS         
2.2          .              .              .            -0.0012      
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 24
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


     EQU deflin  define revealed preference matrix

           LOWER          LEVEL          UPPER         MARGINAL

2.3          .              .              .             EPS         
2.4          .              .              .            -0.0008      
3.1          .              .              .             EPS         
3.2          .              .              .             EPS         
3.3          .              .              .            -0.0018      
3.4          .              .              .            -0.0007      
4.1          .              .              .            -0.0005      
4.2          .              .              .            -0.0005      
4.3          .              .              .            -0.0007      
4.4          .              .              .            -0.0004      

---- EQU rev  revealed preference tests

           LOWER          LEVEL          UPPER         MARGINAL

1.2          .            14.7973        +INF             .          
1.3          .            14.7494        +INF             .          
1.4          .              .            +INF            0.0005      
2.1          .              .            +INF            0.0006      
2.3          .            12.4258        +INF            EPS         
2.4          .              .            +INF            0.0005      
3.1          .            11.2266        +INF            EPS         
3.2          .            12.7975        +INF            EPS         
3.4          .              .            +INF            0.0007      
4.1          .             4.2828        +INF            EPS         
4.2          .              .            +INF            0.0008      
4.3          .              .            +INF            0.0007      

---- EQU defshr  define the endogenous budget shares

             LOWER          LEVEL          UPPER         MARGINAL

100.1          .              .              .             0.0020      
100.2          .              .              .             0.0023      
100.4          .              .              .             0.0018      
105.1          .              .              .             0.0021      
105.2          .              .              .             0.0023      
105.3          .              .              .             0.0030      
105.4          .              .              .             0.0016      
107.1          .              .              .             0.0019      
107.2          .              .              .             0.0033      
107.3          .              .              .             0.0012      
107.4          .              .              .             0.0021      
108.1          .              .              .             0.0020      
108.2          .              .              .             0.0022      
108.3          .              .              .             0.0023      
108.4          .              .              .             0.0023      
109.1          .              .              .             0.0019      
109.4          .              .              .             0.0020      
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 25
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


     EQU defshr  define the endogenous budget shares

             LOWER          LEVEL          UPPER         MARGINAL

110.1          .              .              .             0.0021      
110.2          .              .              .             0.0022      
111.3          .              .              .             0.0022      
112.1          .              .              .             0.0020      
112.2          .              .              .             0.0022      
112.3          .              .              .             0.0028      
112.4          .              .              .             0.0018      
113.1          .              .              .             0.0020      
113.2          .              .              .             0.0023      
113.3          .              .              .             0.0023      
113.4          .              .              .             0.0022      
115.2          .              .              .             0.0021      
115.3          .              .              .             0.0024      
115.4          .              .              .             0.0022      
116.2          .              .              .             0.0027      
116.3          .              .              .             0.0026      
117.1          .              .              .             0.0021      
117.2          .              .              .             0.0020      
117.3          .              .              .             0.0025      
117.4          .              .              .             0.0021      
121.2          .              .              .             0.0020      
122.1          .              .              .             0.0019      
122.2          .              .              .             0.0025      
122.3          .              .              .             0.0028      
122.4          .              .              .             0.0018      
123.1          .              .              .             0.0021      
123.2          .              .              .             0.0019      
123.3          .              .              .             0.0023      
125.1          .              .              .             0.0021      
125.2          .              .              .             0.0018      
125.3          .              .              .             0.0025      
125.4          .              .              .             0.0024      
127.1          .              .              .             0.0020      
127.2          .              .              .             0.0022      
127.3          .              .              .             0.0022      
132.3          .              .              .             0.0032      
134.1          .              .              .             0.0020      
135.1          .              .              .             0.0019      
136.1          .              .              .             0.0021      
136.2          .              .              .             0.0024      
136.3          .              .              .             0.0026      
136.4          .              .              .             0.0017      
137.2          .              .              .             0.0019      
138.1          .              .              .             0.0022      
138.2          .              .              .             0.0017      
138.3          .              .              .             0.0027      
138.4          .              .              .             0.0025      
139.2          .              .              .             0.0019      
139.3          .              .              .             0.0027      
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 26
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


     EQU defshr  define the endogenous budget shares

             LOWER          LEVEL          UPPER         MARGINAL

140.1          .              .              .             0.0019      
140.2          .              .              .             0.0025      
140.3          .              .              .             0.0032      
140.4          .              .              .             0.0016      
141.1          .              .              .             0.0021      
141.2          .              .              .             0.0022      
141.3          .              .              .             0.0024      
141.4          .              .              .             0.0020      
144.1          .              .              .             0.0020      
144.2          .              .              .             0.0022      
144.4          .              .              .             0.0019      
145.3          .              .              .             0.0031      
146.3          .              .              .             0.0022      
147.1          .              .              .             0.0021      
147.2          .              .              .             0.0021      
147.3          .              .              .             0.0024      
147.4          .              .              .             0.0022      
150.1          .              .              .             0.0020      
150.2          .              .              .             0.0021      
150.3          .              .              .             0.0028      
150.4          .              .              .             0.0018      

---- EQU cals  ensure that each bundle hits the calorie

         LOWER          LEVEL          UPPER         MARGINAL

1      2042.5000      2042.5000      2042.5000   -4.605227E-6      
2      2042.5000      2042.5000      2042.5000   3.8541426E-5      
3      2042.5000      2042.5000      2042.5000   -4.009351E-5      
4      2042.5000      2042.5000      2042.5000   6.1573078E-6      

                           LOWER          LEVEL          UPPER         MARGINAL

---- VAR z                 -INF            0.0355        +INF             .          

  z  objective value

---- VAR q  revised maximum entropy quanties in grams

             LOWER          LEVEL          UPPER         MARGINAL

100.1   1.0000000E-5       371.9545        +INF            EPS         
100.2   1.0000000E-5       165.4512        +INF             .          
100.4   1.0000000E-5       442.3332        +INF             .          
105.1   1.0000000E-5       212.9230        +INF             .          
105.2   1.0000000E-5       238.9556        +INF             .          
105.3   1.0000000E-5       164.1276        +INF            EPS         
105.4   1.0000000E-5       183.9970        +INF             .          
107.1   1.0000000E-5       510.0745        +INF             .          
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 27
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


     VAR q  revised maximum entropy quanties in grams

             LOWER          LEVEL          UPPER         MARGINAL

107.2   1.0000000E-5       454.1368        +INF             .          
107.3   1.0000000E-5       479.1479        +INF             .          
107.4   1.0000000E-5       497.8343        +INF             .          
108.1   1.0000000E-5        13.2001        +INF             .          
108.2   1.0000000E-5        60.5023        +INF            EPS         
108.3   1.0000000E-5        37.7537        +INF             .          
108.4   1.0000000E-5        40.1961        +INF             .          
109.1   1.0000000E-5         4.6988        +INF             .          
109.4   1.0000000E-5        10.4711        +INF             .          
110.1   1.0000000E-5         7.6181        +INF             .          
110.2   1.0000000E-5         3.4583        +INF             .          
111.3   1.0000000E-5        19.0042        +INF            EPS         
112.1   1.0000000E-5        23.6101        +INF             .          
112.2   1.0000000E-5        33.1195        +INF             .          
112.3   1.0000000E-5        31.8920        +INF             .          
112.4   1.0000000E-5        19.2059        +INF             .          
113.1   1.0000000E-5        57.0731        +INF            EPS         
113.2   1.0000000E-5        73.7678        +INF             .          
113.3   1.0000000E-5        33.0025        +INF            EPS         
113.4   1.0000000E-5        43.4392        +INF             .          
115.2   1.0000000E-5         7.6822        +INF             .          
115.3   1.0000000E-5         6.8238        +INF             .          
115.4   1.0000000E-5        17.6115        +INF             .          
116.2   1.0000000E-5        16.9401        +INF             .          
116.3   1.0000000E-5        49.1636        +INF             .          
117.1   1.0000000E-5         4.6430        +INF             .          
117.2   1.0000000E-5         2.7424        +INF             .          
117.3   1.0000000E-5         3.1384        +INF             .          
117.4   1.0000000E-5         4.9108        +INF             .          
121.2   1.0000000E-5         1.5570        +INF             .          
122.1   1.0000000E-5         9.7763        +INF             .          
122.2   1.0000000E-5        24.4949        +INF             .          
122.3   1.0000000E-5        10.4105        +INF             .          
122.4   1.0000000E-5         7.2914        +INF             .          
123.1   1.0000000E-5         1.2842        +INF             .          
123.2   1.0000000E-5         1.2880        +INF             .          
123.3   1.0000000E-5         1.3992        +INF             .          
125.1   1.0000000E-5        24.4296        +INF             .          
125.2   1.0000000E-5        23.9033        +INF             .          
125.3   1.0000000E-5        13.8089        +INF             .          
125.4   1.0000000E-5        33.9463        +INF             .          
127.1   1.0000000E-5         4.6833        +INF             .          
127.2   1.0000000E-5         5.2258        +INF             .          
127.3   1.0000000E-5         3.6574        +INF            EPS         
132.3   1.0000000E-5        94.5312        +INF             .          
134.1   1.0000000E-5         4.9146        +INF             .          
135.1   1.0000000E-5        20.0386        +INF             .          
136.1   1.0000000E-5       100.7920        +INF             .          
136.2   1.0000000E-5        67.8971        +INF             .          
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 28
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


     VAR q  revised maximum entropy quanties in grams

             LOWER          LEVEL          UPPER         MARGINAL

136.3   1.0000000E-5        26.1050        +INF            EPS         
136.4   1.0000000E-5        34.5418        +INF             .          
137.2   1.0000000E-5        10.3344        +INF            EPS         
138.1   1.0000000E-5        15.2729        +INF             .          
138.2   1.0000000E-5        20.9758        +INF             .          
138.3   1.0000000E-5        22.3875        +INF             .          
138.4   1.0000000E-5        40.2999        +INF             .          
139.2   1.0000000E-5        21.5572        +INF             .          
139.3   1.0000000E-5       102.9416        +INF      -3.21756E-11      
140.1   1.0000000E-5         3.0473        +INF             .          
140.2   1.0000000E-5         2.3755        +INF            EPS         
140.3   1.0000000E-5         2.3396        +INF             .          
140.4   1.0000000E-5         5.4843        +INF             .          
141.1   1.0000000E-5        28.0426        +INF             .          
141.2   1.0000000E-5        14.5114        +INF            EPS         
141.3   1.0000000E-5        36.0566        +INF             .          
141.4   1.0000000E-5        45.4104        +INF             .          
144.1   1.0000000E-5         5.9166        +INF             .          
144.2   1.0000000E-5         2.6151        +INF            EPS         
144.4   1.0000000E-5         5.7795        +INF             .          
145.3   1.0000000E-5         5.8869        +INF             .          
146.3   1.0000000E-5         7.4113        +INF             .          
147.1   1.0000000E-5        15.8315        +INF            EPS         
147.2   1.0000000E-5        10.3094        +INF            EPS         
147.3   1.0000000E-5         4.6024        +INF             .          
147.4   1.0000000E-5         4.5060        +INF             .          
150.1   1.0000000E-5        10.9138        +INF             .          
150.2   1.0000000E-5         6.4171        +INF            EPS         
150.3   1.0000000E-5        15.5037        +INF             .          
150.4   1.0000000E-5         7.7738        +INF             .          

---- VAR s  derived maximum entropy shares

             LOWER          LEVEL          UPPER         MARGINAL

100.1         0.0001         0.1499        +INF             .          
100.2         0.0001         0.0687        +INF      2.9305151E-8      
100.4         0.0001         0.2042        +INF             .          
105.1         0.0001         0.1289        +INF      -6.422478E-9      
105.2         0.0001         0.1506        +INF      3.2556120E-8      
105.3         0.0001         0.0729        +INF             .          
105.4         0.0001         0.1291        +INF      3.6898467E-9      
107.1         0.0001         0.0876        +INF             .          
107.2         0.0001         0.0740        +INF             .          
107.3         0.0001         0.0656        +INF             .          
107.4         0.0001         0.0772        +INF             .          
108.1         0.0001         0.0228        +INF      -2.663085E-9      
108.2         0.0001         0.1022        +INF             .          
108.3         0.0001         0.0706        +INF      6.6956649E-9      
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 29
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


     VAR s  derived maximum entropy shares

             LOWER          LEVEL          UPPER         MARGINAL

108.4         0.0001         0.0595        +INF      8.6760383E-9      
109.1         0.0001         0.0105        +INF      -1.599933E-8      
109.4         0.0001         0.0220        +INF      -1.974386E-9      
110.1         0.0001         0.0284        +INF      -9.372731E-9      
110.2         0.0001         0.0134        +INF      1.6921419E-8      
111.3         0.0001         0.0518        +INF             .          
112.1         0.0001         0.0190        +INF      -3.187670E-9      
112.2         0.0001         0.0261        +INF      2.3878125E-8      
112.3         0.0001         0.0190        +INF      1.6726800E-8      
112.4         0.0001         0.0150        +INF      1.4562813E-9      
113.1         0.0001         0.1313        +INF             .          
113.2         0.0001         0.1496        +INF      2.0098294E-8      
113.3         0.0001         0.0941        +INF             .          
113.4         0.0001         0.0918        +INF             .          
115.2         0.0001         0.0165        +INF      1.2383882E-8      
115.3         0.0001         0.0170        +INF      -3.686139E-9      
115.4         0.0001         0.0350        +INF      5.8204312E-9      
116.2         0.0001         0.0238        +INF      6.1868365E-8      
116.3         0.0001         0.0944        +INF      -9.911872E-9      
117.1         0.0001         0.0373        +INF            EPS         
117.2         0.0001         0.0250        +INF      1.4634940E-8      
117.3         0.0001         0.0283        +INF      1.4298929E-9      
117.4         0.0001         0.0394        +INF      7.8876987E-9      
121.2         0.0001         0.0179        +INF      2.1373329E-8      
122.1         0.0001         0.0206        +INF      -2.521462E-8      
122.2         0.0001         0.0331        +INF      6.4418957E-8      
122.3         0.0001         0.0158        +INF      -1.443977E-9      
122.4         0.0001         0.0135        +INF            EPS         
123.1         0.0001         0.0156        +INF      1.5978729E-9      
123.2         0.0001         0.0168        +INF            EPS         
123.3         0.0001         0.0222        +INF            EPS         
125.1         0.0001         0.0269        +INF      1.6512554E-8      
125.2         0.0001         0.0322        +INF      -3.327777E-9      
125.3         0.0001         0.0146        +INF      2.7158308E-8      
125.4         0.0001         0.0304        +INF             .          
127.1         0.0001         0.0220        +INF      5.6843846E-9      
127.2         0.0001         0.0218        +INF             .          
127.3         0.0001         0.0229        +INF             .          
132.3         0.0001         0.0237        +INF      -2.189855E-8      
134.1         0.0001         0.0167        +INF             .          
135.1         0.0001         0.0125        +INF      -1.506712E-8      
136.1         0.0001         0.0272        +INF      -1.803447E-8      
136.2         0.0001         0.0223        +INF      3.7343513E-8      
136.3         0.0001         0.0112        +INF             .          
136.4         0.0001         0.0145        +INF      -4.752198E-9      
137.2         0.0001         0.0111        +INF             .          
138.1         0.0001         0.0148        +INF      2.1215290E-8      
138.2         0.0001         0.0253        +INF             .          
138.3         0.0001         0.0135        +INF             .          
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 30
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


     VAR s  derived maximum entropy shares

             LOWER          LEVEL          UPPER         MARGINAL

138.4         0.0001         0.0275        +INF      3.5844288E-8      
139.2         0.0001         0.0341        +INF      -1.057749E-8      
139.3         0.0001         0.1157        +INF             .          
140.1         0.0001         0.0291        +INF      -1.578148E-8      
140.2         0.0001         0.0156        +INF             .          
140.3         0.0001         0.0129        +INF      -1.645152E-8      
140.4         0.0001         0.0489        +INF            EPS         
141.1         0.0001         0.0737        +INF             .          
141.2         0.0001         0.0428        +INF             .          
141.3         0.0001         0.1194        +INF      1.3857258E-9      
141.4         0.0001         0.1286        +INF      2.2895255E-9      
144.1         0.0001         0.0321        +INF             .          
144.2         0.0001         0.0126        +INF             .          
144.4         0.0001         0.0287        +INF      -1.486216E-9      
145.3         0.0001         0.0255        +INF             .          
146.3         0.0001         0.0372        +INF      2.7730331E-9      
147.1         0.0001         0.0747        +INF             .          
147.2         0.0001         0.0538        +INF             .          
147.3         0.0001         0.0277        +INF            EPS         
147.4         0.0001         0.0212        +INF      2.5255913E-9      
150.1         0.0001         0.0185        +INF      -1.739663E-8      
150.2         0.0001         0.0108        +INF             .          
150.3         0.0001         0.0238        +INF            EPS         
150.4         0.0001         0.0136        +INF      4.9400991E-9      

---- VAR povline  estimated revealed preference matrix

           LOWER          LEVEL          UPPER         MARGINAL

1.1        -INF          494.9132        +INF             .          
1.2        -INF          442.6714        +INF             .          
1.3        -INF          425.8900        +INF             .          
1.4        -INF          515.2688        +INF             .          
2.1        -INF          509.7105        +INF             .          
2.2        -INF          442.6714        +INF             .          
2.3        -INF          427.4608        +INF             .          
2.4        -INF          510.9860        +INF             .          
3.1        -INF          509.6626        +INF             .          
3.2        -INF          455.0971        +INF             .          
3.3        -INF          414.6633        +INF             .          
3.4        -INF          510.9860        +INF             .          
4.1        -INF          494.9132        +INF             .          
4.2        -INF          442.6714        +INF             .          
4.3        -INF          414.6633        +INF             .          
4.4        -INF          510.9860        +INF             .          
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 31
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE revpref Using NLP From line 457


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
                             0     ERRORS
GAMS 24.1.2  r40979 Released Jun 16, 2013 LEX-LEG x86_64/Linux                                                                                                                                                                        06/11/14 16:30:14 Page 32
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


----    460 this is without adjustment for calorie target or 90%

----    460 VARIABLE povline.L  estimated revealed preference matrix

            1           2           3           4

1     494.913     442.671     425.890     515.269
2     509.710     442.671     427.461     510.986
3     509.663     455.097     414.663     510.986
4     494.913     442.671     414.663     510.986


----    485 PARAMETER perc_chng  percent change in line

1   3.514,    2 -18.161,    3  34.639,    4  -5.585


----    485 PARAMETER povline_ent  entropy line that hits calorie targets (100% food expen)

1 633.627,    2 541.695,    3 514.925,    4 663.159


----    485 PARAMETER povline_ali  food poverty line

1 612.115,    2 661.904,    3 382.450,    4 702.389


**** REPORT FILE SUMMARY

povline_rp /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/povline_rp_inout.csv
res /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/qent.csv
lin /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/work/povline_food_ent.csv


EXECUTION TIME       =        0.005 SECONDS      3 MB  24.1.2 r40979 LEX-LEG


USER: Computer Services                              G130401:1333CP-GEN
      International Food Policy Research Institute               DC2119


**** FILE SUMMARY

Input      /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/new/190a_revpref13_r_bjorn.gms
Output     /home/bjvca/data/data/GAP/Haruna/UNPS_2009_10/new/list.lst
