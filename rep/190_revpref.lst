GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  *File to estimate quantities consistent with revealed preferences
   2   
      This file uses:
               work\product_flex.inc
               work\price_unit_flex.inc
               work\quan_flex.inc
       
      This file creates:
               work\qent.csv
               work\povline_ali_ent.csv
               work\povline_rp_inout.csv
       
  15   
  16  SETS
  17   cod        2002 codes for products used in basket
  18  /
INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\product_flex.inc
  20  101
  21  102
  22  103
  23  104
  24  105
  25  106
  26  107
  27  108
  28  109
  29  110
  30  111
  31  112
  32  113
  33  114
  34  115
  35  116
  36  117
  37  118
  38  119
  39  121
  40  122
  41  123
  42  125
  43  127
  44  131
  45  132
  46  134
  47  135
  48  136
  49  137
  50  138
  51  139
  52  140
  53  141
  54  143
  55  144
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


  56  145
  57  146
  58  147
  59  150
  60  153
  61  154
  62  156
  63  157
  64  161
  65  /
  66   
  67   reg        13 spatial domains /1*13/
  68   r(reg)     non maputo spatial regions /1*13/
  69   
  70   ptit       price table titles
  71  /
  72    count      number of observations making up the price average
  73    price_uw5  average price
  74  /
  75   
  76   qtit       quantity table titles
  77  /
  78    calperg          calories per gram
  79    quan5            quantities in grams
  80    calpp            calories per person by region
  81    povline_a_flex5    value of flexible food bundle
  82  /
  83   
  84   
  85    posquan(cod,reg)  mark positive quantities in each region
  86    posprice(cod,reg) mark the existence of acceptable price info in each region
  87    chkprice(cod,reg) ensure that prices exist once all estimated
  88  ;
  89   
  90  alias(reg,regq);
  91  alias(r,rq);
  92   
  93  SCALAR
  94     caltarg single level of calories to target across regions / 2150 /
  95   ;
  96   
  97  PARAMETERS
  98   
  99    shr(cod,reg)         shares in each basket by region
 100    chkshr(reg)          check that the calculated shares sum to .9
 101    shrmiss(regq,reg)    shares missing in each region pair
 102    povline_ali(reg)       food poverty line
 103    perc_chng(reg)       percent change in line
 104    finmiss(reg)         final missing shares post optimization procedure
 105   ;
 106   
 107  Table  price(cod,reg,ptit)  price and related information
 108                          count   price_uw5
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc
 110  101     "."     1       3       .3376035
****    $222  $409
**** LINE      1 INCLUDE     C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc
**** LINE     64 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 111  101     "."     3       2       .3880891
 112  101     "."     5       3       .415144
 113  102     "."     1       10      .3191299
 114  102     "."     2       3       .2798093
 115  102     "."     3       9       .3214242
 116  102     "."     4       3       .366226
 117  102     "."     5       21      .335901
 118  103     "."     1       58      .3071336
 119  103     "."     3       34      .3384376
 120  103     "."     4       6       .3453003
 121  103     "."     5       126     .3290277
 122  104     "."     1       90      .7314126
 123  104     "."     2       45      .3596203
 124  104     "."     3       26      .7418204
 125  104     "."     4       14      .7853787
 126  104     "."     5       283     .9524019
 127  105     "."     1       196     .2309529
 128  105     "."     2       40      .4511755
 129  105     "."     3       261     .2858019
 130  105     "."     4       320     .5473372
 131  105     "."     5       345     .2702242
 132  106     "."     1       2       .140151
 133  106     "."     2       2       .6329972
 134  106     "."     3       24      .1076413
 135  106     "."     4       12      .183337
 136  106     "."     5       12      .1814732
 137  107     "."     1       164     .1074033
 138  107     "."     2       29      .0648079
 139  107     "."     3       243     .0839343
 140  107     "."     4       309     .0620501
 141  107     "."     5       323     .1101321
 142  108     "."     1       47      .5430112
 143  108     "."     2       17      .9171904
 144  108     "."     3       302     .7985377
 145  108     "."     4       283     .6734608
 146  108     "."     5       199     .6158273
 147  109     "."     1       18      .1665213
 148  109     "."     2       14      .0774021
 149  109     "."     3       13      .1255376
 150  109     "."     4       7       .1028695
 151  109     "."     5       115     .238722
 152  110     "."     1       27      1.980935
 153  110     "."     2       39      2.128375
 154  110     "."     3       102     1.779044
 155  110     "."     4       59      1.610913
 156  110     "."     5       57      2.343286
 157  111     "."     1       12      .235323
 158  111     "."     2       2       .4824753
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 159  111     "."     3       19      .5071905
 160  111     "."     4       131     .4753533
 161  111     "."     5       25      .4426088
 162  112     "."     1       64      .4469623
 163  112     "."     2       16      .5236983
 164  112     "."     3       120     .3886771
 165  112     "."     4       90      .3231402
 166  112     "."     5       91      .403178
 167  113     "."     1       200     1.131242
 168  113     "."     2       49      1.257495
 169  113     "."     3       284     1.04357
 170  113     "."     4       249     .9247355
 171  113     "."     5       284     1.1357
 172  114     "."     1       31      1.916218
 173  114     "."     2       26      1.978429
 174  114     "."     3       77      1.54612
 175  114     "."     4       111     1.512783
 176  114     "."     5       59      1.830113
 177  115     "."     1       13      .9996004
 178  115     "."     2       6       1.65914
 179  115     "."     3       103     .9352785
 180  115     "."     4       61      .7419845
 181  115     "."     5       130     1.006406
 182  116     "."     1       4       .8018025
 183  116     "."     2       2       1.751001
 184  116     "."     3       133     .5084203
 185  116     "."     4       490     .5391184
 186  116     "."     5       25      .8047817
 187  117     "."     1       52      3.965716
 188  117     "."     2       25      4.266469
 189  117     "."     3       150     4.105856
 190  117     "."     4       200     3.965987
 191  117     "."     5       132     4.367661
 192  118     "."     1       21      3.245589
 193  118     "."     2       5       3.667643
 194  118     "."     3       41      3.447755
 195  118     "."     4       24      3.562665
 196  118     "."     5       56      4.26572
 197  119     "."     1       3       3.750886
 198  119     "."     3       38      4.111296
 199  119     "."     4       59      3.978243
 200  119     "."     5       39      5.121143
 201  121     "."     1       10      3.662566
 202  121     "."     3       54      3.784068
 203  121     "."     4       66      3.555456
 204  121     "."     5       19      5.095651
 205  122     "."     1       48      .8756889
 206  122     "."     2       11      .4486699
 207  122     "."     3       132     .6579986
 208  122     "."     4       67      1.492606
 209  122     "."     5       58      1.153018
 210  123     "."     1       82      .3660326
 211  123     "."     2       29      .1428554
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 5
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 212  123     "."     3       220     .570753
 213  123     "."     4       304     .940825
 214  123     "."     5       67      .6614375
 215  125     "."     1       84      .0794596
 216  125     "."     2       26      .1388306
 217  125     "."     3       148     .0806324
 218  125     "."     4       172     .0757745
 219  125     "."     5       142     .0897283
 220  127     "."     1       170     .7733017
 221  127     "."     2       60      .9752822
 222  127     "."     3       347     .8342179
 223  127     "."     4       544     1.545788
 224  127     "."     5       131     1.56696
 225  131     "."     1       56      .3586694
 226  131     "."     2       17      .4487683
 227  131     "."     3       42      .5962924
 228  131     "."     4       44      .6973926
 229  131     "."     5       124     .4544259
 230  132     "."     1       35      .2717057
 231  132     "."     2       18      .4490861
 232  132     "."     3       137     .2678175
 233  132     "."     4       125     .2825959
 234  132     "."     5       62      .2678435
 235  134     "."     1       78      1.118121
 236  134     "."     2       7       .6138245
 237  134     "."     3       124     1.386653
 238  134     "."     4       35      .7334464
 239  134     "."     5       118     .5027204
 240  135     "."     1       208     .9178949
 241  135     "."     2       76      .8929397
 242  135     "."     3       386     1.112805
 243  135     "."     4       632     1.152785
 244  135     "."     5       375     1.062761
 245  136     "."     1       241     1.17343
 246  136     "."     2       75      1.363214
 247  136     "."     3       386     1.312099
 248  136     "."     4       392     1.506208
 249  136     "."     5       396     1.015844
 250  137     "."     1       48      .4059716
 251  137     "."     2       20      .4578823
 252  137     "."     3       146     .508338
 253  137     "."     4       166     .6914039
 254  137     "."     5       115     .472257
 255  138     "."     1       130     .4464386
 256  138     "."     2       19      .664218
 257  138     "."     3       273     .383039
 258  138     "."     4       223     .2964806
 259  138     "."     5       352     .3601745
 260  139     "."     1       77      .6963204
 261  139     "."     2       13      1.054007
 262  139     "."     3       225     .5956037
 263  139     "."     4       515     .4021318
 264  139     "."     5       80      .5564747
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 6
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 265  140     "."     1       61      .9185889
 266  140     "."     2       10      2.440323
 267  140     "."     3       92      1.666684
 268  140     "."     4       86      1.485713
 269  140     "."     5       160     1.397704
 270  141     "."     1       173     1.46571
 271  141     "."     2       45      1.530213
 272  141     "."     3       227     1.679416
 273  141     "."     4       605     2.231159
 274  141     "."     5       448     1.874076
 275  143     "."     1       19      3.872145
 276  143     "."     2       2       33.31981
 277  143     "."     3       41      2.569694
 278  143     "."     4       55      6.090357
 279  143     "."     5       49      4.33026
 280  144     "."     1       111     1.841395
 281  144     "."     2       43      2.158514
 282  144     "."     3       115     1.456956
 283  144     "."     4       10      1.329049
 284  144     "."     5       152     2.258773
 285  145     "."     1       2       1.891142
 286  145     "."     2       3       2.743696
 287  145     "."     3       35      2.07769
 288  145     "."     4       127     1.856208
 289  145     "."     5       14      2.440607
 290  146     "."     1       1       3
 291  146     "."     3       19      2.58724
 292  146     "."     4       301     1.85959
 293  146     "."     5       3       2.180138
 294  147     "."     1       184     2.163179
 295  147     "."     2       71      2.126079
 296  147     "."     3       386     2.227231
 297  147     "."     4       313     2.303432
 298  147     "."     5       236     2.53046
 299  150     "."     1       298     .8450459
 300  150     "."     2       72      .8313311
 301  150     "."     3       562     .8378724
 302  150     "."     4       1019    .7765883
 303  150     "."     5       596     1.048488
 304  153     "."     1       36      1.268359
 305  153     "."     2       5       2.373174
 306  153     "."     3       99      .6578875
 307  153     "."     4       319     .6783652
 308  153     "."     5       71      1.31113
 309  154     "."     1       3       1.082929
 310  154     "."     2       4       .4320549
 311  154     "."     3       7       .7697541
 312  154     "."     4       164     .348989
 313  154     "."     5       30      .3954247
 314  156     "."     1       29      1.093761
 315  156     "."     3       10      1.306185
 316  156     "."     4       451     1.490449
 317  156     "."     5       72      1.180503
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 7
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 318  157     "."     1       18      .7664121
 319  157     "."     2       14      .5887289
 320  157     "."     3       70      .2915177
 321  157     "."     4       23      .2937123
 322  157     "."     5       39      .3687837
 323  161     "."     1       17      1.629602
 324  161     "."     2       7       1.641486
 325  161     "."     3       31      .1428961
 326  161     "."     4       142     .3724664
 327  161     "."     5       25      .7660508
 328  ;
 329   
 330  Table   quan(cod,reg,qtit)   quantity and related information
 331                             calperg          quan5           calpp      povline_a_flex5
INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex.inc
 333  102     .       1       6.8900000e-01   2.0435732e+01   2.1909478e+03   619.878
 334  103     .       1       6.8900000e-01   1.0348698e+02   2.1909478e+03   619.878
 335  104     .       1       6.8900000e-01   4.4049854e+01   2.1909478e+03   619.878
 336  105     .       1       1.0164000e+00   3.8550961e+02   2.1909478e+03   619.878
 337  107     .       1       1.3440000e+00   4.3355823e+02   2.1909478e+03   619.878
 338  108     .       1       3.1400000e+00   2.5917383e+01   2.1909478e+03   619.878
 339  110     .       1       3.6100000e+00   2.5277801e+00   2.1909478e+03   619.878
 340  112     .       1       9.4600000e-01   4.0307846e+01   2.1909478e+03   619.878
 341  113     .       1       3.6500000e+00   7.1906433e+01   2.1909478e+03   619.878
 342  117     .       1       1.7982000e+00   3.8763072e+00   2.1909478e+03   619.878
 343  122     .       1       6.1610000e-01   9.2023191e+00   2.1909478e+03   619.878
 344  123     .       1       3.7500000e+00   3.1730783e+01   2.1909478e+03   619.878
 345  125     .       1       6.0000000e-01   1.6492950e+02   2.1909478e+03   619.878
 346  127     .       1       8.8400000e+00   1.4102792e+01   2.1909478e+03   619.878
 347  132     .       1       4.3310000e-01   2.2602751e+01   2.1909478e+03   619.878
 348  134     .       1       4.9075000e-01   8.8105659e+00   2.1909478e+03   619.878
 349  135     .       1       3.6400000e-01   6.8044515e+00   2.1909478e+03   619.878
 350  136     .       1       1.6380000e-01   1.0678106e+01   2.1909478e+03   619.878
 351  138     .       1       2.0160000e-01   3.4429409e+01   2.1909478e+03   619.878
 352  139     .       1       2.6491112e-01   7.0631166e+00   2.1909478e+03   619.878
 353  140     .       1       1.0300000e+00   1.7579588e+01   2.1909478e+03   619.878
 354  141     .       1       3.1300000e+00   2.9415045e+01   2.1909478e+03   619.878
 355  144     .       1       5.8800000e+00   6.3880615e+00   2.1909478e+03   619.878
 356  147     .       1       3.8700000e+00   1.3528866e+01   2.1909478e+03   619.878
 357  150     .       1       0.0000000e+00   8.2490931e+00   2.1909478e+03   619.878
 358  153     .       1       1.5300000e+00   3.6962616e+00   2.1909478e+03   619.878
 359  157     .       1       1.2537871e+00   9.4752932e+00   2.1909478e+03   619.878
 360  104     .       2       6.8900000e-01   1.7417380e+02   2.2740835e+03   695.0354
 361  105     .       2       1.0164000e+00   1.0124797e+02   2.2740835e+03   695.0354
 362  107     .       2       1.3440000e+00   2.8491031e+02   2.2740835e+03   695.0354
 363  108     .       2       3.1400000e+00   3.9048378e+01   2.2740835e+03   695.0354
 364  109     .       2       6.4680000e-01   6.5902649e+01   2.2740835e+03   695.0354
 365  110     .       2       3.6100000e+00   2.1305088e+01   2.2740835e+03   695.0354
 366  112     .       2       9.4600000e-01   2.3293980e+01   2.2740835e+03   695.0354
 367  113     .       2       3.6500000e+00   5.6643711e+01   2.2740835e+03   695.0354
 368  114     .       2       2.6600000e+00   2.3614546e+01   2.2740835e+03   695.0354
 369  117     .       2       1.7982000e+00   4.7548265e+00   2.2740835e+03   695.0354
 370  122     .       2       6.1610000e-01   1.8155230e+01   2.2740835e+03   695.0354
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 8
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 371  123     .       2       3.7500000e+00   1.0799017e+02   2.2740835e+03   695.0354
 372  125     .       2       6.0000000e-01   1.3991513e+02   2.2740835e+03   695.0354
 373  127     .       2       8.8400000e+00   2.2109137e+01   2.2740835e+03   695.0354
 374  132     .       2       4.3310000e-01   1.2810792e+01   2.2740835e+03   695.0354
 375  135     .       2       3.6400000e-01   1.3155490e+01   2.2740835e+03   695.0354
 376  136     .       2       1.6380000e-01   1.6533594e+01   2.2740835e+03   695.0354
 377  140     .       2       1.0300000e+00   2.1142230e+00   2.2740835e+03   695.0354
 378  141     .       2       3.1300000e+00   2.9440191e+01   2.2740835e+03   695.0354
 379  144     .       2       5.8800000e+00   1.0465639e+01   2.2740835e+03   695.0354
 380  147     .       2       3.8700000e+00   3.0842930e+01   2.2740835e+03   695.0354
 381  150     .       2       0.0000000e+00   6.8942032e+00   2.2740835e+03   695.0354
 382  157     .       2       1.2537871e+00   2.2677752e+01   2.2740835e+03   695.0354
 383  103     .       3       6.8900000e-01   1.6328024e+01   2.1588210e+03   552.9629
 384  105     .       3       1.0164000e+00   1.7493742e+02   2.1588210e+03   552.9629
 385  106     .       3       3.4300000e+00   4.6905785e+01   2.1588210e+03   552.9629
 386  107     .       3       1.3440000e+00   3.2650784e+02   2.1588210e+03   552.9629
 387  108     .       3       3.1400000e+00   1.1200626e+02   2.1588210e+03   552.9629
 388  110     .       3       3.6100000e+00   5.7143712e+00   2.1588210e+03   552.9629
 389  112     .       3       9.4600000e-01   2.3176453e+01   2.1588210e+03   552.9629
 390  113     .       3       3.6500000e+00   5.6812359e+01   2.1588210e+03   552.9629
 391  115     .       3       3.7800000e+00   1.5571619e+01   2.1588210e+03   552.9629
 392  116     .       3       3.3900000e+00   3.6870827e+01   2.1588210e+03   552.9629
 393  117     .       3       1.7982000e+00   4.7215700e+00   2.1588210e+03   552.9629
 394  121     .       3       1.4835000e+00   2.5438910e+00   2.1588210e+03   552.9629
 395  122     .       3       6.1610000e-01   2.3865202e+01   2.1588210e+03   552.9629
 396  123     .       3       3.7500000e+00   2.8689735e+01   2.1588210e+03   552.9629
 397  125     .       3       6.0000000e-01   1.1625489e+02   2.1588210e+03   552.9629
 398  127     .       3       8.8400000e+00   1.2394036e+01   2.1588210e+03   552.9629
 399  132     .       3       4.3310000e-01   3.8345905e+01   2.1588210e+03   552.9629
 400  134     .       3       4.9075000e-01   4.4566031e+00   2.1588210e+03   552.9629
 401  136     .       3       1.6380000e-01   7.2234540e+00   2.1588210e+03   552.9629
 402  138     .       3       2.0160000e-01   3.5986370e+01   2.1588210e+03   552.9629
 403  139     .       3       2.6491112e-01   2.0376680e+01   2.1588210e+03   552.9629
 404  140     .       3       1.0300000e+00   5.4168329e+00   2.1588210e+03   552.9629
 405  141     .       3       3.1300000e+00   1.1901160e+01   2.1588210e+03   552.9629
 406  147     .       3       3.8700000e+00   1.1834420e+01   2.1588210e+03   552.9629
 407  150     .       3       0.0000000e+00   8.1480703e+00   2.1588210e+03   552.9629
 408  153     .       3       1.5300000e+00   1.3149837e+01   2.1588210e+03   552.9629
 409  157     .       3       1.2537871e+00   1.7059813e+01   2.1588210e+03   552.9629
 410  105     .       4       1.0164000e+00   5.4144302e+01   2.1720432e+03   513.1528
 411  107     .       4       1.3440000e+00   5.1765637e+02   2.1720432e+03   513.1528
 412  108     .       4       3.1400000e+00   7.0699104e+01   2.1720432e+03   513.1528
 413  111     .       4       3.6500000e+00   2.5582733e+01   2.1720432e+03   513.1528
 414  112     .       4       9.4600000e-01   1.9272232e+01   2.1720432e+03   513.1528
 415  113     .       4       3.6500000e+00   2.6837553e+01   2.1720432e+03   513.1528
 416  116     .       4       3.3900000e+00   1.1474615e+02   2.1720432e+03   513.1528
 417  117     .       4       1.7982000e+00   3.0212529e+00   2.1720432e+03   513.1528
 418  121     .       4       1.4835000e+00   2.4069750e+00   2.1720432e+03   513.1528
 419  122     .       4       6.1610000e-01   4.6002440e+00   2.1720432e+03   513.1528
 420  123     .       4       3.7500000e+00   1.3652317e+01   2.1720432e+03   513.1528
 421  125     .       4       6.0000000e-01   1.3889899e+02   2.1720432e+03   513.1528
 422  127     .       4       8.8400000e+00   1.0574622e+01   2.1720432e+03   513.1528
 423  135     .       4       3.6400000e-01   5.7087221e+00   2.1720432e+03   513.1528
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 09:53:10 Page 9
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 424  136     .       4       1.6380000e-01   4.8028193e+00   2.1720432e+03   513.1528
 425  139     .       4       2.6491112e-01   5.6304516e+01   2.1720432e+03   513.1528
 426  140     .       4       1.0300000e+00   3.9425700e+00   2.1720432e+03   513.1528
 427  141     .       4       3.1300000e+00   2.2969183e+01   2.1720432e+03   513.1528
 428  145     .       4       8.1000000e-01   3.4025159e+00   2.1720432e+03   513.1528
 429  146     .       4       5.7300000e+00   7.6732802e+00   2.1720432e+03   513.1528
 430  147     .       4       3.8700000e+00   5.5493917e+00   2.1720432e+03   513.1528
 431  150     .       4       0.0000000e+00   1.1528011e+01   2.1720432e+03   513.1528
 432  153     .       4       1.5300000e+00   2.7924173e+01   2.1720432e+03   513.1528
 433  154     .       4       8.1333336e-01   2.8678112e+01   2.1720432e+03   513.1528
 434  156     .       4       0.0000000e+00   5.5210452e+00   2.1720432e+03   513.1528
 435  161     .       4       1.2537871e+00   1.9374657e+01   2.1720432e+03   513.1528
 436  102     .       5       6.8900000e-01   2.5685814e+01   2.2123733e+03   787.9817
 437  103     .       5       6.8900000e-01   1.6054462e+02   2.2123733e+03   787.9817
 438  104     .       5       6.8900000e-01   9.2708672e+01   2.2123733e+03   787.9817
 439  105     .       5       1.0164000e+00   2.8879257e+02   2.2123733e+03   787.9817
 440  107     .       5       1.3440000e+00   4.7984293e+02   2.2123733e+03   787.9817
 441  108     .       5       3.1400000e+00   5.6789738e+01   2.2123733e+03   787.9817
 442  109     .       5       6.4680000e-01   1.0611240e+02   2.2123733e+03   787.9817
 443  110     .       5       3.6100000e+00   2.7169423e+00   2.2123733e+03   787.9817
 444  112     .       5       9.4600000e-01   2.6821867e+01   2.2123733e+03   787.9817
 445  113     .       5       3.6500000e+00   4.7334785e+01   2.2123733e+03   787.9817
 446  115     .       5       3.7800000e+00   2.0510767e+01   2.2123733e+03   787.9817
 447  117     .       5       1.7982000e+00   4.9829521e+00   2.2123733e+03   787.9817
 448  118     .       5       2.3534000e+00   2.1828349e+00   2.2123733e+03   787.9817
 449  119     .       5       1.2210000e+00   1.3446646e+00   2.2123733e+03   787.9817
 450  122     .       5       6.1610000e-01   8.6447163e+00   2.2123733e+03   787.9817
 451  123     .       5       3.7500000e+00   1.1574539e+01   2.2123733e+03   787.9817
 452  125     .       5       6.0000000e-01   1.6421848e+02   2.2123733e+03   787.9817
 453  127     .       5       8.8400000e+00   4.0337229e+00   2.2123733e+03   787.9817
 454  134     .       5       4.9075000e-01   1.3993022e+01   2.2123733e+03   787.9817
 455  135     .       5       3.6400000e-01   6.5302992e+00   2.2123733e+03   787.9817
 456  136     .       5       1.6380000e-01   1.3048203e+01   2.2123733e+03   787.9817
 457  138     .       5       2.0160000e-01   3.5203983e+01   2.2123733e+03   787.9817
 458  140     .       5       1.0300000e+00   2.4356958e+01   2.2123733e+03   787.9817
 459  141     .       5       3.1300000e+00   4.2228710e+01   2.2123733e+03   787.9817
 460  144     .       5       5.8800000e+00   5.3771367e+00   2.2123733e+03   787.9817
 461  147     .       5       3.8700000e+00   6.4530897e+00   2.2123733e+03   787.9817
 462  150     .       5       0.0000000e+00   1.1312398e+01   2.2123733e+03   787.9817
 463  153     .       5       1.5300000e+00   5.0315604e+00   2.2123733e+03   787.9817
 464  ;
 465   
 466    shr(cod,reg)$quan(cod,reg,'povline_a_flex5')
 467                        =price(cod,reg,'price_uw5')*quan(cod,reg,'quan5')/
 468                         quan(cod,reg,'povline_a_flex5');
 469   
 470    chkshr(reg)=sum(cod,shr(cod,reg));
 471   
 472  loop(reg,
 473    abort$(abs(chkshr(reg)-.9) gt .0001) "share does not sum to .9", chkshr ;
 474  );
 475   
 476   
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 09:53:10 Page 10
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 477  *turn on dynamic sets to indicate positive quantities and existence of
 478  *price info for each region
 479   
 480   posprice(cod,reg)$(price(cod,reg,'price_uw5')
 481                        AND price(cod,reg,'count') gt 4) = yes;
 482   
 483   posquan(cod,reg)$quan(cod,reg,'quan5')=yes;
 484   
 485   shrmiss(regq,reg)=sum(cod$(NOT posprice(cod,reg)), shr(cod,regq));
 486   display shrmiss;
 487   
 488    povline_ali(reg)=sum(cod$posquan(cod,reg),price(cod,reg,'price_uw5')*
 489                                             quan(cod,reg,'quan5'))/.9;
 490   
 491    display povline_ali;
 492   
 493   
 494  *boost values so shares sum to one;
 495  shr(cod,reg)=shr(cod,reg)/chkshr(reg);
 496   
 497  *fill out price matrix with maximum observed price outside of Maputo
 498   
 499  loop((cod,reg)$(NOT posprice(cod,reg) AND posquan(cod,reg)),
 500           loop(r,
 501                   price(cod,reg,'price_uw5')=max(price(cod,reg,'price_uw5'),
 502                                                price(cod,r,'price_uw5'));
 503           );
 504  );
 505   
 506  chkprice(cod,reg)$(NOT price(cod,reg,'price_uw5') AND posquan(cod,reg))=yes;
 507   
 508  display 'should be an empty set', chkprice;
 509   
 510   
 511   
 512   
 513  Variables
 514     z                objective value
 515     q(cod,reg)       revised maximum entropy quanties in grams
 516     s(cod,reg)       derived maximum entropy shares
 517     povline(regq,reg)  estimated revealed preference matrix
 518  ;
 519   
 520   
 521  Equations
 522     obj              objective equation
 523     rev(regq,reg)    revealed preference tests
 524     deflin(regq,reg) define revealed preference matrix
 525     defshr(cod,regq) define the endogenous budget shares
 526     cals(regq)       ensure that each bundle hits the calorie
 527   
 528  ;
 529   
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 09:53:10 Page 11
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 530     obj ..  z=e= sum((cod,rq)$posquan(cod,rq),
 531                     s(cod,rq)*log(s(cod,rq)/shr(cod,rq)));
 532   
 533     deflin(rq,r) .. povline(rq,r) =e= sum(cod$posquan(cod,rq),
 534                            q(cod,rq)*price(cod,r,'price_uw5'));
 535   
 536     rev(rq,r) ..    povline(r,rq)=g=povline(rq,rq);
 537   
 538     defshr(cod,rq)$posquan(cod,rq) ..
 539               povline(rq,rq)*s(cod,rq)=e= q(cod,rq)*price(cod,rq,'price_uw5');
 540   
 541     cals(rq) .. sum(cod$posquan(cod,rq),
 542                      q(cod,rq)*quan(cod,rq,'calperg'))=e=.95*caltarg;
 543   
 544  *set bounds and starting values for variables
 545   
 546    q.lo(cod,reg)=.00001;
 547    q.up(cod,reg)=inf;
 548    q.l(cod,reg)=quan(cod,reg,'quan5');
 549    q.fx(cod,reg)$(NOT posquan(cod,reg))=0;
 550   
 551    povline.l(regq,reg)= sum(cod$posquan(cod,regq),
 552                            q.l(cod,regq)*price(cod,reg,'price_uw5'));
 553   
 554   
 555    display povline.l;
 556   
 557  *print the revealed preference matrix prior to optimisation;
 558  file povline_rp C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_rp_inout.csv/;
 559  put povline_rp;
****  $183
**** LINE    165 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 560  povline_rp.pc=5;
 561  povline_rp.nd=0;
 562  put " ";
 563  loop(reg,
 564        put reg.tl;
 565  );
 566  put /;
 567  loop(regq,
 568       put regq.tl;
 569       loop(reg,
 570           put povline.l(regq,reg);
 571       );
 572       put /;
 573  );
 574  put /; put /; put /;
 575   
 576     s.l(cod,regq)= q.l(cod,regq)*price(cod,regq,'price_uw5')/povline.l(regq,regq);
 577     s.lo(cod,regq)=.0001;
 578     s.fx(cod,regq)$(NOT posquan(cod,regq))=0;
 579   
 580   
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 09:53:10 Page 12
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 581     model revpref /obj, deflin, rev, defshr, cals/;
 582   
 583     revpref.holdfixed=1;
 584   
 585     option limrow=100;
 586   
 587     option nlp=conopt;
 588   
 589     solve revpref using nlp minimizing z;
****                                         $257
**** LINE    195 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 590   
 591     povline.l(regq,reg)$(NOT rq(regq) OR NOT r(reg))=0;
 592     display "this is without adjustment for calorie target or 90%", povline.l;
 593   
 594  put /;
 595  loop(rq,
 596       put rq.tl;
 597       loop(r,
 598           put povline.l(rq,r);
 599       );
 600       put /;
 601  );
 602  put /;
 603   
 604   
 605  PARAMETERS
 606     qent(cod,reg)  entropy quantities with all adjustments accounted for
 607     povline_ent(reg) entropy line that hits calorie targets (100% food expen)
 608    ;
 609  *readjust quantities to hit regional calorie target and calculate line;
 610     qent(cod,r)=q.l(cod,r)*quan(cod,r,'calpp')/caltarg;
 611   
 612     povline_ent(r)=sum(cod$posquan(cod,r),price(cod,r,'price_uw5')*
 613                                             qent(cod,r))/.9;
 614   
 615     perc_chng(r)=100*(povline_ent(r)/povline_ali(r)-1);
 616   
 617     display perc_chng, povline_ent, povline_ali;
 618   
 619     file res C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\qent.csv/;
 620   
 621     put res;
****    $183
**** LINE    227 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 622     res.pc=5;
 623     res.nd=6;
 624   
 625  *recall that the basket reflects 90% of expenditure and 95% of calories";
 626     put "spdomain" ;
 627     put "product" ;
 628     put "quan5";
 629     put "qent";
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 09:53:10 Page 13
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 630     put "price";
 631     put "calperg";
 632   
 633     put /;
 634   
 635     loop(reg,
 636         loop(cod,
 637             put reg.tl;
 638             put cod.tl;
 639             put quan(cod,reg,'quan5');
 640             put qent(cod,reg);
 641             put price(cod,reg,'price_uw5')
 642             put quan(cod,reg,'calperg');
 643             put /;
 644         );
 645     );
 646   
 647     file lin C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_ent.csv/;
 648   
 649     put lin;
****    $183
**** LINE    255 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 650     lin.pc=5;
 651  *Flexible, entropy, and fixed food pov lines at 100% expenditure
 652   
 653     put "spdomain";
 654     put "flex";
 655     put "ent";
 656     put /;
 657   
 658     loop(reg,
 659           put reg.tl;
 660           put povline_ali(reg);
 661           put povline_ent(reg);
 662           put /;
 663     );
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 09:53:10 Page 14
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Error Messages


183  Closing '/' missing in file statement
222  Row dimension inconsistent with declared dimension and
       column dimension
257  Solve statement not checked because of previous errors
409  Unrecognizable item - skip to find a new statement
       looking for a ';' or a key word to get started again

**** 6 ERROR(S)   0 WARNING(S)
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 09:53:10 Page 15
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
     2       19 INCLUDE        1      19  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\product_flex.inc
     3      109 INCLUDE        1      64  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc
     4      332 INCLUDE        1      69  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex.inc


COMPILATION TIME     =        0.000 SECONDS      3 Mb  WIN240-240 Feb 14, 2013


USER: Joint Workshop  at TIPS                        G130220/0001AN-GEN
      University of Copenhagen, UNU-WIDER, and TIPS             DC10188
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
Output     C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\190_revpref.lst

**** USER ERROR(S) ENCOUNTERED
