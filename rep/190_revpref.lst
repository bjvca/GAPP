GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  *File to estimate quantities consistent with revealed preferences
   2   
      This file uses:
               work\product_flex.inc
               work\price_unit_flex.inc
               work\quan_flex.inc
       
      This file creates:
               work\qent.csv
               work\povline_ali_ent.csv
               work\povline_rp_inout.csv
       
  15   
  16  SETS
  17   cod        200910 codes for products used in basket
  18  /
INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\product_flex.inc
  20  102
  21  103
  22  104
  23  105
  24  107
  25  108
  26  109
  27  110
  28  111
  29  112
  30  113
  31  114
  32  115
  33  116
  34  117
  35  118
  36  119
  37  121
  38  122
  39  123
  40  125
  41  127
  42  131
  43  132
  44  134
  45  135
  46  136
  47  137
  48  138
  49  139
  50  140
  51  141
  52  144
  53  145
  54  146
  55  147
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


  56  150
  57  153
  58  154
  59  155
  60  156
  61  /
  62   
  63   reg        5 spatial domains /1*9/
  64   r(reg)     all included spatial regions /1*9/
  65   
  66   ptit       price table titles
  67  /
  68    count      number of observations making up the price average
  69    price_uw5  average price
  70  /
  71   
  72   qtit       quantity table titles
  73  /
  74    calperg          calories per gram
  75    quan5            quantities in grams
  76    calpp            calories per person by region
  77    povline_a_flex5    value of flexible food bundle
  78  /
  79   
  80   
  81    posquan(cod,reg)  mark positive quantities in each region
  82    posprice(cod,reg) mark the existence of acceptable price info in each region
  83    chkprice(cod,reg) ensure that prices exist once all estimated
  84  ;
  85   
  86  alias(reg,regq);
  87  alias(r,rq);
  88   
  89  SCALAR
  90     caltarg single level of calories to target across regions / 2150 /
  91   ;
  92   
  93  PARAMETERS
  94   
  95    shr(cod,reg)         shares in each basket by region
  96    chkshr(reg)          check that the calculated shares sum to .9
  97    shrmiss(regq,reg)    shares missing in each region pair
  98    povline_ali(reg)       food poverty line
  99    perc_chng(reg)       percent change in line
 100    finmiss(reg)         final missing shares post optimization procedure
 101   ;
 102   
 103  Table  price(cod,reg,ptit)  price and related information
 104                          count   price_uw5
INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc
 106  102     .       1       14      8.029838
 107  102     .       2       2       8.852794
 108  102     .       3       6       7.682584
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 109  102     .       5       37      8.583067
 110  103     .       1       67      4.639219
 111  103     .       2       1       4.980716
 112  103     .       3       24      5.172233
 113  103     .       4       3       4.253963
 114  103     .       5       208     5.137443
 115  104     .       1       124     1.957263
 116  104     .       2       24      .7208005
 117  104     .       3       21      2.019765
 118  104     .       4       6       2.379457
 119  104     .       5       393     2.513389
 120  105     .       1       256     1.578067
 121  105     .       2       23      1.047475
 122  105     .       3       221     1.7105
 123  105     .       4       85      .6178627
 124  105     .       5       510     2.171553
 125  107     .       1       218     1.297895
 126  107     .       2       22      .7613077
 127  107     .       3       212     .9418746
 128  107     .       4       124     .6068451
 129  107     .       5       462     1.267491
 130  108     .       1       52      .9172075
 131  108     .       2       10      .9894527
 132  108     .       3       260     1.204412
 133  108     .       4       97      .5837246
 134  108     .       5       281     .5581543
 135  109     .       1       21      1.252481
 136  109     .       2       8       .9765319
 137  109     .       3       9       .5150748
 138  109     .       4       2       1.236901
 139  109     .       5       190     2.87659
 140  110     .       1       40      2.041877
 141  110     .       2       18      2.24493
 142  110     .       3       78      1.630107
 143  110     .       4       24      .8517424
 144  110     .       5       111     2.305776
 145  111     .       1       11      .2565514
 146  111     .       2       2       .2362702
 147  111     .       3       17      .2555763
 148  111     .       4       130     .6836074
 149  111     .       5       35      .3604198
 150  112     .       1       79      .1691255
 151  112     .       2       10      .1673414
 152  112     .       3       96      .1787749
 153  112     .       4       22      .2344983
 154  112     .       5       142     .2666377
 155  113     .       1       261     1.137321
 156  113     .       2       31      1.27307
 157  113     .       3       241     1.036121
 158  113     .       4       237     .5053617
 159  113     .       5       438     .9001758
 160  114     .       1       40      .3771823
 161  114     .       2       14      .8208994
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 162  114     .       3       62      .2871535
 163  114     .       4       25      .11639
 164  114     .       5       111     .3149448
 165  115     .       1       19      .844147
 166  115     .       2       3       1.706139
 167  115     .       3       89      .8946854
 168  115     .       4       24      .4236031
 169  115     .       5       209     .8447672
 170  116     .       1       5       .8110529
 171  116     .       2       1       1.6
 172  116     .       3       124     .4524288
 173  116     .       4       328     .3759536
 174  116     .       5       45      .6188988
 175  117     .       1       62      3.963611
 176  117     .       2       13      4.203014
 177  117     .       3       106     4.157068
 178  117     .       4       91      3.110536
 179  117     .       5       222     4.534978
 180  118     .       1       26      3.304811
 181  118     .       2       2       3.597183
 182  118     .       3       20      3.373693
 183  118     .       4       9       3.142295
 184  118     .       5       80      4.343154
 185  119     .       1       6       4.065782
 186  119     .       3       32      4.272399
 187  119     .       4       22      3.183961
 188  119     .       5       78      5.167287
 189  121     .       1       13      5.448728
 190  121     .       3       36      6.002131
 191  121     .       4       23      4.882799
 192  121     .       5       40      6.933537
 193  122     .       1       57      1.157695
 194  122     .       2       5       1.109927
 195  122     .       3       115     1.512676
 196  122     .       4       15      1.719069
 197  122     .       5       91      2.252076
 198  123     .       1       109     .7860566
 199  123     .       2       19      .4346469
 200  123     .       3       198     .7841128
 201  123     .       4       116     .4909751
 202  123     .       5       99      1.540562
 203  125     .       1       118     .3866759
 204  125     .       2       12      .4118356
 205  125     .       3       126     .2871737
 206  125     .       4       111     .1893456
 207  125     .       5       262     .3625132
 208  127     .       1       211     .1268699
 209  127     .       2       35      .2530728
 210  127     .       3       295     .1197901
 211  127     .       4       344     .2241627
 212  127     .       5       212     .3630198
 213  131     .       1       74      .4891731
 214  131     .       2       8       .4410356
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 5
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 215  131     .       3       27      .3680688
 216  131     .       4       10      1.073564
 217  131     .       5       221     .4946176
 218  132     .       1       55      .2872389
 219  132     .       2       15      .2314123
 220  132     .       3       135     .2400579
 221  132     .       4       49      .1854801
 222  132     .       5       110     .3134933
 223  134     .       1       109     .5704212
 224  134     .       2       6       .2109931
 225  134     .       3       107     .6872716
 226  134     .       4       32      .2136892
 227  134     .       5       182     .2192529
 228  135     .       1       266     .2294493
 229  135     .       2       39      .1992586
 230  135     .       3       332     .1525366
 231  135     .       4       288     .1240805
 232  135     .       5       562     .3274521
 233  136     .       1       306     .1661363
 234  136     .       2       41      .1587147
 235  136     .       3       334     .1738199
 236  136     .       4       158     .1801965
 237  136     .       5       598     .3163815
 238  137     .       1       62      .3900768
 239  137     .       2       11      .3497799
 240  137     .       3       125     .4729332
 241  137     .       4       72      .5810979
 242  137     .       5       189     .4346476
 243  138     .       1       166     .2057155
 244  138     .       2       12      .3175328
 245  138     .       3       243     .1590872
 246  138     .       4       168     .1177843
 247  138     .       5       524     .1669767
 248  139     .       1       103     .2742242
 249  139     .       2       7       .3171201
 250  139     .       3       214     .206111
 251  139     .       4       471     .1355901
 252  139     .       5       121     .2031541
 253  140     .       1       68      .8149886
 254  140     .       2       8       1.012759
 255  140     .       3       87      .8039211
 256  140     .       4       30      .2753005
 257  140     .       5       260     .8803979
 258  141     .       1       230     1.026042
 259  141     .       2       30      1.543489
 260  141     .       3       206     1.04761
 261  141     .       4       393     .5226253
 262  141     .       5       621     .8406026
 263  144     .       1       140     1.257619
 264  144     .       2       25      1.218104
 265  144     .       3       93      .6736168
 266  144     .       4       1       .8
 267  144     .       5       258     1.28165
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 6
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 268  145     .       1       2       2.303869
 269  145     .       2       3       1.604491
 270  145     .       3       28      .9086659
 271  145     .       4       45      .487552
 272  145     .       5       26      1.485528
 273  146     .       3       19      .2270954
 274  146     .       4       98      .6066229
 275  146     .       5       6       .4920778
 276  147     .       1       248     2.201398
 277  147     .       2       37      2.167377
 278  147     .       3       334     2.048246
 279  147     .       4       111     .8455096
 280  147     .       5       394     2.434524
 281  150     .       1       377     .4327916
 282  150     .       2       37      .4062395
 283  150     .       3       457     .3609981
 284  150     .       4       576     .3304188
 285  150     .       5       870     .564329
 286  153     .       1       45      .6033998
 287  153     .       2       3       .8999007
 288  153     .       3       75      .6894129
 289  153     .       4       175     .3006249
 290  153     .       5       107     .6445158
 291  154     .       1       4       .1523381
 292  154     .       2       1       .1805645
 293  154     .       3       5       1.547646
 294  154     .       4       119     .5053488
 295  154     .       5       44      .4867435
 296  155     .       1       31      .087572
 297  155     .       2       8       .0938407
 298  155     .       3       35      .0809758
 299  155     .       4       35      .0726767
 300  155     .       5       98      .1022798
 301  156     .       1       33      .1807315
 302  156     .       3       8       .1380146
 303  156     .       4       292     .1070642
 304  156     .       5       86      .1887886
 305  ;
 306   
 307  Table   quan(cod,reg,qtit)   quantity and related information
 308                             calperg          quan5           calpp      povline_a_flex5
INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex.inc
 310  102     .       1       6.8900000e-01   8.7927729e-01   2.2254709e+03   779.6461
 311  103     .       1       6.8900000e-01   6.8288803e+00   2.2254709e+03   779.6461
 312  104     .       1       6.8900000e-01   2.2236486e+01   2.2254709e+03   779.6461
 313  105     .       1       1.0164000e+00   7.0265816e+01   2.2254709e+03   779.6461
 314  107     .       1       1.3440000e+00   5.0514187e+01   2.2254709e+03   779.6461
 315  108     .       1       3.1400000e+00   1.6938364e+01   2.2254709e+03   779.6461
 316  110     .       1       3.6100000e+00   4.0519700e+00   2.2254709e+03   779.6461
 317  112     .       1       9.4600000e-01   1.2107122e+02   2.2254709e+03   779.6461
 318  113     .       1       3.6500000e+00   9.4383415e+01   2.2254709e+03   779.6461
 319  114     .       1       2.6600000e+00   1.3747757e+01   2.2254709e+03   779.6461
 320  117     .       1       1.7982000e+00   3.8164163e+00   2.2254709e+03   779.6461
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 7
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 321  118     .       1       2.3534000e+00   1.8146980e+00   2.2254709e+03   779.6461
 322  122     .       1       6.1610000e-01   9.3820477e+00   2.2254709e+03   779.6461
 323  123     .       1       3.7500000e+00   1.7555801e+01   2.2254709e+03   779.6461
 324  125     .       1       6.0000000e-01   5.2402843e+01   2.2254709e+03   779.6461
 325  127     .       1       8.8400000e+00   9.8331505e+01   2.2254709e+03   779.6461
 326  132     .       1       4.3310000e-01   3.3002007e+01   2.2254709e+03   779.6461
 327  134     .       1       4.9400000e-01   2.8630455e+01   2.2254709e+03   779.6461
 328  135     .       1       3.6400000e-01   3.0543396e+01   2.2254709e+03   779.6461
 329  136     .       1       1.6380000e-01   9.2664261e+01   2.2254709e+03   779.6461
 330  138     .       1       2.0160000e-01   8.3413475e+01   2.2254709e+03   779.6461
 331  139     .       1       2.6100000e-01   3.0021143e+01   2.2254709e+03   779.6461
 332  140     .       1       1.0300000e+00   2.2674511e+01   2.2254709e+03   779.6461
 333  141     .       1       3.1300000e+00   5.3583683e+01   2.2254709e+03   779.6461
 334  144     .       1       5.8800000e+00   1.1791095e+01   2.2254709e+03   779.6461
 335  147     .       1       3.8700000e+00   1.7470913e+01   2.2254709e+03   779.6461
 336  150     .       1       0.0000000e+00   1.6817972e+01   2.2254709e+03   779.6461
 337  104     .       2       6.8900000e-01   8.4545570e+01   2.3203813e+03   714.9648
 338  105     .       2       1.0164000e+00   4.2725586e+01   2.3203813e+03   714.9648
 339  107     .       2       1.3440000e+00   3.5886520e+01   2.3203813e+03   714.9648
 340  108     .       2       3.1400000e+00   4.1500263e+01   2.3203813e+03   714.9648
 341  110     .       2       3.6100000e+00   2.0787233e+01   2.3203813e+03   714.9648
 342  112     .       2       9.4600000e-01   6.1191280e+01   2.3203813e+03   714.9648
 343  113     .       2       3.6500000e+00   6.4451218e+01   2.3203813e+03   714.9648
 344  114     .       2       2.6600000e+00   8.1436127e+01   2.3203813e+03   714.9648
 345  117     .       2       1.7982000e+00   5.3201003e+00   2.3203813e+03   714.9648
 346  123     .       2       3.7500000e+00   2.5764284e+01   2.3203813e+03   714.9648
 347  125     .       2       6.0000000e-01   5.3696514e+01   2.3203813e+03   714.9648
 348  127     .       2       8.8400000e+00   9.2769760e+01   2.3203813e+03   714.9648
 349  135     .       2       3.6400000e-01   5.3506767e+01   2.3203813e+03   714.9648
 350  136     .       2       1.6380000e-01   1.3724216e+02   2.3203813e+03   714.9648
 351  141     .       2       3.1300000e+00   3.6377125e+01   2.3203813e+03   714.9648
 352  144     .       2       5.8800000e+00   1.7527035e+01   2.3203813e+03   714.9648
 353  147     .       2       3.8700000e+00   3.1520575e+01   2.3203813e+03   714.9648
 354  150     .       2       0.0000000e+00   1.5198459e+01   2.3203813e+03   714.9648
 355  103     .       3       6.8900000e-01   9.9636966e-01   2.1924021e+03   595.4849
 356  105     .       3       1.0164000e+00   2.9943556e+01   2.1924021e+03   595.4849
 357  107     .       3       1.3440000e+00   2.8427485e+01   2.1924021e+03   595.4849
 358  108     .       3       3.1400000e+00   8.2074043e+01   2.1924021e+03   595.4849
 359  110     .       3       3.6100000e+00   5.9666619e+00   2.1924021e+03   595.4849
 360  112     .       3       9.4600000e-01   4.6812084e+01   2.1924021e+03   595.4849
 361  113     .       3       3.6500000e+00   6.2554119e+01   2.1924021e+03   595.4849
 362  115     .       3       3.7800000e+00   1.8372583e+01   2.1924021e+03   595.4849
 363  116     .       3       3.3900000e+00   4.6689079e+01   2.1924021e+03   595.4849
 364  117     .       3       1.7982000e+00   4.2492423e+00   2.1924021e+03   595.4849
 365  121     .       3       1.4835000e+00   1.3706887e+00   2.1924021e+03   595.4849
 366  122     .       3       6.1610000e-01   1.1098620e+01   2.1924021e+03   595.4849
 367  123     .       3       3.7500000e+00   2.2650522e+01   2.1924021e+03   595.4849
 368  125     .       3       6.0000000e-01   3.2031418e+01   2.1924021e+03   595.4849
 369  127     .       3       8.8400000e+00   9.3277916e+01   2.1924021e+03   595.4849
 370  132     .       3       4.3310000e-01   5.6236397e+01   2.1924021e+03   595.4849
 371  134     .       3       4.9400000e-01   1.0362387e+01   2.1924021e+03   595.4849
 372  136     .       3       1.6380000e-01   6.0718830e+01   2.1924021e+03   595.4849
 373  137     .       3       2.6400000e-01   1.1767220e+01   2.1924021e+03   595.4849
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 8
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 374  138     .       3       2.0160000e-01   9.4500961e+01   2.1924021e+03   595.4849
 375  139     .       3       2.6100000e-01   7.1249809e+01   2.1924021e+03   595.4849
 376  140     .       3       1.0300000e+00   1.4241682e+01   2.1924021e+03   595.4849
 377  141     .       3       3.1300000e+00   2.2890276e+01   2.1924021e+03   595.4849
 378  144     .       3       5.8800000e+00   8.0877771e+00   2.1924021e+03   595.4849
 379  147     .       3       3.8700000e+00   1.4896994e+01   2.1924021e+03   595.4849
 380  150     .       3       0.0000000e+00   1.9885183e+01   2.1924021e+03   595.4849
 381  153     .       3       1.5300000e+00   1.1062569e+01   2.1924021e+03   595.4849
 382  105     .       4       1.0164000e+00   2.1213915e+01   2.1999929e+03   373.1463
 383  107     .       4       1.3440000e+00   3.5403496e+01   2.1999929e+03   373.1463
 384  108     .       4       3.1400000e+00   4.7066872e+01   2.1999929e+03   373.1463
 385  111     .       4       3.6500000e+00   1.9349041e+01   2.1999929e+03   373.1463
 386  113     .       4       3.6500000e+00   4.8990150e+01   2.1999929e+03   373.1463
 387  116     .       4       3.3900000e+00   1.4751140e+02   2.1999929e+03   373.1463
 388  117     .       4       1.7982000e+00   1.7092910e+00   2.1999929e+03   373.1463
 389  121     .       4       1.4835000e+00   7.3945880e-01   2.1999929e+03   373.1463
 390  123     .       4       3.7500000e+00   1.6563646e+01   2.1999929e+03   373.1463
 391  125     .       4       6.0000000e-01   3.5770767e+01   2.1999929e+03   373.1463
 392  127     .       4       8.8400000e+00   5.5531708e+01   2.1999929e+03   373.1463
 393  132     .       4       4.3310000e-01   1.8610661e+01   2.1999929e+03   373.1463
 394  135     .       4       3.6400000e-01   3.0161661e+01   2.1999929e+03   373.1463
 395  136     .       4       1.6380000e-01   2.3323725e+01   2.1999929e+03   373.1463
 396  138     .       4       2.0160000e-01   5.6739079e+01   2.1999929e+03   373.1463
 397  139     .       4       2.6100000e-01   2.3216878e+02   2.1999929e+03   373.1463
 398  140     .       4       1.0300000e+00   1.3353096e+01   2.1999929e+03   373.1463
 399  141     .       4       3.1300000e+00   7.7574844e+01   2.1999929e+03   373.1463
 400  145     .       4       8.1000000e-01   8.6166668e+00   2.1999929e+03   373.1463
 401  146     .       4       5.7300000e+00   1.3675140e+01   2.1999929e+03   373.1463
 402  147     .       4       3.8700000e+00   7.8918195e+00   2.1999929e+03   373.1463
 403  150     .       4       0.0000000e+00   1.9795959e+01   2.1999929e+03   373.1463
 404  153     .       4       1.5300000e+00   4.3493458e+01   2.1999929e+03   373.1463
 405  154     .       4       8.1000000e-01   1.3615855e+01   2.1999929e+03   373.1463
 406  156     .       4       0.0000000e+00   4.2942799e+01   2.1999929e+03   373.1463
 407  102     .       5       6.8900000e-01   1.8102899e+00   2.2343252e+03   1246.044
 408  103     .       5       6.8900000e-01   1.6756506e+01   2.2343252e+03   1246.044
 409  104     .       5       6.8900000e-01   5.1965130e+01   2.2343252e+03   1246.044
 410  105     .       5       1.0164000e+00   5.1228745e+01   2.2343252e+03   1246.044
 411  107     .       5       1.3440000e+00   6.1423958e+01   2.2343252e+03   1246.044
 412  108     .       5       3.1400000e+00   8.8235001e+01   2.2343252e+03   1246.044
 413  109     .       5       6.4680000e-01   1.4737267e+01   2.2343252e+03   1246.044
 414  110     .       5       3.6100000e+00   5.3914685e+00   2.2343252e+03   1246.044
 415  112     .       5       9.4600000e-01   7.0955086e+01   2.2343252e+03   1246.044
 416  113     .       5       3.6500000e+00   8.6902901e+01   2.2343252e+03   1246.044
 417  115     .       5       3.7800000e+00   3.9185345e+01   2.2343252e+03   1246.044
 418  117     .       5       1.7982000e+00   8.8015575e+00   2.2343252e+03   1246.044
 419  118     .       5       2.3534000e+00   3.2394285e+00   2.2343252e+03   1246.044
 420  119     .       5       1.2210000e+00   2.9264801e+00   2.2343252e+03   1246.044
 421  121     .       5       1.4835000e+00   1.5448374e+00   2.2343252e+03   1246.044
 422  122     .       5       6.1610000e-01   7.6818681e+00   2.2343252e+03   1246.044
 423  123     .       5       3.7500000e+00   7.9566989e+00   2.2343252e+03   1246.044
 424  125     .       5       6.0000000e-01   8.2375328e+01   2.2343252e+03   1246.044
 425  127     .       5       8.8400000e+00   2.8539913e+01   2.2343252e+03   1246.044
 426  131     .       5       6.2080000e-01   2.3114353e+01   2.2343252e+03   1246.044
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            06/11/13 12:43:17 Page 9
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 427  134     .       5       4.9400000e-01   4.7979374e+01   2.2343252e+03   1246.044
 428  135     .       5       3.6400000e-01   3.2900185e+01   2.2343252e+03   1246.044
 429  136     .       5       1.6380000e-01   6.7693542e+01   2.2343252e+03   1246.044
 430  138     .       5       2.0160000e-01   1.1223981e+02   2.2343252e+03   1246.044
 431  140     .       5       1.0300000e+00   6.1249672e+01   2.2343252e+03   1246.044
 432  141     .       5       3.1300000e+00   1.3524687e+02   2.2343252e+03   1246.044
 433  144     .       5       5.8800000e+00   1.5640053e+01   2.2343252e+03   1246.044
 434  147     .       5       3.8700000e+00   1.2066854e+01   2.2343252e+03   1246.044
 435  150     .       5       0.0000000e+00   2.6780907e+01   2.2343252e+03   1246.044
 436  153     .       5       1.5300000e+00   1.7305992e+01   2.2343252e+03   1246.044
 437  ;
 438   
 439    shr(cod,reg)$quan(cod,reg,'povline_a_flex5')
 440                        =price(cod,reg,'price_uw5')*quan(cod,reg,'quan5')/
 441                         quan(cod,reg,'povline_a_flex5');
 442   
 443    chkshr(reg)=sum(cod,shr(cod,reg));
 444   
 445  loop(reg,
 446    abort$(abs(chkshr(reg)-.9) gt .0001) "share does not sum to .9", chkshr ;
 447  );
 448   
 449   
 450  *turn on dynamic sets to indicate positive quantities and existence of
 451  *price info for each region
 452   
 453   posprice(cod,reg)$(price(cod,reg,'price_uw5')
 454                        AND price(cod,reg,'count') gt 4) = yes;
 455   
 456   posquan(cod,reg)$quan(cod,reg,'quan5')=yes;
 457   
 458   shrmiss(regq,reg)=sum(cod$(NOT posprice(cod,reg)), shr(cod,regq));
 459   display shrmiss;
 460   
 461    povline_ali(reg)=sum(cod$posquan(cod,reg),price(cod,reg,'price_uw5')*
 462                                             quan(cod,reg,'quan5'))/.9;
 463   
 464    display povline_ali;
 465   
 466   
 467  *boost values so shares sum to one;
 468  shr(cod,reg)=shr(cod,reg)/chkshr(reg);
 469   
 470  *fill out price matrix with maximum observed price outside of Maputo
 471   
 472  loop((cod,reg)$(NOT posprice(cod,reg) AND posquan(cod,reg)),
 473           loop(r,
 474                   price(cod,reg,'price_uw5')=max(price(cod,reg,'price_uw5'),
 475                                                price(cod,r,'price_uw5'));
 476           );
 477  );
 478   
 479  chkprice(cod,reg)$(NOT price(cod,reg,'price_uw5') AND posquan(cod,reg))=yes;
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           06/11/13 12:43:17 Page 10
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 480   
 481  display 'should be an empty set', chkprice;
 482   
 483   
 484   
 485   
 486  Variables
 487     z                objective value
 488     q(cod,reg)       revised maximum entropy quanties in grams
 489     s(cod,reg)       derived maximum entropy shares
 490     povline(regq,reg)  estimated revealed preference matrix
 491  ;
 492   
 493   
 494  Equations
 495     obj              objective equation
 496     rev(regq,reg)    revealed preference tests
 497     deflin(regq,reg) define revealed preference matrix
 498     defshr(cod,regq) define the endogenous budget shares
 499     cals(regq)       ensure that each bundle hits the calorie
 500   
 501  ;
 502   
 503     obj ..  z=e= sum((cod,rq)$posquan(cod,rq),
 504                     s(cod,rq)*log(s(cod,rq)/shr(cod,rq)));
 505   
 506     deflin(rq,r) .. povline(rq,r) =e= sum(cod$posquan(cod,rq),
 507                            q(cod,rq)*price(cod,r,'price_uw5'));
 508   
 509     rev(rq,r) ..    povline(r,rq)=g=povline(rq,rq);
 510   
 511     defshr(cod,rq)$posquan(cod,rq) ..
 512               povline(rq,rq)*s(cod,rq)=e= q(cod,rq)*price(cod,rq,'price_uw5');
 513   
 514     cals(rq) .. sum(cod$posquan(cod,rq),
 515                      q(cod,rq)*quan(cod,rq,'calperg'))=e=.95*caltarg;
 516   
 517  *set bounds and starting values for variables
 518   
 519    q.lo(cod,reg)=.00001;
 520    q.up(cod,reg)=inf;
 521    q.l(cod,reg)=quan(cod,reg,'quan5');
 522    q.fx(cod,reg)$(NOT posquan(cod,reg))=0;
 523   
 524    povline.l(regq,reg)= sum(cod$posquan(cod,regq),
 525                            q.l(cod,regq)*price(cod,reg,'price_uw5'));
 526   
 527   
 528    display povline.l;
 529   
 530  *print the revealed preference matrix prior to optimisation;
 531  file povline_rp /C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_rp_inout.csv/;
 532  put povline_rp;
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           06/11/13 12:43:17 Page 11
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 533  povline_rp.pc=5;
 534  povline_rp.nd=0;
 535  put " ";
 536  loop(reg,
 537        put reg.tl;
 538  );
 539  put /;
 540  loop(regq,
 541       put regq.tl;
 542       loop(reg,
 543           put povline.l(regq,reg);
 544       );
 545       put /;
 546  );
 547  put /; put /; put /;
 548   
 549     s.l(cod,regq)= q.l(cod,regq)*price(cod,regq,'price_uw5')/povline.l(regq,regq);
 550     s.lo(cod,regq)=.0001;
 551     s.fx(cod,regq)$(NOT posquan(cod,regq))=0;
 552   
 553   
 554     model revpref /obj, deflin, rev, defshr, cals/;
 555   
 556     revpref.holdfixed=1;
 557   
 558     option limrow=100;
 559   
 560     option nlp=conopt;
 561   
 562     solve revpref using nlp minimizing z;
 563   
 564     povline.l(regq,reg)$(NOT rq(regq) OR NOT r(reg))=0;
 565     display "this is without adjustment for calorie target or 90%", povline.l;
 566   
 567  put /;
 568  loop(rq,
 569       put rq.tl;
 570       loop(r,
 571           put povline.l(rq,r);
 572       );
 573       put /;
 574  );
 575  put /;
 576   
 577   
 578  PARAMETERS
 579     qent(cod,reg)  entropy quantities with all adjustments accounted for
 580     povline_ent(reg) entropy line that hits calorie targets (100% food expen)
 581    ;
 582  *readjust quantities to hit regional calorie target and calculate line;
 583     qent(cod,r)=q.l(cod,r)*quan(cod,r,'calpp')/caltarg;
 584   
 585     povline_ent(r)=sum(cod$posquan(cod,r),price(cod,r,'price_uw5')*
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           06/11/13 12:43:17 Page 12
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 586                                             qent(cod,r))/.9;
 587   
 588     perc_chng(r)=100*(povline_ent(r)/povline_ali(r)-1);
 589   
 590     display perc_chng, povline_ent, povline_ali;
 591   
 592     file res /C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\qent.csv/;
 593   
 594     put res;
 595     res.pc=5;
 596     res.nd=6;
 597   
 598  *recall that the basket reflects 90% of expenditure and 95% of calories";
 599     put "spdomain" ;
 600     put "product" ;
 601     put "quan5";
 602     put "qent";
 603     put "price";
 604     put "calperg";
 605   
 606     put /;
 607   
 608     loop(reg,
 609         loop(cod,
 610             put reg.tl;
 611             put cod.tl;
 612             put quan(cod,reg,'quan5');
 613             put qent(cod,reg);
 614             put price(cod,reg,'price_uw5')
 615             put quan(cod,reg,'calperg');
 616             put /;
 617         );
 618     );
 619   
 620     file lin /C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_ent.csv/;
 621   
 622     put lin;
 623     lin.pc=5;
 624  *Flexible, entropy, and fixed food pov lines at 100% expenditure
 625   
 626     put "spdomain";
 627     put "flex";
 628     put "ent";
 629     put /;
 630   
 631     loop(reg,
 632           put reg.tl;
 633           put povline_ali(reg);
 634           put povline_ent(reg);
 635           put /;
 636     );
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           06/11/13 12:43:17 Page 13
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
     2       19 INCLUDE        1      19  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\product_flex.inc
     3      105 INCLUDE        1      64  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc
     4      309 INCLUDE        1      69  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex.inc


COMPILATION TIME     =        0.078 SECONDS      3 Mb  WIN240-240 Feb 14, 2013
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           06/11/13 12:43:17 Page 14
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


----    446 share does not sum to .9

----    446 PARAMETER chkshr  check that the calculated shares sum to .9

1 0.900,    2 0.900,    3 0.900,    4 0.900,    5 0.900

**** Exec Error at line 446: Execution halted: abort$1 'share does not sum to .9'


EXECUTION TIME       =        0.000 SECONDS      4 Mb  WIN240-240 Feb 14, 2013


USER: GAMS Development Corporation, Washington, DC   G871201/0000CA-ANY
      Free Demo,  202-342-0180,  sales@gams.com,  www.gams.com   DC0000


**** FILE SUMMARY

Input      C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
Output     C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\190_revpref.lst

**** USER ERROR(S) ENCOUNTERED
