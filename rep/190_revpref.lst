GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  *File to estimate quantities consistent with revealed preferences
   2   
      This file uses:
               work\product_flex.inc
               work\price_unit_flex.inc
               work\quan_flex.inc
       
      This file creates:
               work\qent.csv
               work\povline_ali_ent.csv
               work\povline_rp_inout.csv
       
  15   
  16  SETS
  17   cod        2002 codes for products used in basket
  18  /
INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\product_flex.inc
  20  101
  21  102
  22  103
  23  104
  24  105
  25  106
  26  107
  27  108
  28  109
  29  110
  30  111
  31  112
  32  113
  33  114
  34  115
  35  116
  36  117
  37  118
  38  119
  39  121
  40  122
  41  123
  42  125
  43  127
  44  131
  45  132
  46  134
  47  135
  48  136
  49  137
  50  138
  51  139
  52  140
  53  141
  54  144
  55  145
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


  56  146
  57  147
  58  150
  59  153
  60  154
  61  156
  62  157
  63  161
  64  /
  65   
  66   reg        13 spatial domains /1*13/
  67   r(reg)     non maputo spatial regions /1*13/
  68   
  69   ptit       price table titles
  70  /
  71    count      number of observations making up the price average
  72    price_uw5  average price
  73  /
  74   
  75   qtit       quantity table titles
  76  /
  77    calperg          calories per gram
  78    quan5            quantities in grams
  79    calpp            calories per person by region
  80    povline_a_flex5    value of flexible food bundle
  81  /
  82   
  83   
  84    posquan(cod,reg)  mark positive quantities in each region
  85    posprice(cod,reg) mark the existence of acceptable price info in each region
  86    chkprice(cod,reg) ensure that prices exist once all estimated
  87  ;
  88   
  89  alias(reg,regq);
  90  alias(r,rq);
  91   
  92  SCALAR
  93     caltarg single level of calories to target across regions / 2150 /
  94   ;
  95   
  96  PARAMETERS
  97   
  98    shr(cod,reg)         shares in each basket by region
  99    chkshr(reg)          check that the calculated shares sum to .9
 100    shrmiss(regq,reg)    shares missing in each region pair
 101    povline_ali(reg)       food poverty line
 102    perc_chng(reg)       percent change in line
 103    finmiss(reg)         final missing shares post optimization procedure
 104   ;
 105   
 106  Table  price(cod,reg,ptit)  price and related information
 107                          count   price_uw5
INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 109  101     "."     1       3       .3376035
****    $222  $409
**** LINE      1 INCLUDE     C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc
**** LINE     64 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 110  101     "."     3       1       .4910341
 111  101     "."     5       4       .4676526
 112  102     "."     1       10      .3191299
 113  102     "."     2       3       .2798093
 114  102     "."     3       8       .3142642
 115  102     "."     4       3       .366226
 116  102     "."     5       23      .3376599
 117  103     "."     1       62      .3009969
 118  103     "."     3       32      .3381253
 119  103     "."     4       6       .3453003
 120  103     "."     5       137     .3297327
 121  104     "."     1       92      .7302297
 122  104     "."     2       45      .3596203
 123  104     "."     3       23      .76285
 124  104     "."     4       14      .7853787
 125  104     "."     5       294     .9526293
 126  105     "."     1       206     .236178
 127  105     "."     2       40      .4511755
 128  105     "."     3       244     .2891967
 129  105     "."     4       332     .5492003
 130  105     "."     5       360     .2766542
 131  106     "."     1       2       .140151
 132  106     "."     2       2       .6329972
 133  106     "."     3       21      .1120934
 134  106     "."     4       12      .183337
 135  106     "."     5       12      .1814732
 136  107     "."     1       172     .1065949
 137  107     "."     2       29      .0648079
 138  107     "."     3       227     .0819612
 139  107     "."     4       318     .0621319
 140  107     "."     5       342     .1024056
 141  108     "."     1       49      .5396622
 142  108     "."     2       17      .9171904
 143  108     "."     3       280     .8060521
 144  108     "."     4       293     .6687673
 145  108     "."     5       207     .604906
 146  109     "."     1       18      .1665213
 147  109     "."     2       14      .0774021
 148  109     "."     3       11      .1135
 149  109     "."     4       7       .1028695
 150  109     "."     5       122     .2438431
 151  110     "."     1       30      1.97791
 152  110     "."     2       39      2.128375
 153  110     "."     3       91      1.741806
 154  110     "."     4       63      1.62163
 155  110     "."     5       60      2.332041
 156  111     "."     1       12      .235323
 157  111     "."     2       2       .4824753
 158  111     "."     3       19      .5240191
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 159  111     "."     4       136     .4866731
 160  111     "."     5       26      .5594412
 161  112     "."     1       67      .4502415
 162  112     "."     2       16      .5236983
 163  112     "."     3       107     .3694696
 164  112     "."     4       96      .3341572
 165  112     "."     5       97      .4085167
 166  113     "."     1       208     1.119127
 167  113     "."     2       49      1.257495
 168  113     "."     3       264     1.034525
 169  113     "."     4       255     .9288635
 170  113     "."     5       303     1.154438
 171  114     "."     1       34      1.887644
 172  114     "."     2       26      1.978429
 173  114     "."     3       72      1.529116
 174  114     "."     4       116     1.508883
 175  114     "."     5       64      1.770186
 176  115     "."     1       15      1.090883
 177  115     "."     2       6       1.65914
 178  115     "."     3       94      .9371942
 179  115     "."     4       66      .7379027
 180  115     "."     5       139     1.014467
 181  116     "."     1       4       .8018025
 182  116     "."     2       2       1.751001
 183  116     "."     3       126     .5031684
 184  116     "."     4       493     .5390638
 185  116     "."     5       28      .8398448
 186  117     "."     1       57      3.927928
 187  117     "."     2       25      4.266469
 188  117     "."     3       136     4.112417
 189  117     "."     4       211     3.974511
 190  117     "."     5       142     4.379544
 191  118     "."     1       21      3.245589
 192  118     "."     2       5       3.667643
 193  118     "."     3       36      3.345737
 194  118     "."     4       24      3.562665
 195  118     "."     5       57      4.276566
 196  119     "."     1       3       3.750886
 197  119     "."     3       36      4.267977
 198  119     "."     4       63      3.952791
 199  119     "."     5       42      5.1484
 200  121     "."     1       11      3.684696
 201  121     "."     3       53      3.828576
 202  121     "."     4       73      3.700365
 203  121     "."     5       19      4.637942
 204  122     "."     1       49      .8710759
 205  122     "."     2       11      .4486699
 206  122     "."     3       123     .6327357
 207  122     "."     4       71      1.542116
 208  122     "."     5       60      1.157144
 209  123     "."     1       86      .368135
 210  123     "."     2       29      .1428554
 211  123     "."     3       205     .5769557
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 5
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 212  123     "."     4       314     .9826232
 213  123     "."     5       71      .6454917
 214  125     "."     1       90      .0816708
 215  125     "."     2       26      .1388306
 216  125     "."     3       139     .0807788
 217  125     "."     4       175     .0757143
 218  125     "."     5       149     .0900301
 219  127     "."     1       179     .7710285
 220  127     "."     2       60      .9752822
 221  127     "."     3       326     .836764
 222  127     "."     4       561     1.545816
 223  127     "."     5       142     1.563389
 224  131     "."     1       60      .3795092
 225  131     "."     2       17      .4487683
 226  131     "."     3       37      .4115217
 227  131     "."     4       46      .7059029
 228  131     "."     5       133     .4593464
 229  132     "."     1       36      .3371714
 230  132     "."     2       18      .4490861
 231  132     "."     3       122     .2570222
 232  132     "."     4       127     .2830214
 233  132     "."     5       66      .2694998
 234  134     "."     1       82      1.120926
 235  134     "."     2       7       .6138245
 236  134     "."     3       117     1.328226
 237  134     "."     4       37      .7856506
 238  134     "."     5       127     .4969815
 239  135     "."     1       218     .9180173
 240  135     "."     2       76      .8929397
 241  135     "."     3       359     1.107544
 242  135     "."     4       647     1.153306
 243  135     "."     5       397     1.070254
 244  136     "."     1       249     1.160096
 245  136     "."     2       75      1.363214
 246  136     "."     3       371     1.265396
 247  136     "."     4       405     1.486318
 248  136     "."     5       418     1.034164
 249  137     "."     1       49      .411463
 250  137     "."     2       20      .4578823
 251  137     "."     3       135     .5092133
 252  137     "."     4       169     .6882128
 253  137     "."     5       122     .4777486
 254  138     "."     1       135     .4416164
 255  138     "."     2       19      .664218
 256  138     "."     3       254     .3601109
 257  138     "."     4       230     .2968162
 258  138     "."     5       370     .363164
 259  139     "."     1       80      .7081733
 260  139     "."     2       13      1.054007
 261  139     "."     3       210     .5916331
 262  139     "."     4       528     .4024784
 263  139     "."     5       86      .5559375
 264  140     "."     1       63      .9453565
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 6
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 265  140     "."     2       10      2.440323
 266  140     "."     3       87      1.688832
 267  140     "."     4       89      1.488178
 268  140     "."     5       167     1.454554
 269  141     "."     1       183     1.461241
 270  141     "."     2       45      1.530213
 271  141     "."     3       211     1.676167
 272  141     "."     4       623     2.235426
 273  141     "."     5       473     1.879756
 274  144     "."     1       119     1.923051
 275  144     "."     2       43      2.158514
 276  144     "."     3       106     1.459774
 277  144     "."     4       10      1.329049
 278  144     "."     5       165     2.288203
 279  145     "."     1       2       1.891142
 280  145     "."     2       3       2.743696
 281  145     "."     3       32      2.030489
 282  145     "."     4       128     1.855943
 283  145     "."     5       14      2.440607
 284  146     "."     1       1       3
 285  146     "."     3       18      2.608999
 286  146     "."     4       311     1.853867
 287  146     "."     5       3       2.180138
 288  147     "."     1       191     2.150924
 289  147     "."     2       71      2.126079
 290  147     "."     3       360     2.230065
 291  147     "."     4       326     2.305125
 292  147     "."     5       250     2.530058
 293  150     "."     1       309     .8412078
 294  150     "."     2       72      .8313311
 295  150     "."     3       527     .8400352
 296  150     "."     4       1039    .7780398
 297  150     "."     5       629     1.050115
 298  153     "."     1       38      1.295393
 299  153     "."     2       5       2.373174
 300  153     "."     3       94      .6278538
 301  153     "."     4       321     .6870725
 302  153     "."     5       73      1.312429
 303  154     "."     1       3       1.082929
 304  154     "."     2       4       .4320549
 305  154     "."     3       6       .7504224
 306  154     "."     4       164     .348989
 307  154     "."     5       33      .4030007
 308  156     "."     1       31      1.075527
 309  156     "."     3       10      1.306185
 310  156     "."     4       452     1.490437
 311  156     "."     5       74      1.155024
 312  157     "."     1       19      .7686777
 313  157     "."     2       14      .5887289
 314  157     "."     3       66      .2979307
 315  157     "."     4       24      .2892361
 316  157     "."     5       40      .4142705
 317  161     "."     1       18      1.542222
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 7
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 318  161     "."     2       7       1.641486
 319  161     "."     3       29      .1279419
 320  161     "."     4       142     .3724664
 321  161     "."     5       26      .8037056
 322  ;
 323   
 324  Table   quan(cod,reg,qtit)   quantity and related information
 325                             calperg          quan5           calpp      povline_a_flex5
INCLUDE    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex.inc
 327  102     .       1       6.8900000e-01   2.0028631e+01   2.2261606e+03   635.1436
 328  103     .       1       6.8900000e-01   1.1360120e+02   2.2261606e+03   635.1436
 329  104     .       1       6.8900000e-01   4.3935093e+01   2.2261606e+03   635.1436
 330  105     .       1       1.0164000e+00   3.8064404e+02   2.2261606e+03   635.1436
 331  107     .       1       1.3440000e+00   4.3986511e+02   2.2261606e+03   635.1436
 332  108     .       1       3.1400000e+00   2.6127857e+01   2.2261606e+03   635.1436
 333  110     .       1       3.6100000e+00   2.8652425e+00   2.2261606e+03   635.1436
 334  112     .       1       9.4600000e-01   4.0222065e+01   2.2261606e+03   635.1436
 335  113     .       1       3.6500000e+00   7.4363159e+01   2.2261606e+03   635.1436
 336  117     .       1       1.7982000e+00   4.1863313e+00   2.2261606e+03   635.1436
 337  122     .       1       6.1610000e-01   9.3601284e+00   2.2261606e+03   635.1436
 338  123     .       1       3.7500000e+00   3.1813726e+01   2.2261606e+03   635.1436
 339  125     .       1       6.0000000e-01   1.7231482e+02   2.2261606e+03   635.1436
 340  127     .       1       8.8400000e+00   1.4224877e+01   2.2261606e+03   635.1436
 341  132     .       1       4.3310000e-01   1.8588734e+01   2.2261606e+03   635.1436
 342  134     .       1       4.9075000e-01   9.6678734e+00   2.2261606e+03   635.1436
 343  135     .       1       3.6400000e-01   6.9465151e+00   2.2261606e+03   635.1436
 344  136     .       1       1.6380000e-01   1.0832402e+01   2.2261606e+03   635.1436
 345  138     .       1       2.0160000e-01   3.5557648e+01   2.2261606e+03   635.1436
 346  139     .       1       2.6491112e-01   6.9659996e+00   2.2261606e+03   635.1436
 347  140     .       1       1.0300000e+00   1.7209349e+01   2.2261606e+03   635.1436
 348  141     .       1       3.1300000e+00   3.0597992e+01   2.2261606e+03   635.1436
 349  144     .       1       5.8800000e+00   6.7633629e+00   2.2261606e+03   635.1436
 350  147     .       1       3.8700000e+00   1.3959906e+01   2.2261606e+03   635.1436
 351  150     .       1       0.0000000e+00   8.3541574e+00   2.2261606e+03   635.1436
 352  153     .       1       1.5300000e+00   3.6467202e+00   2.2261606e+03   635.1436
 353  157     .       1       1.2537871e+00   9.4667282e+00   2.2261606e+03   635.1436
 354  104     .       2       6.8900000e-01   1.7766324e+02   2.3196433e+03   708.96
 355  105     .       2       1.0164000e+00   1.0327641e+02   2.3196433e+03   708.96
 356  107     .       2       1.3440000e+00   2.9061829e+02   2.3196433e+03   708.96
 357  108     .       2       3.1400000e+00   3.9830685e+01   2.3196433e+03   708.96
 358  109     .       2       6.4680000e-01   6.7222961e+01   2.3196433e+03   708.96
 359  110     .       2       3.6100000e+00   2.1731920e+01   2.3196433e+03   708.96
 360  112     .       2       9.4600000e-01   2.3760660e+01   2.3196433e+03   708.96
 361  113     .       2       3.6500000e+00   5.7778526e+01   2.3196433e+03   708.96
 362  114     .       2       2.6600000e+00   2.4087646e+01   2.3196433e+03   708.96
 363  117     .       2       1.7982000e+00   4.8500862e+00   2.3196433e+03   708.96
 364  122     .       2       6.1610000e-01   1.8518957e+01   2.3196433e+03   708.96
 365  123     .       2       3.7500000e+00   1.1015368e+02   2.3196433e+03   708.96
 366  125     .       2       6.0000000e-01   1.4271823e+02   2.3196433e+03   708.96
 367  127     .       2       8.8400000e+00   2.2552076e+01   2.3196433e+03   708.96
 368  132     .       2       4.3310000e-01   1.3067448e+01   2.3196433e+03   708.96
 369  135     .       2       3.6400000e-01   1.3419051e+01   2.3196433e+03   708.96
 370  136     .       2       1.6380000e-01   1.6864832e+01   2.3196433e+03   708.96
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 8
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 371  140     .       2       1.0300000e+00   2.1565800e+00   2.3196433e+03   708.96
 372  141     .       2       3.1300000e+00   3.0030006e+01   2.3196433e+03   708.96
 373  144     .       2       5.8800000e+00   1.0675310e+01   2.3196433e+03   708.96
 374  147     .       2       3.8700000e+00   3.1460846e+01   2.3196433e+03   708.96
 375  150     .       2       0.0000000e+00   7.0323238e+00   2.3196433e+03   708.96
 376  157     .       2       1.2537871e+00   2.3132084e+01   2.3196433e+03   708.96
 377  103     .       3       6.8900000e-01   1.8135044e+01   2.1930989e+03   599.915
 378  105     .       3       1.0164000e+00   1.9027061e+02   2.1930989e+03   599.915
 379  107     .       3       1.3440000e+00   3.6071115e+02   2.1930989e+03   599.915
 380  108     .       3       3.1400000e+00   1.1920554e+02   2.1930989e+03   599.915
 381  110     .       3       3.6100000e+00   6.1918101e+00   2.1930989e+03   599.915
 382  112     .       3       9.4600000e-01   2.4717794e+01   2.1930989e+03   599.915
 383  113     .       3       3.6500000e+00   6.2361473e+01   2.1930989e+03   599.915
 384  115     .       3       3.7800000e+00   1.7187815e+01   2.1930989e+03   599.915
 385  116     .       3       3.3900000e+00   4.1819981e+01   2.1930989e+03   599.915
 386  117     .       3       1.7982000e+00   5.0904002e+00   2.1930989e+03   599.915
 387  121     .       3       1.4835000e+00   2.8043444e+00   2.1930989e+03   599.915
 388  122     .       3       6.1610000e-01   2.6677921e+01   2.1930989e+03   599.915
 389  123     .       3       3.7500000e+00   3.0387503e+01   2.1930989e+03   599.915
 390  125     .       3       6.0000000e-01   1.2586227e+02   2.1930989e+03   599.915
 391  127     .       3       8.8400000e+00   1.3409137e+01   2.1930989e+03   599.915
 392  132     .       3       4.3310000e-01   4.1925072e+01   2.1930989e+03   599.915
 393  134     .       3       4.9075000e-01   4.9077821e+00   2.1930989e+03   599.915
 394  136     .       3       1.6380000e-01   8.1105442e+00   2.1930989e+03   599.915
 395  138     .       3       2.0160000e-01   4.1185760e+01   2.1930989e+03   599.915
 396  139     .       3       2.6491112e-01   2.2844309e+01   2.1930989e+03   599.915
 397  140     .       3       1.0300000e+00   5.8622465e+00   2.1930989e+03   599.915
 398  141     .       3       3.1300000e+00   1.2931035e+01   2.1930989e+03   599.915
 399  144     .       3       5.8800000e+00   3.6545691e+00   2.1930989e+03   599.915
 400  147     .       3       3.8700000e+00   1.2924346e+01   2.1930989e+03   599.915
 401  150     .       3       0.0000000e+00   8.9313803e+00   2.1930989e+03   599.915
 402  153     .       3       1.5300000e+00   1.4807210e+01   2.1930989e+03   599.915
 403  157     .       3       1.2537871e+00   1.8888281e+01   2.1930989e+03   599.915
 404  105     .       4       1.0164000e+00   5.4875710e+01   2.2007009e+03   526.8311
 405  107     .       4       1.3440000e+00   5.2232782e+02   2.2007009e+03   526.8311
 406  108     .       4       3.1400000e+00   7.4100212e+01   2.2007009e+03   526.8311
 407  111     .       4       3.6500000e+00   2.5558823e+01   2.2007009e+03   526.8311
 408  112     .       4       9.4600000e-01   1.9425417e+01   2.2007009e+03   526.8311
 409  113     .       4       3.6500000e+00   2.6869917e+01   2.2007009e+03   526.8311
 410  116     .       4       3.3900000e+00   1.1433953e+02   2.2007009e+03   526.8311
 411  117     .       4       1.7982000e+00   3.2274272e+00   2.2007009e+03   526.8311
 412  121     .       4       1.4835000e+00   2.5070632e+00   2.2007009e+03   526.8311
 413  122     .       4       6.1610000e-01   4.6929240e+00   2.2007009e+03   526.8311
 414  123     .       4       3.7500000e+00   1.3503740e+01   2.2007009e+03   526.8311
 415  125     .       4       6.0000000e-01   1.3979861e+02   2.2007009e+03   526.8311
 416  127     .       4       8.8400000e+00   1.0697933e+01   2.2007009e+03   526.8311
 417  132     .       4       4.3310000e-01   1.8630196e+01   2.2007009e+03   526.8311
 418  135     .       4       3.6400000e-01   5.7799563e+00   2.2007009e+03   526.8311
 419  136     .       4       1.6380000e-01   4.9382825e+00   2.2007009e+03   526.8311
 420  139     .       4       2.6491112e-01   5.6351334e+01   2.2007009e+03   526.8311
 421  140     .       4       1.0300000e+00   3.9617693e+00   2.2007009e+03   526.8311
 422  141     .       4       3.1300000e+00   2.3218388e+01   2.2007009e+03   526.8311
 423  145     .       4       8.1000000e-01   3.3880820e+00   2.2007009e+03   526.8311
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                            05/17/13 14:58:40 Page 9
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 424  146     .       4       5.7300000e+00   7.7782192e+00   2.2007009e+03   526.8311
 425  147     .       4       3.8700000e+00   5.6389933e+00   2.2007009e+03   526.8311
 426  150     .       4       0.0000000e+00   1.1561937e+01   2.2007009e+03   526.8311
 427  153     .       4       1.5300000e+00   2.7574354e+01   2.2007009e+03   526.8311
 428  154     .       4       8.1333336e-01   2.8525780e+01   2.2007009e+03   526.8311
 429  156     .       4       0.0000000e+00   5.5053964e+00   2.2007009e+03   526.8311
 430  161     .       4       1.2537871e+00   1.9271744e+01   2.2007009e+03   526.8311
 431  102     .       5       6.8900000e-01   2.7605362e+01   2.2350317e+03   785.9658
 432  103     .       5       6.8900000e-01   1.6090356e+02   2.2350317e+03   785.9658
 433  104     .       5       6.8900000e-01   9.0249023e+01   2.2350317e+03   785.9658
 434  105     .       5       1.0164000e+00   2.7511563e+02   2.2350317e+03   785.9658
 435  107     .       5       1.3440000e+00   5.0945200e+02   2.2350317e+03   785.9658
 436  108     .       5       3.1400000e+00   5.5450657e+01   2.2350317e+03   785.9658
 437  109     .       5       6.4680000e-01   1.0411124e+02   2.2350317e+03   785.9658
 438  110     .       5       3.6100000e+00   2.6490753e+00   2.2350317e+03   785.9658
 439  112     .       5       9.4600000e-01   2.6629900e+01   2.2350317e+03   785.9658
 440  113     .       5       3.6500000e+00   4.7785290e+01   2.2350317e+03   785.9658
 441  115     .       5       3.7800000e+00   1.9760754e+01   2.2350317e+03   785.9658
 442  117     .       5       1.7982000e+00   4.9166584e+00   2.2350317e+03   785.9658
 443  118     .       5       2.3534000e+00   2.1044786e+00   2.2350317e+03   785.9658
 444  119     .       5       1.2210000e+00   1.3293246e+00   2.2350317e+03   785.9658
 445  122     .       5       6.1610000e-01   8.2612476e+00   2.2350317e+03   785.9658
 446  123     .       5       3.7500000e+00   1.1464869e+01   2.2350317e+03   785.9658
 447  125     .       5       6.0000000e-01   1.6214549e+02   2.2350317e+03   785.9658
 448  127     .       5       8.8400000e+00   4.0143824e+00   2.2350317e+03   785.9658
 449  131     .       5       6.2080000e-01   1.2824902e+01   2.2350317e+03   785.9658
 450  134     .       5       4.9075000e-01   1.3860973e+01   2.2350317e+03   785.9658
 451  135     .       5       3.6400000e-01   6.4159694e+00   2.2350317e+03   785.9658
 452  136     .       5       1.6380000e-01   1.2838732e+01   2.2350317e+03   785.9658
 453  138     .       5       2.0160000e-01   3.4166180e+01   2.2350317e+03   785.9658
 454  140     .       5       1.0300000e+00   2.3124674e+01   2.2350317e+03   785.9658
 455  141     .       5       3.1300000e+00   4.1929504e+01   2.2350317e+03   785.9658
 456  144     .       5       5.8800000e+00   5.4675350e+00   2.2350317e+03   785.9658
 457  147     .       5       3.8700000e+00   6.3443232e+00   2.2350317e+03   785.9658
 458  150     .       5       0.0000000e+00   1.1045601e+01   2.2350317e+03   785.9658
 459  153     .       5       1.5300000e+00   4.8625445e+00   2.2350317e+03   785.9658
 460  ;
 461   
 462    shr(cod,reg)$quan(cod,reg,'povline_a_flex5')
 463                        =price(cod,reg,'price_uw5')*quan(cod,reg,'quan5')/
 464                         quan(cod,reg,'povline_a_flex5');
 465   
 466    chkshr(reg)=sum(cod,shr(cod,reg));
 467   
 468  loop(reg,
 469    abort$(abs(chkshr(reg)-.9) gt .0001) "share does not sum to .9", chkshr ;
 470  );
 471   
 472   
 473  *turn on dynamic sets to indicate positive quantities and existence of
 474  *price info for each region
 475   
 476   posprice(cod,reg)$(price(cod,reg,'price_uw5')
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 14:58:40 Page 10
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 477                        AND price(cod,reg,'count') gt 4) = yes;
 478   
 479   posquan(cod,reg)$quan(cod,reg,'quan5')=yes;
 480   
 481   shrmiss(regq,reg)=sum(cod$(NOT posprice(cod,reg)), shr(cod,regq));
 482   display shrmiss;
 483   
 484    povline_ali(reg)=sum(cod$posquan(cod,reg),price(cod,reg,'price_uw5')*
 485                                             quan(cod,reg,'quan5'))/.9;
 486   
 487    display povline_ali;
 488   
 489   
 490  *boost values so shares sum to one;
 491  shr(cod,reg)=shr(cod,reg)/chkshr(reg);
 492   
 493  *fill out price matrix with maximum observed price outside of Maputo
 494   
 495  loop((cod,reg)$(NOT posprice(cod,reg) AND posquan(cod,reg)),
 496           loop(r,
 497                   price(cod,reg,'price_uw5')=max(price(cod,reg,'price_uw5'),
 498                                                price(cod,r,'price_uw5'));
 499           );
 500  );
 501   
 502  chkprice(cod,reg)$(NOT price(cod,reg,'price_uw5') AND posquan(cod,reg))=yes;
 503   
 504  display 'should be an empty set', chkprice;
 505   
 506   
 507   
 508   
 509  Variables
 510     z                objective value
 511     q(cod,reg)       revised maximum entropy quanties in grams
 512     s(cod,reg)       derived maximum entropy shares
 513     povline(regq,reg)  estimated revealed preference matrix
 514  ;
 515   
 516   
 517  Equations
 518     obj              objective equation
 519     rev(regq,reg)    revealed preference tests
 520     deflin(regq,reg) define revealed preference matrix
 521     defshr(cod,regq) define the endogenous budget shares
 522     cals(regq)       ensure that each bundle hits the calorie
 523   
 524  ;
 525   
 526     obj ..  z=e= sum((cod,rq)$posquan(cod,rq),
 527                     s(cod,rq)*log(s(cod,rq)/shr(cod,rq)));
 528   
 529     deflin(rq,r) .. povline(rq,r) =e= sum(cod$posquan(cod,rq),
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 14:58:40 Page 11
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 530                            q(cod,rq)*price(cod,r,'price_uw5'));
 531   
 532     rev(rq,r) ..    povline(r,rq)=g=povline(rq,rq);
 533   
 534     defshr(cod,rq)$posquan(cod,rq) ..
 535               povline(rq,rq)*s(cod,rq)=e= q(cod,rq)*price(cod,rq,'price_uw5');
 536   
 537     cals(rq) .. sum(cod$posquan(cod,rq),
 538                      q(cod,rq)*quan(cod,rq,'calperg'))=e=.95*caltarg;
 539   
 540  *set bounds and starting values for variables
 541   
 542    q.lo(cod,reg)=.00001;
 543    q.up(cod,reg)=inf;
 544    q.l(cod,reg)=quan(cod,reg,'quan5');
 545    q.fx(cod,reg)$(NOT posquan(cod,reg))=0;
 546   
 547    povline.l(regq,reg)= sum(cod$posquan(cod,regq),
 548                            q.l(cod,regq)*price(cod,reg,'price_uw5'));
 549   
 550   
 551    display povline.l;
 552   
 553  *print the revealed preference matrix prior to optimisation;
 554  file povline_rp C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_rp_inout.csv/;
 555  put povline_rp;
****  $183
**** LINE    165 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 556  povline_rp.pc=5;
 557  povline_rp.nd=0;
 558  put " ";
 559  loop(reg,
 560        put reg.tl;
 561  );
 562  put /;
 563  loop(regq,
 564       put regq.tl;
 565       loop(reg,
 566           put povline.l(regq,reg);
 567       );
 568       put /;
 569  );
 570  put /; put /; put /;
 571   
 572     s.l(cod,regq)= q.l(cod,regq)*price(cod,regq,'price_uw5')/povline.l(regq,regq);
 573     s.lo(cod,regq)=.0001;
 574     s.fx(cod,regq)$(NOT posquan(cod,regq))=0;
 575   
 576   
 577     model revpref /obj, deflin, rev, defshr, cals/;
 578   
 579     revpref.holdfixed=1;
 580   
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 14:58:40 Page 12
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 581     option limrow=100;
 582   
 583     option nlp=conopt;
 584   
 585     solve revpref using nlp minimizing z;
****                                         $257
**** LINE    195 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 586   
 587     povline.l(regq,reg)$(NOT rq(regq) OR NOT r(reg))=0;
 588     display "this is without adjustment for calorie target or 90%", povline.l;
 589   
 590  put /;
 591  loop(rq,
 592       put rq.tl;
 593       loop(r,
 594           put povline.l(rq,r);
 595       );
 596       put /;
 597  );
 598  put /;
 599   
 600   
 601  PARAMETERS
 602     qent(cod,reg)  entropy quantities with all adjustments accounted for
 603     povline_ent(reg) entropy line that hits calorie targets (100% food expen)
 604    ;
 605  *readjust quantities to hit regional calorie target and calculate line;
 606     qent(cod,r)=q.l(cod,r)*quan(cod,r,'calpp')/caltarg;
 607   
 608     povline_ent(r)=sum(cod$posquan(cod,r),price(cod,r,'price_uw5')*
 609                                             qent(cod,r))/.9;
 610   
 611     perc_chng(r)=100*(povline_ent(r)/povline_ali(r)-1);
 612   
 613     display perc_chng, povline_ent, povline_ali;
 614   
 615     file res C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\qent.csv/;
 616   
 617     put res;
****    $183
**** LINE    227 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 618     res.pc=5;
 619     res.nd=6;
 620   
 621  *recall that the basket reflects 90% of expenditure and 95% of calories";
 622     put "spdomain" ;
 623     put "product" ;
 624     put "quan5";
 625     put "qent";
 626     put "price";
 627     put "calperg";
 628   
 629     put /;
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 14:58:40 Page 13
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 630   
 631     loop(reg,
 632         loop(cod,
 633             put reg.tl;
 634             put cod.tl;
 635             put quan(cod,reg,'quan5');
 636             put qent(cod,reg);
 637             put price(cod,reg,'price_uw5')
 638             put quan(cod,reg,'calperg');
 639             put /;
 640         );
 641     );
 642   
 643     file lin C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_ent.csv/;
 644   
 645     put lin;
****    $183
**** LINE    255 INPUT       C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
 646     lin.pc=5;
 647  *Flexible, entropy, and fixed food pov lines at 100% expenditure
 648   
 649     put "spdomain";
 650     put "flex";
 651     put "ent";
 652     put /;
 653   
 654     loop(reg,
 655           put reg.tl;
 656           put povline_ali(reg);
 657           put povline_ent(reg);
 658           put /;
 659     );
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 14:58:40 Page 14
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Error Messages


183  Closing '/' missing in file statement
222  Row dimension inconsistent with declared dimension and
       column dimension
257  Solve statement not checked because of previous errors
409  Unrecognizable item - skip to find a new statement
       looking for a ';' or a key word to get started again

**** 6 ERROR(S)   0 WARNING(S)
GAMS Rev 240  WEX-VS8 24.0.2 x86/MS Windows                                                                                                                                                                                           05/17/13 14:58:40 Page 15
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
     2       19 INCLUDE        1      19  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\product_flex.inc
     3      108 INCLUDE        1      64  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc
     4      326 INCLUDE        1      69  .C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex.inc


COMPILATION TIME     =        0.000 SECONDS      3 Mb  WIN240-240 Feb 14, 2013


USER: Joint Workshop  at TIPS                        G130220/0001AN-GEN
      University of Copenhagen, UNU-WIDER, and TIPS             DC10188
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\new\190a_revpref13_r.gms
Output     C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\190_revpref.lst

**** USER ERROR(S) ENCOUNTERED
