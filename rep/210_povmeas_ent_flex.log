-------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/210_povmeas_ent_f
> lex.log
  log type:  text
 opened on:  20 May 2013, 14:39:48

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************************
> * 210_povmeas_ent_flex.do               (start)
> *
> * This file produces poverty measures taking the entropy adjusted poverty 
> * lines as a base. It produces two sets of poverty measures. In one, 
> * Maputo is treated with the logic of the fixed bundle. In the second, the revealed
>  preference logic
> * is maintained. Here, the flexible bundle is viewed as being determined by the 
> * lower constraint on the value of the food bundle dictated by P_t2*Q_t1. In this c
> ase,
> * the year t2 food shares are calculated and applied.
> *
> * Fixed poverty lines/etc. are mentioned here and there. But there are NO fixed
> * calculations for Maputo (or other provinces) anymore
> *
> *********************************************************************************;
. /*
> This file uses:
>         work\povline_food_ent.csv
>         work\conpc.dta
>         work\hhdata.dta
>         work/temp_index_reg_tpi.dta
> 
> This file creates:
>         work\povlines_ent.dta
>         work\povmeas_ent_flex.dta
>         work\povlines_ent.dta
>       work\nat_pov_ent_m.csv
>       work\rur_pov_ent_m.csv
>       work\news_pov_ent_m.csv
>       work\reg_tpi_pov_ent_m.csv
>       work\strata_pov_ent_m.csv
>       work\spdomain_pov_ent_m.csv
>       work\spdomain_pov_ent_m.csv
>         work\povlines_ent.csv
> */
> 
> 
> 
> **************************************************************************;
. * Bring in data file with nominal consumption per capita, and deflate it
> * by temporal price index.
> **************************************************************************;
. use "$path/work/hhdata.dta", clear;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         sort hhid;

.         merge hhid using "$path/work/conpc.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         gen food_pc_tpi  = food_pc_nom /tpi_trim;

.         lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;

.         lab var cons_pc_tpi "Temp adjusted total consumption/day";

.         gen one=1;

.         tempfile contpi;

. save `contpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

. **************************************************************************;
. * Calculate the food shares for people near the food poverty line
> **************************************************************************;
. *Bring in entropy estimated flexible lines;
. clear;

. insheet using "$path\work\povline_food_ent.csv";
(3 vars, 5 obs)

.         rename ent food_povline_ent;

.      keep spdomain food_povline_ent;

.      sort spdomain;

. *Bring in fixed bundle poverty lines for Maputo ;
. *This is the same level for both entropy and fixed bundle analysis;
. *since the Q02*P02<=Q96*P02 constraint is binding;
. *$no_temp_rev   merge spdomain using "$path\work\povline_food_fix.dta";
. *$no_temp_rev    replace food_povline_ent=food_povline_w if spdomain>10;
.       keep spdomain food_povline_ent;

.       sort spdomain;

.       tempfile food_povline_ent;

. save `food_povline_ent';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved

. clear;

. use `contpi';

.         sort spdomain;

.         merge spdomain using `food_povline_ent';
variable spdomain does not uniquely identify observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

. gen     triwt = 0 ;

. replace triwt = 11 - round(50*abs(cons_pc_tpi/food_povline_ent-1)+0.5)
>                 if abs(cons_pc_tpi/food_povline_ent-1)<=0.2;
(315 real changes made)

.         gen tripopwt=triwt*hhweight*hhsize;

.         collapse (mean) nf_pc_nom food_povline_ent [aw=tripopwt] ,
>         by(spdomain);

.         rename nf_pc_nom povline_nf;

.         lab var povline_nf "Nonfood poverty line";

.         sort spdomain;

. *       merge spdomain using "$foodshr_pastSurvey", keep(spdomain $fdshr_t1);
. *       tab _m;
. *       drop _m;
. *       gen fdshr_t1 = $fdshr_t1;
. *       drop $fdshr_t1;
. *       lab var fdshr_t1 "year t1 (e.g. 1996) poverty line food share";
.      *calculate line for all provinces with flexible food shares;
.                         gen povline_ent_m=food_povline_ent + povline_nf;

.         gen fdshr=food_povline_ent/povline_ent;

.         lab var fdshr "year t2 (e.g. 2002) poverty line food share";

.       *redo for maputo inserting the fixed food share;
.  *     gen povline_ent=povline_ent_m;
. *MAH;
. *$no_temp_rev   replace povline_ent=food_povline_ent/fdshr_t1 if spdomain >=11;
. *       lab var povline_ent   "poverty lines with Maputo regions calculated using f
> ixed bundle non-food shares";
.     lab var povline_ent   "poverty lines with all regions calculated using flexible
>  bundle non-food shares";

. *    lab var povline_ent_m "poverty lines with Maputo regions calculated using flex
> ible bundle non-food shares";
.         sort spdomain;

. tempfile povlines_ent;

. save `povlines_ent', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

. clear;

. **************************************************************************;
. * Calculate poverty measures with all regions using flexible year t2 food shares
> **************************************************************************;
. use `contpi';

.         sort spdomain;

.         merge spdomain using `povlines_ent';
variable spdomain does not uniquely identify observations in the master data
(label spdomain_original already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

. **************************************************************************;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first. The middle of the 13
> * codes is code 7 -- that's arbirtary enough.
> **************************************************************************;
.         gen cr= cons_pc_tpi ;

.         gen linpob=povline_ent;

. *MAH;
.  *Now only 6 regions, so base is chosen as the 1;
.         *qui sum linpob if spdomain==7, meanonly;
.         qui sum linpob if spdomain==1, meanonly;

.         global spi_base=r(mean);

.         gen spi=linpob/$spi_base;

.         gen cr2=cr/spi;

.         qui sum cr [aw=hhweight*hhsize];

.         global sumcr=r(sum);

.         qui sum cr2 [aw=hhweight*hhsize];

.         global sumcr2=r(sum);

.         replace spi=spi*$sumcr2/$sumcr;
(6775 real changes made)

.         gen linpobr=linpob/spi;

.         replace cr2=cr/spi;
(6775 real changes made)

.         sum cr cr2 linpob linpobr [aw=hhweight*hhsize];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
          cr |    6775   200636622    9398.417   395673.3   77.25769   8.12e+07
         cr2 |    6775   200636622    9398.417   324745.3    93.9333   6.64e+07
      linpob |    6775   200636622    930.8297   115.0871   874.8599   1312.713
     linpobr |    6775   200636622    1074.459          0   1074.459   1074.459

.         lab var cr      "Temporally-adjusted cons pc";

.         lab var cr2     "Spatially & temporally adjusted cons pc";

.         lab var linpob  "Poverty line";

.         lab var linpobr "Real poverty line";

.         lab var spi     "Spatial price index";

.         *calculate poverty measures;
.         gen h = 100     if cr2 <=(linpobr);
(5887 missing values generated)

.         replace  h = 0  if cr2 > (linpobr);
(5887 real changes made)

.         gen             pg      = ((linpobr - cr2 )/linpobr) *100;

.         replace         pg      = 0             if h==0;
(5887 real changes made)

.         gen             spg     = ((( linpobr - cr2 )/ linpobr )^2)*100;

.         replace         spg     = 0             if h==0;
(5887 real changes made)

.         gen h_ent  =h;

.         gen pg_ent =pg;

.         gen spg_ent=spg;

.         lab var h_ent   "Poverty headcount entropy bundle with Maputo food share fi
> xed";

.         lab var pg_ent  "Poverty gap entropy bundle with Maputo food share fixed";

.         lab var spg_ent "Squared poverty gap entropy bundle with Maputo food share 
> fixed";

.         sort hhid;

.         merge hhid using "$path\work\hhdata.dta";
(label lrural already defined)
(label lsurvmon already defined)
(label lsurvquar already defined)
(label STRA already defined)
(label lbreg already defined)
(label lbur already defined)
(label lbpoor already defined)
(label Q1B8 already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop if _merge~=3;
(0 observations deleted)

.         drop _merge;

.         gen popwt=hhsize*hhweight;

.         lab var popwt "Population weights = hhsize X hhweight";

.                 * Stata 10.1 syntax ;
.         svyset , clear;

.         svyset [pweight=popwt] , str(strata) psu(psu);

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>

. *MAH: Below at various places the original reg13 has been changed into spdomain or 
> spdomain ;
.                 svy: mean h_ent pg_ent spg_ent;
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
       h_ent |   11.41657   .8114811      9.823349     13.0098
      pg_ent |   2.973011   .2432172       2.49549    3.450532
     spg_ent |   1.266011   .1338831      1.003151    1.528871
--------------------------------------------------------------

.         svy: mean h_ent pg_ent spg_ent , over(rural);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent        |
       Urban |   3.290592   1.014372      1.299022    5.282163
       Rural |   12.65777   .9029027      10.88506    14.43049
-------------+------------------------------------------------
pg_ent       |
       Urban |   .5445312    .143074      .2636264    .8254361
       Rural |   3.343948   .2754074      2.803226     3.88467
-------------+------------------------------------------------
spg_ent      |
       Urban |   .1453381   .0485565      .0500045    .2406717
       Rural |   1.437188    .153234      1.136336    1.738041
--------------------------------------------------------------

.         svy: mean h_ent pg_ent spg_ent , over(strata);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent        |
     KAMPALA |   4.167031   2.378903     -.5035977     8.83766
   _subpop_2 |   4.662128   1.413863      1.886215     7.43804
   _subpop_3 |   6.997818   1.856886      3.352093    10.64354
   _subpop_4 |   6.661587   1.413255      3.886868    9.436306
     EASTERN |   11.59192   2.273862      7.127522    16.05631
   _subpop_6 |   16.05722    2.73805      10.68146    21.43298
   _subpop_7 |   73.44685   6.393332      60.89448    85.99922
   _subpop_8 |   18.10525   4.219794      9.820296     26.3902
   _subpop_9 |   11.58494   2.157515       7.34897     15.8209
  _subpop_10 |   3.988778   .9785319      2.067574    5.909982
-------------+------------------------------------------------
pg_ent       |
     KAMPALA |   .5309069   .2494326      .0411825    1.020631
   _subpop_2 |    .884754   .3874929      .1239683     1.64554
   _subpop_3 |   1.196951   .3670921       .476219    1.917682
   _subpop_4 |   1.294405   .2694489      .7653809    1.823428
     EASTERN |   1.986069   .3998098      1.201101    2.771037
   _subpop_6 |   4.867151   1.046913      2.811689    6.922612
   _subpop_7 |   33.30127   3.805203      25.83031    40.77222
   _subpop_8 |   3.404025   .6383636      2.150692    4.657359
   _subpop_9 |   2.752712   .6964655      1.385304     4.12012
  _subpop_10 |   .7092536   .2402486      .2375606    1.180947
-------------+------------------------------------------------
spg_ent      |
     KAMPALA |   .1130342   .0666336      -.017791    .2438595
   _subpop_2 |   .2812022   .1674376      -.047537    .6099414
   _subpop_3 |   .3566282   .1215564      .1179699    .5952864
   _subpop_4 |   .3947284   .0981834      .2019596    .5874972
     EASTERN |   .5020666   .0981752       .309314    .6948193
   _subpop_6 |    2.22826   .5861981      1.077346    3.379175
   _subpop_7 |   18.38929   2.504754      13.47157      23.307
   _subpop_8 |   1.013364   .2239124      .5737447    1.452983
   _subpop_9 |   1.177601   .4397072      .3143006    2.040902
  _subpop_10 |   .2279552   .1041919      .0233896    .4325208
--------------------------------------------------------------

.         svy: mean h_ent pg_ent spg_ent , over(spdomain);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent        |
   _subpop_1 |   6.577285    1.37661      3.874511    9.280058
   _subpop_2 |   3.384492   1.450191       .537255    6.231729
     Eastern |   9.376396   1.430796      6.567238    12.18555
    Northern |   26.03481   2.223898      21.66851    30.40111
     Western |    7.89738   1.252481      5.438317    10.35644
-------------+------------------------------------------------
pg_ent       |
   _subpop_1 |   1.165568   .3186587      .5399281    1.791208
   _subpop_2 |   .5115732   .1840007      .1503147    .8728318
     Eastern |   1.675259   .2554546      1.173711    2.176807
    Northern |   8.974137     .93992      7.128742    10.81953
     Western |   1.760715   .3947283      .9857235    2.535706
-------------+------------------------------------------------
spg_ent      |
   _subpop_1 |   .3633261   .1253787      .1171633    .6094889
   _subpop_2 |   .1182213   .0490338      .0219506    .2144919
     Eastern |   .4538325   .0701896      .3160254    .5916396
    Northern |    4.43314   .5787435      3.296861    5.569418
     Western |   .7165955   .2426471      .2401934    1.192998
--------------------------------------------------------------

.         svy: mean h_ent pg_ent spg_ent , over(spdomain);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent        |
   _subpop_1 |   6.577285    1.37661      3.874511    9.280058
   _subpop_2 |   3.384492   1.450191       .537255    6.231729
     Eastern |   9.376396   1.430796      6.567238    12.18555
    Northern |   26.03481   2.223898      21.66851    30.40111
     Western |    7.89738   1.252481      5.438317    10.35644
-------------+------------------------------------------------
pg_ent       |
   _subpop_1 |   1.165568   .3186587      .5399281    1.791208
   _subpop_2 |   .5115732   .1840007      .1503147    .8728318
     Eastern |   1.675259   .2554546      1.173711    2.176807
    Northern |   8.974137     .93992      7.128742    10.81953
     Western |   1.760715   .3947283      .9857235    2.535706
-------------+------------------------------------------------
spg_ent      |
   _subpop_1 |   .3633261   .1253787      .1171633    .6094889
   _subpop_2 |   .1182213   .0490338      .0219506    .2144919
     Eastern |   .4538325   .0701896      .3160254    .5916396
    Northern |    4.43314   .5787435      3.296861    5.569418
     Western |   .7165955   .2426471      .2401934    1.192998
--------------------------------------------------------------

.                 compress;
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
one was float now byte
h was float now byte
h_ent was float now byte
hhsize was double now byte

.       gen dum=1;

.         sort hhid;

.         *set aside the spatial price index;
.       tempfile spi;

. *      use "$path\work\povmeas_ent.dta", clear;
.       collapse (mean) spi, by(spdomain);

.       sort spdomain;

. save `spi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000004.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000004.tmp saved

. clear;

. **************************************************************************;
. * Calculate poverty measures with Maputo regions on flexible food shares
> **************************************************************************;
. use `contpi';

.         sort spdomain;

.         merge spdomain using `povlines_ent';
variable spdomain does not uniquely identify observations in the master data
(label spdomain_original already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

. **************************************************************************;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first. The middle of the 13
> * codes is code 7 -- that's arbirtary enough.
> **************************************************************************;
.         gen cr= cons_pc_tpi ;

.         gen linpob=povline_ent_m;

.         qui sum linpob if spdomain==1, meanonly;

.         global spi_base=r(mean);

.         gen spi=linpob/$spi_base;

.         gen cr2=cr/spi;

.         qui sum cr [aw=hhweight*hhsize];

.         global sumcr=r(sum);

.         qui sum cr2 [aw=hhweight*hhsize];

.         global sumcr2=r(sum);

.         replace spi=spi*$sumcr2/$sumcr;
(6775 real changes made)

.         gen linpobr=linpob/spi;

.         replace cr2=cr/spi;
(6775 real changes made)

.         sum cr cr2 linpob linpobr [aw=hhweight*hhsize];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
          cr |    6775   200636622    9398.417   395673.3   77.25769   8.12e+07
         cr2 |    6775   200636622    9398.417   324745.3    93.9333   6.64e+07
      linpob |    6775   200636622    930.8297   115.0871   874.8599   1312.713
     linpobr |    6775   200636622    1074.459          0   1074.459   1074.459

.         lab var cr      "Temporally-adjusted cons pc";

.         lab var cr2     "Spatially & temporally adjusted cons pc";

.         lab var linpob  "Poverty line";

.         lab var linpobr "Real poverty line";

.         lab var spi     "Spatial price index";

.         *calculate poverty measures;
.         gen h = 100     if cr2 <=(linpobr);
(5887 missing values generated)

.         replace  h = 0 if cr2 > (linpobr);
(5887 real changes made)

.         gen             pg      = ((linpobr - cr2 )/linpobr) *100;

.         replace         pg      = 0             if h==0;
(5887 real changes made)

.         gen             spg     = ((( linpobr - cr2 )/ linpobr )^2)*100;

.         replace         spg     = 0             if h==0;
(5887 real changes made)

.         gen h_ent_m  =h;

.         gen pg_ent_m =pg;

.         gen spg_ent_m=spg;

.         lab var h_ent_m   "Poverty headcount entropy bundle. Food share flexible. F
> lexible bundle";

.         lab var pg_ent_m  "Poverty gap entropy bundle. Food share flexible. Flexibl
> e bundle";

.         lab var spg_ent_m "Squared poverty gap entropy. Food share flexible. Flexib
> le bundle";

.         sort hhid;

.         merge hhid using "$path\work\hhdata.dta";
(label lrural already defined)
(label lsurvmon already defined)
(label lsurvquar already defined)
(label STRA already defined)
(label lbreg already defined)
(label lbur already defined)
(label lbpoor already defined)
(label Q1B8 already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop if _merge~=3;
(0 observations deleted)

.         drop _merge;

.         gen popwt=hhsize*hhweight;

.         lab var popwt "Population weights = hhsize X hhweight";

.                 * Stata 10.1 syntax ;
.         svyset , clear;

.         svyset [pweight=popwt] , str(strata) psu(psu);

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>

.                 svy: mean h_ent_m pg_ent_m spg_ent_m;
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
     h_ent_m |   11.41657   .8114811      9.823349     13.0098
    pg_ent_m |   2.973011   .2432172       2.49549    3.450532
   spg_ent_m |   1.266011   .1338831      1.003151    1.528871
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(rural);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
       Urban |   3.290592   1.014372      1.299022    5.282163
       Rural |   12.65777   .9029027      10.88506    14.43049
-------------+------------------------------------------------
pg_ent_m     |
       Urban |   .5445312    .143074      .2636264    .8254361
       Rural |   3.343948   .2754074      2.803226     3.88467
-------------+------------------------------------------------
spg_ent_m    |
       Urban |   .1453381   .0485565      .0500045    .2406717
       Rural |   1.437188    .153234      1.136336    1.738041
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(news);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

            1: news = 1
            2: news = 2
            3: news = 3
            4: news = 4

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
           1 |   5.530541   1.048494      3.471977    7.589105
           2 |   9.376396   1.430796      6.567238    12.18555
           3 |   26.03481   2.223898      21.66851    30.40111
           4 |    7.89738   1.252481      5.438317    10.35644
-------------+------------------------------------------------
pg_ent_m     |
           1 |   .9511585   .2250672       .509272    1.393045
           2 |   1.675259   .2554546      1.173711    2.176807
           3 |   8.974137     .93992      7.128742    10.81953
           4 |   1.760715   .3947283      .9857235    2.535706
-------------+------------------------------------------------
spg_ent_m    |
           1 |   .2829695     .08671      .1127272    .4532118
           2 |   .4538325   .0701896      .3160254    .5916396
           3 |    4.43314   .5787435      3.296861    5.569418
           4 |   .7165955   .2426471      .2401934    1.192998
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(reg_tpi);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

      central: reg_tpi = central
      eastern: reg_tpi = eastern
     northern: reg_tpi = northern
      western: reg_tpi = western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
     central |   5.530541   1.048494      3.471977    7.589105
     eastern |   9.376396   1.430796      6.567238    12.18555
    northern |   26.03481   2.223898      21.66851    30.40111
     western |    7.89738   1.252481      5.438317    10.35644
-------------+------------------------------------------------
pg_ent_m     |
     central |   .9511585   .2250672       .509272    1.393045
     eastern |   1.675259   .2554546      1.173711    2.176807
    northern |   8.974137     .93992      7.128742    10.81953
     western |   1.760715   .3947283      .9857235    2.535706
-------------+------------------------------------------------
spg_ent_m    |
     central |   .2829695     .08671      .1127272    .4532118
     eastern |   .4538325   .0701896      .3160254    .5916396
    northern |    4.43314   .5787435      3.296861    5.569418
     western |   .7165955   .2426471      .2401934    1.192998
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(strata);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
     KAMPALA |   4.167031   2.378903     -.5035977     8.83766
   _subpop_2 |   4.662128   1.413863      1.886215     7.43804
   _subpop_3 |   6.997818   1.856886      3.352093    10.64354
   _subpop_4 |   6.661587   1.413255      3.886868    9.436306
     EASTERN |   11.59192   2.273862      7.127522    16.05631
   _subpop_6 |   16.05722    2.73805      10.68146    21.43298
   _subpop_7 |   73.44685   6.393332      60.89448    85.99922
   _subpop_8 |   18.10525   4.219794      9.820296     26.3902
   _subpop_9 |   11.58494   2.157515       7.34897     15.8209
  _subpop_10 |   3.988778   .9785319      2.067574    5.909982
-------------+------------------------------------------------
pg_ent_m     |
     KAMPALA |   .5309069   .2494326      .0411825    1.020631
   _subpop_2 |    .884754   .3874929      .1239683     1.64554
   _subpop_3 |   1.196951   .3670921       .476219    1.917682
   _subpop_4 |   1.294405   .2694489      .7653809    1.823428
     EASTERN |   1.986069   .3998098      1.201101    2.771037
   _subpop_6 |   4.867151   1.046913      2.811689    6.922612
   _subpop_7 |   33.30127   3.805203      25.83031    40.77222
   _subpop_8 |   3.404025   .6383636      2.150692    4.657359
   _subpop_9 |   2.752712   .6964655      1.385304     4.12012
  _subpop_10 |   .7092536   .2402486      .2375606    1.180947
-------------+------------------------------------------------
spg_ent_m    |
     KAMPALA |   .1130342   .0666336      -.017791    .2438595
   _subpop_2 |   .2812022   .1674376      -.047537    .6099414
   _subpop_3 |   .3566282   .1215564      .1179699    .5952864
   _subpop_4 |   .3947284   .0981834      .2019596    .5874972
     EASTERN |   .5020666   .0981752       .309314    .6948193
   _subpop_6 |    2.22826   .5861981      1.077346    3.379175
   _subpop_7 |   18.38929   2.504754      13.47157      23.307
   _subpop_8 |   1.013364   .2239124      .5737447    1.452983
   _subpop_9 |   1.177601   .4397072      .3143006    2.040902
  _subpop_10 |   .2279552   .1041919      .0233896    .4325208
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(spdomain);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =       6775
Number of PSUs   =     711       Population size  =  200636622
                                 Design df        =        701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
   _subpop_1 |   6.577285    1.37661      3.874511    9.280058
   _subpop_2 |   3.384492   1.450191       .537255    6.231729
     Eastern |   9.376396   1.430796      6.567238    12.18555
    Northern |   26.03481   2.223898      21.66851    30.40111
     Western |    7.89738   1.252481      5.438317    10.35644
-------------+------------------------------------------------
pg_ent_m     |
   _subpop_1 |   1.165568   .3186587      .5399281    1.791208
   _subpop_2 |   .5115732   .1840007      .1503147    .8728318
     Eastern |   1.675259   .2554546      1.173711    2.176807
    Northern |   8.974137     .93992      7.128742    10.81953
     Western |   1.760715   .3947283      .9857235    2.535706
-------------+------------------------------------------------
spg_ent_m    |
   _subpop_1 |   .3633261   .1253787      .1171633    .6094889
   _subpop_2 |   .1182213   .0490338      .0219506    .2144919
     Eastern |   .4538325   .0701896      .3160254    .5916396
    Northern |    4.43314   .5787435      3.296861    5.569418
     Western |   .7165955   .2426471      .2401934    1.192998
--------------------------------------------------------------

.         drop bswt one h pg spg;

.         compress;
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_ent_m was float now byte
hhsize was double now byte

. label data "Final data set. Official published poverty rates are calculated from th
> is data set";
note: label truncated to 80 characters

.         sort hhid;

.         save "$path\work\povmeas_ent_flex.dta", replace;
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povmeas_ent_flex.
> dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povmeas_ent_flex.dta sav
> ed

. gen dum=1;

.         *output the national measures;
.         collapse  (mean) dum h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsize];

. gen geo="National";

. gen geono=dum;

. tempfile nat;

. save `nat';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp saved

.         *output the rural/urban measures;
.         use "$path\work\povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from this data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsize], by(rural)
> ;

. gen geo="Rural/Urban";

. gen geono=rural;

. tempfile rur;

. save `rur';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp saved

.         *output the North South Center measures;
.         use "$path\work\povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from this data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsize], by(news);

. gen geo="North/Center/South";

. gen geono=news;

. tempfile new;

. save `new';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000007.tmp saved

.         *output the North South Center rural/urban measures;
.         use "$path\work\povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from this data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsize], by(reg_tp
> i);

. gen geo="TPI - 6 regions";

. gen geono=reg_tpi;

. tempfile rtp;

. save `rtp';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000008.tmp saved

.         *output the provincial measures;
.         use "$path\work\povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from this data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsize], by(strata
> );

. gen geo="Provinces";

. gen geono=strata;

. tempfile str;

. save `str';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000009.tmp saved

.                 *output the dominios espaciais measures;
.         use "$path\work\povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from this data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsize], by(spdoma
> in);

. gen geo="Spatial domains";

. gen geono=spdomain;

. tempfile r13;

. save `r13';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000a.tmp saved

. clear;

. set obs 1;
obs was 0, now 1

. gen geo=" ";

. tempfile one;

. save `one';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000b.tmp saved

. use          `nat';
(Final data set. Official published poverty rates are calculated from this data s)

. append using `one';

. append using `rur';
geo was str8 now str11

. append using `one';

. append using `new';
geo was str11 now str18

. append using `one';

. append using `rtp';

. append using `one';

. append using `str';

. append using `one';

. append using `r13';

. outsheet geo geono h_ent_m pg_ent_m spg_ent_m dum rural news reg_tpi strata spdomai
> n using "$path/work/poverty_ent_flexBask.csv", replace c ;
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/poverty_ent_flexB
> ask.csv not found)

.         *set aside the spatial price index;
.       tempfile spi_m;

.       use "$path\work\povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from this data s)

.       collapse (mean) spi, by(spdomain);

.       rename spi spi_m;

.       sort spdomain;

. save `spi_m', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved

. use `povlines_ent';

.        sort spdomain;

.        merge spdomain using `spi';
(label spdomain_original already defined)

.        tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |          5      100.00      100.00
------------+-----------------------------------
      Total |          5      100.00

.  drop _m;

.        sort spdomain;

.        merge spdomain using `spi_m';
(label spdomain_original already defined)

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |          5      100.00      100.00
------------+-----------------------------------
      Total |          5      100.00

.  drop _m;

. save "$path\work\povlines.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines.dta saved

. outsheet spdomain food_povline_ent povline_ent fdshr using "$path\work\povlines.csv
> ", replace c;
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines.csv not 
> found)

.  *********************************************************************************
> * 210_povmeas_ent_flex.do               (end)
> *********************************************************************************;
. log close;
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/210_povmeas_ent_f
> lex.log
  log type:  text
 closed on:  20 May 2013, 14:39:49
-------------------------------------------------------------------------------------
