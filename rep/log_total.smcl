{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}log_tot_s
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/log_total.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}29 Apr 2013, 13:16:46
{txt}
{com}. log using "$path/rep/000_boom.log"  , name(log_000_boom) replace
{txt}{.-}
      name:  {res}log_000_boom
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/000_boom.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:46
{txt}
{com}. 
. display "* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *"
{res}* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *
{txt}
{com}. display ""
{res}
{txt}
{com}. display "Generel information:"
{res}Generel information:
{txt}
{com}. display "   UGANDA HOUSEHOLD BUDGET SURVEY 2009/10"
{res}   UGANDA HOUSEHOLD BUDGET SURVEY 2009/10
{txt}
{com}. display "   Poverty rate estimation"
{res}   Poverty rate estimation
{txt}
{com}. display "   Methodology: Iterative procedure and revealed preferences tests"
{res}   Methodology: Iterative procedure and revealed preferences tests
{txt}
{com}. display ""
{res}
{txt}
{com}. display "* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *"
{res}* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *
{txt}
{com}. 
. 
. **************************************************************************
. * 000_boom.do   (start)
. *
. * Reminders:
. *       1) Check very top of this file to make sure you are on the right path! 
. *       2) GAMS 22.5 must be placed onto the path. See 190_revpref13_m1.bat.
. *          Typically this needs to be edited.
. *   3) In case of implementing a new survey the user must make necessary
. *      changes in 010_initial.do, 020_hhdata.do and 030_rawdata.do.
. *
. * Process:
. * - The do-file prefix indicates first time a do-file is called
. *
. * KS, 2003
. * CA, 2003-2008
. * MAH, Apr. 2010
. **************************************************************************
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. set mem 700m
{txt}
{com}. 
. noisily display "Start time: " "$S_TIME"
{res}Start time: 13:16:46
{txt}
{com}. 
. 
. 
. **************************************************************************
. * Macros. Region definitions. Demographic definitions.
. **************************************************************************
. do "$path/new/010_initial.do"
{txt}
{com}. cap log close
{txt}
{com}. log using "$path/rep/010_initial.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/010_initial.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/010_initial.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:46
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. ******************************************************************************
> * 010_initial.do                (start)
> ******************************************************************************;
. ******************************************************************************
> * Purpose: Set some globals
> ******************************************************************************;
. ******************************************************************************
> * TPI basket
> ******************************************************************************;
. * Number of items;
. global product_tpi_n "15";
{txt}
{com}. * Code choose $product_tpi_n ;
. global product_tpi   "product_tpi==1";
{txt}
{com}. * Initial (arbitrary) quantile defining poor for price index calculations.
> * Mozambique: bottom 60%. Vietnam: bottom 20%. Tanzania: bottom 40% . Uganda: headcount 2009 24.5% ;
. global tpi_bottom "50";
{txt}
{com}.  * Set the number of regions in the TPI calc;
. global n_tpi "2";
{txt}
{com}. * To reproduce the mozambique 10 numbers, the following global should be commented out. It controls a line in 140_iterate.do 
> * where observations not measured in kg are dropped. For all other datasets, all observations should be converted to kg's before
> * the toolkit is run. For all other datasets, this line should therefore be included.
> global MZ "*";
. ******************************************************************************
> * Initial (arbitrary) quantile defining the (relatively) poor.
> ******************************************************************************;
. global bottom "50";
{txt}
{com}. ******************************************************************************
> * Number of iterations in 140_iterate.do
> ******************************************************************************;
. global it_n "5";
{txt}
{com}. ******************************************************************************
> * Set the number of regions in the spatial domain;
. ******************************************************************************;
. global n_spdom "5";
{txt}
{com}. ******************* we deleted East urban, North urban and West urban because too few observations were in those spatial domains;
.  ******************************************************************************
> * Revealed preferences choices
> ******************************************************************************;
. * Activate GAMS program according to number of regions in spatial domain;
. *global revpref "190_revpref13_m1.bat";
. *global no_temp_rev " ";
. * k spatial regions and no intertemporal revealed preference condition:
>   Activate the next two lines below;
. global no_temp_rev "*";
{txt}
{com}. global revpref "190_revpref13_r.bat";
{txt}
{com}.  **************************************************************************
> * 010_initial.do                (end)
> **************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/010_initial.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}29 Apr 2013, 13:16:46
{txt}{.-}

{com}. 
{txt}end of do-file

{com}. 
. *do "C:\user\gapp\z_data_preb/new/100_collect_expen_moz.do"
. *s;
. 
. *do "C:\user\gapp\z_data_preb/new/000_boom.do"
. 
. *global path "C:\user\gapp"
. 
. /*
> 
> **************************************************************************;
> **************************************************************************;
> * This is the block of do files to set up the data to get nominal
> * consumption. These DO NOT need to be bootstrapped.
> **************************************************************************;
> **************************************************************************;
>         
>         * This code produces some once for all data for the in-folder. Don't
>         * run it unless you know what you are doing!!!
>                 * Produces education expenditure
>                 *do "$path\new\Create/education_Create.do"
>                 * Imputation of missing recepts-in-kind. Run the code without this first...
>                 *do "$path\new\Create/0_code_chain.do"
>                 * First poverty lines dependent on IAF
>                 *do "$path\new\Create/povlines_first_iof_Create.do"
>                 * Match product codes for different surveys
>                 *do "$path\new\Create/match96_02_Create.do"
>                 * Basket from previous survey
>                 *do "$path\new\Create/smallbasket_iof_Create.do"
>                 * Match product codes between surveys
>                 *do "$path\new\Create/rev_pref_matchcodes_02-96_iof_Create.do"
>                 * Update poverty lines
>                 *do "$path\new\Create/povlines-96-v1-vers7_iof_Create.do"               
>                 * Food share
>                 *do "$path\new\Create/foodshr96_iof_Create.do"
>                 
>                 *do "$path\new\Create/.do"
>                 *do "$path\new\Create/.do"
> 
> */
.         * This set of files takes the raw data and creates more handy data 
.         * sets in the work-folder
.         do "$path/new/020_in_2_work_folder.do"
{txt}
{com}. clear all
{txt}
{com}. global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA"
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/020_hhdata.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/020_hhdata.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/020_hhdata.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:46
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 020_hhdata.do         (start)
> *
> * Organize the hhid identifier in the HHData file the same way, and keep
> * only the relevant variables.
> *
> * This file sets:
> * - interview month, quarter and year
> * - regions: make all needed regions. But in the end only the one specified
> *            in initial.do are kept. These are
> *            - rural: 0=urban, 1=rural
> *            - news: speficifying North, East, West, South. But combinations
> *                    are also possible, eg. North-East, Center,...
> *            - reg_tpi: regions with own TPI
> *            - strata: strata regions
> *            - spdomain: spatial domains (regions with own poverty line)
> *            - news_ru_ur: combination of news and rural
> **************************************************************************;
. use "$path\in\hhdata.dta", clear;
{txt}
{com}. *mah;
. *temporary solution. news instead of spdomain;
. **replace spdomain=news;
. *recode spdomain 10=1 11=2 20=3 30=4 40=5;
. tab spdomain, missing;

     {txt}spdomain {c |}      Freq.     Percent        Cum.
{hline 14}{c +}{hline 35}
Central rural {c |}{res}      1,177       17.37       17.37
{txt}Central urban {c |}{res}        809       11.94       29.31
{txt}      Eastern {c |}{res}      1,406       20.75       50.07
{txt}     Northern {c |}{res}      1,956       28.87       78.94
{txt}      Western {c |}{res}      1,427       21.06      100.00
{txt}{hline 14}{c +}{hline 35}
        Total {c |}{res}      6,775      100.00
{txt}
{com}.         sort hhid;
{txt}
{com}.         save "$path\work\hhdata.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\hhdata.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\hhdata.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 6}strata {c |}{res}      6775    5.551734    2.873672          1         10
{txt}{space 8}mult {c |}{res}      6775    919.0598    636.8381   26.67222   10279.15
{txt}{space 6}region {c |}{res}      6775    2.416827    1.118389          1          4
{txt}{space 7}urban {c |}{res}      6775    .1800738    .3842773          0          1
{txt}{hline 13}{c +}{hline 56}
{space 4}district {c |}{res}      6775    250.5169    112.9571        101        419
{txt}{space 7}rmult {c |}{res}      6775    919.0713    636.8355         27      10279
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{space 5}welfare {c |}{res}      6775    73089.98    95260.67   2034.431    1932420
{txt}{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{hline 13}{c +}{hline 56}
{space 6}poor09 {c |}{res}      6775      .23631    .4248461          0          1
{txt}{space 9}day {c |}{res}      6775    14.08576    7.581748          1         31
{txt}{space 7}month {c |}{res}      6775    6.686199    3.405931          1         12
{txt}{space 8}Year {c |}{res}      6775    2009.336    .4722506       2009       2010
{txt}{space 7}h1bq8 {c |}{res}      6775    1.005018    .0706683          1          2
{txt}{hline 13}{c +}{hline 56}
{space 9}psu {c |}{res}      6775     365.894     201.698          1        712
{txt}{space 4}survquar {c |}{res}      6775    2.499336    1.144024          1          4
{txt}{space 5}survmon {c |}{res}      6775    6.713948     3.34507          1         12
{txt}{space 7}rural {c |}{res}      6775    .8199262    .3842773          0          1
{txt}{space 8}news {c |}{res}      6775    2.416827    1.118389          1          4
{txt}{hline 13}{c +}{hline 56}
{space 5}reg_tpi {c |}{res}      6775    1.180074    .3842773          1          2
{txt}{space 8}bswt {c |}{res}      6775           1           0          1          1
{txt}{space 4}spdomain {c |}{res}      6775      3.2431    1.373578          1          5
{txt}
{com}. use "$path\in\indata.dta", clear;
{txt}
{com}.         *sort hhid;
.         save "$path\work\indata.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\indata.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\indata.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 7}indid {c |}{res}     35945    2.57e+11    1.10e+11   1.01e+11   4.19e+11
{txt}{space 4}motherhh {c |}{res}     20045    .7825892    .4124947          0          1
{txt}{space 8}hhid {c |}{res}     35945    2.57e+09    1.10e+09   1.01e+09   4.19e+09
{txt}{space 9}sex {c |}{res}     35945     1.50861    .4999328          1          2
{txt}{space 9}age {c |}{res}     34840    19.51099    17.41519          0         98
{txt}
{com}. use "$path\in\calperg.dta", clear;
{txt}
{com}.         *sort hhid;
.         save "$path\work\calperg.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\calperg.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\calperg.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}        62       130.5    18.04162        100        161
{txt}{space 4}descript {c |}{res}         0
{txt}{space 5}calperg {c |}{res}        62    1.980716    2.136812          0       8.84
{txt}
{com}. use "$path\in\cons_cod.dta", clear;
{txt}
{com}.         *sort hhid;
.         save "$path\work\cons_cod.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\cons_cod.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\cons_cod.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     96371    2.45e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     96371    191.4734    220.3821        100        991
{txt}{space 4}descript {c |}{res}     96371    192.0358    222.4225        100        999
{txt}{space 4}food_cat {c |}{res}     96371    1.070301    .2556553          1          2
{txt}{space 4}prod_cat {c |}{res}     96371    1.773314    2.812209          1         12
{txt}{hline 13}{c +}{hline 56}
{space 3}quantityd {c |}{res}     89596    2.351441    22.49751          0   1643.714
{txt}{space 1}cod_hh_nom3 {c |}{res}     89596     383.356    648.4919          0      18500
{txt}{space 2}cod_hh_nom {c |}{res}     96371    6853.476     1309467          0   4.06e+08
{txt}{space 1}cod_hh_nom2 {c |}{res}     83746    389.5283    602.1037   7.142857      14000
{txt}
{com}. use "$path\in\cons_cod_trans.dta", clear;
{txt}
{com}.         *sort hhid;
.         save "$path\work\cons_cod_trans.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\cons_cod_trans.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\cons_cod_trans.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     89596    2.45e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 4}descript {c |}{res}     89596    131.0155     15.7293        100        161
{txt}{space 7}untcd {c |}{res}     88138    44.41037    30.53397          1         85
{txt}{space 8}unit {c |}{res}     89596           1           0          1          1
{txt}{space 4}food_cat {c |}{res}     89596           1           0          1          1
{txt}{hline 13}{c +}{hline 56}
{space 3}quantityz {c |}{res}     89596    2.351441    22.49751          0   1643.714
{txt}{space 6}valuez {c |}{res}     89596     383.356    648.4919          0      18500
{txt}{space 5}product {c |}{res}     89596    131.0155     15.7293        100        161
{txt}
{com}. /*
> use "$path\in\cons_cod_trans.dta", clear;
>         *sort hhid;
>         sum;
> for var value quantityd cod_hh_nom cod_hh_nom2 cod_hh_nom3: replace X=0 if X==.;
> collapse food_cat prod_cat (sum) value quantityd cod_hh_nom cod_hh_nom2 cod_hh_nom3, by(hhid product descript);
>         save "$path\work\cons_cod.dta", replace;
>         sum;
> */
>  
> **************************************************************************
> * 020_hhdata.do         (end)
> **************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.         
. /*
>         * All kind of raw expenditure is handled: daily, own and monthly, rent and use value, education etc.
>         do "$path/new/030_rawdata.do"
> 
>         * Data set specific changes to each processed raw data set takes place here
>         do "$path/new/040_specifities.do"
> 
>         * These files summarizes and checks the data. But no temporal deflation done here yet
>         do "$path/new/050_consump_nom.do"
> 
>         * Bring in data on food product's calories per gram
>         do "$path/new/060_calperg.do"
> */
. **********************************************************************;
. **********************************************************************;
. 
.                                 do "$path/new/070_calpp.do"                             /* Calories per person in spatial domains*/
{txt}
{com}. *global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path\rep\070_calpp.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\070_calpp.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\070_calpp.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:46
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. *global fert_rate "fert_rate";
. ***********************************************************************
> * 070_calpp.do          (start)
> *
> * Purpose: Determine calories required for each person per domain per day.
> ***********************************************************************;
. /*
> This file uses:
>         work\indata.dta
>         work\hhdata.dta
> 
> This file creates:
>         work\calpp.dta
> */
> 
> *-------------------------------------------------------------------------*
> * Include fertility rates from csv-file
> *-------------------------------------------------------------------------*;
. clear;
{txt}
{com}. insheet sex rural age fert_rate using "$path/in/fert_rate_mozambique.csv";
{txt}(4 vars, 96 obs)

{com}. ***************************************** check for Ugandan fertility rates *************************************
> *************************************************************************************************************;
. sort sex rural age;
{txt}
{com}. tempfile fert_rate;
{txt}
{com}. save `fert_rate';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved

{com}. list;
{txt}
     {c TLC}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c TRC}
     {c |} {res}sex   rural   age   fert_r~e {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
  1. {c |} {res}  2       0    12       .003 {txt}{c |}
  2. {c |} {res}  2       0    13       .003 {txt}{c |}
  3. {c |} {res}  2       0    14       .093 {txt}{c |}
  4. {c |} {res}  2       0    15       .093 {txt}{c |}
  5. {c |} {res}  2       0    16       .093 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
  6. {c |} {res}  2       0    17       .093 {txt}{c |}
  7. {c |} {res}  2       0    18       .207 {txt}{c |}
  8. {c |} {res}  2       0    19       .207 {txt}{c |}
  9. {c |} {res}  2       0    20       .207 {txt}{c |}
 10. {c |} {res}  2       0    21       .207 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 11. {c |} {res}  2       0    22       .207 {txt}{c |}
 12. {c |} {res}  2       0    23       .207 {txt}{c |}
 13. {c |} {res}  2       0    24       .207 {txt}{c |}
 14. {c |} {res}  2       0    25       .207 {txt}{c |}
 15. {c |} {res}  2       0    26       .207 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 16. {c |} {res}  2       0    27       .207 {txt}{c |}
 17. {c |} {res}  2       0    28       .207 {txt}{c |}
 18. {c |} {res}  2       0    29       .207 {txt}{c |}
 19. {c |} {res}  2       0    30       .144 {txt}{c |}
 20. {c |} {res}  2       0    31       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 21. {c |} {res}  2       0    32       .144 {txt}{c |}
 22. {c |} {res}  2       0    33       .144 {txt}{c |}
 23. {c |} {res}  2       0    34       .144 {txt}{c |}
 24. {c |} {res}  2       0    35       .144 {txt}{c |}
 25. {c |} {res}  2       0    36       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 26. {c |} {res}  2       0    37       .144 {txt}{c |}
 27. {c |} {res}  2       0    38       .144 {txt}{c |}
 28. {c |} {res}  2       0    39       .144 {txt}{c |}
 29. {c |} {res}  2       0    40       .144 {txt}{c |}
 30. {c |} {res}  2       0    41       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 31. {c |} {res}  2       0    42       .144 {txt}{c |}
 32. {c |} {res}  2       0    43       .144 {txt}{c |}
 33. {c |} {res}  2       0    44       .144 {txt}{c |}
 34. {c |} {res}  2       0    45       .144 {txt}{c |}
 35. {c |} {res}  2       0    46       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 36. {c |} {res}  2       0    47       .144 {txt}{c |}
 37. {c |} {res}  2       0    48       .144 {txt}{c |}
 38. {c |} {res}  2       0    49       .144 {txt}{c |}
 39. {c |} {res}  2       0    50       .144 {txt}{c |}
 40. {c |} {res}  2       0    51       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 41. {c |} {res}  2       0    52       .144 {txt}{c |}
 42. {c |} {res}  2       0    53       .144 {txt}{c |}
 43. {c |} {res}  2       0    54       .144 {txt}{c |}
 44. {c |} {res}  2       0    55       .144 {txt}{c |}
 45. {c |} {res}  2       0    56       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 46. {c |} {res}  2       0    57       .144 {txt}{c |}
 47. {c |} {res}  2       0    58       .144 {txt}{c |}
 48. {c |} {res}  2       0    59       .144 {txt}{c |}
 49. {c |} {res}  2       1    12       .009 {txt}{c |}
 50. {c |} {res}  2       1    13       .009 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 51. {c |} {res}  2       1    14        .11 {txt}{c |}
 52. {c |} {res}  2       1    15        .11 {txt}{c |}
 53. {c |} {res}  2       1    16        .11 {txt}{c |}
 54. {c |} {res}  2       1    17        .11 {txt}{c |}
 55. {c |} {res}  2       1    18        .28 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 56. {c |} {res}  2       1    19        .28 {txt}{c |}
 57. {c |} {res}  2       1    20        .28 {txt}{c |}
 58. {c |} {res}  2       1    21        .28 {txt}{c |}
 59. {c |} {res}  2       1    22        .28 {txt}{c |}
 60. {c |} {res}  2       1    23        .28 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 61. {c |} {res}  2       1    24        .28 {txt}{c |}
 62. {c |} {res}  2       1    25        .28 {txt}{c |}
 63. {c |} {res}  2       1    26        .28 {txt}{c |}
 64. {c |} {res}  2       1    27        .28 {txt}{c |}
 65. {c |} {res}  2       1    28        .28 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 66. {c |} {res}  2       1    29        .28 {txt}{c |}
 67. {c |} {res}  2       1    30       .212 {txt}{c |}
 68. {c |} {res}  2       1    31       .212 {txt}{c |}
 69. {c |} {res}  2       1    32       .212 {txt}{c |}
 70. {c |} {res}  2       1    33       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 71. {c |} {res}  2       1    34       .212 {txt}{c |}
 72. {c |} {res}  2       1    35       .212 {txt}{c |}
 73. {c |} {res}  2       1    36       .212 {txt}{c |}
 74. {c |} {res}  2       1    37       .212 {txt}{c |}
 75. {c |} {res}  2       1    38       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 76. {c |} {res}  2       1    39       .212 {txt}{c |}
 77. {c |} {res}  2       1    40       .212 {txt}{c |}
 78. {c |} {res}  2       1    41       .212 {txt}{c |}
 79. {c |} {res}  2       1    42       .212 {txt}{c |}
 80. {c |} {res}  2       1    43       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 81. {c |} {res}  2       1    44       .212 {txt}{c |}
 82. {c |} {res}  2       1    45       .212 {txt}{c |}
 83. {c |} {res}  2       1    46       .212 {txt}{c |}
 84. {c |} {res}  2       1    47       .212 {txt}{c |}
 85. {c |} {res}  2       1    48       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 86. {c |} {res}  2       1    49       .212 {txt}{c |}
 87. {c |} {res}  2       1    50       .212 {txt}{c |}
 88. {c |} {res}  2       1    51       .212 {txt}{c |}
 89. {c |} {res}  2       1    52       .212 {txt}{c |}
 90. {c |} {res}  2       1    53       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 91. {c |} {res}  2       1    54       .212 {txt}{c |}
 92. {c |} {res}  2       1    55       .212 {txt}{c |}
 93. {c |} {res}  2       1    56       .212 {txt}{c |}
 94. {c |} {res}  2       1    57       .212 {txt}{c |}
 95. {c |} {res}  2       1    58       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 96. {c |} {res}  2       1    59       .212 {txt}{c |}
     {c BLC}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c BRC}

{com}. *-------------------------------------------------------------------------*
> * Now do the calorie needs for individuals
> *-------------------------------------------------------------------------*;
. use "$path\work\indata.dta";
{txt}
{com}. * CA bootstrap modification;
. sort hhid;
{txt}
{com}. merge hhid using "$path\work\hhdata.dta";
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}. tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     35,945      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     35,945      100.00
{txt}
{com}.  drop _m;
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 7}indid {c |}{res}     35945    2.57e+11    1.10e+11   1.01e+11   4.19e+11
{txt}{space 4}motherhh {c |}{res}     20045    .7825892    .4124947          0          1
{txt}{space 8}hhid {c |}{res}     35945    2.57e+09    1.10e+09   1.01e+09   4.19e+09
{txt}{space 9}sex {c |}{res}     35945     1.50861    .4999328          1          2
{txt}{space 9}age {c |}{res}     34840    19.51099    17.41519          0         98
{txt}{hline 13}{c +}{hline 56}
{space 6}strata {c |}{res}     35945    5.710586    2.766681          1         10
{txt}{space 8}mult {c |}{res}     35945    917.2863    619.3906   26.67222   10279.15
{txt}{space 6}region {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 7}urban {c |}{res}     35945    .1471693    .3542795          0          1
{txt}{space 4}district {c |}{res}     35945    257.0191    109.5067        101        419
{txt}{hline 13}{c +}{hline 56}
{space 7}rmult {c |}{res}     35945    917.2973    619.3847         27      10279
{txt}{space 6}hhsize {c |}{res}     35945    6.416497    2.935303          1         24
{txt}{space 5}welfare {c |}{res}     35945    62735.83     78270.9   2034.431    1932420
{txt}{space 4}hhweight {c |}{res}     35945     5917.96    5136.521         54      92511
{txt}{space 6}poor09 {c |}{res}     35945    .2781472    .4480925          0          1
{txt}{hline 13}{c +}{hline 56}
{space 9}day {c |}{res}     35945     14.0508    7.502636          1         31
{txt}{space 7}month {c |}{res}     35945     6.71398    3.387719          1         12
{txt}{space 8}Year {c |}{res}     35945    2009.329    .4700192       2009       2010
{txt}{space 7}h1bq8 {c |}{res}     35945     1.00498     .070393          1          2
{txt}{space 9}psu {c |}{res}     35945    377.7054    193.8014          1        712
{txt}{hline 13}{c +}{hline 56}
{space 4}survquar {c |}{res}     35945    2.484852    1.142574          1          4
{txt}{space 5}survmon {c |}{res}     35945    6.667353    3.350374          1         12
{txt}{space 7}rural {c |}{res}     35945    .8528307    .3542795          0          1
{txt}{space 8}news {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 5}reg_tpi {c |}{res}     35945    1.147169    .3542795          1          2
{txt}{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}     35945           1           0          1          1
{txt}{space 4}spdomain {c |}{res}     35945    3.321575    1.334996          1          5
{txt}
{com}. * Include fertility rates;
. sort sex rural age;
{txt}
{com}. merge sex rural age using `fert_rate';
{txt}{p 0 4 2}
variable{txt}s{txt} sex
rural
age
do not uniquely identify observations in
the master data
{p_end}

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 7}indid {c |}{res}     35945    2.57e+11    1.10e+11   1.01e+11   4.19e+11
{txt}{space 4}motherhh {c |}{res}     20045    .7825892    .4124947          0          1
{txt}{space 8}hhid {c |}{res}     35945    2.57e+09    1.10e+09   1.01e+09   4.19e+09
{txt}{space 9}sex {c |}{res}     35945     1.50861    .4999328          1          2
{txt}{space 9}age {c |}{res}     34840    19.51099    17.41519          0         98
{txt}{hline 13}{c +}{hline 56}
{space 6}strata {c |}{res}     35945    5.710586    2.766681          1         10
{txt}{space 8}mult {c |}{res}     35945    917.2863    619.3906   26.67222   10279.15
{txt}{space 6}region {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 7}urban {c |}{res}     35945    .1471693    .3542795          0          1
{txt}{space 4}district {c |}{res}     35945    257.0191    109.5067        101        419
{txt}{hline 13}{c +}{hline 56}
{space 7}rmult {c |}{res}     35945    917.2973    619.3847         27      10279
{txt}{space 6}hhsize {c |}{res}     35945    6.416497    2.935303          1         24
{txt}{space 5}welfare {c |}{res}     35945    62735.83     78270.9   2034.431    1932420
{txt}{space 4}hhweight {c |}{res}     35945     5917.96    5136.521         54      92511
{txt}{space 6}poor09 {c |}{res}     35945    .2781472    .4480925          0          1
{txt}{hline 13}{c +}{hline 56}
{space 9}day {c |}{res}     35945     14.0508    7.502636          1         31
{txt}{space 7}month {c |}{res}     35945     6.71398    3.387719          1         12
{txt}{space 8}Year {c |}{res}     35945    2009.329    .4700192       2009       2010
{txt}{space 7}h1bq8 {c |}{res}     35945     1.00498     .070393          1          2
{txt}{space 9}psu {c |}{res}     35945    377.7054    193.8014          1        712
{txt}{hline 13}{c +}{hline 56}
{space 4}survquar {c |}{res}     35945    2.484852    1.142574          1          4
{txt}{space 5}survmon {c |}{res}     35945    6.667353    3.350374          1         12
{txt}{space 7}rural {c |}{res}     35945    .8528307    .3542795          0          1
{txt}{space 8}news {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 5}reg_tpi {c |}{res}     35945    1.147169    .3542795          1          2
{txt}{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}     35945           1           0          1          1
{txt}{space 4}spdomain {c |}{res}     35945    3.321575    1.334996          1          5
{txt}{space 3}fert_rate {c |}{res}      9790    .1876158    .0860403       .003        .28
{txt}{space 6}_merge {c |}{res}     35945    1.544721    .8903613          1          3
{txt}
{com}. * Do calorie calculations ;
.     gen num=1;
{txt}
{com}.     gen cal = .;
{txt}(35945 missing values generated)

{com}. * Same assumptions about sex/age specific calories need in IAF 1997, IAF 2003 and IOF 2009;
. * Children (no difference between boys and girls)   ;
.      replace cal =  820 if age < 1;
{txt}(1196 real changes made)

{com}. * Add 500 cal per day for mothers in first six months of breast feeding
> * We assume that 60% of children under 1 are under six months old
> * And that all of them breast feed
> * We add these mother requirements of 300 on average to each child under 1 whose mother is alive;
.     replace cal = 1120 if age <  1 & motherhh==1;
{txt}(1168 real changes made)

{com}.     replace cal = 1150 if age >= 1 & age <2;
{txt}(1213 real changes made)

{com}.     replace cal = 1350 if age >= 2 & age <3;
{txt}(1288 real changes made)

{com}.     replace cal = 1550 if age >= 3 & age <5;
{txt}(2746 real changes made)

{com}. * Males ;
.     replace cal = 1850 if age >=  5 & age <7  & sex==1;
{txt}(1272 real changes made)

{com}.     replace cal = 2100 if age >=  7 & age <10 & sex==1;
{txt}(1776 real changes made)

{com}.     replace cal = 2200 if age >= 10 & age <12 & sex==1;
{txt}(1048 real changes made)

{com}.     replace cal = 2400 if age >= 12 & age <14 & sex==1;
{txt}(1122 real changes made)

{com}.     replace cal = 2650 if age >= 14 & age <16 & sex==1;
{txt}(932 real changes made)

{com}.     replace cal = 2850 if age >= 16 & age <18 & sex==1;
{txt}(792 real changes made)

{com}.     replace cal = 3000 if age >= 18 & age <30 & sex==1;
{txt}(3012 real changes made)

{com}.     replace cal = 2900 if age >= 30 & age <60 & sex==1;
{txt}(3276 real changes made)

{com}.     replace cal = 2450 if age>=60 & age~=. & sex==1;
{txt}(669 real changes made)

{com}. * Girls 5-12 years (probability of pregnancy assumed = 0) ;
.     replace cal = 1750 if age >=  5 & age < 7 & sex==2;
{txt}(1202 real changes made)

{com}.     replace cal = 1800 if age >=  7 & age <10 & sex==2;
{txt}(1698 real changes made)

{com}.     replace cal = 1950 if age >= 10 & age <12 & sex==2;
{txt}(1025 real changes made)

{com}. * Women with a correction for pregnancy. We add 285 calories per for the final trimester.
> * To do this we find the probability that rural and urban women are pregnant from
> * live births data in the 1997 census over the past 12 months (no correction for still births).
> * 3/4*probability of birth gives probability of preganancy. Probability of final trimester is one
> * third of that of that or 1/4 of the probability of birth
> 
> * Women urban;
.     replace cal = 2100 + (fert_rate*285)/4 if age >= 12 & age <14 & sex==2 & rural==0;
{txt}(135 real changes made)

{com}.     replace cal = 2150 + (fert_rate*285)/4 if age >= 14 & age <18 & sex==2 & rural==0;
{txt}(267 real changes made)

{com}.     replace cal = 2100 + (fert_rate*285)/4 if age >= 18 & age <30 & sex==2 & rural==0;
{txt}(874 real changes made)

{com}.     replace cal = 2150 + (fert_rate*285)/4 if age >= 30 & age <60 & sex==2 & rural==0;
{txt}(491 real changes made)

{com}. * Women rural;
.     replace cal = 2100 + (fert_rate*285)/4 if age >= 12 & age <14 & sex==2 & rural==1;
{txt}(941 real changes made)

{com}.     replace cal = 2150 + (fert_rate*285)/4 if age >= 14 & age <18 & sex==2 & rural==1;
{txt}(1392 real changes made)

{com}.     replace cal = 2100 + (fert_rate*285)/4 if age >= 18 & age <30 & sex==2 & rural==1;
{txt}(2824 real changes made)

{com}.     replace cal = 2150 + (fert_rate*285)/4 if age >= 30 & age <60 & sex==2 & rural==1;
{txt}(2866 real changes made)

{com}. * Women 60+ are not pregnant ;
.     replace cal = 1950 if age>=60 & age~=. & sex==2;
{txt}(783 real changes made)

{com}.     count if cal ==.;
{res} 1105
{txt}
{com}.     *Fill in these two observations for IAF 2002/03:;
.     * 1) this one is a child;
.     *replace cal = 1500 if cal ==. & age==.;
.     * 2) this one is 21 years old;
.     *replace cal = 2500 if cal ==. & b2==.;
.     collapse (sum) cal num (max) psu hhsize hhweight strata rural spdomain, by (hhid);
{txt}
{com}.     gen chk=hhsize - num;
{txt}
{com}.     sum chk;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 9}chk {c |}{res}      6775   -.3455351    .8928498        -11          0
{txt}
{com}.     drop chk;
{txt}
{com}.     gen calpp = cal / hhsize;
{txt}
{com}.     sort spdomain;
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 9}cal {c |}{res}      6775    10971.36    6146.367       1950   50725.15
{txt}{space 9}num {c |}{res}      6775    5.305535    2.940196          1         24
{txt}{space 9}psu {c |}{res}      6775     365.894     201.698          1        712
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{space 6}strata {c |}{res}      6775    5.551734    2.873672          1         10
{txt}{space 7}rural {c |}{res}      6775    .8199262    .3842773          0          1
{txt}{space 4}spdomain {c |}{res}      6775      3.2431    1.373578          1          5
{txt}{space 7}calpp {c |}{res}      6775    2288.939     620.148   1463.317   24170.68
{txt}
{com}. * MAH ;
.  sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 9}cal {c |}{res}      6775    10971.36    6146.367       1950   50725.15
{txt}{space 9}num {c |}{res}      6775    5.305535    2.940196          1         24
{txt}{space 9}psu {c |}{res}      6775     365.894     201.698          1        712
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{space 6}strata {c |}{res}      6775    5.551734    2.873672          1         10
{txt}{space 7}rural {c |}{res}      6775    .8199262    .3842773          0          1
{txt}{space 4}spdomain {c |}{res}      6775      3.2431    1.373578          1          5
{txt}{space 7}calpp {c |}{res}      6775    2288.939     620.148   1463.317   24170.68
{txt}
{com}.  codebook hhid;

{txt}{hline}
{res}hhid{right:Household ID}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}6775

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. collapse (mean) calpp[aw=hhsize*hhweight], by (spdomain);
{txt}
{com}. sort spdomain;
{txt}
{com}. save "$path\work\calpp.dta",replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\calpp.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\calpp.dta saved

{com}. ***********************************************************************
> * 070_calpp.do          (end)
> ***********************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\070_calpp.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}29 Apr 2013, 13:16:47
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/080_conpc.do"                             /* Nominal food/non-food expenditure */
{txt}
{com}. *global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA"
. clear all
{txt}
{com}. set mem 100m
{txt}
{com}. 
. clear
{txt}
{com}. cap log close
{txt}
{com}. log using "$path/rep/080_conpc.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/080_conpc.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/080_conpc.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:47
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. ***************************************************************************
> * 080_conpc.do          (start)
> *
> * Creates a file with per capita nominal consumption divided between food
> * and non-food categories based on the calorie definition of food
> * rather than the COICOP (INE) definition of food. ready for 
> * temporal deflation when necessary
> ****************************************************************************;
. /*
> This file uses:
>         work\hhdata.dta
>         work\consump_nom.dta
>       
> This file creates:
>         work\conpc.dta
> */
> 
> 
> 
> ***************************************************************************
> * Food expenditure
> ****************************************************************************;
. *use "$path\in\cons_cod.dta";
. use "$path\work\cons_cod.dta";
{txt}
{com}.             *sort product;
.             *merge product using "$path\work\food_cat.dta";
.             *tab _m;
.             *drop _m;
.             keep if food_cat==1;
{txt}(6775 observations deleted)

{com}.             collapse (sum) cod_hh_nom, by(hhid);
{txt}
{com}.             rename cod_hh_nom food_hh_nom;
{txt}
{com}.                 sort hhid;
{txt}
{com}.             keep hhid food_hh_nom;
{txt}
{com}.             tempfile foodexp;
{txt}
{com}. save `foodexp';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved

{com}. ***************************************************************************
> * Food expenditure merged with all expenditure
> ****************************************************************************;
. use "$path\work\cons_cod.dta";
{txt}
{com}. *use "$path\in\cons_cod.dta";
. *use "$path\in\cons_cat.dta";
. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     96371    2.45e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     96371    191.4734    220.3821        100        991
{txt}{space 4}descript {c |}{res}     96371    192.0358    222.4225        100        999
{txt}{space 4}food_cat {c |}{res}     96371    1.070301    .2556553          1          2
{txt}{space 4}prod_cat {c |}{res}     96371    1.773314    2.812209          1         12
{txt}{hline 13}{c +}{hline 56}
{space 3}quantityd {c |}{res}     89596    2.351441    22.49751          0   1643.714
{txt}{space 1}cod_hh_nom3 {c |}{res}     89596     383.356    648.4919          0      18500
{txt}{space 2}cod_hh_nom {c |}{res}     96371    6853.476     1309467          0   4.06e+08
{txt}{space 1}cod_hh_nom2 {c |}{res}     83746    389.5283    602.1037   7.142857      14000
{txt}
{com}. collapse (sum) cod_hh_nom, by(hhid);
{txt}
{com}. *gen cons_pc_nom = cons_hh_nom/hhsize;
. rename cod_hh_nom cons_hh_nom;
{txt}
{com}. *keep  hhid cons_pc_nom cons_hh_nom ;
. *keep hhid cod_hh_nom;
. *use "$path\in\cons_cod.dta";
. *use "$path\in\consump_nom.dta";
. *use "$path\work\consump_nom.dta";
. *            keep  hhid cons_hh_nom ;
.             display _N;
{res}6775
{txt}
{com}.             keep  hhid cons_hh_nom ;
{txt}
{com}.             sort hhid;
{txt}
{com}.             merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.             tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.             drop _m;
{txt}
{com}. gen cons_pc_nom = cons_hh_nom/hhsize;
{txt}
{com}.             sort hhid;
{txt}
{com}.             merge hhid using `foodexp';
{txt}
{com}.             tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                 drop if _merge==2;
{txt}(0 observations deleted)

{com}.             replace food_hh_nom=0 if _merge==1 & food_hh_nom==.;
{txt}(0 real changes made)

{com}.             drop _m;
{txt}
{com}.                 gen food_pc_nom=food_hh_nom/hhsize;
{txt}
{com}.                 gen nf_hh_nom=cons_hh_nom-food_hh_nom;
{txt}
{com}.             gen nf_pc_nom=nf_hh_nom/hhsize;
{txt}
{com}.              keep hhid cons_hh_nom food_pc_nom nf_pc_nom cons_pc_nom survquar spdomain news reg_tpi rural hhweight hhsize;
{txt}
{com}.             lab var food_pc_nom "nominal food consumption per capita";
{txt}
{com}.             lab var nf_pc_nom "nominal non-food consumption per capita";
{txt}
{com}. keep hhid cons_hh_nom cons_pc_nom food_pc_nom nf_pc_nom;
{txt}
{com}.             sort hhid;
{txt}
{com}. * MAH ;
.  sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 1}cons_hh_nom {c |}{res}      6775    97487.28     4938495   232.1918   4.06e+08
{txt}{space 1}cons_pc_nom {c |}{res}      6775    20773.97    987396.3   78.55932   8.12e+07
{txt}{space 1}food_pc_nom {c |}{res}      6775    1257.269    1252.965          0   17857.14
{txt}{space 3}nf_pc_nom {c |}{res}      6775     19516.7    987342.9   23.11263   8.12e+07
{txt}
{com}.  codebook hhid;

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}6775

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. save "$path\work\conpc.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\conpc.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\conpc.dta saved

{com}. ***************************************************************************
> * 080_conpc.do          (end)
> ****************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/080_conpc.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}29 Apr 2013, 13:16:48
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/090_temp_index.do"                /* Temporal price index */
{txt}
{com}. *global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/090_temp_index.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/090_temp_index.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/090_temp_index.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:48
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 090_temp_index.do     (start)
> **************************************************************************;
. *do "$path/new/010_initial.do";
. **************************************************************************
> * Program to compute the temporal price index (intra-survey)
> * 
> * The index is based on 6 regions (North/Center/South by rural/urban) 
> * and four quarters. For IAF 2002/03 (t=t1) it is based on the same 9
> * commodities used for the analysis of the 1996 IAF (t=t0), 
> * except that we have to go to 8 commodities because the 2002-03 survey 
> * does not distinguish between large and small groundnuts, which were 
> * separate items in the old index. For IOF 2008/09 (t=t2) we expand the
> * the food basket to include the 15 most important food products among
> * the poorest.
> *
> * The commodity weights for the items vary by the 6 regions, and are 
> * calculated from the observations in the IAF2002, using the relatively 
> * poor households (below median nominal consumption per capita).
> *
> * The unit values (prices) calculated here are also based on the prices 
> * paid by the relatively poor, using the same definition.
> *
> * K Simler, Sep 2003
> * CA
> * MAH, April 2010
> * URB, Feb 2013 (automatization to any number of n_tpi's)
> **************************************************************************;
. /*
> This file uses:
>         work\own.dta
>         work\receipts.dta
>         work\daily.dta
>         work\hhdata
>         work\cons_cat.dta
> 
> This file creates:
>         work\tpi_unit_val_quarterly.dta
>         work\tpi_unit_val_monthly.dta
>         work\tpi_news_share.dta
>         work\tpi_reg_tpi_share.dta
>         work\temp_index_news.dta
>         work\temp_index_reg_tpi.dta
> */      
> 
> 
> **************************************************************************
> * Either the products used for intertemporal price index is specified
> * explicitly, or they are automatically found as the the n_tpi products
> * with the highest weighted expenditure shares among the $bottom % poorest
> * part of the population
> **************************************************************************;
. * Generating the n_tpi most important food items for the poorest $bottom % ;
. **************************************************************************
> * Find the n_tpi most important food products among the lowest $bottom %
> * (start)
> **************************************************************************;
. *------------------------------------------------------------------------*
> * Population weights for each HH
> *------------------------------------------------------------------------*;
. use "$path/work\hhdata.dta", clear;
{txt}
{com}. keep hhid hhweight hhsize;
{txt}
{com}. gen popwt = hhweight*hhsize;
{txt}
{com}. lab var popwt "Population weights = hhsize X hhweight";
{txt}
{com}. sort hhid;
{txt}
{com}. tempfile popwt;
{txt}
{com}. save `popwt', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{space 7}popwt {c |}{res}      6775    29614.26    44555.51         62     832599
{txt}
{com}. *------------------------------------------------------------------------*
> * Make list of all consumed products
> *------------------------------------------------------------------------*;
. *use "$path/in\cons_cod.dta", clear;
. *save "$path/work\cons_cod.dta", replace;
. use "$path/work\cons_cod.dta", clear;
{txt}
{com}. keep product descript;
{txt}
{com}. collapse product, by(descript);
{txt}
{com}. sort product;
{txt}
{com}. tempfile descript;
{txt}
{com}. save `descript', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}descript {c |}{res}        63    144.2857    110.8744        100        999
{txt}{space 5}product {c |}{res}        63    144.1587    109.8799        100        991
{txt}
{com}. *------------------------------------------------------------------------*
> * Find the poorest part of the population
> *------------------------------------------------------------------------*;
. use
> "$path/work\cons_cod.dta", clear;
{txt}
{com}. *use
> *"$path/work\cons_cod.dta", clear;
. ********************************************check the COICOP categories to create the variable prod_cat, for the moment it is equal to food_cat******;
. keep hhid prod_cat product cod_hh_nom;
{txt}
{com}. sort hhid;
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     96371    2.45e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     96371    191.4734    220.3821        100        991
{txt}{space 4}prod_cat {c |}{res}     96371    1.773314    2.812209          1         12
{txt}{space 2}cod_hh_nom {c |}{res}     96371    6853.476     1309467          0   4.06e+08
{txt}
{com}. merge hhid using `popwt';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     96371    2.45e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     96371    191.4734    220.3821        100        991
{txt}{space 4}prod_cat {c |}{res}     96371    1.773314    2.812209          1         12
{txt}{space 2}cod_hh_nom {c |}{res}     96371    6853.476     1309467          0   4.06e+08
{txt}{space 6}hhsize {c |}{res}     96371    5.120659    2.744634          1         24
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}     96371    4774.653    4406.075         54      92511
{txt}{space 7}popwt {c |}{res}     96371    31605.39    46844.89         62     832599
{txt}{space 6}_merge {c |}{res}     96371           3           0          3          3
{txt}
{com}. drop _merge;
{txt}
{com}. preserve;
{txt}
{com}. collapse (sum) cod_hh_nom (mean) popwt hhweight hhsize, by(hhid);
{txt}
{com}. gen cod_pc_nom = cod_hh_nom/hhsize;
{txt}
{com}.         sum cod_pc_nom [aw=popwt] , detail;

                         {txt}cod_pc_nom
{hline 61}
      Percentiles      Smallest
 1%    {res} 332.3661       78.55932
{txt} 5%    {res} 680.3636       103.0936
{txt}10%    {res} 872.9067       107.7462       {txt}Obs         {res}       6775
{txt}25%    {res} 1328.983       145.4659       {txt}Sum of Wgt. {res}  200636622

{txt}50%    {res} 2175.789                      {txt}Mean          {res} 9412.851
                        {txt}Largest       Std. Dev.     {res}   395673
{txt}75%    {res} 3972.618        1528531
{txt}90%    {res}  9057.59        1552604       {txt}Variance      {res} 1.57e+11
{txt}95%    {res} 17758.21        1790269       {txt}Skewness      {res} 202.1632
{txt}99%    {res} 88724.46       8.12e+07       {txt}Kurtosis      {res} 41456.83
{txt}
{com}.         global medcpc_= r(p$tpi_bottom);
{txt}
{com}.         gen bottom_ = cod_pc_nom <= $medcpc_;
{txt}
{com}. sum [aw=popwt];

{txt}    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 8}hhid {c |}{res}    6775   200636622    2.52e+09   1.10e+09   1.01e+09   4.19e+09
{txt}{space 2}cod_hh_nom {c |}{res}    6775   200636622    67821.64    2005057   232.1918   4.06e+08
{txt}{space 7}popwt {c |}{res}    6775   200636622    96639.42   125478.2         62     832599
{txt}{space 4}hhweight {c |}{res}    6775   200636622    10417.53   10233.19         54      92511
{txt}{space 6}hhsize {c |}{res}    6775   200636622    7.911641   3.294698          1         24
{txt}{hline 13}{c +}{hline 65}
{space 2}cod_pc_nom {c |}{res}    6775   200636622    9412.851     395673   78.55932   8.12e+07
{txt}{space 5}bottom_ {c |}{res}    6775   200636622    .5001342   .5000369          0          1
{txt}
{com}. sum [aw=hhweight];

{txt}    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 8}hhid {c |}{res}    6775    30713326    2.51e+09   1.12e+09   1.01e+09   4.19e+09
{txt}{space 2}cod_hh_nom {c |}{res}    6775    30713326    61490.01    2271154   232.1918   4.06e+08
{txt}{space 7}popwt {c |}{res}    6775    30713326    68053.16   97418.28         62     832599
{txt}{space 4}hhweight {c |}{res}    6775    30713326    8619.458   9115.422         54      92511
{txt}{space 6}hhsize {c |}{res}    6775    30713326    6.532559   3.001711          1         24
{txt}{hline 13}{c +}{hline 65}
{space 2}cod_pc_nom {c |}{res}    6775    30713326    10464.25   451493.4   78.55932   8.12e+07
{txt}{space 5}bottom_ {c |}{res}    6775    30713326    .4751522   .4994191          0          1
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 2}cod_hh_nom {c |}{res}      6775    97487.28     4938495   232.1918   4.06e+08
{txt}{space 7}popwt {c |}{res}      6775    29614.26    44555.51         62     832599
{txt}{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{hline 13}{c +}{hline 56}
{space 2}cod_pc_nom {c |}{res}      6775    20773.97    987396.3   78.55932   8.12e+07
{txt}{space 5}bottom_ {c |}{res}      6775    .4529889    .4978218          0          1
{txt}
{com}. keep if bottom_==1;
{txt}(3706 observations deleted)

{com}. keep hhid;
{txt}
{com}. sort hhid;
{txt}
{com}. tempfile hhid;
{txt}
{com}. save `hhid';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000004.tmp saved

{com}. restore;
{txt}
{com}. sort hhid;
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     96371    2.45e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     96371    191.4734    220.3821        100        991
{txt}{space 4}prod_cat {c |}{res}     96371    1.773314    2.812209          1         12
{txt}{space 2}cod_hh_nom {c |}{res}     96371    6853.476     1309467          0   4.06e+08
{txt}{space 6}hhsize {c |}{res}     96371    5.120659    2.744634          1         24
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}     96371    4774.653    4406.075         54      92511
{txt}{space 7}popwt {c |}{res}     96371    31605.39    46844.89         62     832599
{txt}
{com}. merge hhid using `hhid';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}. tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     59,138       61.36       61.36
{txt}          3 {c |}{res}     37,233       38.64      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}
{com}. keep if _m==3;
{txt}(59138 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     37233    2.79e+09    9.37e+08   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     37233    202.5063    236.8133        100        991
{txt}{space 4}prod_cat {c |}{res}     37233    1.906696    3.025194          1         12
{txt}{space 2}cod_hh_nom {c |}{res}     37233    573.9697    1326.064          0    30214.2
{txt}{space 6}hhsize {c |}{res}     37233    5.825988    2.505267          1         19
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}     37233    5005.712      4172.2        100      60164
{txt}{space 7}popwt {c |}{res}     37233    34954.35    42988.43        100     782132
{txt}{space 6}_merge {c |}{res}     37233           3           0          3          3
{txt}
{com}. *------------------------------------------------------------------------*
> * Keep only food product expenditure by the poor. Calculate food product
> * share of total food expenditure by the poor
> *------------------------------------------------------------------------*;
. keep if prod_cat==1;
{txt}(3069 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     34164    2.78e+09    9.37e+08   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     34164    131.6748    15.79307        100        161
{txt}{space 4}prod_cat {c |}{res}     34164           1           0          1          1
{txt}{space 2}cod_hh_nom {c |}{res}     34164    297.0688    482.2309          0       9000
{txt}{space 6}hhsize {c |}{res}     34164    5.843549    2.501487          1         19
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}     34164    5028.222    4166.388        100      60164
{txt}{space 7}popwt {c |}{res}     34164    35157.19    43014.83        100     782132
{txt}{space 6}_merge {c |}{res}     34164           3           0          3          3
{txt}
{com}. sort product;
{txt}
{com}. *preserve;
. collapse (sum) cod_hh_nom [aw=hhweight], by(product);
{txt}
{com}. sort cod;
{txt}
{com}. egen total=sum(cod_hh_nom);
{txt}
{com}. gen sh=100*cod_hh_nom/total;
{txt}
{com}. *------------------------------------------------------------------------*
> * Include product labels
> *------------------------------------------------------------------------*;
. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}        62       130.5    18.04162        100        161
{txt}{space 2}cod_hh_nom {c |}{res}        62    189847.5      266511   1752.996    1123210
{txt}{space 7}total {c |}{res}        62    1.18e+07           0   1.18e+07   1.18e+07
{txt}{space 10}sh {c |}{res}        62    1.612903     2.26422   .0148931   9.542551
{txt}
{com}. sort product;
{txt}
{com}. merge product using `descript';
{txt}
{com}. tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          1        1.59        1.59
{txt}          3 {c |}{res}         62       98.41      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         63      100.00
{txt}
{com}. keep if _merge==1 | _merge==3;
{txt}(1 observation deleted)

{com}. drop _merge;
{txt}
{com}. sort sh;
{txt}
{com}. *list;
. list in -$product_tpi_n/-1;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product   cod_hh~m      total         sh   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 48. {c |} {res}    153   222373.6   1.18e+07   1.889238        153 {txt}{c |}
 49. {c |} {res}    125   230312.1   1.18e+07   1.956682        125 {txt}{c |}
 50. {c |} {res}    123   230714.2   1.18e+07   1.960098        123 {txt}{c |}
 51. {c |} {res}    127   234920.9   1.18e+07   1.995837        127 {txt}{c |}
 52. {c |} {res}    140   251058.4   1.18e+07   2.132938        140 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 53. {c |} {res}    103   316957.7   1.18e+07   2.692804        103 {txt}{c |}
 54. {c |} {res}    104   335649.7   1.18e+07   2.851607        104 {txt}{c |}
 55. {c |} {res}    147   418515.3   1.18e+07   3.555615        147 {txt}{c |}
 56. {c |} {res}    117   440335.5   1.18e+07   3.740995        117 {txt}{c |}
 57. {c |} {res}    116   479750.5   1.18e+07   4.075856        116 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 58. {c |} {res}    107   720970.3   1.18e+07   6.125207        107 {txt}{c |}
 59. {c |} {res}    141   940596.5   1.18e+07   7.991104        141 {txt}{c |}
 60. {c |} {res}    108    1056863   1.18e+07   8.978882        108 {txt}{c |}
 61. {c |} {res}    105    1108255   1.18e+07   9.415496        105 {txt}{c |}
 62. {c |} {res}    113    1123210   1.18e+07   9.542551        113 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}. list product descript in -$product_tpi_n/-1;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}product   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
 48. {c |} {res}    153        153 {txt}{c |}
 49. {c |} {res}    125        125 {txt}{c |}
 50. {c |} {res}    123        123 {txt}{c |}
 51. {c |} {res}    127        127 {txt}{c |}
 52. {c |} {res}    140        140 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
 53. {c |} {res}    103        103 {txt}{c |}
 54. {c |} {res}    104        104 {txt}{c |}
 55. {c |} {res}    147        147 {txt}{c |}
 56. {c |} {res}    117        117 {txt}{c |}
 57. {c |} {res}    116        116 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
 58. {c |} {res}    107        107 {txt}{c |}
 59. {c |} {res}    141        141 {txt}{c |}
 60. {c |} {res}    108        108 {txt}{c |}
 61. {c |} {res}    105        105 {txt}{c |}
 62. {c |} {res}    113        113 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c BRC}

{com}. *restore;
. *------------------------------------------------------------------------*
> * Keep the required number of most important food products
> *------------------------------------------------------------------------*;
. keep in -$product_tpi_n/-1;
{txt}(47 observations deleted)

{com}. list;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product   cod_hh~m      total         sh   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    153   222373.6   1.18e+07   1.889238        153 {txt}{c |}
  2. {c |} {res}    125   230312.1   1.18e+07   1.956682        125 {txt}{c |}
  3. {c |} {res}    123   230714.2   1.18e+07   1.960098        123 {txt}{c |}
  4. {c |} {res}    127   234920.9   1.18e+07   1.995837        127 {txt}{c |}
  5. {c |} {res}    140   251058.4   1.18e+07   2.132938        140 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  6. {c |} {res}    103   316957.7   1.18e+07   2.692804        103 {txt}{c |}
  7. {c |} {res}    104   335649.7   1.18e+07   2.851607        104 {txt}{c |}
  8. {c |} {res}    147   418515.3   1.18e+07   3.555615        147 {txt}{c |}
  9. {c |} {res}    117   440335.5   1.18e+07   3.740995        117 {txt}{c |}
 10. {c |} {res}    116   479750.5   1.18e+07   4.075856        116 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}    107   720970.3   1.18e+07   6.125207        107 {txt}{c |}
 12. {c |} {res}    141   940596.5   1.18e+07   7.991104        141 {txt}{c |}
 13. {c |} {res}    108    1056863   1.18e+07   8.978882        108 {txt}{c |}
 14. {c |} {res}    105    1108255   1.18e+07   9.415496        105 {txt}{c |}
 15. {c |} {res}    113    1123210   1.18e+07   9.542551        113 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}. gen product_tpi=1;
{txt}
{com}. keep product product_tpi;
{txt}
{com}. list;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}product   produc~i {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}    153          1 {txt}{c |}
  2. {c |} {res}    125          1 {txt}{c |}
  3. {c |} {res}    123          1 {txt}{c |}
  4. {c |} {res}    127          1 {txt}{c |}
  5. {c |} {res}    140          1 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}    103          1 {txt}{c |}
  7. {c |} {res}    104          1 {txt}{c |}
  8. {c |} {res}    147          1 {txt}{c |}
  9. {c |} {res}    117          1 {txt}{c |}
 10. {c |} {res}    116          1 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}    107          1 {txt}{c |}
 12. {c |} {res}    141          1 {txt}{c |}
 13. {c |} {res}    108          1 {txt}{c |}
 14. {c |} {res}    105          1 {txt}{c |}
 15. {c |} {res}    113          1 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c BRC}

{com}. sort product;
{txt}
{com}. tempfile product_tpi;
{txt}
{com}. save `product_tpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}        15    121.9333     16.5679        103        153
{txt}{space 1}product_tpi {c |}{res}        15           1           0          1          1
{txt}
{com}. clear;
{txt}
{com}. **************************************************************************
> * Find the n_tpi most important food products among the lowest $bottom %
> * (end)
> **************************************************************************;
. **************************************************************************;
. * First, need to calculate the average prices for the food items, by 
> * strata and quarter. For this, we are using the "unit values"
> * (value/quantity) for the observations in the consumption questionnaires,
> * including daily, own and receipts-in-kind.
> *
> * The unit values are constructed as sum(value)/sum(quantity), which effectively
> * weights them by the quantity and value of the transaction. Sampling
> * weights are also used.
> *
> * Get the own consumption file, and limit analysis to the observations
> * in KGs where both value and quantity are available.
> **************************************************************************;
. use "$path/work/cons_cod.dta";
{txt}
{com}. *use "$path/work/cons_cod.dta";
. keep if prod_cat==1;
{txt}(6775 observations deleted)

{com}. drop if quantityd==0 | quantityd==.;
{txt}(5850 observations deleted)

{com}. *keep if quantityd!=. & cod_hh_nom2!=.;
. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     83746    2.44e+09    1.14e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     83746    130.6159    15.49794        100        159
{txt}{space 4}descript {c |}{res}     83746    130.6159    15.49794        100        159
{txt}{space 4}food_cat {c |}{res}     83746           1           0          1          1
{txt}{space 4}prod_cat {c |}{res}     83746           1           0          1          1
{txt}{hline 13}{c +}{hline 56}
{space 3}quantityd {c |}{res}     83746    2.515699    23.26115   .0000286   1643.714
{txt}{space 1}cod_hh_nom3 {c |}{res}     83746    389.5283    602.1037   7.142857      14000
{txt}{space 2}cod_hh_nom {c |}{res}     83746    389.5283    602.1037   7.142857      14000
{txt}{space 1}cod_hh_nom2 {c |}{res}     83746    389.5283    602.1037   7.142857      14000
{txt}
{com}. sort product;
{txt}
{com}. merge product using `product_tpi';
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

{com}. tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     49,510       59.12       59.12
{txt}          3 {c |}{res}     34,236       40.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,746      100.00
{txt}
{com}. drop _merge;
{txt}
{com}. keep if $product_tpi;
{txt}(49510 observations deleted)

{com}. *        replace valued_ac=0 if valued_ac==.;
. *        replace quantityd_ac=0 if quantityd_ac==.;
.         gen valued_tot=cod_hh_nom2;
{txt}
{com}.         gen quantityd_tot=quantityd;
{txt}
{com}. *               replace quantityd_tot=0 if (valued_tot>0 & valued_tot<.) & quantityd_tot==.;
.         keep if quantityd_tot!=. & valued_tot!=.;
{txt}(0 observations deleted)

{com}.                 collapse (sum) valued_tot quantityd_tot, by(hhid product);
{txt}
{com}.                 sort hhid;
{txt}
{com}. tempfile acredd;
{txt}
{com}. save `acredd' , replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000006.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000006.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     34236    2.47e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     34236    123.5172     15.5879        103        153
{txt}{space 2}valued_tot {c |}{res}     34236    578.2445    711.6146   7.142857      12000
{txt}quantityd_~t {c |}{res}     34236    1.508504    4.636162   .0028571   364.2857
{txt}
{com}. /*
> **************************************************************************;
> * Create a data set with an empty 1 observation. Used to avoid empty data
> * sets when the survey do not have the Mozambican set up
> **************************************************************************;
> use "$path/work/own.dta";
> 
> preserve;
> keep in 1;
> drop unit valued quantityd;
> gen unit=2;
> gen valued=0;
> gen quantityd=0;
> tempfile 1obs;
> save `1obs';
> restore;
> 
> **************************************************************************;
> * Own consumption
> **************************************************************************;
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
>         rename valued valued_ac;
>         rename quantityd quantityd_ac;
>         compress;
>         sort hhid product;
>         tempfile ac;
> save `ac', replace;
> 
> **************************************************************************;
> * Now do a similar thing with receipts-in-kind file.
> **************************************************************************;
> use "$path/work/receipts.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> 
> 
> keep if $product_tpi;
> append using `1obs';
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
>         rename valued valued_re;
>         rename quantityd quantityd_re;
>         compress;
>         sort hhid product;
>         tempfile re;
> save `re', replace;
> 
> **************************************************************************;
> * And also with the daily expenditure file.
> **************************************************************************;
> use "$path/work/daily.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> *rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> *rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         collapse (sum) value quantity days , 
>                 by(hhid product unit);
> 
>         gen valued=value/7 if days<=7;
>         replace valued=value/days if days>7 & days<.;
>         gen quantityd=quantity/7 if days<=7;
>         replace quantityd=quantity/days if days>7 & days<.;
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
> 
>         rename valued valued_dd;
>         rename quantityd quantityd_dd;
>         compress;
>         sort hhid product;
>         tempfile dd;
> save `dd', replace;
> 
> 
> 
> 
> **************************************************************************;
> * Merge the three components (own, daily, receipts) together at the HH/product level, 
> * then aggregate to the regional level, using the sample weights (hhweight).
> * We DON'T want to weight by "hhsize" because the quantity and value are
> * already for the household (i.e., other things equal, larger households
> * are buying larger quantities, and therefore already getting more weight).
> * Then calculate sum(val)/sum(quantity) to get the quantity weighted mean
> * unit value in each strata in each quarter.
> **************************************************************************;
> use `ac';
>         sort hhid product;
>         merge hhid product using `re';
>         tab _m;
>         drop _m;
>         
>         sort hhid product;
>         merge hhid product using `dd';
>         tab _m;
>         drop _m;
>         
>         replace valued_ac=0 if valued_ac==.;
>         replace valued_re=0 if valued_re==.;
>         replace valued_dd=0 if valued_dd==.;
>         replace quantityd_ac=0 if quantityd_ac==.;
>         replace quantityd_re=0 if quantityd_re==.;
>         replace quantityd_dd=0 if quantityd_dd==.;
> 
>         gen valued_tot=valued_ac+valued_re+valued_dd;
>         gen quantityd_tot=quantityd_ac+quantityd_re+quantityd_dd;
> 
>         sort hhid;
> 
>         tempfile acredd;
> save `acredd' , replace;
> */
> 
> 
> 
> use "$path/work/hhdata.dta";
{txt}
{com}.         keep strata hhid hhweight hhsize rural survmon survquar news spdomain reg_tpi;
{txt}
{com}.         sort hhid;
{txt}
{com}.         tempfile hhd;
{txt}
{com}. save `hhd' , replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000007.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000007.tmp saved

{com}. use `acredd', clear;
{txt}
{com}.         merge hhid using `hhd';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        315        0.91        0.91
{txt}          3 {c |}{res}     34,236       99.09      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,551      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.                 tab survquar , miss;

 {txt}Sequential {c |}
     Survey {c |}
    Quarter {c |}
    May-Jun {c |}
      09=1) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
 May-Jul 09 {c |}{res}      8,742       25.30       25.30
{txt}Sept-Oct 09 {c |}{res}      8,992       26.03       51.33
{txt}Nov09-Jan10 {c |}{res}      7,404       21.43       72.76
{txt} Feb-Apr 10 {c |}{res}      9,413       27.24      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,551      100.00
{txt}
{com}.                 tab survmon survquar, miss;

{txt}Sequential {c |}
    Survey {c |}
Month (May {c |}   Sequential Survey Quarter May-Jun 09=1)
   2009=1) {c |} May-Jul 0  Sept-Oct   Nov09-Jan  Feb-Apr 1 {c |}     Total
{hline 11}{c +}{hline 44}{c +}{hline 10}
    May 09 {c |}{res}       187          0          0          0 {txt}{c |}{res}       187 
{txt}    Jun 09 {c |}{res}     6,230          0          0          0 {txt}{c |}{res}     6,230 
{txt}    Jul 09 {c |}{res}     2,325          0          0          0 {txt}{c |}{res}     2,325 
{txt}    Sep 09 {c |}{res}         0      3,119          0          0 {txt}{c |}{res}     3,119 
{txt}    Oct 09 {c |}{res}         0      5,873          0          0 {txt}{c |}{res}     5,873 
{txt}    Nov 09 {c |}{res}         0          0      3,162          0 {txt}{c |}{res}     3,162 
{txt}    Dec 09 {c |}{res}         0          0      2,074          0 {txt}{c |}{res}     2,074 
{txt}    Jan 10 {c |}{res}         0          0      2,168          0 {txt}{c |}{res}     2,168 
{txt}    Feb 10 {c |}{res}         0          0          0      2,225 {txt}{c |}{res}     2,225 
{txt}    Mar 10 {c |}{res}         0          0          0      4,683 {txt}{c |}{res}     4,683 
{txt}    Apr 10 {c |}{res}         0          0          0      2,505 {txt}{c |}{res}     2,505 
{txt}{hline 11}{c +}{hline 44}{c +}{hline 10}
     Total {c |}{res}     8,742      8,992      7,404      9,413 {txt}{c |}{res}    34,551 

{txt}
{com}.         compress;
{txt}product was {res}float{txt} now {res}int
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}
{com}.         sort hhid;
{txt}
{com}. save `acredd', replace;
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000006.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     34551    2.47e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     34236    123.5172     15.5879        103        153
{txt}{space 2}valued_tot {c |}{res}     34236    578.2445    711.6146   7.142857      12000
{txt}quantityd_~t {c |}{res}     34236    1.508504    4.636162   .0028571   364.2857
{txt}{space 6}strata {c |}{res}     34551    5.478278    2.879859          1         10
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}     34551    5.225059     2.74337          1         24
{txt}{space 4}hhweight {c |}{res}     34551    4924.711    4407.844         54      92511
{txt}{space 4}survquar {c |}{res}     34551     2.50615    1.140574          1          4
{txt}{space 5}survmon {c |}{res}     34551    6.729646    3.333076          1         12
{txt}{space 7}rural {c |}{res}     34551    .8112066    .3913501          0          1
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}     34551    2.380539    1.120118          1          4
{txt}{space 5}reg_tpi {c |}{res}     34551    1.188793    .3913501          1          2
{txt}{space 4}spdomain {c |}{res}     34551    3.200399    1.378315          1          5
{txt}
{com}. **************************************************************************;
. * Need to merge with the file that has nominal consumption per household,
> * and compute nominal consumption per capita from that, so that we can
> * choose the relatively poor (i.e., below median nominal consumption per
> * capita).
> **************************************************************************;
. use "$path\work\conpc.dta", clear;
{txt}
{com}. keep hhid cons_hh_nom;
{txt}
{com}. *use "$path/in/cons_cat.dta" ;
. *save "$path/work/cons_cat.dta", replace ;
. *use "$path/work/cons_cat.dta" ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;
{txt}
{com}.         merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.           tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.  drop _m;
{txt}
{com}.         collapse (mean) cons_hh_nom hhsize hhweight , by(hhid);
{txt}
{com}.         gen cpc=cons_hh_nom/hhsize;
{txt}
{com}.         sum cpc [aw=hhsize*hhweight] , detail;

                             {txt}cpc
{hline 61}
      Percentiles      Smallest
 1%    {res} 332.3661       78.55932
{txt} 5%    {res} 680.3636       103.0936
{txt}10%    {res} 872.9067       107.7462       {txt}Obs         {res}       6775
{txt}25%    {res} 1328.983       145.4659       {txt}Sum of Wgt. {res}  200636622

{txt}50%    {res} 2175.789                      {txt}Mean          {res} 9412.851
                        {txt}Largest       Std. Dev.     {res}   395673
{txt}75%    {res} 3972.618        1528531
{txt}90%    {res}  9057.59        1552604       {txt}Variance      {res} 1.57e+11
{txt}95%    {res} 17758.21        1790269       {txt}Skewness      {res} 202.1632
{txt}99%    {res} 88724.46       8.12e+07       {txt}Kurtosis      {res} 41456.83
{txt}
{com}.         global medcpc=r(p$tpi_bottom);
{txt}
{com}.         gen bottom_tpi=cpc<=$medcpc;
{txt}
{com}.         keep hhid bottom_tpi;
{txt}
{com}.         sort hhid;
{txt}
{com}.         tempfile bottom_tpi;
{txt}
{com}. save `bottom_tpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000008.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000008.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 2}bottom_tpi {c |}{res}      6775    .4529889    .4978218          0          1
{txt}
{com}. use `acredd' ;
{txt}
{com}.         merge hhid using `bottom_tpi';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     34,551      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,551      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         keep if bottom_tpi;
{txt}(20939 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     13612    2.77e+09    9.56e+08   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     13473    123.4582    15.75092        103        153
{txt}{space 2}valued_tot {c |}{res}     13473    513.2872    612.4287   7.142857       9000
{txt}quantityd_~t {c |}{res}     13473     1.48159     4.67223   .0051429        362
{txt}{space 6}strata {c |}{res}     13612    6.282765    2.360666          1         10
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}     13612    5.921393    2.485605          1         19
{txt}{space 4}hhweight {c |}{res}     13612    5240.411    4192.181        100      60164
{txt}{space 4}survquar {c |}{res}     13612    2.550103    1.163222          1          4
{txt}{space 5}survmon {c |}{res}     13612    6.841316      3.4422          1         12
{txt}{space 7}rural {c |}{res}     13612    .9381428    .2409048          0          1
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}     13612    2.668969    .9527972          1          4
{txt}{space 5}reg_tpi {c |}{res}     13612    1.061857    .2409048          1          2
{txt}{space 4}spdomain {c |}{res}     13612    3.548266    1.190332          1          5
{txt}{space 2}bottom_tpi {c |}{res}     13612           1           0          1          1
{txt}
{com}. * Drop one HH with extremely high quantity and low value in IAF 2002/03 (t=t1) ;
. *        drop if hhid==263001;
.         preserve;
{txt}
{com}.                 collapse (sum) valued_tot quantityd_tot [aw=hhweight] , 
>                                 by(reg_tpi news product survmon);
{txt}
{com}.                         drop if product==.;
{txt}(35 observations deleted)

{com}.                         gen ppkg=valued_tot/quantityd_tot;
{txt}
{com}.                         lab var ppkg "Unit value per kg";
{txt}
{com}.                         sort reg_tpi product ;
{txt}
{com}.                         compress;
{txt}
{com}.                         tempfile uvm;
{txt}
{com}.                 save `uvm', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000a.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000a.tmp saved

{com}.                 save "$path/work/tpi_unit_val_monthly.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_monthly.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_monthly.dta saved

{com}.         restore;
{txt}
{com}.         preserve;
{txt}
{com}.                 collapse (sum) valued_tot quantityd_tot [aw=hhweight] , 
>                                 by(reg_tpi news product survquar);
{txt}
{com}.                         drop if product==.;
{txt}(21 observations deleted)

{com}.                         gen ppkg=valued_tot/quantityd_tot;
{txt}
{com}.                         sort reg_tpi product survquar;
{txt}
{com}.                         list in  1/3;
{txt}
     {c TLC}{hline 9}{c -}{hline 12}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product     survquar   news   reg_tpi   valued~t   quanti~t       ppkg {txt}{c |}
     {c LT}{hline 9}{c -}{hline 12}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    103   May-Jul 09      2         1   13192.56   35.69681   369.5725 {txt}{c |}
  2. {c |} {res}    103   May-Jul 09      4         1   35641.07   120.9178   294.7545 {txt}{c |}
  3. {c |} {res}    103   May-Jul 09      1         1   22568.77   73.73573   306.0764 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 12}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.                         list in -3/-1;
{txt}
     {c TLC}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product      survquar   news   reg_tpi   valued~t   quanti~t       ppkg {txt}{c |}
     {c LT}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
396. {c |} {res}    153   Nov09-Jan10      1         2   571.4286   .3809524       1500 {txt}{c |}
397. {c |} {res}    153   Nov09-Jan10      2         2   460.7944   .0835521   5515.057 {txt}{c |}
398. {c |} {res}    153    Feb-Apr 10      1         2   285.7143   .2057143   1388.889 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.                         tempfile uvq;
{txt}
{com}.                 save "$path/work/tpi_unit_val_quarterly.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_quarterly.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_quarterly.dta saved

{com}.                 save `uvq', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000c.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000c.tmp saved

{com}.         restore;
{txt}
{com}.         **************************************************************************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * each reg_tpi & product combination. This should eliminate outliers that
> * may have an undue influence on the price calculation. Then use sample
> * weighting PLUS quantity weighting on those HH-level observations.
> **************************************************************************;
.         preserve;
{txt}
{com}.                 gen hhppkg=valued_tot/quantityd_tot;
{txt}(139 missing values generated)

{com}.                 egen lower5=pctile(hhppkg), p(5) by(reg_tpi product);
{txt}(139 missing values generated)

{com}.                 egen upper5=pctile(hhppkg), p(95) by(reg_tpi product);
{txt}(139 missing values generated)

{com}.                 keep if hhppkg>=lower5 & hhppkg<=upper5;
{txt}(972 observations deleted)

{com}.                                 gen hhqtywt=hhweight*quantityd_tot;
{txt}(139 missing values generated)

{com}.                                 collapse (sum) valued_tot quantityd_tot [aw=hhqtywt] , 
>                                 by(reg_tpi news product survquar);
{txt}
{com}.                         drop if product==.;
{txt}(0 observations deleted)

{com}.                         gen ppkg_trim=valued_tot/quantityd_tot;
{txt}
{com}.                         lab var ppkg_trim "90% trimmed unit value per kg";
{txt}
{com}.                         sort reg_tpi product survquar;
{txt}
{com}.                         list , nol;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product   survquar   news   reg_tpi   valued~t   quanti~t   ppkg_t~m {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    103          1      4         1   41846.67   152.8278   273.8158 {txt}{c |}
  2. {c |} {res}    103          1      1         1   28319.06   96.17417    294.456 {txt}{c |}
  3. {c |} {res}    103          1      3         1   1387.982   4.285715   323.8625 {txt}{c |}
  4. {c |} {res}    103          1      2         1   12331.36   35.81787   344.2795 {txt}{c |}
  5. {c |} {res}    103          2      2         1   10384.88   29.72081   349.4143 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  6. {c |} {res}    103          2      4         1   72394.29   233.4372   310.1232 {txt}{c |}
  7. {c |} {res}    103          2      3         1   1714.286   4.285715        400 {txt}{c |}
  8. {c |} {res}    103          2      1         1   18820.04    63.6893   295.4977 {txt}{c |}
  9. {c |} {res}    103          3      2         1   2621.611   8.571429   305.8545 {txt}{c |}
 10. {c |} {res}    103          3      1         1   9132.665   27.16821   336.1527 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}    103          3      3         1   10114.38   37.68812   268.3706 {txt}{c |}
 12. {c |} {res}    103          3      4         1   31806.17   97.61178   325.8436 {txt}{c |}
 13. {c |} {res}    103          4      4         1   112989.5    364.812   309.7197 {txt}{c |}
 14. {c |} {res}    103          4      2         1   11809.92   38.17354   309.3746 {txt}{c |}
 15. {c |} {res}    103          4      1         1   27228.33    88.0705   309.1652 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 16. {c |} {res}    104          1      2         1   1339.313   1.785714   750.0153 {txt}{c |}
 17. {c |} {res}    104          1      1         1   35831.35   55.45506   646.1331 {txt}{c |}
 18. {c |} {res}    104          1      4         1   137732.1   176.4194   780.7081 {txt}{c |}
 19. {c |} {res}    104          1      3         1   668.7192   .7142857   936.2068 {txt}{c |}
 20. {c |} {res}    104          2      2         1   4090.226   4.859248   841.7404 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 21. {c |} {res}    104          2      1         1   14192.94    14.0708    1008.68 {txt}{c |}
 22. {c |} {res}    104          2      3         1   2727.042   2.419824   1126.959 {txt}{c |}
 23. {c |} {res}    104          2      4         1   115863.6   151.6348   764.0965 {txt}{c |}
 24. {c |} {res}    104          3      4         1   30398.32   27.86736   1090.822 {txt}{c |}
 25. {c |} {res}    104          3      3         1   571.4286   .7142857        800 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 26. {c |} {res}    104          3      2         1   1973.631    3.22393   612.1818 {txt}{c |}
 27. {c |} {res}    104          3      1         1   23757.38   33.56893   707.7194 {txt}{c |}
 28. {c |} {res}    104          4      2         1   714.2857   .7142857   999.9999 {txt}{c |}
 29. {c |} {res}    104          4      4         1   46275.97   50.80224   910.9042 {txt}{c |}
 30. {c |} {res}    104          4      1         1   10620.11    13.5381   784.4606 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 31. {c |} {res}    104          4      3         1   6421.369   14.98156   428.6182 {txt}{c |}
 32. {c |} {res}    105          1      1         1    85835.1   364.7556   235.3222 {txt}{c |}
 33. {c |} {res}    105          1      2         1   110893.2   530.7202   208.9486 {txt}{c |}
 34. {c |} {res}    105          1      3         1   26956.07   58.02394   464.5681 {txt}{c |}
 35. {c |} {res}    105          1      4         1   75685.91   353.5317   214.0852 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 36. {c |} {res}    105          2      2         1   224928.8   826.2477   272.2292 {txt}{c |}
 37. {c |} {res}    105          2      4         1   82847.45   346.1394   239.3471 {txt}{c |}
 38. {c |} {res}    105          2      1         1   54149.07   226.3349   239.2431 {txt}{c |}
 39. {c |} {res}    105          2      3         1   151520.2   457.6317   331.0963 {txt}{c |}
 40. {c |} {res}    105          3      3         1   147029.3   380.7123   386.1953 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 41. {c |} {res}    105          3      2         1     206568   662.0595   312.0082 {txt}{c |}
 42. {c |} {res}    105          3      1         1   78451.45   224.1804   349.9478 {txt}{c |}
 43. {c |} {res}    105          3      4         1   106403.7   491.2505   216.5976 {txt}{c |}
 44. {c |} {res}    105          4      2         1   170147.4   843.8369   201.6354 {txt}{c |}
 45. {c |} {res}    105          4      1         1   100834.2   620.9468   162.3879 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 46. {c |} {res}    105          4      3         1   168381.8   448.4791   375.4507 {txt}{c |}
 47. {c |} {res}    105          4      4         1   131072.2   528.1904   248.1533 {txt}{c |}
 48. {c |} {res}    107          1      1         1   82722.77   821.4803   100.6996 {txt}{c |}
 49. {c |} {res}    107          1      2         1   110457.5   1408.239   78.43666 {txt}{c |}
 50. {c |} {res}    107          1      3         1     142807   2112.519   67.60035 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 51. {c |} {res}    107          1      4         1   82677.26   953.2077   86.73583 {txt}{c |}
 52. {c |} {res}    107          2      2         1   80616.85   1267.057   63.62529 {txt}{c |}
 53. {c |} {res}    107          2      1         1   30587.14   353.2005   86.59994 {txt}{c |}
 54. {c |} {res}    107          2      3         1    86498.9   1169.498   73.96242 {txt}{c |}
 55. {c |} {res}    107          2      4         1   63164.99   817.0069   77.31268 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 56. {c |} {res}    107          3      3         1   42848.41   739.6446   57.93108 {txt}{c |}
 57. {c |} {res}    107          3      2         1   75445.79   833.3967   90.52807 {txt}{c |}
 58. {c |} {res}    107          3      4         1   32936.36   480.7773   68.50648 {txt}{c |}
 59. {c |} {res}    107          3      1         1   18412.31   172.5484   106.7081 {txt}{c |}
 60. {c |} {res}    107          4      4         1   35103.88   287.1842   122.2347 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 61. {c |} {res}    107          4      1         1   21312.65   288.0293   73.99475 {txt}{c |}
 62. {c |} {res}    107          4      2         1   42145.69   585.6392   71.96529 {txt}{c |}
 63. {c |} {res}    107          4      3         1   208717.1   3406.566   61.26908 {txt}{c |}
 64. {c |} {res}    108          1      3         1    97830.6   97.82584   1000.049 {txt}{c |}
 65. {c |} {res}    108          1      2         1     216590   289.5021   748.1463 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 66. {c |} {res}    108          1      4         1    81958.5    367.285   223.1469 {txt}{c |}
 67. {c |} {res}    108          1      1         1   24004.58   130.5992   183.8034 {txt}{c |}
 68. {c |} {res}    108          2      4         1   40350.73   69.73661   578.6161 {txt}{c |}
 69. {c |} {res}    108          2      1         1   14916.99   14.45489   1031.968 {txt}{c |}
 70. {c |} {res}    108          2      3         1   83467.95   199.5907   418.1956 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 71. {c |} {res}    108          2      2         1   157358.9   208.0819   756.2352 {txt}{c |}
 72. {c |} {res}    108          3      3         1   106679.6   134.0281   795.9493 {txt}{c |}
 73. {c |} {res}    108          3      1         1   20203.14   22.62487   892.9616 {txt}{c |}
 74. {c |} {res}    108          3      2         1   101096.5    126.755   797.5739 {txt}{c |}
 75. {c |} {res}    108          3      4         1   32316.56   61.21784   527.8944 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 76. {c |} {res}    108          4      2         1   78278.41   124.1961   630.2805 {txt}{c |}
 77. {c |} {res}    108          4      3         1   252963.8   365.9123   691.3235 {txt}{c |}
 78. {c |} {res}    108          4      4         1   10573.29    14.5281   727.7824 {txt}{c |}
 79. {c |} {res}    108          4      1         1   4030.669   4.030669       1000 {txt}{c |}
 80. {c |} {res}    113          1      2         1   115095.6   110.3238   1043.252 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 81. {c |} {res}    113          1      1         1   43053.51   38.45917    1119.46 {txt}{c |}
 82. {c |} {res}    113          1      3         1   63118.04   46.14314   1367.875 {txt}{c |}
 83. {c |} {res}    113          1      4         1   88301.26   75.89532   1163.461 {txt}{c |}
 84. {c |} {res}    113          2      1         1   120476.6   95.07635   1267.156 {txt}{c |}
 85. {c |} {res}    113          2      3         1   110388.4   96.20217   1147.463 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 86. {c |} {res}    113          2      2         1   255387.1   246.9376   1034.217 {txt}{c |}
 87. {c |} {res}    113          2      4         1   119030.8   135.9409   875.6071 {txt}{c |}
 88. {c |} {res}    113          3      4         1   173842.9   215.9366   805.0648 {txt}{c |}
 89. {c |} {res}    113          3      3         1   47210.46   41.76289   1130.441 {txt}{c |}
 90. {c |} {res}    113          3      1         1   51669.12   42.27932    1222.09 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 91. {c |} {res}    113          3      2         1   125144.4    117.175   1068.013 {txt}{c |}
 92. {c |} {res}    113          4      3         1   102741.9   110.4949   929.8336 {txt}{c |}
 93. {c |} {res}    113          4      4         1   58064.97   79.76872   727.9165 {txt}{c |}
 94. {c |} {res}    113          4      1         1   73039.96   67.77036   1077.757 {txt}{c |}
 95. {c |} {res}    113          4      2         1   115322.7   157.1783   733.7063 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 96. {c |} {res}    116          1      1         1   114.2857   .2857143        400 {txt}{c |}
 97. {c |} {res}    116          1      2         1   66574.02   160.0485   415.9616 {txt}{c |}
 98. {c |} {res}    116          1      4         1   1022.575   1.225386   834.4922 {txt}{c |}
 99. {c |} {res}    116          1      3         1   126215.3   207.1279   609.3591 {txt}{c |}
100. {c |} {res}    116          2      1         1   42.85714   .0357143       1200 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
101. {c |} {res}    116          2      2         1   53231.25   126.5735    420.556 {txt}{c |}
102. {c |} {res}    116          2      3         1   37001.17   62.30716    593.851 {txt}{c |}
103. {c |} {res}    116          2      4         1   3527.077   5.424232   650.2446 {txt}{c |}
104. {c |} {res}    116          3      1         1   142.8571   .1428571       1000 {txt}{c |}
105. {c |} {res}    116          3      2         1   8215.117    12.3099   667.3583 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
106. {c |} {res}    116          3      4         1   1939.862   3.350982   578.8937 {txt}{c |}
107. {c |} {res}    116          3      3         1   120366.2   218.5446   550.7625 {txt}{c |}
108. {c |} {res}    116          4      4         1    1677.04   2.376296   705.7369 {txt}{c |}
109. {c |} {res}    116          4      2         1   25680.73   59.49715   431.6295 {txt}{c |}
110. {c |} {res}    116          4      1         1   714.2857   .7142857   999.9999 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
111. {c |} {res}    116          4      3         1     278767   560.4436   497.4041 {txt}{c |}
112. {c |} {res}    117          1      3         1   40132.54   9.889278   4058.187 {txt}{c |}
113. {c |} {res}    117          1      1         1   12718.11   2.997132   4243.426 {txt}{c |}
114. {c |} {res}    117          1      4         1   23216.33    6.04788   3838.754 {txt}{c |}
115. {c |} {res}    117          1      2         1   25301.43   5.970792   4237.533 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
116. {c |} {res}    117          2      4         1   27350.26   6.544486    4179.13 {txt}{c |}
117. {c |} {res}    117          2      1         1   6724.286   1.731291   3883.972 {txt}{c |}
118. {c |} {res}    117          2      2         1   59590.94    14.6633   4063.951 {txt}{c |}
119. {c |} {res}    117          2      3         1   80023.45   18.78896   4259.068 {txt}{c |}
120. {c |} {res}    117          3      3         1   39795.54   9.318532    4270.58 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
121. {c |} {res}    117          3      2         1    30071.8   7.313157   4112.013 {txt}{c |}
122. {c |} {res}    117          3      1         1      22730   5.053998    4497.43 {txt}{c |}
123. {c |} {res}    117          3      4         1   6515.356   1.589221   4099.716 {txt}{c |}
124. {c |} {res}    117          4      4         1   19625.17   5.160518   3802.946 {txt}{c |}
125. {c |} {res}    117          4      2         1   46554.72   11.39253   4086.424 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
126. {c |} {res}    117          4      1         1   11541.39   3.231076   3571.996 {txt}{c |}
127. {c |} {res}    117          4      3         1   77151.85   19.19659    4019.04 {txt}{c |}
128. {c |} {res}    123          1      3         1   33864.94   155.2341   218.1539 {txt}{c |}
129. {c |} {res}    123          1      2         1   20241.32   111.7814   181.0794 {txt}{c |}
130. {c |} {res}    123          1      1         1   6090.107   8.920879   682.6802 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
131. {c |} {res}    123          1      4         1   12333.12   18.33054   672.8181 {txt}{c |}
132. {c |} {res}    123          2      1         1   6906.617   42.69689   161.7592 {txt}{c |}
133. {c |} {res}    123          2      4         1   25085.14    109.447   229.1989 {txt}{c |}
134. {c |} {res}    123          2      2         1   22935.11   88.47416   259.2295 {txt}{c |}
135. {c |} {res}    123          2      3         1   23214.84   54.64881   424.8005 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
136. {c |} {res}    123          3      4         1   3401.328   22.35786   152.1312 {txt}{c |}
137. {c |} {res}    123          3      3         1   39192.42   86.50952   453.0417 {txt}{c |}
138. {c |} {res}    123          3      1         1   5028.486   12.91539   389.3405 {txt}{c |}
139. {c |} {res}    123          3      2         1    29201.8   96.01946   304.1237 {txt}{c |}
140. {c |} {res}    123          4      2         1   12075.58    39.7925   303.4638 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
141. {c |} {res}    123          4      4         1   4187.914   3.498721   1196.984 {txt}{c |}
142. {c |} {res}    123          4      1         1   6811.288   40.95889   166.2957 {txt}{c |}
143. {c |} {res}    123          4      3         1   51329.11    102.645   500.0643 {txt}{c |}
144. {c |} {res}    125          1      4         1   13269.36   168.3128   78.83746 {txt}{c |}
145. {c |} {res}    125          1      3         1   26686.71   336.8191   79.23158 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
146. {c |} {res}    125          1      2         1   10905.29   139.8439   77.98186 {txt}{c |}
147. {c |} {res}    125          1      1         1    20310.1   322.3282   63.01062 {txt}{c |}
148. {c |} {res}    125          2      3         1   40327.22   543.5835   74.18772 {txt}{c |}
149. {c |} {res}    125          2      1         1   10878.33   132.2904   82.23067 {txt}{c |}
150. {c |} {res}    125          2      4         1   28044.84   306.6477   91.45622 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
151. {c |} {res}    125          2      2         1   29205.53   439.5852   66.43884 {txt}{c |}
152. {c |} {res}    125          3      1         1   7719.847   107.8986   71.54726 {txt}{c |}
153. {c |} {res}    125          3      4         1    15624.2   224.3097   69.65456 {txt}{c |}
154. {c |} {res}    125          3      3         1   10088.12   157.2965   64.13445 {txt}{c |}
155. {c |} {res}    125          3      2         1   15719.08   228.1121   68.90946 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
156. {c |} {res}    125          4      4         1   39501.82   386.4713   102.2115 {txt}{c |}
157. {c |} {res}    125          4      1         1   26043.83   278.5963   93.48235 {txt}{c |}
158. {c |} {res}    125          4      3         1   72210.77   774.3654   93.25153 {txt}{c |}
159. {c |} {res}    125          4      2         1   24096.16   288.1129   83.63444 {txt}{c |}
160. {c |} {res}    127          1      2         1   16679.69   22.16946   752.3723 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
161. {c |} {res}    127          1      1         1    6911.74   7.638372   904.8708 {txt}{c |}
162. {c |} {res}    127          1      4         1   7398.482   7.891929   937.4744 {txt}{c |}
163. {c |} {res}    127          1      3         1   35782.62   17.76497   2014.224 {txt}{c |}
164. {c |} {res}    127          2      1         1   6340.895   9.259837   684.7739 {txt}{c |}
165. {c |} {res}    127          2      2         1   17787.03   29.50617    602.824 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
166. {c |} {res}    127          2      3         1   36051.68   32.23697   1118.333 {txt}{c |}
167. {c |} {res}    127          2      4         1   4693.995   5.661407   829.1216 {txt}{c |}
168. {c |} {res}    127          3      2         1    14077.9   23.26872   605.0137 {txt}{c |}
169. {c |} {res}    127          3      3         1   24660.41   23.30393   1058.208 {txt}{c |}
170. {c |} {res}    127          3      1         1   6257.468   8.532853   733.3383 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
171. {c |} {res}    127          3      4         1   8321.004   7.638924    1089.29 {txt}{c |}
172. {c |} {res}    127          4      4         1   9813.533   7.246903   1354.169 {txt}{c |}
173. {c |} {res}    127          4      3         1   51423.85     41.469   1240.055 {txt}{c |}
174. {c |} {res}    127          4      2         1   15046.16   20.34563   739.5276 {txt}{c |}
175. {c |} {res}    127          4      1         1   7253.347   9.929506   730.4842 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
176. {c |} {res}    140          1      3         1   23960.85   22.78705   1051.512 {txt}{c |}
177. {c |} {res}    140          1      2         1   39891.63   31.14909   1280.667 {txt}{c |}
178. {c |} {res}    140          1      1         1     161902   300.5081   538.7609 {txt}{c |}
179. {c |} {res}    140          1      4         1   85581.37   85.12599   1005.349 {txt}{c |}
180. {c |} {res}    140          2      1         1   13098.93    9.11168   1437.598 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
181. {c |} {res}    140          2      4         1   15900.28   15.04497    1056.85 {txt}{c |}
182. {c |} {res}    140          2      2         1    46750.7   42.26354   1106.171 {txt}{c |}
183. {c |} {res}    140          2      3         1   26419.59   24.35346   1084.839 {txt}{c |}
184. {c |} {res}    140          3      4         1   28262.17   25.27161   1118.337 {txt}{c |}
185. {c |} {res}    140          3      3         1   3949.273   7.958361    496.242 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
186. {c |} {res}    140          3      1         1   14762.72   18.96679   778.3455 {txt}{c |}
187. {c |} {res}    140          3      2         1   8196.775   6.590785   1243.672 {txt}{c |}
188. {c |} {res}    140          4      1         1   1476.889   .9765226   1512.397 {txt}{c |}
189. {c |} {res}    140          4      4         1   6416.295   4.845619   1324.143 {txt}{c |}
190. {c |} {res}    140          4      2         1   2109.772   .9312524   2265.521 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
191. {c |} {res}    140          4      3         1   1520.557   2.109506   720.8116 {txt}{c |}
192. {c |} {res}    141          1      1         1   39327.19   32.88084   1196.052 {txt}{c |}
193. {c |} {res}    141          1      4         1   140736.5   95.25791   1477.426 {txt}{c |}
194. {c |} {res}    141          1      3         1   157167.6   81.73759   1922.831 {txt}{c |}
195. {c |} {res}    141          1      2         1   46882.37   29.60419    1583.64 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
196. {c |} {res}    141          2      2         1   44040.59    28.9514    1521.19 {txt}{c |}
197. {c |} {res}    141          2      4         1    80079.3   49.44096   1619.695 {txt}{c |}
198. {c |} {res}    141          2      1         1   11767.76   6.594709   1784.424 {txt}{c |}
199. {c |} {res}    141          2      3         1   90901.21   42.62847   2132.406 {txt}{c |}
200. {c |} {res}    141          3      1         1   55588.41   36.36207   1528.747 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
201. {c |} {res}    141          3      4         1   66110.98   45.70781   1446.382 {txt}{c |}
202. {c |} {res}    141          3      2         1   19560.13    15.8244   1236.074 {txt}{c |}
203. {c |} {res}    141          3      3         1      91956   50.35058   1826.314 {txt}{c |}
204. {c |} {res}    141          4      3         1   258604.8   108.6249   2380.715 {txt}{c |}
205. {c |} {res}    141          4      4         1   57307.04   31.20506   1836.466 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
206. {c |} {res}    141          4      1         1   35181.79   26.48932    1328.15 {txt}{c |}
207. {c |} {res}    141          4      2         1   43447.75   20.69524   2099.408 {txt}{c |}
208. {c |} {res}    147          1      2         1   59044.31   27.08213   2180.195 {txt}{c |}
209. {c |} {res}    147          1      3         1   30112.31   13.70485   2197.201 {txt}{c |}
210. {c |} {res}    147          1      4         1    19542.7   8.790923   2223.054 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
211. {c |} {res}    147          1      1         1   38382.07   16.59448   2312.941 {txt}{c |}
212. {c |} {res}    147          2      3         1    44735.3   20.32564    2200.93 {txt}{c |}
213. {c |} {res}    147          2      4         1   15720.01   6.742126    2331.61 {txt}{c |}
214. {c |} {res}    147          2      2         1   47165.81   20.72525   2275.766 {txt}{c |}
215. {c |} {res}    147          2      1         1   15653.06   6.781597   2308.167 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
216. {c |} {res}    147          3      2         1   34514.68   14.66574   2353.422 {txt}{c |}
217. {c |} {res}    147          3      3         1   29986.38   12.68983   2363.024 {txt}{c |}
218. {c |} {res}    147          3      1         1   22747.05   9.878564   2302.668 {txt}{c |}
219. {c |} {res}    147          3      4         1   9350.513   3.925496   2381.995 {txt}{c |}
220. {c |} {res}    147          4      2         1    69414.7   30.70572   2260.644 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
221. {c |} {res}    147          4      1         1   22461.61   9.464099   2373.349 {txt}{c |}
222. {c |} {res}    147          4      3         1   60579.18   25.49772   2375.866 {txt}{c |}
223. {c |} {res}    147          4      4         1   11068.55    4.60249   2404.904 {txt}{c |}
224. {c |} {res}    153          1      2         1   20145.98   37.43933   538.0968 {txt}{c |}
225. {c |} {res}    153          1      1         1   4304.512    2.85301   1508.761 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
226. {c |} {res}    153          1      4         1   15983.09   15.80779   1011.089 {txt}{c |}
227. {c |} {res}    153          1      3         1   27546.25    51.5345   534.5204 {txt}{c |}
228. {c |} {res}    153          2      1         1   4594.598   2.546755   1804.099 {txt}{c |}
229. {c |} {res}    153          2      4         1   9800.777   13.10277   747.9926 {txt}{c |}
230. {c |} {res}    153          2      2         1   24294.25    56.5157   429.8674 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
231. {c |} {res}    153          2      3         1   28714.01   53.60474   535.6617 {txt}{c |}
232. {c |} {res}    153          3      4         1   19314.54   16.82786   1147.771 {txt}{c |}
233. {c |} {res}    153          3      2         1   13806.17   27.70322   498.3598 {txt}{c |}
234. {c |} {res}    153          3      1         1   2160.842   1.870472   1155.239 {txt}{c |}
235. {c |} {res}    153          3      3         1   49231.88   96.46074   510.3826 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
236. {c |} {res}    153          4      3         1   61021.14   125.8182   484.9944 {txt}{c |}
237. {c |} {res}    153          4      4         1   6112.656   4.983305   1226.627 {txt}{c |}
238. {c |} {res}    153          4      2         1   20709.89   73.44278   281.9867 {txt}{c |}
239. {c |} {res}    153          4      1         1   3506.814    4.33482   808.9872 {txt}{c |}
240. {c |} {res}    103          1      4         2   2508.368    9.40638   266.6667 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
241. {c |} {res}    104          1      1         2   6120.233   14.86355   411.7613 {txt}{c |}
242. {c |} {res}    104          1      2         2   535.5482   2.667774   200.7472 {txt}{c |}
243. {c |} {res}    104          1      4         2   3491.378   7.411552   471.0725 {txt}{c |}
244. {c |} {res}    104          1      3         2   285.7143   .3571429        800 {txt}{c |}
245. {c |} {res}    104          2      1         2   2537.385   5.729107   442.8936 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
246. {c |} {res}    104          2      3         2   357.1429   .3571429   999.9999 {txt}{c |}
247. {c |} {res}    104          2      2         2   285.7143   .7142857        400 {txt}{c |}
248. {c |} {res}    104          2      4         2   848.0122    2.12003        400 {txt}{c |}
249. {c |} {res}    104          3      2         2   142.8571   .3571429        400 {txt}{c |}
250. {c |} {res}    104          3      1         2   1833.397   7.363876   248.9718 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
251. {c |} {res}    104          4      1         2   1995.889   13.71969   145.4763 {txt}{c |}
252. {c |} {res}    105          1      4         2   4374.055   20.04286   218.2351 {txt}{c |}
253. {c |} {res}    105          1      1         2   420.4312   1.245013   337.6922 {txt}{c |}
254. {c |} {res}    105          1      3         2   1684.175   3.020988   557.4916 {txt}{c |}
255. {c |} {res}    105          2      4         2   1692.978   5.072966   333.7255 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
256. {c |} {res}    105          2      2         2   285.7143   .4285715   666.6666 {txt}{c |}
257. {c |} {res}    105          2      1         2   819.1058   2.343206   349.5663 {txt}{c |}
258. {c |} {res}    105          2      3         2    2043.96   6.085336   335.8829 {txt}{c |}
259. {c |} {res}    105          3      1         2   3293.028   9.129387   360.7064 {txt}{c |}
260. {c |} {res}    105          3      3         2   3603.399   10.79421   333.8271 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
261. {c |} {res}    105          3      2         2   17729.61   59.40987   298.4286 {txt}{c |}
262. {c |} {res}    105          4      1         2   1919.172    5.21245   368.1899 {txt}{c |}
263. {c |} {res}    105          4      3         2   3553.583   4.277947   830.6749 {txt}{c |}
264. {c |} {res}    107          1      3         2   16775.05   187.8805   89.28571 {txt}{c |}
265. {c |} {res}    107          1      1         2   2078.094   44.53966   46.65716 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
266. {c |} {res}    107          1      2         2   71.42857        1.6   44.64286 {txt}{c |}
267. {c |} {res}    107          1      4         2   8607.268   122.0005   70.55107 {txt}{c |}
268. {c |} {res}    107          2      4         2   636.0902    5.99579   106.0895 {txt}{c |}
269. {c |} {res}    107          2      3         2   2632.926   30.11166   87.43876 {txt}{c |}
270. {c |} {res}    107          2      1         2   717.2596   8.033308   89.28571 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
271. {c |} {res}    107          3      3         2   285.7143        3.2   89.28571 {txt}{c |}
272. {c |} {res}    107          3      1         2   285.7143        3.2   89.28571 {txt}{c |}
273. {c |} {res}    107          3      2         2   3113.452   34.49185   90.26631 {txt}{c |}
274. {c |} {res}    107          4      3         2   966.3544   18.19606    53.1079 {txt}{c |}
275. {c |} {res}    107          4      1         2    1363.41   13.67562   99.69639 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
276. {c |} {res}    108          1      1         2   13251.01   13.25101   999.9999 {txt}{c |}
277. {c |} {res}    108          1      3         2   15005.76    12.5048       1200 {txt}{c |}
278. {c |} {res}    108          1      2         2   71.42857   .0714286       1000 {txt}{c |}
279. {c |} {res}    108          1      4         2   468.0804   .9441965   495.7447 {txt}{c |}
280. {c |} {res}    108          2      4         2   473.2844   .5418977   873.3832 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
281. {c |} {res}    108          2      2         2       1000          1       1000 {txt}{c |}
282. {c |} {res}    108          2      3         2   20668.58   31.40955   658.0349 {txt}{c |}
283. {c |} {res}    108          3      3         2   6647.302   16.10399   412.7737 {txt}{c |}
284. {c |} {res}    108          3      1         2   1163.922   1.163922   999.9999 {txt}{c |}
285. {c |} {res}    108          3      2         2   10805.18   13.37222   808.0315 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
286. {c |} {res}    108          4      3         2   9726.348    12.0963   804.0764 {txt}{c |}
287. {c |} {res}    108          4      1         2   171.4286   .2857143        600 {txt}{c |}
288. {c |} {res}    113          1      3         2    12144.7   9.655096   1257.854 {txt}{c |}
289. {c |} {res}    113          1      2         2   92.85714   .0714286       1300 {txt}{c |}
290. {c |} {res}    113          1      4         2   5845.635   4.739469   1233.395 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
291. {c |} {res}    113          1      1         2   19584.66   16.16435   1211.596 {txt}{c |}
292. {c |} {res}    113          2      4         2   603.4182   .3915974   1540.915 {txt}{c |}
293. {c |} {res}    113          2      2         2   6839.245   5.699371       1200 {txt}{c |}
294. {c |} {res}    113          2      1         2   1309.067   .8506197   1538.957 {txt}{c |}
295. {c |} {res}    113          2      3         2   12196.47   11.85967   1028.399 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
296. {c |} {res}    113          3      2         2    17164.4   15.31403   1120.829 {txt}{c |}
297. {c |} {res}    113          3      3         2   457.1429   .2857143       1600 {txt}{c |}
298. {c |} {res}    113          3      1         2    9885.33   6.315544   1565.238 {txt}{c |}
299. {c |} {res}    113          4      3         2   1747.899   1.747899       1000 {txt}{c |}
300. {c |} {res}    113          4      1         2   17735.16   12.66842    1399.95 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
301. {c |} {res}    116          1      3         2   1430.769    1.32967   1076.033 {txt}{c |}
302. {c |} {res}    116          2      3         2   2711.378   2.576645    1052.29 {txt}{c |}
303. {c |} {res}    116          3      2         2   1589.793   2.418428   657.3664 {txt}{c |}
304. {c |} {res}    116          3      3         2   5373.091   8.993091   597.4688 {txt}{c |}
305. {c |} {res}    116          4      3         2    258.268   .6045005    427.242 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
306. {c |} {res}    117          1      3         2   4090.065   .8180131       5000 {txt}{c |}
307. {c |} {res}    117          1      1         2   2635.065    .527013       5000 {txt}{c |}
308. {c |} {res}    117          1      4         2   1214.286   .2428572       5000 {txt}{c |}
309. {c |} {res}    117          2      4         2   2317.435   .5714286    4055.51 {txt}{c |}
310. {c |} {res}    117          2      1         2   1071.429   .2142857       5000 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
311. {c |} {res}    117          2      3         2   5691.337   1.372547    4146.55 {txt}{c |}
312. {c |} {res}    117          3      2         2   9845.618   2.232462   4410.207 {txt}{c |}
313. {c |} {res}    117          3      1         2   1025.392   .2050785       5000 {txt}{c |}
314. {c |} {res}    117          3      3         2   2075.045   .5007234   4144.095 {txt}{c |}
315. {c |} {res}    117          4      1         2   964.2857   .2142857       4500 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
316. {c |} {res}    117          4      3         2   1428.571   .2857143       5000 {txt}{c |}
317. {c |} {res}    123          1      1         2   1550.586   31.27995   49.57126 {txt}{c |}
318. {c |} {res}    123          1      2         2   71.42857   .9571429   74.62687 {txt}{c |}
319. {c |} {res}    123          1      4         2   1579.592   1.057143   1494.208 {txt}{c |}
320. {c |} {res}    123          1      3         2   2151.918   1.347288   1597.222 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
321. {c |} {res}    123          2      3         2   4098.149   1.972387   2077.761 {txt}{c |}
322. {c |} {res}    123          2      1         2   1028.571   1.285714        800 {txt}{c |}
323. {c |} {res}    123          2      2         2   428.5714   1.928571   222.2222 {txt}{c |}
324. {c |} {res}    123          2      4         2   357.1429   .9571429   373.1343 {txt}{c |}
325. {c |} {res}    123          3      2         2   2819.977   7.730679   364.7773 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
326. {c |} {res}    123          3      3         2   285.7143   .5714286        500 {txt}{c |}
327. {c |} {res}    123          3      1         2   1458.296   .8042824   1813.164 {txt}{c |}
328. {c |} {res}    123          4      1         2   449.2443   8.105121   55.42721 {txt}{c |}
329. {c |} {res}    123          4      3         2   4199.864   1.743397   2409.012 {txt}{c |}
330. {c |} {res}    125          1      3         2   257.1429   3.820408   67.30769 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
331. {c |} {res}    125          1      2         2   114.2857   1.485714   76.92307 {txt}{c |}
332. {c |} {res}    125          1      4         2   940.1792    8.60183   109.2999 {txt}{c |}
333. {c |} {res}    125          1      1         2   2325.994   38.95246   59.71365 {txt}{c |}
334. {c |} {res}    125          2      1         2   179.1664     1.3845   129.4087 {txt}{c |}
335. {c |} {res}    125          2      2         2    249.235   3.645751   68.36314 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
336. {c |} {res}    125          2      4         2   1220.941   10.94447   111.5578 {txt}{c |}
337. {c |} {res}    125          2      3         2   715.6647   7.398276   96.73397 {txt}{c |}
338. {c |} {res}    125          3      2         2    2854.26    30.6571   93.10271 {txt}{c |}
339. {c |} {res}    125          3      3         2        500        5.2   96.15385 {txt}{c |}
340. {c |} {res}    125          3      1         2   842.2297   8.619601   97.71098 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
341. {c |} {res}    125          4      1         2   1226.539   9.053708   135.4737 {txt}{c |}
342. {c |} {res}    127          1      4         2   580.0447   .5570122    1041.35 {txt}{c |}
343. {c |} {res}    127          1      3         2   1934.608   1.786799   1082.723 {txt}{c |}
344. {c |} {res}    127          1      2         2        300        .45   666.6666 {txt}{c |}
345. {c |} {res}    127          1      1         2   2884.152   2.002804   1440.057 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
346. {c |} {res}    127          2      2         2   250.0653   .3622915   690.2324 {txt}{c |}
347. {c |} {res}    127          2      1         2   743.8151   .7300725   1018.824 {txt}{c |}
348. {c |} {res}    127          2      4         2   208.0351   .1996654   1041.919 {txt}{c |}
349. {c |} {res}    127          2      3         2   4584.141   3.139887    1459.97 {txt}{c |}
350. {c |} {res}    127          3      2         2   2924.778   5.318935   549.8803 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
351. {c |} {res}    127          3      1         2   4112.022   4.537652   906.2004 {txt}{c |}
352. {c |} {res}    127          3      3         2   2920.459   1.000011   2920.426 {txt}{c |}
353. {c |} {res}    127          4      1         2   788.6249   1.158849   680.5245 {txt}{c |}
354. {c |} {res}    127          4      3         2   1459.337   .8907088     1638.4 {txt}{c |}
355. {c |} {res}    140          1      1         2   142.8571   .0285714       5000 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
356. {c |} {res}    140          1      4         2   3582.324   2.538187   1411.371 {txt}{c |}
357. {c |} {res}    140          2      3         2   176.0359   .2033807   865.5487 {txt}{c |}
358. {c |} {res}    140          2      1         2   142.8571   .0357143       4000 {txt}{c |}
359. {c |} {res}    140          2      4         2   2562.819   1.100562   2328.645 {txt}{c |}
360. {c |} {res}    140          3      2         2   328.9343   .1218564    2699.36 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
361. {c |} {res}    140          3      1         2   547.8364   .3633339   1507.804 {txt}{c |}
362. {c |} {res}    140          4      1         2   142.8571   .0142857      10000 {txt}{c |}
363. {c |} {res}    140          4      3         2   142.8571   .1785714        800 {txt}{c |}
364. {c |} {res}    141          1      2         2   57.14286   .0714286   799.9999 {txt}{c |}
365. {c |} {res}    141          1      1         2   21528.57   12.76519   1686.506 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
366. {c |} {res}    141          1      4         2   7273.269    5.66775   1283.273 {txt}{c |}
367. {c |} {res}    141          1      3         2   6709.831   2.800662   2395.802 {txt}{c |}
368. {c |} {res}    141          2      1         2   732.7731   .3445378   2126.829 {txt}{c |}
369. {c |} {res}    141          2      3         2   6718.463   3.846778   1746.517 {txt}{c |}
370. {c |} {res}    141          2      2         2   71.42857   .0714286       1000 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
371. {c |} {res}    141          2      4         2        100   .0285714       3500 {txt}{c |}
372. {c |} {res}    141          3      2         2   3687.676   2.160006   1707.253 {txt}{c |}
373. {c |} {res}    141          3      1         2   1567.953   1.192073   1315.316 {txt}{c |}
374. {c |} {res}    141          3      3         2   1717.093   .8061952   2129.873 {txt}{c |}
375. {c |} {res}    141          4      1         2   1816.492   1.227913   1479.332 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
376. {c |} {res}    141          4      3         2   1359.096   .6358013   2137.612 {txt}{c |}
377. {c |} {res}    147          1      4         2   3620.752   1.515476   2389.185 {txt}{c |}
378. {c |} {res}    147          1      3         2   4174.301    2.12245   1966.736 {txt}{c |}
379. {c |} {res}    147          1      2         2   365.9271    .240176   1523.579 {txt}{c |}
380. {c |} {res}    147          1      1         2   13223.04   6.078053   2175.538 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
381. {c |} {res}    147          2      4         2   3114.477   1.297339   2400.665 {txt}{c |}
382. {c |} {res}    147          2      1         2   1981.565   .8926306   2219.917 {txt}{c |}
383. {c |} {res}    147          2      3         2   7708.779   3.502473   2200.953 {txt}{c |}
384. {c |} {res}    147          2      2         2    479.486   .2179482       2200 {txt}{c |}
385. {c |} {res}    147          3      1         2   5527.384   2.390556   2312.175 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
386. {c |} {res}    147          3      2         2    6216.12   2.700859   2301.534 {txt}{c |}
387. {c |} {res}    147          3      3         2   1994.523   .8317263   2398.052 {txt}{c |}
388. {c |} {res}    147          4      3         2   2064.228   .9402248   2195.462 {txt}{c |}
389. {c |} {res}    147          4      1         2   3176.027   1.470229   2160.225 {txt}{c |}
390. {c |} {res}    153          1      4         2   1342.131   1.519203    883.444 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
391. {c |} {res}    153          1      1         2   142.8571   .0285714       5000 {txt}{c |}
392. {c |} {res}    153          2      3         2   1290.582   4.441609   290.5663 {txt}{c |}
393. {c |} {res}    153          3      1         2   571.4286   .3809524       1500 {txt}{c |}
394. {c |} {res}    153          3      2         2   402.2241   .0863533   4657.891 {txt}{c |}
395. {c |} {res}    153          3      3         2       3000   3.127268   959.3039 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
396. {c |} {res}    153          4      1         2   285.7143   .2057143   1388.889 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.                         tempfile uvq2;
{txt}
{com}.                         keep reg_tpi product survquar ppkg_trim;
{txt}
{com}.                 save `uvq2', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000e.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000e.tmp saved

{com}.                                 use `uvq' ;
{txt}
{com}.                         merge reg_tpi product survquar using `uvq2';
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
product
survquar
do not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt}s{txt} reg_tpi
product
survquar
do not uniquely identify observations in
C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000e.tmp
{p_end}
(label lsurvquar already defined)

{com}.                         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        398      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        398      100.00
{txt}
{com}.                         drop _merge;
{txt}
{com}.                 save `uvq', replace;
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000c.tmp saved

{com}.                 save "$path/work/tpi_unit_val_quarterly.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_quarterly.dta saved

{com}.         restore;
{txt}
{com}. **************************************************************************;
. * Now calculate the weights for the temporal price index. The weights
> * will be based on the bottom 50% of the national nominal consumption
> * per capita (see below). We let the weights vary by strata (3 regions X rural/urban).
> *
> * First, make a small file that has the total nominal HH daily consumption,
> * to use as our denominator. We cannot simply use the `bottom_tpi' file that
> * was created earlier because we will need some other variables from
> * the cons_cat.dta file.
> **************************************************************************;
. use "$path\work\conpc.dta", clear;
{txt}
{com}. keep hhid cons_hh_nom;
{txt}
{com}. *use "$path/in/cons_cat.dta", clear ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;
{txt}
{com}.         merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.           tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         collapse (mean) cons_hh_nom hhsize strata hhweight rural news survquar reg_tpi,
>                 by(hhid);
{txt}
{com}.         lab var cons_hh_nom "Nominal daily HH consumption";
{txt}
{com}.         rename hhsize   cc_hhs;
{txt}
{com}.         rename strata   cc_reg;
{txt}
{com}.         rename hhweight cc_hhw;
{txt}
{com}.         rename rural    cc_rur;
{txt}
{com}.         rename news     cc_news;
{txt}
{com}.         rename survquar cc_qua;
{txt}
{com}.         rename reg_tpi  cc_reg_tpi;
{txt}
{com}.         sort hhid;
{txt}
{com}.         tempfile thhcons;
{txt}
{com}. save `thhcons', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000f.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000f.tmp saved

{com}. **************************************************************************;
. * Merge the file with consumption on the food products with HH consumption file,
> * then use "fillin" to take care of cases where a household did not
> * consume all n_tpi commodities. Note that we need to do the merge
> * first because there are some households that are not in `acredd' at
> * all, because they did not consume *any* of the n_tpi items. Then replace
> * missing values in the "filled in" observations with the relevant values 
> * for that household.
> **************************************************************************;
. use `acredd';
{txt}
{com}.         cap drop _merge;
{txt}
{com}.         drop if product==.;
{txt}(315 observations deleted)

{com}.         merge hhid using `thhcons';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        315        0.91        0.91
{txt}          3 {c |}{res}     34,236       99.09      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,551      100.00
{txt}
{com}.         for var valued_tot quantityd_tot : replace X=0 if _merge==2;

{res}->  replace valued_tot=0 if _merge==2
{txt}(315 real changes made)

{res}->  replace quantityd_tot=0 if _merge==2
{txt}(315 real changes made)

{com}.                 /*
>         for var valued_ac quantityd_ac valued_re quantityd_re valued_dd quantityd_dd 
>                 valued_tot quantityd_tot : replace X=0 if _merge==2;
>                                 */
> 
>         replace hhsize  =cc_hhs     if _merge==2;
{txt}(315 real changes made)

{com}.         replace strata  =cc_reg     if _merge==2;
{txt}(315 real changes made)

{com}.         replace hhweight=cc_hhw     if _merge==2;
{txt}(315 real changes made)

{com}.         replace rural   =cc_rur     if _merge==2;
{txt}(315 real changes made)

{com}.         replace news    =cc_news        if _merge==2;
{txt}(315 real changes made)

{com}.         replace survquar=cc_qua     if _merge==2;
{txt}(315 real changes made)

{com}.         replace reg_tpi =cc_reg_tpi     if _merge==2;
{txt}(315 real changes made)

{com}.         drop _merge cc_* ;
{txt}
{com}.                 fillin hhid product;
{txt}
{com}.         replace valued_tot=0 if _fillin;
{txt}(73849 real changes made)

{com}.                 for var quantityd_tot 
>                 strata rural hhweight hhsize survquar survmon news reg_tpi cons_hh_nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;

{res}->  egen tmp=mean(quantityd_tot), by(hhid)

->  replace quantityd_tot=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(strata), by(hhid)

->  replace strata=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(rural), by(hhid)

->  replace rural=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(hhweight), by(hhid)

->  replace hhweight=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(hhsize), by(hhid)

->  replace hhsize=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(survquar), by(hhid)

->  replace survquar=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(survmon), by(hhid)
{txt}(5040 missing values generated)

{res}->  replace survmon=tmp if _fillin
{txt}(69124 real changes made)

{res}->  drop tmp

->  egen tmp=mean(news), by(hhid)

->  replace news=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(reg_tpi), by(hhid)

->  replace reg_tpi=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(cons_hh_nom), by(hhid)

->  replace cons_hh_nom=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp
{txt}
{com}.                                 /*
>         for var valued_ac quantityd_ac valued_re quantityd_re valued_dd quantityd_dd 
>                 quantityd_tot 
>                 strata rural hhweight hhsize survquar survmon news reg_tpi cons_hh_nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;
>                                 */
> 
> **************************************************************************;
. * Now calculate the shares, and then the mean shares in each strata, 
> * using hhweight*hhsize weighting. 
> * Note that we are not doing quantity weighting now for the shares.
> **************************************************************************;
.         gen share = valued_tot/cons_hh_nom ;
{txt}
{com}.         gen popwt = hhsize*hhweight;
{txt}
{com}.         lab var share "HH share in total consumption";
{txt}
{com}.         lab var popwt "Population weight: hhsize*hhweight";
{txt}
{com}. **************************************************************************;
. * Select the bottom 50% (weighted) of the distribution of nominal per 
> * capita consumption.
> **************************************************************************;
.         gen cpc=cons_hh_nom/hhsize;
{txt}
{com}.         sum cpc [aw=hhweight] , detail;

                             {txt}cpc
{hline 61}
      Percentiles      Smallest
 1%    {res} 341.2898       78.55932
{txt} 5%    {res} 695.3857       78.55932
{txt}10%    {res} 897.8539       78.55932       {txt}Obs         {res}     108400
{txt}25%    {res} 1376.486       78.55932       {txt}Sum of Wgt. {res}  491413216

{txt}50%    {res} 2259.297                      {txt}Mean          {res} 10464.25
                        {txt}Largest       Std. Dev.     {res} 451462.1
{txt}75%    {res} 4217.707       8.12e+07
{txt}90%    {res} 9842.667       8.12e+07       {txt}Variance      {res} 2.04e+11
{txt}95%    {res} 19766.71       8.12e+07       {txt}Skewness      {res} 177.7597
{txt}99%    {res} 111655.2       8.12e+07       {txt}Kurtosis      {res} 31946.76
{txt}
{com}.         global medcpc=r(p$tpi_bottom);
{txt}
{com}. * MAH ;
.  sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}    108400    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}    101625    121.9333    16.00619        103        153
{txt}{space 2}valued_tot {c |}{res}    108400    182.6271    481.8536          0      12000
{txt}quantityd_~t {c |}{res}    108400      1.4749     3.25775          0   364.2857
{txt}{space 6}strata {c |}{res}    108400    5.551734    2.873473          1         10
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}    108400        4.96    2.758379          1         24
{txt}{space 4}hhweight {c |}{res}    108400    4533.332    4303.944         54      92511
{txt}{space 4}survquar {c |}{res}    108400    2.499336    1.143945          1          4
{txt}{space 5}survmon {c |}{res}    103360    6.719814    3.353746          1         12
{txt}{space 7}rural {c |}{res}    108400    .8199262    .3842507          0          1
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}    108400    2.416827    1.118312          1          4
{txt}{space 5}reg_tpi {c |}{res}    108400    1.180074    .3842507          1          2
{txt}{space 4}spdomain {c |}{res}     34236    3.202126    1.379049          1          5
{txt}{space 1}cons_hh_nom {c |}{res}    108400    97487.28     4938154   232.1918   4.06e+08
{txt}{space 5}_fillin {c |}{res}    108400    .6812638    .4659887          0          1
{txt}{hline 13}{c +}{hline 56}
{space 7}share {c |}{res}    108400    .0152195    .0411734          0   .7534428
{txt}{space 7}popwt {c |}{res}    108400    29614.26    44552.43         62     832599
{txt}{space 9}cpc {c |}{res}    108400    20773.97      987328   78.55932   8.12e+07
{txt}
{com}.  codebook hhid;

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}108400

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}.         keep if cpc<=$medcpc;
{txt}(57072 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     51328    2.81e+09    9.50e+08   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     48120    121.9333    16.00628        103        153
{txt}{space 2}valued_tot {c |}{res}     51328    144.5371    402.5764          0       9000
{txt}quantityd_~t {c |}{res}     51328    1.488656     3.31426          0        362
{txt}{space 6}strata {c |}{res}     51328    6.332606    2.333378          1         10
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}     51328    5.628741    2.566767          1         24
{txt}{space 4}hhweight {c |}{res}     51328    4789.738    4259.487        100      60164
{txt}{space 4}survquar {c |}{res}     51328    2.546135    1.163029          1          4
{txt}{space 5}survmon {c |}{res}     49024    6.838773     3.45944          1         12
{txt}{space 7}rural {c |}{res}     51328    .9466958    .2246417          0          1
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}     51328    2.703865    .9463027          1          4
{txt}{space 5}reg_tpi {c |}{res}     51328    1.053304    .2246417          1          2
{txt}{space 4}spdomain {c |}{res}     14268    3.522638    1.217835          1          5
{txt}{space 1}cons_hh_nom {c |}{res}     51328    7198.385    4750.943   232.1918   53180.82
{txt}{space 5}_fillin {c |}{res}     51328    .7192176    .4493858          0          1
{txt}{hline 13}{c +}{hline 56}
{space 7}share {c |}{res}     51328    .0198654    .0515374          0   .7534428
{txt}{space 7}popwt {c |}{res}     51328    33070.38    43851.13        100     782132
{txt}{space 9}cpc {c |}{res}     51328    1292.952    550.5071   78.55932   2259.297
{txt}
{com}.                 collapse (mean) share (median) medshare=share [aw=popwt] , 
>                         by(reg_tpi product);
{txt}
{com}.                 egen sumsh=sum(share) , by(reg_tpi);
{txt}
{com}.                 replace share=share/sumsh;
{txt}(30 real changes made)

{com}.                 drop sumsh;
{txt}
{com}.                 egen sumsh=sum(medshare) , by(reg_tpi);
{txt}
{com}.                 replace medshare=medshare/sumsh;
{txt}(7 real changes made)

{com}.                 drop sumsh;
{txt}
{com}.                 lab var share "Reg 6: Mean HH share of total consumption";
{txt}
{com}.                 lab var medshare "Reg 6: Median HH share of total consumption";
{txt}
{com}.                 sort reg_tpi product;
{txt}
{com}.                 save "$path/work/tpi_reg_tpi_share.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_reg_tpi_share.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_reg_tpi_share.dta saved

{com}.                 tempfile tempwt6;
{txt}
{com}.                 save `tempwt6', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000g.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000g.tmp saved

{com}. use `uvq', clear;
{txt}
{com}.         sort reg_tpi product;
{txt}
{com}. save , replace;
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000c.tmp saved

{com}. use `tempwt6';
{txt}
{com}.         merge reg_tpi product using `uvq';
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
product
do not uniquely identify observations in
C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000c.tmp
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          2        0.50        0.50
{txt}          3 {c |}{res}        398       99.50      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        400      100.00
{txt}
{com}.         gen tpi1     =ppkg     *share;
{txt}(2 missing values generated)

{com}.         gen tpi1_trim=ppkg_trim*share;
{txt}(2 missing values generated)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}       398    122.1935    15.72786        103        153
{txt}{space 5}reg_tpi {c |}{res}       400         1.4    .4905115          1          2
{txt}{space 7}share {c |}{res}       400    .0702878     .046569          0   .1900794
{txt}{space 4}medshare {c |}{res}       400       .0725     .155438          0   .6375976
{txt}{space 4}survquar {c |}{res}       398    2.399497     1.09898          1          4
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}       398    2.422111    1.114463          1          4
{txt}{space 2}valued_tot {c |}{res}       398    19488.69    29216.17   42.85714   194922.5
{txt}quantityd_~t {c |}{res}       398    56.49364    147.7743   .0142857   1890.576
{txt}{space 8}ppkg {c |}{res}       398    1216.895    1243.777   44.64286      10000
{txt}{space 3}ppkg_trim {c |}{res}       398    1161.909     1242.34   44.64286      10000
{txt}{hline 13}{c +}{hline 56}
{space 6}_merge {c |}{res}       400        2.99     .141244          1          3
{txt}{space 8}tpi1 {c |}{res}       398     80.5499    84.08219   1.570198   330.8668
{txt}{space 3}tpi1_trim {c |}{res}       398    79.27789    85.54509   1.570198   336.9185
{txt}
{com}. keep if survquar!=.;
{txt}(2 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}       398    122.1935    15.72786        103        153
{txt}{space 5}reg_tpi {c |}{res}       398    1.399497    .4904116          1          2
{txt}{space 7}share {c |}{res}       398    .0706411    .0464175   .0058882   .1900794
{txt}{space 4}medshare {c |}{res}       398    .0728643    .1557436          0   .6375976
{txt}{space 4}survquar {c |}{res}       398    2.399497     1.09898          1          4
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}       398    2.422111    1.114463          1          4
{txt}{space 2}valued_tot {c |}{res}       398    19488.69    29216.17   42.85714   194922.5
{txt}quantityd_~t {c |}{res}       398    56.49364    147.7743   .0142857   1890.576
{txt}{space 8}ppkg {c |}{res}       398    1216.895    1243.777   44.64286      10000
{txt}{space 3}ppkg_trim {c |}{res}       398    1161.909     1242.34   44.64286      10000
{txt}{hline 13}{c +}{hline 56}
{space 6}_merge {c |}{res}       398           3           0          3          3
{txt}{space 8}tpi1 {c |}{res}       398     80.5499    84.08219   1.570198   330.8668
{txt}{space 3}tpi1_trim {c |}{res}       398    79.27789    85.54509   1.570198   336.9185
{txt}
{com}. list in  1/3;

     {txt}{c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 12}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
  1. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}   survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    103 {txt}{c |} {res}      1 {txt}{c |} {res}.0428535 {txt}{c |} {res}       0 {txt}{c |} {res}May-Jul 09 {txt}{c |} {res}   2 {txt}{c |} {res}13192.56 {txt}{c |} {res}35.69681 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res}369.5725    {txt}{c |}    {res}273.8158    {txt}{c |}    {res}     3    {txt}{c |}    {res}15.83747    {txt}{c |}    {res}11.73396     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

     {c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 12}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
  2. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}   survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    104 {txt}{c |} {res}      1 {txt}{c |} {res}.0414874 {txt}{c |} {res}       0 {txt}{c |} {res}May-Jul 09 {txt}{c |} {res}   1 {txt}{c |} {res}29804.94 {txt}{c |} {res}42.18252 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res} 706.571    {txt}{c |}    {res}750.0153    {txt}{c |}    {res}     3    {txt}{c |}    {res}29.31377    {txt}{c |}    {res}31.11616     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

     {c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 12}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
  3. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}   survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    105 {txt}{c |} {res}      1 {txt}{c |} {res}.1434704 {txt}{c |} {res}       0 {txt}{c |} {res}May-Jul 09 {txt}{c |} {res}   4 {txt}{c |} {res} 59033.3 {txt}{c |} {res} 300.496 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res}196.4529    {txt}{c |}    {res}235.3222    {txt}{c |}    {res}     3    {txt}{c |}    {res}28.18517    {txt}{c |}    {res}33.76177     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

{com}. list in -3/-1;

     {txt}{c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 13}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
396. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}    survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    153 {txt}{c |} {res}      2 {txt}{c |} {res}.0089337 {txt}{c |} {res}       0 {txt}{c |} {res}Nov09-Jan10 {txt}{c |} {res}   1 {txt}{c |} {res}571.4286 {txt}{c |} {res}.3809524 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 6}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1     {c |}    tpi1_t~m     {c |}
     {c |}    {res}    1500    {txt}{c |}    {res}4657.891    {txt}{c |}    {res}     3    {txt}{c |}    {res}13.40056     {txt}{c |}    {res}41.61224     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 17}{c BT}{hline 17}{c BRC}

     {c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 13}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
397. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}    survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    153 {txt}{c |} {res}      2 {txt}{c |} {res}.0089337 {txt}{c |} {res}       0 {txt}{c |} {res}Nov09-Jan10 {txt}{c |} {res}   2 {txt}{c |} {res}460.7944 {txt}{c |} {res}.0835521 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 6}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1     {c |}    tpi1_t~m     {c |}
     {c |}    {res}5515.057    {txt}{c |}    {res}959.3039    {txt}{c |}    {res}     3    {txt}{c |}    {res}49.26991     {txt}{c |}    {res}8.570142     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 17}{c BT}{hline 17}{c BRC}

     {c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 13}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
398. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}    survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    153 {txt}{c |} {res}      2 {txt}{c |} {res}.0089337 {txt}{c |} {res}       0 {txt}{c |} {res} Feb-Apr 10 {txt}{c |} {res}   1 {txt}{c |} {res}285.7143 {txt}{c |} {res}.2057143 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 6}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1     {c |}    tpi1_t~m     {c |}
     {c |}    {res}1388.889    {txt}{c |}    {res}1388.889    {txt}{c |}    {res}     3    {txt}{c |}    {res}12.40793     {txt}{c |}    {res}12.40793     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 17}{c BT}{hline 17}{c BRC}

{com}.         **************************************************************************;
. * Find TPI level and indexes for non-trimmed and trimmed prices
> **************************************************************************;
. * Not trimmed ;
.         collapse (sum) tpi1 tpi1_trim  , by(reg_tpi survquar);
{txt}
{com}.                 for num 1/$n_tpi :
>                         sum tpi1 if reg_tpi==X & survquar==2 , meanonly \
>                         sum tpi1 if reg_tpi==X & survquar==4 , meanonly \
>                         global baseX=r(mean);

{res}->  sum tpi1 if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1 if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)
{txt}
{com}.                 lab var tpi1 "Temporal price index before normalization";
{txt}
{com}.                                 foreach v of numlist 1/$n_tpi {c -(} ;
{txt}  2{com}.                                         if `v'==1 {c -(} ;
{txt}  3{com}.                                                 gen tpi=tpi1/${c -(}base`v'{c )-} if reg_tpi==`v' ;
{txt}  4{com}.                                         {c )-} ;
{txt}  5{com}.                                         if `v'>1 {c -(} ;
{txt}  6{com}.                                                 replace tpi=tpi1/${c -(}base`v'{c )-} if reg_tpi==`v' ;
{txt}  7{com}.                                         {c )-} ;
{txt}  8{com}.                                 {c )-} ;
{txt}(4 missing values generated)
(4 real changes made)

{com}.                                                                                                 *gen     tpi=tpi1/$base1 if reg_tpi==1;
.                 *replace tpi=tpi1/$base2 if reg_tpi==2;
.                 *replace tpi=tpi1/$base3 if reg_tpi==3;
.                 *replace tpi=tpi1/$base4 if reg_tpi==4;
.                 *replace tpi=tpi1/$base5 if reg_tpi==5;
.                 *replace tpi=tpi1/$base6 if reg_tpi==6;
.                                                                                 lab var tpi "Temporal price index (Q4=1)";
{txt}
{com}. * Trimmed ;
.                 for num 1/$n_tpi :
>                         sum tpi1_trim if reg_tpi==X & survquar==2 , meanonly \
>                         sum tpi1_trim if reg_tpi==X & survquar==4 , meanonly \
>                         global baseX=r(mean);

{res}->  sum tpi1_trim if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1_trim if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)
{txt}
{com}.                 lab var tpi1_trim "Six regions: TRIMMED Temporal price index before normalization";
{txt}
{com}.                                 foreach v of numlist 1/$n_tpi {c -(} ;
{txt}  2{com}.                                         if `v'==1 {c -(} ;
{txt}  3{com}.                                                 gen tpi_trim=tpi1_trim/${c -(}base`v'{c )-} if reg_tpi==`v' ;
{txt}  4{com}.                                         {c )-} ;
{txt}  5{com}.                                         if `v'>1 {c -(} ;
{txt}  6{com}.                                                 replace tpi_trim=tpi1_trim/${c -(}base`v'{c )-} if reg_tpi==`v' ;
{txt}  7{com}.                                         {c )-} ;
{txt}  8{com}.                                 {c )-} ;
{txt}(4 missing values generated)
(4 real changes made)

{com}.                                                 lab var tpi_trim "TRIMMED Temporal price index (Q4=1)";
{txt}
{com}.                 sort reg_tpi survquar;
{txt}
{com}.             drop if reg_tpi<1 | reg_tpi>$n_tpi;
{txt}(0 observations deleted)

{com}. gen tpi_diff = tpi - tpi_trim;
{txt}
{com}. lab var tpi_diff "TPI difference btw trimmed/untrimmed";
{txt}
{com}. twoway (connected tpi_trim survquar),yline(1) by(, title("TPI: Trimmed"))
> by(reg_tpi) sav("$path/work/reg_tpi-tpi_trim", replace);
{res}{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/reg_tpi-tpi_trim.gph not found)
{res}{txt}(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/reg_tpi-tpi_trim.gph saved)

{com}. graph export "$path/work/reg_tpi-tpi_trim.tif", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/reg_tpi-tpi_trim.tif not found)
(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/reg_tpi-tpi_trim.tif written in TIFF format)

{com}. list reg_tpi survquar tpi tpi_trim tpi_diff;
{txt}
     {c TLC}{hline 9}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c TRC}
     {c |} {res}reg_tpi      survquar        tpi   tpi_trim    tpi_diff {txt}{c |}
     {c LT}{hline 9}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c RT}
  1. {c |} {res}      1    May-Jul 09   .9627066   .9580296     .004677 {txt}{c |}
  2. {c |} {res}      1   Sept-Oct 09   1.067421   1.005921    .0615005 {txt}{c |}
  3. {c |} {res}      1   Nov09-Jan10    1.01604   .9845449     .031495 {txt}{c |}
  4. {c |} {res}      1    Feb-Apr 10          1          1           0 {txt}{c |}
  5. {c |} {res}      2    May-Jul 09   1.723915   1.712407    .0115073 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c RT}
  6. {c |} {res}      2   Sept-Oct 09   1.722894   1.796995   -.0741012 {txt}{c |}
  7. {c |} {res}      2   Nov09-Jan10   1.381938   1.426216   -.0442778 {txt}{c |}
  8. {c |} {res}      2    Feb-Apr 10          1          1           0 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c BRC}

{com}.                 sort reg_tpi survquar;
{txt}
{com}. keep reg_tpi survquar tpi_trim;
{txt}
{com}. save "$path/work/temp_index_reg_tpi.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/temp_index_reg_tpi.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/temp_index_reg_tpi.dta saved

{com}.                        **************************************************************************
> * 090_temp_index.do     (end)
> **************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/100_food_basket_flex.do"  /* Flexible food basket */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/100_food_basket_flex.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/100_food_basket_flex.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/100_food_basket_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:55
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 100_food_basket_flex.do     (start)
> *
> * This file is to get the data from the cons_cod.dta in work and then 
> * to create the do file with the 90% of the consumption expenditures 
> * using a flexible basket of goods.
> *
> * NOTE: we actually keep goods representing 95% of expenditure
> * in order to facilitate dropping of some goods (such as rats) where
> * quantity and nutrition information is unknown.
> *
> * We base our basket on the bottom 60 percent of consumption per capita
> * (weighted by hhweight*hhsize). We use the TEMPORALLY-ADJUSTED
> * NOMINAL consumption because we don't have a spatial adjustment yet.
> *
> * (Then we iterate this process to arrive at a final food bundle in later code)
> **************************************************************************;
. *CA modified to bring in hhdata into bootstrap;
. /*
> This file uses:
>                 work\cons_cod.dta
>                 work\hhdata.dta
>                 work\products.dta
>                 work/consump_nom.dta
>                 work/temp_index_reg_tpi.dta
>                 work/food_cat.dta
> 
> This file creates:
>                 work\food_basket_flex.dta
>                 work\codes_food_basket_flex.dta
> */
> 
> 
> 
> *do "$path/new/010_initial.do";
. **************************************************************************;
. * First, make a small temp file that has the temporally adjusted 
> * nominal consumption per capita, using work/consump_nom and 
> * work/temp_index_reg_tpi.dta. Make a dummy variable indicating
> * whether they are in the bottom 60%.
> **************************************************************************;
. use "$path/work/conpc.dta", clear;
{txt}
{com}. *use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work\hhdata.dta for bootstrap;
.         sort hhid;
{txt}
{com}.         merge hhid using "$path/work\hhdata.dta";
{txt}
{com}.         tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _m;
{txt}
{com}.         keep hhid hhweight hhsize cons_pc_nom reg_tpi rural survquar;
{txt}
{com}.         sort reg_tpi survquar;
{txt}
{com}.         cap drop _merge;
{txt}
{com}.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path/work/conpc.dta";
{txt}
{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.                 gen food_pc_tpi  = food_pc_nom /tpi_trim;
{txt}
{com}.         lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.         lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.         gen one=1;
{txt}
{com}.         tempfile contpi;
{txt}
{com}.         save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved

{com}.         collapse (p$bottom) one cons_pc_tpi [aw=hhsize*hhweight] ;
{txt}
{com}.         rename cons_pc_tpi pctile_60;
{txt}
{com}.         tempfile 60pct;
{txt}
{com}.         sort one;
{txt}
{com}.         save `60pct', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved

{com}.                 use `contpi';
{txt}
{com}.                 sort one;
{txt}
{com}.                 merge one using `60pct';
{txt}{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

{com}.                 tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                 drop _merge;
{txt}
{com}.                 drop one;
{txt}
{com}.                         gen bottom_basket=cons_pc_tpi< pctile_60;
{txt}
{com}.                 tab bottom_basket [aw=hhsize*hhweight];

{txt}bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 3,388.8815       50.02       50.02
{txt}          1 {c |}{res} 3,386.1185       49.98      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                 lab var bottom_basket "=1 if in bottom 60% of PCE";
{txt}
{com}.                                 sort hhid;
{txt}
{com}. save `contpi' , replace;
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved

{com}. **************************************************************************;
. * Next, need to keep only the food products in order to calculate the 
> * food poverty line, and then calculate the food expenses by code.
> **************************************************************************;
. use "$path/work/cons_cod.dta";
{txt}
{com}. /*
>         sort product;
>         merge product using "$path/work/food_cat.dta";
>         tab _merge;
>         keep if _merge==3;
>         drop _merge;
> */
>         
>         keep if food_cat;
{txt}(0 observations deleted)

{com}.         codebook hhid;

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}96371

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}.         sort hhid;
{txt}
{com}. **************************************************************************;
. * Next, merge in the consumption information, and select those in bottom
> * 60% of nominal distribution, after making temporal adjustment. 
> **************************************************************************;
.         merge hhid using `contpi';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}
{com}.         keep if _merge==3;
{txt}(0 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         keep if bottom_basket==1;
{txt}(58825 observations deleted)

{com}.      **************************************************************************;
. * Calculate food shares. Since we're only doing shares here, we can
> * work with the expenditures without doing temporal adjustment.
> **************************************************************************;
.           gen  food_expenditure= cod_hh_nom3;
{txt}(3085 missing values generated)

{com}.                             *gen  food_expenditure= own_valued + daily_valued + monthly_valued + educ_valued;
.           egen tot_food_expen= sum (food_expen), by (hhid) ;
{txt}
{com}.           count if food_expenditure==.;
{res} 3085
{txt}
{com}.           count if tot_food_expen==.;
{res}    0
{txt}
{com}.                     gen food_share= food_expenditure/tot_food_expen;
{txt}(3178 missing values generated)

{com}.           count if food_share==.;
{res} 3178
{txt}
{com}.           drop if food_share==.;
{txt}(3178 observations deleted)

{com}.           sort hhid product;
{txt}
{com}.                         tempfile food_basket_flex;
{txt}
{com}. save `food_basket_flex', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved

{com}. ********************************************************************************;
. * Now prepare to get the variable spdomain to the using dataset, and then find the 
> * total shares by each product in order to select the most important goods in the 
> * basket.
> ********************************************************************************;
.                 preserve;
{txt}
{com}.                 use "$path/work/hhdata.dta", clear;
{txt}
{com}.                         keep hhid spdomain;
{txt}
{com}.                         sort hhid;
{txt}
{com}.                         tempfile spdomain;
{txt}
{com}.                 save `spdomain' , replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp saved

{com}.                 restore;
{txt}
{com}.                            collapse (mean) hhweight, by (hhid);
{txt}
{com}.            sort hhid ;
{txt}
{com}.             merge hhid using `spdomain';
{txt}
{com}.            tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}      3,715       54.83       54.83
{txt}          3 {c |}{res}      3,060       45.17      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.            drop if _m==2;
{txt}(3715 observations deleted)

{com}.            drop _merge;
{txt}
{com}.             collapse (sum) hhweight , by(spdomain);
{txt}
{com}.            rename hhweight tothhweight;
{txt}
{com}.            tempfile tothhweight;
{txt}
{com}. save `tothhweight';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000006.tmp saved

{com}. use `food_basket_flex';
{txt}
{com}.           sort hhid;
{txt}
{com}.           merge hhid using `spdomain';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.           tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}      3,715        9.76        9.76
{txt}          3 {c |}{res}     34,368       90.24      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     38,083      100.00
{txt}
{com}.           sort _m;
{txt}
{com}.           drop if _m==2;
{txt}(3715 observations deleted)

{com}.           drop _m;
{txt}
{com}.           sort spdomain;
{txt}
{com}.             merge spdomain using `tothhweight';
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

{com}.           tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     34,368      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,368      100.00
{txt}
{com}.           drop _merge;
{txt}
{com}.             sort spdomain product;
{txt}
{com}.             gen f_share_w=(food_share*hhweight)/tothhweight;
{txt}
{com}.                                                 *drop descript;
.                         *gen descript = 0;
.             collapse (sum) f_share_w, by(spdomain product descript);
{txt}
{com}.                      sort spdomain f_share_w;
{txt}
{com}.           by spdomain: gen cumshr= sum(f_share_w);
{txt}
{com}.                     count if cumshr<=.075;
{res}  149
{txt}
{com}.           drop if cumshr<=.075;
{txt}(149 observations deleted)

{com}.             lab var f_share_w "average food share for the 13 regions";
{txt}
{com}. save "$path\work\food_basket_flex.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\food_basket_flex.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\food_basket_flex.dta saved

{com}. * List first spatial region to get an idea about contents;
. list product spdomain f_share_w cumshr if spdomain==1;
{txt}
     {c TLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product        spdomain   f_shar~w     cumshr {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    121   Central rural   .0061484   .0777951 {txt}{c |}
  2. {c |} {res}    161   Central rural   .0066571   .0844522 {txt}{c |}
  3. {c |} {res}    110   Central rural   .0069588   .0914109 {txt}{c |}
  4. {c |} {res}    118   Central rural   .0074261    .098837 {txt}{c |}
  5. {c |} {res}    153   Central rural   .0079808   .1068178 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
  6. {c |} {res}    139   Central rural   .0080552    .114873 {txt}{c |}
  7. {c |} {res}    101   Central rural   .0082561    .123129 {txt}{c |}
  8. {c |} {res}    157   Central rural   .0089017   .1320308 {txt}{c |}
  9. {c |} {res}    132   Central rural   .0096797   .1417104 {txt}{c |}
 10. {c |} {res}    135   Central rural   .0102585   .1519689 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}    102   Central rural   .0113567   .1633256 {txt}{c |}
 12. {c |} {res}    150   Central rural   .0116706   .1749962 {txt}{c |}
 13. {c |} {res}    122   Central rural   .0125007   .1874969 {txt}{c |}
 14. {c |} {res}    134   Central rural   .0157725   .2032695 {txt}{c |}
 15. {c |} {res}    123   Central rural   .0180752   .2213447 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 16. {c |} {res}    127   Central rural   .0180986   .2394433 {txt}{c |}
 17. {c |} {res}    125   Central rural   .0193422   .2587855 {txt}{c |}
 18. {c |} {res}    144   Central rural   .0201379   .2789234 {txt}{c |}
 19. {c |} {res}    136   Central rural   .0206209   .2995443 {txt}{c |}
 20. {c |} {res}    108   Central rural   .0240242   .3235685 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 21. {c |} {res}    117   Central rural   .0242783   .3478468 {txt}{c |}
 22. {c |} {res}    140   Central rural   .0246058   .3724526 {txt}{c |}
 23. {c |} {res}    138   Central rural   .0257133   .3981659 {txt}{c |}
 24. {c |} {res}    112   Central rural   .0285765   .4267424 {txt}{c |}
 25. {c |} {res}    147   Central rural   .0486852   .4754276 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 26. {c |} {res}    103   Central rural   .0509293   .5263569 {txt}{c |}
 27. {c |} {res}    104   Central rural   .0513826   .5777395 {txt}{c |}
 28. {c |} {res}    141   Central rural   .0696057   .6473452 {txt}{c |}
 29. {c |} {res}    107   Central rural   .0711269   .7184721 {txt}{c |}
 30. {c |} {res}    113   Central rural   .1342877   .8527598 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 31. {c |} {res}    105   Central rural   .1472402          1 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.                     gen numreg=1;
{txt}
{com}.           collapse (sum) numreg cumshr, by (product descript);
{txt}
{com}.                           keep product descript numreg;
{txt}
{com}.           display _N;
{res}45
{txt}
{com}.                     lab var numreg "number of goods in the basket";
{txt}
{com}. /*
>           merge product using "$path\work\products.dta";
>             tab _merge;
>           keep if _merge==3;
> */
>           keep product descript numreg;
{txt}
{com}.             sort product;
{txt}
{com}.                display _N;
{res}45
{txt}
{com}.   save "$path/work\codes_food_basket_flex.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work\codes_food_basket_flex.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work\codes_food_basket_flex.dta saved

{com}. **************************************************************************
> * 100_food_basket_flex.do     (end)
> **************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/110_price_unit_flex.do"   /* Flexible basket: Prices */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path\rep\110_price_unit_flex.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\110_price_unit_flex.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\110_price_unit_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:56
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. ****************************************************************************************
> * 110_price_unit_flex.do                (start)
> *
> * Purpose: This do file creates a price_unit_flex database with the unit prices of the
> * goods of the flexible food basket in order to determine the poverty lines per spatial
> * domain. It uses the files work\daily.dta and work\own.dta file and draw unit prices
> * by: sum of values and quantity
> ****************************************************************************************;
. *CA modified to bring in work\hhdata.dta for bootstrap
> *CA check for price calcs conditional on number of observations;
. /*
> This file uses:
>         work\daily.dta
>         work\own.dta
>         work\hhdata.dta
>         work\consump_nom.dta
>         work\codes_food_basket_flex.dta
>         work\temp_index_reg_tpi.dta
>           new\conversions.do
> 
> This file creates:
>         work\price_unit_flex.dta
>         work\bottom_basket.dta
> */
> 
> 
> 
> 
> *do "$path/new/010_initial.do";
. **************************************************************************************
> * Create sorted data set with daily and own and the matched codes
> **************************************************************************************;
. use "$path/work/cons_cod_trans.dta", clear;
{txt}
{com}. *use "$path/in/cons_cod_trans.dta", clear;
. *save "$path/work/cons_cod_trans.dta", replace;
. *drop if quantityd==0 ;
. keep hhid product food_cat valuez quantityz unit;
{txt}
{com}. rename valuez    value;
{txt}
{com}. rename quantityz quantity;
{txt}
{com}. drop if quantity==0 ;
{txt}(5850 observations deleted)

{com}. *drop count;
.         sort product;
{txt}
{com}.         gen count=1;
{txt}
{com}.                 tempfile dd_acsort;
{txt}
{com}. save `dd_acsort', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved

{com}. /*
> use "$path\work\daily.dta";
> tempfile dd_acsort;
>         drop days;
>         sort product;
>         tempfile dd_acsort;
> save `dd_acsort', replace;
> 
> use "$path\work\own.dta";
>         keep hhid product valued quantityd unit;
>         rename valued value;
>         rename quantityd quantity;
> 
>         *CHECK THE ZEROS IN quantity FOR NOW DELETE;
>         drop if quantity==0;
> 
>         append using `dd_acsort';
> 
> *CA modified to merge in work\hhdata.dta for bootstrap;
>         sort hhid;
>       merge hhid using "$path\work\hhdata.dta";
>       tab _m;
> 
> * Drop observations if non existent in HH data set;
> drop if _m!=3;
> drop _m;
> 
> 
>         sort product;
>         gen count=1;
> 
> 
> save `dd_acsort', replace;
> */
> 
> 
> **************************************************************************************;
. * Merge the flexible food basket codes with the daily and own data sets
> * Drop all codes not a part of the flexible food basket
> **************************************************************************************;
.         merge product using "$path\work\codes_food_basket_flex.dta";
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     10,257       12.25       12.25
{txt}          2 {c |}{res}          2        0.00       12.25
{txt}          3 {c |}{res}     73,489       87.75      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,748      100.00
{txt}
{com}.         drop if _merge~=3;
{txt}(10259 observations deleted)

{com}.         drop _merge;
{txt}
{com}. **************************************************************************************;
. * Drop observations where product code or quantity or value information is unavailable
> **************************************************************************************;
.                                 codebook hhid;

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6626{col 51}{txt}missing .:  {res}0{txt}/{res}73489

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. *        drop if product==. | value==. | quantity==.  ;
.                                 codebook hhid;

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6626{col 51}{txt}missing .:  {res}0{txt}/{res}73489

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. **************************************************************************************;
. * Convert non-KG quantities (units and liters) to kilograms;
. **************************************************************************************;
. *do "$path\new\110a_conversions.do"
> 
> ********************************************************************
> * There remain a few difficult to interpret observations such as liters
> * of fish and liters of pasta. These are dropped
> ********************************************************************;
. *        drop if unit~=2;
. ********************************************************************
> * Merge in labels for the 13 spatial domains
> ********************************************************************;
.         preserve;
{txt}
{com}.                 use "$path/work/hhdata.dta", clear;
{txt}
{com}.                                                                         keep hhid spdomain reg_tpi survquar;
{txt}
{com}.                         sort hhid;
{txt}
{com}.                         tempfile spdomainreg_tpi;
{txt}
{com}.                 save `spdomainreg_tpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved

{com}.                                 codebook hhid;

{txt}{hline}
{res}hhid{right:Household ID}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}6775

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}.         restore;
{txt}
{com}.                 sort hhid;
{txt}
{com}.         merge hhid using `spdomainreg_tpi';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        149        0.20        0.20
{txt}          3 {c |}{res}     73,489       99.80      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     73,638      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         drop if product==.;
{txt}(149 observations deleted)

{com}. codebook hhid;

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6626{col 51}{txt}missing .:  {res}0{txt}/{res}73489

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. tab spd;

     {txt}spdomain {c |}      Freq.     Percent        Cum.
{hline 14}{c +}{hline 35}
Central rural {c |}{res}     12,835       17.47       17.47
{txt}Central urban {c |}{res}      9,521       12.96       30.42
{txt}      Eastern {c |}{res}     16,510       22.47       52.89
{txt}     Northern {c |}{res}     19,218       26.15       79.04
{txt}      Western {c |}{res}     15,405       20.96      100.00
{txt}{hline 14}{c +}{hline 35}
        Total {c |}{res}     73,489      100.00
{txt}
{com}. sum if spd>=3;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     51133    3.08e+09    7.88e+08   2.01e+09   4.19e+09
{txt}{space 8}unit {c |}{res}     51133           1           0          1          1
{txt}{space 4}food_cat {c |}{res}     51133           1           0          1          1
{txt}{space 4}quantity {c |}{res}     51133    2.919639    24.05671   .0000286   1643.714
{txt}{space 7}value {c |}{res}     51133    404.6522    616.3716   7.142857      14000
{txt}{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}     51133    129.5207    15.42924        101        156
{txt}{space 7}count {c |}{res}     51133           1           0          1          1
{txt}{space 4}descript {c |}{res}     51133    129.5207    15.42924        101        156
{txt}{space 6}numreg {c |}{res}     51133    4.121956    1.395023          1          5
{txt}{space 4}survquar {c |}{res}     51133    2.471907    1.137181          1          4
{txt}{hline 13}{c +}{hline 56}
{space 5}reg_tpi {c |}{res}     51133    1.102654    .3035092          1          2
{txt}{space 4}spdomain {c |}{res}     51133     3.97839    .7897479          3          5
{txt}
{com}. table spdomain, content(mean quantity count quantity count hhid) row missing;

{txt}{hline 14}{c TT}{hline 47}
     spdomain {c |} mean(quantity)     N(quantity)         N(hhid)
{hline 14}{c +}{hline 47}
Central rural {c |}        {res}2.80433          12,835          12,835
{txt}Central urban {c |}       {res}2.548529           9,521           9,521
      {txt}Eastern {c |}       {res}3.254812          16,510          16,510
     {txt}Northern {c |}       {res}2.918863          19,218          19,218
      {txt}Western {c |}       {res}2.561393          15,405          15,405
              {txt}{c |} 
        Total {c |}        {res}2.85142          73,489          73,489
{txt}{hline 14}{c BT}{hline 47}

{com}.         drop if product==. | value==. | quantity==.  ;
{txt}(0 observations deleted)

{com}. codebook hhid;

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6626{col 51}{txt}missing .:  {res}0{txt}/{res}73489

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. tab spd;

     {txt}spdomain {c |}      Freq.     Percent        Cum.
{hline 14}{c +}{hline 35}
Central rural {c |}{res}     12,835       17.47       17.47
{txt}Central urban {c |}{res}      9,521       12.96       30.42
{txt}      Eastern {c |}{res}     16,510       22.47       52.89
{txt}     Northern {c |}{res}     19,218       26.15       79.04
{txt}      Western {c |}{res}     15,405       20.96      100.00
{txt}{hline 14}{c +}{hline 35}
        Total {c |}{res}     73,489      100.00
{txt}
{com}. ********************************************************************
> * Merge in temporal price index to convert nominal value to real
> ********************************************************************;
.         sort reg_tpi survquar;
{txt}
{com}.         merge reg_tpi survquar using "$path\work\temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     73,489      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     73,489      100.00
{txt}
{com}.         drop if _merge ~= 3;
{txt}(0 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         gen value_r=value/tpi_trim;
{txt}
{com}. **************************************************************************;
. * Identify relatively poor households, based on nominal temporally adjusted
> * consumption per capita. Only work with these households for the price
> * calculations.
> **************************************************************************;
.                 preserve;
{txt}
{com}.                         use "$path/work/conpc.dta", clear;
{txt}
{com}. *                       use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work\hhdata.dta for bootstrap;
.         sort hhid;
{txt}
{com}.       merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.       tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.       drop _m;
{txt}
{com}. *CA modified to keep bswt;
.                                 keep hhid hhweight hhsize cons_pc_nom bswt ;
{txt}
{com}.                                 sort hhid;
{txt}
{com}.                                 merge hhid using `spdomainreg_tpi';
{txt}(label spdomain_original already defined)
(label lsurvquar already defined)

{com}.                                 tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                                 drop _merge;
{txt}
{com}.                                 sort reg_tpi survquar;
{txt}
{com}.                                 cap drop _merge;
{txt}
{com}.                                 merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)

{com}.                                 tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                                 drop _merge;
{txt}
{com}.                                 sort hhid;
{txt}
{com}.                                 merge hhid using "$path/work/conpc.dta";
{txt}
{com}.                                 tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                                 drop _merge;
{txt}
{com}.                                 gen food_pc_tpi  = food_pc_nom /tpi_trim;
{txt}
{com}.                                 lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.                                                                 * Non-food not TPI adjusted ;
.                                 gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.                                 lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.                                 gen one=1;
{txt}
{com}.                                 tempfile contpi;
{txt}
{com}.                                 save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp saved

{com}.                                 collapse (p$bottom) one cons_pc_tpi [aw=hhsize*hhweight], by(spdomain) ;
{txt}
{com}.                                 rename cons_pc_tpi pctile_60;
{txt}
{com}.                                 tempfile 60pct;
{txt}
{com}.                                 sort spdomain;
{txt}
{com}.                                 save `60pct', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000006.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000006.tmp saved

{com}.                                 use `contpi';
{txt}
{com}.                                         sort spdomain;
{txt}
{com}.                                         merge spdomain using `60pct';
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

{com}.                                         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                                         drop _merge;
{txt}
{com}.                                         drop one;
{txt}
{com}.                                         sort spdomain;
{txt}
{com}.                                         gen bottom_basket=cons_pc_tpi< pctile_60;
{txt}
{com}.                                         by spdomain: tab bottom_basket [aw=hhsize*hhweight];

{txt}{hline}
-> spdomain = Central rural

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 588.909749       50.03       50.03
{txt}          1 {c |}{res} 588.090251       49.97      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,177      100.00

{txt}{hline}
-> spdomain = Central urban

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 404.557884       50.01       50.01
{txt}          1 {c |}{res} 404.442116       49.99      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        809      100.00

{txt}{hline}
-> spdomain = Eastern

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 704.348337       50.10       50.10
{txt}          1 {c |}{res} 701.651663       49.90      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,406      100.00

{txt}{hline}
-> spdomain = Northern

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 980.314357       50.12       50.12
{txt}          1 {c |}{res} 975.685643       49.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,956      100.00

{txt}{hline}
-> spdomain = Western

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 715.117058       50.11       50.11
{txt}          1 {c |}{res} 711.882942       49.89      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,427      100.00

{txt}
{com}.                                         lab var bottom_basket "=1 if in bottom (60%) of PCE";
{txt}
{com}.                                         sort hhid;
{txt}
{com}.                                                                 save "$path\work\bottom_basket.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\bottom_basket.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\bottom_basket.dta saved

{com}.         restore;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path\work\bottom_basket.dta";
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)
(label spdomain_original already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        149        0.20        0.20
{txt}          3 {c |}{res}     73,489       99.80      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     73,638      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.                         * Only keep price observations for the poor ;
.         keep if bottom_basket==1;
{txt}(44886 observations deleted)

{com}.         **************************************************************************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * for each spdomain & product combination. This should eliminate outliers
> * that may have an undue influence on the price calculation. 
> **************************************************************************;
.                 gen hhppkg=value_r/quantity;
{txt}(56 missing values generated)

{com}.                 egen lower5=pctile(hhppkg), p(5) by(spdomain product);
{txt}(56 missing values generated)

{com}.                 egen upper5=pctile(hhppkg), p(95) by(spdomain product);
{txt}(56 missing values generated)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     28752    2.44e+09    1.15e+09   1.01e+09   4.19e+09
{txt}{space 8}unit {c |}{res}     28696           1           0          1          1
{txt}{space 4}food_cat {c |}{res}     28696           1           0          1          1
{txt}{space 4}quantity {c |}{res}     28696    1.800903    14.63513   .0000429   597.7143
{txt}{space 7}value {c |}{res}     28696    345.9726    509.9598   7.142857       9000
{txt}{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}     28696    129.9646    15.73328        101        156
{txt}{space 7}count {c |}{res}     28696           1           0          1          1
{txt}{space 4}descript {c |}{res}     28696    129.9646    15.73328        101        156
{txt}{space 6}numreg {c |}{res}     28696    4.167549    1.358053          1          5
{txt}{space 4}survquar {c |}{res}     28752    2.488418     1.15701          1          4
{txt}{hline 13}{c +}{hline 56}
{space 5}reg_tpi {c |}{res}     28752    1.189517    .3919258          1          2
{txt}{space 4}spdomain {c |}{res}     28752    3.180127    1.381823          1          5
{txt}{space 4}tpi_trim {c |}{res}     28752     1.08852    .2414996   .9580296   1.796995
{txt}{space 5}value_r {c |}{res}     28696    330.3958    500.0525    3.97489   9141.279
{txt}{space 1}cons_pc_nom {c |}{res}     28752    1776.678    1271.323   78.55932   8604.082
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}     28752    5.684926    2.615445          1         24
{txt}{space 4}hhweight {c |}{res}     28752    5155.673    4162.133        100      60164
{txt}{space 8}bswt {c |}{res}     28752           1           0          1          1
{txt}{space 1}cons_hh_nom {c |}{res}     28752    9304.952    7487.021   232.1918   106670.6
{txt}{space 1}food_pc_nom {c |}{res}     28752     798.954    531.7102          0   6142.857
{txt}{hline 13}{c +}{hline 56}
{space 3}nf_pc_nom {c |}{res}     28752    977.7238    904.5482   23.11263    6335.81
{txt}{space 1}food_pc_tpi {c |}{res}     28752    725.8338    408.3121          0   4307.103
{txt}{space 1}cons_pc_tpi {c |}{res}     28752    1703.558    1116.217    79.7216   6727.658
{txt}{space 3}pctile_60 {c |}{res}     28752    2732.737    1740.781   1356.659   6731.184
{txt}bottom_bas~t {c |}{res}     28752           1           0          1          1
{txt}{hline 13}{c +}{hline 56}
{space 6}hhppkg {c |}{res}     28696    1397.086    7297.265   1.674875    1015698
{txt}{space 6}lower5 {c |}{res}     28696    493.1585    498.5968   1.674875       3000
{txt}{space 6}upper5 {c |}{res}     28696    2462.966     2036.06   6.985338   13047.61
{txt}
{com}. describe;

{txt}Contains data from {res}C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp
{txt}  obs:{res}        28,752                          
{txt} vars:{res}            28                          29 Apr 2013 13:16
{txt} size:{res}     3,680,256                          
{txt}{hline}
              storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{p 0 48}{bind:unit           }{txt}{bind: float  }{bind:{txt}%10.0g     }{space 1}{bind:         }{bind:  }{res}{res}set equal to one since all observations are converted into kg{p_end}
{p 0 48}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{p 0 48}{bind:quantity       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily quantity consumed in Kgs per person{p_end}
{p 0 48}{bind:value          }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of consumption in UGX per person{p_end}
{p 0 48}{bind:product        }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food product code; numerical{p_end}
{p 0 48}{bind:count          }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:descript       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}product description equals 999 for all non foods{p_end}
{p 0 48}{bind:numreg         }{txt}{bind: double }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}number of goods in the basket{p_end}
{p 0 48}{bind:survquar       }{txt}{bind: float  }{bind:{txt}%11.0g     }{space 1}{txt}lsurvquar{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}Sequential Survey Quarter May-Jun 09=1){p_end}
{p 0 48}{bind:reg_tpi        }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:spdomain       }{txt}{bind: float  }{bind:{txt}%13.0g     }{space 1}{txt}spdomain_original{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}{p_end}
{p 0 48}{bind:tpi_trim       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}TRIMMED Temporal price index (Q4=1){p_end}
{p 0 48}{bind:value_r        }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:cons_pc_nom    }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:hhsize         }{txt}{bind: double }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Household Size{p_end}
{p 0 48}{bind:hhweight       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Household sample weight{p_end}
{p 0 48}{bind:bswt           }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:cons_hh_nom    }{txt}{bind: double }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}(sum) cod_hh_nom{p_end}
{p 0 48}{bind:food_pc_nom    }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}nominal food consumption per capita{p_end}
{p 0 48}{bind:nf_pc_nom      }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}nominal non-food consumption per capita{p_end}
{p 0 48}{bind:food_pc_tpi    }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Temp-adjusted per capita food consumption/day{p_end}
{p 0 48}{bind:cons_pc_tpi    }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Temp adjusted total consumption/day{p_end}
{p 0 48}{bind:pctile_60      }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}(p 50) cons_pc_tpi{p_end}
{p 0 48}{bind:bottom_basket  }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}=1 if in bottom (60%) of PCE{p_end}
{p 0 48}{bind:hhppkg         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:lower5         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:upper5         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by:  
{res}     Note:  dataset has changed since last saved
{txt}
{com}. keep if hhppkg-lower5>=0 & hhppkg-upper5<=0;
{txt}(2261 observations deleted)

{com}. *********************************************************************
> * Note that we do prices in three ways. First, by summing quantity and value 
> * This average price price_unitw is thus quantity/value weighted. Second, we
> * calculate the price and take simple means for a transaction weighted
> * price, price_unitt. Last we take the median, price_unitm. But in the end
> * we only use price_unitw
> *********************************************************************;
.         gen price_unitt=value_r/(quantity*1000);
{txt}
{com}.         gen price_unitm=price_unitt;
{txt}
{com}.                 *CA modified to count the boot sample weight bswt;
.         collapse (sum) quantity value_r count bswt 
>                  (mean) price_unitt 
>                  (median) price_unitm [aw=hhweight], by(spdomain product);
{txt}
{com}.         *Generate weighted price per gram ;
.         gen price_unitw=value_r/(quantity*1000);
{txt}
{com}.         drop value_r quantity;
{txt}
{com}.         sort spdomain product;
{txt}
{com}.         lab var price_unitt "simple average of calculated prices - transaction weighted";
{txt}
{com}.         lab var price_unitm "median of prices";
{txt}
{com}.         lab var price_unitw "value share weighted mean prices";
{txt}
{com}. * Get an idea of the difference between the price measures;
.         gen ratiotw=price_unitt/price_unitw;
{txt}
{com}.         gen ratiomw=price_unitm/price_unitw;
{txt}
{com}.         sum ratiotw ratiomw;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}ratiotw {c |}{res}       214    1.315346    1.078976   .9110717   15.86795
{txt}{space 5}ratiomw {c |}{res}       214    1.092297    .3363403   .6821865    3.57737
{txt}
{com}.         sort product;
{txt}
{com}.         merge product using "$path/work/codes_food_basket_flex.dta";
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        0.93        0.93
{txt}          3 {c |}{res}        214       99.07      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        216      100.00
{txt}
{com}.         count if _merge~=3;
{res}    2
{txt}
{com}.         drop if _merge~=3;
{txt}(2 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         sort product spdomain;
{txt}
{com}. save "$path\work\price_unit_flex.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.dta saved

{com}. ****************************************************************************************
> * 110_price_unit_flex.do                (end)
> ****************************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/120_povline_food_flex.do" /* Flexible basket: Poverty line */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/120_povline_food_flex.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/120_povline_food_flex.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/120_povline_food_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:59
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 120_povline_food_flex.do      (start)
> *
> * Use the file with the food basket (food_basket_flex), which is in shares. 
> * Then merge it with the prices file, and then with the calories file.
> * Along the way, drop those observations where we have no price information
> * or no calorie information.
> **************************************************************************;
. /*
> This file uses:
>         work\food_basket_flex.dta
>         work\price_unit_flex.dta
>         work\calperg.dta
>         work\calpp.dta
> 
> This file creates:
>         work\povline_flex.dta
> */
> 
> 
> * start with the quantity information;
. use "$path/work/food_basket_flex.dta";
{txt}
{com}.         sort product spdomain;
{txt}
{com}.         * merge in price information;
.         merge product spdomain using "$path\work\price_unit_flex.dta";
{txt}(label spdomain_original already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          6        2.73        2.73
{txt}          2 {c |}{res}         73       33.18       35.91
{txt}          3 {c |}{res}        141       64.09      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        220      100.00
{txt}
{com}.         list product spdomain descript if _merge==1;
{txt}
     {c TLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c TRC}
     {c |} {res}product        spdomain   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c RT}
142. {c |} {res}    157   Central rural        157 {txt}{c |}
143. {c |} {res}    157   Central urban        157 {txt}{c |}
144. {c |} {res}    157         Eastern        157 {txt}{c |}
145. {c |} {res}    161   Central rural        161 {txt}{c |}
146. {c |} {res}    161   Central urban        161 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c RT}
147. {c |} {res}    161        Northern        161 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c BRC}

{com}.         drop if _merge ~=3;
{txt}(79 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         sort product;
{txt}
{com}.         * merge in information on calories per gram;
.         merge product using "$path\work\calperg.dta";
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         19       11.88       11.88
{txt}          3 {c |}{res}        141       88.13      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        160      100.00
{txt}
{com}.         * This tells where we are lacking calorie info or are lacking quantity info due to 
>         * missing price info above;
.         list product spdomain descript if _merge==1;
{txt}
{com}.         drop if _merge~=3;
{txt}(19 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         sort spdomain f_share_w;
{txt}
{com}.                 * CA modified to handle bootstrap counting;
.         * determine if any quantity has fewer than 10 price observations;
.         by spdomain: count if round(bswt)<10;

{txt}{hline}
-> spdomain = Central rural
{res}    1
{txt}{hline}
-> spdomain = Central urban
{res}    0
{txt}{hline}
-> spdomain = Eastern
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0
{txt}
{com}.         drop if round(bswt) < 10;
{txt}(1 observation deleted)

{com}.         by spdomain: egen baskshr=sum(f_share_w);
{txt}
{com}.         by spdomain: gen cumshr1=sum(f_share_w);
{txt}
{com}.         * bundle was cut at 92.5 percent- cut back to 90 percent if necessary;
.         drop if cumshr1<=baskshr-.9;
{txt}(7 observations deleted)

{com}.         * reobtain the share represented from the average basket- should be slightly more than 90;
.         drop baskshr;
{txt}
{com}.         by spdomain: egen baskshr=sum(f_share_w);
{txt}
{com}.         by spdomain: sum baskshr;

{txt}{hline}
-> spdomain = Central rural

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        28    .9045385           0   .9045385   .9045385

{txt}{hline}
-> spdomain = Central urban

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        23    .8835204           0   .8835204   .8835204

{txt}{hline}
-> spdomain = Eastern

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        27    .9023985           0   .9023985   .9023985

{txt}{hline}
-> spdomain = Northern

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        27    .9024435           0   .9024435   .9024435

{txt}{hline}
-> spdomain = Western

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        28    .9056504           0   .9056504   .9056504

{txt}
{com}.         * obtain quantities and calories provided by these quantities;
.         gen quan=f_share_w/price_unitw;
{txt}
{com}.                         /* how many g in 1 MT exp on food item */
>         gen cal_ir=quan*calperg;
{txt}
{com}.                                 /* how many cal in 1 MT exp on food item */
>         by spdomain: egen calreg=sum(cal_ir);
{txt}
{com}.         /* how many cal in 1 MT exp in food basket*/
> 
>         * merge in calorie requirements;
.         sort spdomain;
{txt}
{com}.         merge spdomain using "$path\work\calpp.dta";
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        133      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        133      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         * get the expansion factor to hit 95% of calorie requirements;
.         gen ratio=.95*calpp/calreg;
{txt}
{com}.                         replace quan=quan*ratio;
{txt}(133 real changes made)

{com}.         replace cal_ir=quan*calperg;
{txt}(126 real changes made)

{com}.         * do a consistency check;
.         sort spdomain;
{txt}
{com}.         by spdomain: egen chkcal=sum(cal_ir);
{txt}
{com}.         replace chkcal=chkcal/.95-calpp ;
{txt}(133 real changes made)

{com}.                         * these values should be about zero;
.         by spdomain: sum chkcal;

{txt}{hline}
-> spdomain = Central rural

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        28    .0000257           0   .0000257   .0000257

{txt}{hline}
-> spdomain = Central urban

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        23    .0000771           0   .0000771   .0000771

{txt}{hline}
-> spdomain = Eastern

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        27   -.0001156           0  -.0001156  -.0001156

{txt}{hline}
-> spdomain = Northern

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        27    .0001156           0   .0001156   .0001156

{txt}{hline}
-> spdomain = Western

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        28    .0000128           0   .0000128   .0000128

{txt}
{com}.         * obtain the value of each good in the bundle;
.         gen val_ir=quan*price_unitw;
{txt}
{com}.         * the sum of the value of the goods in the bundle is assumed to represent 90% of expenditure;
.         by spdomain: egen povline_f_flex90=sum(val_ir);
{txt}
{com}.                                 *************** we change the poverty line for Kampala urban, to try if it works ************;
. ***             replace povline_f_flex90=povline_f_flex90 + 6000;
.                         replace povline_f_flex=povline_f_flex90/.9;
{txt}(133 real changes made)

{com}.         collapse (mean) povline_f_flex, by (spdomain);
{txt}
{com}.                 lab var povline_f_flex "Food poverty line. Flexible basket";
{txt}
{com}.         sort spdomain;
{txt}
{com}.         keep spdomain povline_f_flex;
{txt}
{com}. save "$path\work\povline_food_flex.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex.dta saved

{com}. /*
> * To be used in 140_iterate.do;
> gen cutoff = 1.5 * povline_f_flex;
> keep spdomain cutoff;
> save "$path/work/povlines_first_iterate.dta", replace;
> */
> 
> **************************************************************************
> * 120_povline_food_flex.do      (end)
> **************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/120_povline_food_flex.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}29 Apr 2013, 13:16:59
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/130_povmeas_flex.do"              /* Flexible basket: Poverty rates */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/130_povmeas_flex.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/130_povmeas_flex.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/130_povmeas_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:16:59
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 130_povmeas_flex.do           (start)
> *
> * Purpose:
> * Initial poverty measures calculation for flexible basket. (Before any iteration)
> **************************************************************************;
. *CA modified to add work\hhdata.dta for bootstrap;
. /*
> This file uses:
>         in\foodshr96.dta
>         work\povline_f_flex.dta
>         work\consump_nom.dta
>         work\hhdata.dta
>         work/temp_index_reg_tpi.dta
> 
> This file creates:
>         work\foodshr96.dta
>         work\povmeas.dta
>         work\povlines.dta
>         work/cons_real.dta
> */
> 
> 
> 
> **************************************************************************;
. * Bring in data file with nominal consumption per capita, and deflate it
> * by temporal price index.
> **************************************************************************;
. use "$path/work/hhdata.dta", clear;
{txt}
{com}.         keep hhid strata reg_tpi spdomain news rural survmon survquar;
{txt}
{com}.         tab reg_tpi, miss;

    {txt}reg_tpi {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      5,555       81.99       81.99
{txt}          2 {c |}{res}      1,220       18.01      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         tab survquar, miss;

 {txt}Sequential {c |}
     Survey {c |}
    Quarter {c |}
    May-Jun {c |}
      09=1) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
 May-Jul 09 {c |}{res}      1,749       25.82       25.82
{txt}Sept-Oct 09 {c |}{res}      1,731       25.55       51.37
{txt}Nov09-Jan10 {c |}{res}      1,458       21.52       72.89
{txt} Feb-Apr 10 {c |}{res}      1,837       27.11      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         keep hhid spdomain reg_tpi survquar;
{txt}
{com}.         sort hhid;
{txt}
{com}.         tempfile spdomainreg_tpi;
{txt}
{com}. save `spdomainreg_tpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved

{com}. use "$path/work/conpc.dta", clear;
{txt}
{com}. *use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work\hhdata.dta for bootstrap;
.     sort hhid;
{txt}
{com}.     merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.     tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.     drop _m;
{txt}
{com}.         keep hhid hhweight hhsize cons_pc_nom ;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using `spdomainreg_tpi';
{txt}(label spdomain_original already defined)
(label lsurvquar already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort reg_tpi survquar;
{txt}
{com}.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path/work/conpc.dta";
{txt}
{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         gen food_pc_tpi  = food_pc_nom /tpi_trim;
{txt}
{com}.         lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.                 gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.         lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.         gen one=1;
{txt}
{com}. * TPI deflated per capita consumption ;
.         tempfile contpi;
{txt}
{com}. save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved

{com}. **************************************************************************
> * Calculate non-food expenditure for HH around the food poverty line
> *
> * Develop a discrete triangular weighted distribution. This gives a
> * weight of  1 to HH at +/- 18-20% from food poverty line, and
> * weight of  2 to HH at +/- 16-18% from food poverty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food poverty line.
> * This weight is called triwt below.
> **************************************************************************;
. use `contpi';
{txt}
{com}.         sort spdomain;
{txt}
{com}.         merge spdomain using "$path/work/povline_food_flex.dta";
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}. gen     triwt = 0 ;
{txt}
{com}. replace triwt = 11 - round(50*abs(cons_pc_tpi/povline_f_flex-1)+0.5)
>                 if abs(cons_pc_tpi/povline_f_flex-1)<=0.2;
{txt}(69 real changes made)

{com}.                                         * Nearness to poverty line and population weights ;
.         gen tripopwt=triwt*hhweight*hhsize;
{txt}
{com}.         preserve;
{txt}
{com}.                 collapse (mean) nf_pc_nom [aw=tripopwt] ,
>                         by(spdomain);
{txt}
{com}.                                         rename nf_pc_nom povline_na_flex;
{txt}
{com}.                 lab var povline_na_flex "Nonfood poverty line. Flexible bundle";
{txt}
{com}.                                 tempfile znf;
{txt}
{com}.                 sort spdomain;
{txt}
{com}.                 save `znf', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000004.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000004.tmp saved

{com}.                 tab spdomain;

     {txt}spdomain {c |}      Freq.     Percent        Cum.
{hline 14}{c +}{hline 35}
Central rural {c |}{res}          1       25.00       25.00
{txt}Central urban {c |}{res}          1       25.00       50.00
{txt}     Northern {c |}{res}          1       25.00       75.00
{txt}      Western {c |}{res}          1       25.00      100.00
{txt}{hline 14}{c +}{hline 35}
        Total {c |}{res}          4      100.00
{txt}
{com}.         restore;
{txt}
{com}.         sort spdomain;
{txt}
{com}.         merge spdomain using `znf';
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      1,406       20.75       20.75
{txt}          3 {c |}{res}      5,369       79.25      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}. **************************************************************************;
. * Poverty line is the sum of the food and non-food poverty lines
> **************************************************************************;
.         gen povline_flex=povline_f_flex + povline_na_flex;
{txt}(1406 missing values generated)

{com}.         lab var povline_flex "Poverty line. Flexible bundle";
{txt}
{com}.         sort spdomain;
{txt}
{com}. save "$path\work\povlines.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines.dta saved

{com}. **************************************************************************;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first: we just use the first stratum.
> **************************************************************************;
. use `contpi';
{txt}
{com}.         sort spdomain;
{txt}
{com}.         merge spdomain using "$path\work\povlines.dta";
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines.dta
{p_end}
(label spdomain_original already defined)
(label lsurvquar already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         * Real consumption pc, temporally deflated ;
.         gen cr= cons_pc_tpi ;
{txt}
{com}.         * Poverty line;
.         gen linpob=povline_flex;
{txt}(1406 missing values generated)

{com}.         *qui sum linpob if spdomain==1, meanonly;
.         sum linpob if spdomain==3, meanonly;
{txt}
{com}.         global spi_base=r(mean);
{txt}
{com}.         * Spatial price index ;
.         gen spi=linpob/$spi_base;
{txt}(6775 missing values generated)

{com}.         * Real consumption pc, temporally and spatially deflated ;
.         gen cr2=cr/spi;
{txt}(6775 missing values generated)

{com}.         qui sum cr [aw=hhweight*hhsize];
{txt}
{com}.         global sumcr=r(sum);
{txt}
{com}.         qui sum cr2 [aw=hhweight*hhsize];
{txt}
{com}.         global sumcr2=r(sum);
{txt}
{com}.         replace spi=spi*$sumcr2/$sumcr;
{txt}(0 real changes made)

{com}.         gen linpobr=linpob/spi;
{txt}(6775 missing values generated)

{com}.         replace cr2=cr/spi;
{txt}(0 real changes made)

{com}.         sum cr cr2 linpob linpobr [aw=hhweight*hhsize];

{txt}    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9371.236     395668    79.7216   8.12e+07
{txt}{space 9}cr2 {c |}{res}       0           0
{txt}{space 6}linpob {c |}{res}    5369   135339147    632.4146   232.1377   338.4113   1075.884
{txt}{space 5}linpobr {c |}{res}       0           0
{txt}
{com}.         lab var cr      "Temporally-adjusted cons pc";
{txt}
{com}.         lab var cr2     "Spatially & temporally adjusted cons pc";
{txt}
{com}.         lab var linpob  "Poverty line";
{txt}
{com}.         lab var linpobr "Real poverty line";
{txt}
{com}.         lab var spi     "Spatial price index";
{txt}
{com}. **************************************************************************
> * calculate poverty measures with the flexible food bundle
> **************************************************************************;
.         gen h = 100     if cr <=(linpob);
{txt}(5189 missing values generated)

{com}.         replace  h = 0 if cr > (linpob);
{txt}(5189 real changes made)

{com}.                         gen             pg      = ((linpob - cr )/linpob) *100;
{txt}(1406 missing values generated)

{com}.         replace         pg      = 0             if h==0;
{txt}(5189 real changes made)

{com}.         gen             spg     = ((( linpob - cr )/ linpob )^2)*100;
{txt}(1406 missing values generated)

{com}.         replace         spg     = 0             if h==0;
{txt}(5189 real changes made)

{com}.         gen h_flex=h;
{txt}
{com}.         gen pg_flex=pg;
{txt}(1406 missing values generated)

{com}.         gen spg_flex=spg;
{txt}(1406 missing values generated)

{com}.         lab var h_flex   "Poverty headcount. Flex bundle";
{txt}
{com}.         lab var pg_flex  "Poverty gap. Flex bundle";
{txt}
{com}.         lab var spg_flex "Squared poverty gap. Flex bundle";
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path\work\hhdata.dta";
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop if _merge~=3;
{txt}(0 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         gen popwt=hhsize*hhweight;
{txt}
{com}.                 * Stata 10.1 syntax ;
.         svyset , clear;
{txt}
{com}.         svyset [pweight=popwt] , str(strata) psu(psu);

      {txt}pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}

{com}.         svy: mean h_flex pg_flex spg_flex;
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      8{txt}{col 34}Number of obs{col 51}= {res}      5369
{txt}{col 1}Number of PSUs{col 18}= {res}    560{txt}{col 34}Population size{col 51}={res}  135339147
{txt}{col 34}Design df{col 51}= {res}       552

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 6}h_flex {c |}{col 14}{res}{space 2} 3.160865{col 26}{space 2} .4532232{col 37}{space 5} 2.270612{col 51}{space 3} 4.051118
{txt}{space 5}pg_flex {c |}{col 14}{res}{space 2} .6551542{col 26}{space 2} .1149618{col 37}{space 5} .4293382{col 51}{space 3} .8809703
{txt}{space 4}spg_flex {c |}{col 14}{res}{space 2} .2416532{col 26}{space 2} .0743635{col 37}{space 5} .0955832{col 51}{space 3} .3877232
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(rural);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      8{txt}{col 34}Number of obs{col 51}= {res}      5369
{txt}{col 1}Number of PSUs{col 18}= {res}    560{txt}{col 34}Population size{col 51}={res}  135339147
{txt}{col 34}Design df{col 51}= {res}       552

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} 2.340563{col 26}{space 2} 1.050599{col 37}{space 5} .2769028{col 51}{space 3} 4.404224
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 3.323495{col 26}{space 2} .5027584{col 37}{space 5} 2.335941{col 51}{space 3} 4.311048
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .4326991{col 26}{space 2} .1815215{col 37}{space 5} .0761417{col 51}{space 3} .7892565
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} .6992572{col 26}{space 2} .1330232{col 37}{space 5} .4379636{col 51}{space 3} .9605508
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .0976632{col 26}{space 2} .0369567{col 37}{space 5} .0250703{col 51}{space 3} .1702561
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} .2702001{col 26}{space 2} .0885247{col 37}{space 5} .0963136{col 51}{space 3} .4440866
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(news);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      8{txt}{col 34}Number of obs{col 51}= {res}      5369
{txt}{col 1}Number of PSUs{col 18}= {res}    560{txt}{col 34}Population size{col 51}={res}  135339147
{txt}{col 34}Design df{col 51}= {res}       552

            {txt}1: news = {res}1
            {txt}3: news = {res}3
            {txt}4: news = {res}4

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2} 2.873025{col 26}{space 2} .7414178{col 37}{space 5}  1.41668{col 51}{space 3}  4.32937
{txt}{space 11}3 {c |}{col 14}{res}{space 2} 4.841489{col 26}{space 2} 1.034235{col 37}{space 5}  2.80997{col 51}{space 3} 6.873008
{txt}{space 11}4 {c |}{col 14}{res}{space 2} 2.024545{col 26}{space 2} .5990868{col 37}{space 5} .8477762{col 51}{space 3} 3.201314
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2} .5345624{col 26}{space 2} .1538973{col 37}{space 5} .2322665{col 51}{space 3} .8368583
{txt}{space 11}3 {c |}{col 14}{res}{space 2}  .917179{col 26}{space 2} .2087482{col 37}{space 5} .5071409{col 51}{space 3} 1.327217
{txt}{space 11}4 {c |}{col 14}{res}{space 2} .5567028{col 26}{space 2} .2338295{col 37}{space 5} .0973982{col 51}{space 3} 1.016007
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2} .1290241{col 26}{space 2} .0455686{col 37}{space 5} .0395151{col 51}{space 3} .2185331
{txt}{space 11}3 {c |}{col 14}{res}{space 2} .2922018{col 26}{space 2} .0756313{col 37}{space 5} .1436415{col 51}{space 3} .4407621
{txt}{space 11}4 {c |}{col 14}{res}{space 2} .3155621{col 26}{space 2} .1976791{col 37}{space 5}-.0727332{col 51}{space 3} .7038575
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(reg_tpi);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      8{txt}{col 34}Number of obs{col 51}= {res}      5369
{txt}{col 1}Number of PSUs{col 18}= {res}    560{txt}{col 34}Population size{col 51}={res}  135339147
{txt}{col 34}Design df{col 51}= {res}       552

            {txt}1: reg_tpi = {res}1
            {txt}2: reg_tpi = {res}2

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2} 3.323495{col 26}{space 2} .5027584{col 37}{space 5} 2.335941{col 51}{space 3} 4.311048
{txt}{space 11}2 {c |}{col 14}{res}{space 2} 2.340563{col 26}{space 2} 1.050599{col 37}{space 5} .2769028{col 51}{space 3} 4.404224
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2} .6992572{col 26}{space 2} .1330232{col 37}{space 5} .4379636{col 51}{space 3} .9605508
{txt}{space 11}2 {c |}{col 14}{res}{space 2} .4326991{col 26}{space 2} .1815215{col 37}{space 5} .0761417{col 51}{space 3} .7892565
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2} .2702001{col 26}{space 2} .0885247{col 37}{space 5} .0963136{col 51}{space 3} .4440866
{txt}{space 11}2 {c |}{col 14}{res}{space 2} .0976632{col 26}{space 2} .0369567{col 37}{space 5} .0250703{col 51}{space 3} .1702561
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(strata);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      8{txt}{col 34}Number of obs{col 51}= {res}      5369
{txt}{col 1}Number of PSUs{col 18}= {res}    560{txt}{col 34}Population size{col 51}={res}  135339147
{txt}{col 34}Design df{col 51}= {res}       552

      {txt}KAMPALA: strata = {res}KAMPALA
    {txt}_subpop_2: strata = {res}CENTRAL 1
    {txt}_subpop_3: strata = {res}CENTRAL 2
    {txt}_subpop_4: strata = {res}MID-NOTHERN
    {txt}_subpop_5: strata = {res}NORTH-EAST
    {txt}_subpop_6: strata = {res}WEST-NILE
    {txt}_subpop_7: strata = {res}MID-WESTERN
    {txt}_subpop_8: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} 3.989593{col 26}{space 2}  2.38974{col 37}{space 5}-.7045039{col 51}{space 3}  8.68369
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 2.154962{col 26}{space 2} .9354892{col 37}{space 5} .3174081{col 51}{space 3} 3.992517
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 3.137538{col 26}{space 2} 1.110918{col 37}{space 5} .9553945{col 51}{space 3} 5.319682
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 2.600945{col 26}{space 2}  1.40293{col 37}{space 5}-.1547902{col 51}{space 3}  5.35668
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 20.94542{col 26}{space 2} 3.947703{col 37}{space 5} 13.19106{col 51}{space 3} 28.69978
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} .4451377{col 26}{space 2} .3236315{col 37}{space 5}-.1905623{col 51}{space 3} 1.080838
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 3.207536{col 26}{space 2}  1.06104{col 37}{space 5} 1.123366{col 51}{space 3} 5.291707
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .7706408{col 26}{space 2} .4559784{col 37}{space 5}-.1250242{col 51}{space 3} 1.666306
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .6810045{col 26}{space 2} .3936231{col 37}{space 5}-.0921778{col 51}{space 3} 1.454187
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .4443604{col 26}{space 2} .2676519{col 37}{space 5}-.0813805{col 51}{space 3} .9701013
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .5651772{col 26}{space 2} .1908686{col 37}{space 5} .1902595{col 51}{space 3} .9400948
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .1794355{col 26}{space 2} .0747527{col 37}{space 5}  .032601{col 51}{space 3}   .32627
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2}  5.05292{col 26}{space 2} 1.173782{col 37}{space 5} 2.747295{col 51}{space 3} 7.358545
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} .0288547{col 26}{space 2} .0226885{col 37}{space 5}-.0157116{col 51}{space 3} .0734209
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .9194269{col 26}{space 2}  .427723{col 37}{space 5} .0792631{col 51}{space 3} 1.759591
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .1722355{col 26}{space 2} .0961394{col 37}{space 5}-.0166083{col 51}{space 3} .3610794
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .1208904{col 26}{space 2}   .06743{col 37}{space 5}-.0115605{col 51}{space 3} .2533412
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .1203687{col 26}{space 2} .0897703{col 37}{space 5}-.0559644{col 51}{space 3} .2967019
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .1413415{col 26}{space 2} .0562277{col 37}{space 5}  .030895{col 51}{space 3}  .251788
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2}  .046952{col 26}{space 2} .0293304{col 37}{space 5}-.0106609{col 51}{space 3}  .104565
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.655552{col 26}{space 2} .4505136{col 37}{space 5} .7706215{col 51}{space 3} 2.540483
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  .002408{col 26}{space 2} .0021912{col 37}{space 5}-.0018961{col 51}{space 3} .0067121
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .5725235{col 26}{space 2} .3700331{col 37}{space 5}-.1543217{col 51}{space 3} 1.299369
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .0431975{col 26}{space 2} .0232969{col 37}{space 5} -.002564{col 51}{space 3}  .088959
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(spdomain);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      8{txt}{col 34}Number of obs{col 51}= {res}      5369
{txt}{col 1}Number of PSUs{col 18}= {res}    560{txt}{col 34}Population size{col 51}={res}  135339147
{txt}{col 34}Design df{col 51}= {res}       552

    {txt}_subpop_1: spdomain = {res}Central rural
    {txt}_subpop_2: spdomain = {res}Central urban
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 2.725439{col 26}{space 2} .8453135{col 37}{space 5} 1.065014{col 51}{space 3} 4.385863
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 3.175608{col 26}{space 2} 1.450995{col 37}{space 5} .3254606{col 51}{space 3} 6.025756
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 4.841489{col 26}{space 2} 1.034235{col 37}{space 5}  2.80997{col 51}{space 3} 6.873008
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 2.024545{col 26}{space 2} .5990868{col 37}{space 5} .8477762{col 51}{space 3} 3.201314
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .5211756{col 26}{space 2} .1940674{col 37}{space 5} .1399746{col 51}{space 3} .9023765
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .5620082{col 26}{space 2} .2492083{col 37}{space 5} .0724955{col 51}{space 3} 1.051521
{txt}{space 4}Northern {c |}{col 14}{res}{space 2}  .917179{col 26}{space 2} .2087482{col 37}{space 5} .5071409{col 51}{space 3} 1.327217
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .5567028{col 26}{space 2} .2338295{col 37}{space 5} .0973982{col 51}{space 3} 1.016007
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}  .134449{col 26}{space 2} .0633351{col 37}{space 5} .0100417{col 51}{space 3} .2588563
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .1179019{col 26}{space 2} .0493671{col 37}{space 5} .0209315{col 51}{space 3} .2148723
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} .2922018{col 26}{space 2} .0756313{col 37}{space 5} .1436415{col 51}{space 3} .4407621
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .3155621{col 26}{space 2} .1976791{col 37}{space 5}-.0727332{col 51}{space 3} .7038575
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         compress;
{txt}survquar was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}one was {res}float{txt} now {res}byte
{txt}triwt was {res}float{txt} now {res}byte
{txt}spi was {res}float{txt} now {res}byte
{txt}cr2 was {res}float{txt} now {res}byte
{txt}linpobr was {res}float{txt} now {res}byte
{txt}h was {res}float{txt} now {res}byte
{txt}h_flex was {res}float{txt} now {res}byte
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}
{com}.         sort hhid;
{txt}
{com}. save "$path/work/cons_real.dta" , replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real.dta saved

{com}.         collapse  (mean) h_flex pg_flex spg_flex [aw=hhweight*hhsize], by(strata);
{txt}
{com}. save "$path\work\povmeas.dta", replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povmeas.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povmeas.dta saved

{com}. **************************************************************************
> * 130_povmeas_flex.do           (end)
> **************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/130_povmeas_flex.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}29 Apr 2013, 13:17:00
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/140_iterate.do" $it_n $bottom     /* Flexible basket: Iterations */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/140_iterate.log", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/140_iterate.log not found)
{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/140_iterate.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:17:00
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. *global povline_initial "$path\in\povlines_first_iof.dta";
. **************************************************************************
> * 140_iterate.do        (start)
> *
> * Purpose: Create flexible food basket and poverty line with iterative procedure
> *
> * This program will take the results from the first pass at the
> * poverty lines and applies the corresponding spatial deflator to
> * re-select the relatively poor, their consumption bundles, and
> * their prices.
> *
> * Welfare indicator is here always temporally and spatially adjusted per capita
> * expenditure. Here called cr_it< >.
> *
> * We will iterate this process 5 times which here assures convergence.
> *
> * CA, Mar 2010: Relatively poor are those below last iterated poverty line
> * MAH, Apr 2010: Cleaning
> * URB, feb 2012: Commented out "drop if unit~=2"
> **************************************************************************;
. /*
> This file uses:
>             in/povlines_first_new.dta
>         work\hhdata.dta
>         work\consump_nom.dta
>         work\own.dta
>         work\daily.dta
>         work\temp_index_reg_tpi.dta
>         work\cons_cod.dta
>         work\food_cat.dta
>         work\cons_real.dta
>         work\products.dta
>         work\match96_02.dta
>         new\conversions.do
>         
> This file creates (where `pass' is the number of the iteration):
>         work\codes_food_basket_flex_it`pass'.dta
>         work\price_unit_flex_it`pass'.dta
>         work\quan_flex_it`pass'.dta
>         work\match_cod_flex_it`pass'.csv
>         work\relpoor_it`pass'.dta
>         work\povlines_it`pass'.dta
>         work\foodshares_it`pass'.dta
>         work\nat_pov_flex.csv
>         work\rur_pov_flex.csv
>         work\strata_pov_flex.csv
>         work\spdomain_pov_flex.csv
>         work\reg_tpi_pov_flex.csv
> */
> 
> **************************************************************************;
. * Make a key file that will be used over and over, without change
> * in every iteration. This will include the TEMPORALLY deflated consumption
> * and various HH data such as hhweight, spdomain, etc.
> **************************************************************************;
. use "$path/work/conpc.dta";
{txt}
{com}.         sort hhid;
{txt}
{com}.         merg hhid using "$path\work\hhdata.dta";
{txt}
{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort reg_tpi survquar;
{txt}
{com}.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.                 gen food_pc_tpi = food_pc_nom /tpi_trim;
{txt}
{com}.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.         lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.         lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.         tempfile contpi;
{txt}
{com}.         sort hhid;
{txt}
{com}. save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved

{com}. *use "$path\in\povlines_first_iterate.dta", clear;
. *save "$path/work/povlines_first.dta", replace;
. **************************************************************************;
. * Now set some information pertaining to the iterations. For now we'll
> * manually set the number of iterations. Also specify the percentile
> * cutpoint that we will use for defining the relatively poor.
> **************************************************************************;
. local lastpass=0;
{txt}
{com}. local pass=1;
{txt}
{com}. * Use these two lines to manually specify the number of iterations
> * and the cutpoint here in the do file.;
.   *local maxit=5;
.   *local cutpt=50;
. * Use these few lines if you want to specify the number of iterations
> * and percentile cutpoint by passing them as parameters on the command
> * line, e.g.:   wstata do new\iterate1.do 5 50;
. if "`1'"=="" | "`2'"=="" {c -(}      ;
.         di in red "Error: you need to specify number of iterations as first parameter";
.         di in red "       and percentile cutpoint as second parameter on command line.";
. {c )-};
{txt}
{com}. local maxit=`1';
{txt}
{com}. local cutpt=`2';
{txt}
{com}. tempfile cutoff;
{txt}
{com}. while `pass' <= `maxit' {c -(};
{txt}  2{com}.         **************************************************************************;
. **************************************************************************;
. * Pick out the bottom X percent in real consumption per capita 
> * (temporally & spatially adjusted), as ranked by the previous iteration.
> * The percentile to use is defined by "cutpt". This produces a file that
> * has the hhid, and a dummy variable indicating if they were below the
> * cutpoint on the last iteration.
> **************************************************************************;
. **************************************************************************;
. /*
> * Comment out if IOF 2008/09. (This code included instead of below code in order to replicate published figures 2002/03). ( START ) ;
> 
>         if "`pass'"=="1" {c -(}      ;
>               use `contpi', clear;
>               sort spdomain;
>               merge spdomain using "$path/work/povlines_first.dta";
>               tab _m;
>               drop _m;
> *              gen relpoor`pass'= cons_pc_tpi<=cutoff;
>                gen relpoor`pass'= cons_pc_tpi if cons_pc_tpi<=cutoff;
>               rename cons_pc_tpi cr_it0;
>               sort hhid;
>          save "$path\work\relpoor_it`pass'.dta", replace;
> *        use "$path/work/cons_real.dta", clear;
> *              gen cr_it0=cr2;
>         {c )-};
>         
> 
> * Comment out if IOF 2008/09. (This code included instead of below code in order to replicate published figures 2002/03). ( END ) ;
> */
> 
> 
> 
> * Comment out if IAF 2002/03. (This code below excluded in order to replicate published figures 2002/03). ( START ) ;
.         if "`pass'"=="1" {c -(} ;
{txt}  3{com}. * Find real income at cut point initially;
.                 use "$path/work/cons_real.dta", clear;
{txt}  4{com}.                                     gen cr_it0=cr2;
{txt}  5{com}.                         cap drop one;
{txt}  6{com}.             gen one=1;
{txt}  7{com}.                                     collapse (p`cutpt') one cr_it`lastpass' [aw=popwt] ;
{txt}  8{com}.                                     rename cr_it`lastpass' cutoff;
{txt}  9{com}.                                     sort one;
{txt} 10{com}.             save `cutoff', replace;
{txt} 11{com}.  * Find relatively poor initially;
.             use "$path/work/cons_real.dta", clear;
{txt} 12{com}.                                                 gen cr_it`lastpass'=cr2;
{txt} 13{com}.             cap drop one;
{txt} 14{com}.             gen one=1;
{txt} 15{com}.                                     sort one;
{txt} 16{com}.             merge one using `cutoff';
{txt} 17{com}.             tab _merge;
{txt} 18{com}.             drop _merge;
{txt} 19{com}.                                     drop one;
{txt} 20{com}.                            gen relpoor`pass'=cr_it`lastpass'<=cutoff;
{txt} 21{com}.             *lab var relpoor`pass' "=1 if in bottom of PCE";
.                                     tab relpoor`pass' [aw=popwt];
{txt} 22{com}.                                     keep hhid cr_it`lastpass' relpoor`pass' popwt;
{txt} 23{com}.             sort hhid;
{txt} 24{com}.         save $path\work\relpoor_it`pass'.dta, replace;
{txt} 25{com}.         {c )-};
{txt} 26{com}. * Comment out if IAF 2002/03. (This code below excluded in order to replicate published figures 2002/03). ( END ) ;
.                 if `pass'>1 {c -(}   ;
{txt} 27{com}. * Find real income at cut point in iteration number `pass' ;
.                 use "$path/work/cons_real_it`lastpass'.dta" , clear;
{txt} 28{com}.                                                 cap drop one;
{txt} 29{com}.                 gen one=1;
{txt} 30{com}.                                                                 *CA modified from hhweight*hhsize to popwt;
.                 collapse (p`cutpt') one cr_it`lastpass' [aw=popwt] ;
{txt} 31{com}.                         rename cr_it`lastpass' cutoff;
{txt} 32{com}.                                                                         sort one;
{txt} 33{com}.         save `cutoff', replace;
{txt} 34{com}.         * Find relatively poor in iteration number `pass' ;
.                 use "$path/work/cons_real_it`lastpass'.dta", clear;
{txt} 35{com}.                                                 cap drop one;
{txt} 36{com}.                 gen one=1;
{txt} 37{com}.                                                 sort one;
{txt} 38{com}.                 merge one using `cutoff';
{txt} 39{com}.                 tab _merge;
{txt} 40{com}.                 drop _merge;
{txt} 41{com}.                                                 drop one;
{txt} 42{com}.                 gen relpoor`pass'=cr_it`lastpass'<=cutoff;
{txt} 43{com}.                 *lab var relpoor`pass' "=1 if in bottom of PCE";
.                                                 tab relpoor`pass' [aw=popwt];
{txt} 44{com}. *CA modified to popwt above and to keep popwt below;
.                 keep hhid cr_it`lastpass' relpoor`pass' popwt;
{txt} 45{com}.                 sort hhid;
{txt} 46{com}.         save "$path\work\relpoor_it`pass'.dta", replace;
{txt} 47{com}.         {c )-};
{txt} 48{com}.         **************************************************************************;
. * Get the consumption file, and select only those codes that are food,
> * using our definition of "food", which includes alcoholic beverages.
> **************************************************************************;
.         use "$path/work/cons_cod.dta", clear;
{txt} 49{com}. *CA modified to merge in work\hhdata.dta for bootstrap;
.     sort hhid;
{txt} 50{com}.     merge hhid using "$path\work\hhdata.dta";
{txt} 51{com}.     tab _m;
{txt} 52{com}.     drop _m;
{txt} 53{com}.         /*
>                 sort product;
>                 merge product using "$path/work/food_cat.dta";
>                 tab _merge;
>                 keep if _merge==3;
>                 drop _merge;
> */
> 
>                                 * Only food transactions ;
.                 keep if food_cat;
{txt} 54{com}.                 sort hhid;
{txt} 55{com}. **************************************************************************;
. * Merge with file that has temporally AND spatially adjusted consumption
> * per capita from the previous iteration, and also identifies those below 
> * the cutoff. Then select only those who are below the cutoff.
> **************************************************************************;
.                 merge hhid using "$path\work\relpoor_it`pass'.dta";
{txt} 56{com}.                 tab _merge;
{txt} 57{com}.                 drop _merge;
{txt} 58{com}.                                 * Keep only transactions by the poor ;
.                 keep if relpoor`pass';
{txt} 59{com}. **************************************************************************;
. * Calculate HH level food shares. Since we're only doing shares here, we can
> * work with the expenditures without doing temporal adjustment.
> **************************************************************************;
.                 gen  food_expenditure = cod_hh_nom3;
{txt} 60{com}.                 *gen  food_expenditure= own_valued + daily_valued + monthly_valued + educ_valued;
.                 egen tot_food_expen= sum (food_expen), by (hhid) ;
{txt} 61{com}.                 count if food_expenditure==.;
{txt} 62{com}.                 count if tot_food_expen==.;
{txt} 63{com}.                 gen food_share= food_expenditure/tot_food_expen;
{txt} 64{com}.                 count if food_share==.;
{txt} 65{com}.                 drop if food_share==.;
{txt} 66{com}.                 sort hhid product;
{txt} 67{com}.                 tempfile foodshares;
{txt} 68{com}.         save `foodshares', replace;
{txt} 69{com}. ********************************************************************************;
. * Now find the total (economy wise, e.g. not by HH) shares by each product in
> * order to select the most important goods in each domain's basket.
> ********************************************************************************;
.                 collapse (mean) hhweight spdomain, by (hhid);
{txt} 70{com}.                 sort hhid ;
{txt} 71{com}.                  collapse (sum) hhweight , by(spdomain);
{txt} 72{com}.                 rename hhweight tothhweight;
{txt} 73{com}.                 tempfile tothhweight;
{txt} 74{com}.                 sort spdomain;
{txt} 75{com}.         save `tothhweight', replace;
{txt} 76{com}.         use `foodshares', clear;
{txt} 77{com}.                 sort spdomain;
{txt} 78{com}.                 merge spdomain using `tothhweight';
{txt} 79{com}.                 tab _merge;
{txt} 80{com}.                 drop _merge;
{txt} 81{com}.                 sort spdomain product;
{txt} 82{com}.                 gen f_share_w`pass'=(food_share*hhweight)/tothhweight;
{txt} 83{com}.                 collapse (sum) f_share_w`pass', by(spdomain product descript);
{txt} 84{com}.                                sort spdomain f_share_w`pass';
{txt} 85{com}.                 by spdomain: gen cumshr`pass'= sum(f_share_w`pass');
{txt} 86{com}.                 count if cumshr`pass'<=.075;
{txt} 87{com}.                 drop if cumshr`pass'<=.075;
{txt} 88{com}.                 lab var f_share_w`pass' "average food share for the 13 spatial domains";
{txt} 89{com}.         save `foodshares', replace;
{txt} 90{com}.                                                 * Number of spatials domains a food product appears ;
.                 gen numreg=1;
{txt} 91{com}.                 collapse (sum) numreg cumshr`pass', by (product descript);
{txt} 92{com}.                 keep product numreg descript;
{txt} 93{com}.                 display _N;
{txt} 94{com}.                 sort product;
{txt} 95{com}.                                 * Include food product labels ;
. *                merge product using "$path\work\products.dta";
. *                tab _merge;
. *                keep if _merge==3;
.                 keep product descript numreg;
{txt} 96{com}.                   sort product;
{txt} 97{com}.                      display _N;
{txt} 98{com}.           save "$path\work\codes_food_basket_flex_it`pass'.dta", replace;
{txt} 99{com}. **************************************************************************;
. **************************************************************************;
. * That is pretty much the part equivalent to "100_food_basket_flex.do",
> * which figures out the food shares for the relevant reference group. Now
> * we figure out the prices with a code stream that is adapted from
> * "110_price_unit_flex.do".
> **************************************************************************;
. **************************************************************************;
. **************************************************************************************
> * Create sorted data set with daily + own expenditure and the matched codes
> **************************************************************************************;
. use "$path/in/cons_cod_trans.dta", clear;
{txt}100{com}. *save "$path/work/cons_cod_trans.dta", replace;
. *drop value   ;
. *drop quantity;
. keep hhid product food_cat valuez quantityz unit;
{txt}101{com}. rename valuez    value;
{txt}102{com}. rename quantityz quantity;
{txt}103{com}. *drop count;
. drop if quantity==0 ;
{txt}104{com}.         tempfile dd_acsort;
{txt}105{com}.         save    `dd_acsort', replace;
{txt}106{com}. /*
>         use "$path\work\daily.dta", clear;
>                 drop days;
>                 sort product;
>                 tempfile dd_acsort;
>         save `dd_acsort', replace;
>         
>         use "$path\work\own.dta", clear;
>                 keep hhid product valued quantityd unit;
>                 rename valued value;
>                 rename quantityd quantity;
>         
>                 *CHECK THE ZEROS IN quantity FOR NOW DELETE;
>                 drop if quantity==0;
>         
>                 append using `dd_acsort';
> */
> 
>                 *CA modified to insert work\hhdata.dta for bootstrap;
.                 sort hhid;
{txt}107{com}.                 merge hhid using "$path\work\hhdata.dta";
{txt}108{com}.                 tab _m;
{txt}109{com}.                  drop if _m==2;
{txt}110{com}.                 drop _m;
{txt}111{com}.                                 sort product;
{txt}112{com}.                 gen count=1;
{txt}113{com}.         save `dd_acsort', replace;
{txt}114{com}.         **************************************************************************;
. * Merge the basket codes with the dd  and own data sets.
> * Drop all codes not a part of the flexible food basket
> **************************************************************************;
.                 merge product using "$path\work\codes_food_basket_flex_it`pass'.dta";
{txt}115{com}.                         tab _merge;
{txt}116{com}.                 drop if _merge~=3;
{txt}117{com}.                 drop _merge;
{txt}118{com}. **************************************************************************************
> * Drop observations where product code, quantity or value information is unavailable
> **************************************************************************************;
.                 drop if product==. | value==. | quantity==.  ;
{txt}119{com}.         **************************************************************************************
> * Convert non-KG quantities (units, liters) into kilograms
> **************************************************************************************;
. *do "$path\new\110a_conversions.do"
> 
> ********************************************************************
> * There remain a few difficult to interpret observations such as liters
> * of fish and liters of pasta. These are dropped.
> ********************************************************************;
. *                $MZ drop if unit~=2;
.         **************************************************************************;
. * Bring in the spdomain and reg_tpi variables, and also the information on
> * relatively poor households.
> **************************************************************************;
.                 preserve;
{txt}120{com}.                                                 * Temporally adjusted expenditure ;
.                         use `contpi', clear;
{txt}121{com}.                                 keep hhid hhweight spdomain reg_tpi survquar tpi_trim cons_pc_tpi ;
{txt}122{com}.                                 sort hhid;
{txt}123{com}.                                 tempfile hhd2;
{txt}124{com}.                         save `hhd2', replace;
{txt}125{com}.                 restore;
{txt}126{com}.                                 compress;
{txt}127{com}.                 sort hhid;
{txt}128{com}.                 merge hhid using `hhd2';
{txt}129{com}.                 tab _merge;
{txt}130{com}.                 drop _merge;
{txt}131{com}.                 sort hhid;
{txt}132{com}.                 merge hhid using "$path\work\relpoor_it`pass'.dta";
{txt}133{com}.                 tab _merge;
{txt}134{com}.                 drop _merge;
{txt}135{com}.                                                 * Keep nominal food transactions by poor people ;
.                 keep if relpoor`pass';
{txt}136{com}.                 drop if product==.;
{txt}137{com}.                                                                 * Temporally deflate transaction values ;
.                 gen value_r=value/tpi_trim;
{txt}138{com}. **************************************************************************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * each spdomain & product combination. This should eliminate outliers
> * that may have an undue influence on the price calculation. 
> **************************************************************************;
.                 gen hhppkg=value_r/quantity;
{txt}139{com}.                 egen lower5=pctile(hhppkg), p(5)  by(spdomain product);
{txt}140{com}.                 egen upper5=pctile(hhppkg), p(95) by(spdomain product);
{txt}141{com}.                 keep if hhppkg>=lower5 & hhppkg<=upper5;
{txt}142{com}. *********************************************************************
> * Note that we do prices in three ways. First, by summing quantity and value 
> * This average price price_uw is thus quantity/value weighted. Second, we
> * calculate the price and take simple means for a transaction weighted
> * price, price_ut. Last we take the median, price_um. But in the end
> * we only use price_unitw
> *********************************************************************;
.                 gen price_ut`pass'=value_r/(quantity*1000);
{txt}143{com}.                 gen price_um`pass'=price_ut;
{txt}144{com}.                 collapse (sum) 
>                         quantity value_r count bswt (mean) price_ut (median) price_um [aw=hhweight], 
>                         by(spdomain product);
{txt}145{com}.                 *Generate weighted price per gram ;
.                 gen price_uw`pass'=value_r/(quantity*1000);
{txt}146{com}.                 drop value_r quantity;
{txt}147{com}.                 sort spdomain product;
{txt}148{com}.                 lab var price_ut`pass' "Average of calculated prices - transaction weighted";
{txt}149{com}.                 lab var price_um`pass' "Median of prices";
{txt}150{com}.                 lab var price_uw`pass' "Value share weighted mean prices";
{txt}151{com}. * Get an idea of the difference between the price measures;
.                 gen ratiotw`pass'=price_ut`pass'/price_uw`pass';
{txt}152{com}.                 gen ratiomw`pass'=price_um`pass'/price_uw`pass';
{txt}153{com}.                 sum ratiotw`pass' ratiomw`pass';
{txt}154{com}.                 sort product;
{txt}155{com}.                 merge product using "$path/work/codes_food_basket_flex_it`pass'.dta";
{txt}156{com}.                 tab _m;
{txt}157{com}.                 count if _merge~=3;
{txt}158{com}.                 drop if _merge~=3;
{txt}159{com}.                 drop _merge;
{txt}160{com}.                 sort product spdomain;
{txt}161{com}.         save "$path\work\price_unit_flex_it`pass'.dta", replace;
{txt}162{com}. **************************************************************************;
. **************************************************************************;
. * That concludes the prices part. Now we move to calculating the food
> * poverty lines, which draws code from "120_povline_flex.do" with very few
> * changes:
> * - The changes facilitate accumulating vectors
> *   of intermediate results across iterations, rather than generating a
> *   bunch of new files.
> **************************************************************************;
. **************************************************************************;
. **************************************************************************;
. * Use the file with the food basket (`foodshares'), which is in shares. 
> * Then merge it with the prices file, and then with the calories file.
> * Along the way, drop those observations where we have no price information
> * or no calorie information, but list them out.
> **************************************************************************;
.         use `foodshares', clear;
{txt}163{com}.                 sort product spdomain;
{txt}164{com}.                 merge product spdomain using "$path\work\price_unit_flex_it`pass'.dta";
{txt}165{com}.                         tab _merge;
{txt}166{com}.                 list product spdomain descript if _merge==1;
{txt}167{com}.                         drop if _merge ~=3;
{txt}168{com}.                 drop _merge;
{txt}169{com}.                 sort product;
{txt}170{com}.                         merge product using "$path\work\calperg.dta";
{txt}171{com}.                 tab _merge;
{txt}172{com}.                                                 * This tells where we are lacking calorie info or are lacking quantity info due to 
>                 * missing price info above;
.                 list product spdomain descript if _merge==1;
{txt}173{com}.                         drop if _merge~=3;
{txt}174{com}.                 drop _merge;
{txt}175{com}.                 sort spdomain f_share_w`pass';
{txt}176{com}.                                 *CA modified to change count bswt;
.                 by spdomain: count if round(bswt)<10;
{txt}177{com}.                                 sum bswt;
{txt}178{com}.                                                 drop if round(bswt) < 10;
{txt}179{com}.                                                                 * Total food share in spatial domain ;
.                 by spdomain: egen baskshr=sum(f_share_w`pass');
{txt}180{com}.                                 * Cumulated food share in spatial domain ;
.                 by spdomain: gen  cumshr =sum(f_share_w`pass');
{txt}181{com}.                 drop if cumshr<=baskshr-.9;
{txt}182{com}.                         drop baskshr;
{txt}183{com}.                 by spdomain: egen baskshr=sum(f_share_w`pass');
{txt}184{com}.                 tabstat baskshr , by(spdomain) st(n mean sd min max);
{txt}185{com}.                                                                 * How many grams in 1 MT exp on food item ;
.                                 gen quan`pass'=f_share_w`pass'/price_uw`pass';
{txt}186{com}.                                 * How many calories in 1 MT exp on food item ;
.                 gen cal_ir`pass'=quan`pass'*calperg;
{txt}187{com}.                                 * how many calories in 1 MT exp in food basket ;
.                 by spdomain: egen calreg=sum(cal_ir);
{txt}188{com}.                         sort spdomain;
{txt}189{com}.                 merge spdomain using "$path\work\calpp.dta";
{txt}190{com}.                 tab _merge;
{txt}191{com}.                 drop _merge;
{txt}192{com}.                                                         * get the expansion factor to hit 95% of calorie requirements ;
.                 gen ratio=.95*calpp/calreg;
{txt}193{com}.                         replace quan`pass'=quan`pass'*ratio;
{txt}194{com}.                 replace cal_ir`pass'=quan`pass'*calperg;
{txt}195{com}.                         sort spdomain product;
{txt}196{com}.                 by spdomain: egen chkcal=sum(cal_ir`pass');
{txt}197{com}.                 replace chkcal=chkcal/.95-calpp ;
{txt}198{com}.                                                 tabstat chkcal , by(spdomain) st(n mean sd min max);
{txt}199{com}.                         gen val_ir`pass'=quan`pass'*price_uw`pass';
{txt}200{com}.                         by spdomain: egen povline_f_flex90_`pass'=sum(val_ir`pass');
{txt}201{com}.                 replace povline_f=povline_f_flex90_`pass'/.9;
{txt}202{com}.                 *drop product96;
. keep product spdomain quan`pass'  price_uw`pass' val_ir`pass' povline_f_flex90_`pass' calpp calperg;
{txt}203{com}.                     save "$path\work\quan_flex_it`pass'.dta", replace;
{txt}204{com}.                         collapse (mean) povline_f_flex90_`pass', by (spdomain);
{txt}205{com}.                                                 keep spdomain povline_f_flex90_`pass';
{txt}206{com}.                 sort spdomain;
{txt}207{com}.                 save "$path\work\povline_food_flex_it`pass'.dta", replace;
{txt}208{com}.         **************************************************************************;
. **************************************************************************;
. * Now comes the part that draws the non-food and total poverty lines,
> * and generates estimates of poverty measures. This is drawn from 
> * "130_povmeas_flex.do" with a few changes.
> **************************************************************************;
. **************************************************************************;
. **************************************************************************
> * Calculate non-food expenditure for HH around the food poverty line
> *
> * Develop a discrete triangular weighted distribution. This gives a
> * weight of  1 to HH at +/- 18-20% from food poverty line, and
> * weight of  2 to HH at +/- 16-18% from food poverty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food poverty line.
> * This weight is called triwt below.
> **************************************************************************;
.         use `contpi', clear;
{txt}209{com}.                 sort spdomain;
{txt}210{com}.                 merge spdomain using "$path/work/povline_food_flex_it`pass'.dta";
{txt}211{com}.                 tab _merge;
{txt}212{com}.                 drop _merge;
{txt}213{com}.                 gen triwt=0 ;
{txt}214{com}.                 replace triwt = 11 - round(50*abs(cons_pc_tpi/povline_f_flex90_`pass'-1)+0.5)
>                 if abs(cons_pc_tpi/povline_f_flex90_`pass'-1)<=0.2;
{txt}215{com}.                                                                 * Nearness to poverty line and population weights ;
.                 gen tripopwt=triwt*hhweight*hhsize;
{txt}216{com}.                                                 preserve;
{txt}217{com}.                         collapse (mean) nf_pc_nom [aw=tripopwt] ,
>                                 by(spdomain);
{txt}218{com}.                         rename nf_pc_nom povline_nf_flex`pass';
{txt}219{com}.                         lab var povline_nf_flex`pass' "Nonfood poverty line. Flexible bundle";
{txt}220{com}.                         tempfile znf;
{txt}221{com}.                         sort spdomain;
{txt}222{com}.                         save `znf', replace;
{txt}223{com}.                                                                 restore;
{txt}224{com}.                                 sort spdomain;
{txt}225{com}.                 merge spdomain using `znf';
{txt}226{com}.                 tab _merge;
{txt}227{com}.                 drop _merge;
{txt}228{com}. **************************************************************************
> * Poverty line is the sum of the food and non-food poverty lines
> **************************************************************************;
.                 gen povline_flex`pass'=povline_f_flex90_`pass' + povline_nf_flex`pass';
{txt}229{com}. keep spdomain povline_flex`pass';
{txt}230{com}.                 sort spdomain;
{txt}231{com}.         save "$path\work\povlines_it`pass'.dta", replace;
{txt}232{com}. **************************************************************************;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first: we just use the first stratum.
> **************************************************************************;
.         use `contpi', clear;
{txt}233{com}.                 sort spdomain;
{txt}234{com}.                 merge spdomain using "$path\work\povlines_it`pass'.dta";
{txt}235{com}.                 tab _merge;
{txt}236{com}.                 drop _merge;
{txt}237{com}.                 gen cr= cons_pc_tpi ;
{txt}238{com}.                 gen linpob`pass'=povline_flex`pass';
{txt}239{com}.                 qui sum linpob`pass' if spdomain==1, meanonly;
{txt}240{com}.                 global spi_base=r(mean);
{txt}241{com}.                 gen spi`pass'=linpob`pass'/$spi_base;
{txt}242{com}.                 gen cr_it`pass'=cr/spi`pass';
{txt}243{com}.                 qui sum cr [aw=hhweight*hhsize];
{txt}244{com}.                 global sumcr=r(sum);
{txt}245{com}.                 qui sum cr_it`pass' [aw=hhweight*hhsize];
{txt}246{com}.                 global sumcr2=r(sum);
{txt}247{com}.                 replace spi`pass'=spi`pass'*$sumcr2/$sumcr;
{txt}248{com}.                 gen linpobr`pass'=linpob`pass'/spi`pass';
{txt}249{com}.                 replace cr_it`pass'=cr/spi`pass';
{txt}250{com}.                 su cr cr_it`pass' linpob`pass' linpobr`pass' [aw=hhweight*hhsize];
{txt}251{com}.                 lab var cr "Temporally-adjusted cons pc";
{txt}252{com}.                 lab var cr_it`pass' "Spatially & temporally adjusted cons pc";
{txt}253{com}.                 lab var linpob`pass' "Poverty line";
{txt}254{com}.                 lab var linpobr`pass' "Real poverty line";
{txt}255{com}.                 lab var spi`pass' "Spatial price index";
{txt}256{com}.                 gen linpob=linpob`pass';
{txt}257{com}. **************************************************************************
> * calculate poverty measures with the flexible food bundle
> **************************************************************************;
.                 gen h=100 if cr_it`pass'<=linpobr`pass' & linpobr`pass'~=. & cr_it`pass'~=.;
{txt}258{com}.                 replace  h   = 0 if cr_it`pass' > linpobr`pass' & linpobr`pass'~=. & cr_it`pass'~=.;
{txt}259{com}.                 gen      pg  = ((linpobr`pass' - cr_it`pass' )/linpobr`pass') *100;
{txt}260{com}.                 replace  pg  = 0             if h==0;
{txt}261{com}.                 gen      spg = ((( linpobr`pass' - cr_it`pass' )/ linpobr`pass' )^2)*100;
{txt}262{com}.                 replace  spg = 0             if h==0;
{txt}263{com}.                 gen h_flex`pass'  =h;
{txt}264{com}.                 gen pg_flex`pass' =pg;
{txt}265{com}.                 gen spg_flex`pass'=spg;
{txt}266{com}.                                 lab var h_flex`pass'   "Poverty headcount. Flexible bundle";
{txt}267{com}.                 lab var pg_flex`pass'  "Poverty gap. Flexible bundle";
{txt}268{com}.                 lab var spg_flex`pass' "Squared poverty gap. Flexible bundle";
{txt}269{com}.                 gen popwt=hhsize*hhweight;
{txt}270{com}.                         * Stata 10.1 syntax ;
.                         svyset , clear;
{txt}271{com}.                         svyset [pweight=popwt] , str(strata) psu(psu);
{txt}272{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass';
{txt}273{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass' , over(rural);
{txt}274{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass' , over(strata);
{txt}275{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass' , over(strata rural);
{txt}276{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass' , over(spdomain);
{txt}277{com}. *preserve;
. keep hhid popwt cr_it`pass' h_flex`pass' pg_flex`pass' spg_flex`pass' rural news reg_tpi strata spdomain;
{txt}278{com}.                 compress;
{txt}279{com}.                 sort hhid;
{txt}280{com}.         save "$path/work/cons_real_it`pass'.dta" , replace;
{txt}281{com}. *restore;
.                                 * New cutoff point (percentile) to use in next iteration is equal to the poverty ;
.                 * rate in this iteration ;
.                                                 sum h_flex`pass' [aw=popwt] ;
{txt}282{com}.                                 * Comment out next line for IAF 2002/03 in order to replicate official figures ( START );
.                 * URB: In this case, we just use the poorest 50% as there are too few actually poor to calculate the bundle and prices..;
.                 local cutpt= $tpi_bottom;
{txt}283{com}. *               local cutpt= round(r(mean));
.                 * Comment out next line for IAF 2002/03 in order to replicate official figures ( END );
. *       save foodshares tempfile to disk;
.         use `foodshares', clear;
{txt}284{com}.         save "$path/work/foodshares_it`pass'.dta", replace;
{txt}285{com}.         local lastpass = `pass';
{txt}286{com}.         local pass = `pass' + 1;
{txt}287{com}.         {c )-};
{txt}(6775 missing values generated)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
(6775 missing values generated)
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it1.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(0 observations deleted)
(6775 missing values generated)
{res} 6775
    0
{txt}(6907 missing values generated)
{res} 6907
{txt}(6907 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000004.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000004.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     89,464      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     89,464      100.00
  136
{txt}(136 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved
51
51
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it1.dta saved
(5850 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         99        0.12        0.12
{txt}          3 {c |}{res}     83,746       99.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,845      100.00
{txt}(99 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000005.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      6,903        8.24        8.24
{txt}          2 {c |}{res}          2        0.00        8.24
{txt}          3 {c |}{res}     76,843       91.76      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,748      100.00
{txt}(6905 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000007.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000007.tmp saved
unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}product was {res}float{txt} now {res}int
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}int
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        112        0.15        0.15
{txt}          3 {c |}{res}     76,843       99.85      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     76,955      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     76,955      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     76,955      100.00
{txt}(0 observations deleted)
(112 observations deleted)
(6265 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw1 {c |}{res}       244    1.254954    .4099843   .8625331   3.553839
{txt}{space 4}ratiomw1 {c |}{res}       244    1.083799    .2979199   .5797898   2.839645
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        0.81        0.81
{txt}          3 {c |}{res}        244       99.19      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        246      100.00
    2
{txt}(2 observations deleted)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it1.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          6        2.40        2.40
{txt}          2 {c |}{res}         77       30.80       33.20
{txt}          3 {c |}{res}        167       66.80      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        250      100.00
{txt}
     {c TLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c TRC}
     {c |} {res}product        spdomain   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c RT}
167. {c |} {res}    157   Central rural        157 {txt}{c |}
168. {c |} {res}    157   Central urban        157 {txt}{c |}
169. {c |} {res}    157         Eastern        157 {txt}{c |}
170. {c |} {res}    157         Western        157 {txt}{c |}
172. {c |} {res}    161   Central urban        161 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c RT}
173. {c |} {res}    161        Northern        161 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c BRC}
(83 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         13        7.22        7.22
{txt}          3 {c |}{res}        167       92.78      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        180      100.00
{txt}(13 observations deleted)

{hline}
-> spdomain = Central rural
{res}    0
{txt}{hline}
-> spdomain = Central urban
{res}    0
{txt}{hline}
-> spdomain = Eastern
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}       167     389.006    286.4832         36       1573
{txt}(0 observations deleted)
(5 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       34  .8975035         0  .8975035  .8975035
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       35  .8323958         0  .8323958  .8323958
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       30  .9030856         0  .9030856  .9030856
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       30  .9060711         0  .9060711  .9060711
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       33  .9043093         0  .9043093  .9043093
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      162  .8874437   .029132  .8323958  .9060711
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        162      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        162      100.00
{txt}(162 real changes made)
(157 real changes made)
(162 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       34  .0000257         0  .0000257  .0000257
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       35  .0000771         0  .0000771  .0000771
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       30 -.0001156         0 -.0001156 -.0001156
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       30 -.0001413         0 -.0001413 -.0001413
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       33  .0000128         0  .0000128  .0000128
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      162 -.0000229  .0000846 -.0001413  .0000771
{txt}{hline 14}{c BT}{hline 50}
(162 real changes made)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it1.dta saved
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it1.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(43 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000009.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000009.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      2,215       32.69       32.69
{txt}          3 {c |}{res}      4,560       67.31      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it1.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it1.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)
(4560 real changes made)
(2215 missing values generated)
(4560 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9371.236     395668    79.7216   8.12e+07
{txt}{space 6}cr_it1 {c |}{res}    4560   119399178    15747.29   76872.38   181.2585    2803203
{txt}{space 5}linpob1 {c |}{res}    4560   119399178    431.8141   93.95233   318.4092   538.6025
{txt}{space 4}linpobr1 {c |}{res}    4560   119399178     1224.59   .0000576    1224.59    1224.59
{txt}(2215 missing values generated)
(6655 missing values generated)
(4440 real changes made)
(2215 missing values generated)
(4440 real changes made)
(2215 missing values generated)
(4440 real changes made)
(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex1 {c |}{col 14}{res}{space 2} 1.577687{col 26}{space 2} .2892999{col 37}{space 5}  1.00916{col 51}{space 3} 2.146213
{txt}{space 4}pg_flex1 {c |}{col 14}{res}{space 2}   .38616{col 26}{space 2} .1050583{col 37}{space 5} .1797016{col 51}{space 3} .5926185
{txt}{space 3}spg_flex1 {c |}{col 14}{res}{space 2} .1780813{col 26}{space 2} .0775825{col 37}{space 5} .0256176{col 51}{space 3} .3305449
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex1      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .2776652{col 26}{space 2} .2465331{col 37}{space 5}-.2068168{col 51}{space 3} .7621472
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.651954{col 26}{space 2} .3063322{col 37}{space 5} 1.049956{col 51}{space 3} 2.253952
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex1     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .1015235{col 26}{space 2} .0853941{col 37}{space 5}-.0662912{col 51}{space 3} .2693382
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} .4024206{col 26}{space 2} .1110274{col 37}{space 5} .1842318{col 51}{space 3} .6206095
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex1    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .0382471{col 26}{space 2} .0301023{col 37}{space 5}-.0209093{col 51}{space 3} .0974035
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} .1860696{col 26}{space 2} .0819311{col 37}{space 5} .0250603{col 51}{space 3}  .347079
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: strata = {res}CENTRAL 1
    {txt}_subpop_2: strata = {res}CENTRAL 2
    {txt}_subpop_3: strata = {res}MID-NOTHERN
    {txt}_subpop_4: strata = {res}NORTH-EAST
    {txt}_subpop_5: strata = {res}WEST-NILE
    {txt}_subpop_6: strata = {res}MID-WESTERN
    {txt}_subpop_7: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex1      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0040708{col 26}{space 2} .0040958{col 37}{space 5}-.0039783{col 51}{space 3} .0121199
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .7693809{col 26}{space 2} .3559176{col 37}{space 5} .0699388{col 51}{space 3} 1.468823
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 19.66242{col 26}{space 2} 3.795677{col 37}{space 5} 12.20323{col 51}{space 3} 27.12161
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .1988004{col 26}{space 2} .2024059{col 37}{space 5}-.1989636{col 51}{space 3} .5965644
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  1.06548{col 26}{space 2} .5225656{col 37}{space 5} .0385449{col 51}{space 3} 2.092416
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .7706408{col 26}{space 2} .4559784{col 37}{space 5}-.1254388{col 51}{space 3}  1.66672
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex1     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0000952{col 26}{space 2} .0000958{col 37}{space 5} -.000093{col 51}{space 3} .0002834
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .1051241{col 26}{space 2}  .055916{col 37}{space 5}-.0047609{col 51}{space 3} .2150092
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 4.099495{col 26}{space 2} 1.023711{col 37}{space 5} 2.087719{col 51}{space 3} 6.111272
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .0093813{col 26}{space 2} .0095514{col 37}{space 5} -.009389{col 51}{space 3} .0281516
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} .6552531{col 26}{space 2} .4152642{col 37}{space 5}-.1608157{col 51}{space 3} 1.471322
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .0708225{col 26}{space 2} .0398402{col 37}{space 5}-.0074706{col 51}{space 3} .1491157
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex1    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 2.23e-06{col 26}{space 2} 2.24e-06{col 37}{space 5}-2.18e-06{col 51}{space 3} 6.63e-06
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .0359941{col 26}{space 2} .0252912{col 37}{space 5}-.0137075{col 51}{space 3} .0856958
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 1.275818{col 26}{space 2} .3724566{col 37}{space 5} .5438742{col 51}{space 3} 2.007763
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .0004427{col 26}{space 2} .0004507{col 37}{space 5}-.0004431{col 51}{space 3} .0013285
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} .4984763{col 26}{space 2} .3538014{col 37}{space 5}-.1968071{col 51}{space 3}  1.19376
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .0129414{col 26}{space 2}  .009163{col 37}{space 5}-.0050655{col 51}{space 3} .0309483
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

         {txt}Over: strata rural
    _subpop_1: {res}CENTRAL 1 Rural
    {txt}_subpop_2: {res}CENTRAL 2 Rural
    {txt}_subpop_3: {res}MID-NOTHERN Urban
    {txt}_subpop_4: {res}MID-NOTHERN Rural
    {txt}_subpop_5: {res}NORTH-EAST Urban
    {txt}_subpop_6: {res}NORTH-EAST Rural
    {txt}_subpop_7: {res}WEST-NILE Urban
    {txt}_subpop_8: {res}WEST-NILE Rural
    {txt}_subpop_9: {res}MID-WESTERN Urban
   {txt}_subpop_10: {res}MID-WESTERN Rural
   {txt}_subpop_11: {res}SOUTH-WESTERN Urban
   {txt}_subpop_12: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex1      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0040708{col 26}{space 2} .0040958{col 37}{space 5}-.0039783{col 51}{space 3} .0121199
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .8532088{col 26}{space 2} .3939483{col 37}{space 5} .0790295{col 51}{space 3} 1.627388
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7674287{col 51}{space 3} 14.43073
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 20.13751{col 26}{space 2} 3.926991{col 37}{space 5} 12.42027{col 51}{space 3} 27.85475
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .2282509{col 26}{space 2} .2330918{col 37}{space 5}-.2298164{col 51}{space 3} .6863182
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .1517281{col 26}{space 2} .1492219{col 37}{space 5}-.1415197{col 51}{space 3} .4449759
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 1.122594{col 26}{space 2}  .551854{col 37}{space 5} .0381015{col 51}{space 3} 2.207086
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2}  .809912{col 26}{space 2} .4789074{col 37}{space 5}-.1312271{col 51}{space 3} 1.751051
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex1     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0000952{col 26}{space 2} .0000958{col 37}{space 5} -.000093{col 51}{space 3} .0002834
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .1165779{col 26}{space 2} .0619689{col 37}{space 5}-.0052021{col 51}{space 3}  .238358
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 2.337249{col 26}{space 2} 1.322933{col 37}{space 5}-.2625531{col 51}{space 3}  4.93705
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 4.164747{col 26}{space 2}  1.06206{col 37}{space 5} 2.077609{col 51}{space 3} 6.251885
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .0107711{col 26}{space 2} .0109995{col 37}{space 5}-.0108449{col 51}{space 3}  .032387
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .0816647{col 26}{space 2} .0803158{col 37}{space 5}-.0761702{col 51}{space 3} .2394996
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .6911048{col 26}{space 2}  .438846{col 37}{space 5}-.1713065{col 51}{space 3} 1.553516
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} .0744316{col 26}{space 2} .0418384{col 37}{space 5}-.0077885{col 51}{space 3} .1566517
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex1    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 2.23e-06{col 26}{space 2} 2.24e-06{col 37}{space 5}-2.18e-06{col 51}{space 3} 6.63e-06
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .0399159{col 26}{space 2} .0280425{col 37}{space 5}-.0151926{col 51}{space 3} .0950244
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .7996209{col 26}{space 2} .4526027{col 37}{space 5}-.0898248{col 51}{space 3} 1.689067
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.293451{col 26}{space 2} .3865599{col 37}{space 5}  .533791{col 51}{space 3} 2.053111
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .0005083{col 26}{space 2} .0005191{col 37}{space 5}-.0005118{col 51}{space 3} .0015283
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .0439544{col 26}{space 2} .0432284{col 37}{space 5}-.0409971{col 51}{space 3}  .128906
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .5268859{col 26}{space 2} .3740287{col 37}{space 5}-.2081479{col 51}{space 3}  1.26192
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} .0136009{col 26}{space 2} .0096252{col 37}{space 5}-.0053142{col 51}{space 3} .0325161
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: spdomain = {res}Central rural
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex1      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0020502{col 26}{space 2} .0020576{col 37}{space 5}-.0019935{col 51}{space 3} .0060938
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 3.633839{col 26}{space 2} .7622024{col 37}{space 5} 2.135974{col 51}{space 3} 5.131704
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .9223505{col 26}{space 2}  .350674{col 37}{space 5} .2332129{col 51}{space 3} 1.611488
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex1     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0000479{col 26}{space 2} .0000481{col 37}{space 5}-.0000466{col 51}{space 3} .0001425
{txt}{space 4}Northern {c |}{col 14}{res}{space 2}  .719131{col 26}{space 2} .1770054{col 37}{space 5} .3712835{col 51}{space 3} 1.066979
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .3715412{col 26}{space 2} .2220751{col 37}{space 5}-.0648764{col 51}{space 3} .8079588
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex1    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.12e-06{col 26}{space 2} 1.13e-06{col 37}{space 5}-1.09e-06{col 51}{space 3} 3.33e-06
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} .2246082{col 26}{space 2} .0615951{col 37}{space 5} .1035627{col 51}{space 3} .3456536
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .2627734{col 26}{space 2}  .188569{col 37}{space 5}-.1077987{col 51}{space 3} .6333455
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}h_flex1 was {res}float{txt} now {res}byte
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it1.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex1 {c |}{res}    4560   119399178    1.577687   12.46249          0        100
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it1.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor2 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}4,757.65559       70.22       70.22
{txt}          1 {c |}{res}2,017.34441       29.78      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it2.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(71259 observations deleted)
(2185 missing values generated)
{res} 2185
    0
{txt}(2243 missing values generated)
{res} 2243
{txt}(2243 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000a.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000a.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000b.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000b.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     22,869      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     22,869      100.00
   93
{txt}(93 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000a.tmp saved
41
41
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it2.dta saved
(5850 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000c.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000c.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         99        0.12        0.12
{txt}          3 {c |}{res}     83,746       99.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,845      100.00
{txt}(99 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000c.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     12,604       15.05       15.05
{txt}          2 {c |}{res}          2        0.00       15.05
{txt}          3 {c |}{res}     71,142       84.95      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,748      100.00
{txt}(12606 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000e.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000e.tmp saved
unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}product was {res}float{txt} now {res}int
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}int
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        160        0.22        0.22
{txt}          3 {c |}{res}     71,142       99.78      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     71,302      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     71,302      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     71,302      100.00
{txt}(52968 observations deleted)
(20 observations deleted)
(1441 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw2 {c |}{res}       117     1.25999    .4199989    .924903     3.5619
{txt}{space 4}ratiomw2 {c |}{res}       117    1.096645    .2597049   .6789463   2.486269
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        1.68        1.68
{txt}          3 {c |}{res}        117       98.32      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        119      100.00
    2
{txt}(2 observations deleted)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it2.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          4        3.31        3.31
{txt}          2 {c |}{res}         30       24.79       28.10
{txt}          3 {c |}{res}         87       71.90      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        121      100.00
{txt}
     {c TLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c TRC}
     {c |} {res}product        spdomain   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c RT}
 88. {c |} {res}    157   Central rural        157 {txt}{c |}
 89. {c |} {res}    157         Western        157 {txt}{c |}
 90. {c |} {res}    161   Central rural        161 {txt}{c |}
 91. {c |} {res}    161        Northern        161 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c BRC}
(34 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         23       20.91       20.91
{txt}          3 {c |}{res}         87       79.09      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        110      100.00
{txt}(23 observations deleted)

{hline}
-> spdomain = Central rural
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}        87    183.8621    162.5366         10        901
{txt}(0 observations deleted)
(5 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       26  .9027779         0  .9027779  .9027779
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       27  .9084167         0  .9084167  .9084167
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       29  .9067293         0  .9067293  .9067293
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}       82  .9060321  .0023385  .9027779  .9084167
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        2.38        2.38
{txt}          3 {c |}{res}         82       97.62      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         84      100.00
{txt}(2 missing values generated)
(82 real changes made)
(78 real changes made)
(84 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       26  .0000257         0  .0000257  .0000257
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}        1 -2274.083         . -2274.083 -2274.083
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}        1 -2158.821         . -2158.821 -2158.821
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       27 -.0001413         0 -.0001413 -.0001413
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       29  .0000128         0  .0000128  .0000128
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}       84 -52.77271  340.0572 -2274.083  .0000257
{txt}{hline 14}{c BT}{hline 50}
(2 missing values generated)
(82 real changes made)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it2.dta saved
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it2.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(166 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000g.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000g.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      2,215       32.69       32.69
{txt}          3 {c |}{res}      4,560       67.31      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it2.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it2.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)
(4560 real changes made)
(2215 missing values generated)
(4560 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9371.236     395668    79.7216   8.12e+07
{txt}{space 6}cr_it2 {c |}{res}    4560   119399178    15747.29      74018   180.5068    2224831
{txt}{space 5}linpob2 {c |}{res}    4560   119399178    832.1515   287.7942   426.5311   1045.184
{txt}{space 4}linpobr2 {c |}{res}    4560   119399178     2366.52          0    2366.52    2366.52
{txt}(2215 missing values generated)
(6385 missing values generated)
(4170 real changes made)
(2215 missing values generated)
(4170 real changes made)
(2215 missing values generated)
(4170 real changes made)
(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex2 {c |}{col 14}{res}{space 2}  9.03988{col 26}{space 2} .8246489{col 37}{space 5} 7.419297{col 51}{space 3} 10.66046
{txt}{space 4}pg_flex2 {c |}{col 14}{res}{space 2} 2.174543{col 26}{space 2} .2490773{col 37}{space 5} 1.685061{col 51}{space 3} 2.664025
{txt}{space 3}spg_flex2 {c |}{col 14}{res}{space 2} .8013223{col 26}{space 2} .1295629{col 37}{space 5}  .546708{col 51}{space 3} 1.055937
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex2      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} 7.289842{col 26}{space 2} 4.224959{col 37}{space 5}-1.012964{col 51}{space 3} 15.59265
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 9.139856{col 26}{space 2} .8479231{col 37}{space 5} 7.473535{col 51}{space 3} 10.80618
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex2     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .9109928{col 26}{space 2} .6768082{col 37}{space 5} -.419057{col 51}{space 3} 2.241043
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 2.246727{col 26}{space 2} .2610217{col 37}{space 5} 1.733772{col 51}{space 3} 2.759681
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex2    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .2876143{col 26}{space 2} .2114963{col 37}{space 5}-.1280141{col 51}{space 3} .7032426
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} .8306692{col 26}{space 2} .1364607{col 37}{space 5} .5624995{col 51}{space 3} 1.098839
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: strata = {res}CENTRAL 1
    {txt}_subpop_2: strata = {res}CENTRAL 2
    {txt}_subpop_3: strata = {res}MID-NOTHERN
    {txt}_subpop_4: strata = {res}NORTH-EAST
    {txt}_subpop_5: strata = {res}WEST-NILE
    {txt}_subpop_6: strata = {res}MID-WESTERN
    {txt}_subpop_7: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex2      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 5.515636{col 26}{space 2} 1.676174{col 37}{space 5} 2.221653{col 51}{space 3}  8.80962
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 9.339617{col 26}{space 2} 2.227682{col 37}{space 5} 4.961821{col 51}{space 3} 13.71741
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 3.660173{col 26}{space 2} 1.469435{col 37}{space 5} .7724696{col 51}{space 3} 6.547877
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 31.46354{col 26}{space 2} 4.550911{col 37}{space 5} 22.52018{col 51}{space 3}  40.4069
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .8279532{col 26}{space 2}  .412286{col 37}{space 5} .0177371{col 51}{space 3} 1.638169
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 16.08828{col 26}{space 2} 2.610601{col 37}{space 5} 10.95798{col 51}{space 3} 21.21858
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 7.101939{col 26}{space 2} 1.197506{col 37}{space 5} 4.748624{col 51}{space 3} 9.455255
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex2     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.278472{col 26}{space 2} .5260086{col 37}{space 5} .2447703{col 51}{space 3} 2.312173
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2}  1.77024{col 26}{space 2} .5086537{col 37}{space 5}  .770644{col 51}{space 3} 2.769836
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .8169664{col 26}{space 2}  .326784{col 37}{space 5} .1747771{col 51}{space 3} 1.459156
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 9.461845{col 26}{space 2} 1.719786{col 37}{space 5} 6.082156{col 51}{space 3} 12.84153
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2}  .163001{col 26}{space 2} .0925067{col 37}{space 5}-.0187913{col 51}{space 3} .3447933
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 4.173759{col 26}{space 2} .8417612{col 37}{space 5} 2.519547{col 51}{space 3} 5.827971
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 1.304673{col 26}{space 2} .3049965{col 37}{space 5} .7052999{col 51}{space 3} 1.904046
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex2    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4340768{col 26}{space 2} .2417647{col 37}{space 5}-.0410342{col 51}{space 3} .9091879
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .5354969{col 26}{space 2} .1798669{col 37}{space 5} .1820261{col 51}{space 3} .8889678
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .2195594{col 26}{space 2} .0850685{col 37}{space 5} .0523845{col 51}{space 3} .3867344
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 3.750829{col 26}{space 2} .8160091{col 37}{space 5} 2.147224{col 51}{space 3} 5.354433
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .0378839{col 26}{space 2} .0231791{col 37}{space 5}-.0076673{col 51}{space 3}  .083435
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.726131{col 26}{space 2} .5007115{col 37}{space 5} .7421431{col 51}{space 3}  2.71012
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .4023278{col 26}{space 2} .1336696{col 37}{space 5} .1396429{col 51}{space 3} .6650127
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

         {txt}Over: strata rural
    _subpop_1: {res}CENTRAL 1 Rural
    {txt}_subpop_2: {res}CENTRAL 2 Rural
    {txt}_subpop_3: {res}MID-NOTHERN Urban
    {txt}_subpop_4: {res}MID-NOTHERN Rural
    {txt}_subpop_5: {res}NORTH-EAST Urban
    {txt}_subpop_6: {res}NORTH-EAST Rural
    {txt}_subpop_7: {res}WEST-NILE Urban
    {txt}_subpop_8: {res}WEST-NILE Rural
    {txt}_subpop_9: {res}MID-WESTERN Urban
   {txt}_subpop_10: {res}MID-WESTERN Rural
   {txt}_subpop_11: {res}SOUTH-WESTERN Urban
   {txt}_subpop_12: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex2      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 5.515636{col 26}{space 2} 1.676174{col 37}{space 5} 2.221653{col 51}{space 3}  8.80962
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 9.339617{col 26}{space 2} 2.227682{col 37}{space 5} 4.961821{col 51}{space 3} 13.71741
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 4.058968{col 26}{space 2} 1.618529{col 37}{space 5} .8782678{col 51}{space 3} 7.239667
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7674287{col 51}{space 3} 14.43073
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 32.37561{col 26}{space 2} 4.718963{col 37}{space 5} 23.10199{col 51}{space 3} 41.64922
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .9506069{col 26}{space 2} .4778648{col 37}{space 5} .0115167{col 51}{space 3} 1.889697
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 32.11155{col 26}{space 2} 11.19353{col 37}{space 5} 10.11424{col 51}{space 3} 54.10886
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 15.08676{col 26}{space 2} 2.626873{col 37}{space 5} 9.924481{col 51}{space 3} 20.24904
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 7.463848{col 26}{space 2} 1.245648{col 37}{space 5} 5.015926{col 51}{space 3}  9.91177
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex2     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.278472{col 26}{space 2} .5260086{col 37}{space 5} .2447703{col 51}{space 3} 2.312173
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2}  1.77024{col 26}{space 2} .5086537{col 37}{space 5}  .770644{col 51}{space 3} 2.769836
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .9059791{col 26}{space 2} .3602057{col 37}{space 5}   .19811{col 51}{space 3} 1.613848
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 3.476541{col 26}{space 2} 1.967797{col 37}{space 5}-.3905347{col 51}{space 3} 7.343616
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 9.683466{col 26}{space 2}  1.78357{col 37}{space 5} 6.178431{col 51}{space 3}  13.1885
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .1871481{col 26}{space 2} .1070451{col 37}{space 5}-.0232148{col 51}{space 3} .3975111
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 3.585287{col 26}{space 2} 2.948842{col 37}{space 5}-2.209719{col 51}{space 3} 9.380292
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 4.210541{col 26}{space 2}  .872925{col 37}{space 5} 2.495087{col 51}{space 3} 5.925996
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 1.371158{col 26}{space 2}  .319065{col 37}{space 5} .7441378{col 51}{space 3} 1.998178
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex2    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4340768{col 26}{space 2} .2417647{col 37}{space 5}-.0410342{col 51}{space 3} .9091879
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .5354969{col 26}{space 2} .1798669{col 37}{space 5} .1820261{col 51}{space 3} .8889678
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .2434815{col 26}{space 2} .0938538{col 37}{space 5} .0590419{col 51}{space 3} .4279212
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.769167{col 26}{space 2} 1.001387{col 37}{space 5}-.1987381{col 51}{space 3} 3.737072
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 3.824205{col 26}{space 2} .8467871{col 37}{space 5} 2.160116{col 51}{space 3} 5.488294
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2}  .043496{col 26}{space 2} .0267994{col 37}{space 5}-.0091696{col 51}{space 3} .0961616
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2}  1.02244{col 26}{space 2} .9065997{col 37}{space 5}-.7591918{col 51}{space 3} 2.804071
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 1.770115{col 26}{space 2} .5260874{col 37}{space 5} .7362586{col 51}{space 3} 2.803972
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2}   .42283{col 26}{space 2}  .140176{col 37}{space 5}  .147359{col 51}{space 3} .6983011
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: spdomain = {res}Central rural
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex2      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 7.441492{col 26}{space 2} 1.413521{col 37}{space 5}  4.66367{col 51}{space 3} 10.21931
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 7.202911{col 26}{space 2} 1.153181{col 37}{space 5} 4.936703{col 51}{space 3} 9.469119
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 11.72586{col 26}{space 2} 1.522218{col 37}{space 5} 8.734428{col 51}{space 3} 14.71729
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex2     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.526139{col 26}{space 2} .3669632{col 37}{space 5} .8049903{col 51}{space 3} 2.247288
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 1.995022{col 26}{space 2} .3590705{col 37}{space 5} 1.289384{col 51}{space 3}  2.70066
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 2.780961{col 26}{space 2} .4820692{col 37}{space 5} 1.833608{col 51}{space 3} 3.728314
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex2    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4851546{col 26}{space 2} .1504581{col 37}{space 5} .1894773{col 51}{space 3} .7808319
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} .7296221{col 26}{space 2} .1491989{col 37}{space 5} .4364195{col 51}{space 3} 1.022825
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 1.083491{col 26}{space 2} .2797882{col 37}{space 5} .5336567{col 51}{space 3} 1.633325
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}h_flex2 was {res}float{txt} now {res}byte
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it2.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex2 {c |}{res}    4560   119399178     9.03988   28.67837          0        100
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it2.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor3 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 4,754.8827       70.18       70.18
{txt}          1 {c |}{res} 2,020.1173       29.82      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it3.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it3.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(72034 observations deleted)
(2124 missing values generated)
{res} 2124
    0
{txt}(2182 missing values generated)
{res} 2182
{txt}(2182 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000h.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000h.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000i.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000i.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     22,155      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     22,155      100.00
   93
{txt}(93 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000h.tmp saved
40
40
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it3.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it3.dta saved
(5850 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000j.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000j.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         99        0.12        0.12
{txt}          3 {c |}{res}     83,746       99.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,845      100.00
{txt}(99 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000j.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     14,282       17.05       17.05
{txt}          2 {c |}{res}          2        0.00       17.06
{txt}          3 {c |}{res}     69,464       82.94      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,748      100.00
{txt}(14284 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000l.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000l.tmp saved
unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}product was {res}float{txt} now {res}int
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}int
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        160        0.23        0.23
{txt}          3 {c |}{res}     69,464       99.77      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     69,624      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     69,624      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     69,624      100.00
{txt}(52191 observations deleted)
(24 observations deleted)
(1364 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw3 {c |}{res}       113      1.2583    .3655107   .9534166   3.075523
{txt}{space 4}ratiomw3 {c |}{res}       113    1.122032    .4899466   .5355511   5.409924
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        1.74        1.74
{txt}          3 {c |}{res}        113       98.26      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        115      100.00
    2
{txt}(2 observations deleted)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it3.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it3.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          4        3.42        3.42
{txt}          2 {c |}{res}         27       23.08       26.50
{txt}          3 {c |}{res}         86       73.50      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        117      100.00
{txt}
     {c TLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c TRC}
     {c |} {res}product        spdomain   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c RT}
 87. {c |} {res}    157   Central rural        157 {txt}{c |}
 88. {c |} {res}    157         Western        157 {txt}{c |}
 89. {c |} {res}    161   Central rural        161 {txt}{c |}
 90. {c |} {res}    161        Northern        161 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c BRC}
(31 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         24       21.82       21.82
{txt}          3 {c |}{res}         86       78.18      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        110      100.00
{txt}(24 observations deleted)

{hline}
-> spdomain = Central rural
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}        86    180.1395    138.7945         15        675
{txt}(0 observations deleted)
(4 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       28  .9046973         0  .9046973  .9046973
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       25  .9020925         0  .9020925  .9020925
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       29  .9031594         0  .9031594  .9031594
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}       82  .9033593  .0010623  .9020925  .9046973
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        2.38        2.38
{txt}          3 {c |}{res}         82       97.62      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         84      100.00
{txt}(2 missing values generated)
(82 real changes made)
(78 real changes made)
(84 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       28 -.0002313         0 -.0002313 -.0002313
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}        1 -2274.083         . -2274.083 -2274.083
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}        1 -2158.821         . -2158.821 -2158.821
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       25  .0001156         0  .0001156  .0001156
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       29  .0000128         0  .0000128  .0000128
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}       84 -52.77271  340.0572 -2274.083  .0001156
{txt}{hline 14}{c BT}{hline 50}
(2 missing values generated)
(82 real changes made)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it3.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it3.dta saved
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it3.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it3.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(116 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000n.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000n.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      2,215       32.69       32.69
{txt}          3 {c |}{res}      4,560       67.31      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it3.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it3.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it3.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)
(4560 real changes made)
(2215 missing values generated)
(4560 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9371.236     395668    79.7216   8.12e+07
{txt}{space 6}cr_it3 {c |}{res}    4560   119399178    15747.29   89658.14   250.2656    3084641
{txt}{space 5}linpob3 {c |}{res}    4560   119399178    641.4443    232.177   408.3195   997.7021
{txt}{space 4}linpobr3 {c |}{res}    4560   119399178    1857.295   .0000576   1857.294   1857.295
{txt}(2215 missing values generated)
(6508 missing values generated)
(4293 real changes made)
(2215 missing values generated)
(4293 real changes made)
(2215 missing values generated)
(4293 real changes made)
(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex3 {c |}{col 14}{res}{space 2} 4.871455{col 26}{space 2} .5849848{col 37}{space 5} 3.721854{col 51}{space 3} 6.021055
{txt}{space 4}pg_flex3 {c |}{col 14}{res}{space 2} 1.155529{col 26}{space 2} .1669168{col 37}{space 5} .8275075{col 51}{space 3} 1.483551
{txt}{space 3}spg_flex3 {c |}{col 14}{res}{space 2} .4412826{col 26}{space 2} .0947818{col 37}{space 5} .2550192{col 51}{space 3}  .627546
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex3      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .2776652{col 26}{space 2} .2465331{col 37}{space 5}-.2068168{col 51}{space 3} .7621472
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 5.133887{col 26}{space 2} .6184882{col 37}{space 5} 3.918446{col 51}{space 3} 6.349328
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex3     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .1383022{col 26}{space 2} .1204776{col 37}{space 5}-.0984579{col 51}{space 3} .3750624
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.213641{col 26}{space 2} .1763993{col 37}{space 5} .8669844{col 51}{space 3} 1.560297
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex3    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .0691384{col 26}{space 2} .0589621{col 37}{space 5}-.0467327{col 51}{space 3} .1850095
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} .4625423{col 26}{space 2} .1000797{col 37}{space 5} .2658677{col 51}{space 3} .6592169
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: strata = {res}CENTRAL 1
    {txt}_subpop_2: strata = {res}CENTRAL 2
    {txt}_subpop_3: strata = {res}MID-NOTHERN
    {txt}_subpop_4: strata = {res}NORTH-EAST
    {txt}_subpop_5: strata = {res}WEST-NILE
    {txt}_subpop_6: strata = {res}MID-WESTERN
    {txt}_subpop_7: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex3      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 5.188173{col 26}{space 2} 1.657312{col 37}{space 5} 1.931257{col 51}{space 3}  8.44509
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 8.445135{col 26}{space 2} 2.169572{col 37}{space 5} 4.181535{col 51}{space 3} 12.70873
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 3.586909{col 26}{space 2} 1.469703{col 37}{space 5}  .698678{col 51}{space 3}  6.47514
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 30.06865{col 26}{space 2} 4.489363{col 37}{space 5} 21.24624{col 51}{space 3} 38.89105
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .8279532{col 26}{space 2}  .412286{col 37}{space 5} .0177371{col 51}{space 3} 1.638169
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  2.64799{col 26}{space 2} 1.022481{col 37}{space 5} .6386307{col 51}{space 3} 4.657349
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .7706408{col 26}{space 2} .4559784{col 37}{space 5}-.1254388{col 51}{space 3}  1.66672
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex3     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.174761{col 26}{space 2} .5046003{col 37}{space 5} .1831305{col 51}{space 3} 2.166391
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 1.592853{col 26}{space 2}  .476691{col 37}{space 5} .6560689{col 51}{space 3} 2.529636
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .6916682{col 26}{space 2} .2780239{col 37}{space 5} .1453011{col 51}{space 3} 1.238035
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 8.509349{col 26}{space 2} 1.615881{col 37}{space 5} 5.333852{col 51}{space 3} 11.68485
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .1333433{col 26}{space 2} .0793915{col 37}{space 5}-.0226753{col 51}{space 3} .2893619
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} .7906475{col 26}{space 2} .4199565{col 37}{space 5}-.0346426{col 51}{space 3} 1.615938
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .1335549{col 26}{space 2} .0737116{col 37}{space 5}-.0113016{col 51}{space 3} .2784114
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex3    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .3932011{col 26}{space 2} .2285923{col 37}{space 5} -.056024{col 51}{space 3} .8424262
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .4764121{col 26}{space 2} .1650467{col 37}{space 5} .1520657{col 51}{space 3} .8007585
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .1707055{col 26}{space 2} .0671006{col 37}{space 5} .0388407{col 51}{space 3} .3025703
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 3.272955{col 26}{space 2} .7412479{col 37}{space 5} 1.816269{col 51}{space 3}  4.72964
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2}  .027797{col 26}{space 2} .0175433{col 37}{space 5}-.0066787{col 51}{space 3} .0622726
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} .5350842{col 26}{space 2} .3641911{col 37}{space 5}-.1806169{col 51}{space 3} 1.250785
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .0284768{col 26}{space 2} .0158731{col 37}{space 5}-.0027167{col 51}{space 3} .0596702
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

         {txt}Over: strata rural
    _subpop_1: {res}CENTRAL 1 Rural
    {txt}_subpop_2: {res}CENTRAL 2 Rural
    {txt}_subpop_3: {res}MID-NOTHERN Urban
    {txt}_subpop_4: {res}MID-NOTHERN Rural
    {txt}_subpop_5: {res}NORTH-EAST Urban
    {txt}_subpop_6: {res}NORTH-EAST Rural
    {txt}_subpop_7: {res}WEST-NILE Urban
    {txt}_subpop_8: {res}WEST-NILE Rural
    {txt}_subpop_9: {res}MID-WESTERN Urban
   {txt}_subpop_10: {res}MID-WESTERN Rural
   {txt}_subpop_11: {res}SOUTH-WESTERN Urban
   {txt}_subpop_12: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex3      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 5.188173{col 26}{space 2} 1.657312{col 37}{space 5} 1.931257{col 51}{space 3}  8.44509
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 8.445135{col 26}{space 2} 2.169572{col 37}{space 5} 4.181535{col 51}{space 3} 12.70873
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 3.977721{col 26}{space 2} 1.619086{col 37}{space 5} .7959244{col 51}{space 3} 7.159517
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7674287{col 51}{space 3} 14.43073
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 30.92906{col 26}{space 2} 4.649166{col 37}{space 5} 21.79261{col 51}{space 3} 40.06551
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .9506069{col 26}{space 2} .4778648{col 37}{space 5} .0115167{col 51}{space 3} 1.889697
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .1517281{col 26}{space 2} .1492219{col 37}{space 5}-.1415197{col 51}{space 3} .4449759
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 2.804017{col 26}{space 2} 1.081681{col 37}{space 5} .6783195{col 51}{space 3} 4.929713
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2}  .809912{col 26}{space 2} .4789074{col 37}{space 5}-.1312271{col 51}{space 3} 1.751051
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex3     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.174761{col 26}{space 2} .5046003{col 37}{space 5} .1831305{col 51}{space 3} 2.166391
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 1.592853{col 26}{space 2}  .476691{col 37}{space 5} .6560689{col 51}{space 3} 2.529636
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .7670289{col 26}{space 2} .3065364{col 37}{space 5} .1646297{col 51}{space 3} 1.369428
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 3.326898{col 26}{space 2} 1.883096{col 37}{space 5}-.3737247{col 51}{space 3} 7.027521
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 8.701243{col 26}{space 2} 1.675826{col 37}{space 5} 5.407943{col 51}{space 3} 11.99454
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .1530969{col 26}{space 2} .0918156{col 37}{space 5}-.0273373{col 51}{space 3}  .333531
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .0879453{col 26}{space 2} .0864926{col 37}{space 5}-.0820282{col 51}{space 3} .2579187
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .8345694{col 26}{space 2}  .443296{col 37}{space 5}-.0365871{col 51}{space 3} 1.705726
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} .1403607{col 26}{space 2} .0774087{col 37}{space 5}-.0117612{col 51}{space 3} .2924827
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex3    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .3932011{col 26}{space 2} .2285923{col 37}{space 5} -.056024{col 51}{space 3} .8424262
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .4764121{col 26}{space 2} .1650467{col 37}{space 5} .1520657{col 51}{space 3} .8007585
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .1893047{col 26}{space 2} .0740764{col 37}{space 5} .0437313{col 51}{space 3} .3348782
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.620143{col 26}{space 2} .9170357{col 37}{space 5}-.1819976{col 51}{space 3} 3.422283
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 3.334154{col 26}{space 2} .7692275{col 37}{space 5} 1.822484{col 51}{space 3} 4.845825
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .0319149{col 26}{space 2} .0202766{col 37}{space 5}-.0079322{col 51}{space 3} .0717619
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .0509752{col 26}{space 2} .0501332{col 37}{space 5}-.0475455{col 51}{space 3} .1494959
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}  .565343{col 26}{space 2} .3849433{col 37}{space 5}-.1911397{col 51}{space 3} 1.321826
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} .0299279{col 26}{space 2}  .016669{col 37}{space 5}-.0028298{col 51}{space 3} .0626856
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: spdomain = {res}Central rural
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex3      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 6.828463{col 26}{space 2} 1.382697{col 37}{space 5} 4.111215{col 51}{space 3} 9.545712
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 6.940527{col 26}{space 2} 1.155428{col 37}{space 5} 4.669903{col 51}{space 3} 9.211151
{txt}{space 5}Western {c |}{col 14}{res}{space 2}  1.73663{col 26}{space 2} .5765524{col 37}{space 5} .6036011{col 51}{space 3}  2.86966
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex3     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.385323{col 26}{space 2} .3478384{col 37}{space 5} .7017577{col 51}{space 3} 2.068888
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 1.768162{col 26}{space 2} .3284616{col 37}{space 5} 1.122676{col 51}{space 3} 2.413649
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .4716618{col 26}{space 2} .2271332{col 37}{space 5} .0253042{col 51}{space 3} .9180195
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex3    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4351083{col 26}{space 2} .1407246{col 37}{space 5} .1585591{col 51}{space 3} .7116575
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} .6244358{col 26}{space 2} .1328257{col 37}{space 5} .3634094{col 51}{space 3} .8854622
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .2891515{col 26}{space 2} .1942491{col 37}{space 5}-.0925829{col 51}{space 3} .6708859
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}h_flex3 was {res}float{txt} now {res}byte
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it3.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it3.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex3 {c |}{res}    4560   119399178    4.871455   21.52942          0        100
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it3.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it3.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor4 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 4,759.0741       70.24       70.24
{txt}          1 {c |}{res} 2,015.9259       29.76      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it4.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it4.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(71614 observations deleted)
(2160 missing values generated)
{res} 2160
    0
{txt}(2219 missing values generated)
{res} 2219
{txt}(2219 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000o.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000o.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000p.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000p.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     22,538      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     22,538      100.00
   94
{txt}(94 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000o.tmp saved
40
40
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it4.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it4.dta saved
(5850 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000q.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000q.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         99        0.12        0.12
{txt}          3 {c |}{res}     83,746       99.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,845      100.00
{txt}(99 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000q.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     14,282       17.05       17.05
{txt}          2 {c |}{res}          2        0.00       17.06
{txt}          3 {c |}{res}     69,464       82.94      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,748      100.00
{txt}(14284 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000s.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000s.tmp saved
unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}product was {res}float{txt} now {res}int
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}int
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        160        0.23        0.23
{txt}          3 {c |}{res}     69,464       99.77      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     69,624      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     69,624      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     69,624      100.00
{txt}(51928 observations deleted)
(22 observations deleted)
(1359 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw4 {c |}{res}       114    1.512375    2.600098   .8607472   28.64831
{txt}{space 4}ratiomw4 {c |}{res}       114    1.114349    .2763133   .5845137   2.362324
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        1.72        1.72
{txt}          3 {c |}{res}        114       98.28      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        116      100.00
    2
{txt}(2 observations deleted)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it4.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it4.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          3        2.56        2.56
{txt}          2 {c |}{res}         27       23.08       25.64
{txt}          3 {c |}{res}         87       74.36      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        117      100.00
{txt}
     {c TLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c TRC}
     {c |} {res}product        spdomain   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c RT}
 88. {c |} {res}    157   Central rural        157 {txt}{c |}
 89. {c |} {res}    161   Central rural        161 {txt}{c |}
 90. {c |} {res}    161        Northern        161 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c BRC}
(30 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         24       21.62       21.62
{txt}          3 {c |}{res}         87       78.38      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        111      100.00
{txt}(24 observations deleted)

{hline}
-> spdomain = Central rural
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}        87    181.7471     141.578         18        797
{txt}(0 observations deleted)
(5 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       29  .8986201         0  .8986201  .8986201
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26  .9008945         0  .9008945  .9008945
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       27   .900838         0   .900838   .900838
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}       82  .9000715  .0010805  .8986201  .9008945
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        2.38        2.38
{txt}          3 {c |}{res}         82       97.62      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         84      100.00
{txt}(2 missing values generated)
(82 real changes made)
(78 real changes made)
(84 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       29  .0000257         0  .0000257  .0000257
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}        1 -2274.083         . -2274.083 -2274.083
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}        1 -2158.821         . -2158.821 -2158.821
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26 -.0001413         0 -.0001413 -.0001413
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       27  .0000128         0  .0000128  .0000128
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}       84  -52.7727  340.0572 -2274.083  .0000257
{txt}{hline 14}{c BT}{hline 50}
(2 missing values generated)
(82 real changes made)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it4.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it4.dta saved
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it4.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it4.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(132 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000u.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000u.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      2,215       32.69       32.69
{txt}          3 {c |}{res}      4,560       67.31      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it4.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it4.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it4.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)
(4560 real changes made)
(2215 missing values generated)
(4560 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9371.236     395668    79.7216   8.12e+07
{txt}{space 6}cr_it4 {c |}{res}    4560   119399178    15747.29   71583.93   125.0822    3448168
{txt}{space 5}linpob4 {c |}{res}    4560   119399178    655.6087   285.1698   416.4765   1010.762
{txt}{space 4}linpobr4 {c |}{res}    4560   119399178    1585.873   .0000576   1585.872   1585.873
{txt}(2215 missing values generated)
(6467 missing values generated)
(4252 real changes made)
(2215 missing values generated)
(4252 real changes made)
(2215 missing values generated)
(4252 real changes made)
(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex4 {c |}{col 14}{res}{space 2} 6.541147{col 26}{space 2} .7179173{col 37}{space 5} 5.130311{col 51}{space 3} 7.951984
{txt}{space 4}pg_flex4 {c |}{col 14}{res}{space 2} 1.607527{col 26}{space 2} .2190952{col 37}{space 5} 1.176966{col 51}{space 3} 2.038089
{txt}{space 3}spg_flex4 {c |}{col 14}{res}{space 2} .6065194{col 26}{space 2} .1184191{col 37}{space 5} .3738046{col 51}{space 3} .8392341
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex4      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} 3.425203{col 26}{space 2} 2.683656{col 37}{space 5}-1.848663{col 51}{space 3}  8.69907
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 6.719154{col 26}{space 2}  .746109{col 37}{space 5} 5.252915{col 51}{space 3} 8.185392
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex4     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .8114272{col 26}{space 2} .6108183{col 37}{space 5}-.3889407{col 51}{space 3} 2.011795
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.653006{col 26}{space 2} .2296436{col 37}{space 5} 1.201715{col 51}{space 3} 2.104297
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex4    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .2494969{col 26}{space 2} .1822683{col 37}{space 5}-.1086931{col 51}{space 3} .6076869
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} .6269152{col 26}{space 2} .1248131{col 37}{space 5} .3816351{col 51}{space 3} .8721953
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: strata = {res}CENTRAL 1
    {txt}_subpop_2: strata = {res}CENTRAL 2
    {txt}_subpop_3: strata = {res}MID-NOTHERN
    {txt}_subpop_4: strata = {res}NORTH-EAST
    {txt}_subpop_5: strata = {res}WEST-NILE
    {txt}_subpop_6: strata = {res}MID-WESTERN
    {txt}_subpop_7: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex4      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0040708{col 26}{space 2} .0040958{col 37}{space 5}-.0039783{col 51}{space 3} .0121199
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 3.586909{col 26}{space 2} 1.469703{col 37}{space 5}  .698678{col 51}{space 3}  6.47514
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 30.72871{col 26}{space 2} 4.553811{col 37}{space 5} 21.77966{col 51}{space 3} 39.67777
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .8279532{col 26}{space 2}  .412286{col 37}{space 5} .0177371{col 51}{space 3} 1.638169
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 14.63584{col 26}{space 2}   2.5033{col 37}{space 5} 9.716408{col 51}{space 3} 19.55528
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 6.482909{col 26}{space 2} 1.145752{col 37}{space 5}   4.2313{col 51}{space 3} 8.734518
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex4     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0002946{col 26}{space 2} .0002964{col 37}{space 5}-.0002879{col 51}{space 3}  .000877
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .7483735{col 26}{space 2} .3002983{col 37}{space 5} .1582334{col 51}{space 3} 1.338514
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 8.939915{col 26}{space 2}  1.66273{col 37}{space 5} 5.672352{col 51}{space 3} 12.20748
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .1469477{col 26}{space 2} .0853507{col 37}{space 5}-.0207818{col 51}{space 3} .3146773
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 3.807965{col 26}{space 2} .8000899{col 37}{space 5} 2.235645{col 51}{space 3} 5.380286
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 1.125575{col 26}{space 2} .2861372{col 37}{space 5}  .563264{col 51}{space 3} 1.687886
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex4    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0000213{col 26}{space 2} .0000214{col 37}{space 5}-.0000208{col 51}{space 3} .0000635
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .1920231{col 26}{space 2}  .074849{col 37}{space 5} .0449313{col 51}{space 3} .3391149
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 3.484438{col 26}{space 2} .7748492{col 37}{space 5}  1.96172{col 51}{space 3} 5.007156
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .0321573{col 26}{space 2} .0200171{col 37}{space 5}-.0071798{col 51}{space 3} .0714945
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.569242{col 26}{space 2} .4820378{col 37}{space 5}  .621951{col 51}{space 3} 2.516533
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .3459885{col 26}{space 2} .1237101{col 37}{space 5}  .102876{col 51}{space 3}  .589101
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

         {txt}Over: strata rural
    _subpop_1: {res}CENTRAL 1 Rural
    {txt}_subpop_2: {res}CENTRAL 2 Rural
    {txt}_subpop_3: {res}MID-NOTHERN Urban
    {txt}_subpop_4: {res}MID-NOTHERN Rural
    {txt}_subpop_5: {res}NORTH-EAST Urban
    {txt}_subpop_6: {res}NORTH-EAST Rural
    {txt}_subpop_7: {res}WEST-NILE Urban
    {txt}_subpop_8: {res}WEST-NILE Rural
    {txt}_subpop_9: {res}MID-WESTERN Urban
   {txt}_subpop_10: {res}MID-WESTERN Rural
   {txt}_subpop_11: {res}SOUTH-WESTERN Urban
   {txt}_subpop_12: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex4      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0040708{col 26}{space 2} .0040958{col 37}{space 5}-.0039783{col 51}{space 3} .0121199
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 3.977721{col 26}{space 2} 1.619086{col 37}{space 5} .7959244{col 51}{space 3} 7.159517
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7674287{col 51}{space 3} 14.43073
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 31.61356{col 26}{space 2} 4.718604{col 37}{space 5} 22.34066{col 51}{space 3} 40.88647
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .9506069{col 26}{space 2} .4778648{col 37}{space 5} .0115167{col 51}{space 3} 1.889697
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 14.49745{col 26}{space 2}  11.8398{col 37}{space 5}-8.769884{col 51}{space 3} 37.76479
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 14.64449{col 26}{space 2} 2.554226{col 37}{space 5}  9.62498{col 51}{space 3} 19.66401
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 6.813272{col 26}{space 2} 1.194066{col 37}{space 5} 4.466718{col 51}{space 3} 9.159826
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex4     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0002946{col 26}{space 2} .0002964{col 37}{space 5}-.0002879{col 51}{space 3}  .000877
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .8299126{col 26}{space 2} .3310545{col 37}{space 5} .1793309{col 51}{space 3} 1.480494
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 3.395541{col 26}{space 2}  1.92195{col 37}{space 5}-.3814356{col 51}{space 3} 7.172518
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  9.14521{col 26}{space 2}  1.72439{col 37}{space 5} 5.756473{col 51}{space 3} 12.53395
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .1687167{col 26}{space 2} .0987365{col 37}{space 5}-.0253183{col 51}{space 3} .3627517
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 3.144696{col 26}{space 2} 2.671388{col 37}{space 5}-2.105061{col 51}{space 3} 8.394454
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 3.849422{col 26}{space 2} .8309817{col 37}{space 5} 2.216394{col 51}{space 3} 5.482451
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 1.182933{col 26}{space 2} .2995611{col 37}{space 5} .5942417{col 51}{space 3} 1.771625
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex4    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0000213{col 26}{space 2} .0000214{col 37}{space 5}-.0000208{col 51}{space 3} .0000635
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2}  .212945{col 26}{space 2} .0826045{col 37}{space 5} .0506124{col 51}{space 3} .3752777
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.687688{col 26}{space 2} .9552679{col 37}{space 5}-.1895852{col 51}{space 3} 3.564962
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 3.550968{col 26}{space 2} .8040869{col 37}{space 5} 1.970792{col 51}{space 3} 5.131143
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .0369212{col 26}{space 2} .0231392{col 37}{space 5}-.0085515{col 51}{space 3} .0823938
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .8619937{col 26}{space 2} .7740387{col 37}{space 5}-.6591317{col 51}{space 3} 2.383119
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 1.613448{col 26}{space 2} .5069688{col 37}{space 5} .6171632{col 51}{space 3} 2.609733
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} .3636198{col 26}{space 2} .1297727{col 37}{space 5} .1085931{col 51}{space 3} .6186464
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: spdomain = {res}Central rural
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex4      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0020502{col 26}{space 2} .0020576{col 37}{space 5}-.0019935{col 51}{space 3} .0060938
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 7.047332{col 26}{space 2} 1.158395{col 37}{space 5} 4.770876{col 51}{space 3} 9.323787
{txt}{space 5}Western {c |}{col 14}{res}{space 2}   10.678{col 26}{space 2} 1.459967{col 37}{space 5} 7.808903{col 51}{space 3}  13.5471
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex4     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0001483{col 26}{space 2} .0001489{col 37}{space 5}-.0001442{col 51}{space 3} .0004409
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 1.870812{col 26}{space 2} .3423494{col 37}{space 5} 1.198034{col 51}{space 3}  2.54359
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 2.505799{col 26}{space 2} .4572668{col 37}{space 5} 1.607187{col 51}{space 3}  3.40441
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex4    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0000107{col 26}{space 2} .0000108{col 37}{space 5}-.0000104{col 51}{space 3} .0000319
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} .6707996{col 26}{space 2} .1400988{col 37}{space 5} .3954803{col 51}{space 3} .9461188
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .9754135{col 26}{space 2} .2684542{col 37}{space 5} .4478526{col 51}{space 3} 1.502974
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}h_flex4 was {res}float{txt} now {res}byte
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it4.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it4.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex4 {c |}{res}    4560   119399178    6.541147   24.72776          0        100
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it4.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it4.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor5 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}   4,758.33       70.23       70.23
{txt}          1 {c |}{res}   2,016.67       29.77      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it5.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it5.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     96,371      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     96,371      100.00
{txt}(71445 observations deleted)
(2152 missing values generated)
{res} 2152
    0
{txt}(2210 missing values generated)
{res} 2210
{txt}(2210 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000v.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000v.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000w.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000w.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     22,716      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     22,716      100.00
   92
{txt}(92 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000v.tmp saved
43
43
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it5.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it5.dta saved
(5850 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000x.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000x.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         99        0.12        0.12
{txt}          3 {c |}{res}     83,746       99.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,845      100.00
{txt}(99 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00000x.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     11,848       14.15       14.15
{txt}          2 {c |}{res}          2        0.00       14.15
{txt}          3 {c |}{res}     71,898       85.85      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     83,748      100.00
{txt}(11850 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000011.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000011.tmp saved
unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}product was {res}float{txt} now {res}int
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}int
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        160        0.22        0.22
{txt}          3 {c |}{res}     71,898       99.78      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     72,058      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     72,058      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     72,058      100.00
{txt}(53634 observations deleted)
(19 observations deleted)
(1488 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw5 {c |}{res}       121    1.299384     .543515   .8829749   4.399632
{txt}{space 4}ratiomw5 {c |}{res}       121    1.136339    .5596263   .6595724   6.695946
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        1.63        1.63
{txt}          3 {c |}{res}        121       98.37      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        123      100.00
    2
{txt}(2 observations deleted)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it5.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it5.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          3        2.42        2.42
{txt}          2 {c |}{res}         35       28.23       30.65
{txt}          3 {c |}{res}         86       69.35      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        124      100.00
{txt}
     {c TLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c TRC}
     {c |} {res}product        spdomain   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c RT}
 87. {c |} {res}    157   Central rural        157 {txt}{c |}
 88. {c |} {res}    157         Western        157 {txt}{c |}
 89. {c |} {res}    161        Northern        161 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c BRC}
(38 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         21       19.63       19.63
{txt}          3 {c |}{res}         86       80.37      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        107      100.00
{txt}(21 observations deleted)

{hline}
-> spdomain = Central rural
{res}    3
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}        86    185.0349    178.3332          4        817
{txt}(3 observations deleted)
(3 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       24  .8931442         0  .8931442  .8931442
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26  .9005793         0  .9005793  .9005793
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       30  .9056094         0  .9056094  .9056094
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}       80  .9002351  .0051266  .8931442  .9056094
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}          2        2.44        2.44
{txt}          3 {c |}{res}         80       97.56      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         82      100.00
{txt}(2 missing values generated)
(80 real changes made)
(76 real changes made)
(82 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       24  .0000257         0  .0000257  .0000257
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}        1 -2274.083         . -2274.083 -2274.083
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}        1 -2158.821         . -2158.821 -2158.821
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26 -.0001413         0 -.0001413 -.0001413
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       30  .0000128         0  .0000128  .0000128
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}       82 -54.05984  344.1275 -2274.083  .0000257
{txt}{hline 14}{c BT}{hline 50}
(2 missing values generated)
(80 real changes made)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it5.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it5.dta saved
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it5.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it5.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(118 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000013.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000013.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}      2,215       32.69       32.69
{txt}          3 {c |}{res}      4,560       67.31      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it5.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it5.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it5.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)
(4560 real changes made)
(2215 missing values generated)
(4560 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9371.236     395668    79.7216   8.12e+07
{txt}{space 6}cr_it5 {c |}{res}    4560   119399178    15747.29   91130.31   256.0783    3156285
{txt}{space 5}linpob5 {c |}{res}    4560   119399178    640.7266   240.7641   411.1464   1016.252
{txt}{space 4}linpobr5 {c |}{res}    4560   119399178    1845.157          0   1845.157   1845.157
{txt}(2215 missing values generated)
(6505 missing values generated)
(4290 real changes made)
(2215 missing values generated)
(4290 real changes made)
(2215 missing values generated)
(4290 real changes made)
(2215 missing values generated)
(2215 missing values generated)
(2215 missing values generated)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex5 {c |}{col 14}{res}{space 2} 5.000627{col 26}{space 2} .5885792{col 37}{space 5} 3.843963{col 51}{space 3} 6.157291
{txt}{space 4}pg_flex5 {c |}{col 14}{res}{space 2} 1.180391{col 26}{space 2} .1694507{col 37}{space 5} .8473897{col 51}{space 3} 1.513392
{txt}{space 3}spg_flex5 {c |}{col 14}{res}{space 2} .4526127{col 26}{space 2} .0952866{col 37}{space 5} .2653574{col 51}{space 3} .6398681
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex5      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .2776652{col 26}{space 2} .2465331{col 37}{space 5}-.2068168{col 51}{space 3} .7621472
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 5.270439{col 26}{space 2} .6223908{col 37}{space 5} 4.047329{col 51}{space 3} 6.493549
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex5     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .1387449{col 26}{space 2} .1212684{col 37}{space 5}-.0995693{col 51}{space 3} .3770592
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.239898{col 26}{space 2} .1790939{col 37}{space 5} .8879458{col 51}{space 3} 1.591849
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex5    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .0695002{col 26}{space 2} .0597083{col 37}{space 5}-.0478374{col 51}{space 3} .1868379
{txt}{space 7}Rural {c |}{col 14}{res}{space 2}  .474499{col 26}{space 2} .1006165{col 37}{space 5} .2767696{col 51}{space 3} .6722285
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: strata = {res}CENTRAL 1
    {txt}_subpop_2: strata = {res}CENTRAL 2
    {txt}_subpop_3: strata = {res}MID-NOTHERN
    {txt}_subpop_4: strata = {res}NORTH-EAST
    {txt}_subpop_5: strata = {res}WEST-NILE
    {txt}_subpop_6: strata = {res}MID-WESTERN
    {txt}_subpop_7: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex5      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 5.515636{col 26}{space 2} 1.676174{col 37}{space 5} 2.221653{col 51}{space 3}  8.80962
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 9.018085{col 26}{space 2} 2.206636{col 37}{space 5} 4.681648{col 51}{space 3} 13.35452
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 3.586909{col 26}{space 2} 1.469703{col 37}{space 5}  .698678{col 51}{space 3}  6.47514
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 30.17401{col 26}{space 2} 4.491093{col 37}{space 5} 21.34821{col 51}{space 3} 38.99982
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .8279532{col 26}{space 2}  .412286{col 37}{space 5} .0177371{col 51}{space 3} 1.638169
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  2.64799{col 26}{space 2} 1.022481{col 37}{space 5} .6386307{col 51}{space 3} 4.657349
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .7706408{col 26}{space 2} .4559784{col 37}{space 5}-.1254388{col 51}{space 3}  1.66672
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex5     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.249838{col 26}{space 2}  .520259{col 37}{space 5}  .227435{col 51}{space 3}  2.27224
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2}  1.72051{col 26}{space 2} .5000541{col 37}{space 5} .7378136{col 51}{space 3} 2.703206
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .7115743{col 26}{space 2} .2858188{col 37}{space 5}  .149889{col 51}{space 3}  1.27326
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 8.657757{col 26}{space 2} 1.632033{col 37}{space 5} 5.450518{col 51}{space 3}   11.865
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .1381191{col 26}{space 2}  .081471{col 37}{space 5}-.0219861{col 51}{space 3} .2982243
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  .735007{col 26}{space 2} .4178361{col 37}{space 5}-.0861161{col 51}{space 3}  1.55613
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .1144697{col 26}{space 2} .0629121{col 37}{space 5}-.0091639{col 51}{space 3} .2381032
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex5    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4228192{col 26}{space 2} .2382099{col 37}{space 5}-.0453062{col 51}{space 3} .8909445
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .5190909{col 26}{space 2} .1758264{col 37}{space 5} .1735604{col 51}{space 3} .8646213
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .1779815{col 26}{space 2} .0697252{col 37}{space 5}  .040959{col 51}{space 3} .3150039
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 3.345732{col 26}{space 2} .7529139{col 37}{space 5} 1.866121{col 51}{space 3} 4.825343
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .0292762{col 26}{space 2} .0183903{col 37}{space 5}-.0068641{col 51}{space 3} .0654165
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} .5212098{col 26}{space 2} .3611575{col 37}{space 5}-.1885297{col 51}{space 3} 1.230949
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .0226585{col 26}{space 2} .0131844{col 37}{space 5}-.0032512{col 51}{space 3} .0485683
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

         {txt}Over: strata rural
    _subpop_1: {res}CENTRAL 1 Rural
    {txt}_subpop_2: {res}CENTRAL 2 Rural
    {txt}_subpop_3: {res}MID-NOTHERN Urban
    {txt}_subpop_4: {res}MID-NOTHERN Rural
    {txt}_subpop_5: {res}NORTH-EAST Urban
    {txt}_subpop_6: {res}NORTH-EAST Rural
    {txt}_subpop_7: {res}WEST-NILE Urban
    {txt}_subpop_8: {res}WEST-NILE Rural
    {txt}_subpop_9: {res}MID-WESTERN Urban
   {txt}_subpop_10: {res}MID-WESTERN Rural
   {txt}_subpop_11: {res}SOUTH-WESTERN Urban
   {txt}_subpop_12: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex5      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 5.515636{col 26}{space 2} 1.676174{col 37}{space 5} 2.221653{col 51}{space 3}  8.80962
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 9.018085{col 26}{space 2} 2.206636{col 37}{space 5} 4.681648{col 51}{space 3} 13.35452
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 3.977721{col 26}{space 2} 1.619086{col 37}{space 5} .7959244{col 51}{space 3} 7.159517
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7674287{col 51}{space 3} 14.43073
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 31.03832{col 26}{space 2} 4.651497{col 37}{space 5}  21.8973{col 51}{space 3} 40.17935
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .9506069{col 26}{space 2} .4778648{col 37}{space 5} .0115167{col 51}{space 3} 1.889697
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .1517281{col 26}{space 2} .1492219{col 37}{space 5}-.1415197{col 51}{space 3} .4449759
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 2.804017{col 26}{space 2} 1.081681{col 37}{space 5} .6783195{col 51}{space 3} 4.929713
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2}  .809912{col 26}{space 2} .4789074{col 37}{space 5}-.1312271{col 51}{space 3} 1.751051
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex5     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.249838{col 26}{space 2}  .520259{col 37}{space 5}  .227435{col 51}{space 3}  2.27224
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2}  1.72051{col 26}{space 2} .5000541{col 37}{space 5} .7378136{col 51}{space 3} 2.703206
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2}  .789104{col 26}{space 2} .3151161{col 37}{space 5} .1698441{col 51}{space 3} 1.408364
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 3.350995{col 26}{space 2} 1.896735{col 37}{space 5}-.3764316{col 51}{space 3} 7.078421
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 8.854254{col 26}{space 2} 1.692563{col 37}{space 5} 5.528063{col 51}{space 3} 12.18045
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .1585802{col 26}{space 2} .0942309{col 37}{space 5}-.0266005{col 51}{space 3} .3437608
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .0860345{col 26}{space 2} .0846134{col 37}{space 5} -.080246{col 51}{space 3}  .252315
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .7755706{col 26}{space 2} .4412606{col 37}{space 5}-.0915858{col 51}{space 3} 1.642727
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} .1203029{col 26}{space 2} .0660667{col 37}{space 5}  -.00953{col 51}{space 3} .2501359
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex5    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4228192{col 26}{space 2} .2382099{col 37}{space 5}-.0453062{col 51}{space 3} .8909445
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .5190909{col 26}{space 2} .1758264{col 37}{space 5} .1735604{col 51}{space 3} .8646213
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .1973735{col 26}{space 2} .0769649{col 37}{space 5} .0461236{col 51}{space 3} .3486233
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.643697{col 26}{space 2}  .930368{col 37}{space 5}-.1846435{col 51}{space 3} 3.472037
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 3.408754{col 26}{space 2} .7813304{col 37}{space 5}   1.8733{col 51}{space 3} 4.944209
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .0336132{col 26}{space 2} .0212567{col 37}{space 5}  -.00816{col 51}{space 3} .0753864
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .0487842{col 26}{space 2} .0479784{col 37}{space 5}-.0455019{col 51}{space 3} .1430703
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .5507384{col 26}{space 2} .3817698{col 37}{space 5}-.1995079{col 51}{space 3} 1.300985
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_12 {c |}{col 14}{res}{space 2} .0238132{col 26}{space 2} .0138464{col 37}{space 5}-.0033974{col 51}{space 3} .0510238
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}      7{txt}{col 34}Number of obs{col 51}= {res}      4560
{txt}{col 1}Number of PSUs{col 18}= {res}    463{txt}{col 34}Population size{col 51}={res}  119399178
{txt}{col 34}Design df{col 51}= {res}       456

    {txt}_subpop_1: spdomain = {res}Central rural
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex5      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}  7.27956{col 26}{space 2} 1.404294{col 37}{space 5} 4.519871{col 51}{space 3} 10.03925
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 6.957576{col 26}{space 2} 1.154681{col 37}{space 5}  4.68842{col 51}{space 3} 9.226732
{txt}{space 5}Western {c |}{col 14}{res}{space 2}  1.73663{col 26}{space 2} .5765524{col 37}{space 5} .6036011{col 51}{space 3}  2.86966
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex5     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}  1.48688{col 26}{space 2} .3618121{col 37}{space 5} .7758545{col 51}{space 3} 2.197906
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 1.803754{col 26}{space 2} .3332946{col 37}{space 5}  1.14877{col 51}{space 3} 2.458738
{txt}{space 5}Western {c |}{col 14}{res}{space 2} .4337671{col 26}{space 2} .2249602{col 37}{space 5}-.0083202{col 51}{space 3} .8758544
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex5    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4713041{col 26}{space 2} .1478152{col 37}{space 5} .1808206{col 51}{space 3} .7617875
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} .6403536{col 26}{space 2} .1353343{col 37}{space 5} .3743975{col 51}{space 3} .9063098
{txt}{space 5}Western {c |}{col 14}{res}{space 2}  .279188{col 26}{space 2} .1925523{col 37}{space 5}-.0992119{col 51}{space 3} .6575879
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}h_flex5 was {res}float{txt} now {res}byte
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it5.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it5.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex5 {c |}{res}    4560   119399178    5.000627   21.79818          0        100
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it5.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it5.dta saved

{com}. **************************************************************************
> * Send results to one big csv-file
> **************************************************************************;
. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         gen dum=1;
{txt}
{com}.         collapse (mean) dum h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt];
{txt}
{com}. gen geo="National";
{txt}
{com}. gen geono=dum;
{txt}
{com}. tempfile nat;
{txt}
{com}. save `nat';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000014.tmp saved

{com}.         use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(rural);
{txt}
{com}. gen geo="Rural/Urban";
{txt}
{com}. gen geono=rural;
{txt}
{com}. tempfile rur;
{txt}
{com}. save `rur';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000015.tmp saved

{com}. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(news);
{txt}
{com}. gen geo="North/Center/South";
{txt}
{com}. gen geono=news;
{txt}
{com}. tempfile new;
{txt}
{com}. save `new';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000016.tmp saved

{com}. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(reg_tpi);
{txt}
{com}. gen geo="TPI - 6 regions";
{txt}
{com}. gen geono=reg_tpi;
{txt}
{com}. tempfile rtp;
{txt}
{com}. save `rtp';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000017.tmp saved

{com}. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(strata);
{txt}
{com}. gen geo="Provinces";
{txt}
{com}. gen geono=strata;
{txt}
{com}. tempfile str;
{txt}
{com}. save `str';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000018.tmp saved

{com}. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(spdomain);
{txt}
{com}. gen geo="Spatial domains";
{txt}
{com}. gen geono=spdomain;
{txt}
{com}. tempfile r13;
{txt}
{com}. save `r13';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000019.tmp saved

{com}. clear;
{txt}
{com}. set obs 1;
{txt}obs was 0, now 1

{com}. gen geo=" ";
{txt}
{com}. tempfile one;
{txt}
{com}. save `one';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00001a.tmp saved

{com}. use          `nat';
{txt}
{com}. append using `one';
{txt}
{com}. append using `rur';
{txt}geo was {res}str8{txt} now {res}str11
{txt}
{com}. append using `one';
{txt}
{com}. append using `new';
{txt}geo was {res}str11{txt} now {res}str18
{txt}
{com}. append using `one';
{txt}
{com}. append using `rtp';
{txt}
{com}. append using `one';
{txt}
{com}. append using `str';
{txt}
{com}. append using `one';
{txt}
{com}. append using `r13';
{txt}
{com}. outsheet geo geono h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' dum rural news reg_tpi strata spdomain using "$path\work\poverty_flexBask.csv", replace c;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\poverty_flexBask.csv not found)

{com}. **************************************************************************
> * Convergence graph (based on 5 iterations)
> **************************************************************************;
. #delimit cr
{txt}delimiter now cr
{com}. 
. clear
{txt}
{com}. set obs 1
{txt}obs was 0, now 1

{com}. gen iteration=.
{txt}(1 missing value generated)

{com}. tempfile converg
{txt}
{com}. save `converg'
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00001b.tmp saved

{com}. 
. forvalues X = 1/5 {c -(}
{txt}  2{com}.         use "$path/work/cons_real_it`X'.dta", clear
{txt}  3{com}.         collapse (mean) h_flex`X' pg_flex`X' spg_flex`X' [aw=popwt], by(strata)
{txt}  4{com}.         rename h_flex`X' h_flex
{txt}  5{com}.         rename pg_flex`X' pg_flex
{txt}  6{com}.         rename spg_flex`X' spg_flex
{txt}  7{com}.         gen iteration=`X'
{txt}  8{com}.         order iteration
{txt}  9{com}.         *sum
.         if `X' != 1     {c -(}
{txt} 10{com}.                 append using `converg'
{txt} 11{com}.                         {c )-}
{txt} 12{com}.         save `converg', replace
{txt} 13{com}.         {c )-}
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00001b.tmp saved
(label STRA already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00001b.tmp saved
(label STRA already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00001b.tmp saved
(label STRA already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00001b.tmp saved
(label STRA already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f00001b.tmp saved

{com}. 
. use `converg', clear
{txt}
{com}. sum

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 3}iteration {c |}{res}        50           3    1.428571          1          5
{txt}{space 6}strata {c |}{res}        50         5.5    2.901442          1         10
{txt}{space 6}h_flex {c |}{res}        35    7.337457    9.726442          0   31.46354
{txt}{space 5}pg_flex {c |}{res}        35    1.858047    2.790873          0   9.461844
{txt}{space 4}spg_flex {c |}{res}        35    .6999214    1.092563          0   3.750829
{txt}
{com}. 
. twoway (connected h_flex iteration), by(, title(Convergence graph: Poverty rate. %) subtitle(After iterative procedure)) by(strata)
{res}{txt}
{com}. graph export "$path/work/converge_pov_rate.tif", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/converge_pov_rate.tif not found)
(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/converge_pov_rate.tif written in TIFF format)

{com}. 
. sort strata iteration
{txt}
{com}. 
. for var h_flex pg_flex spg_flex: replace X = round(X,0.01)

{res}->  replace h_flex = round(h_flex,0.01)
{txt}(33 real changes made)

{res}->  replace pg_flex = round(pg_flex,0.01)
{txt}(33 real changes made)

{res}->  replace spg_flex = round(spg_flex,0.01)
{txt}(33 real changes made)

{com}. 
. list strata iteration h_flex pg_flex spg_flex
{txt}
     {c TLC}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}       strata   iterat~n   h_flex   pg_flex   spg_flex {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}      KAMPALA          1        .         .          . {txt}{c |}
  2. {c |} {res}      KAMPALA          2        .         .          . {txt}{c |}
  3. {c |} {res}      KAMPALA          3        .         .          . {txt}{c |}
  4. {c |} {res}      KAMPALA          4        .         .          . {txt}{c |}
  5. {c |} {res}      KAMPALA          5        .         .          . {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}    CENTRAL 1          1        0         0          0 {txt}{c |}
  7. {c |} {res}    CENTRAL 1          2     5.52      1.28        .43 {txt}{c |}
  8. {c |} {res}    CENTRAL 1          3     5.19      1.17        .39 {txt}{c |}
  9. {c |} {res}    CENTRAL 1          4        0         0          0 {txt}{c |}
 10. {c |} {res}    CENTRAL 1          5     5.52      1.25        .42 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}    CENTRAL 2          1        0         0          0 {txt}{c |}
 12. {c |} {res}    CENTRAL 2          2     9.34      1.77        .54 {txt}{c |}
 13. {c |} {res}    CENTRAL 2          3     8.45      1.59        .48 {txt}{c |}
 14. {c |} {res}    CENTRAL 2          4        0         0          0 {txt}{c |}
 15. {c |} {res}    CENTRAL 2          5     9.02      1.72        .52 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res} EAST CENTRAL          1        .         .          . {txt}{c |}
 17. {c |} {res} EAST CENTRAL          2        .         .          . {txt}{c |}
 18. {c |} {res} EAST CENTRAL          3        .         .          . {txt}{c |}
 19. {c |} {res} EAST CENTRAL          4        .         .          . {txt}{c |}
 20. {c |} {res} EAST CENTRAL          5        .         .          . {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 21. {c |} {res}      EASTERN          1        .         .          . {txt}{c |}
 22. {c |} {res}      EASTERN          2        .         .          . {txt}{c |}
 23. {c |} {res}      EASTERN          3        .         .          . {txt}{c |}
 24. {c |} {res}      EASTERN          4        .         .          . {txt}{c |}
 25. {c |} {res}      EASTERN          5        .         .          . {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 26. {c |} {res}  MID-NOTHERN          1      .77       .11        .04 {txt}{c |}
 27. {c |} {res}  MID-NOTHERN          2     3.66       .82        .22 {txt}{c |}
 28. {c |} {res}  MID-NOTHERN          3     3.59       .69        .17 {txt}{c |}
 29. {c |} {res}  MID-NOTHERN          4     3.59       .75        .19 {txt}{c |}
 30. {c |} {res}  MID-NOTHERN          5     3.59       .71        .18 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 31. {c |} {res}   NORTH-EAST          1    19.66       4.1       1.28 {txt}{c |}
 32. {c |} {res}   NORTH-EAST          2    31.46      9.46       3.75 {txt}{c |}
 33. {c |} {res}   NORTH-EAST          3    30.07      8.51       3.27 {txt}{c |}
 34. {c |} {res}   NORTH-EAST          4    30.73      8.94       3.48 {txt}{c |}
 35. {c |} {res}   NORTH-EAST          5    30.17      8.66       3.35 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 36. {c |} {res}    WEST-NILE          1       .2       .01          0 {txt}{c |}
 37. {c |} {res}    WEST-NILE          2      .83       .16        .04 {txt}{c |}
 38. {c |} {res}    WEST-NILE          3      .83       .13        .03 {txt}{c |}
 39. {c |} {res}    WEST-NILE          4      .83       .15        .03 {txt}{c |}
 40. {c |} {res}    WEST-NILE          5      .83       .14        .03 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 41. {c |} {res}  MID-WESTERN          1     1.07       .66         .5 {txt}{c |}
 42. {c |} {res}  MID-WESTERN          2    16.09      4.17       1.73 {txt}{c |}
 43. {c |} {res}  MID-WESTERN          3     2.65       .79        .54 {txt}{c |}
 44. {c |} {res}  MID-WESTERN          4    14.64      3.81       1.57 {txt}{c |}
 45. {c |} {res}  MID-WESTERN          5     2.65       .74        .52 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 46. {c |} {res}SOUTH-WESTERN          1      .77       .07        .01 {txt}{c |}
 47. {c |} {res}SOUTH-WESTERN          2      7.1       1.3         .4 {txt}{c |}
 48. {c |} {res}SOUTH-WESTERN          3      .77       .13        .03 {txt}{c |}
 49. {c |} {res}SOUTH-WESTERN          4     6.48      1.13        .35 {txt}{c |}
 50. {c |} {res}SOUTH-WESTERN          5      .77       .11        .02 {txt}{c |}
     {c BLC}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c BRC}

{com}.         
. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 140_iterate.do        (end)
> **************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.                                 
. $no_temp_rev    do "$path/new/150_price_unit_fix.do"    /* Fixed basket: Prices */
{txt}
{com}. $no_temp_rev    do "$path/new/160_food_basket_fix.do"   /* Fixed food basket */
{txt}
{com}. 
.                                 do "$path/new/170_pref_r_price.do"              /* Revealed preference tests */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/170_pref_r_price.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/170_pref_r_price.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}29 Apr 2013, 13:17:18
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 170_pref_r_price.do           (start)
> *
> * This file conducts revealed preference comparisons so that
> * we can check the quality of the regional baskets.
> * It also exports the price and quantity data for work in GAMS
> * Rather than make up for missing prices with shares, we estimate
> * a missing price in this case
> **************************************************************************;
. *global n_spdom "13";
. *global it_n "5";
. /*
> This file uses:
>         work\quan_flex_it$it_n.dta
>         work\povline_food_flex_it$it_n.dta
>         work\price_unit_flex_it$it_n.dta
>                 
> This file creates:
>         work\pref_r_price.dta
>         work\revpref_price_`i'.dta
>         work\product_flex.inc
>         work\price_unit_flex.inc
>         work\quan_flex.inc
> */
> 
> 
> 
> ***************************************************************************;
. * Export price, codes and quantity data to text
> ***************************************************************************;
. use "$path\work\price_unit_flex_it$it_n.dta";
{txt}
{com}. gen reg=spdomain ;
{txt}
{com}. gen crap=1;
{txt}
{com}.  lab def crap
>          1  ".";
{txt}
{com}.  lab val crap crap;
{txt}
{com}. outsheet product crap reg bswt price_uw$it_n using "$path\work\price_unit_flex.inc",  noquote noname replace ;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.inc not found)

{com}. collapse (min) spdomain, by(product);
{txt}
{com}. outsheet product  using "$path\work\product_flex.inc", noname replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\product_flex.inc not found)

{com}. use "$path\work\quan_flex_it$it_n.dta", clear;
{txt}
{com}. gen reg=spdomain;
{txt}
{com}. gen crap=1;
{txt}
{com}.  lab def crap
>          1  ".";
{txt}
{com}.  lab val crap crap;
{txt}
{com}. format calperg quan$it_n calpp %14.9e;
{txt}
{com}. outsheet  product crap reg calperg quan$it_n  calpp povline_f_flex90_$it_n using "$path\work\quan_flex.inc", noname noquote replace;
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex.inc not found)

{com}. clear;
{txt}
{com}. **************************************************************************;
. * Revealed preference calculations
> * get the basket for the region we want to test
> **************************************************************************;
. tempfile quanreg;
{txt}
{com}. tempfile getmiss;
{txt}
{com}. tempfile codmiss;
{txt}
{com}. gen crap=0;
{txt}
{com}. save "$path\work\pref_r_price.dta", replace;
{txt}(note: dataset contains 0 observations)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved

{com}. forvalues i=1/$n_spdom {c -(}                ;
{txt}  2{com}.         clear;
{txt}  3{com}.         gen crap=0;
{txt}  4{com}.         save "$path\work\revpref_price_`i'.dta", replace;
{txt}  5{com}.         clear;
{txt}  6{com}.                 use "$path\work\quan_flex_it$it_n.dta", clear;
{txt}  7{com}.                 keep product spdomain quan$it_n price_uw$it_n val_ir$it_n povline_f_flex90_$it_n calpp;
{txt}  8{com}.         gen share=val_ir$it_n/povline_f_flex90_$it_n;
{txt}  9{com}.         rename price_uw$it_n pquanreg;
{txt} 10{com}.         rename spdomain spdomainq;
{txt} 11{com}.         drop if spdomainq~= `i';
{txt} 12{com}.         sort product;
{txt} 13{com}.                                 *rescale quantities to hit constant calorie target;
.                 gen ratquan=2150/calpp;
{txt} 14{com}.             gen quan_s=quan$it_n*ratquan;
{txt} 15{com}.             lab var quan_s "quantities rescaled to hit 2150 calories pp";
{txt} 16{com}.         save `quanreg', replace;
{txt} 17{com}. **************************************************************************;
. * Now get the prices in other regions so that you can use them 
> * to build  a new poverty line
> **************************************************************************;
.         forvalues j= 1/$n_spdom {c -(}               ;
{txt} 18{com}.                 use "$path\work\price_unit_flex_it$it_n.dta";
{txt} 19{com}.                                 keep product spdomain price_uw$it_n descript count bswt;
{txt} 20{com}.                         sort product;
{txt} 21{com}.                 keep if spdomain==`j';
{txt} 22{com}.                 sort product;
{txt} 23{com}.                 merge product using `quanreg';
{txt} 24{com}.                     *here we have to deal with the fact that not all commodities are consumed in every region;
.                 *so we might have a quantity from region i but no price in region j;
.                 *these will have _merge value=2;
.                 *alternatively the number of observations might be too small;
.                 *deal with these problems by TAKING THE MAX PRICE OBSERVED ELSEWHERE (excluding Maputo)
>                         
>                 tab _m;
.                 drop if _m==1;
{txt} 25{com}.                                 *CA modified to handle the counting of bswt instead of count
>                   replace price_uw$it_n=. if round(bswt)<5;
.                         gen pricemiss=0;
{txt} 26{com}.                   replace spdomain=`j' if _m==2 ;
{txt} 27{com}.                   replace pricemiss=1 if _m==2 | round(bswt)<5;
{txt} 28{com}.                         lab var pricemiss "identify those items with no price observation";
{txt} 29{com}.                   drop _m;
{txt} 30{com}.                         sort product;
{txt} 31{com}. *browse;
.                *this is the tempfile containing observed quans and prices;
.              save `getmiss', replace;
{txt} 32{com}.                         keep if pricemiss==1;
{txt} 33{com}.                         if _N>0 {c -(}
>                             keep product;
{txt} 34{com}.                                             sort product;
{txt} 35{com}.                                             *this file contains the price codes that are missing for the region in question;
.                             save `codmiss', replace;
{txt} 36{com}. *browse;
.                                   use "$path\work\price_unit_flex_it$it_n.dta", clear;
{txt} 37{com}.                         sort product;
{txt} 38{com}. *browse;
.                         merge product using `codmiss';
{txt} 39{com}.                                                 tab _m;
{txt} 40{com}.                         keep if _m==3 ;
{txt} 41{com}.                                 *exclude Maputo province and city from other price calculation;
.                                 drop if spdomain>10;
{txt} 42{com}.                         collapse (max) price_uw$it_n, by(product);
{txt} 43{com}.                   *this file contains the code and the max price;
.                   save `codmiss', replace;
{txt} 44{com}. *browse;
.                         use `getmiss';
{txt} 45{com}.                               merge product using `codmiss';
{txt} 46{com}. *browse;
.                         tab _m;
{txt} 47{com}.                         drop _m;
{txt} 48{com}.                         *end if;
.                  {c )-};
{txt} 49{com}.                                                             else use `getmiss', clear;
{txt} 50{com}.                         gen val_q=quan_s*price_uw$it_n;
{txt} 51{com}.                                                 collapse (sum) val_q pricemiss (mean) spdomainq ratquan, by(spdomain);
{txt} 52{com}.                   gen linf_q=val_q/.9;
{txt} 53{com}.                   drop val_q;
{txt} 54{com}.                         append using "$path\work\revpref_price_`i'.dta";
{txt} 55{com}.                         sort spdomain;
{txt} 56{com}.                 save "$path\work\revpref_price_`i'.dta", replace;
{txt} 57{com}.    *browse;
.         *close j loop;
.         {c )-};
{txt} 58{com}.         *aggregate into a big data set;
.         append using "$path\work\pref_r_price.dta";
{txt} 59{com}.       sort spdomain spdomainq;
{txt} 60{com}.       save "$path\work\pref_r_price.dta", replace;
{txt} 61{com}.  *close i loop;
. {c )-};
{txt}(note: dataset contains 0 observations)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(2 missing values generated)
(58 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved
(82 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
(24 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(121 observations deleted)
(label spdomain_original already defined)
(0 observations deleted)
(24 real changes made)
(24 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         49       40.50       40.50
{txt}          3 {c |}{res}         72       59.50      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        121      100.00
{txt}(49 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}         24      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         24      100.00
{txt}(24 missing values generated)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(121 observations deleted)
(label spdomain_original already defined)
(0 observations deleted)
(24 real changes made)
(24 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         49       40.50       40.50
{txt}          3 {c |}{res}         72       59.50      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        121      100.00
{txt}(49 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}         24      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         24      100.00
{txt}(24 missing values generated)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(80 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
(24 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(80 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
(24 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved
(note: dataset contains 0 observations)
(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_2.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_2.dta saved
(2 missing values generated)
(81 observations deleted)
(1 missing value generated)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000001.tmp saved
(82 observations deleted)
(label spdomain_original already defined)
(39 observations deleted)
(1 real change made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000002.tmp saved
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0f000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        121       99.18       99.18
{txt}          2 {c |}{res}          1        0.82      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        122      100.00
{txt}(122 observations deleted)
(0 observations deleted)
{err}no observations
{txt}{search r(2000):r(2000);}

end of do-file
{search r(2000):r(2000);}

end of do-file

{search r(2000):r(2000);}

{com}. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. 
{txt}end of do-file

{com}. br

. br if product>156

. help

. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta saved

{com}. 
{txt}end of do-file

{com}. br if product>156

. br

. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta", clear

. br

. br

. replace cfactor =1.49 if (cfactor ==1049)
{txt}(0 real changes made)

{com}. br

. replace cfactor = 1.49 in 163
{txt}(1 real change made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta saved

{com}. br

. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta saved

{com}. 
{txt}end of do-file

{com}. br

. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta saved

{com}. gen quantity = quantityz* cfactor
{txt}
{com}. gen value = valuez* 1
{txt}
{com}. ************************************************************************************************************
. *** valuez is multiplied by 1 because it had been erroneously multiplied by the unit conversion factors meant for only quantities
. *********************************************************************************************
. la var quantity "daily quantity consumed in Kgs per household"
{txt}
{com}. la var value  "daily value of consumption in UGX per per household"
{txt}
{com}. drop quantityz valuez
{txt}
{com}. rename quantity quantityz
{res}{txt}
{com}. rename value valuez
{res}{txt}
{com}. drop cfactor
{txt}
{com}. sort hhid
{txt}
{com}. sort hhid
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\table4_with_consumption_per_household.dta", replace
{txt}(note: file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\table4_with_consumption_per_household.dta not found)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\table4_with_consumption_per_household.dta saved

{com}. 
. 
{txt}end of do-file

{com}. br

. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta saved

{com}. gen quantity = quantityz* cfactor
{txt}
{com}. gen value = valuez* 1
{txt}
{com}. ************************************************************************************************************
. *** valuez is multiplied by 1 because it had been erroneously multiplied by the unit conversion factors meant for only quantities
. *********************************************************************************************
. la var quantity "daily quantity consumed in Kgs per household"
{txt}
{com}. la var value  "daily value of consumption in UGX per per household"
{txt}
{com}. drop quantityz valuez
{txt}
{com}. rename quantity quantityz
{res}{txt}
{com}. rename value valuez
{res}{txt}
{com}. drop cfactor
{txt}
{com}. sort hhid
{txt}
{com}. sort hhid
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta saved

{com}. 
. 
{txt}end of do-file

{com}. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta saved

{com}. gen quantity = quantityz* cfactor
{txt}
{com}. gen value = valuez* 1
{txt}
{com}. ************************************************************************************************************
. *** valuez is multiplied by 1 because it had been erroneously multiplied by the unit conversion factors meant for only quantities
. *********************************************************************************************
. la var quantity "daily quantity consumed in Kgs per household"
{txt}
{com}. la var value  "daily value of consumption in UGX per per household"
{txt}
{com}. drop quantityz valuez
{txt}
{com}. rename quantity quantityz
{res}{txt}
{com}. rename value valuez
{res}{txt}
{com}. drop cfactor
{txt}
{com}. sort hhid
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta saved

{com}. 
. ***************************************************************************************************
. **    Standard table 4, cons_cod_trans generated: AMOUNT AND QUANTITY OF FOOD TRANSACTION: TRANSACTION LEVEL
. **
. *********************************************************************************************
. **   Generating Standard Table 5: TOTAL AMOUNT AND QUANTITY OF PRODUCTS: Food as well as non food
. **
. ***********************************************************************************************
. **  DATA IN:       HSEC4.dta : On Education costs, column 13f which has all total school expenses, it is on 365 dayss basis
. **                 HSEC5.dta : On Medical Expenditure, column 10 and 13, on 30 days basis
. **                 HSEC8.dta : On assets Expenditure, column h8q4 on numbers and h8q5 on value, considering 20% value used per 365 days basis
. **                 HSEC10B_CLN.dta: On non-durables and frequently purchased items e.g imputed rent, electricity, soap etc, on 30 days basis, columns 5,7 & 9 for value
. **                 HSEC10C_CLN.dta: On semi-durable goods and services, column 3, 4 & 5, on 365 days basis for value
. **                 HSEC10D.dta:     On Non-consumption expenses like taxes, remitances away, subscriptions etc, on 365 days basis, colum 3
. **
. **
. ******************************************************************************************************************************************************88
. clear
{txt}
{com}. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC4.dta"
{txt}
{com}. 
. rename hh hhid
{res}{txt}
{com}. codebook hhid

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  string ({res}str10{txt})

{col 10}unique values:  {res}6775{col 51}{txt}missing "":  {res}0{txt}/{res}28397

{txt}{col 15}examples:  {res}"1123015202"
{col 26}"2113037608"
{col 26}"3083047606"
{col 26}"4023064403"
{txt}
{com}. keep hhid h4q13f
{txt}
{com}. sort hhid
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta saved

{com}. gen quantity = quantityz* cfactor
{txt}
{com}. gen value = valuez* 1
{txt}
{com}. ************************************************************************************************************
. *** valuez is multiplied by 1 because it had been erroneously multiplied by the unit conversion factors meant for only quantities
. *********************************************************************************************
. la var quantity "daily quantity consumed in Kgs per household"
{txt}
{com}. la var value  "daily value of consumption in UGX per per household"
{txt}
{com}. drop quantityz valuez
{txt}
{com}. rename quantity quantityz
{res}{txt}
{com}. rename value valuez
{res}{txt}
{com}. drop cfactor
{txt}
{com}. sort hhid
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta saved

{com}. 
. ***************************************************************************************************
. **    Standard table 4, cons_cod_trans generated: AMOUNT AND QUANTITY OF FOOD TRANSACTION: TRANSACTION LEVEL
. **
. *********************************************************************************************
. **   Generating Standard Table 5: TOTAL AMOUNT AND QUANTITY OF PRODUCTS: Food as well as non food
. **
. ***********************************************************************************************
. **  DATA IN:       HSEC4.dta : On Education costs, column 13f which has all total school expenses, it is on 365 dayss basis
. **                 HSEC5.dta : On Medical Expenditure, column 10 and 13, on 30 days basis
. **                 HSEC8.dta : On assets Expenditure, column h8q4 on numbers and h8q5 on value, considering 20% value used per 365 days basis
. **                 HSEC10B_CLN.dta: On non-durables and frequently purchased items e.g imputed rent, electricity, soap etc, on 30 days basis, columns 5,7 & 9 for value
. **                 HSEC10C_CLN.dta: On semi-durable goods and services, column 3, 4 & 5, on 365 days basis for value
. **                 HSEC10D.dta:     On Non-consumption expenses like taxes, remitances away, subscriptions etc, on 365 days basis, colum 3
. **
. **
. ******************************************************************************************************************************************************88
. clear
{txt}
{com}. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC4.dta"
{txt}
{com}. 
. rename hh hhid
{res}{txt}
{com}. 
. 
. 
. 
. 
{txt}end of do-file

{com}. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta saved

{com}. gen quantity = quantityz* cfactor
{txt}
{com}. gen value = valuez* 1
{txt}
{com}. ************************************************************************************************************
. *** valuez is multiplied by 1 because it had been erroneously multiplied by the unit conversion factors meant for only quantities
. *********************************************************************************************
. la var quantity "daily quantity consumed in Kgs per household"
{txt}
{com}. la var value  "daily value of consumption in UGX per per household"
{txt}
{com}. drop quantityz valuez
{txt}
{com}. rename quantity quantityz
{res}{txt}
{com}. rename value valuez
{res}{txt}
{com}. drop cfactor
{txt}
{com}. sort hhid
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta saved

{com}. 
. ***************************************************************************************************
. **    Standard table 4, cons_cod_trans generated: AMOUNT AND QUANTITY OF FOOD TRANSACTION: TRANSACTION LEVEL
. **
. *********************************************************************************************
. **   Generating Standard Table 5: TOTAL AMOUNT AND QUANTITY OF PRODUCTS: Food as well as non food
. **
. ***********************************************************************************************
. **  DATA IN:       HSEC4.dta : On Education costs, column 13f which has all total school expenses, it is on 365 dayss basis
. **                 HSEC5.dta : On Medical Expenditure, column 10 and 13, on 30 days basis
. **                 HSEC8.dta : On assets Expenditure, column h8q4 on numbers and h8q5 on value, considering 20% value used per 365 days basis
. **                 HSEC10B_CLN.dta: On non-durables and frequently purchased items e.g imputed rent, electricity, soap etc, on 30 days basis, columns 5,7 & 9 for value
. **                 HSEC10C_CLN.dta: On semi-durable goods and services, column 3, 4 & 5, on 365 days basis for value
. **                 HSEC10D.dta:     On Non-consumption expenses like taxes, remitances away, subscriptions etc, on 365 days basis, colum 3
. **
. **
. ******************************************************************************************************************************************************88
. clear
{txt}
{com}. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC4.dta"
{txt}
{com}. 
. rename hh hhid
{res}{txt}
{com}. codebook hhid

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  string ({res}str10{txt})

{col 10}unique values:  {res}6775{col 51}{txt}missing "":  {res}0{txt}/{res}28397

{txt}{col 15}examples:  {res}"1123015202"
{col 26}"2113037608"
{col 26}"3083047606"
{col 26}"4023064403"
{txt}
{com}. keep hhid h4q13f
{txt}
{com}. sort hhid
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. *****************************************************************************************************************
. **     PROGRAMME: PREPARARTION OF STANDARD TABLE 4: CONS_COD_TRANS
. **     AUTHOR: HARUNA SEKABIRA
. **     DATA IN: HSEC10A_CLN.dta
. **              Coversionfactors.dta
. **
. **
. **     DATA OUT: Cons_Cod_trans.dta
. **
. **
. **
. **    NOTES: Food consumption values and quantities have been excluded from the calculations of daily food consumption per household because it is the requirement
. **            of GAPP. a few Food conversion factors that were not available from the statistics body for instance the kilograms in a crate of bear have been
. **            calculated related on the available conversion factors for a bottle then counting how many bottles there are in a crate. Futher still some units
. **            like heaps that were not available have been estimated using the town market experiences of these heaps in relation to related measurements 
. **            given by UBOS
. **
. **
. *************************************************************************************************************************************
. 
. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4cf.dta saved

{com}. gen quantity = quantityz* cfactor
{txt}
{com}. gen value = valuez* 1
{txt}
{com}. ************************************************************************************************************
. *** valuez is multiplied by 1 because it had been erroneously multiplied by the unit conversion factors meant for only quantities
. *********************************************************************************************
. la var quantity "daily quantity consumed in Kgs per household"
{txt}
{com}. la var value  "daily value of consumption in UGX per per household"
{txt}
{com}. drop quantityz valuez
{txt}
{com}. rename quantity quantityz
{res}{txt}
{com}. rename value valuez
{res}{txt}
{com}. drop cfactor
{txt}
{com}. sort hhid
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\cons_cod_trans.dta saved

{com}. 
. ***************************************************************************************************
. **    Standard table 4, cons_cod_trans generated: AMOUNT AND QUANTITY OF FOOD TRANSACTION: TRANSACTION LEVEL
. **
. *********************************************************************************************
. **   Generating Standard Table 5: TOTAL AMOUNT AND QUANTITY OF PRODUCTS: Food as well as non food
. **
. ***********************************************************************************************
. **  DATA IN:       HSEC4.dta : On Education costs, column 13f which has all total school expenses, it is on 365 dayss basis
. **                 HSEC5.dta : On Medical Expenditure, column 10 and 13, on 30 days basis
. **                 HSEC8.dta : On assets Expenditure, column h8q4 on numbers and h8q5 on value, considering 20% value used per 365 days basis
. **                 HSEC10B_CLN.dta: On non-durables and frequently purchased items e.g imputed rent, electricity, soap etc, on 30 days basis, columns 5,7 & 9 for value
. **                 HSEC10C_CLN.dta: On semi-durable goods and services, column 3, 4 & 5, on 365 days basis for value
. **                 HSEC10D.dta:     On Non-consumption expenses like taxes, remitances away, subscriptions etc, on 365 days basis, colum 3
. **
. **
. ******************************************************************************************************************************************************88
. clear
{txt}
{com}. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC4.dta"
{txt}
{com}. 
. rename hh hhid
{res}{txt}
{com}. codebook hhid

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  string ({res}str10{txt})

{col 10}unique values:  {res}6775{col 51}{txt}missing "":  {res}0{txt}/{res}28397

{txt}{col 15}examples:  {res}"1123015202"
{col 26}"2113037608"
{col 26}"3083047606"
{col 26}"4023064403"
{txt}
{com}. keep hhid h4q13f
{txt}
{com}. sort hhid
{txt}
{com}. gen educationd = h4q13f/365
{txt}(17210 missing values generated)

{com}. la var educationd "daily household expense on education"
{txt}
{com}. drop h4q13f
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdeducationexp.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdeducationexp.dta saved

{com}. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC5.dta"
{txt}
{com}. 
. des

{txt}Contains data from {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC5.dta
{txt}  obs:{res}        34,840                          
{txt} vars:{res}            20                          3 Apr 2013 11:15
{txt} size:{res}     1,951,040                          
{txt}{hline}
              storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hh             }{txt}{bind: str10  }{bind:{txt}%10s       }{space 1}{bind:         }{bind:  }{res}{res}Household Code{p_end}
{p 0 48}{bind:h5q1           }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:         }{bind:  }{res}{res}Person Id{p_end}
{p 0 48}{bind:h5q2           }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:h5q2     }{bind:  }{res}{res}During the past 30 days, did you suffer from any illness or {p_end}
{p 0 48}{bind:h5q3           }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:         }{bind:  }{res}{res}For how many days did you suffer due to illness or injury du{p_end}
{p 0 48}{bind:h5q4           }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:         }{bind:  }{res}{res}For how many days did you have to stop doing your usual acti{p_end}
{p 0 48}{bind:h5q5a          }{txt}{bind: byte   }{bind:{txt}%36.0g     }{space 1}{bind:h5q5A    }{bind:  }{res}{res}Can you describe the major symptoms of the illness or injury{p_end}
{p 0 48}{bind:h5q5b          }{txt}{bind: byte   }{bind:{txt}%36.0g     }{space 1}{bind:h5q5B    }{bind:  }{res}{res}Can you describe the major symptoms of the illness or injury{p_end}
{p 0 48}{bind:h5q6           }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:h5q6     }{bind:  }{res}{res}Was anyone consulted (e.g. a doctor, nurse, pharmacist or tr{p_end}
{p 0 48}{bind:h5q7           }{txt}{bind: byte   }{bind:{txt}%31.0g     }{space 1}{bind:h5q7     }{bind:  }{res}{res}Why was no one consulted for the major illness?{p_end}
{p 0 48}{bind:h5q8           }{txt}{bind: byte   }{bind:{txt}%24.0g     }{space 1}{bind:h5q8     }{bind:  }{res}{res}Where did you go for the first consultation during the past {p_end}
{p 0 48}{bind:h5q9           }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Distance to the place where this treatment was sought for in{p_end}
{p 0 48}{bind:h5q10          }{txt}{bind: long   }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}What was the cost of this consultation, including any medici{p_end}
{p 0 48}{bind:h5q11          }{txt}{bind: float  }{bind:{txt}%8.0g      }{space 1}{bind:h5q11    }{bind:  }{res}{res}Did you make any other payments besides the normal payments {p_end}
{p 0 48}{bind:h5q12          }{txt}{bind: byte   }{bind:{txt}%20.0g     }{space 1}{bind:h5q12    }{bind:  }{res}{res}If Yes, what was the payment for?{p_end}
{p 0 48}{bind:h5q13          }{txt}{bind: long   }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}What was the cost of transportation to the place where this {p_end}
{p 0 48}{bind:h5q14          }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:h5q14    }{bind:  }{res}{res}During the past 6 months (including the past 30 days), did y{p_end}
{p 0 48}{bind:h5q15          }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:h5q15    }{bind:  }{res}{res}Does (NAME) currently use or has he/she in the past used any{p_end}
{p 0 48}{bind:h5q16          }{txt}{bind: int    }{bind:{txt}%8.0g      }{space 1}{bind:         }{bind:  }{res}{res}For how long (in years) has (NAME) been using them or did he{p_end}
{p 0 48}{bind:h5q17          }{txt}{bind: str15  }{bind:{txt}%15s       }{space 1}{bind:         }{bind:  }{res}{res}Is (NAME) currently suffering from any of the following dise{p_end}
{p 0 48}{bind:h5q18          }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:         }{bind:  }{res}{res}Record Person ID. No. of the person reporting.{p_end}
{txt}{hline}
Sorted by:  

{com}. rename hh hhid
{res}{txt}
{com}. sort hhid
{txt}
{com}. keep hhid h5q10 h5q13
{txt}
{com}. egen medicalexp = rowtotal ( h5q10 h5q13)
{txt}
{com}. gen medicalexpd = medicalexp/30
{txt}
{com}. la var medicalexpd "household daily expenditure"
{txt}
{com}. drop h5q10 h5q13 medicalexp
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdmedicalexp.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdmedicalexp.dta saved

{com}. 
. clear
{txt}
{com}. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC8.dta"
{txt}
{com}. des

{txt}Contains data from {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC8.dta
{txt}  obs:{res}       121,868                          
{txt} vars:{res}             8                          3 Apr 2013 11:16
{txt} size:{res}     4,021,644                          
{txt}{hline}
              storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hh             }{txt}{bind: str10  }{bind:{txt}%10s       }{space 1}{bind:         }{bind:  }{res}{res}Household Code{p_end}
{p 0 48}{bind:h8q2           }{txt}{bind: byte   }{bind:{txt}%52.0g     }{space 1}{bind:HS82     }{bind:  }{res}{res}Asset code{p_end}
{p 0 48}{bind:h8q3           }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:HS83     }{bind:  }{res}{res}Does any member of your household own [ASSET] at present?{p_end}
{p 0 48}{bind:h8q4           }{txt}{bind: int    }{bind:{txt}%8.0g      }{space 1}{bind:         }{bind:  }{res}{res}How many [] do your household own at present?{p_end}
{p 0 48}{bind:h8q5           }{txt}{bind: double }{bind:{txt}%10.0g     }{space 1}{bind:         }{bind:  }{res}{res}How many [] do your household own at present?{p_end}
{p 0 48}{bind:h8q6           }{txt}{bind: byte   }{bind:{txt}%8.0g      }{space 1}{bind:HS86     }{bind:  }{res}{res}Did any member of your household own [ASSET] 12 months ago?{p_end}
{p 0 48}{bind:h8q7           }{txt}{bind: int    }{bind:{txt}%8.0g      }{space 1}{bind:         }{bind:  }{res}{res}How many [] did your household own 12 months ago?{p_end}
{p 0 48}{bind:h8q8           }{txt}{bind: double }{bind:{txt}%10.0g     }{space 1}{bind:         }{bind:  }{res}{res}How many [] did your household own 12 months ago?{p_end}
{txt}{hline}
Sorted by:  

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhddurables.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhddurables.dta saved

{com}. keep if inlist( h8q2 ,003,009,010,011,012)
{txt}(88001 observations deleted)

{com}. gen assetvalue = h8q4* h8q5
{txt}(31074 missing values generated)

{com}. 
. **************************************************************************************************************
. ** i took land, bicycle, motor cycle and boat as durables and assumed that a year, the household can use 20% of these assests
. **********************************************************************************************************************
. gen dassetvalue = (assetvalue*0.2)/365
{txt}(31074 missing values generated)

{com}. la var dassetvalue "household daily durables expenditure"
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. sort hhid
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhddurablesexp.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhddurablesexp.dta saved

{com}. clear
{txt}
{com}. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC8.dta"
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhnondurables.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhnondurables.dta saved

{com}. rename hh hhid
{res}{txt}
{com}. drop if inlist( h8q2 ,003,009,010,011,012)
{txt}(33867 observations deleted)

{com}. gen nondurablevalue = h8q4* h8q5
{txt}(78241 missing values generated)

{com}. la var nondurablevalue "household daily non-durables expenditure"
{txt}
{com}. sort hhid
{txt}
{com}. gen dnondurables = nondurablevalue/365
{txt}(78241 missing values generated)

{com}. la var dnondurables "household daily non-durables expenditure"
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdnondurablesexp.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdnondurablesexp.dta saved

{com}. clear
{txt}
{com}. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC10B_CLN.dta"
{txt}
{com}. des

{txt}Contains data from {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC10B_CLN.dta
{txt}  obs:{res}        70,379                          
{txt} vars:{res}            10                          3 Apr 2013 11:13
{txt} size:{res}     3,518,950                          
{txt}{hline}
              storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hh             }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}Household Code{p_end}
{p 0 48}{bind:h10bq2         }{txt}{bind: float  }{bind:{txt}%25.0g     }{space 1}{bind:HS10B2   }{bind:  }{res}{res}code{p_end}
{p 0 48}{bind:h10bq3         }{txt}{bind: int    }{bind:{txt}%8.0g      }{space 1}{bind:HS10B3   }{bind:  }{res}{res}Unit of Quantity{p_end}
{p 0 48}{bind:h10bq4         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Qty consumed out of purchases{p_end}
{p 0 48}{bind:h10bq5         }{txt}{bind: double }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}Value of consumption out of purchases{p_end}
{p 0 48}{bind:h10bq6         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Qty consumed away from home{p_end}
{p 0 48}{bind:h10bq7         }{txt}{bind: double }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}Value of consumption away from home{p_end}
{p 0 48}{bind:h10bq8         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Qty consumed out of home produce{p_end}
{p 0 48}{bind:h10bq9         }{txt}{bind: long   }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}Value of consumption out of home produce{p_end}
{p 0 48}{bind:h10bq10        }{txt}{bind: long   }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}Unit Price{p_end}
{txt}{hline}
Sorted by:  {res}hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. sort hhid
{txt}
{com}. egen hhfrequents = rowtotal ( h10bq5 h10bq7 h10bq9)
{txt}
{com}. gen dhhfrequents = hhfrequents/30
{txt}
{com}. la var dhhfrequents "daily household expenditure on frequently bought commodities"
{txt}
{com}. tostring hhid, replace
{txt}hhid was {res:double} now {res:str10}

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdfrequentsexp.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdfrequentsexp.dta saved

{com}. 
. clear
{txt}
{com}. 
. *******************************************************************************************
. **   in considering semi durable goods and services, the value of those services and goods recieved in kind, column 5 of HSEC10C_CLN.dta has been excluded
. **   just as in kind food consumptions were eliminated in table 4 as per the GAPP guidelines
. ***************************************************************************************************************************************************
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\HSEC10C_CLN.dta"
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhsemidurables.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhsemidurables.dta saved

{com}. des

{txt}Contains data from {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhsemidurables.dta
{txt}  obs:{res}        59,300                          
{txt} vars:{res}             5                          29 Apr 2013 15:52
{txt} size:{res}     1,779,000                          
{txt}{hline}
              storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hh             }{txt}{bind: str10  }{bind:{txt}%10s       }{space 1}{bind:         }{bind:  }{res}{res}Household Code{p_end}
{p 0 48}{bind:h10cq2         }{txt}{bind: float  }{bind:{txt}%47.0g     }{space 1}{bind:HS10C2   }{bind:  }{res}{res}code{p_end}
{p 0 48}{bind:h10cq3         }{txt}{bind: double }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}Purchases: Value{p_end}
{p 0 48}{bind:h10cq4         }{txt}{bind: long   }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}Consumption out of household /enterprise stock: Value{p_end}
{p 0 48}{bind:h10cq5         }{txt}{bind: long   }{bind:{txt}%12.0g     }{space 1}{bind:         }{bind:  }{res}{res}Received in-kind/Free: Value{p_end}
{txt}{hline}
Sorted by:  

{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. egen hhsemidurables = rowtotal ( h10cq3 h10cq4)
{txt}
{com}. sort hhid
{txt}
{com}. gen hhdsemidurs = hhsemidurables/365
{txt}
{com}. la var hhdsemidurs "household daily semi durables goods and seervices expenses"
{txt}
{com}. drop hhsemidurables
{txt}
{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdsemidurablesexp.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\hhdsemidurablesexp.dta saved

{com}. 
. 
. 
. 
. 
. 
{txt}end of do-file

{com}. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. 
{txt}end of do-file

{com}. br

. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge 1:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}{err}{p 0 4 2}
variable{err}s{err} product
untcd
do not uniquely identify observations in the
master data
{p_end}
{txt}{search r(459):r(459);}

end of do-file

{search r(459):r(459);}

{com}. do "C:\Users\TEMPLE~1\AppData\Local\Temp\STD0f000000.tmp"
{txt}
{com}. clear
{txt}
{com}. set logtype text
{txt}
{com}. capture log close
{txt}
{com}. set more off
{txt}
{com}.  
. 
. use "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\ww-ug\UNHS 2009_10 DATASET\SOCIO\HSEC10A_CLN.dta", clear
{txt}
{com}. sort hh
{txt}
{com}. rename hh hhid
{res}{txt}
{com}. la var hhid "household id"
{txt}
{com}. duplicates report  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}        {res}89595             0
        {txt}2 {c |}            {res}2             1
{txt}{hline 10}{c BT}{hline 27}

{com}. duplicates list  hh itmcd

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}
{txt}
  {c TLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c TRC}
  {c |} {res} obs:         hhid            itmcd {txt}{c |}
  {c LT}{hline 7}{c -}{hline 12}{c -}{hline 16}{c RT}
  {c |} {res}22924   1123015704   Matooke (Heap) {txt}{c |}
  {c |} {res}22925   1123015704   Matooke (Heap) {txt}{c |}
  {c BLC}{hline 7}{c -}{hline 12}{c -}{hline 16}{c BRC}

{com}. duplicates drop  hh itmcd, force

{p 0 4}{txt}Duplicates in terms of {res} hhid itmcd{p_end}

{txt}(1 observation deleted)

{com}. codebook hhid

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}89596

{txt}{col 19}mean:{res}{col 26} 2.4e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. egen quantity=rowtotal( h10aq4 h10aq6 h10aq8 )
{txt}
{com}.  
. la var quantity "quantity of food consumed by the household including purchases, home, away from hm & kind"
{txt}note: label truncated to 80 characters

{com}. gen quantityd = quantity/7
{txt}
{com}. drop quantity h10aq10 h10aq8 h10aq6 h10aq4
{txt}
{com}. la var quantityd "daily household food consumption"
{txt}
{com}. egen value=rowtotal ( h10aq5 h10aq7 h10aq9 )
{txt}
{com}. la var value "household food consumption in seven days"
{txt}
{com}. gen valuez = value/7
{txt}
{com}. la var valuez "daily value of food consumed by the household"
{txt}
{com}. rename quantityd quantityz
{res}{txt}
{com}. drop value h10aq11 h10aq11 h10aq9 h10aq7 h10aq5 h10aq13 h10aq12
{txt}
{com}. gen unit = 1
{txt}
{com}. la var unit "set equal to one since all observations are converted into kg"
{txt}
{com}. gen food_cat = 1
{txt}
{com}. la var food_cat "food category equals 1, if product is food and 0 if non food"
{txt}
{com}. des itm

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:itmcd          }{txt}{bind: float  }{bind:{txt}%16.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}code{p_end}
{txt}
{com}. des hhid

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%13.0f     }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{txt}
{com}. des food_cat

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{txt}
{com}. des valuez

              {txt}storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:valuez         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of food consumed by the household{p_end}
{txt}
{com}. rename itmcd product
{res}{txt}
{com}. format %10.0g product
{txt}
{com}. format %9.0g hhid
{txt}
{com}. format %10.0g unit
{txt}
{com}. la var product "Food product code: numerical"
{txt}
{com}. *******************************************************************************
. *** to avoid zero quantities during multiples and or divisions, because certains foods like other juice, other foods and foods from restaurants
. **** did not have quantities, we replaced the zero with one. However ahead, in calculating unit prices in table five where foods whose 
. **** quantities are missing thus not included for unit price calculations, even foodsof product codes 157, 160 and 161, must not be included
. *******************************************************
. replace quantityz=1 if (product==157 | product==160 | product==161)
{txt}(1458 real changes made)

{com}. save "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta", replace
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\out\household_table4.dta saved

{com}. set more off
{txt}
{com}. count
{res}89596
{txt}
{com}. sort product untcd
{txt}
{com}. merge m:1 product untcd using  "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\in\conversionfactors.dta"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}          89,596{txt}  (_merge==3)
{col 5}{hline 41}

{com}. tab _m

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
            matched (3) {c |}{res}     89,596      100.00      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}     89,596      100.00
{txt}
{com}. drop _m
{txt}
{com}. 
{txt}end of do-file

{com}. 