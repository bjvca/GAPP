{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}log_tot_s
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/log_total.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}17 May 2013, 14:57:58
{txt}
{com}. log using "$path/rep/000_boom.log"  , name(log_000_boom) replace
{txt}{.-}
      name:  {res}log_000_boom
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/000_boom.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:57:58
{txt}
{com}. 
. display "* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *"
{res}* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *
{txt}
{com}. display ""
{res}
{txt}
{com}. display "Generel information:"
{res}Generel information:
{txt}
{com}. display "   UGANDA HOUSEHOLD BUDGET SURVEY 2009/10"
{res}   UGANDA HOUSEHOLD BUDGET SURVEY 2009/10
{txt}
{com}. display "   Poverty rate estimation"
{res}   Poverty rate estimation
{txt}
{com}. display "   Methodology: Iterative procedure and revealed preferences tests"
{res}   Methodology: Iterative procedure and revealed preferences tests
{txt}
{com}. display ""
{res}
{txt}
{com}. display "* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *"
{res}* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *
{txt}
{com}. 
. 
. **************************************************************************
. * 000_boom.do   (start)
. *
. * Reminders:
. *       1) Check very top of this file to make sure you are on the right path! 
. *       2) GAMS 22.5 must be placed onto the path. See 190_revpref13_m1.bat.
. *          Typically this needs to be edited.
. *   3) In case of implementing a new survey the user must make necessary
. *      changes in 010_initial.do, 020_hhdata.do and 030_rawdata.do.
. *
. * Process:
. * - The do-file prefix indicates first time a do-file is called
. *
. * KS, 2003
. * CA, 2003-2008
. * MAH, Apr. 2010
. **************************************************************************
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. set mem 700m
{txt}
{com}. 
. noisily display "Start time: " "$S_TIME"
{res}Start time: 14:57:58
{txt}
{com}. 
. 
. 
. **************************************************************************
. * Macros. Region definitions. Demographic definitions.
. **************************************************************************
. do "$path/new/010_initial.do"
{txt}
{com}. cap log close
{txt}
{com}. log using "$path/rep/010_initial.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/010_initial.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:57:58
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. ******************************************************************************
> * 010_initial.do                (start)
> ******************************************************************************;
. ******************************************************************************
> * Purpose: Set some globals
> ******************************************************************************;
. ******************************************************************************
> * TPI basket
> ******************************************************************************;
. * Number of items;
. global product_tpi_n "15";
{txt}
{com}. * Code choose $product_tpi_n ;
. global product_tpi   "product_tpi==1";
{txt}
{com}. * Initial (arbitrary) quantile defining poor for price index calculations.
> * Mozambique: bottom 60%. Vietnam: bottom 20%. Tanzania: bottom 40% . Uganda: headcount 2009 24.5% ;
. global tpi_bottom "50";
{txt}
{com}.  * Set the number of regions in the TPI calc for Uganda are set to east central north and east;
. global n_tpi "4";
{txt}
{com}. * To reproduce the mozambique 10 numbers, the following global should be commented out. It controls a line in 140_iterate.do 
> * where observations not measured in kg are dropped. For all other datasets, all observations should be converted to kg's before
> * the toolkit is run. For all other datasets, this line should therefore be included.
> global MZ "*";
. ******************************************************************************
> * Initial (arbitrary) quantile defining the (relatively) poor.
> ******************************************************************************;
. global bottom "50";
{txt}
{com}. ******************************************************************************
> * Number of iterations in 140_iterate.do
> ******************************************************************************;
. global it_n "5";
{txt}
{com}. ******************************************************************************
> * Set the number of regions in the spatial domain;
. ******************************************************************************;
. global n_spdom "5";
{txt}
{com}. ******************* we deleted East urban, North urban and West urban because too few observations were in those spatial domains;
.  ******************************************************************************
> * Revealed preferences choices
> ******************************************************************************;
. * Activate GAMS program according to number of regions in spatial domain;
. *global revpref "190_revpref13_m1.bat";
. *global no_temp_rev " ";
. * k spatial regions and no intertemporal revealed preference condition:
>   Activate the next two lines below;
. global no_temp_rev "*";
{txt}
{com}. global revpref "190_revpref13_r.bat";
{txt}
{com}.  **************************************************************************
> * 010_initial.do                (end)
> **************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/010_initial.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}17 May 2013, 14:57:58
{txt}{.-}

{com}. 
{txt}end of do-file

{com}. 
. *do "C:\user\gapp\z_data_preb/new/100_collect_expen_moz.do"
. *s;
. 
. *do "C:\user\gapp\z_data_preb/new/000_boom.do"
. 
. *global path "C:\user\gapp"
. 
. /*
> 
> **************************************************************************;
> **************************************************************************;
> * This is the block of do files to set up the data to get nominal
> * consumption. These DO NOT need to be bootstrapped.
> **************************************************************************;
> **************************************************************************;
>         
>         * This code produces some once for all data for the in-folder. Don't
>         * run it unless you know what you are doing!!!
>                 * Produces education expenditure
>                 *do "$path\new\Create/education_Create.do"
>                 * Imputation of missing recepts-in-kind. Run the code without this first...
>                 *do "$path\new\Create/0_code_chain.do"
>                 * First poverty lines dependent on IAF
>                 *do "$path\new\Create/povlines_first_iof_Create.do"
>                 * Match product codes for different surveys
>                 *do "$path\new\Create/match96_02_Create.do"
>                 * Basket from previous survey
>                 *do "$path\new\Create/smallbasket_iof_Create.do"
>                 * Match product codes between surveys
>                 *do "$path\new\Create/rev_pref_matchcodes_02-96_iof_Create.do"
>                 * Update poverty lines
>                 *do "$path\new\Create/povlines-96-v1-vers7_iof_Create.do"               
>                 * Food share
>                 *do "$path\new\Create/foodshr96_iof_Create.do"
>                 
>                 *do "$path\new\Create/.do"
>                 *do "$path\new\Create/.do"
> 
> */
.         * This set of files takes the raw data and creates more handy data 
.         * sets in the work-folder
.         do "$path/new/020_in_2_work_folder.do"
{txt}
{com}. clear all
{txt}
{com}. global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA"
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/020_hhdata.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/020_hhdata.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:57:58
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 020_hhdata.do         (start)
> *
> * Organize the hhid identifier in the HHData file the same way, and keep
> * only the relevant variables.
> *
> * This file sets:
> * - interview month, quarter and year
> * - regions: make all needed regions. But in the end only the one specified
> *            in initial.do are kept. These are
> *            - rural: 0=urban, 1=rural
> *            - news: speficifying North, East, West, South. But combinations
> *                    are also possible, eg. North-East, Center,...
> *            - reg_tpi: regions with own TPI
> *            - strata: strata regions
> *            - spdomain: spatial domains (regions with own poverty line)
> *            - news_ru_ur: combination of news and rural
> **************************************************************************;
. use "$path\in\hhdata.dta", clear;
{txt}
{com}. *recode spdomain 10=1 11=2 20=3 30=4 40=5 these have been set to five for Uganda to ensure hwe have at least 1000 households per domain;
. tab spdomain, missing;

     {txt}spdomain {c |}      Freq.     Percent        Cum.
{hline 14}{c +}{hline 35}
Central rural {c |}{res}      1,177       17.37       17.37
{txt}Central urban {c |}{res}        809       11.94       29.31
{txt}      Eastern {c |}{res}      1,406       20.75       50.07
{txt}     Northern {c |}{res}      1,956       28.87       78.94
{txt}      Western {c |}{res}      1,427       21.06      100.00
{txt}{hline 14}{c +}{hline 35}
        Total {c |}{res}      6,775      100.00
{txt}
{com}.         sort hhid;
{txt}
{com}.         save "$path\work\hhdata.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\hhdata.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 6}strata {c |}{res}      6775    5.551734    2.873672          1         10
{txt}{space 8}mult {c |}{res}      6775    919.0598    636.8381   26.67222   10279.15
{txt}{space 6}region {c |}{res}      6775    2.416827    1.118389          1          4
{txt}{space 7}urban {c |}{res}      6775    .1800738    .3842773          0          1
{txt}{hline 13}{c +}{hline 56}
{space 4}district {c |}{res}      6775    250.5169    112.9571        101        419
{txt}{space 7}rmult {c |}{res}      6775    919.0713    636.8355         27      10279
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{space 5}welfare {c |}{res}      6775    73089.98    95260.67   2034.431    1932420
{txt}{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{hline 13}{c +}{hline 56}
{space 6}poor09 {c |}{res}      6775      .23631    .4248461          0          1
{txt}{space 9}day {c |}{res}      6775    14.08576    7.581748          1         31
{txt}{space 7}month {c |}{res}      6775    6.686199    3.405931          1         12
{txt}{space 8}Year {c |}{res}      6775    2009.336    .4722506       2009       2010
{txt}{space 7}h1bq8 {c |}{res}      6775    1.005018    .0706683          1          2
{txt}{hline 13}{c +}{hline 56}
{space 9}psu {c |}{res}      6775     365.894     201.698          1        712
{txt}{space 4}survquar {c |}{res}      6775    2.499336    1.144024          1          4
{txt}{space 5}survmon {c |}{res}      6775    6.713948     3.34507          1         12
{txt}{space 7}rural {c |}{res}      6775    .8199262    .3842773          0          1
{txt}{space 8}news {c |}{res}      6775    2.416827    1.118389          1          4
{txt}{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}      6775           1           0          1          1
{txt}{space 4}spdomain {c |}{res}      6775      3.2431    1.373578          1          5
{txt}{space 5}reg_tpi {c |}{res}      6775    2.416827    1.118389          1          4
{txt}
{com}. use "$path\in\indata.dta", clear;
{txt}
{com}.         *sort hhid;
.         save "$path\work\indata.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\indata.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 7}indid {c |}{res}     35945    2.57e+11    1.10e+11   1.01e+11   4.19e+11
{txt}{space 4}motherhh {c |}{res}     35945    .8787592    .3264114          0          1
{txt}{space 8}hhid {c |}{res}     35945    2.57e+09    1.10e+09   1.01e+09   4.19e+09
{txt}{space 9}sex {c |}{res}     35945     1.50861    .4999328          1          2
{txt}{space 9}age {c |}{res}     35945    18.94194    17.44062          0         98
{txt}
{com}. use "$path\in\calperg.dta", clear;
{txt}
{com}.         *sort hhid;
.         save "$path\work\calperg.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\calperg.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}        62       130.5    18.04162        100        161
{txt}{space 4}descript {c |}{res}         0
{txt}{space 5}calperg {c |}{res}        62    1.980716    2.136812          0       8.84
{txt}
{com}. use "$path\in\cons_cod.dta", clear;
{txt}
{com}.         *sort hhid;
.         save "$path\work\cons_cod.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\cons_cod.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}    412045    810.2635    358.1243        100        999
{txt}{space 4}food_cat {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{space 4}prod_cat {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{space 4}descript {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{hline 13}{c +}{hline 56}
{space 3}quantityd {c |}{res}    412045    .1694884    1.512903          0   364.2857
{txt}{space 1}cod_hh_nom3 {c |}{res}    412045    83.35781    341.2477          0      18500
{txt}{space 2}cod_hh_nom {c |}{res}    412045    1602.923    615777.4          0   3.95e+08
{txt}{space 1}cod_hh_nom2 {c |}{res}    412045    1602.658    615777.4          0   3.95e+08
{txt}
{com}. use "$path\in\cons_cod_trans.dta", clear;
{txt}
{com}.         *sort hhid;
.         save "$path\work\cons_cod_trans.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\cons_cod_trans.dta saved

{com}.         sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     89596    2.45e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     89596    131.0155     15.7293        100        161
{txt}{space 8}unit {c |}{res}     89596           1           0          1          1
{txt}{space 4}food_cat {c |}{res}     89596           1           0          1          1
{txt}{space 3}quantityz {c |}{res}     89596     .779464    3.170331          0   364.2857
{txt}{hline 13}{c +}{hline 56}
{space 6}valuez {c |}{res}     89596     383.356    648.4919          0      18500
{txt}
{com}. /*
> use "$path\in\cons_cod_trans.dta", clear;
>         *sort hhid;
>         sum;
> for var value quantityd cod_hh_nom cod_hh_nom2 cod_hh_nom3: replace X=0 if X==.;
> collapse food_cat prod_cat (sum) value quantityd cod_hh_nom cod_hh_nom2 cod_hh_nom3, by(hhid product descript);
>         save "$path\work\cons_cod.dta", replace;
>         sum;
> */
>  
> **************************************************************************
> * 020_hhdata.do         (end)
> **************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.         
. /*
>         * All kind of raw expenditure is handled: daily, own and monthly, rent and use value, education etc.
>         do "$path/new/030_rawdata.do"
> 
>         * Data set specific changes to each processed raw data set takes place here
>         do "$path/new/040_specifities.do"
> 
>         * These files summarizes and checks the data. But no temporal deflation done here yet
>         do "$path/new/050_consump_nom.do"
> 
>         * Bring in data on food product's calories per gram
>         do "$path/new/060_calperg.do"
> */
. **********************************************************************;
. **********************************************************************;
. 
.                                 do "$path/new/070_calpp.do"                             /* Calories per person in spatial domains*/
{txt}
{com}. *global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path\rep\070_calpp.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\070_calpp.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:57:58
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. *global fert_rate "fert_rate";
. ***********************************************************************
> * 070_calpp.do          (start)
> *
> * Purpose: Determine calories required for each person per domain per day.
> ***********************************************************************;
. /*
> This file uses:
>         work\indata.dta
>         work\hhdata.dta
> 
> This file creates:
>         work\calpp.dta
> */
> 
> *-------------------------------------------------------------------------*
> * Include fertility rates from csv-file
> *-------------------------------------------------------------------------*;
. clear;
{txt}
{com}. insheet sex rural age fert_rate using "$path/in/fert_rate_mozambique.csv";
{txt}(4 vars, 96 obs)

{com}. ***************************************** check for Ugandan fertility rates *************************************
> *************************************************************************************************************;
. sort sex rural age;
{txt}
{com}. tempfile fert_rate;
{txt}
{com}. save `fert_rate';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}. list;
{txt}
     {c TLC}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c TRC}
     {c |} {res}sex   rural   age   fert_r~e {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
  1. {c |} {res}  2       0    12       .003 {txt}{c |}
  2. {c |} {res}  2       0    13       .003 {txt}{c |}
  3. {c |} {res}  2       0    14       .093 {txt}{c |}
  4. {c |} {res}  2       0    15       .093 {txt}{c |}
  5. {c |} {res}  2       0    16       .093 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
  6. {c |} {res}  2       0    17       .093 {txt}{c |}
  7. {c |} {res}  2       0    18       .207 {txt}{c |}
  8. {c |} {res}  2       0    19       .207 {txt}{c |}
  9. {c |} {res}  2       0    20       .207 {txt}{c |}
 10. {c |} {res}  2       0    21       .207 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 11. {c |} {res}  2       0    22       .207 {txt}{c |}
 12. {c |} {res}  2       0    23       .207 {txt}{c |}
 13. {c |} {res}  2       0    24       .207 {txt}{c |}
 14. {c |} {res}  2       0    25       .207 {txt}{c |}
 15. {c |} {res}  2       0    26       .207 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 16. {c |} {res}  2       0    27       .207 {txt}{c |}
 17. {c |} {res}  2       0    28       .207 {txt}{c |}
 18. {c |} {res}  2       0    29       .207 {txt}{c |}
 19. {c |} {res}  2       0    30       .144 {txt}{c |}
 20. {c |} {res}  2       0    31       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 21. {c |} {res}  2       0    32       .144 {txt}{c |}
 22. {c |} {res}  2       0    33       .144 {txt}{c |}
 23. {c |} {res}  2       0    34       .144 {txt}{c |}
 24. {c |} {res}  2       0    35       .144 {txt}{c |}
 25. {c |} {res}  2       0    36       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 26. {c |} {res}  2       0    37       .144 {txt}{c |}
 27. {c |} {res}  2       0    38       .144 {txt}{c |}
 28. {c |} {res}  2       0    39       .144 {txt}{c |}
 29. {c |} {res}  2       0    40       .144 {txt}{c |}
 30. {c |} {res}  2       0    41       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 31. {c |} {res}  2       0    42       .144 {txt}{c |}
 32. {c |} {res}  2       0    43       .144 {txt}{c |}
 33. {c |} {res}  2       0    44       .144 {txt}{c |}
 34. {c |} {res}  2       0    45       .144 {txt}{c |}
 35. {c |} {res}  2       0    46       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 36. {c |} {res}  2       0    47       .144 {txt}{c |}
 37. {c |} {res}  2       0    48       .144 {txt}{c |}
 38. {c |} {res}  2       0    49       .144 {txt}{c |}
 39. {c |} {res}  2       0    50       .144 {txt}{c |}
 40. {c |} {res}  2       0    51       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 41. {c |} {res}  2       0    52       .144 {txt}{c |}
 42. {c |} {res}  2       0    53       .144 {txt}{c |}
 43. {c |} {res}  2       0    54       .144 {txt}{c |}
 44. {c |} {res}  2       0    55       .144 {txt}{c |}
 45. {c |} {res}  2       0    56       .144 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 46. {c |} {res}  2       0    57       .144 {txt}{c |}
 47. {c |} {res}  2       0    58       .144 {txt}{c |}
 48. {c |} {res}  2       0    59       .144 {txt}{c |}
 49. {c |} {res}  2       1    12       .009 {txt}{c |}
 50. {c |} {res}  2       1    13       .009 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 51. {c |} {res}  2       1    14        .11 {txt}{c |}
 52. {c |} {res}  2       1    15        .11 {txt}{c |}
 53. {c |} {res}  2       1    16        .11 {txt}{c |}
 54. {c |} {res}  2       1    17        .11 {txt}{c |}
 55. {c |} {res}  2       1    18        .28 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 56. {c |} {res}  2       1    19        .28 {txt}{c |}
 57. {c |} {res}  2       1    20        .28 {txt}{c |}
 58. {c |} {res}  2       1    21        .28 {txt}{c |}
 59. {c |} {res}  2       1    22        .28 {txt}{c |}
 60. {c |} {res}  2       1    23        .28 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 61. {c |} {res}  2       1    24        .28 {txt}{c |}
 62. {c |} {res}  2       1    25        .28 {txt}{c |}
 63. {c |} {res}  2       1    26        .28 {txt}{c |}
 64. {c |} {res}  2       1    27        .28 {txt}{c |}
 65. {c |} {res}  2       1    28        .28 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 66. {c |} {res}  2       1    29        .28 {txt}{c |}
 67. {c |} {res}  2       1    30       .212 {txt}{c |}
 68. {c |} {res}  2       1    31       .212 {txt}{c |}
 69. {c |} {res}  2       1    32       .212 {txt}{c |}
 70. {c |} {res}  2       1    33       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 71. {c |} {res}  2       1    34       .212 {txt}{c |}
 72. {c |} {res}  2       1    35       .212 {txt}{c |}
 73. {c |} {res}  2       1    36       .212 {txt}{c |}
 74. {c |} {res}  2       1    37       .212 {txt}{c |}
 75. {c |} {res}  2       1    38       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 76. {c |} {res}  2       1    39       .212 {txt}{c |}
 77. {c |} {res}  2       1    40       .212 {txt}{c |}
 78. {c |} {res}  2       1    41       .212 {txt}{c |}
 79. {c |} {res}  2       1    42       .212 {txt}{c |}
 80. {c |} {res}  2       1    43       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 81. {c |} {res}  2       1    44       .212 {txt}{c |}
 82. {c |} {res}  2       1    45       .212 {txt}{c |}
 83. {c |} {res}  2       1    46       .212 {txt}{c |}
 84. {c |} {res}  2       1    47       .212 {txt}{c |}
 85. {c |} {res}  2       1    48       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 86. {c |} {res}  2       1    49       .212 {txt}{c |}
 87. {c |} {res}  2       1    50       .212 {txt}{c |}
 88. {c |} {res}  2       1    51       .212 {txt}{c |}
 89. {c |} {res}  2       1    52       .212 {txt}{c |}
 90. {c |} {res}  2       1    53       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 91. {c |} {res}  2       1    54       .212 {txt}{c |}
 92. {c |} {res}  2       1    55       .212 {txt}{c |}
 93. {c |} {res}  2       1    56       .212 {txt}{c |}
 94. {c |} {res}  2       1    57       .212 {txt}{c |}
 95. {c |} {res}  2       1    58       .212 {txt}{c |}
     {c LT}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c RT}
 96. {c |} {res}  2       1    59       .212 {txt}{c |}
     {c BLC}{hline 5}{c -}{hline 7}{c -}{hline 5}{c -}{hline 10}{c BRC}

{com}. *-------------------------------------------------------------------------*
> * Now do the calorie needs for individuals
> *-------------------------------------------------------------------------*;
. use "$path\work\indata.dta";
{txt}
{com}. * CA bootstrap modification;
. sort hhid;
{txt}
{com}. merge hhid using "$path\work\hhdata.dta";
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}. tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     35,945      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     35,945      100.00
{txt}
{com}.  drop _m;
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 7}indid {c |}{res}     35945    2.57e+11    1.10e+11   1.01e+11   4.19e+11
{txt}{space 4}motherhh {c |}{res}     35945    .8787592    .3264114          0          1
{txt}{space 8}hhid {c |}{res}     35945    2.57e+09    1.10e+09   1.01e+09   4.19e+09
{txt}{space 9}sex {c |}{res}     35945     1.50861    .4999328          1          2
{txt}{space 9}age {c |}{res}     35945    18.94194    17.44062          0         98
{txt}{hline 13}{c +}{hline 56}
{space 6}strata {c |}{res}     35945    5.710586    2.766681          1         10
{txt}{space 8}mult {c |}{res}     35945    917.2863    619.3906   26.67222   10279.15
{txt}{space 6}region {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 7}urban {c |}{res}     35945    .1471693    .3542795          0          1
{txt}{space 4}district {c |}{res}     35945    257.0191    109.5067        101        419
{txt}{hline 13}{c +}{hline 56}
{space 7}rmult {c |}{res}     35945    917.2973    619.3847         27      10279
{txt}{space 6}hhsize {c |}{res}     35945    6.416497    2.935303          1         24
{txt}{space 5}welfare {c |}{res}     35945    62735.83     78270.9   2034.431    1932420
{txt}{space 4}hhweight {c |}{res}     35945     5917.96    5136.521         54      92511
{txt}{space 6}poor09 {c |}{res}     35945    .2781472    .4480925          0          1
{txt}{hline 13}{c +}{hline 56}
{space 9}day {c |}{res}     35945     14.0508    7.502636          1         31
{txt}{space 7}month {c |}{res}     35945     6.71398    3.387719          1         12
{txt}{space 8}Year {c |}{res}     35945    2009.329    .4700192       2009       2010
{txt}{space 7}h1bq8 {c |}{res}     35945     1.00498     .070393          1          2
{txt}{space 9}psu {c |}{res}     35945    377.7054    193.8014          1        712
{txt}{hline 13}{c +}{hline 56}
{space 4}survquar {c |}{res}     35945    2.484852    1.142574          1          4
{txt}{space 5}survmon {c |}{res}     35945    6.667353    3.350374          1         12
{txt}{space 7}rural {c |}{res}     35945    .8528307    .3542795          0          1
{txt}{space 8}news {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 8}bswt {c |}{res}     35945           1           0          1          1
{txt}{hline 13}{c +}{hline 56}
{space 4}spdomain {c |}{res}     35945    3.321575    1.334996          1          5
{txt}{space 5}reg_tpi {c |}{res}     35945    2.480234    1.085821          1          4
{txt}
{com}. * Include fertility rates;
. sort sex rural age;
{txt}
{com}. merge sex rural age using `fert_rate';
{txt}{p 0 4 2}
variable{txt}s{txt} sex
rural
age
do not uniquely identify observations in
the master data
{p_end}

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 7}indid {c |}{res}     35945    2.57e+11    1.10e+11   1.01e+11   4.19e+11
{txt}{space 4}motherhh {c |}{res}     35945    .8787592    .3264114          0          1
{txt}{space 8}hhid {c |}{res}     35945    2.57e+09    1.10e+09   1.01e+09   4.19e+09
{txt}{space 9}sex {c |}{res}     35945     1.50861    .4999328          1          2
{txt}{space 9}age {c |}{res}     35945    18.94194    17.44062          0         98
{txt}{hline 13}{c +}{hline 56}
{space 6}strata {c |}{res}     35945    5.710586    2.766681          1         10
{txt}{space 8}mult {c |}{res}     35945    917.2863    619.3906   26.67222   10279.15
{txt}{space 6}region {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 7}urban {c |}{res}     35945    .1471693    .3542795          0          1
{txt}{space 4}district {c |}{res}     35945    257.0191    109.5067        101        419
{txt}{hline 13}{c +}{hline 56}
{space 7}rmult {c |}{res}     35945    917.2973    619.3847         27      10279
{txt}{space 6}hhsize {c |}{res}     35945    6.416497    2.935303          1         24
{txt}{space 5}welfare {c |}{res}     35945    62735.83     78270.9   2034.431    1932420
{txt}{space 4}hhweight {c |}{res}     35945     5917.96    5136.521         54      92511
{txt}{space 6}poor09 {c |}{res}     35945    .2781472    .4480925          0          1
{txt}{hline 13}{c +}{hline 56}
{space 9}day {c |}{res}     35945     14.0508    7.502636          1         31
{txt}{space 7}month {c |}{res}     35945     6.71398    3.387719          1         12
{txt}{space 8}Year {c |}{res}     35945    2009.329    .4700192       2009       2010
{txt}{space 7}h1bq8 {c |}{res}     35945     1.00498     .070393          1          2
{txt}{space 9}psu {c |}{res}     35945    377.7054    193.8014          1        712
{txt}{hline 13}{c +}{hline 56}
{space 4}survquar {c |}{res}     35945    2.484852    1.142574          1          4
{txt}{space 5}survmon {c |}{res}     35945    6.667353    3.350374          1         12
{txt}{space 7}rural {c |}{res}     35945    .8528307    .3542795          0          1
{txt}{space 8}news {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 8}bswt {c |}{res}     35945           1           0          1          1
{txt}{hline 13}{c +}{hline 56}
{space 4}spdomain {c |}{res}     35945    3.321575    1.334996          1          5
{txt}{space 5}reg_tpi {c |}{res}     35945    2.480234    1.085821          1          4
{txt}{space 3}fert_rate {c |}{res}      9790    .1876158    .0860403       .003        .28
{txt}{space 6}_merge {c |}{res}     35945    1.544721    .8903613          1          3
{txt}
{com}. * Do calorie calculations ;
.     gen num=1;
{txt}
{com}.     gen cal = .;
{txt}(35945 missing values generated)

{com}. * Same assumptions about sex/age specific calories need in IAF 1997, IAF 2003 and IOF 2009;
. * Children (no difference between boys and girls)   ;
.      replace cal =  820 if age < 1;
{txt}(1196 real changes made)

{com}. * Add 500 cal per day for mothers in first six months of breast feeding
> * We assume that 60% of children under 1 are under six months old
> * And that all of them breast feed
> * We add these mother requirements of 300 on average to each child under 1 whose mother is alive;
.     replace cal = 1120 if age <  1 & motherhh==1;
{txt}(1168 real changes made)

{com}.     replace cal = 1150 if age >= 1 & age <2;
{txt}(2318 real changes made)

{com}.     replace cal = 1350 if age >= 2 & age <3;
{txt}(1288 real changes made)

{com}.     replace cal = 1550 if age >= 3 & age <5;
{txt}(2746 real changes made)

{com}. * Males ;
.     replace cal = 1850 if age >=  5 & age <7  & sex==1;
{txt}(1272 real changes made)

{com}.     replace cal = 2100 if age >=  7 & age <10 & sex==1;
{txt}(1776 real changes made)

{com}.     replace cal = 2200 if age >= 10 & age <12 & sex==1;
{txt}(1048 real changes made)

{com}.     replace cal = 2400 if age >= 12 & age <14 & sex==1;
{txt}(1122 real changes made)

{com}.     replace cal = 2650 if age >= 14 & age <16 & sex==1;
{txt}(932 real changes made)

{com}.     replace cal = 2850 if age >= 16 & age <18 & sex==1;
{txt}(792 real changes made)

{com}.     replace cal = 3000 if age >= 18 & age <30 & sex==1;
{txt}(3012 real changes made)

{com}.     replace cal = 2900 if age >= 30 & age <60 & sex==1;
{txt}(3276 real changes made)

{com}.     replace cal = 2450 if age>=60 & age~=. & sex==1;
{txt}(669 real changes made)

{com}. * Girls 5-12 years (probability of pregnancy assumed = 0) ;
.     replace cal = 1750 if age >=  5 & age < 7 & sex==2;
{txt}(1202 real changes made)

{com}.     replace cal = 1800 if age >=  7 & age <10 & sex==2;
{txt}(1698 real changes made)

{com}.     replace cal = 1950 if age >= 10 & age <12 & sex==2;
{txt}(1025 real changes made)

{com}. * Women with a correction for pregnancy. We add 285 calories per for the final trimester.
> * To do this we find the probability that rural and urban women are pregnant from
> * live births data in the 1997 census over the past 12 months (no correction for still births).
> * 3/4*probability of birth gives probability of preganancy. Probability of final trimester is one
> * third of that of that or 1/4 of the probability of birth
> 
> * Women urban;
.     replace cal = 2100 + (fert_rate*285)/4 if age >= 12 & age <14 & sex==2 & rural==0;
{txt}(135 real changes made)

{com}.     replace cal = 2150 + (fert_rate*285)/4 if age >= 14 & age <18 & sex==2 & rural==0;
{txt}(267 real changes made)

{com}.     replace cal = 2100 + (fert_rate*285)/4 if age >= 18 & age <30 & sex==2 & rural==0;
{txt}(874 real changes made)

{com}.     replace cal = 2150 + (fert_rate*285)/4 if age >= 30 & age <60 & sex==2 & rural==0;
{txt}(491 real changes made)

{com}. * Women rural;
.     replace cal = 2100 + (fert_rate*285)/4 if age >= 12 & age <14 & sex==2 & rural==1;
{txt}(941 real changes made)

{com}.     replace cal = 2150 + (fert_rate*285)/4 if age >= 14 & age <18 & sex==2 & rural==1;
{txt}(1392 real changes made)

{com}.     replace cal = 2100 + (fert_rate*285)/4 if age >= 18 & age <30 & sex==2 & rural==1;
{txt}(2824 real changes made)

{com}.     replace cal = 2150 + (fert_rate*285)/4 if age >= 30 & age <60 & sex==2 & rural==1;
{txt}(2866 real changes made)

{com}. * Women 60+ are not pregnant ;
.     replace cal = 1950 if age>=60 & age~=. & sex==2;
{txt}(783 real changes made)

{com}.     count if cal ==.;
{res}    0
{txt}
{com}.     *Fill in these two observations for IAF 2002/03:;
.     * 1) this one is a child;
.     *replace cal = 1500 if cal ==. & age==.;
.     * 2) this one is 21 years old;
.     *replace cal = 2500 if cal ==. & b2==.;
.     collapse (sum) cal num (max) psu hhsize hhweight strata rural spdomain, by (hhid);
{txt}
{com}.     gen chk=hhsize - num;
{txt}
{com}.     sum chk;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 9}chk {c |}{res}      6775   -.3455351    .8928498        -11          0
{txt}
{com}.     drop chk;
{txt}
{com}.     gen calpp = cal / hhsize;
{txt}
{com}.     sort spdomain;
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 9}cal {c |}{res}      6775    11158.93    6185.119       1950   50725.15
{txt}{space 9}num {c |}{res}      6775    5.305535    2.940196          1         24
{txt}{space 9}psu {c |}{res}      6775     365.894     201.698          1        712
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{space 6}strata {c |}{res}      6775    5.551734    2.873672          1         10
{txt}{space 7}rural {c |}{res}      6775    .8199262    .3842773          0          1
{txt}{space 4}spdomain {c |}{res}      6775      3.2431    1.373578          1          5
{txt}{space 7}calpp {c |}{res}      6775    2347.762    704.6076   1463.317   26470.68
{txt}
{com}. * MAH ;
.  sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 9}cal {c |}{res}      6775    11158.93    6185.119       1950   50725.15
{txt}{space 9}num {c |}{res}      6775    5.305535    2.940196          1         24
{txt}{space 9}psu {c |}{res}      6775     365.894     201.698          1        712
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{space 6}strata {c |}{res}      6775    5.551734    2.873672          1         10
{txt}{space 7}rural {c |}{res}      6775    .8199262    .3842773          0          1
{txt}{space 4}spdomain {c |}{res}      6775      3.2431    1.373578          1          5
{txt}{space 7}calpp {c |}{res}      6775    2347.762    704.6076   1463.317   26470.68
{txt}
{com}.  codebook hhid;

{txt}{hline}
{res}hhid{right:Household ID}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}6775

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. collapse (mean) calpp[aw=hhsize*hhweight], by (spdomain);
{txt}
{com}. sort spdomain;
{txt}
{com}. save "$path\work\calpp.dta",replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\calpp.dta saved

{com}. ***********************************************************************
> * 070_calpp.do          (end)
> ***********************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\070_calpp.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}17 May 2013, 14:57:59
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/080_conpc.do"                             /* Nominal food/non-food expenditure */
{txt}
{com}. *global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA"
. clear all
{txt}
{com}. set mem 100m
{txt}
{com}. 
. clear
{txt}
{com}. cap log close
{txt}
{com}. log using "$path/rep/080_conpc.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/080_conpc.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:57:59
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. ***************************************************************************
> * 080_conpc.do          (start)
> *
> * Creates a file with per capita nominal consumption divided between food
> * and non-food categories based on the calorie definition of food
> * rather than the COICOP (INE) definition of food. ready for 
> * temporal deflation when necessary
> ****************************************************************************;
. /*
> This file uses:
>         work\hhdata.dta
>         work\consump_nom.dta
>       
> This file creates:
>         work\conpc.dta
> */
> 
> 
> 
> ***************************************************************************
> * Food expenditure
> ****************************************************************************;
. *use "$path\in\cons_cod.dta";
. use "$path\work\cons_cod.dta";
{txt}
{com}.             *sort product;
.             *merge product using "$path\work\food_cat.dta";
.             *tab _m;
.             *drop _m;
.             keep if food_cat==1;
{txt}(322449 observations deleted)

{com}.             collapse (sum) cod_hh_nom, by(hhid);
{txt}
{com}.             rename cod_hh_nom food_hh_nom;
{txt}
{com}.                 sort hhid;
{txt}
{com}.             keep hhid food_hh_nom;
{txt}
{com}.             tempfile foodexp;
{txt}
{com}. save `foodexp';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}. ***************************************************************************
> * Food expenditure merged with all expenditure
> ****************************************************************************;
. use "$path\work\cons_cod.dta";
{txt}
{com}. *use "$path\in\cons_cod.dta";
. *use "$path\in\cons_cat.dta";
. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}    412045    810.2635    358.1243        100        999
{txt}{space 4}food_cat {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{space 4}prod_cat {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{space 4}descript {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{hline 13}{c +}{hline 56}
{space 3}quantityd {c |}{res}    412045    .1694884    1.512903          0   364.2857
{txt}{space 1}cod_hh_nom3 {c |}{res}    412045    83.35781    341.2477          0      18500
{txt}{space 2}cod_hh_nom {c |}{res}    412045    1602.923    615777.4          0   3.95e+08
{txt}{space 1}cod_hh_nom2 {c |}{res}    412045    1602.658    615777.4          0   3.95e+08
{txt}
{com}. collapse (sum) cod_hh_nom, by(hhid);
{txt}
{com}. *gen cons_pc_nom = cons_hh_nom/hhsize;
. rename cod_hh_nom cons_hh_nom;
{txt}
{com}. *keep  hhid cons_pc_nom cons_hh_nom ;
. *keep hhid cod_hh_nom;
. *use "$path\in\cons_cod.dta";
. *use "$path\in\consump_nom.dta";
. *use "$path\work\consump_nom.dta";
. *            keep  hhid cons_hh_nom ;
.             display _N;
{res}6775
{txt}
{com}.             keep  hhid cons_hh_nom ;
{txt}
{com}.             sort hhid;
{txt}
{com}.             merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.             tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.             drop _m;
{txt}
{com}. gen cons_pc_nom = cons_hh_nom/hhsize;
{txt}
{com}.             sort hhid;
{txt}
{com}.             merge hhid using `foodexp';
{txt}
{com}.             tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                 drop if _merge==2;
{txt}(0 observations deleted)

{com}.             replace food_hh_nom=0 if _merge==1 & food_hh_nom==.;
{txt}(0 real changes made)

{com}.             drop _m;
{txt}
{com}.                 gen food_pc_nom=food_hh_nom/hhsize;
{txt}
{com}.                 gen nf_hh_nom=cons_hh_nom-food_hh_nom;
{txt}
{com}.             gen nf_pc_nom=nf_hh_nom/hhsize;
{txt}
{com}.              keep hhid cons_hh_nom food_pc_nom nf_pc_nom cons_pc_nom survquar spdomain news reg_tpi rural hhweight hhsize;
{txt}
{com}.             lab var food_pc_nom "nominal food consumption per capita";
{txt}
{com}.             lab var nf_pc_nom "nominal non-food consumption per capita";
{txt}
{com}. keep hhid cons_hh_nom cons_pc_nom food_pc_nom nf_pc_nom;
{txt}
{com}.             sort hhid;
{txt}
{com}. * MAH ;
.  sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 1}cons_hh_nom {c |}{res}      6775    97487.28     4938495   232.1918   4.06e+08
{txt}{space 1}cons_pc_nom {c |}{res}      6775    20773.97    987396.4   78.55931   8.12e+07
{txt}{space 1}food_pc_nom {c |}{res}      6775    1257.269    1252.965          0   17857.14
{txt}{space 3}nf_pc_nom {c |}{res}      6775     19516.7    987342.9   23.11263   8.12e+07
{txt}
{com}.  codebook hhid;

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}6775

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. save "$path\work\conpc.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\conpc.dta saved

{com}. ***************************************************************************
> * 080_conpc.do          (end)
> ****************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/080_conpc.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}17 May 2013, 14:58:00
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/090_temp_index.do"                /* Temporal price index */
{txt}
{com}. *global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/090_temp_index.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/090_temp_index.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:58:00
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 090_temp_index.do     (start)
> **************************************************************************;
. *do "$path/new/010_initial.do";
. **************************************************************************
> * Program to compute the temporal price index (intra-survey)
> * 
> * The index is based on 6 regions (North/Center/South by rural/urban) 
> * and four quarters. For IAF 2002/03 (t=t1) it is based on the same 9
> * commodities used for the analysis of the 1996 IAF (t=t0), 
> * except that we have to go to 8 commodities because the 2002-03 survey 
> * does not distinguish between large and small groundnuts, which were 
> * separate items in the old index. For IOF 2008/09 (t=t2) we expand the
> * the food basket to include the 15 most important food products among
> * the poorest.
> *
> * The commodity weights for the items vary by the 6 regions, and are 
> * calculated from the observations in the IAF2002, using the relatively 
> * poor households (below median nominal consumption per capita).
> *
> * The unit values (prices) calculated here are also based on the prices 
> * paid by the relatively poor, using the same definition.
> *
> * K Simler, Sep 2003
> * CA
> * MAH, April 2010
> * URB, Feb 2013 (automatization to any number of n_tpi's)
> **************************************************************************;
. /*
> This file uses:
>         work\own.dta
>         work\receipts.dta
>         work\daily.dta
>         work\hhdata
>         work\cons_cat.dta
> 
> This file creates:
>         work\tpi_unit_val_quarterly.dta
>         work\tpi_unit_val_monthly.dta
>         work\tpi_news_share.dta
>         work\tpi_reg_tpi_share.dta
>         work\temp_index_news.dta
>         work\temp_index_reg_tpi.dta
> */      
> 
> 
> **************************************************************************
> * Either the products used for intertemporal price index is specified
> * explicitly, or they are automatically found as the the n_tpi products
> * with the highest weighted expenditure shares among the $bottom % poorest
> * part of the population
> **************************************************************************;
. * Generating the n_tpi most important food items for the poorest $bottom % ;
. **************************************************************************
> * Find the n_tpi most important food products among the lowest $bottom %
> * (start)
> **************************************************************************;
. *------------------------------------------------------------------------*
> * Population weights for each HH
> *------------------------------------------------------------------------*;
. use "$path/work\hhdata.dta", clear;
{txt}
{com}. keep hhid hhweight hhsize;
{txt}
{com}. gen popwt = hhweight*hhsize;
{txt}
{com}. lab var popwt "Population weights = hhsize X hhweight";
{txt}
{com}. sort hhid;
{txt}
{com}. tempfile popwt;
{txt}
{com}. save `popwt', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{space 7}popwt {c |}{res}      6775    29614.26    44555.51         62     832599
{txt}
{com}. *------------------------------------------------------------------------*
> * Make list of all consumed products
> *------------------------------------------------------------------------*;
. *use "$path/in\cons_cod.dta", clear;
. *save "$path/work\cons_cod.dta", replace;
. use "$path/work\cons_cod.dta", clear;
{txt}
{com}. keep product descript;
{txt}
{com}. collapse product, by(descript);
{txt}
{com}. sort product;
{txt}
{com}. tempfile descript;
{txt}
{com}. save `descript', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}descript {c |}{res}         2         1.5    .7071068          1          2
{txt}{space 5}product {c |}{res}         2    565.0077    613.7578   131.0155        999
{txt}
{com}. *------------------------------------------------------------------------*
> * Find the poorest part of the population
> *------------------------------------------------------------------------*;
. use
> "$path/work\cons_cod.dta", clear;
{txt}
{com}. *use
> *"$path/work\cons_cod.dta", clear;
. ********************************************check the COICOP categories to create the variable prod_cat, for the moment it is equal to food_cat******;
. keep hhid prod_cat product cod_hh_nom;
{txt}
{com}. sort hhid;
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}    412045    810.2635    358.1243        100        999
{txt}{space 4}prod_cat {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{space 2}cod_hh_nom {c |}{res}    412045    1602.923    615777.4          0   3.95e+08
{txt}
{com}. merge hhid using `popwt';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}    412045    810.2635    358.1243        100        999
{txt}{space 4}prod_cat {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{space 2}cod_hh_nom {c |}{res}    412045    1602.923    615777.4          0   3.95e+08
{txt}{space 6}hhsize {c |}{res}    412045    5.313592    2.837438          1         24
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}    412045    4940.193    4557.506         54      92511
{txt}{space 7}popwt {c |}{res}    412045    33954.53     49935.3         62     832599
{txt}{space 6}_merge {c |}{res}    412045           3           0          3          3
{txt}
{com}. drop _merge;
{txt}
{com}. preserve;
{txt}
{com}. collapse (sum) cod_hh_nom (mean) popwt hhweight hhsize, by(hhid);
{txt}
{com}. gen cod_pc_nom = cod_hh_nom/hhsize;
{txt}
{com}.         sum cod_pc_nom [aw=popwt] , detail;

                         {txt}cod_pc_nom
{hline 61}
      Percentiles      Smallest
 1%    {res} 332.3661       78.55931
{txt} 5%    {res} 680.3636       103.0936
{txt}10%    {res} 872.9067       107.7462       {txt}Obs         {res}       6775
{txt}25%    {res} 1328.983       145.4659       {txt}Sum of Wgt. {res}  200636622

{txt}50%    {res} 2175.789                      {txt}Mean          {res} 9412.851
                        {txt}Largest       Std. Dev.     {res}   395673
{txt}75%    {res} 3972.618        1528531
{txt}90%    {res}  9057.59        1552604       {txt}Variance      {res} 1.57e+11
{txt}95%    {res} 17758.21        1790269       {txt}Skewness      {res} 202.1632
{txt}99%    {res} 88724.46       8.12e+07       {txt}Kurtosis      {res} 41456.83
{txt}
{com}.         global medcpc_= r(p$tpi_bottom);
{txt}
{com}.         gen bottom_ = cod_pc_nom <= $medcpc_;
{txt}
{com}. sum [aw=popwt];

{txt}    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 8}hhid {c |}{res}    6775   200636622    2.52e+09   1.10e+09   1.01e+09   4.19e+09
{txt}{space 2}cod_hh_nom {c |}{res}    6775   200636622    67821.64    2005057   232.1918   4.06e+08
{txt}{space 7}popwt {c |}{res}    6775   200636622    96639.42   125478.2         62     832599
{txt}{space 4}hhweight {c |}{res}    6775   200636622    10417.53   10233.19         54      92511
{txt}{space 6}hhsize {c |}{res}    6775   200636622    7.911641   3.294698          1         24
{txt}{hline 13}{c +}{hline 65}
{space 2}cod_pc_nom {c |}{res}    6775   200636622    9412.851     395673   78.55931   8.12e+07
{txt}{space 5}bottom_ {c |}{res}    6775   200636622    .5001342   .5000369          0          1
{txt}
{com}. sum [aw=hhweight];

{txt}    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 8}hhid {c |}{res}    6775    30713326    2.51e+09   1.12e+09   1.01e+09   4.19e+09
{txt}{space 2}cod_hh_nom {c |}{res}    6775    30713326    61490.01    2271154   232.1918   4.06e+08
{txt}{space 7}popwt {c |}{res}    6775    30713326    68053.16   97418.28         62     832599
{txt}{space 4}hhweight {c |}{res}    6775    30713326    8619.458   9115.422         54      92511
{txt}{space 6}hhsize {c |}{res}    6775    30713326    6.532559   3.001711          1         24
{txt}{hline 13}{c +}{hline 65}
{space 2}cod_pc_nom {c |}{res}    6775    30713326    10464.25   451493.4   78.55931   8.12e+07
{txt}{space 5}bottom_ {c |}{res}    6775    30713326    .4751522   .4994191          0          1
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 2}cod_hh_nom {c |}{res}      6775    97487.28     4938495   232.1918   4.06e+08
{txt}{space 7}popwt {c |}{res}      6775    29614.26    44555.51         62     832599
{txt}{space 4}hhweight {c |}{res}      6775    4533.332    4304.242         54      92511
{txt}{space 6}hhsize {c |}{res}      6775        4.96     2.75857          1         24
{txt}{hline 13}{c +}{hline 56}
{space 2}cod_pc_nom {c |}{res}      6775    20773.97    987396.4   78.55931   8.12e+07
{txt}{space 5}bottom_ {c |}{res}      6775    .4529889    .4978218          0          1
{txt}
{com}. keep if bottom_==1;
{txt}(3706 observations deleted)

{com}. keep hhid;
{txt}
{com}. sort hhid;
{txt}
{com}. tempfile hhid;
{txt}
{com}. save `hhid';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000004.tmp saved

{com}. restore;
{txt}
{com}. sort hhid;
{txt}
{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}    412045    810.2635    358.1243        100        999
{txt}{space 4}prod_cat {c |}{res}    412045    1.782558    .4125064          1          2
{txt}{space 2}cod_hh_nom {c |}{res}    412045    1602.923    615777.4          0   3.95e+08
{txt}{space 6}hhsize {c |}{res}    412045    5.313592    2.837438          1         24
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}    412045    4940.193    4557.506         54      92511
{txt}{space 7}popwt {c |}{res}    412045    33954.53     49935.3         62     832599
{txt}
{com}. merge hhid using `hhid';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}. tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}    239,058       58.02       58.02
{txt}          3 {c |}{res}    172,987       41.98      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}
{com}. keep if _m==3;
{txt}(239058 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}    172987    2.80e+09    9.34e+08   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}    172987    827.7079     345.362        100        999
{txt}{space 4}prod_cat {c |}{res}    172987    1.802505    .3981098          1          2
{txt}{space 2}cod_hh_nom {c |}{res}    172987    123.5388    359.1169          0    10958.9
{txt}{space 6}hhsize {c |}{res}    172987    5.986531    2.565258          1         19
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}    172987    5154.068    4379.562        100      60164
{txt}{space 7}popwt {c |}{res}    172987    37036.91    46121.88        100     782132
{txt}{space 6}_merge {c |}{res}    172987           3           0          3          3
{txt}
{com}. *------------------------------------------------------------------------*
> * Keep only food product expenditure by the poor. Calculate food product
> * share of total food expenditure by the poor
> *------------------------------------------------------------------------*;
. keep if prod_cat==1;
{txt}(138823 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     34164    2.78e+09    9.37e+08   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     34164    131.6748    15.79307        100        161
{txt}{space 4}prod_cat {c |}{res}     34164           1           0          1          1
{txt}{space 2}cod_hh_nom {c |}{res}     34164    297.0688    482.2309          0       9000
{txt}{space 6}hhsize {c |}{res}     34164    5.843549    2.501487          1         19
{txt}{hline 13}{c +}{hline 56}
{space 4}hhweight {c |}{res}     34164    5028.222    4166.388        100      60164
{txt}{space 7}popwt {c |}{res}     34164    35157.19    43014.83        100     782132
{txt}{space 6}_merge {c |}{res}     34164           3           0          3          3
{txt}
{com}. sort product;
{txt}
{com}. *preserve;
. collapse (sum) cod_hh_nom [aw=hhweight], by(product);
{txt}
{com}. sort cod;
{txt}
{com}. egen total=sum(cod_hh_nom);
{txt}
{com}. gen sh=100*cod_hh_nom/total;
{txt}
{com}. *------------------------------------------------------------------------*
> * Include product labels
> *------------------------------------------------------------------------*;
. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}        62       130.5    18.04162        100        161
{txt}{space 2}cod_hh_nom {c |}{res}        62    189847.5      266511   1752.996    1123210
{txt}{space 7}total {c |}{res}        62    1.18e+07           0   1.18e+07   1.18e+07
{txt}{space 10}sh {c |}{res}        62    1.612903     2.26422   .0148931   9.542551
{txt}
{com}. sort product;
{txt}
{com}. merge product using `descript';
{txt}
{com}. tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         62       96.88       96.88
{txt}          2 {c |}{res}          2        3.13      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         64      100.00
{txt}
{com}. keep if _merge==1 | _merge==3;
{txt}(2 observations deleted)

{com}. drop _merge;
{txt}
{com}. sort sh;
{txt}
{com}. *list;
. list in -$product_tpi_n/-1;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product   cod_hh~m      total         sh   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 48. {c |} {res}    153   222373.6   1.18e+07   1.889238          . {txt}{c |}
 49. {c |} {res}    125   230312.1   1.18e+07   1.956682          . {txt}{c |}
 50. {c |} {res}    123   230714.2   1.18e+07   1.960098          . {txt}{c |}
 51. {c |} {res}    127   234920.9   1.18e+07   1.995837          . {txt}{c |}
 52. {c |} {res}    140   251058.4   1.18e+07   2.132938          . {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 53. {c |} {res}    103   316957.7   1.18e+07   2.692804          . {txt}{c |}
 54. {c |} {res}    104   335649.7   1.18e+07   2.851607          . {txt}{c |}
 55. {c |} {res}    147   418515.3   1.18e+07   3.555615          . {txt}{c |}
 56. {c |} {res}    117   440335.5   1.18e+07   3.740995          . {txt}{c |}
 57. {c |} {res}    116   479750.5   1.18e+07   4.075856          . {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 58. {c |} {res}    107   720970.3   1.18e+07   6.125207          . {txt}{c |}
 59. {c |} {res}    141   940596.5   1.18e+07   7.991104          . {txt}{c |}
 60. {c |} {res}    108    1056863   1.18e+07   8.978882          . {txt}{c |}
 61. {c |} {res}    105    1108255   1.18e+07   9.415496          . {txt}{c |}
 62. {c |} {res}    113    1123210   1.18e+07   9.542551          . {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}. list product descript in -$product_tpi_n/-1;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}product   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
 48. {c |} {res}    153          . {txt}{c |}
 49. {c |} {res}    125          . {txt}{c |}
 50. {c |} {res}    123          . {txt}{c |}
 51. {c |} {res}    127          . {txt}{c |}
 52. {c |} {res}    140          . {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
 53. {c |} {res}    103          . {txt}{c |}
 54. {c |} {res}    104          . {txt}{c |}
 55. {c |} {res}    147          . {txt}{c |}
 56. {c |} {res}    117          . {txt}{c |}
 57. {c |} {res}    116          . {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
 58. {c |} {res}    107          . {txt}{c |}
 59. {c |} {res}    141          . {txt}{c |}
 60. {c |} {res}    108          . {txt}{c |}
 61. {c |} {res}    105          . {txt}{c |}
 62. {c |} {res}    113          . {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c BRC}

{com}. *restore;
. *------------------------------------------------------------------------*
> * Keep the required number of most important food products
> *------------------------------------------------------------------------*;
. keep in -$product_tpi_n/-1;
{txt}(47 observations deleted)

{com}. list;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product   cod_hh~m      total         sh   descript {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    153   222373.6   1.18e+07   1.889238          . {txt}{c |}
  2. {c |} {res}    125   230312.1   1.18e+07   1.956682          . {txt}{c |}
  3. {c |} {res}    123   230714.2   1.18e+07   1.960098          . {txt}{c |}
  4. {c |} {res}    127   234920.9   1.18e+07   1.995837          . {txt}{c |}
  5. {c |} {res}    140   251058.4   1.18e+07   2.132938          . {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  6. {c |} {res}    103   316957.7   1.18e+07   2.692804          . {txt}{c |}
  7. {c |} {res}    104   335649.7   1.18e+07   2.851607          . {txt}{c |}
  8. {c |} {res}    147   418515.3   1.18e+07   3.555615          . {txt}{c |}
  9. {c |} {res}    117   440335.5   1.18e+07   3.740995          . {txt}{c |}
 10. {c |} {res}    116   479750.5   1.18e+07   4.075856          . {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}    107   720970.3   1.18e+07   6.125207          . {txt}{c |}
 12. {c |} {res}    141   940596.5   1.18e+07   7.991104          . {txt}{c |}
 13. {c |} {res}    108    1056863   1.18e+07   8.978882          . {txt}{c |}
 14. {c |} {res}    105    1108255   1.18e+07   9.415496          . {txt}{c |}
 15. {c |} {res}    113    1123210   1.18e+07   9.542551          . {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}. gen product_tpi=1;
{txt}
{com}. keep product product_tpi;
{txt}
{com}. list;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}product   produc~i {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}    153          1 {txt}{c |}
  2. {c |} {res}    125          1 {txt}{c |}
  3. {c |} {res}    123          1 {txt}{c |}
  4. {c |} {res}    127          1 {txt}{c |}
  5. {c |} {res}    140          1 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}    103          1 {txt}{c |}
  7. {c |} {res}    104          1 {txt}{c |}
  8. {c |} {res}    147          1 {txt}{c |}
  9. {c |} {res}    117          1 {txt}{c |}
 10. {c |} {res}    116          1 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}    107          1 {txt}{c |}
 12. {c |} {res}    141          1 {txt}{c |}
 13. {c |} {res}    108          1 {txt}{c |}
 14. {c |} {res}    105          1 {txt}{c |}
 15. {c |} {res}    113          1 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c BRC}

{com}. sort product;
{txt}
{com}. tempfile product_tpi;
{txt}
{com}. save `product_tpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}        15    121.9333     16.5679        103        153
{txt}{space 1}product_tpi {c |}{res}        15           1           0          1          1
{txt}
{com}. clear;
{txt}
{com}. **************************************************************************
> * Find the n_tpi most important food products among the lowest $bottom %
> * (end)
> **************************************************************************;
. **************************************************************************;
. * First, need to calculate the average prices for the food items, by 
> * strata and quarter. For this, we are using the "unit values"
> * (value/quantity) for the observations in the consumption questionnaires,
> * including daily, own and receipts-in-kind.
> *
> * The unit values are constructed as sum(value)/sum(quantity), which effectively
> * weights them by the quantity and value of the transaction. Sampling
> * weights are also used.
> *
> * Get the own consumption file, and limit analysis to the observations
> * in KGs where both value and quantity are available.
> **************************************************************************;
. use "$path/work/cons_cod.dta";
{txt}
{com}. *use "$path/work/cons_cod.dta";
. keep if prod_cat==1;
{txt}(322449 observations deleted)

{com}. drop if quantityd==0 | quantityd==.;
{txt}(4392 observations deleted)

{com}. *keep if quantityd!=. & cod_hh_nom2!=.;
. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     85204    2.44e+09    1.14e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     85204    131.0922    15.78502        100        161
{txt}{space 4}food_cat {c |}{res}     85204           1           0          1          1
{txt}{space 4}prod_cat {c |}{res}     85204           1           0          1          1
{txt}{space 4}descript {c |}{res}     85204           1           0          1          1
{txt}{hline 13}{c +}{hline 56}
{space 3}quantityd {c |}{res}     85204     .819643    3.245947   .0000286   364.2857
{txt}{space 1}cod_hh_nom3 {c |}{res}     85204    403.1168    658.9792          0      18500
{txt}{space 2}cod_hh_nom {c |}{res}     85204    403.1168    658.9792          0      18500
{txt}{space 1}cod_hh_nom2 {c |}{res}     85204    403.1168    658.9792          0      18500
{txt}
{com}. sort product;
{txt}
{com}. merge product using `product_tpi';
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

{com}. tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     50,968       59.82       59.82
{txt}          3 {c |}{res}     34,236       40.18      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,204      100.00
{txt}
{com}. drop _merge;
{txt}
{com}. keep if $product_tpi;
{txt}(50968 observations deleted)

{com}. *        replace valued_ac=0 if valued_ac==.;
. *        replace quantityd_ac=0 if quantityd_ac==.;
.         gen valued_tot=cod_hh_nom2;
{txt}
{com}.         gen quantityd_tot=quantityd;
{txt}
{com}. *               replace quantityd_tot=0 if (valued_tot>0 & valued_tot<.) & quantityd_tot==.;
.         keep if quantityd_tot!=. & valued_tot!=.;
{txt}(0 observations deleted)

{com}.                 collapse (sum) valued_tot quantityd_tot, by(hhid product);
{txt}
{com}.                 sort hhid;
{txt}
{com}. tempfile acredd;
{txt}
{com}. save `acredd' , replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     34236    2.47e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     34236    123.5172     15.5879        103        153
{txt}{space 2}valued_tot {c |}{res}     34236    578.2445    711.6146   7.142857      12000
{txt}quantityd_~t {c |}{res}     34236    1.508504    4.636162   .0028571   364.2857
{txt}
{com}. /*
> **************************************************************************;
> * Create a data set with an empty 1 observation. Used to avoid empty data
> * sets when the survey do not have the Mozambican set up
> **************************************************************************;
> use "$path/work/own.dta";
> 
> preserve;
> keep in 1;
> drop unit valued quantityd;
> gen unit=2;
> gen valued=0;
> gen quantityd=0;
> tempfile 1obs;
> save `1obs';
> restore;
> 
> **************************************************************************;
> * Own consumption
> **************************************************************************;
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
>         rename valued valued_ac;
>         rename quantityd quantityd_ac;
>         compress;
>         sort hhid product;
>         tempfile ac;
> save `ac', replace;
> 
> **************************************************************************;
> * Now do a similar thing with receipts-in-kind file.
> **************************************************************************;
> use "$path/work/receipts.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> 
> 
> keep if $product_tpi;
> append using `1obs';
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
>         rename valued valued_re;
>         rename quantityd quantityd_re;
>         compress;
>         sort hhid product;
>         tempfile re;
> save `re', replace;
> 
> **************************************************************************;
> * And also with the daily expenditure file.
> **************************************************************************;
> use "$path/work/daily.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> *rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> *rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         collapse (sum) value quantity days , 
>                 by(hhid product unit);
> 
>         gen valued=value/7 if days<=7;
>         replace valued=value/days if days>7 & days<.;
>         gen quantityd=quantity/7 if days<=7;
>         replace quantityd=quantity/days if days>7 & days<.;
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
> 
>         rename valued valued_dd;
>         rename quantityd quantityd_dd;
>         compress;
>         sort hhid product;
>         tempfile dd;
> save `dd', replace;
> 
> 
> 
> 
> **************************************************************************;
> * Merge the three components (own, daily, receipts) together at the HH/product level, 
> * then aggregate to the regional level, using the sample weights (hhweight).
> * We DON'T want to weight by "hhsize" because the quantity and value are
> * already for the household (i.e., other things equal, larger households
> * are buying larger quantities, and therefore already getting more weight).
> * Then calculate sum(val)/sum(quantity) to get the quantity weighted mean
> * unit value in each strata in each quarter.
> **************************************************************************;
> use `ac';
>         sort hhid product;
>         merge hhid product using `re';
>         tab _m;
>         drop _m;
>         
>         sort hhid product;
>         merge hhid product using `dd';
>         tab _m;
>         drop _m;
>         
>         replace valued_ac=0 if valued_ac==.;
>         replace valued_re=0 if valued_re==.;
>         replace valued_dd=0 if valued_dd==.;
>         replace quantityd_ac=0 if quantityd_ac==.;
>         replace quantityd_re=0 if quantityd_re==.;
>         replace quantityd_dd=0 if quantityd_dd==.;
> 
>         gen valued_tot=valued_ac+valued_re+valued_dd;
>         gen quantityd_tot=quantityd_ac+quantityd_re+quantityd_dd;
> 
>         sort hhid;
> 
>         tempfile acredd;
> save `acredd' , replace;
> */
> 
> 
> 
> use "$path/work/hhdata.dta";
{txt}
{com}.         keep strata hhid hhweight hhsize rural survmon survquar news spdomain reg_tpi;
{txt}
{com}.         sort hhid;
{txt}
{com}.         tempfile hhd;
{txt}
{com}. save `hhd' , replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000007.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000007.tmp saved

{com}. use `acredd', clear;
{txt}
{com}.         merge hhid using `hhd';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        315        0.91        0.91
{txt}          3 {c |}{res}     34,236       99.09      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,551      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.                 tab survquar , miss;

 {txt}Sequential {c |}
     Survey {c |}
    Quarter {c |}
    May-Jun {c |}
      09=1) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
 May-Jul 09 {c |}{res}      8,742       25.30       25.30
{txt}Sept-Oct 09 {c |}{res}      8,992       26.03       51.33
{txt}Nov09-Jan10 {c |}{res}      7,404       21.43       72.76
{txt} Feb-Apr 10 {c |}{res}      9,413       27.24      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,551      100.00
{txt}
{com}.                 tab survmon survquar, miss;

{txt}Sequential {c |}
    Survey {c |}
Month (May {c |}   Sequential Survey Quarter May-Jun 09=1)
   2009=1) {c |} May-Jul 0  Sept-Oct   Nov09-Jan  Feb-Apr 1 {c |}     Total
{hline 11}{c +}{hline 44}{c +}{hline 10}
    May 09 {c |}{res}       187          0          0          0 {txt}{c |}{res}       187 
{txt}    Jun 09 {c |}{res}     6,230          0          0          0 {txt}{c |}{res}     6,230 
{txt}    Jul 09 {c |}{res}     2,325          0          0          0 {txt}{c |}{res}     2,325 
{txt}    Sep 09 {c |}{res}         0      3,119          0          0 {txt}{c |}{res}     3,119 
{txt}    Oct 09 {c |}{res}         0      5,873          0          0 {txt}{c |}{res}     5,873 
{txt}    Nov 09 {c |}{res}         0          0      3,162          0 {txt}{c |}{res}     3,162 
{txt}    Dec 09 {c |}{res}         0          0      2,074          0 {txt}{c |}{res}     2,074 
{txt}    Jan 10 {c |}{res}         0          0      2,168          0 {txt}{c |}{res}     2,168 
{txt}    Feb 10 {c |}{res}         0          0          0      2,225 {txt}{c |}{res}     2,225 
{txt}    Mar 10 {c |}{res}         0          0          0      4,683 {txt}{c |}{res}     4,683 
{txt}    Apr 10 {c |}{res}         0          0          0      2,505 {txt}{c |}{res}     2,505 
{txt}{hline 11}{c +}{hline 44}{c +}{hline 10}
     Total {c |}{res}     8,742      8,992      7,404      9,413 {txt}{c |}{res}    34,551 

{txt}
{com}.         compress;
{txt}product was {res}float{txt} now {res}int
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}
{com}.         sort hhid;
{txt}
{com}. save `acredd', replace;
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     34551    2.47e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     34236    123.5172     15.5879        103        153
{txt}{space 2}valued_tot {c |}{res}     34236    578.2445    711.6146   7.142857      12000
{txt}quantityd_~t {c |}{res}     34236    1.508504    4.636162   .0028571   364.2857
{txt}{space 6}strata {c |}{res}     34551    5.478278    2.879859          1         10
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}     34551    5.225059     2.74337          1         24
{txt}{space 4}hhweight {c |}{res}     34551    4924.711    4407.844         54      92511
{txt}{space 4}survquar {c |}{res}     34551     2.50615    1.140574          1          4
{txt}{space 5}survmon {c |}{res}     34551    6.729646    3.333076          1         12
{txt}{space 7}rural {c |}{res}     34551    .8112066    .3913501          0          1
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}     34551    2.380539    1.120118          1          4
{txt}{space 4}spdomain {c |}{res}     34551    3.200399    1.378315          1          5
{txt}{space 5}reg_tpi {c |}{res}     34551    2.380539    1.120118          1          4
{txt}
{com}. **************************************************************************;
. * Need to merge with the file that has nominal consumption per household,
> * and compute nominal consumption per capita from that, so that we can
> * choose the relatively poor (i.e., below median nominal consumption per
> * capita).
> **************************************************************************;
. use "$path\work\conpc.dta", clear;
{txt}
{com}. keep hhid cons_hh_nom;
{txt}
{com}. *use "$path/in/cons_cat.dta" ;
. *save "$path/work/cons_cat.dta", replace ;
. *use "$path/work/cons_cat.dta" ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;
{txt}
{com}.         merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.           tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.  drop _m;
{txt}
{com}.         collapse (mean) cons_hh_nom hhsize hhweight , by(hhid);
{txt}
{com}.         gen cpc=cons_hh_nom/hhsize;
{txt}
{com}.         sum cpc [aw=hhsize*hhweight] , detail;

                             {txt}cpc
{hline 61}
      Percentiles      Smallest
 1%    {res} 332.3661       78.55931
{txt} 5%    {res} 680.3636       103.0936
{txt}10%    {res} 872.9067       107.7462       {txt}Obs         {res}       6775
{txt}25%    {res} 1328.983       145.4659       {txt}Sum of Wgt. {res}  200636622

{txt}50%    {res} 2175.789                      {txt}Mean          {res} 9412.851
                        {txt}Largest       Std. Dev.     {res}   395673
{txt}75%    {res} 3972.618        1528531
{txt}90%    {res}  9057.59        1552604       {txt}Variance      {res} 1.57e+11
{txt}95%    {res} 17758.21        1790269       {txt}Skewness      {res} 202.1632
{txt}99%    {res} 88724.46       8.12e+07       {txt}Kurtosis      {res} 41456.83
{txt}
{com}.         global medcpc=r(p$tpi_bottom);
{txt}
{com}.         gen bottom_tpi=cpc<=$medcpc;
{txt}
{com}.         keep hhid bottom_tpi;
{txt}
{com}.         sort hhid;
{txt}
{com}.         tempfile bottom_tpi;
{txt}
{com}. save `bottom_tpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000008.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000008.tmp saved

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 2}bottom_tpi {c |}{res}      6775    .4529889    .4978218          0          1
{txt}
{com}. use `acredd' ;
{txt}
{com}.         merge hhid using `bottom_tpi';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     34,551      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,551      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         keep if bottom_tpi;
{txt}(20939 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     13612    2.77e+09    9.56e+08   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     13473    123.4582    15.75092        103        153
{txt}{space 2}valued_tot {c |}{res}     13473    513.2872    612.4287   7.142857       9000
{txt}quantityd_~t {c |}{res}     13473     1.48159     4.67223   .0051429        362
{txt}{space 6}strata {c |}{res}     13612    6.282765    2.360666          1         10
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}     13612    5.921393    2.485605          1         19
{txt}{space 4}hhweight {c |}{res}     13612    5240.411    4192.181        100      60164
{txt}{space 4}survquar {c |}{res}     13612    2.550103    1.163222          1          4
{txt}{space 5}survmon {c |}{res}     13612    6.841316      3.4422          1         12
{txt}{space 7}rural {c |}{res}     13612    .9381428    .2409048          0          1
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}     13612    2.668969    .9527972          1          4
{txt}{space 4}spdomain {c |}{res}     13612    3.548266    1.190332          1          5
{txt}{space 5}reg_tpi {c |}{res}     13612    2.668969    .9527972          1          4
{txt}{space 2}bottom_tpi {c |}{res}     13612           1           0          1          1
{txt}
{com}. * Drop one HH with extremely high quantity and low value in IAF 2002/03 (t=t1) ;
. *        drop if hhid==263001;
.         preserve;
{txt}
{com}.                 collapse (sum) valued_tot quantityd_tot [aw=hhweight] , 
>                                 by(reg_tpi news product survmon);
{txt}
{com}.                         drop if product==.;
{txt}(30 observations deleted)

{com}.                         gen ppkg=valued_tot/quantityd_tot;
{txt}
{com}.                         lab var ppkg "Unit value per kg";
{txt}
{com}.                         sort reg_tpi product ;
{txt}
{com}.                         compress;
{txt}
{com}.                         tempfile uvm;
{txt}
{com}.                 save `uvm', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000a.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000a.tmp saved

{com}.                 save "$path/work/tpi_unit_val_monthly.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_monthly.dta saved

{com}.         restore;
{txt}
{com}.         preserve;
{txt}
{com}.                 collapse (sum) valued_tot quantityd_tot [aw=hhweight] , 
>                                 by(reg_tpi news product survquar);
{txt}
{com}.                         drop if product==.;
{txt}(16 observations deleted)

{com}.                         gen ppkg=valued_tot/quantityd_tot;
{txt}
{com}.                         sort reg_tpi product survquar;
{txt}
{com}.                         list in  1/3;
{txt}
     {c TLC}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product      survquar   news   reg_tpi   valued~t   quanti~t       ppkg {txt}{c |}
     {c LT}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    103    May-Jul 09      1   central   22568.77   73.73573   306.0764 {txt}{c |}
  2. {c |} {res}    103   Sept-Oct 09      1   central   14153.36   46.40452   304.9995 {txt}{c |}
  3. {c |} {res}    103   Nov09-Jan10      1   central   6368.062   18.81594   338.4398 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.                         list in -3/-1;
{txt}
     {c TLC}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product      survquar   news   reg_tpi   valued~t   quanti~t       ppkg {txt}{c |}
     {c LT}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
237. {c |} {res}    153   Sept-Oct 09      4   western   5314.159   5.482946    969.216 {txt}{c |}
238. {c |} {res}    153   Nov09-Jan10      4   western   7463.587   5.877618   1269.832 {txt}{c |}
239. {c |} {res}    153    Feb-Apr 10      4   western   4601.457    3.04152   1512.881 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 13}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.                         tempfile uvq;
{txt}
{com}.                 save "$path/work/tpi_unit_val_quarterly.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_quarterly.dta saved

{com}.                 save `uvq', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved

{com}.         restore;
{txt}
{com}.         **************************************************************************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * each reg_tpi & product combination. This should eliminate outliers that
> * may have an undue influence on the price calculation. Then use sample
> * weighting PLUS quantity weighting on those HH-level observations.
> **************************************************************************;
.         preserve;
{txt}
{com}.                 gen hhppkg=valued_tot/quantityd_tot;
{txt}(139 missing values generated)

{com}.                 egen lower5=pctile(hhppkg), p(5) by(reg_tpi product);
{txt}(139 missing values generated)

{com}.                 egen upper5=pctile(hhppkg), p(95) by(reg_tpi product);
{txt}(139 missing values generated)

{com}.                 keep if hhppkg>=lower5 & hhppkg<=upper5;
{txt}(889 observations deleted)

{com}.                                 gen hhqtywt=hhweight*quantityd_tot;
{txt}(139 missing values generated)

{com}.                                 collapse (sum) valued_tot quantityd_tot [aw=hhqtywt] , 
>                                 by(reg_tpi news product survquar);
{txt}
{com}.                         drop if product==.;
{txt}(0 observations deleted)

{com}.                         gen ppkg_trim=valued_tot/quantityd_tot;
{txt}
{com}.                         lab var ppkg_trim "90% trimmed unit value per kg";
{txt}
{com}.                         sort reg_tpi product survquar;
{txt}
{com}.                         list , nol;
{txt}
     {c TLC}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product   survquar   news   reg_tpi   valued~t   quanti~t   ppkg_t~m {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    103          1      1         1   28319.06   96.17417    294.456 {txt}{c |}
  2. {c |} {res}    103          2      1         1   18820.04    63.6893   295.4977 {txt}{c |}
  3. {c |} {res}    103          3      1         1   9132.665   27.16821   336.1527 {txt}{c |}
  4. {c |} {res}    103          4      1         1   27228.33    88.0705   309.1652 {txt}{c |}
  5. {c |} {res}    104          1      1         1   42474.56   71.73248   592.1246 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  6. {c |} {res}    104          2      1         1   17802.97   23.25988   765.3936 {txt}{c |}
  7. {c |} {res}    104          3      1         1   31911.45   52.31848   609.9461 {txt}{c |}
  8. {c |} {res}    104          4      1         1   9015.529   25.42311   354.6194 {txt}{c |}
  9. {c |} {res}    105          1      1         1   91509.81   395.6744   231.2755 {txt}{c |}
 10. {c |} {res}    105          2      1         1   57368.14   241.7264   237.3268 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}    105          3      1         1   145358.1   1071.283    135.686 {txt}{c |}
 12. {c |} {res}    105          4      1         1   114331.1   759.7541   150.4843 {txt}{c |}
 13. {c |} {res}    107          1      1         1   85844.55   873.0867   98.32306 {txt}{c |}
 14. {c |} {res}    107          2      1         1   32172.96   369.5086   87.06957 {txt}{c |}
 15. {c |} {res}    107          3      1         1   23106.83   195.9678   117.9113 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 16. {c |} {res}    107          4      1         1    30158.9   322.1287   93.62376 {txt}{c |}
 17. {c |} {res}    108          1      1         1    35842.4   134.7221   266.0469 {txt}{c |}
 18. {c |} {res}    108          2      1         1   14800.12   15.20498   973.3733 {txt}{c |}
 19. {c |} {res}    108          3      1         1   22291.46   24.94331   893.6847 {txt}{c |}
 20. {c |} {res}    108          4      1         1   5728.396   5.748081   996.5754 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 21. {c |} {res}    113          1      1         1   91826.66    75.2524   1220.249 {txt}{c |}
 22. {c |} {res}    113          2      1         1   124001.4   97.77476   1268.236 {txt}{c |}
 23. {c |} {res}    113          3      1         1   62127.95   50.07518   1240.693 {txt}{c |}
 24. {c |} {res}    113          4      1         1   87345.91   77.05343   1133.576 {txt}{c |}
 25. {c |} {res}    116          1      1         1   114.2857   .2857143        400 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 26. {c |} {res}    116          2      1         1   42.85714   .0357143       1200 {txt}{c |}
 27. {c |} {res}    116          3      1         1   142.8571   .1428571       1000 {txt}{c |}
 28. {c |} {res}    116          4      1         1   1382.168   1.373979    1005.96 {txt}{c |}
 29. {c |} {res}    117          1      1         1   15414.56   3.561197   4328.479 {txt}{c |}
 30. {c |} {res}    117          2      1         1    8197.15    2.04051   4017.206 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 31. {c |} {res}    117          3      1         1   27218.37   6.048779   4499.812 {txt}{c |}
 32. {c |} {res}    117          4      1         1   12511.55   3.448729   3627.873 {txt}{c |}
 33. {c |} {res}    123          1      1         1   5117.439   84.14975   60.81348 {txt}{c |}
 34. {c |} {res}    123          2      1         1   8558.404   44.09394   194.0948 {txt}{c |}
 35. {c |} {res}    123          3      1         1   6036.032   18.57097   325.0252 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 36. {c |} {res}    123          4      1         1   7414.212   53.56753   138.4087 {txt}{c |}
 37. {c |} {res}    125          1      1         1   24705.94   393.7206   62.74994 {txt}{c |}
 38. {c |} {res}    125          2      1         1   11200.71   136.2267   82.22111 {txt}{c |}
 39. {c |} {res}    125          3      1         1   8734.345   121.0963   72.12728 {txt}{c |}
 40. {c |} {res}    125          4      1         1    28546.5   303.3625    94.1003 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 41. {c |} {res}    127          1      1         1    9833.11   9.506735   1034.331 {txt}{c |}
 42. {c |} {res}    127          2      1         1   7060.237   10.01646   704.8632 {txt}{c |}
 43. {c |} {res}    127          3      1         1   9604.674   12.31256    780.071 {txt}{c |}
 44. {c |} {res}    127          4      1         1   7881.445    10.9077   722.5579 {txt}{c |}
 45. {c |} {res}    140          1      1         1   168173.8   312.1417    538.774 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 46. {c |} {res}    140          2      1         1   14004.16   9.738918   1437.959 {txt}{c |}
 47. {c |} {res}    140          3      1         1   13425.82    12.5723    1067.89 {txt}{c |}
 48. {c |} {res}    140          4      1         1        750         .5       1500 {txt}{c |}
 49. {c |} {res}    141          1      1         1    73760.3    50.9324     1448.2 {txt}{c |}
 50. {c |} {res}    141          2      1         1   12806.28    7.15612   1789.557 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 51. {c |} {res}    141          3      1         1   62646.22   41.02652   1526.969 {txt}{c |}
 52. {c |} {res}    141          4      1         1   36183.02   27.68363   1307.019 {txt}{c |}
 53. {c |} {res}    147          1      1         1   54118.57   24.23457   2233.114 {txt}{c |}
 54. {c |} {res}    147          2      1         1    17767.9   7.739445   2295.758 {txt}{c |}
 55. {c |} {res}    147          3      1         1   26837.26   11.40099    2353.94 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 56. {c |} {res}    147          4      1         1   22323.89   9.559492   2335.259 {txt}{c |}
 57. {c |} {res}    153          1      1         1   4290.671   2.800241   1532.251 {txt}{c |}
 58. {c |} {res}    153          2      1         1   4229.531   2.279642   1855.349 {txt}{c |}
 59. {c |} {res}    153          3      1         1   2714.002    2.30214   1178.904 {txt}{c |}
 60. {c |} {res}    153          4      1         1    4017.72   4.906215   818.9043 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 61. {c |} {res}    103          1      2         2   15216.61   42.38829   358.9814 {txt}{c |}
 62. {c |} {res}    103          2      2         2   10384.88   29.72081   349.4143 {txt}{c |}
 63. {c |} {res}    103          3      2         2   2621.611   8.571429   305.8545 {txt}{c |}
 64. {c |} {res}    103          4      2         2   11809.92   38.17354   309.3746 {txt}{c |}
 65. {c |} {res}    104          1      2         2   2169.555   5.613356   386.4987 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 66. {c |} {res}    104          2      2         2   4216.845   5.868171    718.596 {txt}{c |}
 67. {c |} {res}    104          3      2         2   2266.713   3.726532   608.2634 {txt}{c |}
 68. {c |} {res}    104          4      2         2    711.778   1.071429   664.3262 {txt}{c |}
 69. {c |} {res}    105          1      2         2   110893.2   530.7202   208.9486 {txt}{c |}
 70. {c |} {res}    105          2      2         2     227212     834.56   272.2536 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 71. {c |} {res}    105          3      2         2   240318.4   771.1798   311.6244 {txt}{c |}
 72. {c |} {res}    105          4      2         2   170147.4   843.8369   201.6354 {txt}{c |}
 73. {c |} {res}    107          1      2         2   111622.5   1423.144   78.43377 {txt}{c |}
 74. {c |} {res}    107          2      2         2   80616.85   1267.057   63.62529 {txt}{c |}
 75. {c |} {res}    107          3      2         2   83343.61   920.6839   90.52359 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 76. {c |} {res}    107          4      2         2   42145.69   585.6392   71.96529 {txt}{c |}
 77. {c |} {res}    108          1      2         2   223255.7   294.0954   759.1269 {txt}{c |}
 78. {c |} {res}    108          2      2         2   165368.5   210.7026    784.843 {txt}{c |}
 79. {c |} {res}    108          3      2         2   126050.7   153.0366   823.6641 {txt}{c |}
 80. {c |} {res}    108          4      2         2   77268.72   103.1481   749.1049 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 81. {c |} {res}    113          1      2         2   112812.5   107.5083   1049.338 {txt}{c |}
 82. {c |} {res}    113          2      2         2     257837   246.4263   1046.305 {txt}{c |}
 83. {c |} {res}    113          3      2         2   143475.6   134.1408   1069.589 {txt}{c |}
 84. {c |} {res}    113          4      2         2   111106.9   141.3594   785.9888 {txt}{c |}
 85. {c |} {res}    116          1      2         2   67574.73   158.8968   425.2742 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 86. {c |} {res}    116          2      2         2   50211.55    115.254     435.66 {txt}{c |}
 87. {c |} {res}    116          3      2         2    9590.41   14.60383   656.7053 {txt}{c |}
 88. {c |} {res}    116          4      2         2   25656.21   59.25055   433.0121 {txt}{c |}
 89. {c |} {res}    117          1      2         2   22650.82   5.262053   4304.559 {txt}{c |}
 90. {c |} {res}    117          2      2         2    58746.1   14.44641   4066.485 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 91. {c |} {res}    117          3      2         2   39753.66   9.453981   4204.965 {txt}{c |}
 92. {c |} {res}    117          4      2         2   46207.79   11.27829   4097.056 {txt}{c |}
 93. {c |} {res}    123          1      2         2    19677.4   111.2016   176.9525 {txt}{c |}
 94. {c |} {res}    123          2      2         2   23213.51   106.9577   217.0345 {txt}{c |}
 95. {c |} {res}    123          3      2         2   35242.69   115.5208   305.0765 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
 96. {c |} {res}    123          4      2         2   12075.58    39.7925   303.4638 {txt}{c |}
 97. {c |} {res}    125          1      2         2   12538.33   158.3562   79.17799 {txt}{c |}
 98. {c |} {res}    125          2      2         2    30960.9   465.6374   66.49143 {txt}{c |}
 99. {c |} {res}    125          3      2         2   21628.59   306.5145     70.563 {txt}{c |}
100. {c |} {res}    125          4      2         2   24096.16   288.1129   83.63444 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
101. {c |} {res}    127          1      2         2   17128.75   22.78219   751.8484 {txt}{c |}
102. {c |} {res}    127          2      2         2   17629.16    29.5287   597.0177 {txt}{c |}
103. {c |} {res}    127          3      2         2   16981.87   28.49795   595.8978 {txt}{c |}
104. {c |} {res}    127          4      2         2   13846.96   19.14888   723.1213 {txt}{c |}
105. {c |} {res}    140          1      2         2   37986.05   29.46379   1289.245 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
106. {c |} {res}    140          2      2         2   45309.99   40.97656   1105.754 {txt}{c |}
107. {c |} {res}    140          3      2         2   9400.593    7.53642   1247.355 {txt}{c |}
108. {c |} {res}    140          4      2         2   1474.728   .6486086    2273.68 {txt}{c |}
109. {c |} {res}    141          1      2         2   45619.38   29.55759   1543.407 {txt}{c |}
110. {c |} {res}    141          2      2         2   42371.15   28.91936   1465.149 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
111. {c |} {res}    141          3      2         2   24229.99   19.20201   1261.847 {txt}{c |}
112. {c |} {res}    141          4      2         2   43447.75   20.69524   2099.408 {txt}{c |}
113. {c |} {res}    147          1      2         2   59120.19   27.67904   2135.919 {txt}{c |}
114. {c |} {res}    147          2      2         2   47470.97   21.53229   2204.641 {txt}{c |}
115. {c |} {res}    147          3      2         2      38467   16.56121   2322.717 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
116. {c |} {res}    147          4      2         2   68759.17   30.41655   2260.584 {txt}{c |}
117. {c |} {res}    153          1      2         2   19452.29   43.12555   451.0619 {txt}{c |}
118. {c |} {res}    153          2      2         2   24716.01   57.57064   429.3162 {txt}{c |}
119. {c |} {res}    153          3      2         2   15118.67   30.78195   491.1536 {txt}{c |}
120. {c |} {res}    153          4      2         2   20709.89   73.44278   281.9867 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
121. {c |} {res}    103          1      3         3   1387.982   4.285715   323.8625 {txt}{c |}
122. {c |} {res}    103          2      3         3   1714.286   4.285715        400 {txt}{c |}
123. {c |} {res}    103          3      3         3   10114.38   37.68812   268.3706 {txt}{c |}
124. {c |} {res}    104          1      3         3   931.9478   1.071429   869.8179 {txt}{c |}
125. {c |} {res}    104          2      3         3   3589.251   3.157794   1136.632 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
126. {c |} {res}    104          3      3         3   571.4286   .7142857        800 {txt}{c |}
127. {c |} {res}    104          4      3         3   7284.352    16.7008   436.1679 {txt}{c |}
128. {c |} {res}    105          1      3         3   28746.72   59.90147   479.9001 {txt}{c |}
129. {c |} {res}    105          2      3         3   155633.5   411.9799   377.7697 {txt}{c |}
130. {c |} {res}    105          3      3         3   143629.8   355.1062   404.4698 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
131. {c |} {res}    105          4      3         3   177375.9   461.8986   384.0148 {txt}{c |}
132. {c |} {res}    107          1      3         3   147889.6   2164.835   68.31451 {txt}{c |}
133. {c |} {res}    107          2      3         3   73678.71   1128.811   65.27107 {txt}{c |}
134. {c |} {res}    107          3      3         3   41353.67   743.4236   55.62598 {txt}{c |}
135. {c |} {res}    107          4      3         3   200328.1   3359.779   59.62537 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
136. {c |} {res}    108          1      3         3     113069   110.3901   1024.267 {txt}{c |}
137. {c |} {res}    108          2      3         3     100464   232.1916   432.6772 {txt}{c |}
138. {c |} {res}    108          3      3         3   108203.3   140.4258   770.5372 {txt}{c |}
139. {c |} {res}    108          4      3         3   251788.9   366.0768   687.8033 {txt}{c |}
140. {c |} {res}    113          1      3         3   74056.14   55.14548   1342.923 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
141. {c |} {res}    113          2      3         3   119602.9   113.5709   1053.112 {txt}{c |}
142. {c |} {res}    113          3      3         3   50177.28   47.17356   1063.674 {txt}{c |}
143. {c |} {res}    113          4      3         3   153256.8   277.4742   552.3282 {txt}{c |}
144. {c |} {res}    116          1      3         3   122448.6   201.3366   608.1783 {txt}{c |}
145. {c |} {res}    116          2      3         3   42876.34   95.12967   450.7147 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
146. {c |} {res}    116          3      3         3   122266.5   226.4491   539.9292 {txt}{c |}
147. {c |} {res}    116          4      3         3   283037.1   631.8442   447.9539 {txt}{c |}
148. {c |} {res}    117          1      3         3   43657.85   10.51257   4152.919 {txt}{c |}
149. {c |} {res}    117          2      3         3   87249.14   20.52166   4251.563 {txt}{c |}
150. {c |} {res}    117          3      3         3    42356.1   9.925028   4267.605 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
151. {c |} {res}    117          4      3         3   81555.37   20.36307   4005.062 {txt}{c |}
152. {c |} {res}    123          1      3         3   39847.85   172.9701   230.3741 {txt}{c |}
153. {c |} {res}    123          2      3         3   30541.64   40.93434   746.1128 {txt}{c |}
154. {c |} {res}    123          3      3         3   40856.48   82.57945   494.7536 {txt}{c |}
155. {c |} {res}    123          4      3         3   60931.27   99.12797   614.6729 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
156. {c |} {res}    125          1      3         3   27347.45   347.2096   78.76351 {txt}{c |}
157. {c |} {res}    125          2      3         3   43603.09   587.6797   74.19534 {txt}{c |}
158. {c |} {res}    125          3      3         3   11449.98   179.5487    63.7709 {txt}{c |}
159. {c |} {res}    125          4      3         3   43612.75   567.5557   76.84313 {txt}{c |}
160. {c |} {res}    127          1      3         3   41507.15   20.58854   2016.032 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
161. {c |} {res}    127          2      3         3   41261.23    36.2179    1139.25 {txt}{c |}
162. {c |} {res}    127          3      3         3   29846.15   22.77964   1310.211 {txt}{c |}
163. {c |} {res}    127          4      3         3   52372.55   38.43873   1362.494 {txt}{c |}
164. {c |} {res}    140          1      3         3   23070.64   22.02973   1047.251 {txt}{c |}
165. {c |} {res}    140          2      3         3    23208.8   24.12267   962.1154 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
166. {c |} {res}    140          3      3         3   3949.273   7.958361    496.242 {txt}{c |}
167. {c |} {res}    140          4      3         3   1342.447   1.883322    712.808 {txt}{c |}
168. {c |} {res}    141          1      3         3   162506.6   80.52101   2018.189 {txt}{c |}
169. {c |} {res}    141          2      3         3   97560.73   46.33667   2105.476 {txt}{c |}
170. {c |} {res}    141          3      3         3   95006.45    51.9903   1827.388 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
171. {c |} {res}    141          4      3         3   259997.5   109.5022   2374.358 {txt}{c |}
172. {c |} {res}    147          1      3         3   36311.64   16.23056   2237.239 {txt}{c |}
173. {c |} {res}    147          2      3         3   57144.58   25.95222   2201.915 {txt}{c |}
174. {c |} {res}    147          3      3         3   38348.62   15.83702   2421.454 {txt}{c |}
175. {c |} {res}    147          4      3         3   67064.92    27.9402   2400.302 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
176. {c |} {res}    153          1      3         3   24801.75   38.12256   650.5792 {txt}{c |}
177. {c |} {res}    153          2      3         3   30626.28   58.13491   526.8139 {txt}{c |}
178. {c |} {res}    153          3      3         3   52033.58   99.52981   522.7939 {txt}{c |}
179. {c |} {res}    153          4      3         3   58707.19   120.4651   487.3379 {txt}{c |}
180. {c |} {res}    103          1      4         4   44778.51   163.7554   273.4475 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
181. {c |} {res}    103          2      4         4   72394.29   233.4372   310.1232 {txt}{c |}
182. {c |} {res}    103          3      4         4   31806.17   97.61178   325.8436 {txt}{c |}
183. {c |} {res}    103          4      4         4   112989.5    364.812   309.7197 {txt}{c |}
184. {c |} {res}    104          1      4         4   143081.3   185.6128   770.8592 {txt}{c |}
185. {c |} {res}    104          2      4         4     112974   150.3383    751.465 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
186. {c |} {res}    104          3      4         4   30398.32   27.86736   1090.822 {txt}{c |}
187. {c |} {res}    104          4      4         4   46275.97   50.80224   910.9042 {txt}{c |}
188. {c |} {res}    105          1      4         4   96406.96   562.4341   171.4102 {txt}{c |}
189. {c |} {res}    105          2      4         4   83866.33   347.3599   241.4393 {txt}{c |}
190. {c |} {res}    105          3      4         4   107863.9   586.1739   184.0134 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
191. {c |} {res}    105          4      4         4   131065.8    532.648   246.0645 {txt}{c |}
192. {c |} {res}    107          1      4         4   93749.12   1092.712   85.79494 {txt}{c |}
193. {c |} {res}    107          2      4         4   69811.16   822.3728   84.88992 {txt}{c |}
194. {c |} {res}    107          3      4         4   34417.14   494.0651   69.66113 {txt}{c |}
195. {c |} {res}    107          4      4         4   38149.64   296.9164   128.4861 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
196. {c |} {res}    108          1      4         4   86082.59   385.6029   223.2415 {txt}{c |}
197. {c |} {res}    108          2      4         4   42465.75   73.28425   579.4662 {txt}{c |}
198. {c |} {res}    108          3      4         4   32316.56   61.21784   527.8944 {txt}{c |}
199. {c |} {res}    108          4      4         4   10573.29    14.5281   727.7824 {txt}{c |}
200. {c |} {res}    113          1      4         4   96491.34   83.23969   1159.199 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
201. {c |} {res}    113          2      4         4     120858   137.8231   876.9068 {txt}{c |}
202. {c |} {res}    113          3      4         4   173842.9   215.9366   805.0648 {txt}{c |}
203. {c |} {res}    113          4      4         4   58064.97   79.76872   727.9165 {txt}{c |}
204. {c |} {res}    116          1      4         4   1022.575   1.225386   834.4922 {txt}{c |}
205. {c |} {res}    116          2      4         4   3224.496   4.713887   684.0418 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
206. {c |} {res}    116          3      4         4   1939.862   3.350982   578.8937 {txt}{c |}
207. {c |} {res}    116          4      4         4    1677.04   2.376296   705.7369 {txt}{c |}
208. {c |} {res}    117          1      4         4   22788.04   5.596151   4072.092 {txt}{c |}
209. {c |} {res}    117          2      4         4   28219.85   6.708414   4206.635 {txt}{c |}
210. {c |} {res}    117          3      4         4   6515.356   1.589221   4099.716 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
211. {c |} {res}    117          4      4         4   19084.52   4.996784   3819.361 {txt}{c |}
212. {c |} {res}    123          1      4         4   13946.75   19.09676   730.3201 {txt}{c |}
213. {c |} {res}    123          2      4         4      25811   112.3558   229.7255 {txt}{c |}
214. {c |} {res}    123          3      4         4   3401.328   22.35786   152.1312 {txt}{c |}
215. {c |} {res}    123          4      4         4   4187.914   3.498721   1196.984 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
216. {c |} {res}    125          1      4         4    14303.9   179.4714   79.70015 {txt}{c |}
217. {c |} {res}    125          2      4         4    28040.2   299.4866   93.62756 {txt}{c |}
218. {c |} {res}    125          3      4         4    15624.2   224.3097   69.65456 {txt}{c |}
219. {c |} {res}    125          4      4         4   39501.82   386.4713   102.2115 {txt}{c |}
220. {c |} {res}    127          1      4         4   8198.837   7.288663   1124.875 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
221. {c |} {res}    127          2      4         4    5140.67   6.138281   837.4772 {txt}{c |}
222. {c |} {res}    127          3      4         4   8321.004   7.638924    1089.29 {txt}{c |}
223. {c |} {res}    127          4      4         4    11049.9   8.131307   1358.933 {txt}{c |}
224. {c |} {res}    140          1      4         4   92135.84   118.7114   776.1332 {txt}{c |}
225. {c |} {res}    140          2      4         4   17408.64   14.46378   1203.602 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
226. {c |} {res}    140          3      4         4   28858.82   70.10011   411.6801 {txt}{c |}
227. {c |} {res}    140          4      4         4   6416.295   4.845619   1324.143 {txt}{c |}
228. {c |} {res}    141          1      4         4   148954.6   101.4302   1468.544 {txt}{c |}
229. {c |} {res}    141          2      4         4   96470.34   59.77904   1613.782 {txt}{c |}
230. {c |} {res}    141          3      4         4    75222.7   47.38911   1587.341 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
231. {c |} {res}    141          4      4         4   60408.31   32.24249   1873.562 {txt}{c |}
232. {c |} {res}    147          1      4         4   23547.74   10.45022   2253.324 {txt}{c |}
233. {c |} {res}    147          2      4         4   22270.22   9.571515   2326.718 {txt}{c |}
234. {c |} {res}    147          3      4         4   9586.356   4.335199   2211.284 {txt}{c |}
235. {c |} {res}    147          4      4         4   10944.31   4.637684   2359.865 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
236. {c |} {res}    153          1      4         4   17942.73   17.95513   999.3094 {txt}{c |}
237. {c |} {res}    153          2      4         4    8706.94    11.6054    750.249 {txt}{c |}
238. {c |} {res}    153          3      4         4   19314.54   16.82786   1147.771 {txt}{c |}
239. {c |} {res}    153          4      4         4   6548.263   5.328297    1228.96 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 10}{c -}{hline 6}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.                         tempfile uvq2;
{txt}
{com}.                         keep reg_tpi product survquar ppkg_trim;
{txt}
{com}.                 save `uvq2', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000e.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000e.tmp saved

{com}.                                 use `uvq' ;
{txt}
{com}.                         merge reg_tpi product survquar using `uvq2';
{txt}(label REG_TPI already defined)
(label lsurvquar already defined)

{com}.                         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        239      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        239      100.00
{txt}
{com}.                         drop _merge;
{txt}
{com}.                 save `uvq', replace;
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved

{com}.                 save "$path/work/tpi_unit_val_quarterly.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_quarterly.dta saved

{com}.         restore;
{txt}
{com}. **************************************************************************;
. * Now calculate the weights for the temporal price index. The weights
> * will be based on the bottom 50% of the national nominal consumption
> * per capita (see below). We let the weights vary by strata (3 regions X rural/urban).
> *
> * First, make a small file that has the total nominal HH daily consumption,
> * to use as our denominator. We cannot simply use the `bottom_tpi' file that
> * was created earlier because we will need some other variables from
> * the cons_cat.dta file.
> **************************************************************************;
. use "$path\work\conpc.dta", clear;
{txt}
{com}. keep hhid cons_hh_nom;
{txt}
{com}. *use "$path/in/cons_cat.dta", clear ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;
{txt}
{com}.         merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.           tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         collapse (mean) cons_hh_nom hhsize strata hhweight rural news survquar reg_tpi,
>                 by(hhid);
{txt}
{com}.         lab var cons_hh_nom "Nominal daily HH consumption";
{txt}
{com}.         rename hhsize   cc_hhs;
{txt}
{com}.         rename strata   cc_reg;
{txt}
{com}.         rename hhweight cc_hhw;
{txt}
{com}.         rename rural    cc_rur;
{txt}
{com}.         rename news     cc_news;
{txt}
{com}.         rename survquar cc_qua;
{txt}
{com}.         rename reg_tpi  cc_reg_tpi;
{txt}
{com}.         sort hhid;
{txt}
{com}.         tempfile thhcons;
{txt}
{com}. save `thhcons', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000f.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000f.tmp saved

{com}. **************************************************************************;
. * Merge the file with consumption on the food products with HH consumption file,
> * then use "fillin" to take care of cases where a household did not
> * consume all n_tpi commodities. Note that we need to do the merge
> * first because there are some households that are not in `acredd' at
> * all, because they did not consume *any* of the n_tpi items. Then replace
> * missing values in the "filled in" observations with the relevant values 
> * for that household.
> **************************************************************************;
. use `acredd';
{txt}
{com}.         cap drop _merge;
{txt}
{com}.         drop if product==.;
{txt}(315 observations deleted)

{com}.         merge hhid using `thhcons';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}        315        0.91        0.91
{txt}          3 {c |}{res}     34,236       99.09      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     34,551      100.00
{txt}
{com}.         for var valued_tot quantityd_tot : replace X=0 if _merge==2;

{res}->  replace valued_tot=0 if _merge==2
{txt}(315 real changes made)

{res}->  replace quantityd_tot=0 if _merge==2
{txt}(315 real changes made)

{com}.                 /*
>         for var valued_ac quantityd_ac valued_re quantityd_re valued_dd quantityd_dd 
>                 valued_tot quantityd_tot : replace X=0 if _merge==2;
>                                 */
> 
>         replace hhsize  =cc_hhs     if _merge==2;
{txt}(315 real changes made)

{com}.         replace strata  =cc_reg     if _merge==2;
{txt}(315 real changes made)

{com}.         replace hhweight=cc_hhw     if _merge==2;
{txt}(315 real changes made)

{com}.         replace rural   =cc_rur     if _merge==2;
{txt}(315 real changes made)

{com}.         replace news    =cc_news        if _merge==2;
{txt}(315 real changes made)

{com}.         replace survquar=cc_qua     if _merge==2;
{txt}(315 real changes made)

{com}.         replace reg_tpi =cc_reg_tpi     if _merge==2;
{txt}(315 real changes made)

{com}.         drop _merge cc_* ;
{txt}
{com}.                 fillin hhid product;
{txt}
{com}.         replace valued_tot=0 if _fillin;
{txt}(73849 real changes made)

{com}.                 for var quantityd_tot 
>                 strata rural hhweight hhsize survquar survmon news reg_tpi cons_hh_nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;

{res}->  egen tmp=mean(quantityd_tot), by(hhid)

->  replace quantityd_tot=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(strata), by(hhid)

->  replace strata=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(rural), by(hhid)

->  replace rural=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(hhweight), by(hhid)

->  replace hhweight=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(hhsize), by(hhid)

->  replace hhsize=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(survquar), by(hhid)

->  replace survquar=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(survmon), by(hhid)
{txt}(5040 missing values generated)

{res}->  replace survmon=tmp if _fillin
{txt}(69124 real changes made)

{res}->  drop tmp

->  egen tmp=mean(news), by(hhid)

->  replace news=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(reg_tpi), by(hhid)

->  replace reg_tpi=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp

->  egen tmp=mean(cons_hh_nom), by(hhid)

->  replace cons_hh_nom=tmp if _fillin
{txt}(73849 real changes made)

{res}->  drop tmp
{txt}
{com}.                                 /*
>         for var valued_ac quantityd_ac valued_re quantityd_re valued_dd quantityd_dd 
>                 quantityd_tot 
>                 strata rural hhweight hhsize survquar survmon news reg_tpi cons_hh_nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;
>                                 */
> 
> **************************************************************************;
. * Now calculate the shares, and then the mean shares in each strata, 
> * using hhweight*hhsize weighting. 
> * Note that we are not doing quantity weighting now for the shares.
> **************************************************************************;
.         gen share = valued_tot/cons_hh_nom ;
{txt}
{com}.         gen popwt = hhsize*hhweight;
{txt}
{com}.         lab var share "HH share in total consumption";
{txt}
{com}.         lab var popwt "Population weight: hhsize*hhweight";
{txt}
{com}. **************************************************************************;
. * Select the bottom 50% (weighted) of the distribution of nominal per 
> * capita consumption.
> **************************************************************************;
.         gen cpc=cons_hh_nom/hhsize;
{txt}
{com}.         sum cpc [aw=hhweight] , detail;

                             {txt}cpc
{hline 61}
      Percentiles      Smallest
 1%    {res} 341.2898       78.55931
{txt} 5%    {res} 695.3857       78.55932
{txt}10%    {res} 897.8539       78.55932       {txt}Obs         {res}     108400
{txt}25%    {res} 1376.486       78.55932       {txt}Sum of Wgt. {res}  491413216

{txt}50%    {res} 2259.297                      {txt}Mean          {res} 10464.25
                        {txt}Largest       Std. Dev.     {res} 451462.1
{txt}75%    {res} 4217.707       8.12e+07
{txt}90%    {res} 9842.668       8.12e+07       {txt}Variance      {res} 2.04e+11
{txt}95%    {res} 19766.71       8.12e+07       {txt}Skewness      {res} 177.7597
{txt}99%    {res} 111655.2       8.12e+07       {txt}Kurtosis      {res} 31946.76
{txt}
{com}.         global medcpc=r(p$tpi_bottom);
{txt}
{com}. * MAH ;
.  sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}    108400    2.51e+09    1.13e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}    101625    121.9333    16.00619        103        153
{txt}{space 2}valued_tot {c |}{res}    108400    182.6271    481.8536          0      12000
{txt}quantityd_~t {c |}{res}    108400      1.4749     3.25775          0   364.2857
{txt}{space 6}strata {c |}{res}    108400    5.551734    2.873473          1         10
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}    108400        4.96    2.758379          1         24
{txt}{space 4}hhweight {c |}{res}    108400    4533.332    4303.944         54      92511
{txt}{space 4}survquar {c |}{res}    108400    2.499336    1.143945          1          4
{txt}{space 5}survmon {c |}{res}    103360    6.719814    3.353746          1         12
{txt}{space 7}rural {c |}{res}    108400    .8199262    .3842507          0          1
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}    108400    2.416827    1.118312          1          4
{txt}{space 4}spdomain {c |}{res}     34236    3.202126    1.379049          1          5
{txt}{space 5}reg_tpi {c |}{res}    108400    2.416827    1.118312          1          4
{txt}{space 1}cons_hh_nom {c |}{res}    108400    97487.28     4938154   232.1918   4.06e+08
{txt}{space 5}_fillin {c |}{res}    108400    .6812638    .4659887          0          1
{txt}{hline 13}{c +}{hline 56}
{space 7}share {c |}{res}    108400    .0152195    .0411734          0   .7534428
{txt}{space 7}popwt {c |}{res}    108400    29614.26    44552.43         62     832599
{txt}{space 9}cpc {c |}{res}    108400    20773.97      987328   78.55931   8.12e+07
{txt}
{com}.  codebook hhid;

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}108400

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}.         keep if cpc<=$medcpc;
{txt}(57072 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     51328    2.81e+09    9.50e+08   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     48120    121.9333    16.00628        103        153
{txt}{space 2}valued_tot {c |}{res}     51328    144.5371    402.5764          0       9000
{txt}quantityd_~t {c |}{res}     51328    1.488656     3.31426          0        362
{txt}{space 6}strata {c |}{res}     51328    6.332606    2.333378          1         10
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}     51328    5.628741    2.566767          1         24
{txt}{space 4}hhweight {c |}{res}     51328    4789.738    4259.487        100      60164
{txt}{space 4}survquar {c |}{res}     51328    2.546135    1.163029          1          4
{txt}{space 5}survmon {c |}{res}     49024    6.838773     3.45944          1         12
{txt}{space 7}rural {c |}{res}     51328    .9466958    .2246417          0          1
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}     51328    2.703865    .9463027          1          4
{txt}{space 4}spdomain {c |}{res}     14268    3.522638    1.217835          1          5
{txt}{space 5}reg_tpi {c |}{res}     51328    2.703865    .9463027          1          4
{txt}{space 1}cons_hh_nom {c |}{res}     51328    7198.385    4750.943   232.1918   53180.82
{txt}{space 5}_fillin {c |}{res}     51328    .7192176    .4493858          0          1
{txt}{hline 13}{c +}{hline 56}
{space 7}share {c |}{res}     51328    .0198654    .0515374          0   .7534428
{txt}{space 7}popwt {c |}{res}     51328    33070.38    43851.13        100     782132
{txt}{space 9}cpc {c |}{res}     51328    1292.952    550.5071   78.55931   2259.297
{txt}
{com}.                 collapse (mean) share (median) medshare=share [aw=popwt] , 
>                         by(reg_tpi product);
{txt}
{com}.                 egen sumsh=sum(share) , by(reg_tpi);
{txt}
{com}.                 replace share=share/sumsh;
{txt}(60 real changes made)

{com}.                 drop sumsh;
{txt}
{com}.                 egen sumsh=sum(medshare) , by(reg_tpi);
{txt}
{com}.                 replace medshare=medshare/sumsh;
{txt}(15 real changes made)

{com}.                 drop sumsh;
{txt}
{com}.                 lab var share "Reg 6: Mean HH share of total consumption";
{txt}
{com}.                 lab var medshare "Reg 6: Median HH share of total consumption";
{txt}
{com}.                 sort reg_tpi product;
{txt}
{com}.                 save "$path/work/tpi_reg_tpi_share.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_reg_tpi_share.dta saved

{com}.                 tempfile tempwt6;
{txt}
{com}.                 save `tempwt6', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000g.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000g.tmp saved

{com}. use `uvq', clear;
{txt}
{com}.         sort reg_tpi product;
{txt}
{com}. save , replace;
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved

{com}. use `tempwt6';
{txt}
{com}.         merge reg_tpi product using `uvq';
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
product
do not uniquely identify observations in
C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp
{p_end}
(label REG_TPI already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          4        1.65        1.65
{txt}          3 {c |}{res}        239       98.35      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        243      100.00
{txt}
{com}.         gen tpi1     =ppkg     *share;
{txt}(4 missing values generated)

{com}.         gen tpi1_trim=ppkg_trim*share;
{txt}(4 missing values generated)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}       239    122.0126     16.0261        103        153
{txt}{space 5}reg_tpi {c |}{res}       243    2.497942    1.122182          1          4
{txt}{space 7}share {c |}{res}       243    .0658325     .056306          0   .2426034
{txt}{space 4}medshare {c |}{res}       243    .0658436    .1519141          0   .7792769
{txt}{space 4}survquar {c |}{res}       239    2.493724    1.118486          1          4
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}       239    2.497908    1.122252          1          4
{txt}{space 2}valued_tot {c |}{res}       239    32500.26    34021.66   42.85714   199196.3
{txt}quantityd_~t {c |}{res}       239    94.10801     188.606   .0357143   1910.384
{txt}{space 8}ppkg {c |}{res}       239    1094.785    1044.717   59.80142    4510.64
{txt}{space 3}ppkg_trim {c |}{res}       239    1020.765    1045.403   55.62598   4499.812
{txt}{hline 13}{c +}{hline 56}
{space 6}_merge {c |}{res}       243    2.967078    .2550047          1          3
{txt}{space 8}tpi1 {c |}{res}       239     65.7482    73.82272   .4798732   326.7566
{txt}{space 3}tpi1_trim {c |}{res}       239    63.03959    74.10655   .4798732   353.8831
{txt}
{com}. keep if survquar!=.;
{txt}(4 observations deleted)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}product {c |}{res}       239    122.0126     16.0261        103        153
{txt}{space 5}reg_tpi {c |}{res}       239    2.497908    1.122252          1          4
{txt}{space 7}share {c |}{res}       239    .0669343    .0561213   .0011997   .2426034
{txt}{space 4}medshare {c |}{res}       239    .0669456    .1529434          0   .7792769
{txt}{space 4}survquar {c |}{res}       239    2.493724    1.118486          1          4
{txt}{hline 13}{c +}{hline 56}
{space 8}news {c |}{res}       239    2.497908    1.122252          1          4
{txt}{space 2}valued_tot {c |}{res}       239    32500.26    34021.66   42.85714   199196.3
{txt}quantityd_~t {c |}{res}       239    94.10801     188.606   .0357143   1910.384
{txt}{space 8}ppkg {c |}{res}       239    1094.785    1044.717   59.80142    4510.64
{txt}{space 3}ppkg_trim {c |}{res}       239    1020.765    1045.403   55.62598   4499.812
{txt}{hline 13}{c +}{hline 56}
{space 6}_merge {c |}{res}       239           3           0          3          3
{txt}{space 8}tpi1 {c |}{res}       239     65.7482    73.82272   .4798732   326.7566
{txt}{space 3}tpi1_trim {c |}{res}       239    63.03959    74.10655   .4798732   353.8831
{txt}
{com}. list in  1/3;

     {txt}{c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 12}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
  1. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}   survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    103 {txt}{c |} {res}central {txt}{c |} {res}.0639916 {txt}{c |} {res}       0 {txt}{c |} {res}May-Jul 09 {txt}{c |} {res}   1 {txt}{c |} {res}22568.77 {txt}{c |} {res}73.73573 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res}306.0764    {txt}{c |}    {res} 294.456    {txt}{c |}    {res}     3    {txt}{c |}    {res}19.58633    {txt}{c |}    {res}18.84271     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

     {c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 12}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
  2. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}   survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    104 {txt}{c |} {res}central {txt}{c |} {res}.0671342 {txt}{c |} {res}       0 {txt}{c |} {res}May-Jul 09 {txt}{c |} {res}   1 {txt}{c |} {res}31972.39 {txt}{c |} {res}51.59874 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res} 619.635    {txt}{c |}    {res}592.1246    {txt}{c |}    {res}     3    {txt}{c |}    {res}41.59869    {txt}{c |}    {res} 39.7518     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

     {c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 10}{c TT}{hline 12}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
  3. {c |} product {c |} reg_tpi {c |}    share {c |} medshare {c |}   survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    105 {txt}{c |} {res}central {txt}{c |} {res}.2093356 {txt}{c |} {res}.3397116 {txt}{c |} {res}May-Jul 09 {txt}{c |} {res}   1 {txt}{c |} {res}51399.64 {txt}{c |} {res}228.2883 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 10}{c BT}{hline 2}{c TT}{hline 7}{c BT}{hline 6}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res}225.1523    {txt}{c |}    {res}231.2755    {txt}{c |}    {res}     3    {txt}{c |}    {res}47.13239    {txt}{c |}    {res} 48.4142     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

{com}. list in -3/-1;

     {txt}{c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 13}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
237. {c |} product {c |} reg_tpi {c |}   share {c |} medshare {c |}    survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    153 {txt}{c |} {res}western {txt}{c |} {res}.012343 {txt}{c |} {res}       0 {txt}{c |} {res}Sept-Oct 09 {txt}{c |} {res}   4 {txt}{c |} {res}5314.159 {txt}{c |} {res}5.482946 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 9}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 7}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res} 969.216    {txt}{c |}    {res} 750.249    {txt}{c |}    {res}     3    {txt}{c |}    {res}11.96306    {txt}{c |}    {res}9.260348     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

     {c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 13}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
238. {c |} product {c |} reg_tpi {c |}   share {c |} medshare {c |}    survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    153 {txt}{c |} {res}western {txt}{c |} {res}.012343 {txt}{c |} {res}       0 {txt}{c |} {res}Nov09-Jan10 {txt}{c |} {res}   4 {txt}{c |} {res}7463.587 {txt}{c |} {res}5.877618 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 9}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 7}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res}1269.832    {txt}{c |}    {res}1147.771    {txt}{c |}    {res}     3    {txt}{c |}    {res}15.67358    {txt}{c |}    {res}14.16698     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

     {c TLC}{hline 9}{c TT}{hline 9}{c TT}{hline 9}{c TT}{hline 10}{c TT}{hline 13}{c TT}{hline 6}{c TT}{hline 10}{c TT}{hline 10}{c TRC}
239. {c |} product {c |} reg_tpi {c |}   share {c |} medshare {c |}    survquar {c |} news {c |} valued~t {c |} quanti~t {c |}
     {c |} {res}    153 {txt}{c |} {res}western {txt}{c |} {res}.012343 {txt}{c |} {res}       0 {txt}{c |} {res} Feb-Apr 10 {txt}{c |} {res}   4 {txt}{c |} {res}4601.457 {txt}{c |} {res} 3.04152 {txt}{c |}
     {c LT}{hline 9}{c BT}{hline 6}{c TT}{hline 2}{c BT}{hline 9}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 7}{c TT}{hline 5}{c BT}{hline 6}{c BT}{hline 3}{c TT}{hline 6}{c BT}{hline 10}{c RT}
     {c |}        ppkg    {c |}    ppkg_t~m    {c |}    _merge    {c |}        tpi1    {c |}    tpi1_t~m     {c |}
     {c |}    {res}1512.881    {txt}{c |}    {res} 1228.96    {txt}{c |}    {res}     3    {txt}{c |}    {res}18.67354    {txt}{c |}    {res}15.16909     {txt}{c |}
     {c BLC}{hline 16}{c BT}{hline 16}{c BT}{hline 14}{c BT}{hline 16}{c BT}{hline 17}{c BRC}

{com}.         **************************************************************************;
. * Find TPI level and indexes for non-trimmed and trimmed prices
> **************************************************************************;
. * Not trimmed ;
.         collapse (sum) tpi1 tpi1_trim  , by(reg_tpi survquar);
{txt}
{com}.                 for num 1/$n_tpi :
>                         sum tpi1 if reg_tpi==X & survquar==2 , meanonly \
>                         sum tpi1 if reg_tpi==X & survquar==4 , meanonly \
>                         global baseX=r(mean);

{res}->  sum tpi1 if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1 if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)

->  sum tpi1 if reg_tpi==3 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==3 & survquar==4 , meanonly

->  global base3=r(mean)

->  sum tpi1 if reg_tpi==4 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==4 & survquar==4 , meanonly

->  global base4=r(mean)
{txt}
{com}.                 lab var tpi1 "Temporal price index before normalization";
{txt}
{com}.                                 foreach v of numlist 1/$n_tpi {c -(} ;
{txt}  2{com}.                                         if `v'==1 {c -(} ;
{txt}  3{com}.                                                 gen tpi=tpi1/${c -(}base`v'{c )-} if reg_tpi==`v' ;
{txt}  4{com}.                                         {c )-} ;
{txt}  5{com}.                                         if `v'>1 {c -(} ;
{txt}  6{com}.                                                 replace tpi=tpi1/${c -(}base`v'{c )-} if reg_tpi==`v' ;
{txt}  7{com}.                                         {c )-} ;
{txt}  8{com}.                                 {c )-} ;
{txt}(12 missing values generated)
(4 real changes made)
(4 real changes made)
(4 real changes made)

{com}.                                                                                                 *gen     tpi=tpi1/$base1 if reg_tpi==1;
.                 *replace tpi=tpi1/$base2 if reg_tpi==2;
.                 *replace tpi=tpi1/$base3 if reg_tpi==3;
.                 *replace tpi=tpi1/$base4 if reg_tpi==4;
.                 *replace tpi=tpi1/$base5 if reg_tpi==5;
.                 *replace tpi=tpi1/$base6 if reg_tpi==6;
.                                                                                 lab var tpi "Temporal price index (Q4=1)";
{txt}
{com}. * Trimmed ;
.                 for num 1/$n_tpi :
>                         sum tpi1_trim if reg_tpi==X & survquar==2 , meanonly \
>                         sum tpi1_trim if reg_tpi==X & survquar==4 , meanonly \
>                         global baseX=r(mean);

{res}->  sum tpi1_trim if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1_trim if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)

->  sum tpi1_trim if reg_tpi==3 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==3 & survquar==4 , meanonly

->  global base3=r(mean)

->  sum tpi1_trim if reg_tpi==4 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==4 & survquar==4 , meanonly

->  global base4=r(mean)
{txt}
{com}.                 lab var tpi1_trim "Six regions: TRIMMED Temporal price index before normalization";
{txt}
{com}.                                 foreach v of numlist 1/$n_tpi {c -(} ;
{txt}  2{com}.                                         if `v'==1 {c -(} ;
{txt}  3{com}.                                                 gen tpi_trim=tpi1_trim/${c -(}base`v'{c )-} if reg_tpi==`v' ;
{txt}  4{com}.                                         {c )-} ;
{txt}  5{com}.                                         if `v'>1 {c -(} ;
{txt}  6{com}.                                                 replace tpi_trim=tpi1_trim/${c -(}base`v'{c )-} if reg_tpi==`v' ;
{txt}  7{com}.                                         {c )-} ;
{txt}  8{com}.                                 {c )-} ;
{txt}(12 missing values generated)
(4 real changes made)
(4 real changes made)
(4 real changes made)

{com}.                                                 lab var tpi_trim "TRIMMED Temporal price index (Q4=1)";
{txt}
{com}.                 sort reg_tpi survquar;
{txt}
{com}.             drop if reg_tpi<1 | reg_tpi>$n_tpi;
{txt}(0 observations deleted)

{com}. gen tpi_diff = tpi - tpi_trim;
{txt}
{com}. lab var tpi_diff "TPI difference btw trimmed/untrimmed";
{txt}
{com}. twoway (connected tpi_trim survquar),yline(1) by(, title("TPI: Trimmed"))
> by(reg_tpi) sav("$path/work/reg_tpi-tpi_trim", replace);
{res}{txt}(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/reg_tpi-tpi_trim.gph saved)

{com}. graph export "$path/work/reg_tpi-tpi_trim.tif", replace;
{txt}(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/reg_tpi-tpi_trim.tif written in TIFF format)

{com}. list reg_tpi survquar tpi tpi_trim tpi_diff;
{txt}
     {c TLC}{hline 10}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c TRC}
     {c |} {res} reg_tpi      survquar        tpi   tpi_trim    tpi_diff {txt}{c |}
     {c LT}{hline 10}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c RT}
  1. {c |} {res} central    May-Jul 09    .989413   1.031987   -.0425741 {txt}{c |}
  2. {c |} {res} central   Sept-Oct 09   1.144807   1.158773   -.0139661 {txt}{c |}
  3. {c |} {res} central   Nov09-Jan10   1.095241   1.098785   -.0035439 {txt}{c |}
  4. {c |} {res} central    Feb-Apr 10          1          1           0 {txt}{c |}
  5. {c |} {res} eastern    May-Jul 09   1.028587   .9939144    .0346727 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c RT}
  6. {c |} {res} eastern   Sept-Oct 09   1.056235   .9891661    .0670691 {txt}{c |}
  7. {c |} {res} eastern   Nov09-Jan10   1.071347   1.034392    .0369555 {txt}{c |}
  8. {c |} {res} eastern    Feb-Apr 10          1          1           0 {txt}{c |}
  9. {c |} {res}northern    May-Jul 09   1.130185   1.119139    .0110453 {txt}{c |}
 10. {c |} {res}northern   Sept-Oct 09   1.037306   .9677771    .0695288 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c RT}
 11. {c |} {res}northern   Nov09-Jan10   1.032251   .9921228    .0401278 {txt}{c |}
 12. {c |} {res}northern    Feb-Apr 10          1          1           0 {txt}{c |}
 13. {c |} {res} western    May-Jul 09   .7887307   .8666803   -.0779496 {txt}{c |}
 14. {c |} {res} western   Sept-Oct 09   .9702555   .9174521    .0528034 {txt}{c |}
 15. {c |} {res} western   Nov09-Jan10   .8940035   .8827032    .0113003 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c RT}
 16. {c |} {res} western    Feb-Apr 10          1          1           0 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 11}{c BRC}

{com}.                 sort reg_tpi survquar;
{txt}
{com}. keep reg_tpi survquar tpi_trim;
{txt}
{com}. save "$path/work/temp_index_reg_tpi.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/temp_index_reg_tpi.dta saved

{com}.                        **************************************************************************
> * 090_temp_index.do     (end)
> **************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/100_food_basket_flex.do"  /* Flexible food basket */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/100_food_basket_flex.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/100_food_basket_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:58:08
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 100_food_basket_flex.do     (start)
> *
> * This file is to get the data from the cons_cod.dta in work and then 
> * to create the do file with the 90% of the consumption expenditures 
> * using a flexible basket of goods.
> *
> * NOTE: we actually keep goods representing 95% of expenditure
> * in order to facilitate dropping of some goods (such as rats) where
> * quantity and nutrition information is unknown.
> *
> * We base our basket on the bottom 60 percent of consumption per capita
> * (weighted by hhweight*hhsize). We use the TEMPORALLY-ADJUSTED
> * NOMINAL consumption because we don't have a spatial adjustment yet.
> *
> * (Then we iterate this process to arrive at a final food bundle in later code)
> **************************************************************************;
. *CA modified to bring in hhdata into bootstrap;
. /*
> This file uses:
>                 work\cons_cod.dta
>                 work\hhdata.dta
>                 work\products.dta
>                 work/consump_nom.dta
>                 work/temp_index_reg_tpi.dta
>                 work/food_cat.dta
> 
> This file creates:
>                 work\food_basket_flex.dta
>                 work\codes_food_basket_flex.dta
> */
> 
> 
> 
> *do "$path/new/010_initial.do";
. **************************************************************************;
. * First, make a small temp file that has the temporally adjusted 
> * nominal consumption per capita, using work/consump_nom and 
> * work/temp_index_reg_tpi.dta. Make a dummy variable indicating
> * whether they are in the bottom 60%.
> **************************************************************************;
. use "$path/work/conpc.dta", clear;
{txt}
{com}. *use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work\hhdata.dta for bootstrap;
.         sort hhid;
{txt}
{com}.         merge hhid using "$path/work\hhdata.dta";
{txt}
{com}.         tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _m;
{txt}
{com}.         keep hhid hhweight hhsize cons_pc_nom reg_tpi rural survquar;
{txt}
{com}.         sort reg_tpi survquar;
{txt}
{com}.         cap drop _merge;
{txt}
{com}.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)
(label REG_TPI already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path/work/conpc.dta";
{txt}
{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.                 gen food_pc_tpi  = food_pc_nom /tpi_trim;
{txt}
{com}.         lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.         lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.         gen one=1;
{txt}
{com}.         tempfile contpi;
{txt}
{com}.         save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}.         collapse (p$bottom) one cons_pc_tpi [aw=hhsize*hhweight] ;
{txt}
{com}.         rename cons_pc_tpi pctile_60;
{txt}
{com}.         tempfile 60pct;
{txt}
{com}.         sort one;
{txt}
{com}.         save `60pct', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved

{com}.                 use `contpi';
{txt}
{com}.                 sort one;
{txt}
{com}.                 merge one using `60pct';
{txt}{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

{com}.                 tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                 drop _merge;
{txt}
{com}.                 drop one;
{txt}
{com}.                         gen bottom_basket=cons_pc_tpi< pctile_60;
{txt}
{com}.                 tab bottom_basket [aw=hhsize*hhweight];

{txt}bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 3,389.1978       50.03       50.03
{txt}          1 {c |}{res} 3,385.8022       49.97      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                 lab var bottom_basket "=1 if in bottom 60% of PCE";
{txt}
{com}.                                 sort hhid;
{txt}
{com}. save `contpi' , replace;
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}. **************************************************************************;
. * Next, need to keep only the food products in order to calculate the 
> * food poverty line, and then calculate the food expenses by code.
> **************************************************************************;
. use "$path/work/cons_cod.dta";
{txt}
{com}. /*
>         sort product;
>         merge product using "$path/work/food_cat.dta";
>         tab _merge;
>         keep if _merge==3;
>         drop _merge;
> */
>         
>         keep if food_cat;
{txt}(0 observations deleted)

{com}.         codebook hhid;

{txt}{hline}
{res}hhid{right:Household Code}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}412045

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}.         sort hhid;
{txt}
{com}. **************************************************************************;
. * Next, merge in the consumption information, and select those in bottom
> * 60% of nominal distribution, after making temporal adjustment. 
> **************************************************************************;
.         merge hhid using `contpi';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}
{com}.         keep if _merge==3;
{txt}(0 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         keep if bottom_basket==1;
{txt}(239580 observations deleted)

{com}.      **************************************************************************;
. * Calculate food shares. Since we're only doing shares here, we can
> * work with the expenditures without doing temporal adjustment.
> **************************************************************************;
.           gen  food_expenditure= cod_hh_nom3;
{txt}
{com}.                             *gen  food_expenditure= own_valued + daily_valued + monthly_valued + educ_valued;
.           egen tot_food_expen= sum (food_expen), by (hhid) ;
{txt}
{com}.           count if food_expenditure==.;
{res}    0
{txt}
{com}.           count if tot_food_expen==.;
{res}    0
{txt}
{com}.                     gen food_share= food_expenditure/tot_food_expen;
{txt}(925 missing values generated)

{com}.           count if food_share==.;
{res}  925
{txt}
{com}.           drop if food_share==.;
{txt}(925 observations deleted)

{com}.           sort hhid product;
{txt}
{com}.                         tempfile food_basket_flex;
{txt}
{com}. save `food_basket_flex', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

{com}. ********************************************************************************;
. * Now prepare to get the variable spdomain to the using dataset, and then find the 
> * total shares by each product in order to select the most important goods in the 
> * basket.
> ********************************************************************************;
.                 preserve;
{txt}
{com}.                 use "$path/work/hhdata.dta", clear;
{txt}
{com}.                         keep hhid spdomain;
{txt}
{com}.                         sort hhid;
{txt}
{com}.                         tempfile spdomain;
{txt}
{com}.                 save `spdomain' , replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp saved

{com}.                 restore;
{txt}
{com}.                            collapse (mean) hhweight, by (hhid);
{txt}
{com}.            sort hhid ;
{txt}
{com}.             merge hhid using `spdomain';
{txt}
{com}.            tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}      3,740       55.20       55.20
{txt}          3 {c |}{res}      3,035       44.80      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.            drop if _m==2;
{txt}(3740 observations deleted)

{com}.            drop _merge;
{txt}
{com}.             collapse (sum) hhweight , by(spdomain);
{txt}
{com}.            rename hhweight tothhweight;
{txt}
{com}.            tempfile tothhweight;
{txt}
{com}. save `tothhweight';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp saved

{com}. use `food_basket_flex';
{txt}
{com}.           sort hhid;
{txt}
{com}.           merge hhid using `spdomain';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.           tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}      3,740        2.13        2.13
{txt}          3 {c |}{res}    171,540       97.87      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    175,280      100.00
{txt}
{com}.           sort _m;
{txt}
{com}.           drop if _m==2;
{txt}(3740 observations deleted)

{com}.           drop _m;
{txt}
{com}.           sort spdomain;
{txt}
{com}.             merge spdomain using `tothhweight';
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

{com}.           tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    171,540      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    171,540      100.00
{txt}
{com}.           drop _merge;
{txt}
{com}.             sort spdomain product;
{txt}
{com}.             gen f_share_w=(food_share*hhweight)/tothhweight;
{txt}
{com}.                                                 *drop descript;
.                         *gen descript = 0;
.             collapse (sum) f_share_w, by(spdomain product descript);
{txt}
{com}.                      sort spdomain f_share_w;
{txt}
{com}.           by spdomain: gen cumshr= sum(f_share_w);
{txt}
{com}.                     count if cumshr<=.075;
{res}  152
{txt}
{com}.           drop if cumshr<=.075;
{txt}(152 observations deleted)

{com}.             lab var f_share_w "average food share for the 13 regions";
{txt}
{com}. save "$path\work\food_basket_flex.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\food_basket_flex.dta saved

{com}. * List first spatial region to get an idea about contents;
. list product spdomain f_share_w cumshr if spdomain==1;
{txt}
     {c TLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}product        spdomain   f_shar~w     cumshr {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    121   Central rural   .0064068   .0767725 {txt}{c |}
  2. {c |} {res}    161   Central rural   .0066762   .0834487 {txt}{c |}
  3. {c |} {res}    118   Central rural   .0073465   .0907952 {txt}{c |}
  4. {c |} {res}    153   Central rural   .0075225   .0983177 {txt}{c |}
  5. {c |} {res}    101   Central rural   .0076074   .1059251 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
  6. {c |} {res}    139   Central rural   .0078916   .1138167 {txt}{c |}
  7. {c |} {res}    110   Central rural   .0080346   .1218513 {txt}{c |}
  8. {c |} {res}    132   Central rural   .0100711   .1319225 {txt}{c |}
  9. {c |} {res}    135   Central rural   .0101237   .1420462 {txt}{c |}
 10. {c |} {res}    102   Central rural   .0104644   .1525106 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}    150   Central rural   .0112384    .163749 {txt}{c |}
 12. {c |} {res}    157   Central rural   .0116523   .1754013 {txt}{c |}
 13. {c |} {res}    122   Central rural    .013191   .1885923 {txt}{c |}
 14. {c |} {res}    134   Central rural   .0159155   .2045079 {txt}{c |}
 15. {c |} {res}    127   Central rural   .0175163   .2220242 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 16. {c |} {res}    123   Central rural   .0189618    .240986 {txt}{c |}
 17. {c |} {res}    144   Central rural   .0194784   .2604644 {txt}{c |}
 18. {c |} {res}    136   Central rural   .0202216   .2806861 {txt}{c |}
 19. {c |} {res}    125   Central rural   .0210586   .3017446 {txt}{c |}
 20. {c |} {res}    108   Central rural   .0225817   .3243264 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 21. {c |} {res}    138   Central rural   .0247066   .3490329 {txt}{c |}
 22. {c |} {res}    117   Central rural    .024848   .3738809 {txt}{c |}
 23. {c |} {res}    140   Central rural   .0260197   .3999006 {txt}{c |}
 24. {c |} {res}    112   Central rural   .0295591   .4294597 {txt}{c |}
 25. {c |} {res}    147   Central rural   .0478787   .4773384 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 26. {c |} {res}    103   Central rural   .0517283   .5290666 {txt}{c |}
 27. {c |} {res}    104   Central rural   .0519577   .5810243 {txt}{c |}
 28. {c |} {res}    141   Central rural    .069258   .6502824 {txt}{c |}
 29. {c |} {res}    107   Central rural   .0755683   .7258507 {txt}{c |}
 30. {c |} {res}    113   Central rural   .1306667   .8565174 {txt}{c |}
     {c LT}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c RT}
 31. {c |} {res}    105   Central rural   .1434826          1 {txt}{c |}
     {c BLC}{hline 9}{c -}{hline 15}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.                     gen numreg=1;
{txt}
{com}.           collapse (sum) numreg cumshr, by (product descript);
{txt}
{com}.                           keep product descript numreg;
{txt}
{com}.           display _N;
{res}46
{txt}
{com}.                     lab var numreg "number of goods in the basket";
{txt}
{com}. /*
>           merge product using "$path\work\products.dta";
>             tab _merge;
>           keep if _merge==3;
> */
>           keep product descript numreg;
{txt}
{com}.             sort product;
{txt}
{com}.                display _N;
{res}46
{txt}
{com}.   save "$path/work\codes_food_basket_flex.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work\codes_food_basket_flex.dta saved

{com}. **************************************************************************
> * 100_food_basket_flex.do     (end)
> **************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/110_price_unit_flex.do"   /* Flexible basket: Prices */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path\rep\110_price_unit_flex.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\rep\110_price_unit_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:58:11
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. ****************************************************************************************
> * 110_price_unit_flex.do                (start)
> *
> * Purpose: This do file creates a price_unit_flex database with the unit prices of the
> * goods of the flexible food basket in order to determine the poverty lines per spatial
> * domain. It uses the files work\daily.dta and work\own.dta file and draw unit prices
> * by: sum of values and quantity
> ****************************************************************************************;
. *CA modified to bring in work\hhdata.dta for bootstrap
> *CA check for price calcs conditional on number of observations;
. /*
> This file uses:
>         work\daily.dta
>         work\own.dta
>         work\hhdata.dta
>         work\consump_nom.dta
>         work\codes_food_basket_flex.dta
>         work\temp_index_reg_tpi.dta
>           new\conversions.do
> 
> This file creates:
>         work\price_unit_flex.dta
>         work\bottom_basket.dta
> */
> 
> 
> 
> 
> *do "$path/new/010_initial.do";
. **************************************************************************************
> * Create sorted data set with daily and own and the matched codes
> **************************************************************************************;
. use "$path/work/cons_cod_trans.dta", clear;
{txt}
{com}. *use "$path/in/cons_cod_trans.dta", clear;
. *save "$path/work/cons_cod_trans.dta", replace;
. *drop if quantityd==0 ;
. keep hhid product food_cat valuez quantityz unit;
{txt}
{com}. rename valuez    value;
{txt}
{com}. rename quantityz quantity;
{txt}
{com}. drop if quantity==0 ;
{txt}(4392 observations deleted)

{com}. *drop count;
.         sort product;
{txt}
{com}.         gen count=1;
{txt}
{com}.                 tempfile dd_acsort;
{txt}
{com}. save `dd_acsort', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}. /*
> use "$path\work\daily.dta";
> tempfile dd_acsort;
>         drop days;
>         sort product;
>         tempfile dd_acsort;
> save `dd_acsort', replace;
> 
> use "$path\work\own.dta";
>         keep hhid product valued quantityd unit;
>         rename valued value;
>         rename quantityd quantity;
> 
>         *CHECK THE ZEROS IN quantity FOR NOW DELETE;
>         drop if quantity==0;
> 
>         append using `dd_acsort';
> 
> *CA modified to merge in work\hhdata.dta for bootstrap;
>         sort hhid;
>       merge hhid using "$path\work\hhdata.dta";
>       tab _m;
> 
> * Drop observations if non existent in HH data set;
> drop if _m!=3;
> drop _m;
> 
> 
>         sort product;
>         gen count=1;
> 
> 
> save `dd_acsort', replace;
> */
> 
> 
> **************************************************************************************;
. * Merge the flexible food basket codes with the daily and own data sets
> * Drop all codes not a part of the flexible food basket
> **************************************************************************************;
.         merge product using "$path\work\codes_food_basket_flex.dta";
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     10,257       12.04       12.04
{txt}          3 {c |}{res}     74,947       87.96      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,204      100.00
{txt}
{com}.         drop if _merge~=3;
{txt}(10257 observations deleted)

{com}.         drop _merge;
{txt}
{com}. **************************************************************************************;
. * Drop observations where product code or quantity or value information is unavailable
> **************************************************************************************;
.                                 codebook hhid;

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6749{col 51}{txt}missing .:  {res}0{txt}/{res}74947

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. *        drop if product==. | value==. | quantity==.  ;
.                                 codebook hhid;

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6749{col 51}{txt}missing .:  {res}0{txt}/{res}74947

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. **************************************************************************************;
. * Convert non-KG quantities (units and liters) to kilograms;
. **************************************************************************************;
. *do "$path\new\110a_conversions.do"
> 
> ********************************************************************
> * There remain a few difficult to interpret observations such as liters
> * of fish and liters of pasta. These are dropped
> ********************************************************************;
. *        drop if unit~=2;
. ********************************************************************
> * Merge in labels for the 13 spatial domains
> ********************************************************************;
.         preserve;
{txt}
{com}.                 use "$path/work/hhdata.dta", clear;
{txt}
{com}.                                                                         keep hhid spdomain reg_tpi survquar;
{txt}
{com}.                         sort hhid;
{txt}
{com}.                         tempfile spdomainreg_tpi;
{txt}
{com}.                 save `spdomainreg_tpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

{com}.                                 codebook hhid;

{txt}{hline}
{res}hhid{right:Household ID}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6775{col 51}{txt}missing .:  {res}0{txt}/{res}6775

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}.         restore;
{txt}
{com}.                 sort hhid;
{txt}
{com}.         merge hhid using `spdomainreg_tpi';
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         26        0.03        0.03
{txt}          3 {c |}{res}     74,947       99.97      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,973      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         drop if product==.;
{txt}(26 observations deleted)

{com}. codebook hhid;

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6749{col 51}{txt}missing .:  {res}0{txt}/{res}74947

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. tab spd;

     {txt}spdomain {c |}      Freq.     Percent        Cum.
{hline 14}{c +}{hline 35}
Central rural {c |}{res}     13,071       17.44       17.44
{txt}Central urban {c |}{res}      9,948       13.27       30.71
{txt}      Eastern {c |}{res}     16,789       22.40       53.11
{txt}     Northern {c |}{res}     19,525       26.05       79.17
{txt}      Western {c |}{res}     15,614       20.83      100.00
{txt}{hline 14}{c +}{hline 35}
        Total {c |}{res}     74,947      100.00
{txt}
{com}. sum if spd>=3;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     51928    3.08e+09    7.88e+08   2.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     51928    129.9682    15.72746        101        161
{txt}{space 8}unit {c |}{res}     51928           1           0          1          1
{txt}{space 4}food_cat {c |}{res}     51928           1           0          1          1
{txt}{space 4}quantity {c |}{res}     51928    .9546697      3.8786   .0000286   364.2857
{txt}{hline 13}{c +}{hline 56}
{space 7}value {c |}{res}     51928    408.2792    636.9622          0      18500
{txt}{space 7}count {c |}{res}     51928           1           0          1          1
{txt}{space 4}descript {c |}{res}     51928           1           0          1          1
{txt}{space 6}numreg {c |}{res}     51928    4.064917    1.391233          1          5
{txt}{space 4}survquar {c |}{res}     51928    2.474811    1.138045          1          4
{txt}{hline 13}{c +}{hline 56}
{space 4}spdomain {c |}{res}     51928    3.977373    .7896193          3          5
{txt}{space 5}reg_tpi {c |}{res}     51928    2.977373    .7896193          2          4
{txt}
{com}. table spdomain, content(mean quantity count quantity count hhid) row missing;

{txt}{hline 14}{c TT}{hline 47}
     spdomain {c |} mean(quantity)     N(quantity)         N(hhid)
{hline 14}{c +}{hline 47}
Central rural {c |}       {res}.9857018          13,071          13,071
{txt}Central urban {c |}       {res}.6279621           9,948           9,948
      {txt}Eastern {c |}       {res}.9517529          16,789          16,789
     {txt}Northern {c |}       {res}.8059911          19,525          19,525
      {txt}Western {c |}       {res}1.143726          15,614          15,614
              {txt}{c |} 
        Total {c |}       {res}.9167167          74,947          74,947
{txt}{hline 14}{c BT}{hline 47}

{com}.         drop if product==. | value==. | quantity==.  ;
{txt}(0 observations deleted)

{com}. codebook hhid;

{txt}{hline}
{res}hhid{right:household id}
{txt}{hline}

{col 19}type:  numeric ({res}double{txt})

{col 18}range:  [{res}1.013e+09{txt},{res}4.193e+09{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}6749{col 51}{txt}missing .:  {res}0{txt}/{res}74947

{txt}{col 19}mean:{res}{col 26} 2.5e+09
{txt}{col 15}std. dev:{res}{col 26} 1.1e+09

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27} 1.0e+09{col 37} 1.1e+09{col 47} 2.2e+09{col 57} 3.2e+09{col 67} 4.1e+09
{txt}
{com}. tab spd;

     {txt}spdomain {c |}      Freq.     Percent        Cum.
{hline 14}{c +}{hline 35}
Central rural {c |}{res}     13,071       17.44       17.44
{txt}Central urban {c |}{res}      9,948       13.27       30.71
{txt}      Eastern {c |}{res}     16,789       22.40       53.11
{txt}     Northern {c |}{res}     19,525       26.05       79.17
{txt}      Western {c |}{res}     15,614       20.83      100.00
{txt}{hline 14}{c +}{hline 35}
        Total {c |}{res}     74,947      100.00
{txt}
{com}. ********************************************************************
> * Merge in temporal price index to convert nominal value to real
> ********************************************************************;
.         sort reg_tpi survquar;
{txt}
{com}.         merge reg_tpi survquar using "$path\work\temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)
(label REG_TPI already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     74,947      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,947      100.00
{txt}
{com}.         drop if _merge ~= 3;
{txt}(0 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         gen value_r=value/tpi_trim;
{txt}
{com}. **************************************************************************;
. * Identify relatively poor households, based on nominal temporally adjusted
> * consumption per capita. Only work with these households for the price
> * calculations.
> **************************************************************************;
.                 preserve;
{txt}
{com}.                         use "$path/work/conpc.dta", clear;
{txt}
{com}. *                       use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work\hhdata.dta for bootstrap;
.         sort hhid;
{txt}
{com}.       merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.       tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.       drop _m;
{txt}
{com}. *CA modified to keep bswt;
.                                 keep hhid hhweight hhsize cons_pc_nom bswt ;
{txt}
{com}.                                 sort hhid;
{txt}
{com}.                                 merge hhid using `spdomainreg_tpi';
{txt}(label REG_TPI already defined)
(label spdomain_original already defined)
(label lsurvquar already defined)

{com}.                                 tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                                 drop _merge;
{txt}
{com}.                                 sort reg_tpi survquar;
{txt}
{com}.                                 cap drop _merge;
{txt}
{com}.                                 merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)
(label REG_TPI already defined)

{com}.                                 tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                                 drop _merge;
{txt}
{com}.                                 sort hhid;
{txt}
{com}.                                 merge hhid using "$path/work/conpc.dta";
{txt}
{com}.                                 tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                                 drop _merge;
{txt}
{com}.                                 gen food_pc_tpi  = food_pc_nom /tpi_trim;
{txt}
{com}.                                 lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.                                                                 * Non-food not TPI adjusted ;
.                                 gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.                                 lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.                                 gen one=1;
{txt}
{com}.                                 tempfile contpi;
{txt}
{com}.                                 save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp saved

{com}.                                 collapse (p$bottom) one cons_pc_tpi [aw=hhsize*hhweight], by(spdomain) ;
{txt}
{com}.                                 rename cons_pc_tpi pctile_60;
{txt}
{com}.                                 tempfile 60pct;
{txt}
{com}.                                 sort spdomain;
{txt}
{com}.                                 save `60pct', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp saved

{com}.                                 use `contpi';
{txt}
{com}.                                         sort spdomain;
{txt}
{com}.                                         merge spdomain using `60pct';
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

{com}.                                         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.                                         drop _merge;
{txt}
{com}.                                         drop one;
{txt}
{com}.                                         sort spdomain;
{txt}
{com}.                                         gen bottom_basket=cons_pc_tpi< pctile_60;
{txt}
{com}.                                         by spdomain: tab bottom_basket [aw=hhsize*hhweight];

{txt}{hline}
-> spdomain = Central rural

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 589.244333       50.06       50.06
{txt}          1 {c |}{res} 587.755667       49.94      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,177      100.00

{txt}{hline}
-> spdomain = Central urban

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}  404.54956       50.01       50.01
{txt}          1 {c |}{res}  404.45044       49.99      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        809      100.00

{txt}{hline}
-> spdomain = Eastern

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 703.563681       50.04       50.04
{txt}          1 {c |}{res} 702.436319       49.96      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,406      100.00

{txt}{hline}
-> spdomain = Northern

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}978.1529326       50.01       50.01
{txt}          1 {c |}{res}977.8470674       49.99      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,956      100.00

{txt}{hline}
-> spdomain = Western

bottom_bask {c |}
         et {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 713.861728       50.03       50.03
{txt}          1 {c |}{res} 713.138272       49.97      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,427      100.00

{txt}
{com}.                                         lab var bottom_basket "=1 if in bottom (60%) of PCE";
{txt}
{com}.                                         sort hhid;
{txt}
{com}.                                                                 save "$path\work\bottom_basket.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\bottom_basket.dta saved

{com}.         restore;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path\work\bottom_basket.dta";
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         26        0.03        0.03
{txt}          3 {c |}{res}     74,947       99.97      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,973      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.                         * Only keep price observations for the poor ;
.         keep if bottom_basket==1;
{txt}(45703 observations deleted)

{com}.         **************************************************************************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * for each spdomain & product combination. This should eliminate outliers
> * that may have an undue influence on the price calculation. 
> **************************************************************************;
.                 gen hhppkg=value_r/quantity;
{txt}(14 missing values generated)

{com}.                 egen lower5=pctile(hhppkg), p(5) by(spdomain product);
{txt}(14 missing values generated)

{com}.                 egen upper5=pctile(hhppkg), p(95) by(spdomain product);
{txt}(14 missing values generated)

{com}. sum;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}hhid {c |}{res}     29270    2.44e+09    1.15e+09   1.01e+09   4.19e+09
{txt}{space 5}product {c |}{res}     29256    130.5086    16.06968        101        161
{txt}{space 8}unit {c |}{res}     29256           1           0          1          1
{txt}{space 4}food_cat {c |}{res}     29256           1           0          1          1
{txt}{space 4}quantity {c |}{res}     29256     .854284    3.451506   .0000429        362
{txt}{hline 13}{c +}{hline 56}
{space 7}value {c |}{res}     29256    351.5733    534.2158          0      10000
{txt}{space 7}count {c |}{res}     29256           1           0          1          1
{txt}{space 4}descript {c |}{res}     29256           1           0          1          1
{txt}{space 6}numreg {c |}{res}     29256    4.109379    1.355594          1          5
{txt}{space 4}survquar {c |}{res}     29270    2.513188    1.164029          1          4
{txt}{hline 13}{c +}{hline 56}
{space 4}spdomain {c |}{res}     29270    3.170994     1.37962          1          5
{txt}{space 5}reg_tpi {c |}{res}     29270    2.344517    1.137238          1          4
{txt}{space 4}tpi_trim {c |}{res}     29270    1.006956    .0732234   .8666803   1.158773
{txt}{space 5}value_r {c |}{res}     29256    350.6941    531.3288          0      10000
{txt}{space 1}cons_pc_nom {c |}{res}     29270    1770.058    1254.323   78.55931   7497.299
{txt}{hline 13}{c +}{hline 56}
{space 6}hhsize {c |}{res}     29270    5.664298    2.604431          1         24
{txt}{space 4}hhweight {c |}{res}     29270    5132.164    4169.973        100      60164
{txt}{space 8}bswt {c |}{res}     29270           1           0          1          1
{txt}{space 1}cons_hh_nom {c |}{res}     29270    9245.057    7300.657   232.1918   99494.44
{txt}{space 1}food_pc_nom {c |}{res}     29270    794.9321    526.6051          0   6142.857
{txt}{hline 13}{c +}{hline 56}
{space 3}nf_pc_nom {c |}{res}     29270    975.1257    899.9186   23.11263   6683.425
{txt}{space 1}food_pc_tpi {c |}{res}     29270     785.863    497.9769          0   5590.592
{txt}{space 1}cons_pc_tpi {c |}{res}     29270    1760.989    1222.805   82.64046   7046.959
{txt}{space 3}pctile_60 {c |}{res}     29270    2797.325    1851.073   1366.797   7060.442
{txt}bottom_bas~t {c |}{res}     29270           1           0          1          1
{txt}{hline 13}{c +}{hline 56}
{space 6}hhppkg {c |}{res}     29256    1477.004    7352.146          0   966751.8
{txt}{space 6}lower5 {c |}{res}     29256    549.4965    586.7083          0   4845.022
{txt}{space 6}upper5 {c |}{res}     29256    2570.282    2101.692          0    12916.2
{txt}
{com}. describe;

{txt}Contains data from {res}C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp
{txt}  obs:{res}        29,270                          
{txt} vars:{res}            28                          17 May 2013 14:58
{txt} size:{res}     3,746,560                          
{txt}{hline}
              storage  display     value
variable name   type   format      label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: double }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}household id{p_end}
{p 0 48}{bind:product        }{txt}{bind: float  }{bind:{txt}%10.0g     }{space 1}{bind:HS10A2   }{bind:  }{res}{res}Food product code: numerical{p_end}
{p 0 48}{bind:unit           }{txt}{bind: float  }{bind:{txt}%10.0g     }{space 1}{bind:         }{bind:  }{res}{res}set equal to one since all observations are converted into kg{p_end}
{p 0 48}{bind:food_cat       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}food category equals 1, if product is food and 0 if non food{p_end}
{p 0 48}{bind:quantity       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily quantity consumed in Kgs per household{p_end}
{p 0 48}{bind:value          }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}daily value of consumption in UGX per per household{p_end}
{p 0 48}{bind:count          }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:descript       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:descrip  }{bind:  }{res}{res}product description including product code but equals 2 for all non-foods{p_end}
{p 0 48}{bind:numreg         }{txt}{bind: double }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}number of goods in the basket{p_end}
{p 0 48}{bind:survquar       }{txt}{bind: float  }{bind:{txt}%11.0g     }{space 1}{txt}lsurvquar{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}Sequential Survey Quarter May-Jun 09=1){p_end}
{p 0 48}{bind:spdomain       }{txt}{bind: float  }{bind:{txt}%13.0g     }{space 1}{txt}spdomain_original{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}{p_end}
{p 0 48}{bind:reg_tpi        }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:REG_TPI  }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:tpi_trim       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}TRIMMED Temporal price index (Q4=1){p_end}
{p 0 48}{bind:value_r        }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:cons_pc_nom    }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:hhsize         }{txt}{bind: double }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Household Size{p_end}
{p 0 48}{bind:hhweight       }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Household sample weight{p_end}
{p 0 48}{bind:bswt           }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:cons_hh_nom    }{txt}{bind: double }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}(sum) cod_hh_nom{p_end}
{p 0 48}{bind:food_pc_nom    }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}nominal food consumption per capita{p_end}
{p 0 48}{bind:nf_pc_nom      }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}nominal non-food consumption per capita{p_end}
{p 0 48}{bind:food_pc_tpi    }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Temp-adjusted per capita food consumption/day{p_end}
{p 0 48}{bind:cons_pc_tpi    }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}Temp adjusted total consumption/day{p_end}
{p 0 48}{bind:pctile_60      }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}(p 50) cons_pc_tpi{p_end}
{p 0 48}{bind:bottom_basket  }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}=1 if in bottom (60%) of PCE{p_end}
{p 0 48}{bind:hhppkg         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:lower5         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:upper5         }{txt}{bind: float  }{bind:{txt}%9.0g      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by:  
{res}     Note:  dataset has changed since last saved
{txt}
{com}. keep if hhppkg-lower5>=0 & hhppkg-upper5<=0;
{txt}(2228 observations deleted)

{com}. *********************************************************************
> * Note that we do prices in three ways. First, by summing quantity and value 
> * This average price price_unitw is thus quantity/value weighted. Second, we
> * calculate the price and take simple means for a transaction weighted
> * price, price_unitt. Last we take the median, price_unitm. But in the end
> * we only use price_unitw
> *********************************************************************;
.         gen price_unitt=value_r/(quantity*1000);
{txt}
{com}.         gen price_unitm=price_unitt;
{txt}
{com}.                 *CA modified to count the boot sample weight bswt;
.         collapse (sum) quantity value_r count bswt 
>                  (mean) price_unitt 
>                  (median) price_unitm [aw=hhweight], by(spdomain product);
{txt}
{com}.         *Generate weighted price per gram ;
.         gen price_unitw=value_r/(quantity*1000);
{txt}
{com}.         drop value_r quantity;
{txt}
{com}.         sort spdomain product;
{txt}
{com}.         lab var price_unitt "simple average of calculated prices - transaction weighted";
{txt}
{com}.         lab var price_unitm "median of prices";
{txt}
{com}.         lab var price_unitw "value share weighted mean prices";
{txt}
{com}. * Get an idea of the difference between the price measures;
.         gen ratiotw=price_unitt/price_unitw;
{txt}(1 missing value generated)

{com}.         gen ratiomw=price_unitm/price_unitw;
{txt}(1 missing value generated)

{com}.         sum ratiotw ratiomw;

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}ratiotw {c |}{res}       228    1.234897    .3907424   .9129278   3.470273
{txt}{space 5}ratiomw {c |}{res}       228     1.09016    .3749053   .2799477   3.711278
{txt}
{com}.         sort product;
{txt}
{com}.         merge product using "$path/work/codes_food_basket_flex.dta";
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        229      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        229      100.00
{txt}
{com}.         count if _merge~=3;
{res}    0
{txt}
{com}.         drop if _merge~=3;
{txt}(0 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         sort product spdomain;
{txt}
{com}. save "$path\work\price_unit_flex.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex.dta saved

{com}. ****************************************************************************************
> * 110_price_unit_flex.do                (end)
> ****************************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/120_povline_food_flex.do" /* Flexible basket: Poverty line */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/120_povline_food_flex.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/120_povline_food_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:58:14
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 120_povline_food_flex.do      (start)
> *
> * Use the file with the food basket (food_basket_flex), which is in shares. 
> * Then merge it with the prices file, and then with the calories file.
> * Along the way, drop those observations where we have no price information
> * or no calorie information.
> **************************************************************************;
. /*
> This file uses:
>         work\food_basket_flex.dta
>         work\price_unit_flex.dta
>         work\calperg.dta
>         work\calpp.dta
> 
> This file creates:
>         work\povline_flex.dta
> */
> 
> 
> * start with the quantity information;
. use "$path/work/food_basket_flex.dta";
{txt}
{com}.         sort product spdomain;
{txt}
{com}.         * merge in price information;
.         merge product spdomain using "$path\work\price_unit_flex.dta";
{txt}(label spdomain_original already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         84       36.68       36.68
{txt}          3 {c |}{res}        145       63.32      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        229      100.00
{txt}
{com}.         list product spdomain descript if _merge==1;
{txt}
{com}.         drop if _merge ~=3;
{txt}(84 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         sort product;
{txt}
{com}.         * merge in information on calories per gram;
.         merge product using "$path\work\calperg.dta";
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         16        9.94        9.94
{txt}          3 {c |}{res}        145       90.06      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        161      100.00
{txt}
{com}.         * This tells where we are lacking calorie info or are lacking quantity info due to 
>         * missing price info above;
.         list product spdomain descript if _merge==1;
{txt}
{com}.         drop if _merge~=3;
{txt}(16 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         sort spdomain f_share_w;
{txt}
{com}.                 * CA modified to handle bootstrap counting;
.         * determine if any quantity has fewer than 10 price observations;
.         by spdomain: count if round(bswt)<10;

{txt}{hline}
-> spdomain = Central rural
{res}    1
{txt}{hline}
-> spdomain = Central urban
{res}    0
{txt}{hline}
-> spdomain = Eastern
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0
{txt}
{com}.         drop if round(bswt) < 10;
{txt}(1 observation deleted)

{com}.         by spdomain: egen baskshr=sum(f_share_w);
{txt}
{com}.         by spdomain: gen cumshr1=sum(f_share_w);
{txt}
{com}.         * bundle was cut at 92.5 percent- cut back to 90 percent if necessary;
.         drop if cumshr1<=baskshr-.9;
{txt}(15 observations deleted)

{com}.         * reobtain the share represented from the average basket- should be slightly more than 90;
.         drop baskshr;
{txt}
{com}.         by spdomain: egen baskshr=sum(f_share_w);
{txt}
{com}.         by spdomain: sum baskshr;

{txt}{hline}
-> spdomain = Central rural

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        27    .9015974           0   .9015974   .9015974

{txt}{hline}
-> spdomain = Central urban

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        20    .9055901           0   .9055901   .9055901

{txt}{hline}
-> spdomain = Eastern

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        27    .9036159           0   .9036159   .9036159

{txt}{hline}
-> spdomain = Northern

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        27    .9059228           0   .9059228   .9059228

{txt}{hline}
-> spdomain = Western

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 5}baskshr {c |}{res}        28    .9069368           0   .9069368   .9069368

{txt}
{com}.         * obtain quantities and calories provided by these quantities;
.         gen quan=f_share_w/price_unitw;
{txt}
{com}.                         /* how many g in 1 MT exp on food item */
>         gen cal_ir=quan*calperg;
{txt}
{com}.                                 /* how many cal in 1 MT exp on food item */
>         by spdomain: egen calreg=sum(cal_ir);
{txt}
{com}.         /* how many cal in 1 MT exp in food basket*/
> 
>         * merge in calorie requirements;
.         sort spdomain;
{txt}
{com}.         merge spdomain using "$path\work\calpp.dta";
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        129      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        129      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         * get the expansion factor to hit 95% of calorie requirements;
.         gen ratio=.95*calpp/calreg;
{txt}
{com}.                         replace quan=quan*ratio;
{txt}(129 real changes made)

{com}.         replace cal_ir=quan*calperg;
{txt}(123 real changes made)

{com}.         * do a consistency check;
.         sort spdomain;
{txt}
{com}.         by spdomain: egen chkcal=sum(cal_ir);
{txt}
{com}.         replace chkcal=chkcal/.95-calpp ;
{txt}(129 real changes made)

{com}.                         * these values should be about zero;
.         by spdomain: sum chkcal;

{txt}{hline}
-> spdomain = Central rural

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        27   -.0000771           0  -.0000771  -.0000771

{txt}{hline}
-> spdomain = Central urban

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        20   -.0000128           0  -.0000128  -.0000128

{txt}{hline}
-> spdomain = Eastern

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        27   -.0000899           0  -.0000899  -.0000899

{txt}{hline}
-> spdomain = Northern

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        27    .0001413           0   .0001413   .0001413

{txt}{hline}
-> spdomain = Western

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 6}chkcal {c |}{res}        28    .0001285           0   .0001285   .0001285

{txt}
{com}.         * obtain the value of each good in the bundle;
.         gen val_ir=quan*price_unitw;
{txt}
{com}.         * the sum of the value of the goods in the bundle is assumed to represent 90% of expenditure;
.         by spdomain: egen povline_f_flex90=sum(val_ir);
{txt}
{com}.                                 *************** we change the poverty line for Kampala urban, to try if it works ************;
. ***             replace povline_f_flex90=povline_f_flex90 + 6000;
.                         replace povline_f_flex=povline_f_flex90/.9;
{txt}(129 real changes made)

{com}.         collapse (mean) povline_f_flex, by (spdomain);
{txt}
{com}.                 lab var povline_f_flex "Food poverty line. Flexible basket";
{txt}
{com}.         sort spdomain;
{txt}
{com}.         keep spdomain povline_f_flex;
{txt}
{com}. save "$path\work\povline_food_flex.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex.dta saved

{com}. /*
> * To be used in 140_iterate.do;
> gen cutoff = 1.5 * povline_f_flex;
> keep spdomain cutoff;
> save "$path/work/povlines_first_iterate.dta", replace;
> */
> 
> **************************************************************************
> * 120_povline_food_flex.do      (end)
> **************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/120_povline_food_flex.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}17 May 2013, 14:58:14
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/130_povmeas_flex.do"              /* Flexible basket: Poverty rates */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/130_povmeas_flex.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/130_povmeas_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:58:14
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 130_povmeas_flex.do           (start)
> *
> * Purpose:
> * Initial poverty measures calculation for flexible basket. (Before any iteration)
> **************************************************************************;
. *CA modified to add work\hhdata.dta for bootstrap;
. /*
> This file uses:
>         in\foodshr96.dta
>         work\povline_f_flex.dta
>         work\consump_nom.dta
>         work\hhdata.dta
>         work/temp_index_reg_tpi.dta
> 
> This file creates:
>         work\foodshr96.dta
>         work\povmeas.dta
>         work\povlines.dta
>         work/cons_real.dta
> */
> 
> 
> 
> **************************************************************************;
. * Bring in data file with nominal consumption per capita, and deflate it
> * by temporal price index.
> **************************************************************************;
. use "$path/work/hhdata.dta", clear;
{txt}
{com}.         keep hhid strata reg_tpi spdomain news rural survmon survquar;
{txt}
{com}.         tab reg_tpi, miss;

    {txt}reg_tpi {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
    central {c |}{res}      1,986       29.31       29.31
{txt}    eastern {c |}{res}      1,406       20.75       50.07
{txt}   northern {c |}{res}      1,956       28.87       78.94
{txt}    western {c |}{res}      1,427       21.06      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         tab survquar, miss;

 {txt}Sequential {c |}
     Survey {c |}
    Quarter {c |}
    May-Jun {c |}
      09=1) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
 May-Jul 09 {c |}{res}      1,749       25.82       25.82
{txt}Sept-Oct 09 {c |}{res}      1,731       25.55       51.37
{txt}Nov09-Jan10 {c |}{res}      1,458       21.52       72.89
{txt} Feb-Apr 10 {c |}{res}      1,837       27.11      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         keep hhid spdomain reg_tpi survquar;
{txt}
{com}.         sort hhid;
{txt}
{com}.         tempfile spdomainreg_tpi;
{txt}
{com}. save `spdomainreg_tpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}. use "$path/work/conpc.dta", clear;
{txt}
{com}. *use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work\hhdata.dta for bootstrap;
.     sort hhid;
{txt}
{com}.     merge hhid using "$path\work\hhdata.dta";
{txt}
{com}.     tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.     drop _m;
{txt}
{com}.         keep hhid hhweight hhsize cons_pc_nom ;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using `spdomainreg_tpi';
{txt}(label REG_TPI already defined)
(label spdomain_original already defined)
(label lsurvquar already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort reg_tpi survquar;
{txt}
{com}.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)
(label REG_TPI already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path/work/conpc.dta";
{txt}
{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         gen food_pc_tpi  = food_pc_nom /tpi_trim;
{txt}
{com}.         lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.                 gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.         lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.         gen one=1;
{txt}
{com}. * TPI deflated per capita consumption ;
.         tempfile contpi;
{txt}
{com}. save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved

{com}. **************************************************************************
> * Calculate non-food expenditure for HH around the food poverty line
> *
> * Develop a discrete triangular weighted distribution. This gives a
> * weight of  1 to HH at +/- 18-20% from food poverty line, and
> * weight of  2 to HH at +/- 16-18% from food poverty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food poverty line.
> * This weight is called triwt below.
> **************************************************************************;
. use `contpi';
{txt}
{com}.         sort spdomain;
{txt}
{com}.         merge spdomain using "$path/work/povline_food_flex.dta";
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}. gen     triwt = 0 ;
{txt}
{com}. replace triwt = 11 - round(50*abs(cons_pc_tpi/povline_f_flex-1)+0.5)
>                 if abs(cons_pc_tpi/povline_f_flex-1)<=0.2;
{txt}(332 real changes made)

{com}.                                         * Nearness to poverty line and population weights ;
.         gen tripopwt=triwt*hhweight*hhsize;
{txt}
{com}.         preserve;
{txt}
{com}.                 collapse (mean) nf_pc_nom [aw=tripopwt] ,
>                         by(spdomain);
{txt}
{com}.                                         rename nf_pc_nom povline_na_flex;
{txt}
{com}.                 lab var povline_na_flex "Nonfood poverty line. Flexible bundle";
{txt}
{com}.                                 tempfile znf;
{txt}
{com}.                 sort spdomain;
{txt}
{com}.                 save `znf', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000004.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000004.tmp saved

{com}.                 tab spdomain;

     {txt}spdomain {c |}      Freq.     Percent        Cum.
{hline 14}{c +}{hline 35}
Central rural {c |}{res}          1       20.00       20.00
{txt}Central urban {c |}{res}          1       20.00       40.00
{txt}      Eastern {c |}{res}          1       20.00       60.00
{txt}     Northern {c |}{res}          1       20.00       80.00
{txt}      Western {c |}{res}          1       20.00      100.00
{txt}{hline 14}{c +}{hline 35}
        Total {c |}{res}          5      100.00
{txt}
{com}.         restore;
{txt}
{com}.         sort spdomain;
{txt}
{com}.         merge spdomain using `znf';
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}. **************************************************************************;
. * Poverty line is the sum of the food and non-food poverty lines
> **************************************************************************;
.         gen povline_flex=povline_f_flex + povline_na_flex;
{txt}
{com}.         lab var povline_flex "Poverty line. Flexible bundle";
{txt}
{com}.         sort spdomain;
{txt}
{com}. save "$path\work\povlines.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines.dta saved

{com}. **************************************************************************;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first: we just use the first stratum.
> **************************************************************************;
. use `contpi';
{txt}
{com}.         sort spdomain;
{txt}
{com}.         merge spdomain using "$path\work\povlines.dta";
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines.dta
{p_end}
(label REG_TPI already defined)
(label spdomain_original already defined)
(label lsurvquar already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         * Real consumption pc, temporally deflated ;
.         gen cr= cons_pc_tpi ;
{txt}
{com}.         * Poverty line;
.         gen linpob=povline_flex;
{txt}
{com}.         *qui sum linpob if spdomain==1, meanonly;
.         sum linpob if spdomain==3, meanonly;
{txt}
{com}.         global spi_base=r(mean);
{txt}
{com}.         * Spatial price index ;
.         gen spi=linpob/$spi_base;
{txt}
{com}.         * Real consumption pc, temporally and spatially deflated ;
.         gen cr2=cr/spi;
{txt}
{com}.         qui sum cr [aw=hhweight*hhsize];
{txt}
{com}.         global sumcr=r(sum);
{txt}
{com}.         qui sum cr2 [aw=hhweight*hhsize];
{txt}
{com}.         global sumcr2=r(sum);
{txt}
{com}.         replace spi=spi*$sumcr2/$sumcr;
{txt}(6775 real changes made)

{com}.         gen linpobr=linpob/spi;
{txt}
{com}.         replace cr2=cr/spi;
{txt}(6775 real changes made)

{com}.         sum cr cr2 linpob linpobr [aw=hhweight*hhsize];

{txt}    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9416.597   395671.8   82.64046   8.12e+07
{txt}{space 9}cr2 {c |}{res}    6775   200636622    9416.597   305912.3   84.59628   6.26e+07
{txt}{space 6}linpob {c |}{res}    6775   200636622    972.5242   203.3228   768.5243    1507.71
{txt}{space 5}linpobr {c |}{res}    6775   200636622     1162.09   .0000451    1162.09   1162.091
{txt}
{com}.         lab var cr      "Temporally-adjusted cons pc";
{txt}
{com}.         lab var cr2     "Spatially & temporally adjusted cons pc";
{txt}
{com}.         lab var linpob  "Poverty line";
{txt}
{com}.         lab var linpobr "Real poverty line";
{txt}
{com}.         lab var spi     "Spatial price index";
{txt}
{com}. **************************************************************************
> * calculate poverty measures with the flexible food bundle
> **************************************************************************;
.         gen h = 100     if cr <=(linpob);
{txt}(5940 missing values generated)

{com}.         replace  h = 0 if cr > (linpob);
{txt}(5940 real changes made)

{com}.                         gen             pg      = ((linpob - cr )/linpob) *100;
{txt}
{com}.         replace         pg      = 0             if h==0;
{txt}(5940 real changes made)

{com}.         gen             spg     = ((( linpob - cr )/ linpob )^2)*100;
{txt}
{com}.         replace         spg     = 0             if h==0;
{txt}(5940 real changes made)

{com}.         gen h_flex=h;
{txt}
{com}.         gen pg_flex=pg;
{txt}
{com}.         gen spg_flex=spg;
{txt}
{com}.         lab var h_flex   "Poverty headcount. Flex bundle";
{txt}
{com}.         lab var pg_flex  "Poverty gap. Flex bundle";
{txt}
{com}.         lab var spg_flex "Squared poverty gap. Flex bundle";
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path\work\hhdata.dta";
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop if _merge~=3;
{txt}(0 observations deleted)

{com}.         drop _merge;
{txt}
{com}.         gen popwt=hhsize*hhweight;
{txt}
{com}.                 * Stata 10.1 syntax ;
.         svyset , clear;
{txt}
{com}.         svyset [pweight=popwt] , str(strata) psu(psu);

      {txt}pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}

{com}.         svy: mean h_flex pg_flex spg_flex;
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 6}h_flex {c |}{col 14}{res}{space 2} 10.64383{col 26}{space 2} .7183087{col 37}{space 5} 9.233536{col 51}{space 3} 12.05412
{txt}{space 5}pg_flex {c |}{col 14}{res}{space 2} 2.847239{col 26}{space 2} .2301319{col 37}{space 5} 2.395409{col 51}{space 3}  3.29907
{txt}{space 4}spg_flex {c |}{col 14}{res}{space 2} 1.160688{col 26}{space 2} .1236742{col 37}{space 5} .9178722{col 51}{space 3} 1.403505
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(rural);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} 3.415127{col 26}{space 2} 1.014682{col 37}{space 5} 1.422946{col 51}{space 3} 5.407308
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 11.74798{col 26}{space 2} .7975071{col 37}{space 5} 10.18219{col 51}{space 3} 13.31377
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .7949736{col 26}{space 2} .2336944{col 37}{space 5} .3361487{col 51}{space 3} 1.253798
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 3.160712{col 26}{space 2}  .260382{col 37}{space 5}  2.64949{col 51}{space 3} 3.671934
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2}  .247158{col 26}{space 2} .0745631{col 37}{space 5} .1007643{col 51}{space 3} .3935518
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.300225{col 26}{space 2} .1414875{col 37}{space 5} 1.022435{col 51}{space 3} 1.578015
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(news);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

            {txt}1: news = {res}1
            {txt}2: news = {res}2
            {txt}3: news = {res}3
            {txt}4: news = {res}4

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2}  5.85527{col 26}{space 2} 1.056141{col 37}{space 5} 3.781691{col 51}{space 3} 7.928848
{txt}{space 11}2 {c |}{col 14}{res}{space 2} 7.564058{col 26}{space 2} 1.320862{col 37}{space 5} 4.970739{col 51}{space 3} 10.15738
{txt}{space 11}3 {c |}{col 14}{res}{space 2} 20.05523{col 26}{space 2} 1.819486{col 37}{space 5} 16.48294{col 51}{space 3} 23.62753
{txt}{space 11}4 {c |}{col 14}{res}{space 2} 11.88273{col 26}{space 2}  1.47859{col 37}{space 5} 8.979738{col 51}{space 3} 14.78573
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2} 1.242779{col 26}{space 2} .2633442{col 37}{space 5} .7257408{col 51}{space 3} 1.759817
{txt}{space 11}2 {c |}{col 14}{res}{space 2} 1.383358{col 26}{space 2} .2140039{col 37}{space 5} .9631926{col 51}{space 3} 1.803523
{txt}{space 11}3 {c |}{col 14}{res}{space 2} 7.022313{col 26}{space 2} .8624984{col 37}{space 5} 5.328923{col 51}{space 3} 8.715703
{txt}{space 11}4 {c |}{col 14}{res}{space 2}  2.99275{col 26}{space 2} .5015668{col 37}{space 5} 2.007997{col 51}{space 3} 3.977503
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 11}1 {c |}{col 14}{res}{space 2} .3899434{col 26}{space 2} .0994254{col 37}{space 5} .1947361{col 51}{space 3} .5851507
{txt}{space 11}2 {c |}{col 14}{res}{space 2} .3536218{col 26}{space 2} .0579814{col 37}{space 5} .2397838{col 51}{space 3} .4674599
{txt}{space 11}3 {c |}{col 14}{res}{space 2} 3.405928{col 26}{space 2}  .490854{col 37}{space 5} 2.442208{col 51}{space 3} 4.369648
{txt}{space 11}4 {c |}{col 14}{res}{space 2} 1.170894{col 26}{space 2} .2908952{col 37}{space 5} .5997633{col 51}{space 3} 1.742024
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(reg_tpi);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

      {txt}central: reg_tpi = {res}central
      {txt}eastern: reg_tpi = {res}eastern
     {txt}northern: reg_tpi = {res}northern
      {txt}western: reg_tpi = {res}western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 5}central {c |}{col 14}{res}{space 2}  5.85527{col 26}{space 2} 1.056141{col 37}{space 5} 3.781691{col 51}{space 3} 7.928848
{txt}{space 5}eastern {c |}{col 14}{res}{space 2} 7.564058{col 26}{space 2} 1.320862{col 37}{space 5} 4.970739{col 51}{space 3} 10.15738
{txt}{space 4}northern {c |}{col 14}{res}{space 2} 20.05523{col 26}{space 2} 1.819486{col 37}{space 5} 16.48294{col 51}{space 3} 23.62753
{txt}{space 5}western {c |}{col 14}{res}{space 2} 11.88273{col 26}{space 2}  1.47859{col 37}{space 5} 8.979738{col 51}{space 3} 14.78573
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 5}central {c |}{col 14}{res}{space 2} 1.242779{col 26}{space 2} .2633442{col 37}{space 5} .7257408{col 51}{space 3} 1.759817
{txt}{space 5}eastern {c |}{col 14}{res}{space 2} 1.383358{col 26}{space 2} .2140039{col 37}{space 5} .9631926{col 51}{space 3} 1.803523
{txt}{space 4}northern {c |}{col 14}{res}{space 2} 7.022313{col 26}{space 2} .8624984{col 37}{space 5} 5.328923{col 51}{space 3} 8.715703
{txt}{space 5}western {c |}{col 14}{res}{space 2}  2.99275{col 26}{space 2} .5015668{col 37}{space 5} 2.007997{col 51}{space 3} 3.977503
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 5}central {c |}{col 14}{res}{space 2} .3899434{col 26}{space 2} .0994254{col 37}{space 5} .1947361{col 51}{space 3} .5851507
{txt}{space 5}eastern {c |}{col 14}{res}{space 2} .3536218{col 26}{space 2} .0579814{col 37}{space 5} .2397838{col 51}{space 3} .4674599
{txt}{space 4}northern {c |}{col 14}{res}{space 2} 3.405928{col 26}{space 2}  .490854{col 37}{space 5} 2.442208{col 51}{space 3} 4.369648
{txt}{space 5}western {c |}{col 14}{res}{space 2} 1.170894{col 26}{space 2} .2908952{col 37}{space 5} .5997633{col 51}{space 3} 1.742024
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(strata);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

      {txt}KAMPALA: strata = {res}KAMPALA
    {txt}_subpop_2: strata = {res}CENTRAL 1
    {txt}_subpop_3: strata = {res}CENTRAL 2
    {txt}_subpop_4: strata = {res}EAST CENTRAL
      {txt}EASTERN: strata = {res}EASTERN
    {txt}_subpop_6: strata = {res}MID-NOTHERN
    {txt}_subpop_7: strata = {res}NORTH-EAST
    {txt}_subpop_8: strata = {res}WEST-NILE
    {txt}_subpop_9: strata = {res}MID-WESTERN
   {txt}_subpop_10: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} 4.874973{col 26}{space 2} 2.339743{col 37}{space 5}   .28123{col 51}{space 3} 9.468715
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 4.815216{col 26}{space 2}  1.42435{col 37}{space 5} 2.018713{col 51}{space 3} 7.611719
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 7.336596{col 26}{space 2} 1.868566{col 37}{space 5} 3.667939{col 51}{space 3} 11.00525
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 5.450948{col 26}{space 2} 1.171204{col 37}{space 5}  3.15146{col 51}{space 3} 7.750436
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2}  9.28854{col 26}{space 2} 2.149875{col 37}{space 5} 5.067575{col 51}{space 3}  13.5095
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  11.3821{col 26}{space 2} 2.080189{col 37}{space 5} 7.297956{col 51}{space 3} 15.46625
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 69.04124{col 26}{space 2} 6.131256{col 37}{space 5} 57.00341{col 51}{space 3} 81.07906
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 9.436877{col 26}{space 2} 1.618277{col 37}{space 5} 6.259627{col 51}{space 3} 12.61413
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 15.13404{col 26}{space 2} 2.510779{col 37}{space 5}  10.2045{col 51}{space 3} 20.06359
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 8.436528{col 26}{space 2}  1.29171{col 37}{space 5} 5.900445{col 51}{space 3} 10.97261
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} 1.156125{col 26}{space 2} .5364251{col 37}{space 5} .1029326{col 51}{space 3} 2.209317
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 1.054924{col 26}{space 2} .4136337{col 37}{space 5} .2428149{col 51}{space 3} 1.867033
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.472113{col 26}{space 2} .4259365{col 37}{space 5} .6358493{col 51}{space 3} 2.308377
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 1.078487{col 26}{space 2} .2343785{col 37}{space 5} .6183188{col 51}{space 3} 1.538655
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 1.632159{col 26}{space 2} .3314862{col 37}{space 5} .9813346{col 51}{space 3} 2.282984
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 3.762759{col 26}{space 2} .8867794{col 37}{space 5} 2.021697{col 51}{space 3}  5.50382
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 28.09699{col 26}{space 2} 3.531683{col 37}{space 5} 21.16305{col 51}{space 3} 35.03094
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 1.754495{col 26}{space 2} .4095893{col 37}{space 5} .9503265{col 51}{space 3} 2.558664
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 4.321979{col 26}{space 2} .8772222{col 37}{space 5} 2.599681{col 51}{space 3} 6.044276
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 1.583842{col 26}{space 2} .3230622{col 37}{space 5} .9495568{col 51}{space 3} 2.218128
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .3262199{col 26}{space 2}  .149928{col 37}{space 5} .0318582{col 51}{space 3} .6205817
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3440746{col 26}{space 2} .1768297{col 37}{space 5}-.0031046{col 51}{space 3} .6912538
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .4639362{col 26}{space 2} .1493101{col 37}{space 5} .1707877{col 51}{space 3} .7570848
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2}  .318168{col 26}{space 2} .0858767{col 37}{space 5} .1495616{col 51}{space 3} .4867744
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} .3825553{col 26}{space 2} .0781365{col 37}{space 5} .2291458{col 51}{space 3} .5359648
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.667829{col 26}{space 2} .4831084{col 37}{space 5} .7193161{col 51}{space 3} 2.616342
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 14.74936{col 26}{space 2} 2.180789{col 37}{space 5}  10.4677{col 51}{space 3} 19.03102
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .5462792{col 26}{space 2} .1756408{col 37}{space 5} .2014342{col 51}{space 3} .8911242
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 1.823119{col 26}{space 2} .5209048{col 37}{space 5} .8003987{col 51}{space 3} 2.845839
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .4795711{col 26}{space 2} .1404659{col 37}{space 5} .2037869{col 51}{space 3} .7553553
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         svy: mean h_flex pg_flex spg_flex , over(spdomain);
{txt}(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

    {txt}_subpop_1: spdomain = {res}Central rural
    {txt}_subpop_2: spdomain = {res}Central urban
      {txt}Eastern: spdomain = {res}Eastern
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex       {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 6.798742{col 26}{space 2} 1.382219{col 37}{space 5} 4.084957{col 51}{space 3} 9.512527
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 3.920949{col 26}{space 2} 1.470722{col 37}{space 5} 1.033401{col 51}{space 3} 6.808497
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 7.564058{col 26}{space 2} 1.320862{col 37}{space 5} 4.970739{col 51}{space 3} 10.15738
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 20.05523{col 26}{space 2} 1.819486{col 37}{space 5} 16.48294{col 51}{space 3} 23.62753
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 11.88273{col 26}{space 2}  1.47859{col 37}{space 5} 8.979738{col 51}{space 3} 14.78573
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.361359{col 26}{space 2} .3492406{col 37}{space 5} .6756756{col 51}{space 3} 2.047041
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .9996648{col 26}{space 2} .3584817{col 37}{space 5} .2958383{col 51}{space 3} 1.703491
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 1.383358{col 26}{space 2} .2140039{col 37}{space 5} .9631926{col 51}{space 3} 1.803523
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 7.022313{col 26}{space 2} .8624984{col 37}{space 5} 5.328923{col 51}{space 3} 8.715703
{txt}{space 5}Western {c |}{col 14}{res}{space 2}  2.99275{col 26}{space 2} .5015668{col 37}{space 5} 2.007997{col 51}{space 3} 3.977503
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}   .43199{col 26}{space 2}  .137666{col 37}{space 5} .1617029{col 51}{space 3} .7022771
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3037389{col 26}{space 2} .1081926{col 37}{space 5} .0913186{col 51}{space 3} .5161592
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} .3536218{col 26}{space 2} .0579814{col 37}{space 5} .2397838{col 51}{space 3} .4674599
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 3.405928{col 26}{space 2}  .490854{col 37}{space 5} 2.442208{col 51}{space 3} 4.369648
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 1.170894{col 26}{space 2} .2908952{col 37}{space 5} .5997633{col 51}{space 3} 1.742024
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}

{com}.         compress;
{txt}survquar was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}one was {res}float{txt} now {res}byte
{txt}triwt was {res}float{txt} now {res}byte
{txt}h was {res}float{txt} now {res}byte
{txt}h_flex was {res}float{txt} now {res}byte
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}
{com}.         sort hhid;
{txt}
{com}. save "$path/work/cons_real.dta" , replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real.dta saved

{com}.         collapse  (mean) h_flex pg_flex spg_flex [aw=hhweight*hhsize], by(strata);
{txt}
{com}. save "$path\work\povmeas.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povmeas.dta saved

{com}. **************************************************************************
> * 130_povmeas_flex.do           (end)
> **************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/130_povmeas_flex.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}17 May 2013, 14:58:14
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 do "$path/new/140_iterate.do" $it_n $bottom     /* Flexible basket: Iterations */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/140_iterate.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/140_iterate.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:58:14
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. *global povline_initial "$path\in\povlines_first_iof.dta";
. **************************************************************************
> * 140_iterate.do        (start)
> *
> * Purpose: Create flexible food basket and poverty line with iterative procedure
> *
> * This program will take the results from the first pass at the
> * poverty lines and applies the corresponding spatial deflator to
> * re-select the relatively poor, their consumption bundles, and
> * their prices.
> *
> * Welfare indicator is here always temporally and spatially adjusted per capita
> * expenditure. Here called cr_it< >.
> *
> * We will iterate this process 5 times which here assures convergence.
> *
> * CA, Mar 2010: Relatively poor are those below last iterated poverty line
> * MAH, Apr 2010: Cleaning
> * URB, feb 2012: Commented out "drop if unit~=2"
> **************************************************************************;
. /*
> This file uses:
>             in/povlines_first_new.dta
>         work\hhdata.dta
>         work\consump_nom.dta
>         work\own.dta
>         work\daily.dta
>         work\temp_index_reg_tpi.dta
>         work\cons_cod.dta
>         work\food_cat.dta
>         work\cons_real.dta
>         work\products.dta
>         work\match96_02.dta
>         new\conversions.do
>         
> This file creates (where `pass' is the number of the iteration):
>         work\codes_food_basket_flex_it`pass'.dta
>         work\price_unit_flex_it`pass'.dta
>         work\quan_flex_it`pass'.dta
>         work\match_cod_flex_it`pass'.csv
>         work\relpoor_it`pass'.dta
>         work\povlines_it`pass'.dta
>         work\foodshares_it`pass'.dta
>         work\nat_pov_flex.csv
>         work\rur_pov_flex.csv
>         work\strata_pov_flex.csv
>         work\spdomain_pov_flex.csv
>         work\reg_tpi_pov_flex.csv
> */
> 
> **************************************************************************;
. * Make a key file that will be used over and over, without change
> * in every iteration. This will include the TEMPORALLY deflated consumption
> * and various HH data such as hhweight, spdomain, etc.
> **************************************************************************;
. use "$path/work/conpc.dta";
{txt}
{com}.         sort hhid;
{txt}
{com}.         merg hhid using "$path\work\hhdata.dta";
{txt}
{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort reg_tpi survquar;
{txt}
{com}.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)
(label REG_TPI already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.                 gen food_pc_tpi = food_pc_nom /tpi_trim;
{txt}
{com}.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.         lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.         lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.         tempfile contpi;
{txt}
{com}.         sort hhid;
{txt}
{com}. save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}. *use "$path\in\povlines_first_iterate.dta", clear;
. *save "$path/work/povlines_first.dta", replace;
. **************************************************************************;
. * Now set some information pertaining to the iterations. For now we'll
> * manually set the number of iterations. Also specify the percentile
> * cutpoint that we will use for defining the relatively poor.
> **************************************************************************;
. local lastpass=0;
{txt}
{com}. local pass=1;
{txt}
{com}. * Use these two lines to manually specify the number of iterations
> * and the cutpoint here in the do file.;
.   *local maxit=5;
.   *local cutpt=50;
. * Use these few lines if you want to specify the number of iterations
> * and percentile cutpoint by passing them as parameters on the command
> * line, e.g.:   wstata do new\iterate1.do 5 50;
. if "`1'"=="" | "`2'"=="" {c -(}      ;
.         di in red "Error: you need to specify number of iterations as first parameter";
.         di in red "       and percentile cutpoint as second parameter on command line.";
. {c )-};
{txt}
{com}. local maxit=`1';
{txt}
{com}. local cutpt=`2';
{txt}
{com}. tempfile cutoff;
{txt}
{com}. while `pass' <= `maxit' {c -(};
{txt}  2{com}.         **************************************************************************;
. **************************************************************************;
. * Pick out the bottom X percent in real consumption per capita 
> * (temporally & spatially adjusted), as ranked by the previous iteration.
> * The percentile to use is defined by "cutpt". This produces a file that
> * has the hhid, and a dummy variable indicating if they were below the
> * cutpoint on the last iteration.
> **************************************************************************;
. **************************************************************************;
. /*
> * Comment out if IOF 2008/09. (This code included instead of below code in order to replicate published figures 2002/03). ( START ) ;
> 
>         if "`pass'"=="1" {c -(}      ;
>               use `contpi', clear;
>               sort spdomain;
>               merge spdomain using "$path/work/povlines_first.dta";
>               tab _m;
>               drop _m;
> *              gen relpoor`pass'= cons_pc_tpi<=cutoff;
>                gen relpoor`pass'= cons_pc_tpi if cons_pc_tpi<=cutoff;
>               rename cons_pc_tpi cr_it0;
>               sort hhid;
>          save "$path\work\relpoor_it`pass'.dta", replace;
> *        use "$path/work/cons_real.dta", clear;
> *              gen cr_it0=cr2;
>         {c )-};
>         
> 
> * Comment out if IOF 2008/09. (This code included instead of below code in order to replicate published figures 2002/03). ( END ) ;
> */
> 
> 
> 
> * Comment out if IAF 2002/03. (This code below excluded in order to replicate published figures 2002/03). ( START ) ;
.         if "`pass'"=="1" {c -(} ;
{txt}  3{com}. * Find real income at cut point initially;
.                 use "$path/work/cons_real.dta", clear;
{txt}  4{com}.                                     gen cr_it0=cr2;
{txt}  5{com}.                         cap drop one;
{txt}  6{com}.             gen one=1;
{txt}  7{com}.                                     collapse (p`cutpt') one cr_it`lastpass' [aw=popwt] ;
{txt}  8{com}.                                     rename cr_it`lastpass' cutoff;
{txt}  9{com}.                                     sort one;
{txt} 10{com}.             save `cutoff', replace;
{txt} 11{com}.  * Find relatively poor initially;
.             use "$path/work/cons_real.dta", clear;
{txt} 12{com}.                                                 gen cr_it`lastpass'=cr2;
{txt} 13{com}.             cap drop one;
{txt} 14{com}.             gen one=1;
{txt} 15{com}.                                     sort one;
{txt} 16{com}.             merge one using `cutoff';
{txt} 17{com}.             tab _merge;
{txt} 18{com}.             drop _merge;
{txt} 19{com}.                                     drop one;
{txt} 20{com}.                            gen relpoor`pass'=cr_it`lastpass'<=cutoff;
{txt} 21{com}.             *lab var relpoor`pass' "=1 if in bottom of PCE";
.                                     tab relpoor`pass' [aw=popwt];
{txt} 22{com}.                                     keep hhid cr_it`lastpass' relpoor`pass' popwt;
{txt} 23{com}.             sort hhid;
{txt} 24{com}.         save $path\work\relpoor_it`pass'.dta, replace;
{txt} 25{com}.         {c )-};
{txt} 26{com}. * Comment out if IAF 2002/03. (This code below excluded in order to replicate published figures 2002/03). ( END ) ;
.                 if `pass'>1 {c -(}   ;
{txt} 27{com}. * Find real income at cut point in iteration number `pass' ;
.                 use "$path/work/cons_real_it`lastpass'.dta" , clear;
{txt} 28{com}.                                                 cap drop one;
{txt} 29{com}.                 gen one=1;
{txt} 30{com}.                                                                 *CA modified from hhweight*hhsize to popwt;
.                 collapse (p`cutpt') one cr_it`lastpass' [aw=popwt] ;
{txt} 31{com}.                         rename cr_it`lastpass' cutoff;
{txt} 32{com}.                                                                         sort one;
{txt} 33{com}.         save `cutoff', replace;
{txt} 34{com}.         * Find relatively poor in iteration number `pass' ;
.                 use "$path/work/cons_real_it`lastpass'.dta", clear;
{txt} 35{com}.                                                 cap drop one;
{txt} 36{com}.                 gen one=1;
{txt} 37{com}.                                                 sort one;
{txt} 38{com}.                 merge one using `cutoff';
{txt} 39{com}.                 tab _merge;
{txt} 40{com}.                 drop _merge;
{txt} 41{com}.                                                 drop one;
{txt} 42{com}.                 gen relpoor`pass'=cr_it`lastpass'<=cutoff;
{txt} 43{com}.                 *lab var relpoor`pass' "=1 if in bottom of PCE";
.                                                 tab relpoor`pass' [aw=popwt];
{txt} 44{com}. *CA modified to popwt above and to keep popwt below;
.                 keep hhid cr_it`lastpass' relpoor`pass' popwt;
{txt} 45{com}.                 sort hhid;
{txt} 46{com}.         save "$path\work\relpoor_it`pass'.dta", replace;
{txt} 47{com}.         {c )-};
{txt} 48{com}.         **************************************************************************;
. * Get the consumption file, and select only those codes that are food,
> * using our definition of "food", which includes alcoholic beverages.
> **************************************************************************;
.         use "$path/work/cons_cod.dta", clear;
{txt} 49{com}. *CA modified to merge in work\hhdata.dta for bootstrap;
.     sort hhid;
{txt} 50{com}.     merge hhid using "$path\work\hhdata.dta";
{txt} 51{com}.     tab _m;
{txt} 52{com}.     drop _m;
{txt} 53{com}.         /*
>                 sort product;
>                 merge product using "$path/work/food_cat.dta";
>                 tab _merge;
>                 keep if _merge==3;
>                 drop _merge;
> */
> 
>                                 * Only food transactions ;
.                 keep if food_cat;
{txt} 54{com}.                 sort hhid;
{txt} 55{com}. **************************************************************************;
. * Merge with file that has temporally AND spatially adjusted consumption
> * per capita from the previous iteration, and also identifies those below 
> * the cutoff. Then select only those who are below the cutoff.
> **************************************************************************;
.                 merge hhid using "$path\work\relpoor_it`pass'.dta";
{txt} 56{com}.                 tab _merge;
{txt} 57{com}.                 drop _merge;
{txt} 58{com}.                                 * Keep only transactions by the poor ;
.                 keep if relpoor`pass';
{txt} 59{com}. **************************************************************************;
. * Calculate HH level food shares. Since we're only doing shares here, we can
> * work with the expenditures without doing temporal adjustment.
> **************************************************************************;
.                 gen  food_expenditure = cod_hh_nom3;
{txt} 60{com}.                 *gen  food_expenditure= own_valued + daily_valued + monthly_valued + educ_valued;
.                 egen tot_food_expen= sum (food_expen), by (hhid) ;
{txt} 61{com}.                 count if food_expenditure==.;
{txt} 62{com}.                 count if tot_food_expen==.;
{txt} 63{com}.                 gen food_share= food_expenditure/tot_food_expen;
{txt} 64{com}.                 count if food_share==.;
{txt} 65{com}.                 drop if food_share==.;
{txt} 66{com}.                 sort hhid product;
{txt} 67{com}.                 tempfile foodshares;
{txt} 68{com}.         save `foodshares', replace;
{txt} 69{com}. ********************************************************************************;
. * Now find the total (economy wise, e.g. not by HH) shares by each product in
> * order to select the most important goods in each domain's basket.
> ********************************************************************************;
.                 collapse (mean) hhweight spdomain, by (hhid);
{txt} 70{com}.                 sort hhid ;
{txt} 71{com}.                  collapse (sum) hhweight , by(spdomain);
{txt} 72{com}.                 rename hhweight tothhweight;
{txt} 73{com}.                 tempfile tothhweight;
{txt} 74{com}.                 sort spdomain;
{txt} 75{com}.         save `tothhweight', replace;
{txt} 76{com}.         use `foodshares', clear;
{txt} 77{com}.                 sort spdomain;
{txt} 78{com}.                 merge spdomain using `tothhweight';
{txt} 79{com}.                 tab _merge;
{txt} 80{com}.                 drop _merge;
{txt} 81{com}.                 sort spdomain product;
{txt} 82{com}.                 gen f_share_w`pass'=(food_share*hhweight)/tothhweight;
{txt} 83{com}.                 collapse (sum) f_share_w`pass', by(spdomain product descript);
{txt} 84{com}.                                sort spdomain f_share_w`pass';
{txt} 85{com}.                 by spdomain: gen cumshr`pass'= sum(f_share_w`pass');
{txt} 86{com}.                 count if cumshr`pass'<=.075;
{txt} 87{com}.                 drop if cumshr`pass'<=.075;
{txt} 88{com}.                 lab var f_share_w`pass' "average food share for the 13 spatial domains";
{txt} 89{com}.         save `foodshares', replace;
{txt} 90{com}.                                                 * Number of spatials domains a food product appears ;
.                 gen numreg=1;
{txt} 91{com}.                 collapse (sum) numreg cumshr`pass', by (product descript);
{txt} 92{com}.                 keep product numreg descript;
{txt} 93{com}.                 display _N;
{txt} 94{com}.                 sort product;
{txt} 95{com}.                                 * Include food product labels ;
. *                merge product using "$path\work\products.dta";
. *                tab _merge;
. *                keep if _merge==3;
.                 keep product descript numreg;
{txt} 96{com}.                   sort product;
{txt} 97{com}.                      display _N;
{txt} 98{com}.           save "$path\work\codes_food_basket_flex_it`pass'.dta", replace;
{txt} 99{com}. **************************************************************************;
. **************************************************************************;
. * That is pretty much the part equivalent to "100_food_basket_flex.do",
> * which figures out the food shares for the relevant reference group. Now
> * we figure out the prices with a code stream that is adapted from
> * "110_price_unit_flex.do".
> **************************************************************************;
. **************************************************************************;
. **************************************************************************************
> * Create sorted data set with daily + own expenditure and the matched codes
> **************************************************************************************;
. use "$path/in/cons_cod_trans.dta", clear;
{txt}100{com}. *save "$path/work/cons_cod_trans.dta", replace;
. *drop value   ;
. *drop quantity;
. keep hhid product food_cat valuez quantityz unit;
{txt}101{com}. rename valuez    value;
{txt}102{com}. rename quantityz quantity;
{txt}103{com}. *drop count;
. drop if quantity==0 ;
{txt}104{com}.         tempfile dd_acsort;
{txt}105{com}.         save    `dd_acsort', replace;
{txt}106{com}. /*
>         use "$path\work\daily.dta", clear;
>                 drop days;
>                 sort product;
>                 tempfile dd_acsort;
>         save `dd_acsort', replace;
>         
>         use "$path\work\own.dta", clear;
>                 keep hhid product valued quantityd unit;
>                 rename valued value;
>                 rename quantityd quantity;
>         
>                 *CHECK THE ZEROS IN quantity FOR NOW DELETE;
>                 drop if quantity==0;
>         
>                 append using `dd_acsort';
> */
> 
>                 *CA modified to insert work\hhdata.dta for bootstrap;
.                 sort hhid;
{txt}107{com}.                 merge hhid using "$path\work\hhdata.dta";
{txt}108{com}.                 tab _m;
{txt}109{com}.                  drop if _m==2;
{txt}110{com}.                 drop _m;
{txt}111{com}.                                 sort product;
{txt}112{com}.                 gen count=1;
{txt}113{com}.         save `dd_acsort', replace;
{txt}114{com}.         **************************************************************************;
. * Merge the basket codes with the dd  and own data sets.
> * Drop all codes not a part of the flexible food basket
> **************************************************************************;
.                 merge product using "$path\work\codes_food_basket_flex_it`pass'.dta";
{txt}115{com}.                         tab _merge;
{txt}116{com}.                 drop if _merge~=3;
{txt}117{com}.                 drop _merge;
{txt}118{com}. **************************************************************************************
> * Drop observations where product code, quantity or value information is unavailable
> **************************************************************************************;
.                 drop if product==. | value==. | quantity==.  ;
{txt}119{com}.         **************************************************************************************
> * Convert non-KG quantities (units, liters) into kilograms
> **************************************************************************************;
. *do "$path\new\110a_conversions.do"
> 
> ********************************************************************
> * There remain a few difficult to interpret observations such as liters
> * of fish and liters of pasta. These are dropped.
> ********************************************************************;
. *                $MZ drop if unit~=2;
.         **************************************************************************;
. * Bring in the spdomain and reg_tpi variables, and also the information on
> * relatively poor households.
> **************************************************************************;
.                 preserve;
{txt}120{com}.                                                 * Temporally adjusted expenditure ;
.                         use `contpi', clear;
{txt}121{com}.                                 keep hhid hhweight spdomain reg_tpi survquar tpi_trim cons_pc_tpi ;
{txt}122{com}.                                 sort hhid;
{txt}123{com}.                                 tempfile hhd2;
{txt}124{com}.                         save `hhd2', replace;
{txt}125{com}.                 restore;
{txt}126{com}.                                 compress;
{txt}127{com}.                 sort hhid;
{txt}128{com}.                 merge hhid using `hhd2';
{txt}129{com}.                 tab _merge;
{txt}130{com}.                 drop _merge;
{txt}131{com}.                 sort hhid;
{txt}132{com}.                 merge hhid using "$path\work\relpoor_it`pass'.dta";
{txt}133{com}.                 tab _merge;
{txt}134{com}.                 drop _merge;
{txt}135{com}.                                                 * Keep nominal food transactions by poor people ;
.                 keep if relpoor`pass';
{txt}136{com}.                 drop if product==.;
{txt}137{com}.                                                                 * Temporally deflate transaction values ;
.                 gen value_r=value/tpi_trim;
{txt}138{com}. **************************************************************************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * each spdomain & product combination. This should eliminate outliers
> * that may have an undue influence on the price calculation. 
> **************************************************************************;
.                 gen hhppkg=value_r/quantity;
{txt}139{com}.                 egen lower5=pctile(hhppkg), p(5)  by(spdomain product);
{txt}140{com}.                 egen upper5=pctile(hhppkg), p(95) by(spdomain product);
{txt}141{com}.                 keep if hhppkg>=lower5 & hhppkg<=upper5;
{txt}142{com}. *********************************************************************
> * Note that we do prices in three ways. First, by summing quantity and value 
> * This average price price_uw is thus quantity/value weighted. Second, we
> * calculate the price and take simple means for a transaction weighted
> * price, price_ut. Last we take the median, price_um. But in the end
> * we only use price_unitw
> *********************************************************************;
.                 gen price_ut`pass'=value_r/(quantity*1000);
{txt}143{com}.                 gen price_um`pass'=price_ut;
{txt}144{com}.                 collapse (sum) 
>                         quantity value_r count bswt (mean) price_ut (median) price_um [aw=hhweight], 
>                         by(spdomain product);
{txt}145{com}.                 *Generate weighted price per gram ;
.                 gen price_uw`pass'=value_r/(quantity*1000);
{txt}146{com}.                 drop value_r quantity;
{txt}147{com}.                 sort spdomain product;
{txt}148{com}.                 lab var price_ut`pass' "Average of calculated prices - transaction weighted";
{txt}149{com}.                 lab var price_um`pass' "Median of prices";
{txt}150{com}.                 lab var price_uw`pass' "Value share weighted mean prices";
{txt}151{com}. * Get an idea of the difference between the price measures;
.                 gen ratiotw`pass'=price_ut`pass'/price_uw`pass';
{txt}152{com}.                 gen ratiomw`pass'=price_um`pass'/price_uw`pass';
{txt}153{com}.                 sum ratiotw`pass' ratiomw`pass';
{txt}154{com}.                 sort product;
{txt}155{com}.                 merge product using "$path/work/codes_food_basket_flex_it`pass'.dta";
{txt}156{com}.                 tab _m;
{txt}157{com}.                 count if _merge~=3;
{txt}158{com}.                 drop if _merge~=3;
{txt}159{com}.                 drop _merge;
{txt}160{com}.                 sort product spdomain;
{txt}161{com}.         save "$path\work\price_unit_flex_it`pass'.dta", replace;
{txt}162{com}. **************************************************************************;
. **************************************************************************;
. * That concludes the prices part. Now we move to calculating the food
> * poverty lines, which draws code from "120_povline_flex.do" with very few
> * changes:
> * - The changes facilitate accumulating vectors
> *   of intermediate results across iterations, rather than generating a
> *   bunch of new files.
> **************************************************************************;
. **************************************************************************;
. **************************************************************************;
. * Use the file with the food basket (`foodshares'), which is in shares. 
> * Then merge it with the prices file, and then with the calories file.
> * Along the way, drop those observations where we have no price information
> * or no calorie information, but list them out.
> **************************************************************************;
.         use `foodshares', clear;
{txt}163{com}.                 sort product spdomain;
{txt}164{com}.                 merge product spdomain using "$path\work\price_unit_flex_it`pass'.dta";
{txt}165{com}.                         tab _merge;
{txt}166{com}.                 list product spdomain descript if _merge==1;
{txt}167{com}.                         drop if _merge ~=3;
{txt}168{com}.                 drop _merge;
{txt}169{com}.                 sort product;
{txt}170{com}.                         merge product using "$path\work\calperg.dta";
{txt}171{com}.                 tab _merge;
{txt}172{com}.                                                 * This tells where we are lacking calorie info or are lacking quantity info due to 
>                 * missing price info above;
.                 list product spdomain descript if _merge==1;
{txt}173{com}.                         drop if _merge~=3;
{txt}174{com}.                 drop _merge;
{txt}175{com}.                 sort spdomain f_share_w`pass';
{txt}176{com}.                                 *CA modified to change count bswt;
.                 by spdomain: count if round(bswt)<10;
{txt}177{com}.                                 sum bswt;
{txt}178{com}.                                                 drop if round(bswt) < 10;
{txt}179{com}.                                                                 * Total food share in spatial domain ;
.                 by spdomain: egen baskshr=sum(f_share_w`pass');
{txt}180{com}.                                 * Cumulated food share in spatial domain ;
.                 by spdomain: gen  cumshr =sum(f_share_w`pass');
{txt}181{com}.                 drop if cumshr<=baskshr-.9;
{txt}182{com}.                         drop baskshr;
{txt}183{com}.                 by spdomain: egen baskshr=sum(f_share_w`pass');
{txt}184{com}.                 tabstat baskshr , by(spdomain) st(n mean sd min max);
{txt}185{com}.                                                                 * How many grams in 1 MT exp on food item ;
.                                 gen quan`pass'=f_share_w`pass'/price_uw`pass';
{txt}186{com}.                                 * How many calories in 1 MT exp on food item ;
.                 gen cal_ir`pass'=quan`pass'*calperg;
{txt}187{com}.                                 * how many calories in 1 MT exp in food basket ;
.                 by spdomain: egen calreg=sum(cal_ir);
{txt}188{com}.                         sort spdomain;
{txt}189{com}.                 merge spdomain using "$path\work\calpp.dta";
{txt}190{com}.                 tab _merge;
{txt}191{com}.                 drop _merge;
{txt}192{com}.                                                         * get the expansion factor to hit 95% of calorie requirements ;
.                 gen ratio=.95*calpp/calreg;
{txt}193{com}.                         replace quan`pass'=quan`pass'*ratio;
{txt}194{com}.                 replace cal_ir`pass'=quan`pass'*calperg;
{txt}195{com}.                         sort spdomain product;
{txt}196{com}.                 by spdomain: egen chkcal=sum(cal_ir`pass');
{txt}197{com}.                 replace chkcal=chkcal/.95-calpp ;
{txt}198{com}.                                                 tabstat chkcal , by(spdomain) st(n mean sd min max);
{txt}199{com}.                         gen val_ir`pass'=quan`pass'*price_uw`pass';
{txt}200{com}.                         by spdomain: egen povline_f_flex90_`pass'=sum(val_ir`pass');
{txt}201{com}.                 replace povline_f=povline_f_flex90_`pass'/.9;
{txt}202{com}.                 *drop product96;
. keep product spdomain quan`pass'  price_uw`pass' val_ir`pass' povline_f_flex90_`pass' calpp calperg;
{txt}203{com}.                     save "$path\work\quan_flex_it`pass'.dta", replace;
{txt}204{com}.                         collapse (mean) povline_f_flex90_`pass', by (spdomain);
{txt}205{com}.                                                 keep spdomain povline_f_flex90_`pass';
{txt}206{com}.                 sort spdomain;
{txt}207{com}.                 save "$path\work\povline_food_flex_it`pass'.dta", replace;
{txt}208{com}.         **************************************************************************;
. **************************************************************************;
. * Now comes the part that draws the non-food and total poverty lines,
> * and generates estimates of poverty measures. This is drawn from 
> * "130_povmeas_flex.do" with a few changes.
> **************************************************************************;
. **************************************************************************;
. **************************************************************************
> * Calculate non-food expenditure for HH around the food poverty line
> *
> * Develop a discrete triangular weighted distribution. This gives a
> * weight of  1 to HH at +/- 18-20% from food poverty line, and
> * weight of  2 to HH at +/- 16-18% from food poverty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food poverty line.
> * This weight is called triwt below.
> **************************************************************************;
.         use `contpi', clear;
{txt}209{com}.                 sort spdomain;
{txt}210{com}.                 merge spdomain using "$path/work/povline_food_flex_it`pass'.dta";
{txt}211{com}.                 tab _merge;
{txt}212{com}.                 drop _merge;
{txt}213{com}.                 gen triwt=0 ;
{txt}214{com}.                 replace triwt = 11 - round(50*abs(cons_pc_tpi/povline_f_flex90_`pass'-1)+0.5)
>                 if abs(cons_pc_tpi/povline_f_flex90_`pass'-1)<=0.2;
{txt}215{com}.                                                                 * Nearness to poverty line and population weights ;
.                 gen tripopwt=triwt*hhweight*hhsize;
{txt}216{com}.                                                 preserve;
{txt}217{com}.                         collapse (mean) nf_pc_nom [aw=tripopwt] ,
>                                 by(spdomain);
{txt}218{com}.                         rename nf_pc_nom povline_nf_flex`pass';
{txt}219{com}.                         lab var povline_nf_flex`pass' "Nonfood poverty line. Flexible bundle";
{txt}220{com}.                         tempfile znf;
{txt}221{com}.                         sort spdomain;
{txt}222{com}.                         save `znf', replace;
{txt}223{com}.                                                                 restore;
{txt}224{com}.                                 sort spdomain;
{txt}225{com}.                 merge spdomain using `znf';
{txt}226{com}.                 tab _merge;
{txt}227{com}.                 drop _merge;
{txt}228{com}. **************************************************************************
> * Poverty line is the sum of the food and non-food poverty lines
> **************************************************************************;
.                 gen povline_flex`pass'=povline_f_flex90_`pass' + povline_nf_flex`pass';
{txt}229{com}. keep spdomain povline_flex`pass';
{txt}230{com}.                 sort spdomain;
{txt}231{com}.         save "$path\work\povlines_it`pass'.dta", replace;
{txt}232{com}. **************************************************************************;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first: we just use the first stratum.
> **************************************************************************;
.         use `contpi', clear;
{txt}233{com}.                 sort spdomain;
{txt}234{com}.                 merge spdomain using "$path\work\povlines_it`pass'.dta";
{txt}235{com}.                 tab _merge;
{txt}236{com}.                 drop _merge;
{txt}237{com}.                 gen cr= cons_pc_tpi ;
{txt}238{com}.                 gen linpob`pass'=povline_flex`pass';
{txt}239{com}.                 qui sum linpob`pass' if spdomain==1, meanonly;
{txt}240{com}.                 global spi_base=r(mean);
{txt}241{com}.                 gen spi`pass'=linpob`pass'/$spi_base;
{txt}242{com}.                 gen cr_it`pass'=cr/spi`pass';
{txt}243{com}.                 qui sum cr [aw=hhweight*hhsize];
{txt}244{com}.                 global sumcr=r(sum);
{txt}245{com}.                 qui sum cr_it`pass' [aw=hhweight*hhsize];
{txt}246{com}.                 global sumcr2=r(sum);
{txt}247{com}.                 replace spi`pass'=spi`pass'*$sumcr2/$sumcr;
{txt}248{com}.                 gen linpobr`pass'=linpob`pass'/spi`pass';
{txt}249{com}.                 replace cr_it`pass'=cr/spi`pass';
{txt}250{com}.                 su cr cr_it`pass' linpob`pass' linpobr`pass' [aw=hhweight*hhsize];
{txt}251{com}.                 lab var cr "Temporally-adjusted cons pc";
{txt}252{com}.                 lab var cr_it`pass' "Spatially & temporally adjusted cons pc";
{txt}253{com}.                 lab var linpob`pass' "Poverty line";
{txt}254{com}.                 lab var linpobr`pass' "Real poverty line";
{txt}255{com}.                 lab var spi`pass' "Spatial price index";
{txt}256{com}.                 gen linpob=linpob`pass';
{txt}257{com}. **************************************************************************
> * calculate poverty measures with the flexible food bundle
> **************************************************************************;
.                 gen h=100 if cr_it`pass'<=linpobr`pass' & linpobr`pass'~=. & cr_it`pass'~=.;
{txt}258{com}.                 replace  h   = 0 if cr_it`pass' > linpobr`pass' & linpobr`pass'~=. & cr_it`pass'~=.;
{txt}259{com}.                 gen      pg  = ((linpobr`pass' - cr_it`pass' )/linpobr`pass') *100;
{txt}260{com}.                 replace  pg  = 0             if h==0;
{txt}261{com}.                 gen      spg = ((( linpobr`pass' - cr_it`pass' )/ linpobr`pass' )^2)*100;
{txt}262{com}.                 replace  spg = 0             if h==0;
{txt}263{com}.                 gen h_flex`pass'  =h;
{txt}264{com}.                 gen pg_flex`pass' =pg;
{txt}265{com}.                 gen spg_flex`pass'=spg;
{txt}266{com}.                                 lab var h_flex`pass'   "Poverty headcount. Flexible bundle";
{txt}267{com}.                 lab var pg_flex`pass'  "Poverty gap. Flexible bundle";
{txt}268{com}.                 lab var spg_flex`pass' "Squared poverty gap. Flexible bundle";
{txt}269{com}.                 gen popwt=hhsize*hhweight;
{txt}270{com}.                         * Stata 10.1 syntax ;
.                         svyset , clear;
{txt}271{com}.                         svyset [pweight=popwt] , str(strata) psu(psu);
{txt}272{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass';
{txt}273{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass' , over(rural);
{txt}274{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass' , over(strata);
{txt}275{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass' , over(strata rural);
{txt}276{com}.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass' , over(spdomain);
{txt}277{com}. *preserve;
. keep hhid popwt cr_it`pass' h_flex`pass' pg_flex`pass' spg_flex`pass' rural news reg_tpi strata spdomain;
{txt}278{com}.                 compress;
{txt}279{com}.                 sort hhid;
{txt}280{com}.         save "$path/work/cons_real_it`pass'.dta" , replace;
{txt}281{com}. *restore;
.                                 * New cutoff point (percentile) to use in next iteration is equal to the poverty ;
.                 * rate in this iteration ;
.                                                 sum h_flex`pass' [aw=popwt] ;
{txt}282{com}.                                 * Comment out next line for IAF 2002/03 in order to replicate official figures ( START );
.                 * URB: In this case, we just use the poorest 50% as there are too few actually poor to calculate the bundle and prices..;
.                 local cutpt= $tpi_bottom;
{txt}283{com}. *               local cutpt= round(r(mean));
.                 * Comment out next line for IAF 2002/03 in order to replicate official figures ( END );
. *       save foodshares tempfile to disk;
.         use `foodshares', clear;
{txt}284{com}.         save "$path/work/foodshares_it`pass'.dta", replace;
{txt}285{com}.         local lastpass = `pass';
{txt}286{com}.         local pass = `pass' + 1;
{txt}287{com}.         {c )-};
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}3,385.27023       49.97       49.97
{txt}          1 {c |}{res}3,389.72977       50.03      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it1.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(236943 observations deleted)
{res}    0
    0
{txt}(1056 missing values generated)
{res} 1056
{txt}(1056 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000004.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000004.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    174,046      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    174,046      100.00
  157
{txt}(157 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
44
44
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it1.dta saved
(4392 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         14        0.02        0.02
{txt}          3 {c |}{res}     85,204       99.98      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,218      100.00
{txt}(14 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     10,946       12.85       12.85
{txt}          3 {c |}{res}     74,258       87.15      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,204      100.00
{txt}(10946 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000007.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000007.tmp saved
product was {res}float{txt} now {res}int
{txt}unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         31        0.04        0.04
{txt}          3 {c |}{res}     74,258       99.96      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,289      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     74,289      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,289      100.00
{txt}(45609 observations deleted)
(12 observations deleted)
(2152 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw1 {c |}{res}       217    1.251191     .448038   .8475722   3.914069
{txt}{space 4}ratiomw1 {c |}{res}       217    1.074148    .3540401    .245101   3.711278
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        217      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        217      100.00
    0
{txt}(0 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it1.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         66       30.41       30.41
{txt}          3 {c |}{res}        151       69.59      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        217      100.00
{txt}(66 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         18       10.65       10.65
{txt}          3 {c |}{res}        151       89.35      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        169      100.00
{txt}(18 observations deleted)

{hline}
-> spdomain = Central rural
{res}    1
{txt}{hline}
-> spdomain = Central urban
{res}    3
{txt}{hline}
-> spdomain = Eastern
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}       151    164.1457    155.3981          3       1009
{txt}(4 observations deleted)
(13 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27  .9029499         0  .9029499  .9029499
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       26  .8966053         0  .8966053  .8966053
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27  .9070574         0  .9070574  .9070574
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26  .9010552         0  .9010552  .9010552
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       28  .9008005         0  .9008005  .9008005
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      134  .9017297  .0033866  .8966053  .9070574
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        134      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        134      100.00
{txt}(134 real changes made)
(128 real changes made)
(134 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27 -.0000771         0 -.0000771 -.0000771
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       26 -.0000128         0 -.0000128 -.0000128
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27 -.0000899         0 -.0000899 -.0000899
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26 -.0001156         0 -.0001156 -.0001156
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       28  .0001285         0  .0001285  .0001285
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      134 -.0000317  .0000892 -.0001156  .0001285
{txt}{hline 14}{c BT}{hline 50}
(134 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it1.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it1.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(345 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000009.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000009.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it1.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it1.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(6775 real changes made)
(6775 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9416.597   395671.8   82.64046   8.12e+07
{txt}{space 6}cr_it1 {c |}{res}    6775   200636622    9416.597   340357.7   79.80023   6.97e+07
{txt}{space 5}linpob1 {c |}{res}    6775   200636622    986.9416   149.2447   804.5524   1295.862
{txt}{space 4}linpobr1 {c |}{res}    6775   200636622    1113.147    .000061   1113.147   1113.147
{txt}(5887 missing values generated)
(5887 real changes made)
(5887 real changes made)
(5887 real changes made)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex1 {c |}{col 14}{res}{space 2} 12.07186{col 26}{space 2} .8211121{col 37}{space 5} 10.45972{col 51}{space 3} 13.68399
{txt}{space 4}pg_flex1 {c |}{col 14}{res}{space 2} 3.126904{col 26}{space 2} .2439756{col 37}{space 5} 2.647894{col 51}{space 3} 3.605915
{txt}{space 3}spg_flex1 {c |}{col 14}{res}{space 2} 1.280613{col 26}{space 2} .1306726{col 37}{space 5} 1.024057{col 51}{space 3}  1.53717
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex1      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2}  3.09348{col 26}{space 2} 1.002434{col 37}{space 5} 1.125347{col 51}{space 3} 5.061614
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 13.44326{col 26}{space 2}  .909319{col 37}{space 5} 11.65794{col 51}{space 3} 15.22857
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex1     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .5691306{col 26}{space 2}  .155945{col 37}{space 5} .2629553{col 51}{space 3} .8753059
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 3.517591{col 26}{space 2} .2758792{col 37}{space 5} 2.975942{col 51}{space 3} 4.059239
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex1    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2}  .156755{col 26}{space 2} .0509944{col 37}{space 5}  .056635{col 51}{space 3}  .256875
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.452277{col 26}{space 2} .1493321{col 37}{space 5} 1.159085{col 51}{space 3} 1.745469
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

      {txt}KAMPALA: strata = {res}KAMPALA
    {txt}_subpop_2: strata = {res}CENTRAL 1
    {txt}_subpop_3: strata = {res}CENTRAL 2
    {txt}_subpop_4: strata = {res}EAST CENTRAL
      {txt}EASTERN: strata = {res}EASTERN
    {txt}_subpop_6: strata = {res}MID-NOTHERN
    {txt}_subpop_7: strata = {res}NORTH-EAST
    {txt}_subpop_8: strata = {res}WEST-NILE
    {txt}_subpop_9: strata = {res}MID-WESTERN
   {txt}_subpop_10: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex1      {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} 4.167031{col 26}{space 2} 2.378903{col 37}{space 5}-.5035977{col 51}{space 3}  8.83766
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 4.687181{col 26}{space 2} 1.414427{col 37}{space 5}  1.91016{col 51}{space 3} 7.464201
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 7.466226{col 26}{space 2} 1.867819{col 37}{space 5} 3.799037{col 51}{space 3} 11.13341
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 8.127774{col 26}{space 2} 1.612551{col 37}{space 5} 4.961766{col 51}{space 3} 11.29378
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 11.80657{col 26}{space 2} 2.253825{col 37}{space 5} 7.381518{col 51}{space 3} 16.23163
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  12.6968{col 26}{space 2} 2.422978{col 37}{space 5} 7.939638{col 51}{space 3} 17.45397
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 70.68732{col 26}{space 2} 6.344248{col 37}{space 5} 58.23131{col 51}{space 3} 83.14332
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 14.91821{col 26}{space 2} 4.568717{col 37}{space 5} 5.948203{col 51}{space 3} 23.88822
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 15.53387{col 26}{space 2} 2.493286{col 37}{space 5} 10.63867{col 51}{space 3} 20.42907
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 8.565702{col 26}{space 2} 1.297511{col 37}{space 5} 6.018228{col 51}{space 3} 11.11318
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex1     {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .6018409{col 26}{space 2} .2806061{col 37}{space 5} .0509117{col 51}{space 3}  1.15277
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 1.010567{col 26}{space 2} .4124794{col 37}{space 5}  .200724{col 51}{space 3}  1.82041
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.476493{col 26}{space 2}  .430482{col 37}{space 5} .6313045{col 51}{space 3} 2.321681
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 1.403492{col 26}{space 2}  .283686{col 37}{space 5} .8465165{col 51}{space 3} 1.960468
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 2.179866{col 26}{space 2} .4358687{col 37}{space 5} 1.324101{col 51}{space 3}  3.03563
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 4.130648{col 26}{space 2} .9415078{col 37}{space 5} 2.282135{col 51}{space 3} 5.979161
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 29.97953{col 26}{space 2} 3.635916{col 37}{space 5} 22.84094{col 51}{space 3} 37.11812
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 2.229238{col 26}{space 2} .4344902{col 37}{space 5}  1.37618{col 51}{space 3} 3.082296
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2}  4.48949{col 26}{space 2} .8965312{col 37}{space 5} 2.729282{col 51}{space 3} 6.249699
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 1.689167{col 26}{space 2} .3324043{col 37}{space 5}  1.03654{col 51}{space 3} 2.341795
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex1    {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .1262102{col 26}{space 2} .0718565{col 37}{space 5}-.0148695{col 51}{space 3} .2672899
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2}  .325635{col 26}{space 2}  .178179{col 37}{space 5}-.0241934{col 51}{space 3} .6754635
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .4549592{col 26}{space 2} .1506456{col 37}{space 5} .1591886{col 51}{space 3} .7507297
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .4290395{col 26}{space 2} .1033595{col 37}{space 5} .2261083{col 51}{space 3} .6319707
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} .5661022{col 26}{space 2} .1102924{col 37}{space 5} .3495592{col 51}{space 3} .7826453
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.867352{col 26}{space 2} .5188536{col 37}{space 5} .8486593{col 51}{space 3} 2.886046
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 16.00189{col 26}{space 2} 2.301123{col 37}{space 5} 11.48397{col 51}{space 3}  20.5198
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .6711484{col 26}{space 2} .1940692{col 37}{space 5}  .290122{col 51}{space 3} 1.052175
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 1.901125{col 26}{space 2} .5303656{col 37}{space 5} .8598298{col 51}{space 3} 2.942421
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .5145209{col 26}{space 2}  .145442{col 37}{space 5} .2289668{col 51}{space 3} .8000751
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

         {txt}Over: strata rural
    _subpop_1: {res}KAMPALA Urban
    {txt}_subpop_2: {res}CENTRAL 1 Urban
    {txt}_subpop_3: {res}CENTRAL 1 Rural
    {txt}_subpop_4: {res}CENTRAL 2 Urban
    {txt}_subpop_5: {res}CENTRAL 2 Rural
    {txt}_subpop_6: {res}EAST CENTRAL Urban
    {txt}_subpop_7: {res}EAST CENTRAL Rural
    {txt}_subpop_8: {res}EASTERN Urban
    {txt}_subpop_9: {res}EASTERN Rural
   {txt}_subpop_10: {res}MID-NOTHERN Urban
   {txt}_subpop_11: {res}MID-NOTHERN Rural
   {txt}_subpop_12: {res}NORTH-EAST Urban
   {txt}_subpop_13: {res}NORTH-EAST Rural
   {txt}_subpop_14: {res}WEST-NILE Urban
   {txt}_subpop_15: {res}WEST-NILE Rural
   {txt}_subpop_16: {res}MID-WESTERN Urban
   {txt}_subpop_17: {res}MID-WESTERN Rural
   {txt}_subpop_18: {res}SOUTH-WESTERN Urban
   {txt}_subpop_19: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex1      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 4.167031{col 26}{space 2} 2.378903{col 37}{space 5}-.5035977{col 51}{space 3}  8.83766
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 2.604401{col 26}{space 2} 1.859877{col 37}{space 5}-1.047195{col 51}{space 3} 6.255998
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 5.219631{col 26}{space 2} 1.655129{col 37}{space 5} 1.970027{col 51}{space 3} 8.469236
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 2.403186{col 26}{space 2} 1.706288{col 37}{space 5}-.9468601{col 51}{space 3} 5.753233
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 8.511507{col 26}{space 2} 2.164837{col 37}{space 5} 4.261165{col 51}{space 3} 12.76185
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 8.582742{col 26}{space 2} 1.691107{col 37}{space 5}   5.2625{col 51}{space 3} 11.90298
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 3.705768{col 26}{space 2} 2.352816{col 37}{space 5}-.9136424{col 51}{space 3} 8.325178
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 12.44788{col 26}{space 2}  2.37598{col 37}{space 5} 7.782995{col 51}{space 3} 17.11278
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 14.08018{col 26}{space 2} 2.606576{col 37}{space 5} 8.962552{col 51}{space 3} 19.19781
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7603675{col 51}{space 3} 14.42367
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 73.05174{col 26}{space 2} 6.462656{col 37}{space 5} 60.36326{col 51}{space 3} 85.74022
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} 4.767413{col 26}{space 2}  4.38237{col 37}{space 5} -3.83673{col 51}{space 3} 13.37156
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 16.42196{col 26}{space 2} 4.948369{col 37}{space 5} 6.706559{col 51}{space 3} 26.13736
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 6.107057{col 26}{space 2}  6.00618{col 37}{space 5}-5.685199{col 51}{space 3} 17.89931
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 16.12309{col 26}{space 2}  2.58123{col 37}{space 5} 11.05522{col 51}{space 3} 21.19095
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 9.002203{col 26}{space 2} 1.347625{col 37}{space 5} 6.356338{col 51}{space 3} 11.64807
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex1     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .6018409{col 26}{space 2} .2806061{col 37}{space 5} .0509117{col 51}{space 3}  1.15277
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .4430265{col 26}{space 2} .3644822{col 37}{space 5} -.272581{col 51}{space 3} 1.158634
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.155656{col 26}{space 2} .4982427{col 37}{space 5}  .177429{col 51}{space 3} 2.133882
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .6128374{col 26}{space 2} .4276291{col 37}{space 5}-.2267498{col 51}{space 3} 1.452425
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.654797{col 26}{space 2} .5035542{col 37}{space 5} .6661424{col 51}{space 3} 2.643453
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 1.482056{col 26}{space 2} .2987972{col 37}{space 5}  .895411{col 51}{space 3}   2.0687
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 1.005186{col 26}{space 2} .6345417{col 37}{space 5}-.2406436{col 51}{space 3} 2.251016
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 2.272861{col 26}{space 2} .4607755{col 37}{space 5} 1.368195{col 51}{space 3} 3.177526
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 4.580703{col 26}{space 2} 1.022901{col 37}{space 5} 2.572386{col 51}{space 3}  6.58902
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2}  5.05295{col 26}{space 2} 2.860079{col 37}{space 5}-.5623967{col 51}{space 3}  10.6683
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2}  30.9025{col 26}{space 2} 3.755212{col 37}{space 5} 23.52969{col 51}{space 3} 38.27531
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .4071471{col 26}{space 2} .3686013{col 37}{space 5}-.3165476{col 51}{space 3} 1.130842
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 2.499164{col 26}{space 2} .4876904{col 37}{space 5} 1.541655{col 51}{space 3} 3.456673
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 1.153102{col 26}{space 2} 1.134055{col 37}{space 5}-1.073449{col 51}{space 3} 3.379653
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 4.698029{col 26}{space 2} .9351123{col 37}{space 5} 2.862072{col 51}{space 3} 6.533985
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 1.775246{col 26}{space 2}  .346993{col 37}{space 5} 1.093976{col 51}{space 3} 2.456516
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex1    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .1262102{col 26}{space 2} .0718565{col 37}{space 5}-.0148695{col 51}{space 3} .2672899
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0863861{col 26}{space 2} .0799939{col 37}{space 5}-.0706701{col 51}{space 3} .2434424
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .3867977{col 26}{space 2} .2193717{col 37}{space 5}-.0439067{col 51}{space 3}  .817502
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .1992658{col 26}{space 2} .1429841{col 37}{space 5}-.0814625{col 51}{space 3} .4799941
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .5077479{col 26}{space 2} .1773066{col 37}{space 5} .1596323{col 51}{space 3} .8558635
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .4530559{col 26}{space 2}   .10902{col 37}{space 5} .2390111{col 51}{space 3} .6671006
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .2735389{col 26}{space 2} .1722445{col 37}{space 5} -.064638{col 51}{space 3} .6117158
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .5892634{col 26}{space 2}   .11673{col 37}{space 5} .3600811{col 51}{space 3} .8184457
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2}  2.07081{col 26}{space 2} .5678711{col 37}{space 5} .9558781{col 51}{space 3} 3.185742
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 3.737353{col 26}{space 2} 2.115422{col 37}{space 5}-.4159699{col 51}{space 3} 7.890676
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 16.45601{col 26}{space 2} 2.384544{col 37}{space 5} 11.77431{col 51}{space 3} 21.13772
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .0400301{col 26}{space 2} .0358629{col 37}{space 5}-.0303815{col 51}{space 3} .1104417
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} .7646429{col 26}{space 2} .2262934{col 37}{space 5} .3203489{col 51}{space 3} 1.208937
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} .2957981{col 26}{space 2} .2909121{col 37}{space 5}-.2753652{col 51}{space 3} .8669615
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 2.001465{col 26}{space 2} .5562213{col 37}{space 5} .9094056{col 51}{space 3} 3.093524
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} .5407404{col 26}{space 2}   .15238{col 37}{space 5} .2415646{col 51}{space 3} .8399162
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

    {txt}_subpop_1: spdomain = {res}Central rural
    {txt}_subpop_2: spdomain = {res}Central urban
      {txt}Eastern: spdomain = {res}Eastern
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex1      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 6.877505{col 26}{space 2} 1.381672{col 37}{space 5} 4.164794{col 51}{space 3} 9.590216
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 3.384492{col 26}{space 2} 1.450191{col 37}{space 5}  .537255{col 51}{space 3} 6.231729
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 10.15345{col 26}{space 2} 1.452561{col 37}{space 5} 7.301557{col 51}{space 3} 13.00534
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 22.83015{col 26}{space 2} 2.194077{col 37}{space 5}  18.5224{col 51}{space 3}  27.1379
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 12.15117{col 26}{space 2} 1.472407{col 37}{space 5} 9.260317{col 51}{space 3} 15.04203
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex1     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.407036{col 26}{space 2} .3554693{col 37}{space 5} .7091243{col 51}{space 3} 2.104948
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .5628675{col 26}{space 2} .2022758{col 37}{space 5} .1657285{col 51}{space 3} .9600064
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2}  1.83099{col 26}{space 2} .2765017{col 37}{space 5}  1.28812{col 51}{space 3} 2.373861
{txt}{space 4}Northern {c |}{col 14}{res}{space 2}  7.67136{col 26}{space 2} .8918584{col 37}{space 5} 5.920326{col 51}{space 3} 9.422393
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 3.130073{col 26}{space 2}  .512863{col 37}{space 5} 2.123142{col 51}{space 3} 4.137005
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex1    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4477113{col 26}{space 2} .1409541{col 37}{space 5} .1709685{col 51}{space 3} .7244542
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .1314229{col 26}{space 2} .0536291{col 37}{space 5}   .02613{col 51}{space 3} .2367157
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2}  .504511{col 26}{space 2} .0770385{col 37}{space 5} .3532572{col 51}{space 3} .6557647
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 3.750636{col 26}{space 2} .5236829{col 37}{space 5} 2.722461{col 51}{space 3} 4.778811
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 1.227998{col 26}{space 2} .2965709{col 37}{space 5} .6457244{col 51}{space 3} 1.810271
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}h_flex1 was {res}float{txt} now {res}byte
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it1.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex1 {c |}{res}    6775   200636622    12.07186    32.5824          0        100
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it1.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor2 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 3,383.9009       49.95       49.95
{txt}          1 {c |}{res} 3,391.0991       50.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it2.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(239636 observations deleted)
{res}    0
    0
{txt}(961 missing values generated)
{res}  961
{txt}(961 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000a.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000a.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000b.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000b.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    171,448      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    171,448      100.00
  154
{txt}(154 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000a.tmp saved
45
45
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it2.dta saved
(4392 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         14        0.02        0.02
{txt}          3 {c |}{res}     85,204       99.98      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,218      100.00
{txt}(14 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     10,440       12.25       12.25
{txt}          3 {c |}{res}     74,764       87.75      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,204      100.00
{txt}(10440 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000e.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000e.tmp saved
product was {res}float{txt} now {res}int
{txt}unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         31        0.04        0.04
{txt}          3 {c |}{res}     74,764       99.96      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,795      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     74,795      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,795      100.00
{txt}(46445 observations deleted)
(11 observations deleted)
(2128 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw2 {c |}{res}       220    1.299956    .5770647   .9367496   5.086008
{txt}{space 4}ratiomw2 {c |}{res}       220    1.094258    .4340351          0   4.571821
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        220      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        220      100.00
    0
{txt}(0 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it2.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         71       32.27       32.27
{txt}          3 {c |}{res}        149       67.73      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        220      100.00
{txt}(71 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         17       10.24       10.24
{txt}          3 {c |}{res}        149       89.76      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        166      100.00
{txt}(17 observations deleted)

{hline}
-> spdomain = Central rural
{res}    1
{txt}{hline}
-> spdomain = Central urban
{res}    3
{txt}{hline}
-> spdomain = Eastern
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}       149    163.3221    159.2556          3       1013
{txt}(4 observations deleted)
(13 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27  .9016237         0  .9016237  .9016237
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       24   .887368         0   .887368   .887368
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27  .9049115         0  .9049115  .9049115
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26  .9009634         0  .9009634  .9009634
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       28  .9012133         0  .9012133  .9012133
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      132  .8994872  .0059146   .887368  .9049115
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        132      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        132      100.00
{txt}(132 real changes made)
(126 real changes made)
(132 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27 -.0000771         0 -.0000771 -.0000771
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       24 -.0000128         0 -.0000128 -.0000128
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27 -.0000899         0 -.0000899 -.0000899
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26  .0001413         0  .0001413  .0001413
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       28  .0001285         0  .0001285  .0001285
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      132  .0000186  .0001003 -.0000899  .0001413
{txt}{hline 14}{c BT}{hline 50}
(132 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it2.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it2.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(328 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000g.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000g.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it2.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it2.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(6775 real changes made)
(6775 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9416.597   395671.8   82.64046   8.12e+07
{txt}{space 6}cr_it2 {c |}{res}    6775   200636622    9416.597   353051.3   76.14498   7.23e+07
{txt}{space 5}linpob2 {c |}{res}    6775   200636622    957.3001   141.4629    804.249   1185.045
{txt}{space 4}linpobr2 {c |}{res}    6775   200636622    1056.399   .0000516   1056.399   1056.399
{txt}(5917 missing values generated)
(5917 real changes made)
(5917 real changes made)
(5917 real changes made)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex2 {c |}{col 14}{res}{space 2} 11.03792{col 26}{space 2}  .798673{col 37}{space 5} 9.469841{col 51}{space 3}   12.606
{txt}{space 4}pg_flex2 {c |}{col 14}{res}{space 2} 2.946653{col 26}{space 2} .2376808{col 37}{space 5} 2.480002{col 51}{space 3} 3.413305
{txt}{space 3}spg_flex2 {c |}{col 14}{res}{space 2} 1.220436{col 26}{space 2} .1295978{col 37}{space 5} .9659893{col 51}{space 3} 1.474882
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex2      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} 2.143004{col 26}{space 2} .6487767{col 37}{space 5} .8692255{col 51}{space 3} 3.416782
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 12.39657{col 26}{space 2} .8877841{col 37}{space 5} 10.65354{col 51}{space 3}  14.1396
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex2     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .4032605{col 26}{space 2} .1245237{col 37}{space 5} .1587765{col 51}{space 3} .6477446
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 3.335143{col 26}{space 2} .2690595{col 37}{space 5} 2.806884{col 51}{space 3} 3.863402
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex2    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2}  .111714{col 26}{space 2} .0426182{col 37}{space 5} .0280393{col 51}{space 3} .1953887
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.389787{col 26}{space 2} .1482838{col 37}{space 5} 1.098653{col 51}{space 3}  1.68092
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

      {txt}KAMPALA: strata = {res}KAMPALA
    {txt}_subpop_2: strata = {res}CENTRAL 1
    {txt}_subpop_3: strata = {res}CENTRAL 2
    {txt}_subpop_4: strata = {res}EAST CENTRAL
      {txt}EASTERN: strata = {res}EASTERN
    {txt}_subpop_6: strata = {res}MID-NOTHERN
    {txt}_subpop_7: strata = {res}NORTH-EAST
    {txt}_subpop_8: strata = {res}WEST-NILE
    {txt}_subpop_9: strata = {res}MID-WESTERN
   {txt}_subpop_10: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex2      {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} 1.536145{col 26}{space 2} .8756774{col 37}{space 5}-.1831199{col 51}{space 3} 3.255409
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 4.596846{col 26}{space 2} 1.414618{col 37}{space 5}  1.81945{col 51}{space 3} 7.374241
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 6.936931{col 26}{space 2} 1.852727{col 37}{space 5} 3.299373{col 51}{space 3} 10.57449
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 5.450948{col 26}{space 2} 1.171204{col 37}{space 5}  3.15146{col 51}{space 3} 7.750436
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2}  9.28854{col 26}{space 2} 2.149875{col 37}{space 5} 5.067575{col 51}{space 3}  13.5095
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  12.6968{col 26}{space 2} 2.422978{col 37}{space 5} 7.939638{col 51}{space 3} 17.45397
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 70.68732{col 26}{space 2} 6.344248{col 37}{space 5} 58.23131{col 51}{space 3} 83.14332
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 14.91821{col 26}{space 2} 4.568717{col 37}{space 5} 5.948203{col 51}{space 3} 23.88822
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2}   15.421{col 26}{space 2} 2.497656{col 37}{space 5} 10.51722{col 51}{space 3} 20.32478
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 8.512285{col 26}{space 2} 1.293816{col 37}{space 5} 5.972066{col 51}{space 3}  11.0525
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex2     {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .2953662{col 26}{space 2} .1929501{col 37}{space 5}-.0834631{col 51}{space 3} .6741954
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .9403086{col 26}{space 2} .4035669{col 37}{space 5} .1479639{col 51}{space 3} 1.732653
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.400256{col 26}{space 2} .4194401{col 37}{space 5} .5767471{col 51}{space 3} 2.223766
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 1.090376{col 26}{space 2} .2363367{col 37}{space 5} .6263629{col 51}{space 3} 1.554388
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 1.652977{col 26}{space 2} .3358824{col 37}{space 5} .9935211{col 51}{space 3} 2.312433
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 4.127417{col 26}{space 2} .9410278{col 37}{space 5} 2.279847{col 51}{space 3} 5.974988
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 29.96418{col 26}{space 2} 3.635036{col 37}{space 5} 22.82732{col 51}{space 3} 37.10104
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 2.224452{col 26}{space 2} .4341273{col 37}{space 5} 1.372107{col 51}{space 3} 3.076798
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 4.429747{col 26}{space 2} .8897274{col 37}{space 5} 2.682897{col 51}{space 3} 6.176596
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 1.651767{col 26}{space 2} .3290279{col 37}{space 5} 1.005769{col 51}{space 3} 2.297765
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex2    {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .0639966{col 26}{space 2} .0438279{col 37}{space 5} -.022053{col 51}{space 3} .1500463
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3044591{col 26}{space 2} .1739223{col 37}{space 5}-.0370119{col 51}{space 3}   .64593
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}  .426892{col 26}{space 2} .1453941{col 37}{space 5} .1414318{col 51}{space 3} .7123521
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .3223293{col 26}{space 2} .0865433{col 37}{space 5} .1524143{col 51}{space 3} .4922444
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2}  .389398{col 26}{space 2} .0792776{col 37}{space 5} .2337479{col 51}{space 3}  .545048
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.865646{col 26}{space 2} .5185519{col 37}{space 5} .8475454{col 51}{space 3} 2.883747
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 15.99135{col 26}{space 2} 2.300136{col 37}{space 5} 11.47536{col 51}{space 3} 20.50733
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .6699748{col 26}{space 2} .1939304{col 37}{space 5} .2892207{col 51}{space 3} 1.050729
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 1.873146{col 26}{space 2} .5269817{col 37}{space 5} .8384948{col 51}{space 3} 2.907798
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .5018799{col 26}{space 2} .1436653{col 37}{space 5} .2198141{col 51}{space 3} .7839456
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

         {txt}Over: strata rural
    _subpop_1: {res}KAMPALA Urban
    {txt}_subpop_2: {res}CENTRAL 1 Urban
    {txt}_subpop_3: {res}CENTRAL 1 Rural
    {txt}_subpop_4: {res}CENTRAL 2 Urban
    {txt}_subpop_5: {res}CENTRAL 2 Rural
    {txt}_subpop_6: {res}EAST CENTRAL Urban
    {txt}_subpop_7: {res}EAST CENTRAL Rural
    {txt}_subpop_8: {res}EASTERN Urban
    {txt}_subpop_9: {res}EASTERN Rural
   {txt}_subpop_10: {res}MID-NOTHERN Urban
   {txt}_subpop_11: {res}MID-NOTHERN Rural
   {txt}_subpop_12: {res}NORTH-EAST Urban
   {txt}_subpop_13: {res}NORTH-EAST Rural
   {txt}_subpop_14: {res}WEST-NILE Urban
   {txt}_subpop_15: {res}WEST-NILE Rural
   {txt}_subpop_16: {res}MID-WESTERN Urban
   {txt}_subpop_17: {res}MID-WESTERN Rural
   {txt}_subpop_18: {res}SOUTH-WESTERN Urban
   {txt}_subpop_19: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex2      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.536145{col 26}{space 2} .8756774{col 37}{space 5}-.1831199{col 51}{space 3} 3.255409
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 2.160705{col 26}{space 2} 1.755188{col 37}{space 5}-1.285349{col 51}{space 3} 5.606759
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 5.219631{col 26}{space 2} 1.655129{col 37}{space 5} 1.970027{col 51}{space 3} 8.469236
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 2.008124{col 26}{space 2} 1.395066{col 37}{space 5} -.730883{col 51}{space 3} 4.747132
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2}   7.9545{col 26}{space 2} 2.158816{col 37}{space 5} 3.715979{col 51}{space 3} 12.19302
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 5.756075{col 26}{space 2} 1.232853{col 37}{space 5} 3.335549{col 51}{space 3} 8.176601
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 3.705768{col 26}{space 2} 2.352816{col 37}{space 5}-.9136424{col 51}{space 3} 8.325178
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 9.730508{col 26}{space 2} 2.280927{col 37}{space 5} 5.252241{col 51}{space 3} 14.20877
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 14.08018{col 26}{space 2} 2.606576{col 37}{space 5} 8.962552{col 51}{space 3} 19.19781
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7603675{col 51}{space 3} 14.42367
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 73.05174{col 26}{space 2} 6.462656{col 37}{space 5} 60.36326{col 51}{space 3} 85.74022
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} 4.767413{col 26}{space 2}  4.38237{col 37}{space 5} -3.83673{col 51}{space 3} 13.37156
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 16.42196{col 26}{space 2} 4.948369{col 37}{space 5} 6.706559{col 51}{space 3} 26.13736
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 6.107057{col 26}{space 2}  6.00618{col 37}{space 5}-5.685199{col 51}{space 3} 17.89931
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 16.00316{col 26}{space 2} 2.586355{col 37}{space 5} 10.92523{col 51}{space 3} 21.08109
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 8.946063{col 26}{space 2} 1.343837{col 37}{space 5} 6.307635{col 51}{space 3} 11.58449
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex2     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .2953662{col 26}{space 2} .1929501{col 37}{space 5}-.0834631{col 51}{space 3} .6741954
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .2410085{col 26}{space 2} .2356361{col 37}{space 5}-.2216285{col 51}{space 3} .7036456
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.119081{col 26}{space 2} .4907318{col 37}{space 5} .1556005{col 51}{space 3} 2.082561
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .4646927{col 26}{space 2}  .331054{col 37}{space 5}-.1852834{col 51}{space 3} 1.114669
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.593407{col 26}{space 2} .4924892{col 37}{space 5}  .626476{col 51}{space 3} 2.560337
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 1.151411{col 26}{space 2} .2491408{col 37}{space 5} .6622598{col 51}{space 3} 1.640563
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .8328933{col 26}{space 2} .5252248{col 37}{space 5}-.1983089{col 51}{space 3} 1.864095
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2}   1.7179{col 26}{space 2} .3554163{col 37}{space 5} 1.020092{col 51}{space 3} 2.415708
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2}  4.57712{col 26}{space 2} 1.022392{col 37}{space 5} 2.569803{col 51}{space 3} 6.584438
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 5.052279{col 26}{space 2} 2.859699{col 37}{space 5}-.5623221{col 51}{space 3} 10.66688
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 30.88661{col 26}{space 2} 3.754329{col 37}{space 5} 23.51553{col 51}{space 3} 38.25768
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .4055026{col 26}{space 2} .3670878{col 37}{space 5}-.3152206{col 51}{space 3} 1.126226
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 2.493913{col 26}{space 2} .4874812{col 37}{space 5} 1.536815{col 51}{space 3} 3.451011
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 1.126089{col 26}{space 2} 1.107488{col 37}{space 5}-1.048302{col 51}{space 3} 3.300479
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 4.636239{col 26}{space 2} .9281603{col 37}{space 5} 2.813932{col 51}{space 3} 6.458546
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2}  1.73594{col 26}{space 2} .3435268{col 37}{space 5} 1.061475{col 51}{space 3} 2.410404
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex2    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0639966{col 26}{space 2} .0438279{col 37}{space 5} -.022053{col 51}{space 3} .1500463
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0354669{col 26}{space 2} .0370815{col 37}{space 5}-.0373372{col 51}{space 3} .1082709
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .3732254{col 26}{space 2} .2146661{col 37}{space 5}-.0482402{col 51}{space 3} .7946909
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2}  .133016{col 26}{space 2} .0973925{col 37}{space 5}-.0581999{col 51}{space 3} .3242319
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .4875636{col 26}{space 2} .1719254{col 37}{space 5} .1500133{col 51}{space 3}  .825114
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .3403723{col 26}{space 2} .0913194{col 37}{space 5}   .16108{col 51}{space 3} .5196647
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2}  .188197{col 26}{space 2} .1185137{col 37}{space 5}-.0444874{col 51}{space 3} .4208813
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .4053263{col 26}{space 2} .0841519{col 37}{space 5} .2401065{col 51}{space 3} .5705462
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 2.068918{col 26}{space 2} .5675464{col 37}{space 5} .9546234{col 51}{space 3} 3.183212
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 3.736361{col 26}{space 2} 2.114861{col 37}{space 5}-.4158595{col 51}{space 3} 7.888581
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 16.44512{col 26}{space 2}  2.38353{col 37}{space 5} 11.76541{col 51}{space 3} 21.12483
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .0397538{col 26}{space 2} .0356125{col 37}{space 5}-.0301662{col 51}{space 3} .1096737
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} .7633363{col 26}{space 2} .2261396{col 37}{space 5} .3193442{col 51}{space 3} 1.207328
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} .2865705{col 26}{space 2} .2818368{col 37}{space 5} -.266775{col 51}{space 3} .8399159
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 1.972314{col 26}{space 2} .5527338{col 37}{space 5}  .887102{col 51}{space 3} 3.057526
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} .5274552{col 26}{space 2}  .150531{col 37}{space 5} .2319097{col 51}{space 3} .8230007
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

    {txt}_subpop_1: spdomain = {res}Central rural
    {txt}_subpop_2: spdomain = {res}Central urban
      {txt}Eastern: spdomain = {res}Eastern
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex2      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 6.596982{col 26}{space 2} 1.376322{col 37}{space 5} 3.894775{col 51}{space 3} 9.299188
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 1.799244{col 26}{space 2} .7005769{col 37}{space 5} .4237641{col 51}{space 3} 3.174725
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 7.564058{col 26}{space 2} 1.320862{col 37}{space 5} 4.970739{col 51}{space 3} 10.15738
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 22.83015{col 26}{space 2} 2.194077{col 37}{space 5}  18.5224{col 51}{space 3}  27.1379
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 12.06716{col 26}{space 2} 1.473889{col 37}{space 5} 9.173396{col 51}{space 3} 14.96093
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex2     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.357963{col 26}{space 2} .3487661{col 37}{space 5} .6732122{col 51}{space 3} 2.042715
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3173199{col 26}{space 2} .1392332{col 37}{space 5} .0439559{col 51}{space 3}  .590684
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 1.400163{col 26}{space 2} .2166064{col 37}{space 5} .9748884{col 51}{space 3} 1.825438
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 7.665643{col 26}{space 2} .8916711{col 37}{space 5} 5.914977{col 51}{space 3} 9.416309
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 3.081176{col 26}{space 2} .5088672{col 37}{space 5}  2.08209{col 51}{space 3} 4.080263
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex2    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4308091{col 26}{space 2} .1374163{col 37}{space 5} .1610122{col 51}{space 3}  .700606
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0712872{col 26}{space 2} .0329651{col 37}{space 5} .0065651{col 51}{space 3} .1360094
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} .3592596{col 26}{space 2} .0586618{col 37}{space 5} .2440857{col 51}{space 3} .4744336
{txt}{space 4}Northern {c |}{col 14}{res}{space 2}  3.74768{col 26}{space 2} .5234158{col 37}{space 5}  2.72003{col 51}{space 3}  4.77533
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 1.207465{col 26}{space 2} .2945415{col 37}{space 5} .6291756{col 51}{space 3} 1.785754
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}h_flex2 was {res}float{txt} now {res}byte
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it2.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex2 {c |}{res}    6775   200636622    11.03792   31.33849          0        100
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it2.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor3 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 3,387.3592       50.00       50.00
{txt}          1 {c |}{res} 3,387.6408       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it3.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(238289 observations deleted)
{res}    0
    0
{txt}(925 missing values generated)
{res}  925
{txt}(925 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000h.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000h.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000i.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000i.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    172,831      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    172,831      100.00
  153
{txt}(153 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000h.tmp saved
44
44
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it3.dta saved
(4392 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000j.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000j.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         14        0.02        0.02
{txt}          3 {c |}{res}     85,204       99.98      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,218      100.00
{txt}(14 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000j.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     10,946       12.85       12.85
{txt}          3 {c |}{res}     74,258       87.15      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,204      100.00
{txt}(10946 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000l.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000l.tmp saved
product was {res}float{txt} now {res}int
{txt}unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         31        0.04        0.04
{txt}          3 {c |}{res}     74,258       99.96      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,289      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     74,289      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,289      100.00
{txt}(45875 observations deleted)
(11 observations deleted)
(2130 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw3 {c |}{res}       213    1.265078    .4905348    .938451   4.989788
{txt}{space 4}ratiomw3 {c |}{res}       213    1.085698    .3652393          0   3.711278
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        213      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
    0
{txt}(0 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it3.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         65       30.52       30.52
{txt}          3 {c |}{res}        148       69.48      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(65 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         18       10.84       10.84
{txt}          3 {c |}{res}        148       89.16      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        166      100.00
{txt}(18 observations deleted)

{hline}
-> spdomain = Central rural
{res}    1
{txt}{hline}
-> spdomain = Central urban
{res}    3
{txt}{hline}
-> spdomain = Eastern
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}       148    165.5743    162.8502          3       1040
{txt}(4 observations deleted)
(12 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27  .9029344         0  .9029344  .9029344
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       23  .8846528         0  .8846528  .8846528
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27  .9070634         0  .9070634  .9070634
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       27  .9096122         0  .9096122  .9096122
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       28  .9012103         0  .9012103  .9012103
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      132  .9015937   .008379  .8846528  .9096122
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        132      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        132      100.00
{txt}(132 real changes made)
(126 real changes made)
(132 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27 -.0000771         0 -.0000771 -.0000771
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       23 -.0000128         0 -.0000128 -.0000128
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27 -.0000899         0 -.0000899 -.0000899
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       27 -.0001156         0 -.0001156 -.0001156
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       28 -.0001285         0 -.0001285 -.0001285
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      132 -.0000873   .000039 -.0001285 -.0000128
{txt}{hline 14}{c BT}{hline 50}
(132 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it3.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it3.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(349 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000n.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000n.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it3.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it3.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(6775 real changes made)
(6775 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9416.597   395671.8   82.64046   8.12e+07
{txt}{space 6}cr_it3 {c |}{res}    6775   200636622    9416.597   358966.3   77.08961   7.36e+07
{txt}{space 5}linpob3 {c |}{res}    6775   200636622    976.8385   126.2728   813.7832   1175.265
{txt}{space 4}linpobr3 {c |}{res}    6775   200636622    1065.445          0   1065.445   1065.445
{txt}(5884 missing values generated)
(5884 real changes made)
(5884 real changes made)
(5884 real changes made)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex3 {c |}{col 14}{res}{space 2} 12.04174{col 26}{space 2} .8213922{col 37}{space 5} 10.42906{col 51}{space 3} 13.65443
{txt}{space 4}pg_flex3 {c |}{col 14}{res}{space 2} 3.122904{col 26}{space 2} .2450628{col 37}{space 5} 2.641759{col 51}{space 3} 3.604049
{txt}{space 3}spg_flex3 {c |}{col 14}{res}{space 2}  1.28575{col 26}{space 2} .1315706{col 37}{space 5} 1.027431{col 51}{space 3}  1.54407
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex3      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} 2.514697{col 26}{space 2} .7369867{col 37}{space 5} 1.067731{col 51}{space 3} 3.961662
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 13.49695{col 26}{space 2}  .910283{col 37}{space 5} 11.70974{col 51}{space 3} 15.28416
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex3     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .4162668{col 26}{space 2} .1275498{col 37}{space 5} .1658414{col 51}{space 3} .6666923
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 3.536329{col 26}{space 2} .2768086{col 37}{space 5} 2.992856{col 51}{space 3} 4.079802
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex3    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .1183589{col 26}{space 2} .0439069{col 37}{space 5} .0321541{col 51}{space 3} .2045637
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.464063{col 26}{space 2} .1503556{col 37}{space 5} 1.168862{col 51}{space 3} 1.759264
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

      {txt}KAMPALA: strata = {res}KAMPALA
    {txt}_subpop_2: strata = {res}CENTRAL 1
    {txt}_subpop_3: strata = {res}CENTRAL 2
    {txt}_subpop_4: strata = {res}EAST CENTRAL
      {txt}EASTERN: strata = {res}EASTERN
    {txt}_subpop_6: strata = {res}MID-NOTHERN
    {txt}_subpop_7: strata = {res}NORTH-EAST
    {txt}_subpop_8: strata = {res}WEST-NILE
    {txt}_subpop_9: strata = {res}MID-WESTERN
   {txt}_subpop_10: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex3      {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} 1.536145{col 26}{space 2} .8756774{col 37}{space 5}-.1831199{col 51}{space 3} 3.255409
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 4.596846{col 26}{space 2} 1.414618{col 37}{space 5}  1.81945{col 51}{space 3} 7.374241
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 7.398621{col 26}{space 2}  1.86434{col 37}{space 5} 3.738261{col 51}{space 3} 11.05898
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 8.127774{col 26}{space 2} 1.612551{col 37}{space 5} 4.961766{col 51}{space 3} 11.29378
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 11.80657{col 26}{space 2} 2.253825{col 37}{space 5} 7.381518{col 51}{space 3} 16.23163
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 13.57109{col 26}{space 2} 2.453822{col 37}{space 5} 8.753372{col 51}{space 3} 18.38882
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 70.87902{col 26}{space 2} 6.355412{col 37}{space 5}  58.4011{col 51}{space 3} 83.35694
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 15.24684{col 26}{space 2} 4.522476{col 37}{space 5} 6.367618{col 51}{space 3} 24.12606
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2}   15.421{col 26}{space 2} 2.497656{col 37}{space 5} 10.51722{col 51}{space 3} 20.32478
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 8.512285{col 26}{space 2} 1.293816{col 37}{space 5} 5.972066{col 51}{space 3}  11.0525
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex3     {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .2850407{col 26}{space 2} .1874341{col 37}{space 5}-.0829588{col 51}{space 3} .6530403
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .9662464{col 26}{space 2} .4098536{col 37}{space 5} .1615587{col 51}{space 3} 1.770934
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.449052{col 26}{space 2} .4290112{col 37}{space 5} .6067516{col 51}{space 3} 2.291353
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 1.405935{col 26}{space 2} .2839541{col 37}{space 5} .8484326{col 51}{space 3} 1.963437
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 2.183363{col 26}{space 2}  .436454{col 37}{space 5} 1.326449{col 51}{space 3} 3.040276
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  4.23203{col 26}{space 2}  .956338{col 37}{space 5} 2.354401{col 51}{space 3}  6.10966
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 30.44189{col 26}{space 2} 3.662491{col 37}{space 5} 23.25113{col 51}{space 3} 37.63266
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 2.375972{col 26}{space 2} .4479886{col 37}{space 5} 1.496412{col 51}{space 3} 3.255532
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 4.387872{col 26}{space 2} .8849727{col 37}{space 5} 2.650358{col 51}{space 3} 6.125387
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}  1.62563{col 26}{space 2} .3267169{col 37}{space 5} .9841693{col 51}{space 3} 2.267091
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex3    {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .0602158{col 26}{space 2} .0413903{col 37}{space 5} -.021048{col 51}{space 3} .1414795
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3146192{col 26}{space 2} .1777995{col 37}{space 5}-.0344642{col 51}{space 3} .6637025
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .4427283{col 26}{space 2}  .149934{col 37}{space 5} .1483547{col 51}{space 3} .7371018
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .4297482{col 26}{space 2}  .103468{col 37}{space 5}  .226604{col 51}{space 3} .6328924
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} .5672757{col 26}{space 2} .1105028{col 37}{space 5} .3503196{col 51}{space 3} .7842318
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.919541{col 26}{space 2} .5280469{col 37}{space 5} .8827984{col 51}{space 3} 2.956284
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 16.32243{col 26}{space 2} 2.330928{col 37}{space 5} 11.74599{col 51}{space 3} 20.89886
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .7079542{col 26}{space 2} .1981629{col 37}{space 5} .3188902{col 51}{space 3} 1.097018
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 1.853789{col 26}{space 2} .5246343{col 37}{space 5}  .823746{col 51}{space 3} 2.883831
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .4932011{col 26}{space 2} .1424309{col 37}{space 5}  .213559{col 51}{space 3} .7728433
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

         {txt}Over: strata rural
    _subpop_1: {res}KAMPALA Urban
    {txt}_subpop_2: {res}CENTRAL 1 Urban
    {txt}_subpop_3: {res}CENTRAL 1 Rural
    {txt}_subpop_4: {res}CENTRAL 2 Urban
    {txt}_subpop_5: {res}CENTRAL 2 Rural
    {txt}_subpop_6: {res}EAST CENTRAL Urban
    {txt}_subpop_7: {res}EAST CENTRAL Rural
    {txt}_subpop_8: {res}EASTERN Urban
    {txt}_subpop_9: {res}EASTERN Rural
   {txt}_subpop_10: {res}MID-NOTHERN Urban
   {txt}_subpop_11: {res}MID-NOTHERN Rural
   {txt}_subpop_12: {res}NORTH-EAST Urban
   {txt}_subpop_13: {res}NORTH-EAST Rural
   {txt}_subpop_14: {res}WEST-NILE Urban
   {txt}_subpop_15: {res}WEST-NILE Rural
   {txt}_subpop_16: {res}MID-WESTERN Urban
   {txt}_subpop_17: {res}MID-WESTERN Rural
   {txt}_subpop_18: {res}SOUTH-WESTERN Urban
   {txt}_subpop_19: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex3      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.536145{col 26}{space 2} .8756774{col 37}{space 5}-.1831199{col 51}{space 3} 3.255409
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 2.160705{col 26}{space 2} 1.755188{col 37}{space 5}-1.285349{col 51}{space 3} 5.606759
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 5.219631{col 26}{space 2} 1.655129{col 37}{space 5} 1.970027{col 51}{space 3} 8.469236
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 2.008124{col 26}{space 2} 1.395066{col 37}{space 5} -.730883{col 51}{space 3} 4.747132
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 8.511507{col 26}{space 2} 2.164837{col 37}{space 5} 4.261165{col 51}{space 3} 12.76185
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 8.582742{col 26}{space 2} 1.691107{col 37}{space 5}   5.2625{col 51}{space 3} 11.90298
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 3.705768{col 26}{space 2} 2.352816{col 37}{space 5}-.9136424{col 51}{space 3} 8.325178
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 12.44788{col 26}{space 2}  2.37598{col 37}{space 5} 7.782995{col 51}{space 3} 17.11278
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 5.029093{col 26}{space 2} 4.275589{col 37}{space 5}-3.365401{col 51}{space 3} 13.42359
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 14.50179{col 26}{space 2} 2.654047{col 37}{space 5} 9.290955{col 51}{space 3} 19.71262
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7603675{col 51}{space 3} 14.42367
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 73.25054{col 26}{space 2} 6.475744{col 37}{space 5} 60.53636{col 51}{space 3} 85.96472
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} 4.767413{col 26}{space 2}  4.38237{col 37}{space 5} -3.83673{col 51}{space 3} 13.37156
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 16.79927{col 26}{space 2} 4.885104{col 37}{space 5} 7.208081{col 51}{space 3} 26.39046
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 6.107057{col 26}{space 2}  6.00618{col 37}{space 5}-5.685199{col 51}{space 3} 17.89931
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 16.00316{col 26}{space 2} 2.586355{col 37}{space 5} 10.92523{col 51}{space 3} 21.08109
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 8.946063{col 26}{space 2} 1.343837{col 37}{space 5} 6.307635{col 51}{space 3} 11.58449
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex3     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .2850407{col 26}{space 2} .1874341{col 37}{space 5}-.0829588{col 51}{space 3} .6530403
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .2250333{col 26}{space 2} .2241939{col 37}{space 5}-.2151386{col 51}{space 3} .6652051
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.155733{col 26}{space 2} .4982588{col 37}{space 5}  .177475{col 51}{space 3} 2.133992
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .4518486{col 26}{space 2} .3227634{col 37}{space 5}-.1818501{col 51}{space 3} 1.085547
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.654928{col 26}{space 2} .5035779{col 37}{space 5} .6662267{col 51}{space 3}  2.64363
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 1.484635{col 26}{space 2} .2990758{col 37}{space 5} .8974431{col 51}{space 3} 2.071827
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 1.006167{col 26}{space 2} .6351645{col 37}{space 5}-.2408854{col 51}{space 3}  2.25322
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 2.276557{col 26}{space 2} .4613891{col 37}{space 5} 1.370687{col 51}{space 3} 3.182427
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .0093897{col 26}{space 2} .0079828{col 37}{space 5}-.0062834{col 51}{space 3} .0250627
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 4.692109{col 26}{space 2}  1.03874{col 37}{space 5} 2.652694{col 51}{space 3} 6.731523
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 5.073125{col 26}{space 2} 2.871498{col 37}{space 5}-.5646423{col 51}{space 3} 10.71089
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 31.38124{col 26}{space 2} 3.781898{col 37}{space 5} 23.95604{col 51}{space 3} 38.80644
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .4566063{col 26}{space 2} .4141224{col 37}{space 5}-.3564626{col 51}{space 3} 1.269675
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 2.660309{col 26}{space 2} .4968505{col 37}{space 5} 1.684815{col 51}{space 3} 3.635802
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 1.107112{col 26}{space 2} 1.088825{col 37}{space 5}-1.030636{col 51}{space 3} 3.244861
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 4.592934{col 26}{space 2} .9233021{col 37}{space 5} 2.780165{col 51}{space 3} 6.405703
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 1.708471{col 26}{space 2} .3411553{col 37}{space 5} 1.038662{col 51}{space 3} 2.378279
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex3    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0602158{col 26}{space 2} .0413903{col 37}{space 5} -.021048{col 51}{space 3} .1414795
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0321646{col 26}{space 2} .0338697{col 37}{space 5}-.0343336{col 51}{space 3} .0986628
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}  .386827{col 26}{space 2} .2193818{col 37}{space 5}-.0438971{col 51}{space 3} .8175512
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .1275796{col 26}{space 2} .0935794{col 37}{space 5}-.0561498{col 51}{space 3} .3113091
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .5077917{col 26}{space 2} .1773182{col 37}{space 5} .1596534{col 51}{space 3} .8559301
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .4538042{col 26}{space 2} .1091341{col 37}{space 5} .2395353{col 51}{space 3}  .668073
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .2740707{col 26}{space 2} .1725798{col 37}{space 5}-.0647644{col 51}{space 3} .6129058
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .5904877{col 26}{space 2} .1169512{col 37}{space 5} .3608711{col 51}{space 3} .8201042
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .0000175{col 26}{space 2} .0000149{col 37}{space 5}-.0000117{col 51}{space 3} .0000468
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 2.128683{col 26}{space 2} .5777612{col 37}{space 5} .9943334{col 51}{space 3} 3.263033
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 3.767259{col 26}{space 2}  2.13235{col 37}{space 5}-.4192984{col 51}{space 3} 7.953816
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 16.78732{col 26}{space 2} 2.415204{col 37}{space 5} 12.04541{col 51}{space 3} 21.52922
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .0488724{col 26}{space 2} .0438843{col 37}{space 5}-.0372881{col 51}{space 3} .1350329
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} .8055911{col 26}{space 2} .2307757{col 37}{space 5} .3524968{col 51}{space 3} 1.258685
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} .2802338{col 26}{space 2} .2756048{col 37}{space 5} -.260876{col 51}{space 3} .8213436
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 1.952143{col 26}{space 2}  .550314{col 37}{space 5} .8716814{col 51}{space 3} 3.032604
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} .5183342{col 26}{space 2}  .149246{col 37}{space 5} .2253115{col 51}{space 3}  .811357
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

    {txt}_subpop_1: spdomain = {res}Central rural
    {txt}_subpop_2: spdomain = {res}Central urban
      {txt}Eastern: spdomain = {res}Eastern
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex3      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 6.877505{col 26}{space 2} 1.381672{col 37}{space 5} 4.164794{col 51}{space 3} 9.590216
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 1.799244{col 26}{space 2} .7005769{col 37}{space 5} .4237641{col 51}{space 3} 3.174725
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 10.15345{col 26}{space 2} 1.452561{col 37}{space 5} 7.301557{col 51}{space 3} 13.00534
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 23.40979{col 26}{space 2} 2.180005{col 37}{space 5} 19.12967{col 51}{space 3} 27.68991
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 12.06716{col 26}{space 2} 1.473889{col 37}{space 5} 9.173396{col 51}{space 3} 14.96093
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex3     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.407141{col 26}{space 2} .3554837{col 37}{space 5} .7092005{col 51}{space 3} 2.105081
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3049877{col 26}{space 2} .1349429{col 37}{space 5} .0400471{col 51}{space 3} .5699284
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 1.834013{col 26}{space 2} .2768478{col 37}{space 5} 1.290463{col 51}{space 3} 2.377564
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 7.846463{col 26}{space 2} .8977835{col 37}{space 5} 6.083796{col 51}{space 3} 9.609129
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 3.046942{col 26}{space 2} .5060806{col 37}{space 5} 2.053326{col 51}{space 3} 4.040557
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex3    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2}  .447748{col 26}{space 2} .1409617{col 37}{space 5} .1709902{col 51}{space 3} .7245057
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2}  .067278{col 26}{space 2} .0312721{col 37}{space 5} .0058798{col 51}{space 3} .1286762
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} .5054756{col 26}{space 2} .0771629{col 37}{space 5} .3539775{col 51}{space 3} .6569736
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 3.841054{col 26}{space 2} .5317294{col 37}{space 5} 2.797081{col 51}{space 3} 4.885027
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 1.193291{col 26}{space 2} .2931333{col 37}{space 5} .6177669{col 51}{space 3} 1.768816
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}h_flex3 was {res}float{txt} now {res}byte
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it3.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex3 {c |}{res}    6775   200636622    12.04174   32.54731          0        100
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it3.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor4 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res} 3,385.9819       49.98       49.98
{txt}          1 {c |}{res} 3,389.0181       50.02      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it4.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(240194 observations deleted)
{res}    0
    0
{txt}(925 missing values generated)
{res}  925
{txt}(925 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000o.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000o.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000p.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000p.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    170,926      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    170,926      100.00
  153
{txt}(153 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000o.tmp saved
45
45
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it4.dta saved
(4392 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000q.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000q.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         14        0.02        0.02
{txt}          3 {c |}{res}     85,204       99.98      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,218      100.00
{txt}(14 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000q.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     10,440       12.25       12.25
{txt}          3 {c |}{res}     74,764       87.75      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,204      100.00
{txt}(10440 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000s.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000s.tmp saved
product was {res}float{txt} now {res}int
{txt}unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         31        0.04        0.04
{txt}          3 {c |}{res}     74,764       99.96      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,795      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     74,795      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,795      100.00
{txt}(46570 observations deleted)
(11 observations deleted)
(2124 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw4 {c |}{res}       218     1.30385    .5805333   .9367496    5.06082
{txt}{space 4}ratiomw4 {c |}{res}       218    1.093956    .3831518          0   3.690952
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        218      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        218      100.00
    0
{txt}(0 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it4.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         70       32.11       32.11
{txt}          3 {c |}{res}        148       67.89      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        218      100.00
{txt}(70 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         17       10.30       10.30
{txt}          3 {c |}{res}        148       89.70      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        165      100.00
{txt}(17 observations deleted)

{hline}
-> spdomain = Central rural
{res}    1
{txt}{hline}
-> spdomain = Central urban
{res}    4
{txt}{hline}
-> spdomain = Eastern
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}       148    163.5338    160.7022          3       1023
{txt}(5 observations deleted)
(13 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27  .9016237         0  .9016237  .9016237
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       22   .876273         0   .876273   .876273
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27  .9046936         0  .9046936  .9046936
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26  .9002259         0  .9002259  .9002259
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       28  .9008598         0  .9008598  .9008598
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      130  .8975271  .0097561   .876273  .9046936
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        130      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        130      100.00
{txt}(130 real changes made)
(124 real changes made)
(130 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27 -.0000771         0 -.0000771 -.0000771
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       22 -.0000128         0 -.0000128 -.0000128
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27 -.0000899         0 -.0000899 -.0000899
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       26  .0001413         0  .0001413  .0001413
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       28 -.0001285         0 -.0001285 -.0001285
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      130 -.0000363  .0000962 -.0001285  .0001413
{txt}{hline 14}{c BT}{hline 50}
(130 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it4.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it4.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(329 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000u.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000u.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it4.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it4.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(6775 real changes made)
(6775 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9416.597   395671.8   82.64046   8.12e+07
{txt}{space 6}cr_it4 {c |}{res}    6775   200636622    9416.597   357688.9   74.53012   7.33e+07
{txt}{space 5}linpob4 {c |}{res}    6775   200636622    959.2149   143.6842   804.5471   1162.682
{txt}{space 4}linpobr4 {c |}{res}    6775   200636622    1048.577   .0000547   1048.577   1048.577
{txt}(5912 missing values generated)
(5912 real changes made)
(5912 real changes made)
(5912 real changes made)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex4 {c |}{col 14}{res}{space 2} 11.11909{col 26}{space 2} .7975126{col 37}{space 5}  9.55329{col 51}{space 3} 12.68489
{txt}{space 4}pg_flex4 {c |}{col 14}{res}{space 2} 2.975137{col 26}{space 2} .2391435{col 37}{space 5} 2.505613{col 51}{space 3}  3.44466
{txt}{space 3}spg_flex4 {c |}{col 14}{res}{space 2}  1.23274{col 26}{space 2} .1304217{col 37}{space 5}  .976676{col 51}{space 3} 1.488804
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex4      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} 2.086973{col 26}{space 2} .6451699{col 37}{space 5} .8202762{col 51}{space 3}  3.35367
{txt}{space 7}Rural {c |}{col 14}{res}{space 2}  12.4987{col 26}{space 2} .8860347{col 37}{space 5}  10.7591{col 51}{space 3}  14.2383
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex4     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .3888317{col 26}{space 2} .1222938{col 37}{space 5} .1487258{col 51}{space 3} .6289376
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 3.370181{col 26}{space 2} .2706866{col 37}{space 5} 2.838728{col 51}{space 3} 3.901635
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex4    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .1071954{col 26}{space 2} .0420308{col 37}{space 5} .0246741{col 51}{space 3} .1897167
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.404661{col 26}{space 2} .1492098{col 37}{space 5} 1.111709{col 51}{space 3} 1.697613
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

      {txt}KAMPALA: strata = {res}KAMPALA
    {txt}_subpop_2: strata = {res}CENTRAL 1
    {txt}_subpop_3: strata = {res}CENTRAL 2
    {txt}_subpop_4: strata = {res}EAST CENTRAL
      {txt}EASTERN: strata = {res}EASTERN
    {txt}_subpop_6: strata = {res}MID-NOTHERN
    {txt}_subpop_7: strata = {res}NORTH-EAST
    {txt}_subpop_8: strata = {res}WEST-NILE
    {txt}_subpop_9: strata = {res}MID-WESTERN
   {txt}_subpop_10: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex4      {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} 1.358707{col 26}{space 2} .8594353{col 37}{space 5}-.3286689{col 51}{space 3} 3.046082
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 4.596846{col 26}{space 2} 1.414618{col 37}{space 5}  1.81945{col 51}{space 3} 7.374241
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 6.936931{col 26}{space 2} 1.852727{col 37}{space 5} 3.299373{col 51}{space 3} 10.57449
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 5.450948{col 26}{space 2} 1.171204{col 37}{space 5}  3.15146{col 51}{space 3} 7.750436
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2}  9.28854{col 26}{space 2} 2.149875{col 37}{space 5} 5.067575{col 51}{space 3}  13.5095
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}  12.6968{col 26}{space 2} 2.422978{col 37}{space 5} 7.939638{col 51}{space 3} 17.45397
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 70.68732{col 26}{space 2} 6.344248{col 37}{space 5} 58.23131{col 51}{space 3} 83.14332
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 14.91821{col 26}{space 2} 4.568717{col 37}{space 5} 5.948203{col 51}{space 3} 23.88822
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 15.53387{col 26}{space 2} 2.493286{col 37}{space 5} 10.63867{col 51}{space 3} 20.42907
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 9.175563{col 26}{space 2} 1.278453{col 37}{space 5} 6.665507{col 51}{space 3} 11.68562
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex4     {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .2704303{col 26}{space 2}  .179127{col 37}{space 5}-.0812594{col 51}{space 3}   .62212
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .9321519{col 26}{space 2} .4031354{col 37}{space 5} .1406545{col 51}{space 3} 1.723649
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.394744{col 26}{space 2} .4192107{col 37}{space 5} .5716851{col 51}{space 3} 2.217803
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 1.090548{col 26}{space 2} .2363652{col 37}{space 5} .6264794{col 51}{space 3} 1.554616
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 1.653279{col 26}{space 2} .3359462{col 37}{space 5} .9936975{col 51}{space 3}  2.31286
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 4.130593{col 26}{space 2} .9414996{col 37}{space 5} 2.282096{col 51}{space 3} 5.979089
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 29.97927{col 26}{space 2} 3.635901{col 37}{space 5} 22.84071{col 51}{space 3} 37.11783
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 2.229156{col 26}{space 2} .4344839{col 37}{space 5}  1.37611{col 51}{space 3} 3.082201
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2}  4.58369{col 26}{space 2} .9072344{col 37}{space 5} 2.802467{col 51}{space 3} 6.364912
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 1.751074{col 26}{space 2} .3375204{col 37}{space 5} 1.088402{col 51}{space 3} 2.413746
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex4    {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .0547742{col 26}{space 2} .0378497{col 37}{space 5}-.0195381{col 51}{space 3} .1290866
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3028643{col 26}{space 2} .1738864{col 37}{space 5}-.0385362{col 51}{space 3} .6442649
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .4246132{col 26}{space 2} .1452956{col 37}{space 5} .1393465{col 51}{space 3} .7098799
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .3223901{col 26}{space 2}  .086553{col 37}{space 5} .1524559{col 51}{space 3} .4923242
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} .3894979{col 26}{space 2} .0792943{col 37}{space 5}  .233815{col 51}{space 3} .5451807
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.867323{col 26}{space 2} .5188484{col 37}{space 5} .8486402{col 51}{space 3} 2.886006
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2}  16.0017{col 26}{space 2} 2.301106{col 37}{space 5} 11.48382{col 51}{space 3} 20.51959
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .6711282{col 26}{space 2} .1940668{col 37}{space 5} .2901065{col 51}{space 3}  1.05215
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 1.945893{col 26}{space 2}  .535759{col 37}{space 5} .8940089{col 51}{space 3} 2.997778
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .5349915{col 26}{space 2}  .148268{col 37}{space 5}  .243889{col 51}{space 3} .8260939
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

         {txt}Over: strata rural
    _subpop_1: {res}KAMPALA Urban
    {txt}_subpop_2: {res}CENTRAL 1 Urban
    {txt}_subpop_3: {res}CENTRAL 1 Rural
    {txt}_subpop_4: {res}CENTRAL 2 Urban
    {txt}_subpop_5: {res}CENTRAL 2 Rural
    {txt}_subpop_6: {res}EAST CENTRAL Urban
    {txt}_subpop_7: {res}EAST CENTRAL Rural
    {txt}_subpop_8: {res}EASTERN Urban
    {txt}_subpop_9: {res}EASTERN Rural
   {txt}_subpop_10: {res}MID-NOTHERN Urban
   {txt}_subpop_11: {res}MID-NOTHERN Rural
   {txt}_subpop_12: {res}NORTH-EAST Urban
   {txt}_subpop_13: {res}NORTH-EAST Rural
   {txt}_subpop_14: {res}WEST-NILE Urban
   {txt}_subpop_15: {res}WEST-NILE Rural
   {txt}_subpop_16: {res}MID-WESTERN Urban
   {txt}_subpop_17: {res}MID-WESTERN Rural
   {txt}_subpop_18: {res}SOUTH-WESTERN Urban
   {txt}_subpop_19: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex4      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.358707{col 26}{space 2} .8594353{col 37}{space 5}-.3286689{col 51}{space 3} 3.046082
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 2.160705{col 26}{space 2} 1.755188{col 37}{space 5}-1.285349{col 51}{space 3} 5.606759
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 5.219631{col 26}{space 2} 1.655129{col 37}{space 5} 1.970027{col 51}{space 3} 8.469236
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 2.008124{col 26}{space 2} 1.395066{col 37}{space 5} -.730883{col 51}{space 3} 4.747132
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2}   7.9545{col 26}{space 2} 2.158816{col 37}{space 5} 3.715979{col 51}{space 3} 12.19302
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 5.756075{col 26}{space 2} 1.232853{col 37}{space 5} 3.335549{col 51}{space 3} 8.176601
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 3.705768{col 26}{space 2} 2.352816{col 37}{space 5}-.9136424{col 51}{space 3} 8.325178
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 9.730508{col 26}{space 2} 2.280927{col 37}{space 5} 5.252241{col 51}{space 3} 14.20877
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 14.08018{col 26}{space 2} 2.606576{col 37}{space 5} 8.962552{col 51}{space 3} 19.19781
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7603675{col 51}{space 3} 14.42367
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 73.05174{col 26}{space 2} 6.462656{col 37}{space 5} 60.36326{col 51}{space 3} 85.74022
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} 4.767413{col 26}{space 2}  4.38237{col 37}{space 5} -3.83673{col 51}{space 3} 13.37156
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 16.42196{col 26}{space 2} 4.948369{col 37}{space 5} 6.706559{col 51}{space 3} 26.13736
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 6.107057{col 26}{space 2}  6.00618{col 37}{space 5}-5.685199{col 51}{space 3} 17.89931
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 16.12309{col 26}{space 2}  2.58123{col 37}{space 5} 11.05522{col 51}{space 3} 21.19095
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 9.643141{col 26}{space 2} 1.323678{col 37}{space 5} 7.044293{col 51}{space 3} 12.24199
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex4     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .2704303{col 26}{space 2}  .179127{col 37}{space 5}-.0812594{col 51}{space 3}   .62212
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .2009467{col 26}{space 2}  .207247{col 37}{space 5}-.2059525{col 51}{space 3} .6078459
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}  1.11908{col 26}{space 2} .4907317{col 37}{space 5} .1556004{col 51}{space 3}  2.08256
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .4324831{col 26}{space 2} .3103404{col 37}{space 5} -.176825{col 51}{space 3} 1.041791
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.593406{col 26}{space 2} .4924891{col 37}{space 5} .6264757{col 51}{space 3} 2.560336
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 1.151593{col 26}{space 2} .2491708{col 37}{space 5} .6623831{col 51}{space 3} 1.640804
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .8330068{col 26}{space 2} .5252968{col 37}{space 5}-.1983367{col 51}{space 3}  1.86435
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 1.718217{col 26}{space 2} .3554838{col 37}{space 5} 1.020276{col 51}{space 3} 2.416157
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 4.580642{col 26}{space 2} 1.022893{col 37}{space 5} 2.572341{col 51}{space 3} 6.588942
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 5.052938{col 26}{space 2} 2.860072{col 37}{space 5}-.5623954{col 51}{space 3} 10.66827
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 30.90223{col 26}{space 2} 3.755197{col 37}{space 5} 23.52945{col 51}{space 3} 38.27501
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .4071188{col 26}{space 2} .3685752{col 37}{space 5}-.3165248{col 51}{space 3} 1.130762
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 2.499074{col 26}{space 2} .4876867{col 37}{space 5} 1.541572{col 51}{space 3} 3.456575
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 1.195355{col 26}{space 2}  1.17561{col 37}{space 5}-1.112783{col 51}{space 3} 3.503493
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 4.795475{col 26}{space 2} .9460473{col 37}{space 5} 2.938049{col 51}{space 3} 6.652901
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 1.840307{col 26}{space 2} .3522235{col 37}{space 5} 1.148767{col 51}{space 3} 2.531846
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex4    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0547742{col 26}{space 2} .0378497{col 37}{space 5}-.0195381{col 51}{space 3} .1290866
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0276346{col 26}{space 2} .0293227{col 37}{space 5}-.0299364{col 51}{space 3} .0852055
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .3732253{col 26}{space 2} .2146661{col 37}{space 5}-.0482402{col 51}{space 3} .7946907
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .1197003{col 26}{space 2} .0880228{col 37}{space 5}-.0531196{col 51}{space 3} .2925202
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .4875635{col 26}{space 2} .1719253{col 37}{space 5} .1500132{col 51}{space 3} .8251137
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} .3404365{col 26}{space 2} .0913297{col 37}{space 5}  .161124{col 51}{space 3} .5197489
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} .1882479{col 26}{space 2} .1185457{col 37}{space 5}-.0444993{col 51}{space 3} .4209952
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .4054301{col 26}{space 2} .0841694{col 37}{space 5} .2401759{col 51}{space 3} .5706844
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 2.070778{col 26}{space 2} .5678655{col 37}{space 5} .9558565{col 51}{space 3} 3.185698
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 3.737336{col 26}{space 2} 2.115413{col 37}{space 5}-.4159681{col 51}{space 3} 7.890641
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 16.45582{col 26}{space 2} 2.384527{col 37}{space 5} 11.77415{col 51}{space 3} 21.13749
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .0400253{col 26}{space 2} .0358586{col 37}{space 5}-.0303778{col 51}{space 3} .1104285
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} .7646204{col 26}{space 2} .2262907{col 37}{space 5} .3203316{col 51}{space 3} 1.208909
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} .3107203{col 26}{space 2} .3055878{col 37}{space 5}-.2892566{col 51}{space 3} .9106973
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 2.048099{col 26}{space 2} .5617784{col 37}{space 5} .9451289{col 51}{space 3} 3.151069
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} .5622541{col 26}{space 2} .1553198{col 37}{space 5} .2573064{col 51}{space 3} .8672018
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

    {txt}_subpop_1: spdomain = {res}Central rural
    {txt}_subpop_2: spdomain = {res}Central urban
      {txt}Eastern: spdomain = {res}Eastern
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex4      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 6.596982{col 26}{space 2} 1.376322{col 37}{space 5} 3.894775{col 51}{space 3} 9.299188
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 1.705794{col 26}{space 2} .6914442{col 37}{space 5} .3482441{col 51}{space 3} 3.063343
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 7.564058{col 26}{space 2} 1.320862{col 37}{space 5} 4.970739{col 51}{space 3} 10.15738
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 22.83015{col 26}{space 2} 2.194077{col 37}{space 5}  18.5224{col 51}{space 3}  27.1379
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 12.44723{col 26}{space 2}  1.46256{col 37}{space 5} 9.575707{col 51}{space 3} 15.31875
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex4     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.357963{col 26}{space 2}  .348766{col 37}{space 5} .6732119{col 51}{space 3} 2.042714
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .2868983{col 26}{space 2} .1285487{col 37}{space 5} .0345118{col 51}{space 3} .5392848
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 1.400407{col 26}{space 2} .2166442{col 37}{space 5} .9750577{col 51}{space 3} 1.825756
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 7.671262{col 26}{space 2} .8918551{col 37}{space 5} 5.920234{col 51}{space 3} 9.422289
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 3.208596{col 26}{space 2}  .519072{col 37}{space 5} 2.189474{col 51}{space 3} 4.227718
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex4    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4308089{col 26}{space 2} .1374163{col 37}{space 5} .1610121{col 51}{space 3} .7006058
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0615539{col 26}{space 2} .0288287{col 37}{space 5}  .004953{col 51}{space 3} .1181548
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} .3593419{col 26}{space 2} .0586718{col 37}{space 5} .2441485{col 51}{space 3} .4745354
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 3.750585{col 26}{space 2} .5236783{col 37}{space 5} 2.722419{col 51}{space 3} 4.778751
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 1.260971{col 26}{space 2} .2998036{col 37}{space 5} .6723505{col 51}{space 3} 1.849591
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}h_flex4 was {res}float{txt} now {res}byte
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it4.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex4 {c |}{res}    6775   200636622    11.11909   31.43916          0        100
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it4.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
{p 0 4 2}
variable{txt} one
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00

   {txt}relpoor5 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}3,387.20082       50.00       50.00
{txt}          1 {c |}{res}3,387.79918       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\relpoor_it5.dta saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(0 observations deleted)
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    412,045      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    412,045      100.00
{txt}(238428 observations deleted)
{res}    0
    0
{txt}(925 missing values generated)
{res}  925
{txt}(925 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000v.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000v.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000w.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000w.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}    172,692      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    172,692      100.00
  153
{txt}(153 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000v.tmp saved
44
44
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\codes_food_basket_flex_it5.dta saved
(4392 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000x.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000x.tmp saved
{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         14        0.02        0.02
{txt}          3 {c |}{res}     85,204       99.98      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,218      100.00
{txt}(14 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000x.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     10,946       12.85       12.85
{txt}          3 {c |}{res}     74,258       87.15      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     85,204      100.00
{txt}(10946 observations deleted)
(0 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000011.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000011.tmp saved
product was {res}float{txt} now {res}int
{txt}unit was {res}float{txt} now {res}byte
{txt}food_cat was {res}float{txt} now {res}byte
{txt}rmult was {res}float{txt} now {res}int
{txt}poor09 was {res}float{txt} now {res}byte
{txt}survquar was {res}float{txt} now {res}byte
{txt}survmon was {res}float{txt} now {res}byte
{txt}rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}bswt was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}count was {res}float{txt} now {res}byte
{txt}descript was {res}float{txt} now {res}byte
{txt}hhsize was {res}double{txt} now {res}byte
{txt}numreg was {res}double{txt} now {res}byte
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}
survquar was {res}byte{txt} now {res}float
{txt}spdomain was {res}byte{txt} now {res}float
{txt}reg_tpi was {res}byte{txt} now {res}float
{txt}(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         31        0.04        0.04
{txt}          3 {c |}{res}     74,258       99.96      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,289      100.00
{txt}{p 0 4 2}
variable{txt} hhid
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}     74,289      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}     74,289      100.00
{txt}(45911 observations deleted)
(11 observations deleted)
(2125 observations deleted)

    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 4}ratiotw5 {c |}{res}       213    1.265089    .4929497    .938451    5.06082
{txt}{space 4}ratiomw5 {c |}{res}       213    1.085062    .3655071          0   3.711278
{txt}{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
product was {res}int{txt} now {res}float

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        213      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
    0
{txt}(0 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\price_unit_flex_it5.dta saved
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         65       30.52       30.52
{txt}          3 {c |}{res}        148       69.48      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(65 observations deleted)
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(note: descript is str26 in using data but will be float now)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          2 {c |}{res}         18       10.84       10.84
{txt}          3 {c |}{res}        148       89.16      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        166      100.00
{txt}(18 observations deleted)

{hline}
-> spdomain = Central rural
{res}    1
{txt}{hline}
-> spdomain = Central urban
{res}    3
{txt}{hline}
-> spdomain = Eastern
{res}    0
{txt}{hline}
-> spdomain = Northern
{res}    0
{txt}{hline}
-> spdomain = Western
{res}    0

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 8}bswt {c |}{res}       148    165.4324    162.9127          3       1039
{txt}(4 observations deleted)
(11 observations deleted)

Summary for variables: baskshr
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27  .9027917         0  .9027917  .9027917
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       23  .8832131         0  .8832131  .8832131
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27  .9070574         0  .9070574  .9070574
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       27   .909593         0   .909593   .909593
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       29  .9070321         0  .9070321  .9070321
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      133  .9025772  .0091585  .8832131   .909593
{txt}{hline 14}{c BT}{hline 50}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}        133      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        133      100.00
{txt}(133 real changes made)
(127 real changes made)
(133 real changes made)

Summary for variables: chkcal
{col 6}by categories of: spdomain 

{ralign 13:spdomain} {...}
{c |}         N      mean        sd       min       max
{hline 14}{c +}{hline 50}
{ralign 13:Central rural} {...}
{c |}{...}
 {res}       27 -.0000771         0 -.0000771 -.0000771
{txt}{ralign 13:Central urban} {...}
{c |}{...}
 {res}       23 -.0000128         0 -.0000128 -.0000128
{txt}{ralign 13:Eastern} {...}
{c |}{...}
 {res}       27 -.0000899         0 -.0000899 -.0000899
{txt}{ralign 13:Northern} {...}
{c |}{...}
 {res}       27  .0001413         0  .0001413  .0001413
{txt}{ralign 13:Western} {...}
{c |}{...}
 {res}       29  .0001285         0  .0001285  .0001285
{txt}{hline 14}{c +}{hline 50}
{ralign 13:Total} {...}
{c |}{...}
 {res}      133  .0000206  .0001009 -.0000899  .0001413
{txt}{hline 14}{c BT}{hline 50}
(133 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\quan_flex_it5.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_flex_it5.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(349 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000013.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000013.tmp saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it5.dta saved
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
the master data
{p_end}
{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povlines_it5.dta
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}(6775 real changes made)
(6775 real changes made)

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 10}cr {c |}{res}    6775   200636622    9416.597   395671.8   82.64046   8.12e+07
{txt}{space 6}cr_it5 {c |}{res}    6775   200636622    9416.597   357959.2   77.03606   7.34e+07
{txt}{space 5}linpob5 {c |}{res}    6775   200636622    978.2903   128.5878   813.7241   1182.364
{txt}{space 4}linpobr5 {c |}{res}    6775   200636622    1068.843          0   1068.843   1068.843
{txt}(5884 missing values generated)
(5884 real changes made)
(5884 real changes made)
(5884 real changes made)

      pweight:{col 16}{res}popwt
          {txt}VCE:{col 16}{res}linearized
  {txt}Single unit:{col 16}{res}missing
     {txt}Strata 1:{col 16}{res}strata
         {txt}SU 1:{col 16}{res}psu
        {txt}FPC 1:{col 16}<zero>
{p2colreset}{...}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{space 5}h_flex5 {c |}{col 14}{res}{space 2} 12.04174{col 26}{space 2} .8213922{col 37}{space 5} 10.42906{col 51}{space 3} 13.65443
{txt}{space 4}pg_flex5 {c |}{col 14}{res}{space 2} 3.130397{col 26}{space 2} .2453841{col 37}{space 5} 2.648622{col 51}{space 3} 3.612173
{txt}{space 3}spg_flex5 {c |}{col 14}{res}{space 2} 1.288869{col 26}{space 2} .1317601{col 37}{space 5} 1.030177{col 51}{space 3}  1.54756
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

        {txt}Urban: rural = {res}Urban
        {txt}Rural: rural = {res}Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex5      {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} 2.514697{col 26}{space 2} .7369867{col 37}{space 5} 1.067731{col 51}{space 3} 3.961662
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 13.49695{col 26}{space 2}  .910283{col 37}{space 5} 11.70974{col 51}{space 3} 15.28416
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex5     {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .4225311{col 26}{space 2} .1291678{col 37}{space 5}  .168929{col 51}{space 3} .6761332
{txt}{space 7}Rural {c |}{col 14}{res}{space 2}  3.54401{col 26}{space 2} .2771584{col 37}{space 5} 2.999849{col 51}{space 3}  4.08817
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex5    {txt}{c |}
{space 7}Urban {c |}{col 14}{res}{space 2} .1203835{col 26}{space 2} .0443277{col 37}{space 5} .0333524{col 51}{space 3} .2074145
{txt}{space 7}Rural {c |}{col 14}{res}{space 2} 1.467348{col 26}{space 2} .1505683{col 37}{space 5}  1.17173{col 51}{space 3} 1.762967
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

      {txt}KAMPALA: strata = {res}KAMPALA
    {txt}_subpop_2: strata = {res}CENTRAL 1
    {txt}_subpop_3: strata = {res}CENTRAL 2
    {txt}_subpop_4: strata = {res}EAST CENTRAL
      {txt}EASTERN: strata = {res}EASTERN
    {txt}_subpop_6: strata = {res}MID-NOTHERN
    {txt}_subpop_7: strata = {res}NORTH-EAST
    {txt}_subpop_8: strata = {res}WEST-NILE
    {txt}_subpop_9: strata = {res}MID-WESTERN
   {txt}_subpop_10: strata = {res}SOUTH-WESTERN

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex5      {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} 1.536145{col 26}{space 2} .8756774{col 37}{space 5}-.1831199{col 51}{space 3} 3.255409
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 4.596846{col 26}{space 2} 1.414618{col 37}{space 5}  1.81945{col 51}{space 3} 7.374241
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 7.398621{col 26}{space 2}  1.86434{col 37}{space 5} 3.738261{col 51}{space 3} 11.05898
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 8.127774{col 26}{space 2} 1.612551{col 37}{space 5} 4.961766{col 51}{space 3} 11.29378
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 11.80657{col 26}{space 2} 2.253825{col 37}{space 5} 7.381518{col 51}{space 3} 16.23163
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 13.57109{col 26}{space 2} 2.453822{col 37}{space 5} 8.753372{col 51}{space 3} 18.38882
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 70.87902{col 26}{space 2} 6.355412{col 37}{space 5}  58.4011{col 51}{space 3} 83.35694
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 15.24684{col 26}{space 2} 4.522476{col 37}{space 5} 6.367618{col 51}{space 3} 24.12606
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2}   15.421{col 26}{space 2} 2.497656{col 37}{space 5} 10.51722{col 51}{space 3} 20.32478
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 8.512285{col 26}{space 2} 1.293816{col 37}{space 5} 5.972066{col 51}{space 3}  11.0525
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex5     {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .2925525{col 26}{space 2} .1914458{col 37}{space 5}-.0833233{col 51}{space 3} .6684284
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .9680601{col 26}{space 2} .4098586{col 37}{space 5} .1633626{col 51}{space 3} 1.772758
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 1.449681{col 26}{space 2} .4288909{col 37}{space 5} .6076167{col 51}{space 3} 2.291746
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 1.403493{col 26}{space 2}  .283686{col 37}{space 5} .8465169{col 51}{space 3} 1.960469
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} 2.179867{col 26}{space 2} .4358689{col 37}{space 5} 1.324102{col 51}{space 3} 3.035632
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 4.231352{col 26}{space 2} .9562465{col 37}{space 5} 2.353902{col 51}{space 3} 6.108803
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 30.43896{col 26}{space 2} 3.662322{col 37}{space 5} 23.24852{col 51}{space 3} 37.62939
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 2.375038{col 26}{space 2} .4478871{col 37}{space 5} 1.495677{col 51}{space 3} 3.254399
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2}  4.43059{col 26}{space 2} .8898235{col 37}{space 5} 2.683551{col 51}{space 3} 6.177628
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 1.652293{col 26}{space 2} .3290748{col 37}{space 5} 1.006203{col 51}{space 3} 2.298384
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex5    {txt}{c |}
{space 5}KAMPALA {c |}{col 14}{res}{space 2} .0629525{col 26}{space 2} .0431566{col 37}{space 5}-.0217791{col 51}{space 3} .1476841
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3148945{col 26}{space 2} .1777363{col 37}{space 5}-.0340647{col 51}{space 3} .6638536
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .4430777{col 26}{space 2} .1498745{col 37}{space 5} .1488211{col 51}{space 3} .7373343
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .4290397{col 26}{space 2} .1033595{col 37}{space 5} .2261084{col 51}{space 3} .6319709
{txt}{space 5}EASTERN {c |}{col 14}{res}{space 2} .5661025{col 26}{space 2} .1102925{col 37}{space 5} .3495594{col 51}{space 3} .7826457
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2} 1.919205{col 26}{space 2} .5279879{col 37}{space 5} .8825783{col 51}{space 3} 2.955833
{txt}{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 16.32038{col 26}{space 2} 2.330739{col 37}{space 5} 11.74431{col 51}{space 3} 20.89644
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2}  .707712{col 26}{space 2} .1981374{col 37}{space 5} .3186981{col 51}{space 3} 1.096726
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 1.873539{col 26}{space 2} .5270293{col 37}{space 5} .8387938{col 51}{space 3} 2.908284
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .5020563{col 26}{space 2} .1436902{col 37}{space 5} .2199416{col 51}{space 3} .7841711
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

         {txt}Over: strata rural
    _subpop_1: {res}KAMPALA Urban
    {txt}_subpop_2: {res}CENTRAL 1 Urban
    {txt}_subpop_3: {res}CENTRAL 1 Rural
    {txt}_subpop_4: {res}CENTRAL 2 Urban
    {txt}_subpop_5: {res}CENTRAL 2 Rural
    {txt}_subpop_6: {res}EAST CENTRAL Urban
    {txt}_subpop_7: {res}EAST CENTRAL Rural
    {txt}_subpop_8: {res}EASTERN Urban
    {txt}_subpop_9: {res}EASTERN Rural
   {txt}_subpop_10: {res}MID-NOTHERN Urban
   {txt}_subpop_11: {res}MID-NOTHERN Rural
   {txt}_subpop_12: {res}NORTH-EAST Urban
   {txt}_subpop_13: {res}NORTH-EAST Rural
   {txt}_subpop_14: {res}WEST-NILE Urban
   {txt}_subpop_15: {res}WEST-NILE Rural
   {txt}_subpop_16: {res}MID-WESTERN Urban
   {txt}_subpop_17: {res}MID-WESTERN Rural
   {txt}_subpop_18: {res}SOUTH-WESTERN Urban
   {txt}_subpop_19: {res}SOUTH-WESTERN Rural

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex5      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.536145{col 26}{space 2} .8756774{col 37}{space 5}-.1831199{col 51}{space 3} 3.255409
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 2.160705{col 26}{space 2} 1.755188{col 37}{space 5}-1.285349{col 51}{space 3} 5.606759
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} 5.219631{col 26}{space 2} 1.655129{col 37}{space 5} 1.970027{col 51}{space 3} 8.469236
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} 2.008124{col 26}{space 2} 1.395066{col 37}{space 5} -.730883{col 51}{space 3} 4.747132
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 8.511507{col 26}{space 2} 2.164837{col 37}{space 5} 4.261165{col 51}{space 3} 12.76185
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 8.582742{col 26}{space 2} 1.691107{col 37}{space 5}   5.2625{col 51}{space 3} 11.90298
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 3.705768{col 26}{space 2} 2.352816{col 37}{space 5}-.9136424{col 51}{space 3} 8.325178
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 12.44788{col 26}{space 2}  2.37598{col 37}{space 5} 7.782995{col 51}{space 3} 17.11278
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} 5.029093{col 26}{space 2} 4.275589{col 37}{space 5}-3.365401{col 51}{space 3} 13.42359
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 14.50179{col 26}{space 2} 2.654047{col 37}{space 5} 9.290955{col 51}{space 3} 19.71262
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 6.831652{col 26}{space 2} 3.866863{col 37}{space 5}-.7603675{col 51}{space 3} 14.42367
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2} 73.25054{col 26}{space 2} 6.475744{col 37}{space 5} 60.53636{col 51}{space 3} 85.96472
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} 4.767413{col 26}{space 2}  4.38237{col 37}{space 5} -3.83673{col 51}{space 3} 13.37156
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 16.79927{col 26}{space 2} 4.885104{col 37}{space 5} 7.208081{col 51}{space 3} 26.39046
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 6.107057{col 26}{space 2}  6.00618{col 37}{space 5}-5.685199{col 51}{space 3} 17.89931
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 16.00316{col 26}{space 2} 2.586355{col 37}{space 5} 10.92523{col 51}{space 3} 21.08109
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 8.946063{col 26}{space 2} 1.343837{col 37}{space 5} 6.307635{col 51}{space 3} 11.58449
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex5     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .2925525{col 26}{space 2} .1914458{col 37}{space 5}-.0833233{col 51}{space 3} .6684284
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .2366553{col 26}{space 2} .2325039{col 37}{space 5}-.2198321{col 51}{space 3} .6931428
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2}  1.15504{col 26}{space 2} .4981149{col 37}{space 5} .1770638{col 51}{space 3} 2.133015
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2} .4611928{col 26}{space 2}  .328791{col 37}{space 5}-.1843404{col 51}{space 3} 1.106726
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} 1.653758{col 26}{space 2} .5033658{col 37}{space 5} .6654729{col 51}{space 3} 2.642043
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2} 1.482056{col 26}{space 2} .2987973{col 37}{space 5} .8954114{col 51}{space 3} 2.068701
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2} 1.005186{col 26}{space 2} .6345418{col 37}{space 5}-.2406437{col 51}{space 3} 2.251017
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} 2.272862{col 26}{space 2} .4607757{col 37}{space 5} 1.368196{col 51}{space 3} 3.177528
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .0090255{col 26}{space 2} .0076732{col 37}{space 5}-.0060398{col 51}{space 3} .0240908
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 4.691396{col 26}{space 2} 1.038639{col 37}{space 5}  2.65218{col 51}{space 3} 6.730612
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 5.072997{col 26}{space 2} 2.871426{col 37}{space 5}-.5646281{col 51}{space 3} 10.71062
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2}  31.3782{col 26}{space 2} 3.781728{col 37}{space 5} 23.95333{col 51}{space 3} 38.80307
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .4562932{col 26}{space 2} .4138343{col 37}{space 5}-.3562099{col 51}{space 3} 1.268796
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} 2.659282{col 26}{space 2} .4967745{col 37}{space 5} 1.683938{col 51}{space 3} 3.634626
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} 1.126471{col 26}{space 2} 1.107864{col 37}{space 5}-1.048657{col 51}{space 3} 3.301599
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 4.637111{col 26}{space 2} .9282584{col 37}{space 5} 2.814612{col 51}{space 3} 6.459611
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} 1.736493{col 26}{space 2} .3435749{col 37}{space 5} 1.061934{col 51}{space 3} 2.411052
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex5    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .0629525{col 26}{space 2} .0431566{col 37}{space 5}-.0217791{col 51}{space 3} .1476841
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0345435{col 26}{space 2} .0361906{col 37}{space 5}-.0365116{col 51}{space 3} .1055985
{txt}{space 3}_subpop_3 {c |}{col 14}{res}{space 2} .3865646{col 26}{space 2} .2192918{col 37}{space 5}-.0439829{col 51}{space 3} .8171121
{txt}{space 3}_subpop_4 {c |}{col 14}{res}{space 2}  .131518{col 26}{space 2} .0963433{col 37}{space 5} -.057638{col 51}{space 3} .3206739
{txt}{space 3}_subpop_5 {c |}{col 14}{res}{space 2} .5074002{col 26}{space 2} .1772148{col 37}{space 5} .1594648{col 51}{space 3} .8553356
{txt}{space 3}_subpop_6 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 3}_subpop_7 {c |}{col 14}{res}{space 2}  .453056{col 26}{space 2}   .10902{col 37}{space 5} .2390112{col 51}{space 3} .6671009
{txt}{space 3}_subpop_8 {c |}{col 14}{res}{space 2}  .273539{col 26}{space 2} .1722446{col 37}{space 5} -.064638{col 51}{space 3} .6117161
{txt}{space 3}_subpop_9 {c |}{col 14}{res}{space 2} .5892637{col 26}{space 2} .1167301{col 37}{space 5} .3600813{col 51}{space 3} .8184461
{txt}{space 2}_subpop_10 {c |}{col 14}{res}{space 2} .0000162{col 26}{space 2} .0000138{col 37}{space 5}-.0000108{col 51}{space 3} .0000432
{txt}{space 2}_subpop_11 {c |}{col 14}{res}{space 2} 2.128311{col 26}{space 2} .5776978{col 37}{space 5} .9940856{col 51}{space 3} 3.262536
{txt}{space 2}_subpop_12 {c |}{col 14}{res}{space 2} 3.767069{col 26}{space 2} 2.132242{col 37}{space 5}-.4192773{col 51}{space 3} 7.953415
{txt}{space 2}_subpop_13 {c |}{col 14}{res}{space 2}  16.7852{col 26}{space 2} 2.415009{col 37}{space 5} 12.04368{col 51}{space 3} 21.52671
{txt}{space 2}_subpop_14 {c |}{col 14}{res}{space 2} .0488132{col 26}{space 2} .0438306{col 37}{space 5}-.0372417{col 51}{space 3} .1348682
{txt}{space 2}_subpop_15 {c |}{col 14}{res}{space 2} .8053218{col 26}{space 2} .2307481{col 37}{space 5} .3522816{col 51}{space 3} 1.258362
{txt}{space 2}_subpop_16 {c |}{col 14}{res}{space 2} .2866992{col 26}{space 2} .2819635{col 37}{space 5}-.2668949{col 51}{space 3} .8402934
{txt}{space 2}_subpop_17 {c |}{col 14}{res}{space 2} 1.972723{col 26}{space 2} .5527828{col 37}{space 5} .8874147{col 51}{space 3} 3.058031
{txt}{space 2}_subpop_18 {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 2}_subpop_19 {c |}{col 14}{res}{space 2} .5276407{col 26}{space 2} .1505569{col 37}{space 5} .2320441{col 51}{space 3} .8232372
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
(running mean on estimation sample)
{res}
{txt}Survey: Mean estimation

{col 1}Number of strata{col 18}= {res}     10{txt}{col 34}Number of obs{col 51}= {res}      6775
{txt}{col 1}Number of PSUs{col 18}= {res}    711{txt}{col 34}Population size{col 51}={res}  200636622
{txt}{col 34}Design df{col 51}= {res}       701

    {txt}_subpop_1: spdomain = {res}Central rural
    {txt}_subpop_2: spdomain = {res}Central urban
      {txt}Eastern: spdomain = {res}Eastern
     {txt}Northern: spdomain = {res}Northern
      {txt}Western: spdomain = {res}Western

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 14}{hline 12}
{col 14}{c |}{col 26}  Linearized
{col 1}        Over{col 14}{c |}       Mean{col 26}   Std. Err.{col 38}     [95% Con{col 51}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}h_flex5      {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 6.877505{col 26}{space 2} 1.381672{col 37}{space 5} 4.164794{col 51}{space 3} 9.590216
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} 1.799244{col 26}{space 2} .7005769{col 37}{space 5} .4237641{col 51}{space 3} 3.174725
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 10.15345{col 26}{space 2} 1.452561{col 37}{space 5} 7.301557{col 51}{space 3} 13.00534
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 23.40979{col 26}{space 2} 2.180005{col 37}{space 5} 19.12967{col 51}{space 3} 27.68991
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 12.06716{col 26}{space 2} 1.473889{col 37}{space 5} 9.173396{col 51}{space 3} 14.96093
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}pg_flex5     {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} 1.406207{col 26}{space 2} .3553552{col 37}{space 5} .7085191{col 51}{space 3} 2.103895
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .3139595{col 26}{space 2} .1380611{col 37}{space 5} .0428968{col 51}{space 3} .5850222
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} 1.830991{col 26}{space 2} .2765018{col 37}{space 5}  1.28812{col 51}{space 3} 2.373862
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 7.845333{col 26}{space 2} .8977457{col 37}{space 5}  6.08274{col 51}{space 3} 9.607925
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 3.081866{col 26}{space 2} .5089235{col 37}{space 5} 2.082669{col 51}{space 3} 4.081063
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 14}{hline 12}
{res}spg_flex5    {txt}{c |}
{space 3}_subpop_1 {c |}{col 14}{res}{space 2} .4474206{col 26}{space 2} .1408939{col 37}{space 5}  .170796{col 51}{space 3} .7240451
{txt}{space 3}_subpop_2 {c |}{col 14}{res}{space 2} .0701778{col 26}{space 2}  .032498{col 37}{space 5} .0063727{col 51}{space 3} .1339829
{txt}{space 5}Eastern {c |}{col 14}{res}{space 2} .5045112{col 26}{space 2} .0770385{col 37}{space 5} .3532574{col 51}{space 3}  .655765
{txt}{space 4}Northern {c |}{col 14}{res}{space 2} 3.840472{col 26}{space 2} .5316783{col 37}{space 5} 2.796599{col 51}{space 3} 4.884345
{txt}{space 5}Western {c |}{col 14}{res}{space 2} 1.207752{col 26}{space 2} .2945701{col 37}{space 5} .6294072{col 51}{space 3} 1.786098
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 14}{hline 12}
rural was {res}float{txt} now {res}byte
{txt}news was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}reg_tpi was {res}float{txt} now {res}byte
{txt}h_flex5 was {res}float{txt} now {res}byte
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/cons_real_it5.dta saved

    Variable {c |}     Obs      Weight        Mean   Std. Dev.       Min        Max
{hline 13}{c +}{hline 65}
{space 5}h_flex5 {c |}{res}    6775   200636622    12.04174   32.54731          0        100
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/foodshares_it5.dta saved

{com}. **************************************************************************
> * Send results to one big csv-file
> **************************************************************************;
. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         gen dum=1;
{txt}
{com}.         collapse (mean) dum h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt];
{txt}
{com}. gen geo="National";
{txt}
{com}. gen geono=dum;
{txt}
{com}. tempfile nat;
{txt}
{com}. save `nat';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000014.tmp saved

{com}.         use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(rural);
{txt}
{com}. gen geo="Rural/Urban";
{txt}
{com}. gen geono=rural;
{txt}
{com}. tempfile rur;
{txt}
{com}. save `rur';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000015.tmp saved

{com}. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(news);
{txt}
{com}. gen geo="North/Center/South";
{txt}
{com}. gen geono=news;
{txt}
{com}. tempfile new;
{txt}
{com}. save `new';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000016.tmp saved

{com}. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(reg_tpi);
{txt}
{com}. gen geo="TPI - 6 regions";
{txt}
{com}. gen geono=reg_tpi;
{txt}
{com}. tempfile rtp;
{txt}
{com}. save `rtp';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000017.tmp saved

{com}. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(strata);
{txt}
{com}. gen geo="Provinces";
{txt}
{com}. gen geono=strata;
{txt}
{com}. tempfile str;
{txt}
{com}. save `str';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000018.tmp saved

{com}. use "$path/work/cons_real_it`lastpass'.dta", clear ;
{txt}
{com}.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' [aw=popwt], by(spdomain);
{txt}
{com}. gen geo="Spatial domains";
{txt}
{com}. gen geono=spdomain;
{txt}
{com}. tempfile r13;
{txt}
{com}. save `r13';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000019.tmp saved

{com}. clear;
{txt}
{com}. set obs 1;
{txt}obs was 0, now 1

{com}. gen geo=" ";
{txt}
{com}. tempfile one;
{txt}
{com}. save `one';
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00001a.tmp saved

{com}. use          `nat';
{txt}
{com}. append using `one';
{txt}
{com}. append using `rur';
{txt}geo was {res}str8{txt} now {res}str11
{txt}
{com}. append using `one';
{txt}
{com}. append using `new';
{txt}geo was {res}str11{txt} now {res}str18
{txt}
{com}. append using `one';
{txt}
{com}. append using `rtp';
{txt}
{com}. append using `one';
{txt}
{com}. append using `str';
{txt}
{com}. append using `one';
{txt}
{com}. append using `r13';
{txt}
{com}. outsheet geo geono h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpass' dum rural news reg_tpi strata spdomain using "$path\work\poverty_flexBask.csv", replace c;
{txt}
{com}. **************************************************************************
> * Convergence graph (based on 5 iterations)
> **************************************************************************;
. #delimit cr
{txt}delimiter now cr
{com}. 
. clear
{txt}
{com}. set obs 1
{txt}obs was 0, now 1

{com}. gen iteration=.
{txt}(1 missing value generated)

{com}. tempfile converg
{txt}
{com}. save `converg'
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00001b.tmp saved

{com}. 
. forvalues X = 1/5 {c -(}
{txt}  2{com}.         use "$path/work/cons_real_it`X'.dta", clear
{txt}  3{com}.         collapse (mean) h_flex`X' pg_flex`X' spg_flex`X' [aw=popwt], by(strata)
{txt}  4{com}.         rename h_flex`X' h_flex
{txt}  5{com}.         rename pg_flex`X' pg_flex
{txt}  6{com}.         rename spg_flex`X' spg_flex
{txt}  7{com}.         gen iteration=`X'
{txt}  8{com}.         order iteration
{txt}  9{com}.         *sum
.         if `X' != 1     {c -(}
{txt} 10{com}.                 append using `converg'
{txt} 11{com}.                         {c )-}
{txt} 12{com}.         save `converg', replace
{txt} 13{com}.         {c )-}
{txt}file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00001b.tmp saved
(label STRA already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00001b.tmp saved
(label STRA already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00001b.tmp saved
(label STRA already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00001b.tmp saved
(label STRA already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00001b.tmp saved

{com}. 
. use `converg', clear
{txt}
{com}. sum

{txt}    Variable {c |}       Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 56}
{space 3}iteration {c |}{res}        50           3    1.428571          1          5
{txt}{space 6}strata {c |}{res}        50         5.5    2.901442          1         10
{txt}{space 6}h_flex {c |}{res}        50    15.47076    19.09625   1.358707   70.87902
{txt}{space 5}pg_flex {c |}{res}        50    4.875141    8.607972   .2704303   30.44189
{txt}{space 4}spg_flex {c |}{res}        50    2.280654    4.702109   .0547742   16.32243
{txt}
{com}. 
. twoway (connected h_flex iteration), by(, title(Convergence graph: Poverty rate. %) subtitle(After iterative procedure)) by(strata)
{res}{txt}
{com}. graph export "$path/work/converge_pov_rate.tif", replace
{txt}(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/converge_pov_rate.tif written in TIFF format)

{com}. 
. sort strata iteration
{txt}
{com}. 
. for var h_flex pg_flex spg_flex: replace X = round(X,0.01)

{res}->  replace h_flex = round(h_flex,0.01)
{txt}(50 real changes made)

{res}->  replace pg_flex = round(pg_flex,0.01)
{txt}(50 real changes made)

{res}->  replace spg_flex = round(spg_flex,0.01)
{txt}(50 real changes made)

{com}. 
. list strata iteration h_flex pg_flex spg_flex
{txt}
     {c TLC}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}       strata   iterat~n   h_flex   pg_flex   spg_flex {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}      KAMPALA          1     4.17        .6        .13 {txt}{c |}
  2. {c |} {res}      KAMPALA          2     1.54        .3        .06 {txt}{c |}
  3. {c |} {res}      KAMPALA          3     1.54       .29        .06 {txt}{c |}
  4. {c |} {res}      KAMPALA          4     1.36       .27        .05 {txt}{c |}
  5. {c |} {res}      KAMPALA          5     1.54       .29        .06 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}    CENTRAL 1          1     4.69      1.01        .33 {txt}{c |}
  7. {c |} {res}    CENTRAL 1          2      4.6       .94         .3 {txt}{c |}
  8. {c |} {res}    CENTRAL 1          3      4.6       .97        .31 {txt}{c |}
  9. {c |} {res}    CENTRAL 1          4      4.6       .93         .3 {txt}{c |}
 10. {c |} {res}    CENTRAL 1          5      4.6       .97        .31 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}    CENTRAL 2          1     7.47      1.48        .45 {txt}{c |}
 12. {c |} {res}    CENTRAL 2          2     6.94       1.4        .43 {txt}{c |}
 13. {c |} {res}    CENTRAL 2          3      7.4      1.45        .44 {txt}{c |}
 14. {c |} {res}    CENTRAL 2          4     6.94      1.39        .42 {txt}{c |}
 15. {c |} {res}    CENTRAL 2          5      7.4      1.45        .44 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res} EAST CENTRAL          1     8.13       1.4        .43 {txt}{c |}
 17. {c |} {res} EAST CENTRAL          2     5.45      1.09        .32 {txt}{c |}
 18. {c |} {res} EAST CENTRAL          3     8.13      1.41        .43 {txt}{c |}
 19. {c |} {res} EAST CENTRAL          4     5.45      1.09        .32 {txt}{c |}
 20. {c |} {res} EAST CENTRAL          5     8.13       1.4        .43 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 21. {c |} {res}      EASTERN          1    11.81      2.18        .57 {txt}{c |}
 22. {c |} {res}      EASTERN          2     9.29      1.65        .39 {txt}{c |}
 23. {c |} {res}      EASTERN          3    11.81      2.18        .57 {txt}{c |}
 24. {c |} {res}      EASTERN          4     9.29      1.65        .39 {txt}{c |}
 25. {c |} {res}      EASTERN          5    11.81      2.18        .57 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 26. {c |} {res}  MID-NOTHERN          1     12.7      4.13       1.87 {txt}{c |}
 27. {c |} {res}  MID-NOTHERN          2     12.7      4.13       1.87 {txt}{c |}
 28. {c |} {res}  MID-NOTHERN          3    13.57      4.23       1.92 {txt}{c |}
 29. {c |} {res}  MID-NOTHERN          4     12.7      4.13       1.87 {txt}{c |}
 30. {c |} {res}  MID-NOTHERN          5    13.57      4.23       1.92 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 31. {c |} {res}   NORTH-EAST          1    70.69     29.98         16 {txt}{c |}
 32. {c |} {res}   NORTH-EAST          2    70.69     29.96      15.99 {txt}{c |}
 33. {c |} {res}   NORTH-EAST          3    70.88     30.44      16.32 {txt}{c |}
 34. {c |} {res}   NORTH-EAST          4    70.69     29.98         16 {txt}{c |}
 35. {c |} {res}   NORTH-EAST          5    70.88     30.44      16.32 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 36. {c |} {res}    WEST-NILE          1    14.92      2.23        .67 {txt}{c |}
 37. {c |} {res}    WEST-NILE          2    14.92      2.22        .67 {txt}{c |}
 38. {c |} {res}    WEST-NILE          3    15.25      2.38        .71 {txt}{c |}
 39. {c |} {res}    WEST-NILE          4    14.92      2.23        .67 {txt}{c |}
 40. {c |} {res}    WEST-NILE          5    15.25      2.38        .71 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 41. {c |} {res}  MID-WESTERN          1    15.53      4.49        1.9 {txt}{c |}
 42. {c |} {res}  MID-WESTERN          2    15.42      4.43       1.87 {txt}{c |}
 43. {c |} {res}  MID-WESTERN          3    15.42      4.39       1.85 {txt}{c |}
 44. {c |} {res}  MID-WESTERN          4    15.53      4.58       1.95 {txt}{c |}
 45. {c |} {res}  MID-WESTERN          5    15.42      4.43       1.87 {txt}{c |}
     {c LT}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c RT}
 46. {c |} {res}SOUTH-WESTERN          1     8.57      1.69        .51 {txt}{c |}
 47. {c |} {res}SOUTH-WESTERN          2     8.51      1.65         .5 {txt}{c |}
 48. {c |} {res}SOUTH-WESTERN          3     8.51      1.63        .49 {txt}{c |}
 49. {c |} {res}SOUTH-WESTERN          4     9.18      1.75        .53 {txt}{c |}
 50. {c |} {res}SOUTH-WESTERN          5     8.51      1.65         .5 {txt}{c |}
     {c BLC}{hline 15}{c -}{hline 10}{c -}{hline 8}{c -}{hline 9}{c -}{hline 10}{c BRC}

{com}.         
. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 140_iterate.do        (end)
> **************************************************************************;
. cap log close;
{txt}
{com}. 
{txt}end of do-file

{com}.                                 
. $no_temp_rev    do "$path/new/150_price_unit_fix.do"    /* Fixed basket: Prices */
{txt}
{com}. $no_temp_rev    do "$path/new/160_food_basket_fix.do"   /* Fixed food basket */
{txt}
{com}. 
.                                 do "$path/new/170_pref_r_price.do"              /* Revealed preference tests */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/170_pref_r_price.log", replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/170_pref_r_price.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:58:39
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. **************************************************************************
> * 170_pref_r_price.do           (start)
> *
> * This file conducts revealed preference comparisons so that
> * we can check the quality of the regional baskets.
> * It also exports the price and quantity data for work in GAMS
> * Rather than make up for missing prices with shares, we estimate
> * a missing price in this case
> **************************************************************************;
. *global n_spdom "13";
. *global it_n "5";
. /*
> This file uses:
>         work\quan_flex_it$it_n.dta
>         work\povline_food_flex_it$it_n.dta
>         work\price_unit_flex_it$it_n.dta
>                 
> This file creates:
>         work\pref_r_price.dta
>         work\revpref_price_`i'.dta
>         work\product_flex.inc
>         work\price_unit_flex.inc
>         work\quan_flex.inc
> */
> 
> 
> 
> ***************************************************************************;
. * Export price, codes and quantity data to text
> ***************************************************************************;
. use "$path\work\price_unit_flex_it$it_n.dta";
{txt}
{com}. gen reg=spdomain ;
{txt}
{com}. gen crap=1;
{txt}
{com}.  lab def crap
>          1  ".";
{txt}
{com}.  lab val crap crap;
{txt}
{com}. outsheet product crap reg bswt price_uw$it_n using "$path\work\price_unit_flex.inc",  noname replace ;
{txt}
{com}. collapse (min) spdomain, by(product);
{txt}
{com}. outsheet product  using "$path\work\product_flex.inc", noquote noname replace;
{txt}
{com}. use "$path\work\quan_flex_it$it_n.dta", clear;
{txt}
{com}. gen reg=spdomain;
{txt}
{com}. gen crap=1;
{txt}
{com}.  lab def crap
>          1  ".";
{txt}
{com}.  lab val crap crap;
{txt}
{com}. format calperg quan$it_n calpp %14.9e;
{txt}
{com}. outsheet  product crap reg calperg quan$it_n  calpp povline_f_flex90_$it_n using "$path\work\quan_flex.inc", noname noquote replace;
{txt}
{com}. clear;
{txt}
{com}. **************************************************************************;
. * Revealed preference calculations
> * get the basket for the region we want to test
> **************************************************************************;
. tempfile quanreg;
{txt}
{com}. tempfile getmiss;
{txt}
{com}. tempfile codmiss;
{txt}
{com}. gen crap=0;
{txt}
{com}. save "$path\work\pref_r_price.dta", replace;
{txt}(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved

{com}. forvalues i=1/$n_spdom {c -(}                ;
{txt}  2{com}.         clear;
{txt}  3{com}.         gen crap=0;
{txt}  4{com}.         save "$path\work\revpref_price_`i'.dta", replace;
{txt}  5{com}.         clear;
{txt}  6{com}.                 use "$path\work\quan_flex_it$it_n.dta", clear;
{txt}  7{com}.                 keep product spdomain quan$it_n price_uw$it_n val_ir$it_n povline_f_flex90_$it_n calpp;
{txt}  8{com}.         gen share=val_ir$it_n/povline_f_flex90_$it_n;
{txt}  9{com}.         rename price_uw$it_n pquanreg;
{txt} 10{com}.         rename spdomain spdomainq;
{txt} 11{com}.         drop if spdomainq~= `i';
{txt} 12{com}.         sort product;
{txt} 13{com}.                                 *rescale quantities to hit constant calorie target;
.                 gen ratquan=2150/calpp;
{txt} 14{com}.             gen quan_s=quan$it_n*ratquan;
{txt} 15{com}.             lab var quan_s "quantities rescaled to hit 2150 calories pp";
{txt} 16{com}.         save `quanreg', replace;
{txt} 17{com}. **************************************************************************;
. * Now get the prices in other regions so that you can use them 
> * to build  a new poverty line
> **************************************************************************;
.         forvalues j= 1/$n_spdom {c -(}               ;
{txt} 18{com}.                 use "$path\work\price_unit_flex_it$it_n.dta";
{txt} 19{com}.                                 keep product spdomain price_uw$it_n descript count bswt;
{txt} 20{com}.                         sort product;
{txt} 21{com}.                 keep if spdomain==`j';
{txt} 22{com}.                 sort product;
{txt} 23{com}.                 merge product using `quanreg';
{txt} 24{com}.                     *here we have to deal with the fact that not all commodities are consumed in every region;
.                 *so we might have a quantity from region i but no price in region j;
.                 *these will have _merge value=2;
.                 *alternatively the number of observations might be too small;
.                 *deal with these problems by TAKING THE MAX PRICE OBSERVED ELSEWHERE (excluding Maputo)
>                         
>                 tab _m;
.                 drop if _m==1;
{txt} 25{com}.                                 *CA modified to handle the counting of bswt instead of count
>                   replace price_uw$it_n=. if round(bswt)<5;
.                         gen pricemiss=0;
{txt} 26{com}.                   replace spdomain=`j' if _m==2 ;
{txt} 27{com}.                   replace pricemiss=1 if _m==2 | round(bswt)<5;
{txt} 28{com}.                         lab var pricemiss "identify those items with no price observation";
{txt} 29{com}.                   drop _m;
{txt} 30{com}.                         sort product;
{txt} 31{com}. *browse;
.                *this is the tempfile containing observed quans and prices;
.              save `getmiss', replace;
{txt} 32{com}.                         keep if pricemiss==1;
{txt} 33{com}.                         if _N>0 {c -(}
>                             keep product;
{txt} 34{com}.                                             sort product;
{txt} 35{com}.                                             *this file contains the price codes that are missing for the region in question;
.                             save `codmiss', replace;
{txt} 36{com}. *browse;
.                                   use "$path\work\price_unit_flex_it$it_n.dta", clear;
{txt} 37{com}.                         sort product;
{txt} 38{com}. *browse;
.                         merge product using `codmiss';
{txt} 39{com}.                                                 tab _m;
{txt} 40{com}.                         keep if _m==3 ;
{txt} 41{com}.                                 *exclude Maputo province and city from other price calculation;
.                                 drop if spdomain>10;
{txt} 42{com}.                         collapse (max) price_uw$it_n, by(product);
{txt} 43{com}.                   *this file contains the code and the max price;
.                   save `codmiss', replace;
{txt} 44{com}. *browse;
.                         use `getmiss';
{txt} 45{com}.                               merge product using `codmiss';
{txt} 46{com}. *browse;
.                         tab _m;
{txt} 47{com}.                         drop _m;
{txt} 48{com}.                         *end if;
.                  {c )-};
{txt} 49{com}.                                                             else use `getmiss', clear;
{txt} 50{com}.                         gen val_q=quan_s*price_uw$it_n;
{txt} 51{com}.                                                 collapse (sum) val_q pricemiss (mean) spdomainq ratquan, by(spdomain);
{txt} 52{com}.                   gen linf_q=val_q/.9;
{txt} 53{com}.                   drop val_q;
{txt} 54{com}.                         append using "$path\work\revpref_price_`i'.dta";
{txt} 55{com}.                         sort spdomain;
{txt} 56{com}.                 save "$path\work\revpref_price_`i'.dta", replace;
{txt} 57{com}.    *browse;
.         *close j loop;
.         {c )-};
{txt} 58{com}.         *aggregate into a big data set;
.         append using "$path\work\pref_r_price.dta";
{txt} 59{com}.       sort spdomain spdomainq;
{txt} 60{com}.       save "$path\work\pref_r_price.dta", replace;
{txt} 61{com}.  *close i loop;
. {c )-};
{txt}(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(106 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(0 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(27 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(175 observations deleted)
(label spdomain_original already defined)
(12 observations deleted)
(1 real change made)
(2 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(25 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        204       95.77       95.77
{txt}          3 {c |}{res}          9        4.23      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(204 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         25       92.59       92.59
{txt}          3 {c |}{res}          2        7.41      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         27      100.00
{txt}(1 missing value generated)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(27 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(170 observations deleted)
(label spdomain_original already defined)
(16 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(26 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        208       97.65       97.65
{txt}          3 {c |}{res}          5        2.35      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(208 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         26       96.30       96.30
{txt}          3 {c |}{res}          1        3.70      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         27      100.00
{txt}(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(27 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_1.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_2.dta saved
(110 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved
(169 observations deleted)
(label spdomain_original already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(23 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_2.dta saved
(175 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(23 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_2.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(23 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_2.dta saved
(170 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(23 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_2.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(23 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_2.dta saved
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_3.dta saved
(106 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(26 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        208       97.65       97.65
{txt}          3 {c |}{res}          5        2.35      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(208 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         26       96.30       96.30
{txt}          3 {c |}{res}          1        3.70      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         27      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_3.dta saved
(175 observations deleted)
(label spdomain_original already defined)
(13 observations deleted)
(2 real changes made)
(3 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(24 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        200       93.90       93.90
{txt}          3 {c |}{res}         13        6.10      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(200 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         24       88.89       88.89
{txt}          3 {c |}{res}          3       11.11      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         27      100.00
{txt}(2 missing values generated)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_3.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(27 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_3.dta saved
(170 observations deleted)
(label spdomain_original already defined)
(16 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(27 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_3.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(27 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_3.dta saved
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_4.dta saved
(106 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(4 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(23 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        194       91.08       91.08
{txt}          3 {c |}{res}         19        8.92      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(194 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         23       85.19       85.19
{txt}          3 {c |}{res}          4       14.81      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         27      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_4.dta saved
(175 observations deleted)
(label spdomain_original already defined)
(14 observations deleted)
(3 real changes made)
(7 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(20 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        181       84.98       84.98
{txt}          3 {c |}{res}         32       15.02      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(181 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         20       74.07       74.07
{txt}          3 {c |}{res}          7       25.93      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         27      100.00
{txt}(3 missing values generated)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_4.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(27 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_4.dta saved
(170 observations deleted)
(label spdomain_original already defined)
(16 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(27 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_4.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(26 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        209       98.12       98.12
{txt}          3 {c |}{res}          4        1.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(209 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         26       96.30       96.30
{txt}          3 {c |}{res}          1        3.70      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         27      100.00
{txt}(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_4.dta saved
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_5.dta saved
(104 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved
(169 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(28 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        209       98.12       98.12
{txt}          3 {c |}{res}          4        1.88      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(209 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         28       96.55       96.55
{txt}          3 {c |}{res}          1        3.45      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         29      100.00
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_5.dta saved
(175 observations deleted)
(label spdomain_original already defined)
(11 observations deleted)
(2 real changes made)
(3 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(26 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        200       93.90       93.90
{txt}          3 {c |}{res}         13        6.10      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(200 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         26       89.66       89.66
{txt}          3 {c |}{res}          3       10.34      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         29      100.00
{txt}(2 missing values generated)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_5.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(29 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_5.dta saved
(170 observations deleted)
(label spdomain_original already defined)
(14 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(28 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved
{p 0 4 2}
variable{txt} product
does not uniquely identify observations in
the master data
{p_end}
(label spdomain_original already defined)

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        208       97.65       97.65
{txt}          3 {c |}{res}          5        2.35      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        213      100.00
{txt}(208 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000003.tmp saved

     _merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         28       96.55       96.55
{txt}          3 {c |}{res}          1        3.45      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         29      100.00
{txt}(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_5.dta saved
(169 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved
(29 observations deleted)
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\revpref_price_5.dta saved
(label spdomain_original already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved

{com}. *bring in actual flexible bundle numbers;
. use "$path\work\povline_food_flex_it$it_n.dta", clear;
{txt}
{com}.         merge spdomain using "$path\work\pref_r_price.dta";
{txt}{p 0 4 2}
variable{txt} spdomain
does not uniquely identify observations in
C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta
{p_end}
(label spdomain_original already defined)

{com}.         tab _m;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}         25      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         25      100.00
{txt}
{com}.          drop crap;
{txt}
{com}.         drop _m;
{txt}
{com}.         order spdomainq spdomain;
{txt}
{com}.       sort spdomainq spdomain;
{txt}
{com}.         *rescale expenditures to hit a constant calorie target;
.         gen povline_f5_s=ratquan*povline_f_flex90_$it_n;
{txt}
{com}.       compress;
{txt}spdomainq was {res}float{txt} now {res}byte
{txt}spdomain was {res}float{txt} now {res}byte
{txt}pricemiss was {res}double{txt} now {res}byte
{txt}
{com}. *browse;
.         *categorize revealed preference performance;
.       gen pref_r=0;
{txt}
{com}.       replace pref_r=1 if float(linf_q)>float(povline_f5_s);
{txt}(14 real changes made)

{com}.       replace pref_r=2 if float(linf_q)<float(povline_f5_s);
{txt}(6 real changes made)

{com}.       lab var pref_r "Fails or passes revealed preference test";
{txt}
{com}.       lab def pref_r
>                         0 "comparison of the same region with itself"
>                         1 "passes revealed preference test"
>                         2 "fails revealed preference test" ;
{txt}
{com}.         lab val pref_r pref_r;
{txt}
{com}.       drop if spdomainq==spdomain;
{txt}(5 observations deleted)

{com}.         tab pref_r;

    {txt}Fails or passes revealed preference {c |}
                                   test {c |}      Freq.     Percent        Cum.
{hline 40}{c +}{hline 35}
        passes revealed preference test {c |}{res}         14       70.00       70.00
{txt}         fails revealed preference test {c |}{res}          6       30.00      100.00
{txt}{hline 40}{c +}{hline 35}
                                  Total {c |}{res}         20      100.00
{txt}
{com}.              sort spdomainq ;
{txt}
{com}.       by spdomainq: tab pref_r;

{txt}{hline}
-> spdomainq = 1

    Fails or passes revealed preference {c |}
                                   test {c |}      Freq.     Percent        Cum.
{hline 40}{c +}{hline 35}
        passes revealed preference test {c |}{res}          3       75.00       75.00
{txt}         fails revealed preference test {c |}{res}          1       25.00      100.00
{txt}{hline 40}{c +}{hline 35}
                                  Total {c |}{res}          4      100.00

{txt}{hline}
-> spdomainq = 2

    Fails or passes revealed preference {c |}
                                   test {c |}      Freq.     Percent        Cum.
{hline 40}{c +}{hline 35}
        passes revealed preference test {c |}{res}          4      100.00      100.00
{txt}{hline 40}{c +}{hline 35}
                                  Total {c |}{res}          4      100.00

{txt}{hline}
-> spdomainq = 3

    Fails or passes revealed preference {c |}
                                   test {c |}      Freq.     Percent        Cum.
{hline 40}{c +}{hline 35}
        passes revealed preference test {c |}{res}          2       50.00       50.00
{txt}         fails revealed preference test {c |}{res}          2       50.00      100.00
{txt}{hline 40}{c +}{hline 35}
                                  Total {c |}{res}          4      100.00

{txt}{hline}
-> spdomainq = 4

    Fails or passes revealed preference {c |}
                                   test {c |}      Freq.     Percent        Cum.
{hline 40}{c +}{hline 35}
        passes revealed preference test {c |}{res}          1       25.00       25.00
{txt}         fails revealed preference test {c |}{res}          3       75.00      100.00
{txt}{hline 40}{c +}{hline 35}
                                  Total {c |}{res}          4      100.00

{txt}{hline}
-> spdomainq = 5

    Fails or passes revealed preference {c |}
                                   test {c |}      Freq.     Percent        Cum.
{hline 40}{c +}{hline 35}
        passes revealed preference test {c |}{res}          4      100.00      100.00
{txt}{hline 40}{c +}{hline 35}
                                  Total {c |}{res}          4      100.00

{txt}
{com}. save "$path\work\pref_r_price.dta", replace;
{txt}file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\pref_r_price.dta saved

{com}. *drop comparisons with Maputo this does not matter since in the case of Uganda, we have only 5 spatial domains****
> drop if spdomain>=11;
. drop if spdomainq>=11;
{txt}(0 observations deleted)

{com}. display "this is with maputo dropped";
{res}this is with maputo dropped
{txt}
{com}. tab pref_r;

    {txt}Fails or passes revealed preference {c |}
                                   test {c |}      Freq.     Percent        Cum.
{hline 40}{c +}{hline 35}
        passes revealed preference test {c |}{res}         14       70.00       70.00
{txt}         fails revealed preference test {c |}{res}          6       30.00      100.00
{txt}{hline 40}{c +}{hline 35}
                                  Total {c |}{res}         20      100.00
{txt}
{com}. *further drop Nampula rural and urban I set these to missing becuase they were deleting maputo and yet we have none missing for Uganda***
> drop if spdomain==. | spdomain==.;
. display "this is with maputo and nampula dropped (MAH: Actually not - experimenting with 6 spatial domains)";
{res}this is with maputo and nampula dropped (MAH: Actually not - experimenting with 6 spatial domains)
{txt}
{com}. tab pref_r;

    {txt}Fails or passes revealed preference {c |}
                                   test {c |}      Freq.     Percent        Cum.
{hline 40}{c +}{hline 35}
        passes revealed preference test {c |}{res}         14       70.00       70.00
{txt}         fails revealed preference test {c |}{res}          6       30.00      100.00
{txt}{hline 40}{c +}{hline 35}
                                  Total {c |}{res}         20      100.00
{txt}
{com}. **************************************************************************
> * 170_pref_r_price.do           (end)
> **************************************************************************;
. log close;
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/170_pref_r_price.log
  {txt}log type:  {res}text
 {txt}closed on:  {res}17 May 2013, 14:58:40
{txt}{.-}

{com}. 
{txt}end of do-file

{com}.                                 di  "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@here"                                
{res}@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@here
{txt}
{com}. 
. $no_temp_rev    do "$path/new/180_povline_food_fix.do"  /* Inflating year t1's poverty lines to year t2 */
{txt}
{com}. 
.                                 shell "$path/new/$revpref"                              /* Adjusting flexible basket: inside pref. constraints */
{txt}
{com}. 
. $no_temp_rev    do "$path/new/200_povmeas_fix.do"               /* Fixed basket: Poverty rates */
{txt}
{com}.                                 do "$path/new/210_povmeas_ent_flex.do"  /* Flexible basket, adjusted: Poverty rates */
{txt}
{com}. *global path "C:\user\gapp"
. clear all
{txt}
{com}. set mem 999m
{txt}
{com}. 
. cap log close
{txt}
{com}. log using "$path/rep/210_povmeas_ent_flex.log" , replace
{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/210_povmeas_ent_flex.log
  {txt}log type:  {res}text
 {txt}opened on:  {res}17 May 2013, 14:58:40
{txt}
{com}. clear
{txt}
{com}. set more off
{txt}
{com}. #delimit ;
{txt}delimiter now ;
{com}. *********************************************************************************
> * 210_povmeas_ent_flex.do               (start)
> *
> * This file produces poverty measures taking the entropy adjusted poverty 
> * lines as a base. It produces two sets of poverty measures. In one, 
> * Maputo is treated with the logic of the fixed bundle. In the second, the revealed preference logic
> * is maintained. Here, the flexible bundle is viewed as being determined by the 
> * lower constraint on the value of the food bundle dictated by P_t2*Q_t1. In this case,
> * the year t2 food shares are calculated and applied.
> *
> * Fixed poverty lines/etc. are mentioned here and there. But there are NO fixed
> * calculations for Maputo (or other provinces) anymore
> *
> *********************************************************************************;
. /*
> This file uses:
>         work\povline_food_ent.csv
>         work\conpc.dta
>         work\hhdata.dta
>         work/temp_index_reg_tpi.dta
> 
> This file creates:
>         work\povlines_ent.dta
>         work\povmeas_ent_flex.dta
>         work\povlines_ent.dta
>       work\nat_pov_ent_m.csv
>       work\rur_pov_ent_m.csv
>       work\news_pov_ent_m.csv
>       work\reg_tpi_pov_ent_m.csv
>       work\strata_pov_ent_m.csv
>       work\spdomain_pov_ent_m.csv
>       work\spdomain_pov_ent_m.csv
>         work\povlines_ent.csv
> */
> 
> 
> 
> **************************************************************************;
. * Bring in data file with nominal consumption per capita, and deflate it
> * by temporal price index.
> **************************************************************************;
. use "$path/work/hhdata.dta", clear;
{txt}
{com}.         sort reg_tpi survquar;
{txt}
{com}.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.dta";
{txt}{p 0 4 2}
variable{txt}s{txt} reg_tpi
survquar
do not uniquely identify observations in
the master data
{p_end}
(label lsurvquar already defined)
(label REG_TPI already defined)

{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         sort hhid;
{txt}
{com}.         merge hhid using "$path/work/conpc.dta";
{txt}
{com}.         tab _merge;

     {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          3 {c |}{res}      6,775      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      6,775      100.00
{txt}
{com}.         drop _merge;
{txt}
{com}.         gen food_pc_tpi  = food_pc_nom /tpi_trim;
{txt}
{com}.         lab var food_pc_tpi "Temp-adjusted per capita food consumption/day";
{txt}
{com}.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
{txt}
{com}.         lab var cons_pc_tpi "Temp adjusted total consumption/day";
{txt}
{com}.         gen one=1;
{txt}
{com}.         tempfile contpi;
{txt}
{com}. save `contpi', replace;
{txt}(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

{com}. **************************************************************************;
. * Calculate the food shares for people near the food poverty line
> **************************************************************************;
. *Bring in entropy estimated flexible lines;
. clear;
{txt}
{com}. insheet using "$path\work\povline_food_ent.csv";
{err}{p 0 4 2}
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\work\povline_food_ent.csv
not found
{p_end}
{txt}{search r(601):r(601);}

end of do-file
{search r(601):r(601);}

end of do-file

{search r(601):r(601);}

{com}. exit, clear
