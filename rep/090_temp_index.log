-------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/rep/090_temp_index.lo
> g
  log type:  text
 opened on:  20 May 2013, 14:39:07

. clear

. set more off

. #delimit ;
delimiter now ;
. **************************************************************************
> * 090_temp_index.do     (start)
> **************************************************************************;
. *do "$path/new/010_initial.do";
. **************************************************************************
> * Program to compute the temporal price index (intra-survey)
> * 
> * The index is based on 6 regions (North/Center/South by rural/urban) 
> * and four quarters. For IAF 2002/03 (t=t1) it is based on the same 9
> * commodities used for the analysis of the 1996 IAF (t=t0), 
> * except that we have to go to 8 commodities because the 2002-03 survey 
> * does not distinguish between large and small groundnuts, which were 
> * separate items in the old index. For IOF 2008/09 (t=t2) we expand the
> * the food basket to include the 15 most important food products among
> * the poorest.
> *
> * The commodity weights for the items vary by the 6 regions, and are 
> * calculated from the observations in the IAF2002, using the relatively 
> * poor households (below median nominal consumption per capita).
> *
> * The unit values (prices) calculated here are also based on the prices 
> * paid by the relatively poor, using the same definition.
> *
> * K Simler, Sep 2003
> * CA
> * MAH, April 2010
> * URB, Feb 2013 (automatization to any number of n_tpi's)
> **************************************************************************;
. /*
> This file uses:
>         work\own.dta
>         work\receipts.dta
>         work\daily.dta
>         work\hhdata
>         work\cons_cat.dta
> 
> This file creates:
>         work\tpi_unit_val_quarterly.dta
>         work\tpi_unit_val_monthly.dta
>         work\tpi_news_share.dta
>         work\tpi_reg_tpi_share.dta
>         work\temp_index_news.dta
>         work\temp_index_reg_tpi.dta
> */      
> 
> 
> **************************************************************************
> * Either the products used for intertemporal price index is specified
> * explicitly, or they are automatically found as the the n_tpi products
> * with the highest weighted expenditure shares among the $bottom % poorest
> * part of the population
> **************************************************************************;
. * Generating the n_tpi most important food items for the poorest $bottom % ;
. **************************************************************************
> * Find the n_tpi most important food products among the lowest $bottom %
> * (start)
> **************************************************************************;
. *------------------------------------------------------------------------*
> * Population weights for each HH
> *------------------------------------------------------------------------*;
. use "$path/work\hhdata.dta", clear;

. keep hhid hhweight hhsize;

. gen popwt = hhweight*hhsize;

. lab var popwt "Population weights = hhsize X hhweight";

. sort hhid;

. tempfile popwt;

. save `popwt', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000001.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
      hhsize |      6775        4.96     2.75857          1         24
    hhweight |      6775    4533.332    4304.242         54      92511
       popwt |      6775    29614.26    44555.51         62     832599

. *------------------------------------------------------------------------*
> * Make list of all consumed products
> *------------------------------------------------------------------------*;
. *use "$path/in\cons_cod.dta", clear;
. *save "$path/work\cons_cod.dta", replace;
. use "$path/work\cons_cod.dta", clear;

. keep product descript;

. collapse product, by(descript);

. sort product;

. tempfile descript;

. save `descript', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000002.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
    descript |         2         1.5    .7071068          1          2
     product |         2    565.0077    613.7578   131.0155        999

. *------------------------------------------------------------------------*
> * Find the poorest part of the population
> *------------------------------------------------------------------------*;
. use
> "$path/work\cons_cod.dta", clear;

. *use
> *"$path/work\cons_cod.dta", clear;
. ********************************************check the COICOP categories to create t
> he variable prod_cat, for the moment it is equal to food_cat******;
. keep hhid prod_cat product cod_hh_nom;

. sort hhid;

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243        100        999
    prod_cat |    412045    1.782558    .4125064          1          2
  cod_hh_nom |    412045    1602.923    615777.4          0   3.95e+08

. merge hhid using `popwt';
variable hhid does not uniquely identify observations in the master data

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243        100        999
    prod_cat |    412045    1.782558    .4125064          1          2
  cod_hh_nom |    412045    1602.923    615777.4          0   3.95e+08
      hhsize |    412045    5.313592    2.837438          1         24
-------------+--------------------------------------------------------
    hhweight |    412045    4940.193    4557.506         54      92511
       popwt |    412045    33954.53     49935.3         62     832599
      _merge |    412045           3           0          3          3

. drop _merge;

. preserve;

. collapse (sum) cod_hh_nom (mean) popwt hhweight hhsize, by(hhid);

. gen cod_pc_nom = cod_hh_nom/hhsize;

.         sum cod_pc_nom [aw=popwt] , detail;

                         cod_pc_nom
-------------------------------------------------------------
      Percentiles      Smallest
 1%     332.3661       78.55931
 5%     680.3636       103.0936
10%     872.9067       107.7462       Obs                6775
25%     1328.983       145.4659       Sum of Wgt.   200636622

50%     2175.789                      Mean           9412.851
                        Largest       Std. Dev.        395673
75%     3972.618        1528531
90%      9057.59        1552604       Variance       1.57e+11
95%     17758.21        1790269       Skewness       202.1632
99%     88724.46       8.12e+07       Kurtosis       41456.83

.         global medcpc_= r(p$tpi_bottom);

.         gen bottom_ = cod_pc_nom <= $medcpc_;

. sum [aw=popwt];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
        hhid |    6775   200636622    2.52e+09   1.10e+09   1.01e+09   4.19e+09
  cod_hh_nom |    6775   200636622    67821.64    2005057   232.1918   4.06e+08
       popwt |    6775   200636622    96639.42   125478.2         62     832599
    hhweight |    6775   200636622    10417.53   10233.19         54      92511
      hhsize |    6775   200636622    7.911641   3.294698          1         24
-------------+-----------------------------------------------------------------
  cod_pc_nom |    6775   200636622    9412.851     395673   78.55931   8.12e+07
     bottom_ |    6775   200636622           1          0          1          1

. sum [aw=hhweight];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
        hhid |    6775    30713326    2.51e+09   1.12e+09   1.01e+09   4.19e+09
  cod_hh_nom |    6775    30713326    61490.01    2271154   232.1918   4.06e+08
       popwt |    6775    30713326    68053.16   97418.28         62     832599
    hhweight |    6775    30713326    8619.458   9115.422         54      92511
      hhsize |    6775    30713326    6.532559   3.001711          1         24
-------------+-----------------------------------------------------------------
  cod_pc_nom |    6775    30713326    10464.25   451493.4   78.55931   8.12e+07
     bottom_ |    6775    30713326           1          0          1          1

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
  cod_hh_nom |      6775    97487.28     4938495   232.1918   4.06e+08
       popwt |      6775    29614.26    44555.51         62     832599
    hhweight |      6775    4533.332    4304.242         54      92511
      hhsize |      6775        4.96     2.75857          1         24
-------------+--------------------------------------------------------
  cod_pc_nom |      6775    20773.97    987396.4   78.55931   8.12e+07
     bottom_ |      6775           1           0          1          1

. keep if bottom_==1;
(0 observations deleted)

. keep hhid;

. sort hhid;

. tempfile hhid;

. save `hhid';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000004.tmp saved

. restore;

. sort hhid;

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243        100        999
    prod_cat |    412045    1.782558    .4125064          1          2
  cod_hh_nom |    412045    1602.923    615777.4          0   3.95e+08
      hhsize |    412045    5.313592    2.837438          1         24
-------------+--------------------------------------------------------
    hhweight |    412045    4940.193    4557.506         54      92511
       popwt |    412045    33954.53     49935.3         62     832599

. merge hhid using `hhid';
variable hhid does not uniquely identify observations in the master data

. tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00

. keep if _m==3;
(0 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |    412045    2.48e+09    1.13e+09   1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243        100        999
    prod_cat |    412045    1.782558    .4125064          1          2
  cod_hh_nom |    412045    1602.923    615777.4          0   3.95e+08
      hhsize |    412045    5.313592    2.837438          1         24
-------------+--------------------------------------------------------
    hhweight |    412045    4940.193    4557.506         54      92511
       popwt |    412045    33954.53     49935.3         62     832599
      _merge |    412045           3           0          3          3

. *------------------------------------------------------------------------*
> * Keep only food product expenditure by the poor. Calculate food product
> * share of total food expenditure by the poor
> *------------------------------------------------------------------------*;
. keep if prod_cat==1;
(322449 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     89596    2.45e+09    1.13e+09   1.01e+09   4.19e+09
     product |     89596    131.0155     15.7293        100        161
    prod_cat |     89596           1           0          1          1
  cod_hh_nom |     89596     383.356    648.4919          0      18500
      hhsize |     89596    5.132807    2.743211          1         24
-------------+--------------------------------------------------------
    hhweight |     89596    4792.901    4413.167         54      92511
       popwt |     89596    31755.96    47010.28         62     832599
      _merge |     89596           3           0          3          3

. sort product;

. *preserve;
. collapse (sum) cod_hh_nom [aw=hhweight], by(product);

. sort cod;

. egen total=sum(cod_hh_nom);

. gen sh=100*cod_hh_nom/total;

. *------------------------------------------------------------------------*
> * Include product labels
> *------------------------------------------------------------------------*;
. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |        62       130.5    18.04162        100        161
  cod_hh_nom |        62    638077.8    715958.5   17319.09    3153092
       total |        62    3.96e+07           0   3.96e+07   3.96e+07
          sh |        62    1.612903    1.809766   .0437784   7.970237

. sort product;

. merge product using `descript';

. tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         62       96.88       96.88
          2 |          2        3.13      100.00
------------+-----------------------------------
      Total |         64      100.00

. keep if _merge==1 | _merge==3;
(2 observations deleted)

. drop _merge;

. sort sh;

. *list;
. list in -$product_tpi_n/-1;

     +-----------------------------------------------------+
     | product   cod_hh~m      total         sh   descript |
     |-----------------------------------------------------|
 33. |     132   405723.3   3.96e+07   1.025568          . |
 34. |     134   406314.1   3.96e+07   1.027062          . |
 35. |     138   430628.1   3.96e+07   1.088521          . |
 36. |     119   483520.1   3.96e+07   1.222219          . |
 37. |     153     492023   3.96e+07   1.243713          . |
     |-----------------------------------------------------|
 38. |     144   508887.7   3.96e+07   1.286343          . |
 39. |     109   513852.6   3.96e+07   1.298893          . |
 40. |     102   520426.1   3.96e+07   1.315509          . |
 41. |     115   540289.6   3.96e+07   1.365719          . |
 42. |     114   619598.2   3.96e+07   1.566191          . |
     |-----------------------------------------------------|
 43. |     116   624874.1   3.96e+07   1.579527          . |
 44. |     112   666715.6   3.96e+07   1.685293          . |
 45. |     136   673802.2   3.96e+07   1.703206          . |
 46. |     122   708505.5   3.96e+07   1.790927          . |
 47. |     123   727642.9   3.96e+07   1.839302          . |
     |-----------------------------------------------------|
 48. |     127   771771.9   3.96e+07   1.950849          . |
 49. |     140   815134.1   3.96e+07   2.060458          . |
 50. |     121   933622.7   3.96e+07   2.359968          . |
 51. |     110    1193071   3.96e+07   3.015789          . |
 52. |     103    1222088   3.96e+07   3.089136          . |
     |-----------------------------------------------------|
 53. |     125    1255223   3.96e+07   3.172893          . |
 54. |     104    1347143   3.96e+07   3.405246          . |
 55. |     157    1520177   3.96e+07   3.842632          . |
 56. |     147    1803996   3.96e+07   4.560056          . |
 57. |     107    1921288   3.96e+07   4.856542          . |
     |-----------------------------------------------------|
 58. |     108    1955183   3.96e+07    4.94222          . |
 59. |     117    2086078   3.96e+07   5.273091          . |
 60. |     141    2271924   3.96e+07   5.742862          . |
 61. |     105    3043549   3.96e+07   7.693342          . |
 62. |     113    3153092   3.96e+07   7.970237          . |
     +-----------------------------------------------------+

. list product descript in -$product_tpi_n/-1;

     +--------------------+
     | product   descript |
     |--------------------|
 33. |     132          . |
 34. |     134          . |
 35. |     138          . |
 36. |     119          . |
 37. |     153          . |
     |--------------------|
 38. |     144          . |
 39. |     109          . |
 40. |     102          . |
 41. |     115          . |
 42. |     114          . |
     |--------------------|
 43. |     116          . |
 44. |     112          . |
 45. |     136          . |
 46. |     122          . |
 47. |     123          . |
     |--------------------|
 48. |     127          . |
 49. |     140          . |
 50. |     121          . |
 51. |     110          . |
 52. |     103          . |
     |--------------------|
 53. |     125          . |
 54. |     104          . |
 55. |     157          . |
 56. |     147          . |
 57. |     107          . |
     |--------------------|
 58. |     108          . |
 59. |     117          . |
 60. |     141          . |
 61. |     105          . |
 62. |     113          . |
     +--------------------+

. *restore;
. *------------------------------------------------------------------------*
> * Keep the required number of most important food products
> *------------------------------------------------------------------------*;
. keep in -$product_tpi_n/-1;
(32 observations deleted)

. list;

     +-----------------------------------------------------+
     | product   cod_hh~m      total         sh   descript |
     |-----------------------------------------------------|
  1. |     132   405723.3   3.96e+07   1.025568          . |
  2. |     134   406314.1   3.96e+07   1.027062          . |
  3. |     138   430628.1   3.96e+07   1.088521          . |
  4. |     119   483520.1   3.96e+07   1.222219          . |
  5. |     153     492023   3.96e+07   1.243713          . |
     |-----------------------------------------------------|
  6. |     144   508887.7   3.96e+07   1.286343          . |
  7. |     109   513852.6   3.96e+07   1.298893          . |
  8. |     102   520426.1   3.96e+07   1.315509          . |
  9. |     115   540289.6   3.96e+07   1.365719          . |
 10. |     114   619598.2   3.96e+07   1.566191          . |
     |-----------------------------------------------------|
 11. |     116   624874.1   3.96e+07   1.579527          . |
 12. |     112   666715.6   3.96e+07   1.685293          . |
 13. |     136   673802.2   3.96e+07   1.703206          . |
 14. |     122   708505.5   3.96e+07   1.790927          . |
 15. |     123   727642.9   3.96e+07   1.839302          . |
     |-----------------------------------------------------|
 16. |     127   771771.9   3.96e+07   1.950849          . |
 17. |     140   815134.1   3.96e+07   2.060458          . |
 18. |     121   933622.7   3.96e+07   2.359968          . |
 19. |     110    1193071   3.96e+07   3.015789          . |
 20. |     103    1222088   3.96e+07   3.089136          . |
     |-----------------------------------------------------|
 21. |     125    1255223   3.96e+07   3.172893          . |
 22. |     104    1347143   3.96e+07   3.405246          . |
 23. |     157    1520177   3.96e+07   3.842632          . |
 24. |     147    1803996   3.96e+07   4.560056          . |
 25. |     107    1921288   3.96e+07   4.856542          . |
     |-----------------------------------------------------|
 26. |     108    1955183   3.96e+07    4.94222          . |
 27. |     117    2086078   3.96e+07   5.273091          . |
 28. |     141    2271924   3.96e+07   5.742862          . |
 29. |     105    3043549   3.96e+07   7.693342          . |
 30. |     113    3153092   3.96e+07   7.970237          . |
     +-----------------------------------------------------+

. gen product_tpi=1;

. keep product product_tpi;

. list;

     +--------------------+
     | product   produc~i |
     |--------------------|
  1. |     132          1 |
  2. |     134          1 |
  3. |     138          1 |
  4. |     119          1 |
  5. |     153          1 |
     |--------------------|
  6. |     144          1 |
  7. |     109          1 |
  8. |     102          1 |
  9. |     115          1 |
 10. |     114          1 |
     |--------------------|
 11. |     116          1 |
 12. |     112          1 |
 13. |     136          1 |
 14. |     122          1 |
 15. |     123          1 |
     |--------------------|
 16. |     127          1 |
 17. |     140          1 |
 18. |     121          1 |
 19. |     110          1 |
 20. |     103          1 |
     |--------------------|
 21. |     125          1 |
 22. |     104          1 |
 23. |     157          1 |
 24. |     147          1 |
 25. |     107          1 |
     |--------------------|
 26. |     108          1 |
 27. |     117          1 |
 28. |     141          1 |
 29. |     105          1 |
 30. |     113          1 |
     +--------------------+

. sort product;

. tempfile product_tpi;

. save `product_tpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000005.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |        30    123.1333    15.69699        102        157
 product_tpi |        30           1           0          1          1

. clear;

. **************************************************************************
> * Find the n_tpi most important food products among the lowest $bottom %
> * (end)
> **************************************************************************;
. **************************************************************************;
. * First, need to calculate the average prices for the food items, by 
> * strata and quarter. For this, we are using the "unit values"
> * (value/quantity) for the observations in the consumption questionnaires,
> * including daily, own and receipts-in-kind.
> *
> * The unit values are constructed as sum(value)/sum(quantity), which effectively
> * weights them by the quantity and value of the transaction. Sampling
> * weights are also used.
> *
> * Get the own consumption file, and limit analysis to the observations
> * in KGs where both value and quantity are available.
> **************************************************************************;
. use "$path/work/cons_cod.dta";

. *use "$path/work/cons_cod.dta";
. keep if prod_cat==1;
(322449 observations deleted)

. drop if quantityd==0 | quantityd==.;
(4392 observations deleted)

. *keep if quantityd!=. & cod_hh_nom2!=.;
. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     85204    2.44e+09    1.14e+09   1.01e+09   4.19e+09
     product |     85204    131.0922    15.78502        100        161
    food_cat |     85204           1           0          1          1
    prod_cat |     85204           1           0          1          1
    descript |     85204           1           0          1          1
-------------+--------------------------------------------------------
   quantityd |     85204     .819643    3.245947   .0000286   364.2857
 cod_hh_nom3 |     85204    403.1168    658.9792          0      18500
  cod_hh_nom |     85204    403.1168    658.9792          0      18500
 cod_hh_nom2 |     84857    404.7653    659.8198   7.142857      18500

. sort product;

. merge product using `product_tpi';
variable product does not uniquely identify observations in the master data

. tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     30,558       35.86       35.86
          3 |     54,646       64.14      100.00
------------+-----------------------------------
      Total |     85,204      100.00

. drop _merge;

. keep if $product_tpi;
(30558 observations deleted)

. *        replace valued_ac=0 if valued_ac==.;
. *        replace quantityd_ac=0 if quantityd_ac==.;
.         gen valued_tot=cod_hh_nom2;
(136 missing values generated)

.         gen quantityd_tot=quantityd;

. *               replace quantityd_tot=0 if (valued_tot>0 & valued_tot<.) & quantity
> d_tot==.;
.         keep if quantityd_tot!=. & valued_tot!=.;
(136 observations deleted)

.                 collapse (sum) valued_tot quantityd_tot, by(hhid product);

.                 sort hhid;

. tempfile acredd;

. save `acredd' , replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     54510    2.43e+09    1.15e+09   1.01e+09   4.19e+09
     product |     54510    125.2252    14.92163        102        157
  valued_tot |     54510    529.8151    744.2303   7.142857      18500
quantityd_~t |     54510    1.168003    3.862691   .0000286   364.2857

. /*
> **************************************************************************;
> * Create a data set with an empty 1 observation. Used to avoid empty data
> * sets when the survey do not have the Mozambican set up
> **************************************************************************;
> use "$path/work/own.dta";
> 
> preserve;
> keep in 1;
> drop unit valued quantityd;
> gen unit=2;
> gen valued=0;
> gen quantityd=0;
> tempfile 1obs;
> save `1obs';
> restore;
> 
> **************************************************************************;
> * Own consumption
> **************************************************************************;
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
>         rename valued valued_ac;
>         rename quantityd quantityd_ac;
>         compress;
>         sort hhid product;
>         tempfile ac;
> save `ac', replace;
> 
> **************************************************************************;
> * Now do a similar thing with receipts-in-kind file.
> **************************************************************************;
> use "$path/work/receipts.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> 
> 
> keep if $product_tpi;
> append using `1obs';
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
>         rename valued valued_re;
>         rename quantityd quantityd_re;
>         compress;
>         sort hhid product;
>         tempfile re;
> save `re', replace;
> 
> **************************************************************************;
> * And also with the daily expenditure file.
> **************************************************************************;
> use "$path/work/daily.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> *rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> *rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         collapse (sum) value quantity days , 
>                 by(hhid product unit);
> 
>         gen valued=value/7 if days<=7;
>         replace valued=value/days if days>7 & days<.;
>         gen quantityd=quantity/7 if days<=7;
>         replace quantityd=quantity/days if days>7 & days<.;
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
> 
>         rename valued valued_dd;
>         rename quantityd quantityd_dd;
>         compress;
>         sort hhid product;
>         tempfile dd;
> save `dd', replace;
> 
> 
> 
> 
> **************************************************************************;
> * Merge the three components (own, daily, receipts) together at the HH/product leve
> l, 
> * then aggregate to the regional level, using the sample weights (hhweight).
> * We DON'T want to weight by "hhsize" because the quantity and value are
> * already for the household (i.e., other things equal, larger households
> * are buying larger quantities, and therefore already getting more weight).
> * Then calculate sum(val)/sum(quantity) to get the quantity weighted mean
> * unit value in each strata in each quarter.
> **************************************************************************;
> use `ac';
>         sort hhid product;
>         merge hhid product using `re';
>         tab _m;
>         drop _m;
>         
>         sort hhid product;
>         merge hhid product using `dd';
>         tab _m;
>         drop _m;
>         
>         replace valued_ac=0 if valued_ac==.;
>         replace valued_re=0 if valued_re==.;
>         replace valued_dd=0 if valued_dd==.;
>         replace quantityd_ac=0 if quantityd_ac==.;
>         replace quantityd_re=0 if quantityd_re==.;
>         replace quantityd_dd=0 if quantityd_dd==.;
> 
>         gen valued_tot=valued_ac+valued_re+valued_dd;
>         gen quantityd_tot=quantityd_ac+quantityd_re+quantityd_dd;
> 
>         sort hhid;
> 
>         tempfile acredd;
> save `acredd' , replace;
> */
> 
> 
> 
> use "$path/work/hhdata.dta";

.         keep strata hhid hhweight hhsize rural survmon survquar news spdomain reg_t
> pi;

.         sort hhid;

.         tempfile hhd;

. save `hhd' , replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000007.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000007.tmp saved

. use `acredd', clear;

.         merge hhid using `hhd';
variable hhid does not uniquely identify observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        151        0.28        0.28
          3 |     54,510       99.72      100.00
------------+-----------------------------------
      Total |     54,661      100.00

.         drop _merge;

.                 tab survquar , miss;

 Sequential |
     Survey |
    Quarter |
    May-Jun |
      09=1) |      Freq.     Percent        Cum.
------------+-----------------------------------
 May-Jul 09 |     14,305       26.17       26.17
Sept-Oct 09 |     14,020       25.65       51.82
Nov09-Jan10 |     12,095       22.13       73.95
 Feb-Apr 10 |     14,241       26.05      100.00
------------+-----------------------------------
      Total |     54,661      100.00

.                 tab survmon survquar, miss;

Sequential |
    Survey |
Month (May |   Sequential Survey Quarter May-Jun 09=1)
   2009=1) | May-Jul 0  Sept-Oct   Nov09-Jan  Feb-Apr 1 |     Total
-----------+--------------------------------------------+----------
    May 09 |       305          0          0          0 |       305 
    Jun 09 |    10,074          0          0          0 |    10,074 
    Jul 09 |     3,926          0          0          0 |     3,926 
    Sep 09 |         0      4,930          0          0 |     4,930 
    Oct 09 |         0      9,090          0          0 |     9,090 
    Nov 09 |         0          0      5,036          0 |     5,036 
    Dec 09 |         0          0      3,520          0 |     3,520 
    Jan 10 |         0          0      3,539          0 |     3,539 
    Feb 10 |         0          0          0      3,424 |     3,424 
    Mar 10 |         0          0          0      7,202 |     7,202 
    Apr 10 |         0          0          0      3,615 |     3,615 
-----------+--------------------------------------------+----------
     Total |    14,305     14,020     12,095     14,241 |    54,661 


.         compress;
product was float now int
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
hhsize was double now byte

.         sort hhid;

. save `acredd', replace;
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000006.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     54661    2.43e+09    1.15e+09   1.01e+09   4.19e+09
     product |     54510    125.2252    14.92163        102        157
  valued_tot |     54510    529.8151    744.2303   7.142857      18500
quantityd_~t |     54510    1.168003    3.862691   .0000286   364.2857
      strata |     54661    5.361794    2.945049          1         10
-------------+--------------------------------------------------------
      hhsize |     54661    5.199155    2.754984          1         24
    hhweight |     54661    4961.804    4422.265         54      92511
    survquar |     54661    2.480635    1.137595          1          4
     survmon |     54661    6.650555    3.318335          1         12
       rural |     54661    .7884598    .4084042          0          1
-------------+--------------------------------------------------------
        news |     54661    2.341322    1.137758          1          4
    spdomain |     54661    3.160462    1.388466          1          5
     reg_tpi |     54661    2.341322    1.137758          1          4

. **************************************************************************;
. * Need to merge with the file that has nominal consumption per household,
> * and compute nominal consumption per capita from that, so that we can
> * choose the relatively poor (i.e., below median nominal consumption per
> * capita).
> **************************************************************************;
. use "$path\work\conpc.dta", clear;

. keep hhid cons_hh_nom;

. *use "$path/in/cons_cat.dta" ;
. *save "$path/work/cons_cat.dta", replace ;
. *use "$path/work/cons_cat.dta" ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;

.         merge hhid using "$path\work\hhdata.dta";

.           tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.  drop _m;

.         collapse (mean) cons_hh_nom hhsize hhweight , by(hhid);

.         gen cpc=cons_hh_nom/hhsize;

.         sum cpc [aw=hhsize*hhweight] , detail;

                             cpc
-------------------------------------------------------------
      Percentiles      Smallest
 1%     332.3661       78.55931
 5%     680.3636       103.0936
10%     872.9067       107.7462       Obs                6775
25%     1328.983       145.4659       Sum of Wgt.   200636622

50%     2175.789                      Mean           9412.851
                        Largest       Std. Dev.        395673
75%     3972.618        1528531
90%      9057.59        1552604       Variance       1.57e+11
95%     17758.21        1790269       Skewness       202.1632
99%     88724.46       8.12e+07       Kurtosis       41456.83

.         global medcpc=r(p$tpi_bottom);

.         gen bottom_tpi=cpc<=$medcpc;

.         keep hhid bottom_tpi;

.         sort hhid;

.         tempfile bottom_tpi;

. save `bottom_tpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000008.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j000008.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      6775    2.51e+09    1.13e+09   1.01e+09   4.19e+09
  bottom_tpi |      6775           1           0          1          1

. use `acredd' ;

.         merge hhid using `bottom_tpi';
variable hhid does not uniquely identify observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     54,661      100.00      100.00
------------+-----------------------------------
      Total |     54,661      100.00

.         drop _merge;

.         keep if bottom_tpi;
(0 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     54661    2.43e+09    1.15e+09   1.01e+09   4.19e+09
     product |     54510    125.2252    14.92163        102        157
  valued_tot |     54510    529.8151    744.2303   7.142857      18500
quantityd_~t |     54510    1.168003    3.862691   .0000286   364.2857
      strata |     54661    5.361794    2.945049          1         10
-------------+--------------------------------------------------------
      hhsize |     54661    5.199155    2.754984          1         24
    hhweight |     54661    4961.804    4422.265         54      92511
    survquar |     54661    2.480635    1.137595          1          4
     survmon |     54661    6.650555    3.318335          1         12
       rural |     54661    .7884598    .4084042          0          1
-------------+--------------------------------------------------------
        news |     54661    2.341322    1.137758          1          4
    spdomain |     54661    3.160462    1.388466          1          5
     reg_tpi |     54661    2.341322    1.137758          1          4
  bottom_tpi |     54661           1           0          1          1

. * Drop one HH with extremely high quantity and low value in IAF 2002/03 (t=t1) ;
. *        drop if hhid==263001;
.         preserve;

.                 collapse (sum) valued_tot quantityd_tot [aw=hhweight] , 
>                                 by(reg_tpi news product survmon);

.                         drop if product==.;
(36 observations deleted)

.                         gen ppkg=valued_tot/quantityd_tot;

.                         lab var ppkg "Unit value per kg";

.                         sort reg_tpi product ;

.                         compress;

.                         tempfile uvm;

.                 save `uvm', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000a.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000a.tmp saved

.                 save "$path/work/tpi_unit_val_monthly.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_monthly.dta
>  saved

.         restore;

.         preserve;

.                 collapse (sum) valued_tot quantityd_tot [aw=hhweight] , 
>                                 by(reg_tpi news product survquar);

.                         drop if product==.;
(16 observations deleted)

.                         gen ppkg=valued_tot/quantityd_tot;

.                         sort reg_tpi product survquar;

.                         list in  1/3;

     +-------------------------------------------------------------------------+
     | product      survquar   news   reg_tpi   valued~t   quanti~t       ppkg |
     |-------------------------------------------------------------------------|
  1. |     102    May-Jul 09      1   central   87863.27    265.855   330.4932 |
  2. |     102   Sept-Oct 09      1   central   48570.47   145.1329   334.6621 |
  3. |     102   Nov09-Jan10      1   central    44344.7   134.2199   330.3884 |
     +-------------------------------------------------------------------------+

.                         list in -3/-1;

     +-------------------------------------------------------------------------+
     | product      survquar   news   reg_tpi   valued~t   quanti~t       ppkg |
     |-------------------------------------------------------------------------|
478. |     157   Sept-Oct 09      4   western   78939.99         41   1925.366 |
479. |     157   Nov09-Jan10      4   western   7215.774         14   515.4124 |
480. |     157    Feb-Apr 10      4   western    75578.8         25   3023.152 |
     +-------------------------------------------------------------------------+

.                         tempfile uvq;

.                 save "$path/work/tpi_unit_val_quarterly.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_quarterly.d
> ta saved

.                 save `uvq', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved

.         restore;

.         **************************************************************************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * each reg_tpi & product combination. This should eliminate outliers that
> * may have an undue influence on the price calculation. Then use sample
> * weighting PLUS quantity weighting on those HH-level observations.
> **************************************************************************;
.         preserve;

.                 gen hhppkg=valued_tot/quantityd_tot;
(151 missing values generated)

.                 egen lower5=pctile(hhppkg), p(5) by(reg_tpi product);
(151 missing values generated)

.                 egen upper5=pctile(hhppkg), p(95) by(reg_tpi product);
(151 missing values generated)

.                 keep if hhppkg>=lower5 & hhppkg<=upper5;
(3596 observations deleted)

.                                 gen hhqtywt=hhweight*quantityd_tot;
(151 missing values generated)

.                                 collapse (sum) valued_tot quantityd_tot [aw=hhqtywt
> ] , 
>                                 by(reg_tpi news product survquar);

.                         drop if product==.;
(0 observations deleted)

.                         gen ppkg_trim=valued_tot/quantityd_tot;

.                         lab var ppkg_trim "90% trimmed unit value per kg";

.                         sort reg_tpi product survquar;

.                         list , nol;

     +----------------------------------------------------------------------+
     | product   survquar   news   reg_tpi   valued~t   quanti~t   ppkg_t~m |
     |----------------------------------------------------------------------|
  1. |     102          1      1         1   111066.1   339.2506   327.3867 |
  2. |     102          2      1         1   55841.23   173.8043    321.288 |
  3. |     102          3      1         1   58745.94   181.4187   323.8142 |
  4. |     102          4      1         1   93801.71   248.2849   377.7987 |
  5. |     103          1      1         1     187324   613.9128   305.1313 |
     |----------------------------------------------------------------------|
  6. |     103          2      1         1   144639.3   447.4804   323.2305 |
  7. |     103          3      1         1   126731.2    390.095   324.8726 |
  8. |     103          4      1         1   90610.97   287.0195   315.6962 |
  9. |     104          1      1         1   265383.1    452.123   586.9709 |
 10. |     104          2      1         1   112398.4   163.5117   687.4025 |
     |----------------------------------------------------------------------|
 11. |     104          3      1         1   233138.9   377.1665   618.1326 |
 12. |     104          4      1         1   271274.6   463.6059   585.1404 |
 13. |     105          1      1         1   378097.7   1848.184   204.5779 |
 14. |     105          2      1         1   299131.3    1252.46   238.8349 |
 15. |     105          3      1         1   668441.7   2574.798   259.6093 |
     |----------------------------------------------------------------------|
 16. |     105          4      1         1   698669.6    2994.18   233.3426 |
 17. |     107          1      1         1   220972.5   2203.306   100.2914 |
 18. |     107          2      1         1   179800.2   1917.136   93.78587 |
 19. |     107          3      1         1   198916.1   1857.122   107.1099 |
 20. |     107          4      1         1   142272.1   1179.584   120.6121 |
     |----------------------------------------------------------------------|
 21. |     108          1      1         1   88986.94   304.0181   292.7028 |
 22. |     108          2      1         1   84766.54   408.2228   207.6477 |
 23. |     108          3      1         1   60338.68   107.0144   563.8369 |
 24. |     108          4      1         1   32935.75     52.729    624.623 |
 25. |     109          1      1         1   97462.91   879.4846   110.8182 |
     |----------------------------------------------------------------------|
 26. |     109          2      1         1   28204.09   339.6707   83.03362 |
 27. |     109          3      1         1   144449.2   1189.594   121.4273 |
 28. |     109          4      1         1   60511.23   620.1078   97.58179 |
 29. |     110          1      1         1     157623   66.37668   2374.674 |
 30. |     110          2      1         1   214463.6   96.04734   2232.895 |
     |----------------------------------------------------------------------|
 31. |     110          3      1         1   359259.1   157.3912   2282.587 |
 32. |     110          4      1         1   242380.1     112.13   2161.599 |
 33. |     112          1      1         1     168182   319.2035   526.8803 |
 34. |     112          2      1         1    2378.99   3.805322   625.1744 |
 35. |     112          3      1         1   215675.5   469.5735   459.3008 |
     |----------------------------------------------------------------------|
 36. |     112          4      1         1   42069.66   79.83438   526.9617 |
 37. |     113          1      1         1   611650.3   545.6635   1120.929 |
 38. |     113          2      1         1   505672.2   373.1805   1355.034 |
 39. |     113          3      1         1   421691.9   324.2669   1300.447 |
 40. |     113          4      1         1   489941.7   435.1897   1125.812 |
     |----------------------------------------------------------------------|
 41. |     114          1      1         1     236669   101.3145   2335.984 |
 42. |     114          2      1         1   96875.18   44.22242   2190.635 |
 43. |     114          3      1         1   253008.7    119.026   2125.659 |
 44. |     114          4      1         1   199380.6   83.91199   2376.068 |
 45. |     115          1      1         1   20075.57   14.89757   1347.573 |
     |----------------------------------------------------------------------|
 46. |     115          2      1         1   23792.59    15.6242   1522.804 |
 47. |     115          3      1         1   16394.36   15.25242    1074.87 |
 48. |     115          4      1         1   19201.04   18.42168   1042.307 |
 49. |     116          1      1         1   1666.986   1.302065   1280.263 |
 50. |     116          2      1         1   1968.177   4.688902   419.7521 |
     |----------------------------------------------------------------------|
 51. |     116          3      1         1   2984.388   5.548357   537.8868 |
 52. |     116          4      1         1   2043.215   2.028981   1007.016 |
 53. |     117          1      1         1   267109.7   57.33815   4658.499 |
 54. |     117          2      1         1   212056.7   47.54221   4460.388 |
 55. |     117          3      1         1   320598.5   67.79522   4728.925 |
     |----------------------------------------------------------------------|
 56. |     117          4      1         1   248725.5   53.13125    4681.34 |
 57. |     119          1      1         1    19241.2   3.845657    5003.36 |
 58. |     119          2      1         1   23239.61   3.982214    5835.85 |
 59. |     119          3      1         1   52436.88   10.29153   5095.151 |
 60. |     119          4      1         1   28742.14    4.35749   6596.031 |
     |----------------------------------------------------------------------|
 61. |     121          1      1         1     102587   24.32777   4216.868 |
 62. |     121          2      1         1    71776.2   19.96744   3594.662 |
 63. |     121          3      1         1   119699.8   28.82447   4152.717 |
 64. |     121          4      1         1   75903.46   16.33784   4645.869 |
 65. |     122          1      1         1   100736.8    145.468   692.5012 |
     |----------------------------------------------------------------------|
 66. |     122          2      1         1   64724.13   54.26677   1192.703 |
 67. |     122          3      1         1    76486.7   222.6589   343.5152 |
 68. |     122          4      1         1   113504.1   127.1922   892.3825 |
 69. |     123          1      1         1   66997.41    240.388   278.7054 |
 70. |     123          2      1         1   42010.69   161.4953   260.1356 |
     |----------------------------------------------------------------------|
 71. |     123          3      1         1   148874.8   195.7373    760.585 |
 72. |     123          4      1         1   70903.75   382.3045   185.4641 |
 73. |     125          1      1         1   193165.8   2158.771   89.47953 |
 74. |     125          2      1         1   191825.1   1909.321   100.4677 |
 75. |     125          3      1         1   190746.2     2235.6   85.32214 |
     |----------------------------------------------------------------------|
 76. |     125          4      1         1   200125.1    1931.63   103.6043 |
 77. |     127          1      1         1   85085.16   75.41572   1128.215 |
 78. |     127          2      1         1   64821.47   65.96974    982.594 |
 79. |     127          3      1         1   86276.76   93.47074   923.0349 |
 80. |     127          4      1         1   88188.21   92.35265   954.9072 |
     |----------------------------------------------------------------------|
 81. |     132          1      1         1   35694.77   102.5952   347.9185 |
 82. |     132          2      1         1   3375.017   9.354495    360.791 |
 83. |     132          3      1         1   231948.5   503.4943   460.6776 |
 84. |     132          4      1         1   18502.52   35.33288    523.663 |
 85. |     134          1      1         1   75884.12   51.97449   1460.026 |
     |----------------------------------------------------------------------|
 86. |     134          2      1         1   62494.43   48.99602     1275.5 |
 87. |     134          3      1         1   106375.7   77.35232   1375.211 |
 88. |     134          4      1         1   105463.7   111.5502    945.437 |
 89. |     136          1      1         1   76039.13   71.12647   1069.069 |
 90. |     136          2      1         1   67362.27   83.65858   805.2047 |
     |----------------------------------------------------------------------|
 91. |     136          3      1         1   110006.8   106.9104   1028.963 |
 92. |     136          4      1         1   126599.6    138.911   911.3722 |
 93. |     138          1      1         1   36684.43    73.2946   500.5066 |
 94. |     138          2      1         1   50487.79    104.476   483.2478 |
 95. |     138          3      1         1   47149.72   102.4872   460.0549 |
     |----------------------------------------------------------------------|
 96. |     138          4      1         1   45352.42   125.4506   361.5163 |
 97. |     140          1      1         1   447397.8   796.9703   561.3732 |
 98. |     140          2      1         1   76866.83   66.70614    1152.32 |
 99. |     140          3      1         1   274728.4   409.8719   670.2788 |
100. |     140          4      1         1   28217.99   16.67011    1692.73 |
     |----------------------------------------------------------------------|
101. |     141          1      1         1   240715.6   177.0255   1359.779 |
102. |     141          2      1         1   141105.9   74.02929   1906.082 |
103. |     141          3      1         1   285596.6   173.1073   1649.824 |
104. |     141          4      1         1   245841.2   174.2286   1411.027 |
105. |     144          1      1         1   120910.7   54.57555   2215.473 |
     |----------------------------------------------------------------------|
106. |     144          2      1         1   109477.7   41.99524   2606.906 |
107. |     144          3      1         1   92672.33   37.34817   2481.309 |
108. |     144          4      1         1   100051.2   42.89467   2332.487 |
109. |     147          1      1         1   286163.7   127.9021   2237.365 |
110. |     147          2      1         1   237614.4   106.1663   2238.134 |
     |----------------------------------------------------------------------|
111. |     147          3      1         1   325182.9   140.7931   2309.651 |
112. |     147          4      1         1   392900.6   168.0578   2337.889 |
113. |     153          1      1         1     120619   60.41247    1996.59 |
114. |     153          2      1         1   90980.08   126.9232    716.812 |
115. |     153          3      1         1   26998.51    18.7838   1437.329 |
     |----------------------------------------------------------------------|
116. |     153          4      1         1   46202.88   31.29716   1476.265 |
117. |     157          1      1         1   260693.3         93   2803.154 |
118. |     157          2      1         1   143039.6         59     2424.4 |
119. |     157          3      1         1   219614.4         94   2336.324 |
120. |     157          4      1         1   283700.7        105   2701.912 |
     |----------------------------------------------------------------------|
121. |     102          1      2         2   29364.59   86.93306   337.7839 |
122. |     102          2      2         2   17206.62   49.69769   346.2258 |
123. |     102          3      2         2   12636.41   38.47847   328.4021 |
124. |     102          4      2         2   23771.92   65.16817   364.7781 |
125. |     103          1      2         2   37906.28   110.7934   342.1349 |
     |----------------------------------------------------------------------|
126. |     103          2      2         2    48313.5   141.5655   341.2803 |
127. |     103          3      2         2   19709.12    69.0774   285.3193 |
128. |     103          4      2         2   26492.04   78.30276   338.3282 |
129. |     104          1      2         2   12683.53   33.99248   373.1274 |
130. |     104          2      2         2   16220.43   49.21543   329.5801 |
     |----------------------------------------------------------------------|
131. |     104          3      2         2   28828.46   61.66858   467.4741 |
132. |     104          4      2         2   7465.262   8.290213    900.491 |
133. |     105          1      2         2   357220.3   1189.568   300.2942 |
134. |     105          2      2         2   618068.6   2578.645   239.6874 |
135. |     105          3      2         2   751235.6   2748.604   273.3153 |
     |----------------------------------------------------------------------|
136. |     105          4      2         2   479146.9   2223.427   215.4992 |
137. |     107          1      2         2   297593.5    4421.04     67.313 |
138. |     107          2      2         2   169997.9   2387.102   71.21517 |
139. |     107          3      2         2   376672.9   5599.926   67.26391 |
140. |     107          4      2         2   101869.2   1517.206   67.14265 |
     |----------------------------------------------------------------------|
141. |     108          1      2         2   445996.5   623.0493   715.8286 |
142. |     108          2      2         2   296907.4   370.4726   801.4286 |
143. |     108          3      2         2   282927.9   339.1859   834.1381 |
144. |     108          4      2         2   109417.6   159.3522   686.6399 |
145. |     109          1      2         2   9735.132    55.4843   175.4574 |
     |----------------------------------------------------------------------|
146. |     109          2      2         2   66708.81   606.7471    109.945 |
147. |     109          3      2         2   31370.72   393.2848   79.76591 |
148. |     109          4      2         2   4461.495   35.19706   126.7576 |
149. |     110          1      2         2   143359.5   68.01941   2107.626 |
150. |     110          2      2         2   136760.3   74.61742    1832.82 |
     |----------------------------------------------------------------------|
151. |     110          3      2         2   173522.5   94.56759   1834.904 |
152. |     110          4      2         2   63226.65   37.72474       1676 |
153. |     112          1      2         2   126529.4   287.2482    440.488 |
154. |     112          2      2         2   81136.96   197.8114   410.1732 |
155. |     112          3      2         2   158599.5   388.5548   408.1779 |
     |----------------------------------------------------------------------|
156. |     112          4      2         2   13100.11   27.05145   484.2665 |
157. |     113          1      2         2   382745.9     337.06   1135.542 |
158. |     113          2      2         2   689563.5   656.9924   1049.576 |
159. |     113          3      2         2   491485.1   430.2472   1142.332 |
160. |     113          4      2         2   266416.8   292.9142   909.5388 |
     |----------------------------------------------------------------------|
161. |     114          1      2         2   47964.09   22.05739   2174.514 |
162. |     114          2      2         2   68301.07   37.42775   1824.878 |
163. |     114          3      2         2   61957.69   38.10094   1626.146 |
164. |     114          4      2         2   32060.12   15.48739   2070.078 |
165. |     115          1      2         2   47909.89   52.54889   911.7203 |
     |----------------------------------------------------------------------|
166. |     115          2      2         2   93626.42   95.61889   979.1624 |
167. |     115          3      2         2   37367.08   36.06835   1036.007 |
168. |     115          4      2         2   106146.4   115.6465   917.8525 |
169. |     116          1      2         2   100322.1   220.6409    454.685 |
170. |     116          2      2         2   78786.27   172.1059   457.7779 |
     |----------------------------------------------------------------------|
171. |     116          3      2         2   24203.64   34.41812   703.2237 |
172. |     116          4      2         2   35498.38   77.23854   459.5941 |
173. |     117          1      2         2   128181.8   30.45034   4209.537 |
174. |     117          2      2         2   260292.3   62.45788   4167.486 |
175. |     117          3      2         2   218267.6   49.08188   4447.011 |
     |----------------------------------------------------------------------|
176. |     117          4      2         2   129224.4   30.61499   4220.952 |
177. |     119          1      2         2   25626.89   5.878972   4359.076 |
178. |     119          2      2         2   67075.94   15.98689   4195.685 |
179. |     119          3      2         2   32761.49   6.922961   4732.294 |
180. |     119          4      2         2   27754.76    6.64884   4174.376 |
     |----------------------------------------------------------------------|
181. |     121          1      2         2   54507.61   14.30812   3809.558 |
182. |     121          2      2         2    82659.5   19.60178   4216.939 |
183. |     121          3      2         2   106635.9    29.4236   3624.164 |
184. |     121          4      2         2   40805.05   10.51119   3882.057 |
185. |     122          1      2         2   96851.59   173.4525   558.3752 |
     |----------------------------------------------------------------------|
186. |     122          2      2         2   112604.1     246.15   457.4612 |
187. |     122          3      2         2   58697.58   131.7797   445.4219 |
188. |     122          4      2         2   42833.32   47.53296   901.1288 |
189. |     123          1      2         2   61298.66   234.4441   261.4639 |
190. |     123          2      2         2   92101.61   230.3934   399.7581 |
     |----------------------------------------------------------------------|
191. |     123          3      2         2   66328.42   308.0056   215.3481 |
192. |     123          4      2         2   33917.02   92.25834    367.631 |
193. |     125          1      2         2   78968.52   860.0106   91.82272 |
194. |     125          2      2         2   106363.1   1227.473   86.65208 |
195. |     125          3      2         2   118668.6   1592.723   74.50675 |
     |----------------------------------------------------------------------|
196. |     125          4      2         2    78879.7   978.1732   80.63982 |
197. |     127          1      2         2   61383.81   63.68324   963.8926 |
198. |     127          2      2         2   82727.36   117.9509   701.3709 |
199. |     127          3      2         2   84782.69   132.5824   639.4717 |
200. |     127          4      2         2   35638.85   55.54654   641.6035 |
     |----------------------------------------------------------------------|
201. |     132          1      2         2   126896.1   562.9168   225.4259 |
202. |     132          2      2         2   7803.022   17.58225   443.8012 |
203. |     132          3      2         2   94703.77   522.9926   181.0805 |
204. |     132          4      2         2   497.6712    1.60098   310.8541 |
205. |     134          1      2         2    15491.6   21.34178   725.8815 |
     |----------------------------------------------------------------------|
206. |     134          2      2         2   27712.49   19.18386   1444.573 |
207. |     134          3      2         2   82150.38   45.09989   1821.521 |
208. |     134          4      2         2   107489.2    72.0636   1491.588 |
209. |     136          1      2         2   68809.45   81.14402   847.9917 |
210. |     136          2      2         2   72599.34   92.38659   785.8212 |
     |----------------------------------------------------------------------|
211. |     136          3      2         2   65526.31   75.67856   865.8503 |
212. |     136          4      2         2   32966.32   29.73886   1108.527 |
213. |     138          1      2         2   56376.97   168.8026   333.9816 |
214. |     138          2      2         2   121418.6     481.87   251.9738 |
215. |     138          3      2         2   69640.65    274.449   253.7472 |
     |----------------------------------------------------------------------|
216. |     138          4      2         2   33469.82   93.31537   358.6742 |
217. |     140          1      2         2   187855.6   153.5642   1223.303 |
218. |     140          2      2         2   265817.5    206.895   1284.794 |
219. |     140          3      2         2    85701.2   49.81609   1720.352 |
220. |     140          4      2         2    2739.18   1.250496   2190.474 |
     |----------------------------------------------------------------------|
221. |     141          1      2         2   94178.44   63.40778   1485.282 |
222. |     141          2      2         2   112183.6   76.16437   1472.914 |
223. |     141          3      2         2   144774.7   97.33558   1487.377 |
224. |     141          4      2         2   83330.26   55.76326   1494.358 |
225. |     144          1      2         2   24525.44    16.7763    1461.91 |
     |----------------------------------------------------------------------|
226. |     144          2      2         2   68129.55   48.23926   1412.326 |
227. |     144          3      2         2   30792.37   21.57819   1427.013 |
228. |     144          4      2         2   39750.93   69.68451   570.4414 |
229. |     147          1      2         2   183363.4    84.8359   2161.389 |
230. |     147          2      2         2   249999.3   112.4125   2223.946 |
     |----------------------------------------------------------------------|
231. |     147          3      2         2   173990.5   78.76805   2208.897 |
232. |     147          4      2         2   135277.5   58.73138   2303.326 |
233. |     153          1      2         2   31883.68   80.36708   396.7256 |
234. |     153          2      2         2   53805.12    104.484   514.9606 |
235. |     153          3      2         2    58834.3   107.6005   546.7849 |
     |----------------------------------------------------------------------|
236. |     153          4      2         2   34146.19   90.49024   377.3466 |
237. |     157          1      2         2   18576.79         33    562.933 |
238. |     157          2      2         2   29919.74         50   598.3947 |
239. |     157          3      2         2   20269.43         28   723.9081 |
240. |     157          4      2         2   13285.93         28   474.4976 |
     |----------------------------------------------------------------------|
241. |     102          1      3         3   2114.591   7.142858   296.0428 |
242. |     102          2      3         3   3672.339   10.71429   342.7516 |
243. |     102          3      3         3   1085.714   3.571429        304 |
244. |     102          4      3         3   2064.132   7.142858   288.9785 |
245. |     103          1      3         3   2811.979   8.524909   329.8545 |
     |----------------------------------------------------------------------|
246. |     103          2      3         3   10952.85   27.71841    395.147 |
247. |     103          3      3         3   11896.86   44.11667   269.6682 |
248. |     103          4      3         3   1689.238   6.303331   267.9912 |
249. |     104          1      3         3     2656.2   4.465622   594.8109 |
250. |     104          2      3         3   10449.81   9.255874   1128.993 |
     |----------------------------------------------------------------------|
251. |     104          3      3         3   1936.129   6.940541   278.9594 |
252. |     104          4      3         3   9307.124   20.65042   450.6991 |
253. |     105          1      3         3   53356.14   128.6237   414.8234 |
254. |     105          2      3         3   412741.1   869.8284   474.5086 |
255. |     105          3      3         3   232241.5   557.5908   416.5089 |
     |----------------------------------------------------------------------|
256. |     105          4      3         3   358483.1   943.7106   379.8655 |
257. |     107          1      3         3   268716.3   3781.404   71.06258 |
258. |     107          2      3         3   196957.5   2757.818   71.41786 |
259. |     107          3      3         3     130018   1835.504   70.83503 |
260. |     107          4      3         3   382003.5   5982.463   63.85387 |
     |----------------------------------------------------------------------|
261. |     108          1      3         3     220463   204.3706   1078.741 |
262. |     108          2      3         3   196460.2   378.2299   519.4202 |
263. |     108          3      3         3   245844.8   290.1383   847.3368 |
264. |     108          4      3         3   408400.2    565.879   721.7094 |
265. |     109          1      3         3   2404.484   12.87966   186.6884 |
     |----------------------------------------------------------------------|
266. |     109          2      3         3   12680.22   114.7808   110.4734 |
267. |     109          3      3         3   4466.336   13.08654   341.2923 |
268. |     109          4      3         3   5367.666   68.23963   78.65907 |
269. |     110          1      3         3   22828.12   11.33169   2014.537 |
270. |     110          2      3         3   90841.05    38.3687   2367.583 |
     |----------------------------------------------------------------------|
271. |     110          3      3         3   34873.17   21.20598   1644.497 |
272. |     110          4      3         3   77588.54   57.31623   1353.692 |
273. |     112          1      3         3      57077   102.2375   558.2784 |
274. |     112          2      3         3   77115.84   315.7154   244.2574 |
275. |     112          3      3         3   90991.51   361.0983   251.9854 |
     |----------------------------------------------------------------------|
276. |     112          4      3         3   6405.819   23.04664   277.9502 |
277. |     113          1      3         3   169556.7   125.9982   1345.708 |
278. |     113          2      3         3   244567.7   226.9371    1077.69 |
279. |     113          3      3         3   115755.5   105.0785    1101.61 |
280. |     113          4      3         3   223305.8   384.3986   580.9227 |
     |----------------------------------------------------------------------|
281. |     114          1      3         3   78894.25   39.41334   2001.714 |
282. |     114          2      3         3   35943.55   26.62773   1349.854 |
283. |     114          3      3         3   11846.29   6.088944   1945.541 |
284. |     114          4      3         3      74219   66.82891   1110.582 |
285. |     115          1      3         3   24201.49   32.59959   742.3862 |
     |----------------------------------------------------------------------|
286. |     115          2      3         3   44703.18   46.32046   965.0849 |
287. |     115          3      3         3   19887.03   28.61039    695.098 |
288. |     115          4      3         3   62053.24   80.65774   769.3401 |
289. |     116          1      3         3     165694   279.2927   593.2628 |
290. |     116          2      3         3   55139.22   118.0678   467.0131 |
     |----------------------------------------------------------------------|
291. |     116          3      3         3   177373.9   334.9526   529.5493 |
292. |     116          4      3         3   339273.5   757.1875   448.0706 |
293. |     117          1      3         3   82667.25   20.42086   4048.177 |
294. |     117          2      3         3   324343.7   77.98995   4158.789 |
295. |     117          3      3         3   82005.13   19.67075   4168.887 |
     |----------------------------------------------------------------------|
296. |     117          4      3         3   138327.4   32.96321   4196.417 |
297. |     119          1      3         3   27471.77   6.606604   4158.229 |
298. |     119          2      3         3   51692.51   12.02134   4300.062 |
299. |     119          3      3         3   32296.23   6.658126   4850.649 |
300. |     119          4      3         3   221653.4   51.63623   4292.594 |
     |----------------------------------------------------------------------|
301. |     121          1      3         3   61614.82   17.37919   3545.321 |
302. |     121          2      3         3   78079.21   21.58798    3616.79 |
303. |     121          3      3         3   41384.03   11.40547   3628.437 |
304. |     121          4      3         3   81825.66   21.92575   3731.944 |
305. |     122          1      3         3   28791.55   37.52918   767.1777 |
     |----------------------------------------------------------------------|
306. |     122          2      3         3   48604.92   36.90298     1317.1 |
307. |     122          3      3         3   21646.17   17.71632    1221.82 |
308. |     122          4      3         3   49819.54   38.59588     1290.8 |
309. |     123          1      3         3   61097.02   230.4976   265.0657 |
310. |     123          2      3         3   71106.52   151.4003   469.6591 |
     |----------------------------------------------------------------------|
311. |     123          3      3         3   80803.46   154.5086   522.9707 |
312. |     123          4      3         3   112580.4   145.8001   772.1558 |
313. |     125          1      3         3   76201.09   953.9947    79.8758 |
314. |     125          2      3         3   62639.84   835.0872   75.00994 |
315. |     125          3      3         3   42123.24   668.2391   63.03619 |
     |----------------------------------------------------------------------|
316. |     125          4      3         3   118804.2   1414.863   83.96871 |
317. |     127          1      3         3   80425.78   53.22241   1511.126 |
318. |     127          2      3         3   95172.89   70.98695    1340.71 |
319. |     127          3      3         3   48514.16   40.49474   1198.036 |
320. |     127          4      3         3   107972.2   79.57282   1356.898 |
     |----------------------------------------------------------------------|
321. |     132          1      3         3   106583.1   333.3701   319.7141 |
322. |     132          2      3         3    8678.36   22.14551   391.8791 |
323. |     132          3      3         3   55587.12   213.6842   260.1367 |
324. |     132          4      3         3   20147.22   87.27507   230.8474 |
325. |     134          1      3         3   521.4305    1.50863   345.6317 |
     |----------------------------------------------------------------------|
326. |     134          2      3         3   18489.69   17.02182   1086.234 |
327. |     134          3      3         3    12989.5   19.90702   652.5085 |
328. |     134          4      3         3   5789.515   18.72122   309.2487 |
329. |     136          1      3         3   46928.55   41.06466   1142.797 |
330. |     136          2      3         3   53306.61   57.18856   932.1201 |
     |----------------------------------------------------------------------|
331. |     136          3      3         3   36047.22   37.85798   952.1699 |
332. |     136          4      3         3   82868.58   91.94495   901.2848 |
333. |     138          1      3         3   12729.29   40.34146   315.5386 |
334. |     138          2      3         3    22007.2   93.45449   235.4857 |
335. |     138          3      3         3   10873.57   34.76129   312.8067 |
     |----------------------------------------------------------------------|
336. |     138          4      3         3    19796.2   55.60547   356.0117 |
337. |     140          1      3         3   31312.03    31.4304   996.2341 |
338. |     140          2      3         3   38184.08   39.70475   961.7007 |
339. |     140          3      3         3   5227.928    10.0998   517.6271 |
340. |     140          4      3         3   1732.022   2.405766   719.9461 |
     |----------------------------------------------------------------------|
341. |     141          1      3         3   264260.8    132.772   1990.335 |
342. |     141          2      3         3   187887.8   93.02686   2019.716 |
343. |     141          3      3         3   149237.7   88.97171   1677.361 |
344. |     141          4      3         3   421410.7   174.3567   2416.945 |
345. |     144          1      3         3   17536.87   9.052221     1937.3 |
     |----------------------------------------------------------------------|
346. |     144          2      3         3   4957.116   3.971618   1248.135 |
347. |     144          3      3         3   750.4515   .7409956   1012.761 |
348. |     144          4      3         3   1887.388   1.440826   1309.934 |
349. |     147          1      3         3   89197.39   40.13151   2222.627 |
350. |     147          2      3         3   156060.5     67.254   2320.464 |
     |----------------------------------------------------------------------|
351. |     147          3      3         3   93330.04   39.59474   2357.132 |
352. |     147          4      3         3   146115.8   62.89139   2323.303 |
353. |     153          1      3         3   47141.96   60.43268    780.074 |
354. |     153          2      3         3   61570.09   94.82217   649.3217 |
355. |     153          3      3         3   63229.27   113.7496   555.8635 |
     |----------------------------------------------------------------------|
356. |     153          4      3         3   128803.3   242.6897   530.7327 |
357. |     157          1      3         3   13061.26         14    932.947 |
358. |     157          2      3         3   18216.06         17   1071.533 |
359. |     157          3      3         3   5546.982         10   554.6982 |
360. |     157          4      3         3   22815.81         41   556.4832 |
     |----------------------------------------------------------------------|
361. |     102          1      4         4   50574.38   177.0915   285.5833 |
362. |     102          2      4         4   211575.3   726.8001   291.1053 |
363. |     102          3      4         4   47463.22   139.0787   341.2687 |
364. |     102          4      4         4   22701.23   77.08021   294.5143 |
365. |     103          1      4         4   250440.7   811.6687   308.5504 |
     |----------------------------------------------------------------------|
366. |     103          2      4         4   324616.1   987.1757   328.8332 |
367. |     103          3      4         4   114424.4    358.283   319.3688 |
368. |     103          4      4         4   213537.1   683.4447   312.4424 |
369. |     104          1      4         4   510797.1   542.9748   940.7381 |
370. |     104          2      4         4   322768.2   364.4067   885.7363 |
     |----------------------------------------------------------------------|
371. |     104          3      4         4   111571.5   118.2316   943.6691 |
372. |     104          4      4         4     146018   167.9941   869.1851 |
373. |     105          1      4         4   289551.8   1475.235    196.275 |
374. |     105          2      4         4   369443.7   1452.304   254.3845 |
375. |     105          3      4         4   211792.1   952.0775   222.4526 |
     |----------------------------------------------------------------------|
376. |     105          4      4         4     243405   1003.434   242.5721 |
377. |     107          1      4         4   505085.7   5560.126    90.8407 |
378. |     107          2      4         4     400867   7075.632   56.65459 |
379. |     107          3      4         4   406837.5    4643.12    87.6216 |
380. |     107          4      4         4   101309.8   1387.103   73.03694 |
     |----------------------------------------------------------------------|
381. |     108          1      4         4   180265.2   651.9546   276.4996 |
382. |     108          2      4         4   133446.6   198.4393   672.4808 |
383. |     108          3      4         4   74018.83   142.8713   518.0803 |
384. |     108          4      4         4   43851.49    95.9052   457.2379 |
385. |     109          1      4         4   148350.3    1460.29   101.5896 |
     |----------------------------------------------------------------------|
386. |     109          2      4         4   105880.9   802.2593   131.9784 |
387. |     109          3      4         4   206227.1   1279.339   161.1982 |
388. |     109          4      4         4   33244.04   332.3325   100.0325 |
389. |     110          1      4         4   60723.95   28.05668   2164.331 |
390. |     110          2      4         4   78900.36   34.19142   2307.607 |
     |----------------------------------------------------------------------|
391. |     110          3      4         4   32496.47   17.69062   1836.932 |
392. |     110          4      4         4   23335.01   10.99167   2122.973 |
393. |     112          1      4         4   247033.4    426.781   578.8295 |
394. |     112          2      4         4   1720.131   2.951568   582.7856 |
395. |     112          3      4         4   89191.91   159.5971   558.8568 |
     |----------------------------------------------------------------------|
396. |     112          4      4         4   5393.006   19.11349   282.1571 |
397. |     113          1      4         4   247032.9   217.9405   1133.488 |
398. |     113          2      4         4   481742.5   407.7542   1181.453 |
399. |     113          3      4         4   300553.1   384.2893   782.1011 |
400. |     113          4      4         4   179695.2   210.9265   851.9329 |
     |----------------------------------------------------------------------|
401. |     114          1      4         4   65879.63   30.32915   2172.155 |
402. |     114          2      4         4   41914.19   19.93449   2102.596 |
403. |     114          3      4         4   6844.912   5.049122   1355.664 |
404. |     114          4      4         4   35195.41   26.22903   1341.849 |
405. |     115          1      4         4   119378.4   124.2133   961.0759 |
     |----------------------------------------------------------------------|
406. |     115          2      4         4   112994.6   90.00769   1255.389 |
407. |     115          3      4         4    28583.3   21.63304   1321.279 |
408. |     115          4      4         4   89048.72   104.0911   855.4886 |
409. |     116          1      4         4   6429.374    5.99793   1071.932 |
410. |     116          2      4         4   22554.48   24.61613   916.2479 |
     |----------------------------------------------------------------------|
411. |     116          3      4         4    6805.51    12.7653   533.1255 |
412. |     116          4      4         4    4571.43    5.77854   791.1048 |
413. |     117          1      4         4   234255.5   60.18694   3892.131 |
414. |     117          2      4         4   210976.1   56.27686   3748.896 |
415. |     117          3      4         4   49763.81   12.39388   4015.191 |
     |----------------------------------------------------------------------|
416. |     117          4      4         4   85618.86   22.50526   3804.393 |
417. |     119          1      4         4   132111.7   24.17783   5464.167 |
418. |     119          2      4         4   62900.37   12.63612   4977.822 |
419. |     119          3      4         4   17135.04   3.536517   4845.175 |
420. |     119          4      4         4    60467.7   13.06854   4626.967 |
     |----------------------------------------------------------------------|
421. |     121          1      4         4   41738.85    10.8535   3845.658 |
422. |     121          2      4         4   46482.51   12.03831   3861.215 |
423. |     121          3      4         4   24895.02   6.827045   3646.529 |
424. |     121          4      4         4    42317.1   11.00061   3846.797 |
425. |     122          1      4         4    26699.9   15.56788   1715.063 |
     |----------------------------------------------------------------------|
426. |     122          2      4         4    56613.3   73.75848   767.5496 |
427. |     122          3      4         4   20093.35    77.6041   258.9212 |
428. |     122          4      4         4    27498.7    25.4713   1079.595 |
429. |     123          1      4         4   38233.82   35.12215   1088.596 |
430. |     123          2      4         4   50912.63   198.6889   256.2429 |
     |----------------------------------------------------------------------|
431. |     123          3      4         4   12227.24   53.36464   229.1262 |
432. |     123          4      4         4   55207.01   226.1123   244.1574 |
433. |     125          1      4         4   130840.5   1798.963   72.73106 |
434. |     125          2      4         4     163777   1773.586   92.34233 |
435. |     125          3      4         4   58478.13   768.4346   76.10033 |
     |----------------------------------------------------------------------|
436. |     125          4      4         4   112844.5   1274.624   88.53163 |
437. |     127          1      4         4   29171.46   24.93191   1170.045 |
438. |     127          2      4         4   33290.21   20.63014   1613.668 |
439. |     127          3      4         4   20825.27   18.11654   1149.517 |
440. |     127          4      4         4   28236.01    16.7201   1688.747 |
     |----------------------------------------------------------------------|
441. |     132          1      4         4   129777.8   479.9669   270.3892 |
442. |     132          2      4         4   7054.213   29.07483   242.6227 |
443. |     132          3      4         4   27554.52   76.46606   360.3498 |
444. |     132          4      4         4   3228.541   6.953988   464.2719 |
445. |     134          1      4         4   39625.29   118.4858   334.4306 |
     |----------------------------------------------------------------------|
446. |     134          2      4         4   16294.92   44.08614   369.6154 |
447. |     134          3      4         4   14656.99   34.52512   424.5313 |
448. |     134          4      4         4   64578.79   223.1512   289.3947 |
449. |     136          1      4         4   85067.58   114.7494   741.3333 |
450. |     136          2      4         4   59887.71   87.32884   685.7725 |
     |----------------------------------------------------------------------|
451. |     136          3      4         4   21924.38   31.89978   687.2893 |
452. |     136          4      4         4   43128.63   53.89383   800.2518 |
453. |     138          1      4         4   36797.67   103.3901   355.9111 |
454. |     138          2      4         4   66269.23   217.6548   304.4694 |
455. |     138          3      4         4   15880.55   55.12859   288.0638 |
     |----------------------------------------------------------------------|
456. |     138          4      4         4   26687.62   93.42125   285.6697 |
457. |     140          1      4         4   239131.5    321.812   743.0782 |
458. |     140          2      4         4   102046.1   82.79775   1232.475 |
459. |     140          3      4         4   90682.35   102.8637    881.578 |
460. |     140          4      4         4   14782.63   16.84725   877.4501 |
     |----------------------------------------------------------------------|
461. |     141          1      4         4   282870.5   199.2808   1419.457 |
462. |     141          2      4         4   368970.1   238.9932   1543.852 |
463. |     141          3      4         4   147304.6   116.1563   1268.158 |
464. |     141          4      4         4   165064.2   112.4359   1468.074 |
465. |     144          1      4         4   45217.27   21.91822   2062.999 |
     |----------------------------------------------------------------------|
466. |     144          2      4         4   120485.3    59.5132   2024.514 |
467. |     144          3      4         4   49337.66   26.24553    1879.85 |
468. |     144          4      4         4    39266.8   19.33405   2030.966 |
469. |     147          1      4         4   115666.6   53.27449   2171.144 |
470. |     147          2      4         4   91657.35   39.83657   2300.834 |
     |----------------------------------------------------------------------|
471. |     147          3      4         4   32984.11    13.7591   2397.257 |
472. |     147          4      4         4   43775.56   18.40739   2378.151 |
473. |     153          1      4         4   40516.21    34.8496   1162.602 |
474. |     153          2      4         4   67954.04   53.72313   1264.893 |
475. |     153          3      4         4   34123.73   32.29235   1056.712 |
     |----------------------------------------------------------------------|
476. |     153          4      4         4    24482.3   21.57769   1134.612 |
477. |     157          1      4         4   43711.25         47   930.0266 |
478. |     157          2      4         4   61722.07         36   1714.502 |
479. |     157          3      4         4   6957.883         13   535.2217 |
480. |     157          4      4         4   17969.25         24   748.7187 |
     +----------------------------------------------------------------------+

.                         tempfile uvq2;

.                         keep reg_tpi product survquar ppkg_trim;

.                 save `uvq2', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000e.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000e.tmp saved

.                                 use `uvq' ;

.                         merge reg_tpi product survquar using `uvq2';
(label REG_TPI already defined)
(label lsurvquar already defined)

.                         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        480      100.00      100.00
------------+-----------------------------------
      Total |        480      100.00

.                         drop _merge;

.                 save `uvq', replace;
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved

.                 save "$path/work/tpi_unit_val_quarterly.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_unit_val_quarterly.d
> ta saved

.         restore;

. **************************************************************************;
. * Now calculate the weights for the temporal price index. The weights
> * will be based on the bottom 50% of the national nominal consumption
> * per capita (see below). We let the weights vary by strata (3 regions X rural/urba
> n).
> *
> * First, make a small file that has the total nominal HH daily consumption,
> * to use as our denominator. We cannot simply use the `bottom_tpi' file that
> * was created earlier because we will need some other variables from
> * the cons_cat.dta file.
> **************************************************************************;
. use "$path\work\conpc.dta", clear;

. keep hhid cons_hh_nom;

. *use "$path/in/cons_cat.dta", clear ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;

.         merge hhid using "$path\work\hhdata.dta";

.           tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         collapse (mean) cons_hh_nom hhsize strata hhweight rural news survquar reg_
> tpi,
>                 by(hhid);

.         lab var cons_hh_nom "Nominal daily HH consumption";

.         rename hhsize   cc_hhs;

.         rename strata   cc_reg;

.         rename hhweight cc_hhw;

.         rename rural    cc_rur;

.         rename news     cc_news;

.         rename survquar cc_qua;

.         rename reg_tpi  cc_reg_tpi;

.         sort hhid;

.         tempfile thhcons;

. save `thhcons', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000f.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000f.tmp saved

. **************************************************************************;
. * Merge the file with consumption on the food products with HH consumption file,
> * then use "fillin" to take care of cases where a household did not
> * consume all n_tpi commodities. Note that we need to do the merge
> * first because there are some households that are not in `acredd' at
> * all, because they did not consume *any* of the n_tpi items. Then replace
> * missing values in the "filled in" observations with the relevant values 
> * for that household.
> **************************************************************************;
. use `acredd';

.         cap drop _merge;

.         drop if product==.;
(151 observations deleted)

.         merge hhid using `thhcons';
variable hhid does not uniquely identify observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        151        0.28        0.28
          3 |     54,510       99.72      100.00
------------+-----------------------------------
      Total |     54,661      100.00

.         for var valued_tot quantityd_tot : replace X=0 if _merge==2;

->  replace valued_tot=0 if _merge==2
(151 real changes made)

->  replace quantityd_tot=0 if _merge==2
(151 real changes made)

.                 /*
>         for var valued_ac quantityd_ac valued_re quantityd_re valued_dd quantityd_d
> d 
>                 valued_tot quantityd_tot : replace X=0 if _merge==2;
>                                 */
> 
>         replace hhsize  =cc_hhs     if _merge==2;
(151 real changes made)

.         replace strata  =cc_reg     if _merge==2;
(151 real changes made)

.         replace hhweight=cc_hhw     if _merge==2;
(151 real changes made)

.         replace rural   =cc_rur     if _merge==2;
(151 real changes made)

.         replace news    =cc_news        if _merge==2;
(151 real changes made)

.         replace survquar=cc_qua     if _merge==2;
(151 real changes made)

.         replace reg_tpi =cc_reg_tpi     if _merge==2;
(151 real changes made)

.         drop _merge cc_* ;

.                 fillin hhid product;

.         replace valued_tot=0 if _fillin;
(155364 real changes made)

.                 for var quantityd_tot 
>                 strata rural hhweight hhsize survquar survmon news reg_tpi cons_hh_
> nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;

->  egen tmp=mean(quantityd_tot), by(hhid)

->  replace quantityd_tot=tmp if _fillin
(155364 real changes made)

->  drop tmp

->  egen tmp=mean(strata), by(hhid)

->  replace strata=tmp if _fillin
(155364 real changes made)

->  drop tmp

->  egen tmp=mean(rural), by(hhid)

->  replace rural=tmp if _fillin
(155364 real changes made)

->  drop tmp

->  egen tmp=mean(hhweight), by(hhid)

->  replace hhweight=tmp if _fillin
(155364 real changes made)

->  drop tmp

->  egen tmp=mean(hhsize), by(hhid)

->  replace hhsize=tmp if _fillin
(155364 real changes made)

->  drop tmp

->  egen tmp=mean(survquar), by(hhid)

->  replace survquar=tmp if _fillin
(155364 real changes made)

->  drop tmp

->  egen tmp=mean(survmon), by(hhid)
(4681 missing values generated)

->  replace survmon=tmp if _fillin
(150834 real changes made)

->  drop tmp

->  egen tmp=mean(news), by(hhid)

->  replace news=tmp if _fillin
(155364 real changes made)

->  drop tmp

->  egen tmp=mean(reg_tpi), by(hhid)

->  replace reg_tpi=tmp if _fillin
(155364 real changes made)

->  drop tmp

->  egen tmp=mean(cons_hh_nom), by(hhid)

->  replace cons_hh_nom=tmp if _fillin
(155364 real changes made)

->  drop tmp

.                                 /*
>         for var valued_ac quantityd_ac valued_re quantityd_re valued_dd quantityd_d
> d 
>                 quantityd_tot 
>                 strata rural hhweight hhsize survquar survmon news reg_tpi cons_hh_
> nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;
>                                 */
> 
> **************************************************************************;
. * Now calculate the shares, and then the mean shares in each strata, 
> * using hhweight*hhsize weighting. 
> * Note that we are not doing quantity weighting now for the shares.
> **************************************************************************;
.         gen share = valued_tot/cons_hh_nom ;

.         gen popwt = hhsize*hhweight;

.         lab var share "HH share in total consumption";

.         lab var popwt "Population weight: hhsize*hhweight";

. **************************************************************************;
. * Select the bottom 50% (weighted) of the distribution of nominal per 
> * capita consumption.
> **************************************************************************;
.         gen cpc=cons_hh_nom/hhsize;

.         sum cpc [aw=hhweight] , detail;

                             cpc
-------------------------------------------------------------
      Percentiles      Smallest
 1%     341.2898       78.55931
 5%     695.3857       78.55931
10%     897.8539       78.55932       Obs              210025
25%     1376.486       78.55932       Sum of Wgt.   952113106

50%     2259.297                      Mean           10464.25
                        Largest       Std. Dev.      451461.1
75%     4217.707       8.12e+07
90%     9842.668       8.12e+07       Variance       2.04e+11
95%     19766.71       8.12e+07       Skewness       177.7597
99%     111655.2       8.12e+07       Kurtosis       31946.76

.         global medcpc=r(p$tpi_bottom);

. * MAH ;
.  sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |    210025    2.51e+09    1.13e+09   1.01e+09   4.19e+09
     product |    203250    123.1333    15.43319        102        157
  valued_tot |    210025    137.5085    444.6322          0      18500
quantityd_~t |    210025    1.195133    2.391138          0   364.2857
      strata |    210025    5.551734    2.873466          1         10
-------------+--------------------------------------------------------
      hhsize |    210025        4.96    2.758373          1         24
    hhweight |    210025    4533.332    4303.934         54      92511
    survquar |    210025    2.499336    1.143942          1          4
     survmon |    205344    6.715882    3.349725          1         12
       rural |    210025    .8199262    .3842498          0          1
-------------+--------------------------------------------------------
        news |    210025    2.416827    1.118309          1          4
    spdomain |     54510    3.160264    1.389057          1          5
     reg_tpi |    210025    2.416827    1.118309          1          4
 cons_hh_nom |    210025    97487.28     4938143   232.1918   4.06e+08
     _fillin |    210025    .7397405    .4387772          0          1
-------------+--------------------------------------------------------
       share |    210025    .0105519    .0345066          0   .7896302
       popwt |    210025    29614.26    44552.33         62     832599
         cpc |    210025    20773.97    987325.8   78.55931   8.12e+07

.  codebook hhid;

-------------------------------------------------------------------------------------
hhid                                                                   Household Code
-------------------------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]        units:  1
         unique values:  6775                     missing .:  0/210025

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       90%
                           1.0e+09   1.1e+09   2.2e+09   3.2e+09   4.1e+09

.         keep if cpc<=$medcpc;
(0 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |    210025    2.51e+09    1.13e+09   1.01e+09   4.19e+09
     product |    203250    123.1333    15.43319        102        157
  valued_tot |    210025    137.5085    444.6322          0      18500
quantityd_~t |    210025    1.195133    2.391138          0   364.2857
      strata |    210025    5.551734    2.873466          1         10
-------------+--------------------------------------------------------
      hhsize |    210025        4.96    2.758373          1         24
    hhweight |    210025    4533.332    4303.934         54      92511
    survquar |    210025    2.499336    1.143942          1          4
     survmon |    205344    6.715882    3.349725          1         12
       rural |    210025    .8199262    .3842498          0          1
-------------+--------------------------------------------------------
        news |    210025    2.416827    1.118309          1          4
    spdomain |     54510    3.160264    1.389057          1          5
     reg_tpi |    210025    2.416827    1.118309          1          4
 cons_hh_nom |    210025    97487.28     4938143   232.1918   4.06e+08
     _fillin |    210025    .7397405    .4387772          0          1
-------------+--------------------------------------------------------
       share |    210025    .0105519    .0345066          0   .7896302
       popwt |    210025    29614.26    44552.33         62     832599
         cpc |    210025    20773.97    987325.8   78.55931   8.12e+07

.                 collapse (mean) share (median) medshare=share [aw=popwt] , 
>                         by(reg_tpi product);

.                 egen sumsh=sum(share) , by(reg_tpi);

.                 replace share=share/sumsh;
(120 real changes made)

.                 drop sumsh;

.                 egen sumsh=sum(medshare) , by(reg_tpi);

.                 replace medshare=medshare/sumsh;
(24 real changes made)

.                 drop sumsh;

.                 lab var share "Reg 6: Mean HH share of total consumption";

.                 lab var medshare "Reg 6: Median HH share of total consumption";

.                 sort reg_tpi product;

.                 save "$path/work/tpi_reg_tpi_share.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/tpi_reg_tpi_share.dta sa
> ved

.                 tempfile tempwt6;

.                 save `tempwt6', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000g.tmp not found)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000g.tmp saved

. use `uvq', clear;

.         sort reg_tpi product;

. save , replace;
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp saved

. use `tempwt6';

.         merge reg_tpi product using `uvq';
variables reg_tpi product do not uniquely identify observations in
    C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0j00000c.tmp
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          4        0.83        0.83
          3 |        480       99.17      100.00
------------+-----------------------------------
      Total |        484      100.00

.         gen tpi1     =ppkg     *share;
(4 missing values generated)

.         gen tpi1_trim=ppkg_trim*share;
(4 missing values generated)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |       480    123.1333    15.44925        102        157
     reg_tpi |       484         2.5    1.119191          1          4
       share |       484    .0330579    .0329701          0    .149083
    medshare |       484    .0330579    .0963407          0   .6723011
    survquar |       480         2.5      1.1192          1          4
-------------+--------------------------------------------------------
        news |       480         2.5      1.1192          1          4
  valued_tot |       480    68913.42    68735.64   421.7399   422095.6
quantityd_~t |       480    154.0182     307.653   .6235518   3353.071
        ppkg |       480    1303.353    1255.964   63.26157    6280.27
   ppkg_trim |       480    1210.636    1234.154   56.65459   6596.031
-------------+--------------------------------------------------------
      _merge |       484    2.983471    .1812526          1          3
        tpi1 |       480    39.16437     50.1109   .1747039    264.609
   tpi1_trim |       480    37.30183    49.97745   .1012088   299.6517

. keep if survquar!=.;
(4 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |       480    123.1333    15.44925        102        157
     reg_tpi |       480         2.5      1.1192          1          4
       share |       480    .0333333    .0329682   .0007248    .149083
    medshare |       480    .0333333    .0966945          0   .6723011
    survquar |       480         2.5      1.1192          1          4
-------------+--------------------------------------------------------
        news |       480         2.5      1.1192          1          4
  valued_tot |       480    68913.42    68735.64   421.7399   422095.6
quantityd_~t |       480    154.0182     307.653   .6235518   3353.071
        ppkg |       480    1303.353    1255.964   63.26157    6280.27
   ppkg_trim |       480    1210.636    1234.154   56.65459   6596.031
-------------+--------------------------------------------------------
      _merge |       480           3           0          3          3
        tpi1 |       480    39.16437     50.1109   .1747039    264.609
   tpi1_trim |       480    37.30183    49.97745   .1012088   299.6517

. list in  1/3;

     +------------------------------------------------------------------------+
  1. | product | reg_tpi |    share | medshare |   survquar | news | valued~t |
     |     102 | central | .0206776 |        0 | May-Jul 09 |    1 | 87863.27 |
     |------------------------------------------------------------------------|
     | quanti~t  |     ppkg  | ppkg_t~m  |  _merge  |      tpi1  |  tpi1_t~m  |
     |  265.855  | 330.4932  | 327.3867  |       3  |  6.833801  |  6.769566  |
     +------------------------------------------------------------------------+

     +------------------------------------------------------------------------+
  2. | product | reg_tpi |    share | medshare |   survquar | news | valued~t |
     |     103 | central | .0480068 |        0 | May-Jul 09 |    1 | 130912.3 |
     |------------------------------------------------------------------------|
     | quanti~t  |     ppkg  | ppkg_t~m  |  _merge  |      tpi1  |  tpi1_t~m  |
     | 425.6857  | 307.5327  | 305.1313  |       3  |  14.76367  |  14.64839  |
     +------------------------------------------------------------------------+

     +------------------------------------------------------------------------+
  3. | product | reg_tpi |    share | medshare |   survquar | news | valued~t |
     |     104 | central | .0524175 |        0 | May-Jul 09 |    1 | 163908.7 |
     |------------------------------------------------------------------------|
     | quanti~t  |     ppkg  | ppkg_t~m  |  _merge  |      tpi1  |  tpi1_t~m  |
     | 266.3135  | 615.4728  | 586.9709  |       3  |  32.26154  |  30.76754  |
     +------------------------------------------------------------------------+

. list in -3/-1;

     +-------------------------------------------------------------------------+
478. | product | reg_tpi |    share | medshare |    survquar | news | valued~t |
     |     157 | western | .0178493 |        0 | Sept-Oct 09 |    4 | 78939.99 |
     |-------------------------------------------------------------------------|
     | quanti~t  |     ppkg  |  ppkg_t~m  |  _merge  |      tpi1  |  tpi1_t~m  |
     |       41  | 1925.366  |  1714.502  |       3  |  34.36645  |  30.60268  |
     +-------------------------------------------------------------------------+

     +-------------------------------------------------------------------------+
479. | product | reg_tpi |    share | medshare |    survquar | news | valued~t |
     |     157 | western | .0178493 |        0 | Nov09-Jan10 |    4 | 7215.774 |
     |-------------------------------------------------------------------------|
     | quanti~t  |     ppkg  |  ppkg_t~m  |  _merge  |      tpi1  |  tpi1_t~m  |
     |       14  | 515.4124  |  535.2217  |       3  |  9.199757  |  9.553339  |
     +-------------------------------------------------------------------------+

     +-------------------------------------------------------------------------+
480. | product | reg_tpi |    share | medshare |    survquar | news | valued~t |
     |     157 | western | .0178493 |        0 |  Feb-Apr 10 |    4 |  75578.8 |
     |-------------------------------------------------------------------------|
     | quanti~t  |     ppkg  |  ppkg_t~m  |  _merge  |      tpi1  |  tpi1_t~m  |
     |       25  | 3023.152  |  748.7187  |       3  |  53.96118  |  13.36411  |
     +-------------------------------------------------------------------------+

.         **************************************************************************;
. * Find TPI level and indexes for non-trimmed and trimmed prices
> **************************************************************************;
. * Not trimmed ;
.         collapse (sum) tpi1 tpi1_trim  , by(reg_tpi survquar);

.                 for num 1/$n_tpi :
>                         sum tpi1 if reg_tpi==X & survquar==2 , meanonly \
>                         sum tpi1 if reg_tpi==X & survquar==4 , meanonly \
>                         global baseX=r(mean);

->  sum tpi1 if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1 if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)

->  sum tpi1 if reg_tpi==3 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==3 & survquar==4 , meanonly

->  global base3=r(mean)

->  sum tpi1 if reg_tpi==4 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==4 & survquar==4 , meanonly

->  global base4=r(mean)

.                 lab var tpi1 "Temporal price index before normalization";

.                                 foreach v of numlist 1/$n_tpi { ;
  2.                                         if `v'==1 { ;
  3.                                                 gen tpi=tpi1/${base`v'} if reg_t
> pi==`v' ;
  4.                                         } ;
  5.                                         if `v'>1 { ;
  6.                                                 replace tpi=tpi1/${base`v'} if r
> eg_tpi==`v' ;
  7.                                         } ;
  8.                                 } ;
(12 missing values generated)
(4 real changes made)
(4 real changes made)
(4 real changes made)

.                                                                                    
>              *gen     tpi=tpi1/$base1 if reg_tpi==1;
.                 *replace tpi=tpi1/$base2 if reg_tpi==2;
.                 *replace tpi=tpi1/$base3 if reg_tpi==3;
.                 *replace tpi=tpi1/$base4 if reg_tpi==4;
.                 *replace tpi=tpi1/$base5 if reg_tpi==5;
.                 *replace tpi=tpi1/$base6 if reg_tpi==6;
.                                                                                 lab
>  var tpi "Temporal price index (Q4=1)";

. * Trimmed ;
.                 for num 1/$n_tpi :
>                         sum tpi1_trim if reg_tpi==X & survquar==2 , meanonly \
>                         sum tpi1_trim if reg_tpi==X & survquar==4 , meanonly \
>                         global baseX=r(mean);

->  sum tpi1_trim if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1_trim if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)

->  sum tpi1_trim if reg_tpi==3 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==3 & survquar==4 , meanonly

->  global base3=r(mean)

->  sum tpi1_trim if reg_tpi==4 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==4 & survquar==4 , meanonly

->  global base4=r(mean)

.                 lab var tpi1_trim "Six regions: TRIMMED Temporal price index before
>  normalization";

.                                 foreach v of numlist 1/$n_tpi { ;
  2.                                         if `v'==1 { ;
  3.                                                 gen tpi_trim=tpi1_trim/${base`v'
> } if reg_tpi==`v' ;
  4.                                         } ;
  5.                                         if `v'>1 { ;
  6.                                                 replace tpi_trim=tpi1_trim/${bas
> e`v'} if reg_tpi==`v' ;
  7.                                         } ;
  8.                                 } ;
(12 missing values generated)
(4 real changes made)
(4 real changes made)
(4 real changes made)

.                                                 lab var tpi_trim "TRIMMED Temporal 
> price index (Q4=1)";

.                 sort reg_tpi survquar;

.             drop if reg_tpi<1 | reg_tpi>$n_tpi;
(0 observations deleted)

. gen tpi_diff = tpi - tpi_trim;

. lab var tpi_diff "TPI difference btw trimmed/untrimmed";

. twoway (connected tpi_trim survquar),yline(1) by(, title("TPI: Trimmed"))
> by(reg_tpi) sav("$path/work/reg_tpi-tpi_trim", replace);
(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/reg_tpi-tpi_trim.gph sa
> ved)

. graph export "$path/work/reg_tpi-tpi_trim.tif", replace;
(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/reg_tpi-tpi_trim.tif wr
> itten in TIFF format)

. list reg_tpi survquar tpi tpi_trim tpi_diff;

     +----------------------------------------------------------+
     |  reg_tpi      survquar        tpi   tpi_trim    tpi_diff |
     |----------------------------------------------------------|
  1. |  central    May-Jul 09   .9860798   .9697402    .0163396 |
  2. |  central   Sept-Oct 09   .9903705   1.010449   -.0200787 |
  3. |  central   Nov09-Jan10   1.024968    1.00246    .0225078 |
  4. |  central    Feb-Apr 10          1          1           0 |
  5. |  eastern    May-Jul 09   .9697458   1.006519   -.0367731 |
     |----------------------------------------------------------|
  6. |  eastern   Sept-Oct 09   .9794639   1.013825   -.0343608 |
  7. |  eastern   Nov09-Jan10   1.004262   1.047603    -.043341 |
  8. |  eastern    Feb-Apr 10          1          1           0 |
  9. | northern    May-Jul 09      .9855   1.054369   -.0688694 |
 10. | northern   Sept-Oct 09   1.046155   .9905532     .055602 |
     |----------------------------------------------------------|
 11. | northern   Nov09-Jan10   1.001909   .9743311    .0275775 |
 12. | northern    Feb-Apr 10          1          1           0 |
 13. |  western    May-Jul 09   .9418652   1.051592    -.109727 |
 14. |  western   Sept-Oct 09   1.048123   1.104535   -.0564119 |
 15. |  western   Nov09-Jan10   .9263657   .9857301   -.0593644 |
     |----------------------------------------------------------|
 16. |  western    Feb-Apr 10          1          1           0 |
     +----------------------------------------------------------+

.                 sort reg_tpi survquar;

. keep reg_tpi survquar tpi_trim;

. save "$path/work/temp_index_reg_tpi.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA/work/temp_index_reg_tpi.dta s
> aved

.                        ************************************************************
> **************
> * 090_temp_index.do     (end)
> **************************************************************************;
. cap log close;
