---------------------------------------------------
      name:  log_total
       log:  /home/bjvca/data/data/GAP/Haruna/rep/l
> og_total.log
  log type:  text
 opened on:  20 May 2013, 12:16:14

. log using "$path/rep/log_total.smcl", name(log_to
> t_s) replace
---------------------------------------------------
      name:  log_tot_s
       log:  /home/bjvca/data/data/GAP/Haruna/rep/l
> og_total.smcl
  log type:  smcl
 opened on:  20 May 2013, 12:16:14

. log using "$path/rep/000_boom.log"  , name(log_00
> 0_boom) replace
---------------------------------------------------
      name:  log_000_boom
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 00_boom.log
  log type:  text
 opened on:  20 May 2013, 12:16:14

. 
. display "* # * # * # * # * # * # * # * # * # * # 
> * # * # * # * # * # * # *"
* # * # * # * # * # * # * # * # * # * # * # * # * #
>  * # * # * # *

. display ""


. display "Generel information:"
Generel information:

. display "   UGANDA HOUSEHOLD BUDGET SURVEY 2009/1
> 0"
   UGANDA HOUSEHOLD BUDGET SURVEY 2009/10

. display "   Poverty rate estimation"
   Poverty rate estimation

. display "   Methodology: Iterative procedure and 
> revealed preferences tests"
   Methodology: Iterative procedure and revealed pr
> eferences tests

. display ""


. display "* # * # * # * # * # * # * # * # * # * # 
> * # * # * # * # * # * # *"
* # * # * # * # * # * # * # * # * # * # * # * # * #
>  * # * # * # *

. 
. 
. *************************************************
> *************************

. * 000_boom.do(start)

. *

. * Reminders:

. *1) Check very top of this file to make sure you 
> are on the right path! 

. *2) GAMS 22.5 must be placed onto the path. See 1
> 90_revpref13_m1.bat.

. *   Typically this needs to be edited.

. *   3) In case of implementing a new survey the u
> ser must make necessary

. *      changes in 010_initial.do, 020_hhdata.do a
> nd 030_rawdata.do.

. *

. * Process:

. * - The do-file prefix indicates first time a do-
> file is called

. *

. * KS, 2003

. * CA, 2009-2010

. * MAH, Apr. 2012

. *************************************************
> *************************

. 
. clear all

. set more off

. set mem 700m

. 
. noisily display "Start time: " "$S_TIME"
Start time: 12:16:15

. 
. 
. 
. *************************************************
> *************************

. * Macros. Region definitions. Demographic definit
> ions.

. *************************************************
> *************************

. do "$path/new/010_initial.do"

. cap log close

. log using "$path/rep/010_initial.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 10_initial.log
  log type:  text
 opened on:  20 May 2013, 12:16:15

. clear

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> *****************************
> * 010_initial.do                (start)
> *************************************************
> *****************************;
. *************************************************
> *****************************
> * Purpose: Set some globals
> *************************************************
> *****************************;
. *************************************************
> *****************************
> * TPI basket
> *************************************************
> *****************************;
. * Number of items for Uganda i primarily set it t
> o 30 on considering a product for appearing over 
> 1000 times on households menu min was 1085 and ma
> x was 6157 however the relevant code in new is at
> vivated to take care of this automatically;
. global product_tpi_n "30";

. * Code choose $product_tpi_n ;
. global product_tpi   "product_tpi==1";

. * Initial (arbitrary) quantile defining poor for 
> price index calculations.
> * Mozambique: bottom 60%. Vietnam: bottom 20%. Ta
> nzania: bottom 40% . Uganda: headcount 2009 24.5%
>  ;
. global tpi_bottom "30";

.  * Set the number of regions in the TPI calc for 
> Uganda are set to 4 as east central north and eas
> t;
. global n_tpi "4";

. * To reproduce the mozambique 10 numbers, the fol
> lowing global should be commented out. It control
> s a line in 140_iterate.do 
> * where observations not measured in kg are dropp
> ed. For all other datasets, all observations shou
> ld be converted to kg's before
> * the toolkit is run. For all other datasets, thi
> s line should therefore be included.
> global MZ "*";
. *************************************************
> *****************************
> * Initial (arbitrary) quantile defining the (rela
> tively) poor.
> *************************************************
> *****************************;
. global bottom "30";

. *************************************************
> *****************************
> * Number of iterations in 140_iterate.do
> *************************************************
> *****************************;
. global it_n "5";

. *************************************************
> *****************************
> * Set the number of regions in the spatial domain
> ;
. *************************************************
> *****************************;
. global n_spdom "5";

. ******************* we deleted East urban, North 
> urban and West urban because too few observations
>  were in those spatial domains;
.  ************************************************
> ******************************
> * Revealed preferences choices
> *************************************************
> *****************************;
. * Activate GAMS program according to number of re
> gions in spatial domain;
. *global revpref "190_revpref13_m1.bat";
. *global no_temp_rev " ";
. * k spatial regions and no intertemporal revealed
>  preference condition:
>   Activate the next two lines below;
. global no_temp_rev "*";

. global revpref "190_revpref13_r.bat";

.  ************************************************
> **************************
> * 010_initial.do                (end)
> *************************************************
> *************************;
. log close;
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 10_initial.log
  log type:  text
 closed on:  20 May 2013, 12:16:15
---------------------------------------------------

. 
end of do-file

. 
. *do "C:\user\gapp\z_data_preb/new/100_collect_exp
> en_moz.do"

. *s;

. 
. *do "C:\user\gapp\z_data_preb/new/000_boom.do"

. 
. *global path "C:\user\gapp"

. 
. /*
unrecognized command:  / invalid command name
r(199);

. 
. *************************************************
> *************************;

. *************************************************
> *************************;

. * This is the block of do files to set up the dat
> a to get nominal

. * consumption. These DO NOT need to be bootstrapp
> ed.

. *************************************************
> *************************;

. *************************************************
> *************************;

. 
. * This code produces some once for all data for t
> he in-folder. Don't

. * run it unless you know what you are doing!!!

. * Produces education expenditure

. *do "$path\new\Create/education_Create.do"

. * Imputation of missing recepts-in-kind. Run the 
> code without this first...

. *do "$path\new\Create/0_code_chain.do"

. * First poverty lines dependent on IAF

. *do "$path\new\Create/povlines_first_iof_Create.d
> o"

. * Match product codes for different surveys

. *do "$path\new\Create/match96_02_Create.do"

. * Basket from previous survey

. *do "$path\new\Create/smallbasket_iof_Create.do"

. * Match product codes between surveys

. *do "$path\new\Create/rev_pref_matchcodes_02-96_i
> of_Create.do"

. * Update poverty lines

. *do "$path\new\Create/povlines-96-v1-vers7_iof_Cr
> eate.do"

. * Food share

. *do "$path\new\Create/foodshr96_iof_Create.do"

. 
. *do "$path\new\Create/.do"

. *do "$path\new\Create/.do"

. 
. */

. * This set of files takes the raw data and create
> s more handy data 

. * sets in the work-folder

. do "$path/new/020_in_2_work_folder.do"

. clear all

. *global path "C:/Users/Templeton/Desktop/GAPP/GAP
> P-UGANDA-HARUNA"
. set mem 999m

. 
. cap log close

. log using "$path/rep/020_hhdata.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 20_hhdata.log
  log type:  text
 opened on:  20 May 2013, 12:16:16

. clear

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 020_hhdata.do         (start)
> *
> * Organize the hhid identifier in the HHData file
>  the same way, and keep
> * only the relevant variables.
> *
> * This file sets:
> * - interview month, quarter and year
> * - regions: make all needed regions. But in the 
> end only the one specified
> *            in initial.do are kept. These are
> *            - rural: 0=urban, 1=rural
> *            - news: speficifying North, East, We
> st, South. But combinations
> *                    are also possible, eg. North
> -East, Center,...
> *            - reg_tpi: regions with own TPI
> *            - strata: strata regions
> *            - spdomain: spatial domains (regions
>  with own poverty line)
> *            - news_ru_ur: combination of news an
> d rural
> *************************************************
> *************************;
. use "$path/in/hhdata.dta", clear;

. *recode spdomain 10=1 11=2 20=3 30=4 40=5 these h
> ave been set to five for Uganda to ensure hwe hav
> e at least 1000 households per domain;
. tab spdomain, missing;

     spdomain |      Freq.     Percent        Cum.
--------------+-----------------------------------
Central rural |      1,177       17.37       17.37
Central urban |        809       11.94       29.31
      Eastern |      1,406       20.75       50.07
     Northern |      1,956       28.87       78.94
      Western |      1,427       21.06      100.00
--------------+-----------------------------------
        Total |      6,775      100.00

.         sort hhid;

.         save "$path/work/hhdata.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/hhdata.d
> ta saved

.         sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |      6775    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
      strata |      6775    5.551734    2.873672   
>        1         10
        mult |      6775    919.0598    636.8381   
> 26.67222   10279.15
      region |      6775    2.416827    1.118389   
>        1          4
       urban |      6775    .1800738    .3842773   
>        0          1
-------------+-------------------------------------
> -------------------
    district |      6775    250.5169    112.9571   
>      101        419
       rmult |      6775    919.0713    636.8355   
>       27      10279
      hhsize |      6775        4.96     2.75857   
>        1         24
     welfare |      6775    73089.98    95260.67   
> 2034.431    1932420
    hhweight |      6775    4533.332    4304.242   
>       54      92511
-------------+-------------------------------------
> -------------------
      poor09 |      6775      .23631    .4248461   
>        0          1
         day |      6775    14.08576    7.581748   
>        1         31
       month |      6775    6.686199    3.405931   
>        1         12
        Year |      6775    2009.336    .4722506   
>     2009       2010
       h1bq8 |      6775    1.005018    .0706683   
>        1          2
-------------+-------------------------------------
> -------------------
         psu |      6775     365.894     201.698   
>        1        712
    survquar |      6775    2.499336    1.144024   
>        1          4
     survmon |      6775    6.713948     3.34507   
>        1         12
       rural |      6775    .8199262    .3842773   
>        0          1
        news |      6775    2.416827    1.118389   
>        1          4
-------------+-------------------------------------
> -------------------
        bswt |      6775           1           0   
>        1          1
    spdomain |      6775      3.2431    1.373578   
>        1          5
     reg_tpi |      6775    2.416827    1.118389   
>        1          4

. use "$path/in/indata.dta", clear;

.         *sort hhid;
.         save "$path/work/indata.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/indata.d
> ta saved

.         sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
       indid |     35945    2.57e+11    1.10e+11   
> 1.01e+11   4.19e+11
    motherhh |     35945    .8787592    .3264114   
>        0          1
        hhid |     35945    2.57e+09    1.10e+09   
> 1.01e+09   4.19e+09
         sex |     35945     1.50861    .4999328   
>        1          2
         age |     35945    18.94194    17.44062   
>        0         98

. use "$path/in/calperg.dta", clear;

.         *sort hhid;
.         save "$path/work/calperg.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/calperg.
> dta saved

.         sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     product |        62       130.5    18.04162   
>      100        161
    descript |         0
     calperg |        62    1.980716    2.136812   
>        0       8.84

. use "$path/in/cons_cod.dta", clear;

.         *sort hhid;
.         save "$path/work/cons_cod.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/cons_cod
> .dta saved

.         sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |    412045    2.48e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243   
>      100        999
    food_cat |    412045    1.782558    .4125064   
>        1          2
    prod_cat |    412045    1.782558    .4125064   
>        1          2
    descript |    412045    1.782558    .4125064   
>        1          2
-------------+-------------------------------------
> -------------------
   quantityd |    412045    .1694884    1.512903   
>        0   364.2857
 cod_hh_nom3 |    412045    83.35781    341.2477   
>        0      18500
  cod_hh_nom |    412045    1602.923    615777.4   
>        0   3.95e+08
 cod_hh_nom2 |    412045    1602.658    615777.4   
>        0   3.95e+08

. use "$path/in/cons_cod_trans.dta", clear;

.         *sort hhid;
.         save "$path/work/cons_cod_trans.dta", rep
> lace;
file /home/bjvca/data/data/GAP/Haruna/work/cons_cod
> _trans.dta saved

.         sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |     89596    2.45e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |     89596    131.0155     15.7293   
>      100        161
        unit |     89596           1           0   
>        1          1
    food_cat |     89596           1           0   
>        1          1
   quantityz |     89596     .779464    3.170331   
>        0   364.2857
-------------+-------------------------------------
> -------------------
      valuez |     89596     383.356    648.4919   
>        0      18500

. /*
> use "$path/in/cons_cod_trans.dta", clear;
>         *sort hhid;
>         sum;
> for var value quantityd cod_hh_nom cod_hh_nom2 co
> d_hh_nom3: replace X=0 if X==.;
> collapse food_cat prod_cat (sum) value quantityd 
> cod_hh_nom cod_hh_nom2 cod_hh_nom3, by(hhid produ
> ct descript);
>         save "$path/work/cons_cod.dta", replace;
>         sum;
> */
>  
> *************************************************
> *************************
> * 020_hhdata.do         (end)
> *************************************************
> *************************;
. cap log close;

. 
end of do-file

. 
. /*
unrecognized command:  / invalid command name
r(199);

. * All kind of raw expenditure is handled: daily, 
> own and monthly, rent and use value, education et
> c.

. do "$path/new/030_rawdata.do"
file
    /home/bjvca/data/data/GAP/Haruna/new/030_rawd
    > ata.do not found
r(601);

. 
. * Data set specific changes to each processed raw
>  data set takes place here

. do "$path/new/040_specifities.do"
file
    /home/bjvca/data/data/GAP/Haruna/new/040_spec
    > ifities.do not found
r(601);

. 
. * These files summarizes and checks the data. But
>  no temporal deflation done here yet

. do "$path/new/050_consump_nom.do"
file
    /home/bjvca/data/data/GAP/Haruna/new/050_cons
    > ump_nom.do not found
r(601);

. 
. * Bring in data on food product's calories per gr
> am

. do "$path/new/060_calperg.do"
file
    /home/bjvca/data/data/GAP/Haruna/new/060_calp
    > erg.do not found
r(601);

. */

. *************************************************
> *********************;

. *************************************************
> *********************;

. 
. do "$path/new/070_calpp.do"/* Calories per person
>  in spatial domains*/

. *global path "C:/Users/Templeton/Desktop/GAPP/GAP
> P-UGANDA-HARUNA"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/070_calpp.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 70_calpp.log
  log type:  text
 opened on:  20 May 2013, 12:16:17

. clear

. set more off

. #delimit ;
delimiter now ;
. *global fert_rate "fert_rate";
. *************************************************
> **********************
> * 070_calpp.do          (start)
> *
> * Purpose: Determine calories required for each p
> erson per domain per day.
> *************************************************
> **********************;
. /*
> This file uses:
>         work/indata.dta
>         work/hhdata.dta
> 
> This file creates:
>         work/calpp.dta
> */
> 
> *------------------------------------------------
> -------------------------*
> * Include fertility rates from csv-file
> *------------------------------------------------
> -------------------------*;
. clear;

. insheet sex rural age fert_rate using "$path/in/f
> ert_rate_mozambique.csv";
(4 vars, 96 obs)

. ***************************************** check f
> or Ugandan fertility rates **********************
> ***************
> *************************************************
> *************************************************
> ***********;
. sort sex rural age;

. tempfile fert_rate;

. save `fert_rate';
file /tmp/St02502.000007 saved

. list;

     +------------------------------+
     | sex   rural   age   fert_r~e |
     |------------------------------|
  1. |   2       0    12       .003 |
  2. |   2       0    13       .003 |
  3. |   2       0    14       .093 |
  4. |   2       0    15       .093 |
  5. |   2       0    16       .093 |
     |------------------------------|
  6. |   2       0    17       .093 |
  7. |   2       0    18       .207 |
  8. |   2       0    19       .207 |
  9. |   2       0    20       .207 |
 10. |   2       0    21       .207 |
     |------------------------------|
 11. |   2       0    22       .207 |
 12. |   2       0    23       .207 |
 13. |   2       0    24       .207 |
 14. |   2       0    25       .207 |
 15. |   2       0    26       .207 |
     |------------------------------|
 16. |   2       0    27       .207 |
 17. |   2       0    28       .207 |
 18. |   2       0    29       .207 |
 19. |   2       0    30       .144 |
 20. |   2       0    31       .144 |
     |------------------------------|
 21. |   2       0    32       .144 |
 22. |   2       0    33       .144 |
 23. |   2       0    34       .144 |
 24. |   2       0    35       .144 |
 25. |   2       0    36       .144 |
     |------------------------------|
 26. |   2       0    37       .144 |
 27. |   2       0    38       .144 |
 28. |   2       0    39       .144 |
 29. |   2       0    40       .144 |
 30. |   2       0    41       .144 |
     |------------------------------|
 31. |   2       0    42       .144 |
 32. |   2       0    43       .144 |
 33. |   2       0    44       .144 |
 34. |   2       0    45       .144 |
 35. |   2       0    46       .144 |
     |------------------------------|
 36. |   2       0    47       .144 |
 37. |   2       0    48       .144 |
 38. |   2       0    49       .144 |
 39. |   2       0    50       .144 |
 40. |   2       0    51       .144 |
     |------------------------------|
 41. |   2       0    52       .144 |
 42. |   2       0    53       .144 |
 43. |   2       0    54       .144 |
 44. |   2       0    55       .144 |
 45. |   2       0    56       .144 |
     |------------------------------|
 46. |   2       0    57       .144 |
 47. |   2       0    58       .144 |
 48. |   2       0    59       .144 |
 49. |   2       1    12       .009 |
 50. |   2       1    13       .009 |
     |------------------------------|
 51. |   2       1    14        .11 |
 52. |   2       1    15        .11 |
 53. |   2       1    16        .11 |
 54. |   2       1    17        .11 |
 55. |   2       1    18        .28 |
     |------------------------------|
 56. |   2       1    19        .28 |
 57. |   2       1    20        .28 |
 58. |   2       1    21        .28 |
 59. |   2       1    22        .28 |
 60. |   2       1    23        .28 |
     |------------------------------|
 61. |   2       1    24        .28 |
 62. |   2       1    25        .28 |
 63. |   2       1    26        .28 |
 64. |   2       1    27        .28 |
 65. |   2       1    28        .28 |
     |------------------------------|
 66. |   2       1    29        .28 |
 67. |   2       1    30       .212 |
 68. |   2       1    31       .212 |
 69. |   2       1    32       .212 |
 70. |   2       1    33       .212 |
     |------------------------------|
 71. |   2       1    34       .212 |
 72. |   2       1    35       .212 |
 73. |   2       1    36       .212 |
 74. |   2       1    37       .212 |
 75. |   2       1    38       .212 |
     |------------------------------|
 76. |   2       1    39       .212 |
 77. |   2       1    40       .212 |
 78. |   2       1    41       .212 |
 79. |   2       1    42       .212 |
 80. |   2       1    43       .212 |
     |------------------------------|
 81. |   2       1    44       .212 |
 82. |   2       1    45       .212 |
 83. |   2       1    46       .212 |
 84. |   2       1    47       .212 |
 85. |   2       1    48       .212 |
     |------------------------------|
 86. |   2       1    49       .212 |
 87. |   2       1    50       .212 |
 88. |   2       1    51       .212 |
 89. |   2       1    52       .212 |
 90. |   2       1    53       .212 |
     |------------------------------|
 91. |   2       1    54       .212 |
 92. |   2       1    55       .212 |
 93. |   2       1    56       .212 |
 94. |   2       1    57       .212 |
 95. |   2       1    58       .212 |
     |------------------------------|
 96. |   2       1    59       .212 |
     +------------------------------+

. *------------------------------------------------
> -------------------------*
> * Now do the calorie needs for individuals
> *------------------------------------------------
> -------------------------*;
. use "$path/work/indata.dta";

. * CA bootstrap modification;
. sort hhid;

. merge hhid using "$path/work/hhdata.dta";
variable hhid does not uniquely identify
    observations in the master data

. tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     35,945      100.00      100.00
------------+-----------------------------------
      Total |     35,945      100.00

.  drop _m;

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
       indid |     35945    2.57e+11    1.10e+11   
> 1.01e+11   4.19e+11
    motherhh |     35945    .8787592    .3264114   
>        0          1
        hhid |     35945    2.57e+09    1.10e+09   
> 1.01e+09   4.19e+09
         sex |     35945     1.50861    .4999328   
>        1          2
         age |     35945    18.94194    17.44062   
>        0         98
-------------+-------------------------------------
> -------------------
      strata |     35945    5.710586    2.766681   
>        1         10
        mult |     35945    917.2863    619.3906   
> 26.67222   10279.15
      region |     35945    2.480234    1.085821   
>        1          4
       urban |     35945    .1471693    .3542795   
>        0          1
    district |     35945    257.0191    109.5067   
>      101        419
-------------+-------------------------------------
> -------------------
       rmult |     35945    917.2973    619.3847   
>       27      10279
      hhsize |     35945    6.416497    2.935303   
>        1         24
     welfare |     35945    62735.83     78270.9   
> 2034.431    1932420
    hhweight |     35945     5917.96    5136.521   
>       54      92511
      poor09 |     35945    .2781472    .4480925   
>        0          1
-------------+-------------------------------------
> -------------------
         day |     35945     14.0508    7.502636   
>        1         31
       month |     35945     6.71398    3.387719   
>        1         12
        Year |     35945    2009.329    .4700192   
>     2009       2010
       h1bq8 |     35945     1.00498     .070393   
>        1          2
         psu |     35945    377.7054    193.8014   
>        1        712
-------------+-------------------------------------
> -------------------
    survquar |     35945    2.484852    1.142574   
>        1          4
     survmon |     35945    6.667353    3.350374   
>        1         12
       rural |     35945    .8528307    .3542795   
>        0          1
        news |     35945    2.480234    1.085821   
>        1          4
        bswt |     35945           1           0   
>        1          1
-------------+-------------------------------------
> -------------------
    spdomain |     35945    3.321575    1.334996   
>        1          5
     reg_tpi |     35945    2.480234    1.085821   
>        1          4

. * Include fertility rates;
. sort sex rural age;

. merge sex rural age using `fert_rate';
variables sex rural age do not uniquely identify
    observations in the master data

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
       indid |     35945    2.57e+11    1.10e+11   
> 1.01e+11   4.19e+11
    motherhh |     35945    .8787592    .3264114   
>        0          1
        hhid |     35945    2.57e+09    1.10e+09   
> 1.01e+09   4.19e+09
         sex |     35945     1.50861    .4999328   
>        1          2
         age |     35945    18.94194    17.44062   
>        0         98
-------------+-------------------------------------
> -------------------
      strata |     35945    5.710586    2.766681   
>        1         10
        mult |     35945    917.2863    619.3906   
> 26.67222   10279.15
      region |     35945    2.480234    1.085821   
>        1          4
       urban |     35945    .1471693    .3542795   
>        0          1
    district |     35945    257.0191    109.5067   
>      101        419
-------------+-------------------------------------
> -------------------
       rmult |     35945    917.2973    619.3847   
>       27      10279
      hhsize |     35945    6.416497    2.935303   
>        1         24
     welfare |     35945    62735.83     78270.9   
> 2034.431    1932420
    hhweight |     35945     5917.96    5136.521   
>       54      92511
      poor09 |     35945    .2781472    .4480925   
>        0          1
-------------+-------------------------------------
> -------------------
         day |     35945     14.0508    7.502636   
>        1         31
       month |     35945     6.71398    3.387719   
>        1         12
        Year |     35945    2009.329    .4700192   
>     2009       2010
       h1bq8 |     35945     1.00498     .070393   
>        1          2
         psu |     35945    377.7054    193.8014   
>        1        712
-------------+-------------------------------------
> -------------------
    survquar |     35945    2.484852    1.142574   
>        1          4
     survmon |     35945    6.667353    3.350374   
>        1         12
       rural |     35945    .8528307    .3542795   
>        0          1
        news |     35945    2.480234    1.085821   
>        1          4
        bswt |     35945           1           0   
>        1          1
-------------+-------------------------------------
> -------------------
    spdomain |     35945    3.321575    1.334996   
>        1          5
     reg_tpi |     35945    2.480234    1.085821   
>        1          4
   fert_rate |      9790    .1876158    .0860403   
>     .003        .28
      _merge |     35945    1.544721    .8903613   
>        1          3

. * Do calorie calculations ;
.     gen num=1;

.     gen cal = .;
(35945 missing values generated)

. * Same assumptions about sex/age specific calorie
> s need in IAF 1997, IAF 2003 and IOF 2009;
. * Children (no difference between boys and girls)
>    ;
.      replace cal =  820 if age < 1;
(1196 real changes made)

. * Add 500 cal per day for mothers in first six mo
> nths of breast feeding
> * We assume that 60% of children under 1 are unde
> r six months old
> * And that all of them breast feed
> * We add these mother requirements of 300 on aver
> age to each child under 1 whose mother is alive;
.     replace cal = 1120 if age <  1 & motherhh==1;
(1168 real changes made)

.     replace cal = 1150 if age >= 1 & age <2;
(2318 real changes made)

.     replace cal = 1350 if age >= 2 & age <3;
(1288 real changes made)

.     replace cal = 1550 if age >= 3 & age <5;
(2746 real changes made)

. * Males ;
.     replace cal = 1850 if age >=  5 & age <7  & s
> ex==1;
(1272 real changes made)

.     replace cal = 2100 if age >=  7 & age <10 & s
> ex==1;
(1776 real changes made)

.     replace cal = 2200 if age >= 10 & age <12 & s
> ex==1;
(1048 real changes made)

.     replace cal = 2400 if age >= 12 & age <14 & s
> ex==1;
(1122 real changes made)

.     replace cal = 2650 if age >= 14 & age <16 & s
> ex==1;
(932 real changes made)

.     replace cal = 2850 if age >= 16 & age <18 & s
> ex==1;
(792 real changes made)

.     replace cal = 3000 if age >= 18 & age <30 & s
> ex==1;
(3012 real changes made)

.     replace cal = 2900 if age >= 30 & age <60 & s
> ex==1;
(3276 real changes made)

.     replace cal = 2450 if age>=60 & age~=. & sex=
> =1;
(669 real changes made)

. * Girls 5-12 years (probability of pregnancy assu
> med = 0) ;
.     replace cal = 1750 if age >=  5 & age < 7 & s
> ex==2;
(1202 real changes made)

.     replace cal = 1800 if age >=  7 & age <10 & s
> ex==2;
(1698 real changes made)

.     replace cal = 1950 if age >= 10 & age <12 & s
> ex==2;
(1025 real changes made)

. * Women with a correction for pregnancy. We add 2
> 85 calories per for the final trimester.
> * To do this we find the probability that rural a
> nd urban women are pregnant from
> * live births data in the 1997 census over the pa
> st 12 months (no correction for still births).
> * 3/4*probability of birth gives probability of p
> reganancy. Probability of final trimester is one
> * third of that of that or 1/4 of the probability
>  of birth
> 
> * Women urban;
.     replace cal = 2100 + (fert_rate*285)/4 if age
>  >= 12 & age <14 & sex==2 & rural==0;
(135 real changes made)

.     replace cal = 2150 + (fert_rate*285)/4 if age
>  >= 14 & age <18 & sex==2 & rural==0;
(267 real changes made)

.     replace cal = 2100 + (fert_rate*285)/4 if age
>  >= 18 & age <30 & sex==2 & rural==0;
(874 real changes made)

.     replace cal = 2150 + (fert_rate*285)/4 if age
>  >= 30 & age <60 & sex==2 & rural==0;
(491 real changes made)

. * Women rural;
.     replace cal = 2100 + (fert_rate*285)/4 if age
>  >= 12 & age <14 & sex==2 & rural==1;
(941 real changes made)

.     replace cal = 2150 + (fert_rate*285)/4 if age
>  >= 14 & age <18 & sex==2 & rural==1;
(1392 real changes made)

.     replace cal = 2100 + (fert_rate*285)/4 if age
>  >= 18 & age <30 & sex==2 & rural==1;
(2824 real changes made)

.     replace cal = 2150 + (fert_rate*285)/4 if age
>  >= 30 & age <60 & sex==2 & rural==1;
(2866 real changes made)

. * Women 60+ are not pregnant ;
.     replace cal = 1950 if age>=60 & age~=. & sex=
> =2;
(783 real changes made)

.     count if cal ==.;
    0

.     *Fill in these two observations for IAF 2002/
> 03:;
.     * 1) this one is a child;
.     *replace cal = 1500 if cal ==. & age==.;
.     * 2) this one is 21 years old;
.     *replace cal = 2500 if cal ==. & b2==.;
.     collapse (sum) cal num (max) psu hhsize hhwei
> ght strata rural spdomain, by (hhid);

.     gen chk=hhsize - num;

.     sum chk;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
         chk |      6775   -.3455351    .8928498   
>      -11          0

.     drop chk;

.     gen calpp = cal / hhsize;

.     sort spdomain;

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |      6775    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
         cal |      6775    11158.93    6185.119   
>     1950   50725.15
         num |      6775    5.305535    2.940196   
>        1         24
         psu |      6775     365.894     201.698   
>        1        712
      hhsize |      6775        4.96     2.75857   
>        1         24
-------------+-------------------------------------
> -------------------
    hhweight |      6775    4533.332    4304.242   
>       54      92511
      strata |      6775    5.551734    2.873672   
>        1         10
       rural |      6775    .8199262    .3842773   
>        0          1
    spdomain |      6775      3.2431    1.373578   
>        1          5
       calpp |      6775    2347.762    704.6076   
> 1463.317   26470.68

. * MAH ;
.  sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |      6775    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
         cal |      6775    11158.93    6185.119   
>     1950   50725.15
         num |      6775    5.305535    2.940196   
>        1         24
         psu |      6775     365.894     201.698   
>        1        712
      hhsize |      6775        4.96     2.75857   
>        1         24
-------------+-------------------------------------
> -------------------
    hhweight |      6775    4533.332    4304.242   
>       54      92511
      strata |      6775    5.551734    2.873672   
>        1         10
       rural |      6775    .8199262    .3842773   
>        0          1
    spdomain |      6775      3.2431    1.373578   
>        1          5
       calpp |      6775    2347.762    704.6076   
> 1463.317   26470.68

.  codebook hhid;

---------------------------------------------------
hhid                                   Household ID
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6775                     m
> issing .:  0/6775

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

. collapse (mean) calpp[aw=hhsize*hhweight], by (sp
> domain);

. sort spdomain;

. save "$path/work/calpp.dta",replace;
file /home/bjvca/data/data/GAP/Haruna/work/calpp.dt
> a saved

. *************************************************
> **********************
> * 070_calpp.do          (end)
> *************************************************
> **********************;
. log close;
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 70_calpp.log
  log type:  text
 closed on:  20 May 2013, 12:16:18
---------------------------------------------------

. 
end of do-file

. do "$path/new/080_conpc.do"/* Nominal food/non-fo
> od expenditure */

. *global path "C:/Users/Templeton/Desktop/GAPP/GAP
> P-UGANDA-HARUNA"
. clear all

. set mem 100m

. 
. clear

. cap log close

. log using "$path/rep/080_conpc.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 80_conpc.log
  log type:  text
 opened on:  20 May 2013, 12:16:18

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> **************************
> * 080_conpc.do          (start)
> *
> * Creates a file with per capita nominal consumpt
> ion divided between food
> * and non-food categories based on the calorie de
> finition of food
> * rather than the COICOP (INE) definition of food
> . ready for 
> * temporal deflation when necessary
> *************************************************
> ***************************;
. /*
> This file uses:
>         work/hhdata.dta
>         work/consump_nom.dta
>       
> This file creates:
>         work/conpc.dta
> */
> 
> 
> 
> *************************************************
> **************************
> * Food expenditure
> *************************************************
> ***************************;
. *use "$path/in/cons_cod.dta";
. use "$path/work/cons_cod.dta";

.             *sort product;
.             *merge product using "$path/work/food
> _cat.dta";
.             *tab _m;
.             *drop _m;
.             keep if food_cat==1;
(322449 observations deleted)

.             collapse (sum) cod_hh_nom, by(hhid);

.             rename cod_hh_nom food_hh_nom;

.                 sort hhid;

.             keep hhid food_hh_nom;

.             tempfile foodexp;

. save `foodexp';
file /tmp/St02502.000007 saved

. *************************************************
> **************************
> * Food expenditure merged with all expenditure
> *************************************************
> ***************************;
. use "$path/work/cons_cod.dta";

. *use "$path/in/cons_cod.dta";
. *use "$path/in/cons_cat.dta";
. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |    412045    2.48e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243   
>      100        999
    food_cat |    412045    1.782558    .4125064   
>        1          2
    prod_cat |    412045    1.782558    .4125064   
>        1          2
    descript |    412045    1.782558    .4125064   
>        1          2
-------------+-------------------------------------
> -------------------
   quantityd |    412045    .1694884    1.512903   
>        0   364.2857
 cod_hh_nom3 |    412045    83.35781    341.2477   
>        0      18500
  cod_hh_nom |    412045    1602.923    615777.4   
>        0   3.95e+08
 cod_hh_nom2 |    412045    1602.658    615777.4   
>        0   3.95e+08

. collapse (sum) cod_hh_nom, by(hhid);

. *gen cons_pc_nom = cons_hh_nom/hhsize;
. rename cod_hh_nom cons_hh_nom;

. *keep  hhid cons_pc_nom cons_hh_nom ;
. *keep hhid cod_hh_nom;
. *use "$path/in/cons_cod.dta";
. *use "$path/in/consump_nom.dta";
. *use "$path/work/consump_nom.dta";
. *            keep  hhid cons_hh_nom ;
.             display _N;
6775

.             keep  hhid cons_hh_nom ;

.             sort hhid;

.             merge hhid using "$path/work/hhdata.d
> ta";

.             tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.             drop _m;

. gen cons_pc_nom = cons_hh_nom/hhsize;

.             sort hhid;

.             merge hhid using `foodexp';

.             tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.                 drop if _merge==2;
(0 observations deleted)

.             replace food_hh_nom=0 if _merge==1 & 
> food_hh_nom==.;
(0 real changes made)

.             drop _m;

.                 gen food_pc_nom=food_hh_nom/hhsiz
> e;

.                 gen nf_hh_nom=cons_hh_nom-food_hh
> _nom;

.             gen nf_pc_nom=nf_hh_nom/hhsize;

.              keep hhid cons_hh_nom food_pc_nom nf
> _pc_nom cons_pc_nom survquar spdomain news reg_tp
> i rural hhweight hhsize;

.             lab var food_pc_nom "nominal food con
> sumption per capita";

.             lab var nf_pc_nom "nominal non-food c
> onsumption per capita";

. keep hhid cons_hh_nom cons_pc_nom food_pc_nom nf_
> pc_nom;

.             sort hhid;

. * MAH ;
.  sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |      6775    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
 cons_hh_nom |      6775    97487.28     4938495   
> 232.1918   4.06e+08
 cons_pc_nom |      6775    20773.97    987396.4   
> 78.55931   8.12e+07
 food_pc_nom |      6775    1257.269    1252.965   
>        0   17857.14
   nf_pc_nom |      6775     19516.7    987342.9   
> 23.11263   8.12e+07

.  codebook hhid;

---------------------------------------------------
hhid                                 Household Code
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6775                     m
> issing .:  0/6775

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

. save "$path/work/conpc.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/conpc.dt
> a saved

. *************************************************
> **************************
> * 080_conpc.do          (end)
> *************************************************
> ***************************;
. log close;
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 80_conpc.log
  log type:  text
 closed on:  20 May 2013, 12:16:18
---------------------------------------------------

. 
end of do-file

. do "$path/new/090_temp_index.do"/* Temporal price
>  index */

. *global path "C:/Users/Templeton/Desktop/GAPP/GAP
> P-UGANDA-HARUNA"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/090_temp_index.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/0
> 90_temp_index.log
  log type:  text
 opened on:  20 May 2013, 12:16:18

. clear

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 090_temp_index.do     (start)
> *************************************************
> *************************;
. *do "$path/new/010_initial.do";
. *************************************************
> *************************
> * Program to compute the temporal price index (in
> tra-survey)
> * 
> * The index is based on 6 regions (North/Center/S
> outh by rural/urban) 
> * and four quarters. For IAF 2002/03 (t=t1) it is
>  based on the same 9
> * commodities used for the analysis of the 1996 I
> AF (t=t0), 
> * except that we have to go to 8 commodities beca
> use the 2002-03 survey 
> * does not distinguish between large and small gr
> oundnuts, which were 
> * separate items in the old index. For IOF 2008/0
> 9 (t=t2) we expand the
> * the food basket to include the 15 most importan
> t food products among
> * the poorest.
> *
> * The commodity weights for the items vary by the
>  6 regions, and are 
> * calculated from the observations in the IAF2002
> , using the relatively 
> * poor households (below median nominal consumpti
> on per capita).
> *
> * The unit values (prices) calculated here are al
> so based on the prices 
> * paid by the relatively poor, using the same def
> inition.
> *
> * K Simler, Sep 2003
> * CA
> * MAH, April 2010
> * URB, Feb 2013 (automatization to any number of 
> n_tpi's)
> *************************************************
> *************************;
. /*
> This file uses:
>         work/own.dta
>         work/receipts.dta
>         work/daily.dta
>         work/hhdata
>         work/cons_cat.dta
> 
> This file creates:
>         work/tpi_unit_val_quarterly.dta
>         work/tpi_unit_val_monthly.dta
>         work/tpi_news_share.dta
>         work/tpi_reg_tpi_share.dta
>         work/temp_index_news.dta
>         work/temp_index_reg_tpi.dta
> */      
> 
> 
> *************************************************
> *************************
> * Either the products used for intertemporal pric
> e index is specified
> * explicitly, or they are automatically found as 
> the the n_tpi products
> * with the highest weighted expenditure shares am
> ong the $bottom % poorest
> * part of the population
> *************************************************
> *************************;
. * Generating the n_tpi most important food items 
> for the poorest $bottom % ;
. *************************************************
> *************************
> * Find the n_tpi most important food products amo
> ng the lowest $bottom %
> * (start)
> *************************************************
> *************************;
. *------------------------------------------------
> ------------------------*
> * Population weights for each HH
> *------------------------------------------------
> ------------------------*;
. use "$path/work/hhdata.dta", clear;

. keep hhid hhweight hhsize;

. gen popwt = hhweight*hhsize;

. lab var popwt "Population weights = hhsize X hhwe
> ight";

. sort hhid;

. tempfile popwt;

. save `popwt', replace;
(note: file /tmp/St02502.000007 not found)
file /tmp/St02502.000007 saved

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |      6775    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
      hhsize |      6775        4.96     2.75857   
>        1         24
    hhweight |      6775    4533.332    4304.242   
>       54      92511
       popwt |      6775    29614.26    44555.51   
>       62     832599

. *------------------------------------------------
> ------------------------*
> * Make list of all consumed products
> *------------------------------------------------
> ------------------------*;
. *use "$path/in/cons_cod.dta", clear;
. *save "$path/work/cons_cod.dta", replace;
. use "$path/work/cons_cod.dta", clear;

. keep product descript;

. collapse product, by(descript);

. sort product;

. tempfile descript;

. save `descript', replace;
(note: file /tmp/St02502.000008 not found)
file /tmp/St02502.000008 saved

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    descript |         2         1.5    .7071068   
>        1          2
     product |         2    565.0077    613.7578   
> 131.0155        999

. *------------------------------------------------
> ------------------------*
> * Find the poorest part of the population
> *------------------------------------------------
> ------------------------*;
. use
> "$path/work/cons_cod.dta", clear;

. *use
> *"$path/work/cons_cod.dta", clear;
. ********************************************check
>  the COICOP categories to create the variable pro
> d_cat, for the moment it is equal to food_cat****
> **;
. keep hhid prod_cat product cod_hh_nom;

. sort hhid;

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |    412045    2.48e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243   
>      100        999
    prod_cat |    412045    1.782558    .4125064   
>        1          2
  cod_hh_nom |    412045    1602.923    615777.4   
>        0   3.95e+08

. merge hhid using `popwt';
variable hhid does not uniquely identify
    observations in the master data

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |    412045    2.48e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243   
>      100        999
    prod_cat |    412045    1.782558    .4125064   
>        1          2
  cod_hh_nom |    412045    1602.923    615777.4   
>        0   3.95e+08
      hhsize |    412045    5.313592    2.837438   
>        1         24
-------------+-------------------------------------
> -------------------
    hhweight |    412045    4940.193    4557.506   
>       54      92511
       popwt |    412045    33954.53     49935.3   
>       62     832599
      _merge |    412045           3           0   
>        3          3

. drop _merge;

. preserve;

. collapse (sum) cod_hh_nom (mean) popwt hhweight h
> hsize, by(hhid);

. gen cod_pc_nom = cod_hh_nom/hhsize;

.         sum cod_pc_nom [aw=popwt] , detail;

                         cod_pc_nom
---------------------------------------------------
> ----------
      Percentiles      Smallest
 1%     332.3661       78.55931
 5%     680.3636       103.0936
10%     872.9067       107.7462       Obs          
>       6775
25%     1328.983       145.4659       Sum of Wgt.  
>  200636622

50%     2175.789                      Mean         
>   9412.851
                        Largest       Std. Dev.    
>     395673
75%     3972.618        1528531
90%      9057.59        1552604       Variance     
>   1.57e+11
95%     17758.21        1790269       Skewness     
>   202.1632
99%     88724.46       8.12e+07       Kurtosis     
>   41456.83

.         global medcpc_= r(p$tpi_bottom);

.         gen bottom_ = cod_pc_nom <= $medcpc_;

. sum [aw=popwt];

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
        hhid |    6775   200636622    2.52e+09   1.
> 10e+09   1.01e+09   4.19e+09
  cod_hh_nom |    6775   200636622    67821.64    2
> 005057   232.1918   4.06e+08
       popwt |    6775   200636622    96639.42   12
> 5478.2         62     832599
    hhweight |    6775   200636622    10417.53   10
> 233.19         54      92511
      hhsize |    6775   200636622    7.911641   3.
> 294698          1         24
-------------+-------------------------------------
> ----------------------------
  cod_pc_nom |    6775   200636622    9412.851     
> 395673   78.55931   8.12e+07
     bottom_ |    6775   200636622           1     
>      0          1          1

. sum [aw=hhweight];

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
        hhid |    6775    30713326    2.51e+09   1.
> 12e+09   1.01e+09   4.19e+09
  cod_hh_nom |    6775    30713326    61490.01    2
> 271154   232.1918   4.06e+08
       popwt |    6775    30713326    68053.16   97
> 418.28         62     832599
    hhweight |    6775    30713326    8619.458   91
> 15.422         54      92511
      hhsize |    6775    30713326    6.532559   3.
> 001711          1         24
-------------+-------------------------------------
> ----------------------------
  cod_pc_nom |    6775    30713326    10464.25   45
> 1493.4   78.55931   8.12e+07
     bottom_ |    6775    30713326           1     
>      0          1          1

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |      6775    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
  cod_hh_nom |      6775    97487.28     4938495   
> 232.1918   4.06e+08
       popwt |      6775    29614.26    44555.51   
>       62     832599
    hhweight |      6775    4533.332    4304.242   
>       54      92511
      hhsize |      6775        4.96     2.75857   
>        1         24
-------------+-------------------------------------
> -------------------
  cod_pc_nom |      6775    20773.97    987396.4   
> 78.55931   8.12e+07
     bottom_ |      6775           1           0   
>        1          1

. keep if bottom_==1;
(0 observations deleted)

. keep hhid;

. sort hhid;

. tempfile hhid;

. save `hhid';
file /tmp/St02502.00000a saved

. restore;

. sort hhid;

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |    412045    2.48e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243   
>      100        999
    prod_cat |    412045    1.782558    .4125064   
>        1          2
  cod_hh_nom |    412045    1602.923    615777.4   
>        0   3.95e+08
      hhsize |    412045    5.313592    2.837438   
>        1         24
-------------+-------------------------------------
> -------------------
    hhweight |    412045    4940.193    4557.506   
>       54      92511
       popwt |    412045    33954.53     49935.3   
>       62     832599

. merge hhid using `hhid';
variable hhid does not uniquely identify
    observations in the master data

. tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00

. keep if _m==3;
(0 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |    412045    2.48e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |    412045    810.2635    358.1243   
>      100        999
    prod_cat |    412045    1.782558    .4125064   
>        1          2
  cod_hh_nom |    412045    1602.923    615777.4   
>        0   3.95e+08
      hhsize |    412045    5.313592    2.837438   
>        1         24
-------------+-------------------------------------
> -------------------
    hhweight |    412045    4940.193    4557.506   
>       54      92511
       popwt |    412045    33954.53     49935.3   
>       62     832599
      _merge |    412045           3           0   
>        3          3

. *------------------------------------------------
> ------------------------*
> * Keep only food product expenditure by the poor.
>  Calculate food product
> * share of total food expenditure by the poor
> *------------------------------------------------
> ------------------------*;
. keep if prod_cat==1;
(322449 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |     89596    2.45e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |     89596    131.0155     15.7293   
>      100        161
    prod_cat |     89596           1           0   
>        1          1
  cod_hh_nom |     89596     383.356    648.4919   
>        0      18500
      hhsize |     89596    5.132807    2.743211   
>        1         24
-------------+-------------------------------------
> -------------------
    hhweight |     89596    4792.901    4413.167   
>       54      92511
       popwt |     89596    31755.96    47010.28   
>       62     832599
      _merge |     89596           3           0   
>        3          3

. sort product;

. *preserve;
. collapse (sum) cod_hh_nom [aw=hhweight], by(produ
> ct);

. sort cod;

. egen total=sum(cod_hh_nom);

. gen sh=100*cod_hh_nom/total;

. *------------------------------------------------
> ------------------------*
> * Include product labels
> *------------------------------------------------
> ------------------------*;
. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     product |        62       130.5    18.04162   
>      100        161
  cod_hh_nom |        62    638077.8    715958.5   
> 17319.09    3153092
       total |        62    3.96e+07           0   
> 3.96e+07   3.96e+07
          sh |        62    1.612903    1.809766   
> .0437784   7.970237

. sort product;

. merge product using `descript';

. tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         62       96.88       96.88
          2 |          2        3.12      100.00
------------+-----------------------------------
      Total |         64      100.00

. keep if _merge==1 | _merge==3;
(2 observations deleted)

. drop _merge;

. sort sh;

. *list;
. list in -$product_tpi_n/-1;

     +------------------------------------------+
 33. | product | cod_hh~m |    total |       sh |
     |     132 | 405723.3 | 3.96e+07 | 1.025568 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 34. | product | cod_hh~m |    total |       sh |
     |     134 | 406314.1 | 3.96e+07 | 1.027062 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 35. | product | cod_hh~m |    total |       sh |
     |     138 | 430628.1 | 3.96e+07 | 1.088521 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 36. | product | cod_hh~m |    total |       sh |
     |     119 | 483520.1 | 3.96e+07 | 1.222219 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 37. | product | cod_hh~m |    total |       sh |
     |     153 |   492023 | 3.96e+07 | 1.243713 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 38. | product | cod_hh~m |    total |       sh |
     |     144 | 508887.7 | 3.96e+07 | 1.286343 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 39. | product | cod_hh~m |    total |       sh |
     |     109 | 513852.6 | 3.96e+07 | 1.298893 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 40. | product | cod_hh~m |    total |       sh |
     |     102 | 520426.1 | 3.96e+07 | 1.315509 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 41. | product | cod_hh~m |    total |       sh |
     |     115 | 540289.6 | 3.96e+07 | 1.365719 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 42. | product | cod_hh~m |    total |       sh |
     |     114 | 619598.2 | 3.96e+07 | 1.566191 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 43. | product | cod_hh~m |    total |       sh |
     |     116 | 624874.1 | 3.96e+07 | 1.579527 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 44. | product | cod_hh~m |    total |       sh |
     |     112 | 666715.6 | 3.96e+07 | 1.685293 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 45. | product | cod_hh~m |    total |       sh |
     |     136 | 673802.2 | 3.96e+07 | 1.703206 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 46. | product | cod_hh~m |    total |       sh |
     |     122 | 708505.5 | 3.96e+07 | 1.790927 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 47. | product | cod_hh~m |    total |       sh |
     |     123 | 727642.9 | 3.96e+07 | 1.839302 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 48. | product | cod_hh~m |    total |       sh |
     |     127 | 771771.9 | 3.96e+07 | 1.950849 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 49. | product | cod_hh~m |    total |       sh |
     |     140 | 815134.1 | 3.96e+07 | 2.060458 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 50. | product | cod_hh~m |    total |       sh |
     |     121 | 933622.7 | 3.96e+07 | 2.359968 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 51. | product | cod_hh~m |    total |       sh |
     |     110 |  1193071 | 3.96e+07 | 3.015789 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 52. | product | cod_hh~m |    total |       sh |
     |     103 |  1222088 | 3.96e+07 | 3.089136 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 53. | product | cod_hh~m |    total |       sh |
     |     125 |  1255223 | 3.96e+07 | 3.172893 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 54. | product | cod_hh~m |    total |       sh |
     |     104 |  1347143 | 3.96e+07 | 3.405246 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 55. | product | cod_hh~m |    total |       sh |
     |     157 |  1520177 | 3.96e+07 | 3.842632 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 56. | product | cod_hh~m |    total |       sh |
     |     147 |  1803996 | 3.96e+07 | 4.560056 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 57. | product | cod_hh~m |    total |       sh |
     |     107 |  1921288 | 3.96e+07 | 4.856542 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 58. | product | cod_hh~m |    total |       sh |
     |     108 |  1955183 | 3.96e+07 |  4.94222 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 59. | product | cod_hh~m |    total |       sh |
     |     117 |  2086078 | 3.96e+07 | 5.273091 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 60. | product | cod_hh~m |    total |       sh |
     |     141 |  2271924 | 3.96e+07 | 5.742862 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 61. | product | cod_hh~m |    total |       sh |
     |     105 |  3043549 | 3.96e+07 | 7.693342 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 62. | product | cod_hh~m |    total |       sh |
     |     113 |  3153092 | 3.96e+07 | 7.970237 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

. list product descript in -$product_tpi_n/-1;

     +--------------------+
     | product   descript |
     |--------------------|
 33. |     132          . |
 34. |     134          . |
 35. |     138          . |
 36. |     119          . |
 37. |     153          . |
     |--------------------|
 38. |     144          . |
 39. |     109          . |
 40. |     102          . |
 41. |     115          . |
 42. |     114          . |
     |--------------------|
 43. |     116          . |
 44. |     112          . |
 45. |     136          . |
 46. |     122          . |
 47. |     123          . |
     |--------------------|
 48. |     127          . |
 49. |     140          . |
 50. |     121          . |
 51. |     110          . |
 52. |     103          . |
     |--------------------|
 53. |     125          . |
 54. |     104          . |
 55. |     157          . |
 56. |     147          . |
 57. |     107          . |
     |--------------------|
 58. |     108          . |
 59. |     117          . |
 60. |     141          . |
 61. |     105          . |
 62. |     113          . |
     +--------------------+

. *restore;
. *------------------------------------------------
> ------------------------*
> * Keep the required number of most important food
>  products
> *------------------------------------------------
> ------------------------*;
. keep in -$product_tpi_n/-1;
(32 observations deleted)

. list;

     +------------------------------------------+
  1. | product | cod_hh~m |    total |       sh |
     |     132 | 405723.3 | 3.96e+07 | 1.025568 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
  2. | product | cod_hh~m |    total |       sh |
     |     134 | 406314.1 | 3.96e+07 | 1.027062 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
  3. | product | cod_hh~m |    total |       sh |
     |     138 | 430628.1 | 3.96e+07 | 1.088521 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
  4. | product | cod_hh~m |    total |       sh |
     |     119 | 483520.1 | 3.96e+07 | 1.222219 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
  5. | product | cod_hh~m |    total |       sh |
     |     153 |   492023 | 3.96e+07 | 1.243713 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
  6. | product | cod_hh~m |    total |       sh |
     |     144 | 508887.7 | 3.96e+07 | 1.286343 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
  7. | product | cod_hh~m |    total |       sh |
     |     109 | 513852.6 | 3.96e+07 | 1.298893 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
  8. | product | cod_hh~m |    total |       sh |
     |     102 | 520426.1 | 3.96e+07 | 1.315509 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
  9. | product | cod_hh~m |    total |       sh |
     |     115 | 540289.6 | 3.96e+07 | 1.365719 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 10. | product | cod_hh~m |    total |       sh |
     |     114 | 619598.2 | 3.96e+07 | 1.566191 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 11. | product | cod_hh~m |    total |       sh |
     |     116 | 624874.1 | 3.96e+07 | 1.579527 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 12. | product | cod_hh~m |    total |       sh |
     |     112 | 666715.6 | 3.96e+07 | 1.685293 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 13. | product | cod_hh~m |    total |       sh |
     |     136 | 673802.2 | 3.96e+07 | 1.703206 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 14. | product | cod_hh~m |    total |       sh |
     |     122 | 708505.5 | 3.96e+07 | 1.790927 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 15. | product | cod_hh~m |    total |       sh |
     |     123 | 727642.9 | 3.96e+07 | 1.839302 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 16. | product | cod_hh~m |    total |       sh |
     |     127 | 771771.9 | 3.96e+07 | 1.950849 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 17. | product | cod_hh~m |    total |       sh |
     |     140 | 815134.1 | 3.96e+07 | 2.060458 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 18. | product | cod_hh~m |    total |       sh |
     |     121 | 933622.7 | 3.96e+07 | 2.359968 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 19. | product | cod_hh~m |    total |       sh |
     |     110 |  1193071 | 3.96e+07 | 3.015789 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 20. | product | cod_hh~m |    total |       sh |
     |     103 |  1222088 | 3.96e+07 | 3.089136 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 21. | product | cod_hh~m |    total |       sh |
     |     125 |  1255223 | 3.96e+07 | 3.172893 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 22. | product | cod_hh~m |    total |       sh |
     |     104 |  1347143 | 3.96e+07 | 3.405246 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 23. | product | cod_hh~m |    total |       sh |
     |     157 |  1520177 | 3.96e+07 | 3.842632 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 24. | product | cod_hh~m |    total |       sh |
     |     147 |  1803996 | 3.96e+07 | 4.560056 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 25. | product | cod_hh~m |    total |       sh |
     |     107 |  1921288 | 3.96e+07 | 4.856542 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 26. | product | cod_hh~m |    total |       sh |
     |     108 |  1955183 | 3.96e+07 |  4.94222 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 27. | product | cod_hh~m |    total |       sh |
     |     117 |  2086078 | 3.96e+07 | 5.273091 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 28. | product | cod_hh~m |    total |       sh |
     |     141 |  2271924 | 3.96e+07 | 5.742862 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 29. | product | cod_hh~m |    total |       sh |
     |     105 |  3043549 | 3.96e+07 | 7.693342 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

     +------------------------------------------+
 30. | product | cod_hh~m |    total |       sh |
     |     113 |  3153092 | 3.96e+07 | 7.970237 |
     |------------------------------------------|
     |                 descript                 |
     |                        .                 |
     +------------------------------------------+

. gen product_tpi=1;

. keep product product_tpi;

. list;

     +--------------------+
     | product   produc~i |
     |--------------------|
  1. |     132          1 |
  2. |     134          1 |
  3. |     138          1 |
  4. |     119          1 |
  5. |     153          1 |
     |--------------------|
  6. |     144          1 |
  7. |     109          1 |
  8. |     102          1 |
  9. |     115          1 |
 10. |     114          1 |
     |--------------------|
 11. |     116          1 |
 12. |     112          1 |
 13. |     136          1 |
 14. |     122          1 |
 15. |     123          1 |
     |--------------------|
 16. |     127          1 |
 17. |     140          1 |
 18. |     121          1 |
 19. |     110          1 |
 20. |     103          1 |
     |--------------------|
 21. |     125          1 |
 22. |     104          1 |
 23. |     157          1 |
 24. |     147          1 |
 25. |     107          1 |
     |--------------------|
 26. |     108          1 |
 27. |     117          1 |
 28. |     141          1 |
 29. |     105          1 |
 30. |     113          1 |
     +--------------------+

. sort product;

. tempfile product_tpi;

. save `product_tpi', replace;
(note: file /tmp/St02502.00000b not found)
file /tmp/St02502.00000b saved

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     product |        30    123.1333    15.69699   
>      102        157
 product_tpi |        30           1           0   
>        1          1

. clear;

. *************************************************
> *************************
> * Find the n_tpi most important food products amo
> ng the lowest $bottom %
> * (end)
> *************************************************
> *************************;
. *************************************************
> *************************;
. * First, need to calculate the average prices for
>  the food items, by 
> * strata and quarter. For this, we are using the 
> "unit values"
> * (value/quantity) for the observations in the co
> nsumption questionnaires,
> * including daily, own and receipts-in-kind.
> *
> * The unit values are constructed as sum(value)/s
> um(quantity), which effectively
> * weights them by the quantity and value of the t
> ransaction. Sampling
> * weights are also used.
> *
> * Get the own consumption file, and limit analysi
> s to the observations
> * in KGs where both value and quantity are availa
> ble.
> *************************************************
> *************************;
. use "$path/work/cons_cod.dta";

. *use "$path/work/cons_cod.dta";
. keep if prod_cat==1;
(322449 observations deleted)

. drop if quantityd==0 | quantityd==.;
(4392 observations deleted)

. *keep if quantityd!=. & cod_hh_nom2!=.;
. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |     85204    2.44e+09    1.14e+09   
> 1.01e+09   4.19e+09
     product |     85204    131.0922    15.78502   
>      100        161
    food_cat |     85204           1           0   
>        1          1
    prod_cat |     85204           1           0   
>        1          1
    descript |     85204           1           0   
>        1          1
-------------+-------------------------------------
> -------------------
   quantityd |     85204     .819643    3.245947   
> .0000286   364.2857
 cod_hh_nom3 |     85204    403.1168    658.9792   
>        0      18500
  cod_hh_nom |     85204    403.1168    658.9792   
>        0      18500
 cod_hh_nom2 |     85204    403.1168    658.9792   
>        0      18500

. sort product;

. merge product using `product_tpi';
variable product does not uniquely identify
    observations in the master data

. tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     30,558       35.86       35.86
          3 |     54,646       64.14      100.00
------------+-----------------------------------
      Total |     85,204      100.00

. drop _merge;

. keep if $product_tpi;
(30558 observations deleted)

. *        replace valued_ac=0 if valued_ac==.;
. *        replace quantityd_ac=0 if quantityd_ac==
> .;
.         gen valued_tot=cod_hh_nom2;

.         gen quantityd_tot=quantityd;

. *               replace quantityd_tot=0 if (value
> d_tot>0 & valued_tot<.) & quantityd_tot==.;
.         keep if quantityd_tot!=. & valued_tot!=.;
(0 observations deleted)

.                 collapse (sum) valued_tot quantit
> yd_tot, by(hhid product);

.                 sort hhid;

. tempfile acredd;

. save `acredd' , replace;
(note: file /tmp/St02502.00000c not found)
file /tmp/St02502.00000c saved

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |     54646    2.43e+09    1.15e+09   
> 1.01e+09   4.19e+09
     product |     54646    125.3043    14.98691   
>      102        157
  valued_tot |     54646    528.4966    743.7722   
>        0      18500
quantityd_~t |     54646    1.167585    3.857891   
> .0000286   364.2857

. /*
> *************************************************
> *************************;
> * Create a data set with an empty 1 observation. 
> Used to avoid empty data
> * sets when the survey do not have the Mozambican
>  set up
> *************************************************
> *************************;
> use "$path/work/own.dta";
> 
> preserve;
> keep in 1;
> drop unit valued quantityd;
> gen unit=2;
> gen valued=0;
> gen quantityd=0;
> tempfile 1obs;
> save `1obs';
> restore;
> 
> *************************************************
> *************************;
> * Own consumption
> *************************************************
> *************************;
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=
> .;
>         collapse (sum) valued quantityd , by(hhid
>  product);
>         rename valued valued_ac;
>         rename quantityd quantityd_ac;
>         compress;
>         sort hhid product;
>         tempfile ac;
> save `ac', replace;
> 
> *************************************************
> *************************;
> * Now do a similar thing with receipts-in-kind fi
> le.
> *************************************************
> *************************;
> use "$path/work/receipts.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> 
> 
> keep if $product_tpi;
> append using `1obs';
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=
> .;
>         collapse (sum) valued quantityd , by(hhid
>  product);
>         rename valued valued_re;
>         rename quantityd quantityd_re;
>         compress;
>         sort hhid product;
>         tempfile re;
> save `re', replace;
> 
> *************************************************
> *************************;
> * And also with the daily expenditure file.
> *************************************************
> *************************;
> use "$path/work/daily.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> *rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> *rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         collapse (sum) value quantity days , 
>                 by(hhid product unit);
> 
>         gen valued=value/7 if days<=7;
>         replace valued=value/days if days>7 & day
> s<.;
>         gen quantityd=quantity/7 if days<=7;
>         replace quantityd=quantity/days if days>7
>  & days<.;
> 
>         keep if unit==2 & quantityd!=. & valued!=
> .;
>         collapse (sum) valued quantityd , by(hhid
>  product);
> 
>         rename valued valued_dd;
>         rename quantityd quantityd_dd;
>         compress;
>         sort hhid product;
>         tempfile dd;
> save `dd', replace;
> 
> 
> 
> 
> *************************************************
> *************************;
> * Merge the three components (own, daily, receipt
> s) together at the HH/product level, 
> * then aggregate to the regional level, using the
>  sample weights (hhweight).
> * We DON'T want to weight by "hhsize" because the
>  quantity and value are
> * already for the household (i.e., other things e
> qual, larger households
> * are buying larger quantities, and therefore alr
> eady getting more weight).
> * Then calculate sum(val)/sum(quantity) to get th
> e quantity weighted mean
> * unit value in each strata in each quarter.
> *************************************************
> *************************;
> use `ac';
>         sort hhid product;
>         merge hhid product using `re';
>         tab _m;
>         drop _m;
>         
>         sort hhid product;
>         merge hhid product using `dd';
>         tab _m;
>         drop _m;
>         
>         replace valued_ac=0 if valued_ac==.;
>         replace valued_re=0 if valued_re==.;
>         replace valued_dd=0 if valued_dd==.;
>         replace quantityd_ac=0 if quantityd_ac==.
> ;
>         replace quantityd_re=0 if quantityd_re==.
> ;
>         replace quantityd_dd=0 if quantityd_dd==.
> ;
> 
>         gen valued_tot=valued_ac+valued_re+valued
> _dd;
>         gen quantityd_tot=quantityd_ac+quantityd_
> re+quantityd_dd;
> 
>         sort hhid;
> 
>         tempfile acredd;
> save `acredd' , replace;
> */
> 
> 
> 
> use "$path/work/hhdata.dta";

.         keep strata hhid hhweight hhsize rural su
> rvmon survquar news spdomain reg_tpi;

.         sort hhid;

.         tempfile hhd;

. save `hhd' , replace;
(note: file /tmp/St02502.00000d not found)
file /tmp/St02502.00000d saved

. use `acredd', clear;

.         merge hhid using `hhd';
variable hhid does not uniquely identify
    observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        128        0.23        0.23
          3 |     54,646       99.77      100.00
------------+-----------------------------------
      Total |     54,774      100.00

.         drop _merge;

.                 tab survquar , miss;

 Sequential |
     Survey |
    Quarter |
    May-Jun |
      09=1) |      Freq.     Percent        Cum.
------------+-----------------------------------
 May-Jul 09 |     14,325       26.15       26.15
Sept-Oct 09 |     14,039       25.63       51.78
Nov09-Jan10 |     12,133       22.15       73.93
 Feb-Apr 10 |     14,277       26.07      100.00
------------+-----------------------------------
      Total |     54,774      100.00

.                 tab survmon survquar, miss;

Sequential |
    Survey |   Sequential Survey
Month (May | Quarter May-Jun 09=1)
   2009=1) | May-Jul 0  Sept-Oct  |     Total
-----------+----------------------+----------
    May 09 |       306          0 |       306 
    Jun 09 |    10,081          0 |    10,081 
    Jul 09 |     3,938          0 |     3,938 
    Sep 09 |         0      4,935 |     4,935 
    Oct 09 |         0      9,104 |     9,104 
    Nov 09 |         0          0 |     5,050 
    Dec 09 |         0          0 |     3,529 
    Jan 10 |         0          0 |     3,554 
    Feb 10 |         0          0 |     3,438 
    Mar 10 |         0          0 |     7,220 
    Apr 10 |         0          0 |     3,619 
-----------+----------------------+----------
     Total |    14,325     14,039 |    54,774 


Sequential |
    Survey |   Sequential Survey
Month (May | Quarter May-Jun 09=1)
   2009=1) | Nov09-Jan  Feb-Apr 1 |     Total
-----------+----------------------+----------
    May 09 |         0          0 |       306 
    Jun 09 |         0          0 |    10,081 
    Jul 09 |         0          0 |     3,938 
    Sep 09 |         0          0 |     4,935 
    Oct 09 |         0          0 |     9,104 
    Nov 09 |     5,050          0 |     5,050 
    Dec 09 |     3,529          0 |     3,529 
    Jan 10 |     3,554          0 |     3,554 
    Feb 10 |         0      3,438 |     3,438 
    Mar 10 |         0      7,220 |     7,220 
    Apr 10 |         0      3,619 |     3,619 
-----------+----------------------+----------
     Total |    12,133     14,277 |    54,774 


.         compress;
product was float now int
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
hhsize was double now byte

.         sort hhid;

. save `acredd', replace;
file /tmp/St02502.00000c saved

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |     54774    2.43e+09    1.15e+09   
> 1.01e+09   4.19e+09
     product |     54646    125.3043    14.98691   
>      102        157
  valued_tot |     54646    528.4966    743.7722   
>        0      18500
quantityd_~t |     54646    1.167585    3.857891   
> .0000286   364.2857
      strata |     54774    5.358108    2.945103   
>        1         10
-------------+-------------------------------------
> -------------------
      hhsize |     54774     5.19659    2.754843   
>        1         24
    hhweight |     54774    4960.946    4423.252   
>       54      92511
    survquar |     54774    2.481287    1.137558   
>        1          4
     survmon |     54774    6.652372    3.317871   
>        1         12
       rural |     54774    .7880199    .4087146   
>        0          1
-------------+-------------------------------------
> -------------------
        news |     54774    2.339997    1.137629   
>        1          4
    spdomain |     54774    3.159218    1.388091   
>        1          5
     reg_tpi |     54774    2.339997    1.137629   
>        1          4

. *************************************************
> *************************;
. * Need to merge with the file that has nominal co
> nsumption per household,
> * and compute nominal consumption per capita from
>  that, so that we can
> * choose the relatively poor (i.e., below median 
> nominal consumption per
> * capita).
> *************************************************
> *************************;
. use "$path/work/conpc.dta", clear;

. keep hhid cons_hh_nom;

. *use "$path/in/cons_cat.dta" ;
. *save "$path/work/cons_cat.dta", replace ;
. *use "$path/work/cons_cat.dta" ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;

.         merge hhid using "$path/work/hhdata.dta";

.           tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.  drop _m;

.         collapse (mean) cons_hh_nom hhsize hhweig
> ht , by(hhid);

.         gen cpc=cons_hh_nom/hhsize;

.         sum cpc [aw=hhsize*hhweight] , detail;

                             cpc
---------------------------------------------------
> ----------
      Percentiles      Smallest
 1%     332.3661       78.55931
 5%     680.3636       103.0936
10%     872.9067       107.7462       Obs          
>       6775
25%     1328.983       145.4659       Sum of Wgt.  
>  200636622

50%     2175.789                      Mean         
>   9412.851
                        Largest       Std. Dev.    
>     395673
75%     3972.618        1528531
90%      9057.59        1552604       Variance     
>   1.57e+11
95%     17758.21        1790269       Skewness     
>   202.1632
99%     88724.46       8.12e+07       Kurtosis     
>   41456.83

.         global medcpc=r(p$tpi_bottom);

.         gen bottom_tpi=cpc<=$medcpc;

.         keep hhid bottom_tpi;

.         sort hhid;

.         tempfile bottom_tpi;

. save `bottom_tpi', replace;
(note: file /tmp/St02502.00000e not found)
file /tmp/St02502.00000e saved

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |      6775    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
  bottom_tpi |      6775           1           0   
>        1          1

. use `acredd' ;

.         merge hhid using `bottom_tpi';
variable hhid does not uniquely identify
    observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     54,774      100.00      100.00
------------+-----------------------------------
      Total |     54,774      100.00

.         drop _merge;

.         keep if bottom_tpi;
(0 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |     54774    2.43e+09    1.15e+09   
> 1.01e+09   4.19e+09
     product |     54646    125.3043    14.98691   
>      102        157
  valued_tot |     54646    528.4966    743.7722   
>        0      18500
quantityd_~t |     54646    1.167585    3.857891   
> .0000286   364.2857
      strata |     54774    5.358108    2.945103   
>        1         10
-------------+-------------------------------------
> -------------------
      hhsize |     54774     5.19659    2.754843   
>        1         24
    hhweight |     54774    4960.946    4423.252   
>       54      92511
    survquar |     54774    2.481287    1.137558   
>        1          4
     survmon |     54774    6.652372    3.317871   
>        1         12
       rural |     54774    .7880199    .4087146   
>        0          1
-------------+-------------------------------------
> -------------------
        news |     54774    2.339997    1.137629   
>        1          4
    spdomain |     54774    3.159218    1.388091   
>        1          5
     reg_tpi |     54774    2.339997    1.137629   
>        1          4
  bottom_tpi |     54774           1           0   
>        1          1

. * Drop one HH with extremely high quantity and lo
> w value in IAF 2002/03 (t=t1) ;
. *        drop if hhid==263001;
.         preserve;

.                 collapse (sum) valued_tot quantit
> yd_tot [aw=hhweight] , 
>                                 by(reg_tpi news p
> roduct survmon);

.                         drop if product==.;
(32 observations deleted)

.                         gen ppkg=valued_tot/quant
> ityd_tot;

.                         lab var ppkg "Unit value 
> per kg";

.                         sort reg_tpi product ;

.                         compress;

.                         tempfile uvm;

.                 save `uvm', replace;
(note: file /tmp/St02502.00000g not found)
file /tmp/St02502.00000g saved

.                 save "$path/work/tpi_unit_val_mon
> thly.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/tpi_unit
> _val_monthly.dta saved

.         restore;

.         preserve;

.                 collapse (sum) valued_tot quantit
> yd_tot [aw=hhweight] , 
>                                 by(reg_tpi news p
> roduct survquar);

.                         drop if product==.;
(16 observations deleted)

.                         gen ppkg=valued_tot/quant
> ityd_tot;

.                         sort reg_tpi product surv
> quar;

.                         list in  1/3;

     +----------------------------------------+
  1. | product |    survquar | news | reg_tpi |
     |     102 |  May-Jul 09 |    1 | central |
     |----------------------------------------|
     |  valued~t  |  quanti~t   |      ppkg   |
     |  87863.27  |   265.855   |  330.4932   |
     +----------------------------------------+

     +----------------------------------------+
  2. | product |    survquar | news | reg_tpi |
     |     102 | Sept-Oct 09 |    1 | central |
     |----------------------------------------|
     |  valued~t  |  quanti~t   |      ppkg   |
     |  48570.47  |  145.1329   |  334.6621   |
     +----------------------------------------+

     +----------------------------------------+
  3. | product |    survquar | news | reg_tpi |
     |     102 | Nov09-Jan10 |    1 | central |
     |----------------------------------------|
     |  valued~t  |  quanti~t   |      ppkg   |
     |   44344.7  |  134.2199   |  330.3884   |
     +----------------------------------------+

.                         list in -3/-1;

     +----------------------------------------+
478. | product |    survquar | news | reg_tpi |
     |     157 | Sept-Oct 09 |    4 | western |
     |----------------------------------------|
     |  valued~t  |  quanti~t   |      ppkg   |
     |  73901.08  |        43   |   1718.63   |
     +----------------------------------------+

     +----------------------------------------+
479. | product |    survquar | news | reg_tpi |
     |     157 | Nov09-Jan10 |    4 | western |
     |----------------------------------------|
     |  valued~t  |  quanti~t   |      ppkg   |
     |  7924.377  |        16   |  495.2735   |
     +----------------------------------------+

     +----------------------------------------+
480. | product |    survquar | news | reg_tpi |
     |     157 |  Feb-Apr 10 |    4 | western |
     |----------------------------------------|
     |  valued~t  |  quanti~t   |      ppkg   |
     |  75378.66  |        29   |  2599.264   |
     +----------------------------------------+

.                         tempfile uvq;

.                 save "$path/work/tpi_unit_val_qua
> rterly.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/tpi_unit
> _val_quarterly.dta saved

.                 save `uvq', replace;
(note: file /tmp/St02502.00000i not found)
file /tmp/St02502.00000i saved

.         restore;

.         *****************************************
> *********************************;
. * Toss out the bottom 5% and top 5% of the HH-LEV
> EL prices per kg in
> * each reg_tpi & product combination. This should
>  eliminate outliers that
> * may have an undue influence on the price calcul
> ation. Then use sample
> * weighting PLUS quantity weighting on those HH-l
> evel observations.
> *************************************************
> *************************;
.         preserve;

.                 gen hhppkg=valued_tot/quantityd_t
> ot;
(128 missing values generated)

.                 egen lower5=pctile(hhppkg), p(5) 
> by(reg_tpi product);
(128 missing values generated)

.                 egen upper5=pctile(hhppkg), p(95)
>  by(reg_tpi product);
(128 missing values generated)

.                 keep if hhppkg>=lower5 & hhppkg<=
> upper5;
(3571 observations deleted)

.                                 gen hhqtywt=hhwei
> ght*quantityd_tot;
(128 missing values generated)

.                                 collapse (sum) va
> lued_tot quantityd_tot [aw=hhqtywt] , 
>                                 by(reg_tpi news p
> roduct survquar);

.                         drop if product==.;
(0 observations deleted)

.                         gen ppkg_trim=valued_tot/
> quantityd_tot;

.                         lab var ppkg_trim "90% tr
> immed unit value per kg";

.                         sort reg_tpi product surv
> quar;

.                         list , nol;

     +-------------------------------------+
  1. | product | survquar | news | reg_tpi |
     |     102 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 111066.1  |  339.2506  |  327.3867  |
     +-------------------------------------+

     +-------------------------------------+
  2. | product | survquar | news | reg_tpi |
     |     102 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 55841.23  |  173.8043  |   321.288  |
     +-------------------------------------+

     +-------------------------------------+
  3. | product | survquar | news | reg_tpi |
     |     102 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 58745.94  |  181.4187  |  323.8142  |
     +-------------------------------------+

     +-------------------------------------+
  4. | product | survquar | news | reg_tpi |
     |     102 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 93801.71  |  248.2849  |  377.7987  |
     +-------------------------------------+

     +-------------------------------------+
  5. | product | survquar | news | reg_tpi |
     |     103 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   187324  |  613.9128  |  305.1313  |
     +-------------------------------------+

     +-------------------------------------+
  6. | product | survquar | news | reg_tpi |
     |     103 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 144639.3  |  447.4804  |  323.2305  |
     +-------------------------------------+

     +-------------------------------------+
  7. | product | survquar | news | reg_tpi |
     |     103 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 126731.2  |   390.095  |  324.8726  |
     +-------------------------------------+

     +-------------------------------------+
  8. | product | survquar | news | reg_tpi |
     |     103 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 90610.97  |  287.0195  |  315.6962  |
     +-------------------------------------+

     +-------------------------------------+
  9. | product | survquar | news | reg_tpi |
     |     104 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 265383.1  |   452.123  |  586.9709  |
     +-------------------------------------+

     +-------------------------------------+
 10. | product | survquar | news | reg_tpi |
     |     104 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 112398.4  |  163.5117  |  687.4025  |
     +-------------------------------------+

     +-------------------------------------+
 11. | product | survquar | news | reg_tpi |
     |     104 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 233138.9  |  377.1665  |  618.1326  |
     +-------------------------------------+

     +-------------------------------------+
 12. | product | survquar | news | reg_tpi |
     |     104 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 271274.6  |  463.6059  |  585.1404  |
     +-------------------------------------+

     +-------------------------------------+
 13. | product | survquar | news | reg_tpi |
     |     105 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 378097.7  |  1848.184  |  204.5779  |
     +-------------------------------------+

     +-------------------------------------+
 14. | product | survquar | news | reg_tpi |
     |     105 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 299131.3  |   1252.46  |  238.8349  |
     +-------------------------------------+

     +-------------------------------------+
 15. | product | survquar | news | reg_tpi |
     |     105 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 668441.7  |  2574.798  |  259.6093  |
     +-------------------------------------+

     +-------------------------------------+
 16. | product | survquar | news | reg_tpi |
     |     105 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 698669.6  |   2994.18  |  233.3426  |
     +-------------------------------------+

     +-------------------------------------+
 17. | product | survquar | news | reg_tpi |
     |     107 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 220972.5  |  2203.306  |  100.2914  |
     +-------------------------------------+

     +-------------------------------------+
 18. | product | survquar | news | reg_tpi |
     |     107 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 179800.2  |  1917.136  |  93.78587  |
     +-------------------------------------+

     +-------------------------------------+
 19. | product | survquar | news | reg_tpi |
     |     107 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 198916.1  |  1857.122  |  107.1099  |
     +-------------------------------------+

     +-------------------------------------+
 20. | product | survquar | news | reg_tpi |
     |     107 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 142272.1  |  1179.584  |  120.6121  |
     +-------------------------------------+

     +-------------------------------------+
 21. | product | survquar | news | reg_tpi |
     |     108 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 88986.94  |  304.0181  |  292.7028  |
     +-------------------------------------+

     +-------------------------------------+
 22. | product | survquar | news | reg_tpi |
     |     108 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 84766.54  |  408.2228  |  207.6477  |
     +-------------------------------------+

     +-------------------------------------+
 23. | product | survquar | news | reg_tpi |
     |     108 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 60338.68  |  107.0144  |  563.8369  |
     +-------------------------------------+

     +-------------------------------------+
 24. | product | survquar | news | reg_tpi |
     |     108 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 32935.75  |    52.729  |   624.623  |
     +-------------------------------------+

     +-------------------------------------+
 25. | product | survquar | news | reg_tpi |
     |     109 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 97462.91  |  879.4846  |  110.8182  |
     +-------------------------------------+

     +-------------------------------------+
 26. | product | survquar | news | reg_tpi |
     |     109 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 28204.09  |  339.6707  |  83.03362  |
     +-------------------------------------+

     +-------------------------------------+
 27. | product | survquar | news | reg_tpi |
     |     109 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 144449.2  |  1189.594  |  121.4273  |
     +-------------------------------------+

     +-------------------------------------+
 28. | product | survquar | news | reg_tpi |
     |     109 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 60511.23  |  620.1078  |  97.58179  |
     +-------------------------------------+

     +-------------------------------------+
 29. | product | survquar | news | reg_tpi |
     |     110 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   157623  |  66.37668  |  2374.674  |
     +-------------------------------------+

     +-------------------------------------+
 30. | product | survquar | news | reg_tpi |
     |     110 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 214463.6  |  96.04734  |  2232.895  |
     +-------------------------------------+

     +-------------------------------------+
 31. | product | survquar | news | reg_tpi |
     |     110 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 359259.1  |  157.3912  |  2282.587  |
     +-------------------------------------+

     +-------------------------------------+
 32. | product | survquar | news | reg_tpi |
     |     110 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 242380.1  |    112.13  |  2161.599  |
     +-------------------------------------+

     +-------------------------------------+
 33. | product | survquar | news | reg_tpi |
     |     112 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   168182  |  319.2035  |  526.8803  |
     +-------------------------------------+

     +-------------------------------------+
 34. | product | survquar | news | reg_tpi |
     |     112 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  2378.99  |  3.805322  |  625.1744  |
     +-------------------------------------+

     +-------------------------------------+
 35. | product | survquar | news | reg_tpi |
     |     112 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 215675.5  |  469.5735  |  459.3008  |
     +-------------------------------------+

     +-------------------------------------+
 36. | product | survquar | news | reg_tpi |
     |     112 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 42069.66  |  79.83438  |  526.9617  |
     +-------------------------------------+

     +-------------------------------------+
 37. | product | survquar | news | reg_tpi |
     |     113 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 611650.3  |  545.6635  |  1120.929  |
     +-------------------------------------+

     +-------------------------------------+
 38. | product | survquar | news | reg_tpi |
     |     113 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 505672.2  |  373.1805  |  1355.034  |
     +-------------------------------------+

     +-------------------------------------+
 39. | product | survquar | news | reg_tpi |
     |     113 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 421691.9  |  324.2669  |  1300.447  |
     +-------------------------------------+

     +-------------------------------------+
 40. | product | survquar | news | reg_tpi |
     |     113 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 489941.7  |  435.1897  |  1125.812  |
     +-------------------------------------+

     +-------------------------------------+
 41. | product | survquar | news | reg_tpi |
     |     114 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   236669  |  101.3145  |  2335.984  |
     +-------------------------------------+

     +-------------------------------------+
 42. | product | survquar | news | reg_tpi |
     |     114 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 96875.18  |  44.22242  |  2190.635  |
     +-------------------------------------+

     +-------------------------------------+
 43. | product | survquar | news | reg_tpi |
     |     114 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 253008.7  |   119.026  |  2125.659  |
     +-------------------------------------+

     +-------------------------------------+
 44. | product | survquar | news | reg_tpi |
     |     114 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 199380.6  |  83.91199  |  2376.068  |
     +-------------------------------------+

     +-------------------------------------+
 45. | product | survquar | news | reg_tpi |
     |     115 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 20075.57  |  14.89757  |  1347.573  |
     +-------------------------------------+

     +-------------------------------------+
 46. | product | survquar | news | reg_tpi |
     |     115 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 23792.59  |   15.6242  |  1522.804  |
     +-------------------------------------+

     +-------------------------------------+
 47. | product | survquar | news | reg_tpi |
     |     115 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 16394.36  |  15.25242  |   1074.87  |
     +-------------------------------------+

     +-------------------------------------+
 48. | product | survquar | news | reg_tpi |
     |     115 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 19201.04  |  18.42168  |  1042.307  |
     +-------------------------------------+

     +-------------------------------------+
 49. | product | survquar | news | reg_tpi |
     |     116 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 1666.986  |  1.302065  |  1280.263  |
     +-------------------------------------+

     +-------------------------------------+
 50. | product | survquar | news | reg_tpi |
     |     116 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 1968.177  |  4.688902  |  419.7521  |
     +-------------------------------------+

     +-------------------------------------+
 51. | product | survquar | news | reg_tpi |
     |     116 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 2984.388  |  5.548357  |  537.8868  |
     +-------------------------------------+

     +-------------------------------------+
 52. | product | survquar | news | reg_tpi |
     |     116 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 2043.215  |  2.028981  |  1007.016  |
     +-------------------------------------+

     +-------------------------------------+
 53. | product | survquar | news | reg_tpi |
     |     117 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 267109.7  |  57.33815  |  4658.499  |
     +-------------------------------------+

     +-------------------------------------+
 54. | product | survquar | news | reg_tpi |
     |     117 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 212056.7  |  47.54221  |  4460.388  |
     +-------------------------------------+

     +-------------------------------------+
 55. | product | survquar | news | reg_tpi |
     |     117 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 320598.5  |  67.79522  |  4728.925  |
     +-------------------------------------+

     +-------------------------------------+
 56. | product | survquar | news | reg_tpi |
     |     117 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 248725.5  |  53.13125  |   4681.34  |
     +-------------------------------------+

     +-------------------------------------+
 57. | product | survquar | news | reg_tpi |
     |     119 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  19241.2  |  3.845657  |   5003.36  |
     +-------------------------------------+

     +-------------------------------------+
 58. | product | survquar | news | reg_tpi |
     |     119 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 23239.61  |  3.982214  |   5835.85  |
     +-------------------------------------+

     +-------------------------------------+
 59. | product | survquar | news | reg_tpi |
     |     119 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 52436.88  |  10.29153  |  5095.151  |
     +-------------------------------------+

     +-------------------------------------+
 60. | product | survquar | news | reg_tpi |
     |     119 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 28742.14  |   4.35749  |  6596.031  |
     +-------------------------------------+

     +-------------------------------------+
 61. | product | survquar | news | reg_tpi |
     |     121 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   102587  |  24.32777  |  4216.868  |
     +-------------------------------------+

     +-------------------------------------+
 62. | product | survquar | news | reg_tpi |
     |     121 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  71776.2  |  19.96744  |  3594.662  |
     +-------------------------------------+

     +-------------------------------------+
 63. | product | survquar | news | reg_tpi |
     |     121 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 119699.8  |  28.82447  |  4152.717  |
     +-------------------------------------+

     +-------------------------------------+
 64. | product | survquar | news | reg_tpi |
     |     121 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 75903.46  |  16.33784  |  4645.869  |
     +-------------------------------------+

     +-------------------------------------+
 65. | product | survquar | news | reg_tpi |
     |     122 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 100736.8  |   145.468  |  692.5012  |
     +-------------------------------------+

     +-------------------------------------+
 66. | product | survquar | news | reg_tpi |
     |     122 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 64724.13  |  54.26677  |  1192.703  |
     +-------------------------------------+

     +-------------------------------------+
 67. | product | survquar | news | reg_tpi |
     |     122 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  76486.7  |  222.6589  |  343.5152  |
     +-------------------------------------+

     +-------------------------------------+
 68. | product | survquar | news | reg_tpi |
     |     122 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 113504.1  |  127.1922  |  892.3825  |
     +-------------------------------------+

     +-------------------------------------+
 69. | product | survquar | news | reg_tpi |
     |     123 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 66997.41  |   240.388  |  278.7054  |
     +-------------------------------------+

     +-------------------------------------+
 70. | product | survquar | news | reg_tpi |
     |     123 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 42010.69  |  161.4953  |  260.1356  |
     +-------------------------------------+

     +-------------------------------------+
 71. | product | survquar | news | reg_tpi |
     |     123 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 148874.8  |  195.7373  |   760.585  |
     +-------------------------------------+

     +-------------------------------------+
 72. | product | survquar | news | reg_tpi |
     |     123 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 70903.75  |  382.3045  |  185.4641  |
     +-------------------------------------+

     +-------------------------------------+
 73. | product | survquar | news | reg_tpi |
     |     125 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 193165.8  |  2158.771  |  89.47953  |
     +-------------------------------------+

     +-------------------------------------+
 74. | product | survquar | news | reg_tpi |
     |     125 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 191825.1  |  1909.321  |  100.4677  |
     +-------------------------------------+

     +-------------------------------------+
 75. | product | survquar | news | reg_tpi |
     |     125 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 190746.2  |    2235.6  |  85.32214  |
     +-------------------------------------+

     +-------------------------------------+
 76. | product | survquar | news | reg_tpi |
     |     125 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 200125.1  |   1931.63  |  103.6043  |
     +-------------------------------------+

     +-------------------------------------+
 77. | product | survquar | news | reg_tpi |
     |     127 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 85085.16  |  75.41572  |  1128.215  |
     +-------------------------------------+

     +-------------------------------------+
 78. | product | survquar | news | reg_tpi |
     |     127 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 64821.47  |  65.96974  |   982.594  |
     +-------------------------------------+

     +-------------------------------------+
 79. | product | survquar | news | reg_tpi |
     |     127 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 86276.76  |  93.47074  |  923.0349  |
     +-------------------------------------+

     +-------------------------------------+
 80. | product | survquar | news | reg_tpi |
     |     127 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 88188.21  |  92.35265  |  954.9072  |
     +-------------------------------------+

     +-------------------------------------+
 81. | product | survquar | news | reg_tpi |
     |     132 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 35694.77  |  102.5952  |  347.9185  |
     +-------------------------------------+

     +-------------------------------------+
 82. | product | survquar | news | reg_tpi |
     |     132 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 3375.017  |  9.354495  |   360.791  |
     +-------------------------------------+

     +-------------------------------------+
 83. | product | survquar | news | reg_tpi |
     |     132 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 231948.5  |  503.4943  |  460.6776  |
     +-------------------------------------+

     +-------------------------------------+
 84. | product | survquar | news | reg_tpi |
     |     132 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 18502.52  |  35.33288  |   523.663  |
     +-------------------------------------+

     +-------------------------------------+
 85. | product | survquar | news | reg_tpi |
     |     134 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 75884.12  |  51.97449  |  1460.026  |
     +-------------------------------------+

     +-------------------------------------+
 86. | product | survquar | news | reg_tpi |
     |     134 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 62494.43  |  48.99602  |    1275.5  |
     +-------------------------------------+

     +-------------------------------------+
 87. | product | survquar | news | reg_tpi |
     |     134 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 106375.7  |  77.35232  |  1375.211  |
     +-------------------------------------+

     +-------------------------------------+
 88. | product | survquar | news | reg_tpi |
     |     134 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 105463.7  |  111.5502  |   945.437  |
     +-------------------------------------+

     +-------------------------------------+
 89. | product | survquar | news | reg_tpi |
     |     136 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 76039.13  |  71.12647  |  1069.069  |
     +-------------------------------------+

     +-------------------------------------+
 90. | product | survquar | news | reg_tpi |
     |     136 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 67362.27  |  83.65858  |  805.2047  |
     +-------------------------------------+

     +-------------------------------------+
 91. | product | survquar | news | reg_tpi |
     |     136 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 110006.8  |  106.9104  |  1028.963  |
     +-------------------------------------+

     +-------------------------------------+
 92. | product | survquar | news | reg_tpi |
     |     136 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 126599.6  |   138.911  |  911.3722  |
     +-------------------------------------+

     +-------------------------------------+
 93. | product | survquar | news | reg_tpi |
     |     138 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 36684.43  |   73.2946  |  500.5066  |
     +-------------------------------------+

     +-------------------------------------+
 94. | product | survquar | news | reg_tpi |
     |     138 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 50487.79  |   104.476  |  483.2478  |
     +-------------------------------------+

     +-------------------------------------+
 95. | product | survquar | news | reg_tpi |
     |     138 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 47149.72  |  102.4872  |  460.0549  |
     +-------------------------------------+

     +-------------------------------------+
 96. | product | survquar | news | reg_tpi |
     |     138 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 45352.42  |  125.4506  |  361.5163  |
     +-------------------------------------+

     +-------------------------------------+
 97. | product | survquar | news | reg_tpi |
     |     140 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 447397.8  |  796.9703  |  561.3732  |
     +-------------------------------------+

     +-------------------------------------+
 98. | product | survquar | news | reg_tpi |
     |     140 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 76866.83  |  66.70614  |   1152.32  |
     +-------------------------------------+

     +-------------------------------------+
 99. | product | survquar | news | reg_tpi |
     |     140 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 274728.4  |  409.8719  |  670.2788  |
     +-------------------------------------+

     +-------------------------------------+
100. | product | survquar | news | reg_tpi |
     |     140 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 28217.99  |  16.67011  |   1692.73  |
     +-------------------------------------+

     +-------------------------------------+
101. | product | survquar | news | reg_tpi |
     |     141 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 240715.6  |  177.0255  |  1359.779  |
     +-------------------------------------+

     +-------------------------------------+
102. | product | survquar | news | reg_tpi |
     |     141 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 141105.9  |  74.02929  |  1906.082  |
     +-------------------------------------+

     +-------------------------------------+
103. | product | survquar | news | reg_tpi |
     |     141 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 285596.6  |  173.1073  |  1649.824  |
     +-------------------------------------+

     +-------------------------------------+
104. | product | survquar | news | reg_tpi |
     |     141 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 245841.2  |  174.2286  |  1411.027  |
     +-------------------------------------+

     +-------------------------------------+
105. | product | survquar | news | reg_tpi |
     |     144 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 120910.7  |  54.57555  |  2215.473  |
     +-------------------------------------+

     +-------------------------------------+
106. | product | survquar | news | reg_tpi |
     |     144 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 109477.7  |  41.99524  |  2606.906  |
     +-------------------------------------+

     +-------------------------------------+
107. | product | survquar | news | reg_tpi |
     |     144 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 92672.33  |  37.34817  |  2481.309  |
     +-------------------------------------+

     +-------------------------------------+
108. | product | survquar | news | reg_tpi |
     |     144 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 100051.2  |  42.89467  |  2332.487  |
     +-------------------------------------+

     +-------------------------------------+
109. | product | survquar | news | reg_tpi |
     |     147 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 286163.7  |  127.9021  |  2237.365  |
     +-------------------------------------+

     +-------------------------------------+
110. | product | survquar | news | reg_tpi |
     |     147 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 237614.4  |  106.1663  |  2238.134  |
     +-------------------------------------+

     +-------------------------------------+
111. | product | survquar | news | reg_tpi |
     |     147 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 325182.9  |  140.7931  |  2309.651  |
     +-------------------------------------+

     +-------------------------------------+
112. | product | survquar | news | reg_tpi |
     |     147 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 392900.6  |  168.0578  |  2337.889  |
     +-------------------------------------+

     +-------------------------------------+
113. | product | survquar | news | reg_tpi |
     |     153 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   120619  |  60.41247  |   1996.59  |
     +-------------------------------------+

     +-------------------------------------+
114. | product | survquar | news | reg_tpi |
     |     153 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 90980.08  |  126.9232  |   716.812  |
     +-------------------------------------+

     +-------------------------------------+
115. | product | survquar | news | reg_tpi |
     |     153 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 26998.51  |   18.7838  |  1437.329  |
     +-------------------------------------+

     +-------------------------------------+
116. | product | survquar | news | reg_tpi |
     |     153 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 46202.88  |  31.29716  |  1476.265  |
     +-------------------------------------+

     +-------------------------------------+
117. | product | survquar | news | reg_tpi |
     |     157 |        1 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   243554  |       121  |  2012.843  |
     +-------------------------------------+

     +-------------------------------------+
118. | product | survquar | news | reg_tpi |
     |     157 |        2 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 143940.2  |        67  |  2148.361  |
     +-------------------------------------+

     +-------------------------------------+
119. | product | survquar | news | reg_tpi |
     |     157 |        3 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 222024.9  |       122  |  1819.876  |
     +-------------------------------------+

     +-------------------------------------+
120. | product | survquar | news | reg_tpi |
     |     157 |        4 |    1 |       1 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   285056  |       127  |  2244.535  |
     +-------------------------------------+

     +-------------------------------------+
121. | product | survquar | news | reg_tpi |
     |     102 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 29364.59  |  86.93306  |  337.7839  |
     +-------------------------------------+

     +-------------------------------------+
122. | product | survquar | news | reg_tpi |
     |     102 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 17206.62  |  49.69769  |  346.2258  |
     +-------------------------------------+

     +-------------------------------------+
123. | product | survquar | news | reg_tpi |
     |     102 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 12636.41  |  38.47847  |  328.4021  |
     +-------------------------------------+

     +-------------------------------------+
124. | product | survquar | news | reg_tpi |
     |     102 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 23771.92  |  65.16817  |  364.7781  |
     +-------------------------------------+

     +-------------------------------------+
125. | product | survquar | news | reg_tpi |
     |     103 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 37906.28  |  110.7934  |  342.1349  |
     +-------------------------------------+

     +-------------------------------------+
126. | product | survquar | news | reg_tpi |
     |     103 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  48313.5  |  141.5655  |  341.2803  |
     +-------------------------------------+

     +-------------------------------------+
127. | product | survquar | news | reg_tpi |
     |     103 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 19709.12  |   69.0774  |  285.3193  |
     +-------------------------------------+

     +-------------------------------------+
128. | product | survquar | news | reg_tpi |
     |     103 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 26492.04  |  78.30276  |  338.3282  |
     +-------------------------------------+

     +-------------------------------------+
129. | product | survquar | news | reg_tpi |
     |     104 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 12683.53  |  33.99248  |  373.1274  |
     +-------------------------------------+

     +-------------------------------------+
130. | product | survquar | news | reg_tpi |
     |     104 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 16220.43  |  49.21543  |  329.5801  |
     +-------------------------------------+

     +-------------------------------------+
131. | product | survquar | news | reg_tpi |
     |     104 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 28828.46  |  61.66858  |  467.4741  |
     +-------------------------------------+

     +-------------------------------------+
132. | product | survquar | news | reg_tpi |
     |     104 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 7465.262  |  8.290213  |   900.491  |
     +-------------------------------------+

     +-------------------------------------+
133. | product | survquar | news | reg_tpi |
     |     105 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 357220.3  |  1189.568  |  300.2942  |
     +-------------------------------------+

     +-------------------------------------+
134. | product | survquar | news | reg_tpi |
     |     105 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 618068.6  |  2578.645  |  239.6874  |
     +-------------------------------------+

     +-------------------------------------+
135. | product | survquar | news | reg_tpi |
     |     105 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 751235.6  |  2748.604  |  273.3153  |
     +-------------------------------------+

     +-------------------------------------+
136. | product | survquar | news | reg_tpi |
     |     105 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 479146.9  |  2223.427  |  215.4992  |
     +-------------------------------------+

     +-------------------------------------+
137. | product | survquar | news | reg_tpi |
     |     107 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 297593.5  |   4421.04  |    67.313  |
     +-------------------------------------+

     +-------------------------------------+
138. | product | survquar | news | reg_tpi |
     |     107 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 169997.9  |  2387.102  |  71.21517  |
     +-------------------------------------+

     +-------------------------------------+
139. | product | survquar | news | reg_tpi |
     |     107 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 376672.9  |  5599.926  |  67.26391  |
     +-------------------------------------+

     +-------------------------------------+
140. | product | survquar | news | reg_tpi |
     |     107 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 101869.2  |  1517.206  |  67.14265  |
     +-------------------------------------+

     +-------------------------------------+
141. | product | survquar | news | reg_tpi |
     |     108 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 445996.5  |  623.0493  |  715.8286  |
     +-------------------------------------+

     +-------------------------------------+
142. | product | survquar | news | reg_tpi |
     |     108 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 296907.4  |  370.4726  |  801.4286  |
     +-------------------------------------+

     +-------------------------------------+
143. | product | survquar | news | reg_tpi |
     |     108 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 282927.9  |  339.1859  |  834.1381  |
     +-------------------------------------+

     +-------------------------------------+
144. | product | survquar | news | reg_tpi |
     |     108 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 109417.6  |  159.3522  |  686.6399  |
     +-------------------------------------+

     +-------------------------------------+
145. | product | survquar | news | reg_tpi |
     |     109 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 9735.132  |   55.4843  |  175.4574  |
     +-------------------------------------+

     +-------------------------------------+
146. | product | survquar | news | reg_tpi |
     |     109 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 66708.81  |  606.7471  |   109.945  |
     +-------------------------------------+

     +-------------------------------------+
147. | product | survquar | news | reg_tpi |
     |     109 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 31370.72  |  393.2848  |  79.76591  |
     +-------------------------------------+

     +-------------------------------------+
148. | product | survquar | news | reg_tpi |
     |     109 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 4461.495  |  35.19706  |  126.7576  |
     +-------------------------------------+

     +-------------------------------------+
149. | product | survquar | news | reg_tpi |
     |     110 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 143359.5  |  68.01941  |  2107.626  |
     +-------------------------------------+

     +-------------------------------------+
150. | product | survquar | news | reg_tpi |
     |     110 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 136760.3  |  74.61742  |   1832.82  |
     +-------------------------------------+

     +-------------------------------------+
151. | product | survquar | news | reg_tpi |
     |     110 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 173522.5  |  94.56759  |  1834.904  |
     +-------------------------------------+

     +-------------------------------------+
152. | product | survquar | news | reg_tpi |
     |     110 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 63226.65  |  37.72474  |      1676  |
     +-------------------------------------+

     +-------------------------------------+
153. | product | survquar | news | reg_tpi |
     |     112 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 126529.4  |  287.2482  |   440.488  |
     +-------------------------------------+

     +-------------------------------------+
154. | product | survquar | news | reg_tpi |
     |     112 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 81136.96  |  197.8114  |  410.1732  |
     +-------------------------------------+

     +-------------------------------------+
155. | product | survquar | news | reg_tpi |
     |     112 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 158599.5  |  388.5548  |  408.1779  |
     +-------------------------------------+

     +-------------------------------------+
156. | product | survquar | news | reg_tpi |
     |     112 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 13100.11  |  27.05145  |  484.2665  |
     +-------------------------------------+

     +-------------------------------------+
157. | product | survquar | news | reg_tpi |
     |     113 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 382745.9  |    337.06  |  1135.542  |
     +-------------------------------------+

     +-------------------------------------+
158. | product | survquar | news | reg_tpi |
     |     113 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 689563.5  |  656.9924  |  1049.576  |
     +-------------------------------------+

     +-------------------------------------+
159. | product | survquar | news | reg_tpi |
     |     113 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 491485.1  |  430.2472  |  1142.332  |
     +-------------------------------------+

     +-------------------------------------+
160. | product | survquar | news | reg_tpi |
     |     113 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 266416.8  |  292.9142  |  909.5388  |
     +-------------------------------------+

     +-------------------------------------+
161. | product | survquar | news | reg_tpi |
     |     114 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 47964.09  |  22.05739  |  2174.514  |
     +-------------------------------------+

     +-------------------------------------+
162. | product | survquar | news | reg_tpi |
     |     114 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 68301.07  |  37.42775  |  1824.878  |
     +-------------------------------------+

     +-------------------------------------+
163. | product | survquar | news | reg_tpi |
     |     114 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 61957.69  |  38.10094  |  1626.146  |
     +-------------------------------------+

     +-------------------------------------+
164. | product | survquar | news | reg_tpi |
     |     114 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 32060.12  |  15.48739  |  2070.078  |
     +-------------------------------------+

     +-------------------------------------+
165. | product | survquar | news | reg_tpi |
     |     115 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 47909.89  |  52.54889  |  911.7203  |
     +-------------------------------------+

     +-------------------------------------+
166. | product | survquar | news | reg_tpi |
     |     115 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 93626.42  |  95.61889  |  979.1624  |
     +-------------------------------------+

     +-------------------------------------+
167. | product | survquar | news | reg_tpi |
     |     115 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 37367.08  |  36.06835  |  1036.007  |
     +-------------------------------------+

     +-------------------------------------+
168. | product | survquar | news | reg_tpi |
     |     115 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 106146.4  |  115.6465  |  917.8525  |
     +-------------------------------------+

     +-------------------------------------+
169. | product | survquar | news | reg_tpi |
     |     116 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 100322.1  |  220.6409  |   454.685  |
     +-------------------------------------+

     +-------------------------------------+
170. | product | survquar | news | reg_tpi |
     |     116 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 78786.27  |  172.1059  |  457.7779  |
     +-------------------------------------+

     +-------------------------------------+
171. | product | survquar | news | reg_tpi |
     |     116 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 24203.64  |  34.41812  |  703.2237  |
     +-------------------------------------+

     +-------------------------------------+
172. | product | survquar | news | reg_tpi |
     |     116 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 35498.38  |  77.23854  |  459.5941  |
     +-------------------------------------+

     +-------------------------------------+
173. | product | survquar | news | reg_tpi |
     |     117 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 128181.8  |  30.45034  |  4209.537  |
     +-------------------------------------+

     +-------------------------------------+
174. | product | survquar | news | reg_tpi |
     |     117 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 260292.3  |  62.45788  |  4167.486  |
     +-------------------------------------+

     +-------------------------------------+
175. | product | survquar | news | reg_tpi |
     |     117 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 218267.6  |  49.08188  |  4447.011  |
     +-------------------------------------+

     +-------------------------------------+
176. | product | survquar | news | reg_tpi |
     |     117 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 129224.4  |  30.61499  |  4220.952  |
     +-------------------------------------+

     +-------------------------------------+
177. | product | survquar | news | reg_tpi |
     |     119 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 25626.89  |  5.878972  |  4359.076  |
     +-------------------------------------+

     +-------------------------------------+
178. | product | survquar | news | reg_tpi |
     |     119 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 67075.94  |  15.98689  |  4195.685  |
     +-------------------------------------+

     +-------------------------------------+
179. | product | survquar | news | reg_tpi |
     |     119 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 32761.49  |  6.922961  |  4732.294  |
     +-------------------------------------+

     +-------------------------------------+
180. | product | survquar | news | reg_tpi |
     |     119 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 27754.76  |   6.64884  |  4174.376  |
     +-------------------------------------+

     +-------------------------------------+
181. | product | survquar | news | reg_tpi |
     |     121 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 54507.61  |  14.30812  |  3809.558  |
     +-------------------------------------+

     +-------------------------------------+
182. | product | survquar | news | reg_tpi |
     |     121 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  82659.5  |  19.60178  |  4216.939  |
     +-------------------------------------+

     +-------------------------------------+
183. | product | survquar | news | reg_tpi |
     |     121 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 106635.9  |   29.4236  |  3624.164  |
     +-------------------------------------+

     +-------------------------------------+
184. | product | survquar | news | reg_tpi |
     |     121 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 40805.05  |  10.51119  |  3882.057  |
     +-------------------------------------+

     +-------------------------------------+
185. | product | survquar | news | reg_tpi |
     |     122 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 96851.59  |  173.4525  |  558.3752  |
     +-------------------------------------+

     +-------------------------------------+
186. | product | survquar | news | reg_tpi |
     |     122 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 112604.1  |    246.15  |  457.4612  |
     +-------------------------------------+

     +-------------------------------------+
187. | product | survquar | news | reg_tpi |
     |     122 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 58697.58  |  131.7797  |  445.4219  |
     +-------------------------------------+

     +-------------------------------------+
188. | product | survquar | news | reg_tpi |
     |     122 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 42833.32  |  47.53296  |  901.1288  |
     +-------------------------------------+

     +-------------------------------------+
189. | product | survquar | news | reg_tpi |
     |     123 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 61298.66  |  234.4441  |  261.4639  |
     +-------------------------------------+

     +-------------------------------------+
190. | product | survquar | news | reg_tpi |
     |     123 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 92101.61  |  230.3934  |  399.7581  |
     +-------------------------------------+

     +-------------------------------------+
191. | product | survquar | news | reg_tpi |
     |     123 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 66328.42  |  308.0056  |  215.3481  |
     +-------------------------------------+

     +-------------------------------------+
192. | product | survquar | news | reg_tpi |
     |     123 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 33917.02  |  92.25834  |   367.631  |
     +-------------------------------------+

     +-------------------------------------+
193. | product | survquar | news | reg_tpi |
     |     125 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 78968.52  |  860.0106  |  91.82272  |
     +-------------------------------------+

     +-------------------------------------+
194. | product | survquar | news | reg_tpi |
     |     125 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 106363.1  |  1227.473  |  86.65208  |
     +-------------------------------------+

     +-------------------------------------+
195. | product | survquar | news | reg_tpi |
     |     125 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 118668.6  |  1592.723  |  74.50675  |
     +-------------------------------------+

     +-------------------------------------+
196. | product | survquar | news | reg_tpi |
     |     125 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  78879.7  |  978.1732  |  80.63982  |
     +-------------------------------------+

     +-------------------------------------+
197. | product | survquar | news | reg_tpi |
     |     127 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 61383.81  |  63.68324  |  963.8926  |
     +-------------------------------------+

     +-------------------------------------+
198. | product | survquar | news | reg_tpi |
     |     127 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 82727.36  |  117.9509  |  701.3709  |
     +-------------------------------------+

     +-------------------------------------+
199. | product | survquar | news | reg_tpi |
     |     127 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 84782.69  |  132.5824  |  639.4717  |
     +-------------------------------------+

     +-------------------------------------+
200. | product | survquar | news | reg_tpi |
     |     127 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 35638.85  |  55.54654  |  641.6035  |
     +-------------------------------------+

     +-------------------------------------+
201. | product | survquar | news | reg_tpi |
     |     132 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 126896.1  |  562.9168  |  225.4259  |
     +-------------------------------------+

     +-------------------------------------+
202. | product | survquar | news | reg_tpi |
     |     132 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 7803.022  |  17.58225  |  443.8012  |
     +-------------------------------------+

     +-------------------------------------+
203. | product | survquar | news | reg_tpi |
     |     132 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 94703.77  |  522.9926  |  181.0805  |
     +-------------------------------------+

     +-------------------------------------+
204. | product | survquar | news | reg_tpi |
     |     132 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 497.6712  |   1.60098  |  310.8541  |
     +-------------------------------------+

     +-------------------------------------+
205. | product | survquar | news | reg_tpi |
     |     134 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  15491.6  |  21.34178  |  725.8815  |
     +-------------------------------------+

     +-------------------------------------+
206. | product | survquar | news | reg_tpi |
     |     134 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 27712.49  |  19.18386  |  1444.573  |
     +-------------------------------------+

     +-------------------------------------+
207. | product | survquar | news | reg_tpi |
     |     134 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 82150.38  |  45.09989  |  1821.521  |
     +-------------------------------------+

     +-------------------------------------+
208. | product | survquar | news | reg_tpi |
     |     134 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 107489.2  |   72.0636  |  1491.588  |
     +-------------------------------------+

     +-------------------------------------+
209. | product | survquar | news | reg_tpi |
     |     136 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 68809.45  |  81.14402  |  847.9917  |
     +-------------------------------------+

     +-------------------------------------+
210. | product | survquar | news | reg_tpi |
     |     136 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 72599.34  |  92.38659  |  785.8212  |
     +-------------------------------------+

     +-------------------------------------+
211. | product | survquar | news | reg_tpi |
     |     136 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 65526.31  |  75.67856  |  865.8503  |
     +-------------------------------------+

     +-------------------------------------+
212. | product | survquar | news | reg_tpi |
     |     136 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 32966.32  |  29.73886  |  1108.527  |
     +-------------------------------------+

     +-------------------------------------+
213. | product | survquar | news | reg_tpi |
     |     138 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 56376.97  |  168.8026  |  333.9816  |
     +-------------------------------------+

     +-------------------------------------+
214. | product | survquar | news | reg_tpi |
     |     138 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 121418.6  |    481.87  |  251.9738  |
     +-------------------------------------+

     +-------------------------------------+
215. | product | survquar | news | reg_tpi |
     |     138 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 69640.65  |   274.449  |  253.7472  |
     +-------------------------------------+

     +-------------------------------------+
216. | product | survquar | news | reg_tpi |
     |     138 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 33469.82  |  93.31537  |  358.6742  |
     +-------------------------------------+

     +-------------------------------------+
217. | product | survquar | news | reg_tpi |
     |     140 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 187855.6  |  153.5642  |  1223.303  |
     +-------------------------------------+

     +-------------------------------------+
218. | product | survquar | news | reg_tpi |
     |     140 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 265817.5  |   206.895  |  1284.794  |
     +-------------------------------------+

     +-------------------------------------+
219. | product | survquar | news | reg_tpi |
     |     140 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  85701.2  |  49.81609  |  1720.352  |
     +-------------------------------------+

     +-------------------------------------+
220. | product | survquar | news | reg_tpi |
     |     140 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  2739.18  |  1.250496  |  2190.474  |
     +-------------------------------------+

     +-------------------------------------+
221. | product | survquar | news | reg_tpi |
     |     141 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 94178.44  |  63.40778  |  1485.282  |
     +-------------------------------------+

     +-------------------------------------+
222. | product | survquar | news | reg_tpi |
     |     141 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 112183.6  |  76.16437  |  1472.914  |
     +-------------------------------------+

     +-------------------------------------+
223. | product | survquar | news | reg_tpi |
     |     141 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 144774.7  |  97.33558  |  1487.377  |
     +-------------------------------------+

     +-------------------------------------+
224. | product | survquar | news | reg_tpi |
     |     141 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 83330.26  |  55.76326  |  1494.358  |
     +-------------------------------------+

     +-------------------------------------+
225. | product | survquar | news | reg_tpi |
     |     144 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 24525.44  |   16.7763  |   1461.91  |
     +-------------------------------------+

     +-------------------------------------+
226. | product | survquar | news | reg_tpi |
     |     144 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 68129.55  |  48.23926  |  1412.326  |
     +-------------------------------------+

     +-------------------------------------+
227. | product | survquar | news | reg_tpi |
     |     144 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 30792.37  |  21.57819  |  1427.013  |
     +-------------------------------------+

     +-------------------------------------+
228. | product | survquar | news | reg_tpi |
     |     144 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 39750.93  |  69.68451  |  570.4414  |
     +-------------------------------------+

     +-------------------------------------+
229. | product | survquar | news | reg_tpi |
     |     147 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 183363.4  |   84.8359  |  2161.389  |
     +-------------------------------------+

     +-------------------------------------+
230. | product | survquar | news | reg_tpi |
     |     147 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 249999.3  |  112.4125  |  2223.946  |
     +-------------------------------------+

     +-------------------------------------+
231. | product | survquar | news | reg_tpi |
     |     147 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 173990.5  |  78.76805  |  2208.897  |
     +-------------------------------------+

     +-------------------------------------+
232. | product | survquar | news | reg_tpi |
     |     147 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 135277.5  |  58.73138  |  2303.326  |
     +-------------------------------------+

     +-------------------------------------+
233. | product | survquar | news | reg_tpi |
     |     153 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 31883.68  |  80.36708  |  396.7256  |
     +-------------------------------------+

     +-------------------------------------+
234. | product | survquar | news | reg_tpi |
     |     153 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 53805.12  |   104.484  |  514.9606  |
     +-------------------------------------+

     +-------------------------------------+
235. | product | survquar | news | reg_tpi |
     |     153 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  58834.3  |  107.6005  |  546.7849  |
     +-------------------------------------+

     +-------------------------------------+
236. | product | survquar | news | reg_tpi |
     |     153 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 34146.19  |  90.49024  |  377.3466  |
     +-------------------------------------+

     +-------------------------------------+
237. | product | survquar | news | reg_tpi |
     |     157 |        1 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 18207.25  |        36  |   505.757  |
     +-------------------------------------+

     +-------------------------------------+
238. | product | survquar | news | reg_tpi |
     |     157 |        2 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 29358.68  |        62  |  473.5271  |
     +-------------------------------------+

     +-------------------------------------+
239. | product | survquar | news | reg_tpi |
     |     157 |        3 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 20702.52  |        47  |  440.4792  |
     +-------------------------------------+

     +-------------------------------------+
240. | product | survquar | news | reg_tpi |
     |     157 |        4 |    2 |       2 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 13655.26  |        44  |  310.3468  |
     +-------------------------------------+

     +-------------------------------------+
241. | product | survquar | news | reg_tpi |
     |     102 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 2114.591  |  7.142858  |  296.0428  |
     +-------------------------------------+

     +-------------------------------------+
242. | product | survquar | news | reg_tpi |
     |     102 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 3672.339  |  10.71429  |  342.7516  |
     +-------------------------------------+

     +-------------------------------------+
243. | product | survquar | news | reg_tpi |
     |     102 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 1085.714  |  3.571429  |       304  |
     +-------------------------------------+

     +-------------------------------------+
244. | product | survquar | news | reg_tpi |
     |     102 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 2064.132  |  7.142858  |  288.9785  |
     +-------------------------------------+

     +-------------------------------------+
245. | product | survquar | news | reg_tpi |
     |     103 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 2811.979  |  8.524909  |  329.8545  |
     +-------------------------------------+

     +-------------------------------------+
246. | product | survquar | news | reg_tpi |
     |     103 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 10952.85  |  27.71841  |   395.147  |
     +-------------------------------------+

     +-------------------------------------+
247. | product | survquar | news | reg_tpi |
     |     103 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 11896.86  |  44.11667  |  269.6682  |
     +-------------------------------------+

     +-------------------------------------+
248. | product | survquar | news | reg_tpi |
     |     103 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 1689.238  |  6.303331  |  267.9912  |
     +-------------------------------------+

     +-------------------------------------+
249. | product | survquar | news | reg_tpi |
     |     104 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   2656.2  |  4.465622  |  594.8109  |
     +-------------------------------------+

     +-------------------------------------+
250. | product | survquar | news | reg_tpi |
     |     104 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 10449.81  |  9.255874  |  1128.993  |
     +-------------------------------------+

     +-------------------------------------+
251. | product | survquar | news | reg_tpi |
     |     104 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 1936.129  |  6.940541  |  278.9594  |
     +-------------------------------------+

     +-------------------------------------+
252. | product | survquar | news | reg_tpi |
     |     104 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 9307.124  |  20.65042  |  450.6991  |
     +-------------------------------------+

     +-------------------------------------+
253. | product | survquar | news | reg_tpi |
     |     105 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 53356.14  |  128.6237  |  414.8234  |
     +-------------------------------------+

     +-------------------------------------+
254. | product | survquar | news | reg_tpi |
     |     105 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 412741.1  |  869.8284  |  474.5086  |
     +-------------------------------------+

     +-------------------------------------+
255. | product | survquar | news | reg_tpi |
     |     105 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 232241.5  |  557.5908  |  416.5089  |
     +-------------------------------------+

     +-------------------------------------+
256. | product | survquar | news | reg_tpi |
     |     105 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 358483.1  |  943.7106  |  379.8655  |
     +-------------------------------------+

     +-------------------------------------+
257. | product | survquar | news | reg_tpi |
     |     107 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 268716.3  |  3781.404  |  71.06258  |
     +-------------------------------------+

     +-------------------------------------+
258. | product | survquar | news | reg_tpi |
     |     107 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 196957.5  |  2757.818  |  71.41786  |
     +-------------------------------------+

     +-------------------------------------+
259. | product | survquar | news | reg_tpi |
     |     107 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   130018  |  1835.504  |  70.83503  |
     +-------------------------------------+

     +-------------------------------------+
260. | product | survquar | news | reg_tpi |
     |     107 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 382003.5  |  5982.463  |  63.85387  |
     +-------------------------------------+

     +-------------------------------------+
261. | product | survquar | news | reg_tpi |
     |     108 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   220463  |  204.3706  |  1078.741  |
     +-------------------------------------+

     +-------------------------------------+
262. | product | survquar | news | reg_tpi |
     |     108 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 196460.2  |  378.2299  |  519.4202  |
     +-------------------------------------+

     +-------------------------------------+
263. | product | survquar | news | reg_tpi |
     |     108 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 245844.8  |  290.1383  |  847.3368  |
     +-------------------------------------+

     +-------------------------------------+
264. | product | survquar | news | reg_tpi |
     |     108 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 408400.2  |   565.879  |  721.7094  |
     +-------------------------------------+

     +-------------------------------------+
265. | product | survquar | news | reg_tpi |
     |     109 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 2404.484  |  12.87966  |  186.6884  |
     +-------------------------------------+

     +-------------------------------------+
266. | product | survquar | news | reg_tpi |
     |     109 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 12680.22  |  114.7808  |  110.4734  |
     +-------------------------------------+

     +-------------------------------------+
267. | product | survquar | news | reg_tpi |
     |     109 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 4466.336  |  13.08654  |  341.2923  |
     +-------------------------------------+

     +-------------------------------------+
268. | product | survquar | news | reg_tpi |
     |     109 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 5367.666  |  68.23963  |  78.65907  |
     +-------------------------------------+

     +-------------------------------------+
269. | product | survquar | news | reg_tpi |
     |     110 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 22828.12  |  11.33169  |  2014.537  |
     +-------------------------------------+

     +-------------------------------------+
270. | product | survquar | news | reg_tpi |
     |     110 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 90841.05  |   38.3687  |  2367.583  |
     +-------------------------------------+

     +-------------------------------------+
271. | product | survquar | news | reg_tpi |
     |     110 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 34873.17  |  21.20598  |  1644.497  |
     +-------------------------------------+

     +-------------------------------------+
272. | product | survquar | news | reg_tpi |
     |     110 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 77588.54  |  57.31623  |  1353.692  |
     +-------------------------------------+

     +-------------------------------------+
273. | product | survquar | news | reg_tpi |
     |     112 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |    57077  |  102.2375  |  558.2784  |
     +-------------------------------------+

     +-------------------------------------+
274. | product | survquar | news | reg_tpi |
     |     112 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 77115.84  |  315.7154  |  244.2574  |
     +-------------------------------------+

     +-------------------------------------+
275. | product | survquar | news | reg_tpi |
     |     112 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 90991.51  |  361.0983  |  251.9854  |
     +-------------------------------------+

     +-------------------------------------+
276. | product | survquar | news | reg_tpi |
     |     112 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 6405.819  |  23.04664  |  277.9502  |
     +-------------------------------------+

     +-------------------------------------+
277. | product | survquar | news | reg_tpi |
     |     113 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 169556.7  |  125.9982  |  1345.708  |
     +-------------------------------------+

     +-------------------------------------+
278. | product | survquar | news | reg_tpi |
     |     113 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 244567.7  |  226.9371  |   1077.69  |
     +-------------------------------------+

     +-------------------------------------+
279. | product | survquar | news | reg_tpi |
     |     113 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 115755.5  |  105.0785  |   1101.61  |
     +-------------------------------------+

     +-------------------------------------+
280. | product | survquar | news | reg_tpi |
     |     113 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 223305.8  |  384.3986  |  580.9227  |
     +-------------------------------------+

     +-------------------------------------+
281. | product | survquar | news | reg_tpi |
     |     114 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 78894.25  |  39.41334  |  2001.714  |
     +-------------------------------------+

     +-------------------------------------+
282. | product | survquar | news | reg_tpi |
     |     114 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 35943.55  |  26.62773  |  1349.854  |
     +-------------------------------------+

     +-------------------------------------+
283. | product | survquar | news | reg_tpi |
     |     114 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 11846.29  |  6.088944  |  1945.541  |
     +-------------------------------------+

     +-------------------------------------+
284. | product | survquar | news | reg_tpi |
     |     114 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |    74219  |  66.82891  |  1110.582  |
     +-------------------------------------+

     +-------------------------------------+
285. | product | survquar | news | reg_tpi |
     |     115 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 24201.49  |  32.59959  |  742.3862  |
     +-------------------------------------+

     +-------------------------------------+
286. | product | survquar | news | reg_tpi |
     |     115 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 44703.18  |  46.32046  |  965.0849  |
     +-------------------------------------+

     +-------------------------------------+
287. | product | survquar | news | reg_tpi |
     |     115 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 19887.03  |  28.61039  |   695.098  |
     +-------------------------------------+

     +-------------------------------------+
288. | product | survquar | news | reg_tpi |
     |     115 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 62053.24  |  80.65774  |  769.3401  |
     +-------------------------------------+

     +-------------------------------------+
289. | product | survquar | news | reg_tpi |
     |     116 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   165694  |  279.2927  |  593.2628  |
     +-------------------------------------+

     +-------------------------------------+
290. | product | survquar | news | reg_tpi |
     |     116 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 55139.22  |  118.0678  |  467.0131  |
     +-------------------------------------+

     +-------------------------------------+
291. | product | survquar | news | reg_tpi |
     |     116 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 177373.9  |  334.9526  |  529.5493  |
     +-------------------------------------+

     +-------------------------------------+
292. | product | survquar | news | reg_tpi |
     |     116 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 339273.5  |  757.1875  |  448.0706  |
     +-------------------------------------+

     +-------------------------------------+
293. | product | survquar | news | reg_tpi |
     |     117 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 82667.25  |  20.42086  |  4048.177  |
     +-------------------------------------+

     +-------------------------------------+
294. | product | survquar | news | reg_tpi |
     |     117 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 324343.7  |  77.98995  |  4158.789  |
     +-------------------------------------+

     +-------------------------------------+
295. | product | survquar | news | reg_tpi |
     |     117 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 82005.13  |  19.67075  |  4168.887  |
     +-------------------------------------+

     +-------------------------------------+
296. | product | survquar | news | reg_tpi |
     |     117 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 138327.4  |  32.96321  |  4196.417  |
     +-------------------------------------+

     +-------------------------------------+
297. | product | survquar | news | reg_tpi |
     |     119 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 27471.77  |  6.606604  |  4158.229  |
     +-------------------------------------+

     +-------------------------------------+
298. | product | survquar | news | reg_tpi |
     |     119 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 51692.51  |  12.02134  |  4300.062  |
     +-------------------------------------+

     +-------------------------------------+
299. | product | survquar | news | reg_tpi |
     |     119 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 32296.23  |  6.658126  |  4850.649  |
     +-------------------------------------+

     +-------------------------------------+
300. | product | survquar | news | reg_tpi |
     |     119 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 221653.4  |  51.63623  |  4292.594  |
     +-------------------------------------+

     +-------------------------------------+
301. | product | survquar | news | reg_tpi |
     |     121 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 61614.82  |  17.37919  |  3545.321  |
     +-------------------------------------+

     +-------------------------------------+
302. | product | survquar | news | reg_tpi |
     |     121 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 78079.21  |  21.58798  |   3616.79  |
     +-------------------------------------+

     +-------------------------------------+
303. | product | survquar | news | reg_tpi |
     |     121 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 41384.03  |  11.40547  |  3628.437  |
     +-------------------------------------+

     +-------------------------------------+
304. | product | survquar | news | reg_tpi |
     |     121 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 81825.66  |  21.92575  |  3731.944  |
     +-------------------------------------+

     +-------------------------------------+
305. | product | survquar | news | reg_tpi |
     |     122 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 28791.55  |  37.52918  |  767.1777  |
     +-------------------------------------+

     +-------------------------------------+
306. | product | survquar | news | reg_tpi |
     |     122 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 48604.92  |  36.90298  |    1317.1  |
     +-------------------------------------+

     +-------------------------------------+
307. | product | survquar | news | reg_tpi |
     |     122 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 21646.17  |  17.71632  |   1221.82  |
     +-------------------------------------+

     +-------------------------------------+
308. | product | survquar | news | reg_tpi |
     |     122 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 49819.54  |  38.59588  |    1290.8  |
     +-------------------------------------+

     +-------------------------------------+
309. | product | survquar | news | reg_tpi |
     |     123 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 61097.02  |  230.4976  |  265.0657  |
     +-------------------------------------+

     +-------------------------------------+
310. | product | survquar | news | reg_tpi |
     |     123 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 71106.52  |  151.4003  |  469.6591  |
     +-------------------------------------+

     +-------------------------------------+
311. | product | survquar | news | reg_tpi |
     |     123 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 80803.46  |  154.5086  |  522.9707  |
     +-------------------------------------+

     +-------------------------------------+
312. | product | survquar | news | reg_tpi |
     |     123 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 112580.4  |  145.8001  |  772.1558  |
     +-------------------------------------+

     +-------------------------------------+
313. | product | survquar | news | reg_tpi |
     |     125 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 76201.09  |  953.9947  |   79.8758  |
     +-------------------------------------+

     +-------------------------------------+
314. | product | survquar | news | reg_tpi |
     |     125 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 62639.84  |  835.0872  |  75.00994  |
     +-------------------------------------+

     +-------------------------------------+
315. | product | survquar | news | reg_tpi |
     |     125 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 42123.24  |  668.2391  |  63.03619  |
     +-------------------------------------+

     +-------------------------------------+
316. | product | survquar | news | reg_tpi |
     |     125 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 118804.2  |  1414.863  |  83.96871  |
     +-------------------------------------+

     +-------------------------------------+
317. | product | survquar | news | reg_tpi |
     |     127 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 80425.78  |  53.22241  |  1511.126  |
     +-------------------------------------+

     +-------------------------------------+
318. | product | survquar | news | reg_tpi |
     |     127 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 95172.89  |  70.98695  |   1340.71  |
     +-------------------------------------+

     +-------------------------------------+
319. | product | survquar | news | reg_tpi |
     |     127 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 48514.16  |  40.49474  |  1198.036  |
     +-------------------------------------+

     +-------------------------------------+
320. | product | survquar | news | reg_tpi |
     |     127 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 107972.2  |  79.57282  |  1356.898  |
     +-------------------------------------+

     +-------------------------------------+
321. | product | survquar | news | reg_tpi |
     |     132 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 106583.1  |  333.3701  |  319.7141  |
     +-------------------------------------+

     +-------------------------------------+
322. | product | survquar | news | reg_tpi |
     |     132 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  8678.36  |  22.14551  |  391.8791  |
     +-------------------------------------+

     +-------------------------------------+
323. | product | survquar | news | reg_tpi |
     |     132 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 55587.12  |  213.6842  |  260.1367  |
     +-------------------------------------+

     +-------------------------------------+
324. | product | survquar | news | reg_tpi |
     |     132 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 20147.22  |  87.27507  |  230.8474  |
     +-------------------------------------+

     +-------------------------------------+
325. | product | survquar | news | reg_tpi |
     |     134 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 521.4305  |   1.50863  |  345.6317  |
     +-------------------------------------+

     +-------------------------------------+
326. | product | survquar | news | reg_tpi |
     |     134 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 18489.69  |  17.02182  |  1086.234  |
     +-------------------------------------+

     +-------------------------------------+
327. | product | survquar | news | reg_tpi |
     |     134 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  12989.5  |  19.90702  |  652.5085  |
     +-------------------------------------+

     +-------------------------------------+
328. | product | survquar | news | reg_tpi |
     |     134 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 5789.515  |  18.72122  |  309.2487  |
     +-------------------------------------+

     +-------------------------------------+
329. | product | survquar | news | reg_tpi |
     |     136 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 46928.55  |  41.06466  |  1142.797  |
     +-------------------------------------+

     +-------------------------------------+
330. | product | survquar | news | reg_tpi |
     |     136 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 53306.61  |  57.18856  |  932.1201  |
     +-------------------------------------+

     +-------------------------------------+
331. | product | survquar | news | reg_tpi |
     |     136 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 36047.22  |  37.85798  |  952.1699  |
     +-------------------------------------+

     +-------------------------------------+
332. | product | survquar | news | reg_tpi |
     |     136 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 82868.58  |  91.94495  |  901.2848  |
     +-------------------------------------+

     +-------------------------------------+
333. | product | survquar | news | reg_tpi |
     |     138 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 12729.29  |  40.34146  |  315.5386  |
     +-------------------------------------+

     +-------------------------------------+
334. | product | survquar | news | reg_tpi |
     |     138 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  22007.2  |  93.45449  |  235.4857  |
     +-------------------------------------+

     +-------------------------------------+
335. | product | survquar | news | reg_tpi |
     |     138 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 10873.57  |  34.76129  |  312.8067  |
     +-------------------------------------+

     +-------------------------------------+
336. | product | survquar | news | reg_tpi |
     |     138 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  19796.2  |  55.60547  |  356.0117  |
     +-------------------------------------+

     +-------------------------------------+
337. | product | survquar | news | reg_tpi |
     |     140 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 31312.03  |   31.4304  |  996.2341  |
     +-------------------------------------+

     +-------------------------------------+
338. | product | survquar | news | reg_tpi |
     |     140 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 38184.08  |  39.70475  |  961.7007  |
     +-------------------------------------+

     +-------------------------------------+
339. | product | survquar | news | reg_tpi |
     |     140 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 5227.928  |   10.0998  |  517.6271  |
     +-------------------------------------+

     +-------------------------------------+
340. | product | survquar | news | reg_tpi |
     |     140 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 1732.022  |  2.405766  |  719.9461  |
     +-------------------------------------+

     +-------------------------------------+
341. | product | survquar | news | reg_tpi |
     |     141 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 264260.8  |   132.772  |  1990.335  |
     +-------------------------------------+

     +-------------------------------------+
342. | product | survquar | news | reg_tpi |
     |     141 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 187887.8  |  93.02686  |  2019.716  |
     +-------------------------------------+

     +-------------------------------------+
343. | product | survquar | news | reg_tpi |
     |     141 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 149237.7  |  88.97171  |  1677.361  |
     +-------------------------------------+

     +-------------------------------------+
344. | product | survquar | news | reg_tpi |
     |     141 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 421410.7  |  174.3567  |  2416.945  |
     +-------------------------------------+

     +-------------------------------------+
345. | product | survquar | news | reg_tpi |
     |     144 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 17536.87  |  9.052221  |    1937.3  |
     +-------------------------------------+

     +-------------------------------------+
346. | product | survquar | news | reg_tpi |
     |     144 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 4957.116  |  3.971618  |  1248.135  |
     +-------------------------------------+

     +-------------------------------------+
347. | product | survquar | news | reg_tpi |
     |     144 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 750.4515  |  .7409956  |  1012.761  |
     +-------------------------------------+

     +-------------------------------------+
348. | product | survquar | news | reg_tpi |
     |     144 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 1887.388  |  1.440826  |  1309.934  |
     +-------------------------------------+

     +-------------------------------------+
349. | product | survquar | news | reg_tpi |
     |     147 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 89197.39  |  40.13151  |  2222.627  |
     +-------------------------------------+

     +-------------------------------------+
350. | product | survquar | news | reg_tpi |
     |     147 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 156060.5  |    67.254  |  2320.464  |
     +-------------------------------------+

     +-------------------------------------+
351. | product | survquar | news | reg_tpi |
     |     147 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 93330.04  |  39.59474  |  2357.132  |
     +-------------------------------------+

     +-------------------------------------+
352. | product | survquar | news | reg_tpi |
     |     147 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 146115.8  |  62.89139  |  2323.303  |
     +-------------------------------------+

     +-------------------------------------+
353. | product | survquar | news | reg_tpi |
     |     153 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 47141.96  |  60.43268  |   780.074  |
     +-------------------------------------+

     +-------------------------------------+
354. | product | survquar | news | reg_tpi |
     |     153 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 61570.09  |  94.82217  |  649.3217  |
     +-------------------------------------+

     +-------------------------------------+
355. | product | survquar | news | reg_tpi |
     |     153 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 63229.27  |  113.7496  |  555.8635  |
     +-------------------------------------+

     +-------------------------------------+
356. | product | survquar | news | reg_tpi |
     |     153 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 128803.3  |  242.6897  |  530.7327  |
     +-------------------------------------+

     +-------------------------------------+
357. | product | survquar | news | reg_tpi |
     |     157 |        1 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 13447.31  |        15  |  896.4871  |
     +-------------------------------------+

     +-------------------------------------+
358. | product | survquar | news | reg_tpi |
     |     157 |        2 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 19686.38  |        19  |  1036.125  |
     +-------------------------------------+

     +-------------------------------------+
359. | product | survquar | news | reg_tpi |
     |     157 |        3 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 5938.283  |        11  |  539.8439  |
     +-------------------------------------+

     +-------------------------------------+
360. | product | survquar | news | reg_tpi |
     |     157 |        4 |    3 |       3 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 24089.74  |        47  |  512.5475  |
     +-------------------------------------+

     +-------------------------------------+
361. | product | survquar | news | reg_tpi |
     |     102 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 50574.38  |  177.0915  |  285.5833  |
     +-------------------------------------+

     +-------------------------------------+
362. | product | survquar | news | reg_tpi |
     |     102 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 211575.3  |  726.8001  |  291.1053  |
     +-------------------------------------+

     +-------------------------------------+
363. | product | survquar | news | reg_tpi |
     |     102 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 47463.22  |  139.0787  |  341.2687  |
     +-------------------------------------+

     +-------------------------------------+
364. | product | survquar | news | reg_tpi |
     |     102 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 22701.23  |  77.08021  |  294.5143  |
     +-------------------------------------+

     +-------------------------------------+
365. | product | survquar | news | reg_tpi |
     |     103 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 250440.7  |  811.6687  |  308.5504  |
     +-------------------------------------+

     +-------------------------------------+
366. | product | survquar | news | reg_tpi |
     |     103 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 324616.1  |  987.1757  |  328.8332  |
     +-------------------------------------+

     +-------------------------------------+
367. | product | survquar | news | reg_tpi |
     |     103 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 114424.4  |   358.283  |  319.3688  |
     +-------------------------------------+

     +-------------------------------------+
368. | product | survquar | news | reg_tpi |
     |     103 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 213537.1  |  683.4447  |  312.4424  |
     +-------------------------------------+

     +-------------------------------------+
369. | product | survquar | news | reg_tpi |
     |     104 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 510797.1  |  542.9748  |  940.7381  |
     +-------------------------------------+

     +-------------------------------------+
370. | product | survquar | news | reg_tpi |
     |     104 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 322768.2  |  364.4067  |  885.7363  |
     +-------------------------------------+

     +-------------------------------------+
371. | product | survquar | news | reg_tpi |
     |     104 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 111571.5  |  118.2316  |  943.6691  |
     +-------------------------------------+

     +-------------------------------------+
372. | product | survquar | news | reg_tpi |
     |     104 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   146018  |  167.9941  |  869.1851  |
     +-------------------------------------+

     +-------------------------------------+
373. | product | survquar | news | reg_tpi |
     |     105 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 289551.8  |  1475.235  |   196.275  |
     +-------------------------------------+

     +-------------------------------------+
374. | product | survquar | news | reg_tpi |
     |     105 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 369443.7  |  1452.304  |  254.3845  |
     +-------------------------------------+

     +-------------------------------------+
375. | product | survquar | news | reg_tpi |
     |     105 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 211792.1  |  952.0775  |  222.4526  |
     +-------------------------------------+

     +-------------------------------------+
376. | product | survquar | news | reg_tpi |
     |     105 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   243405  |  1003.434  |  242.5721  |
     +-------------------------------------+

     +-------------------------------------+
377. | product | survquar | news | reg_tpi |
     |     107 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 505085.7  |  5560.126  |   90.8407  |
     +-------------------------------------+

     +-------------------------------------+
378. | product | survquar | news | reg_tpi |
     |     107 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   400867  |  7075.632  |  56.65459  |
     +-------------------------------------+

     +-------------------------------------+
379. | product | survquar | news | reg_tpi |
     |     107 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 406837.5  |   4643.12  |   87.6216  |
     +-------------------------------------+

     +-------------------------------------+
380. | product | survquar | news | reg_tpi |
     |     107 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 101309.8  |  1387.103  |  73.03694  |
     +-------------------------------------+

     +-------------------------------------+
381. | product | survquar | news | reg_tpi |
     |     108 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 180265.2  |  651.9546  |  276.4996  |
     +-------------------------------------+

     +-------------------------------------+
382. | product | survquar | news | reg_tpi |
     |     108 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 133446.6  |  198.4393  |  672.4808  |
     +-------------------------------------+

     +-------------------------------------+
383. | product | survquar | news | reg_tpi |
     |     108 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 74018.83  |  142.8713  |  518.0803  |
     +-------------------------------------+

     +-------------------------------------+
384. | product | survquar | news | reg_tpi |
     |     108 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 43851.49  |   95.9052  |  457.2379  |
     +-------------------------------------+

     +-------------------------------------+
385. | product | survquar | news | reg_tpi |
     |     109 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 148350.3  |   1460.29  |  101.5896  |
     +-------------------------------------+

     +-------------------------------------+
386. | product | survquar | news | reg_tpi |
     |     109 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 105880.9  |  802.2593  |  131.9784  |
     +-------------------------------------+

     +-------------------------------------+
387. | product | survquar | news | reg_tpi |
     |     109 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 206227.1  |  1279.339  |  161.1982  |
     +-------------------------------------+

     +-------------------------------------+
388. | product | survquar | news | reg_tpi |
     |     109 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 33244.04  |  332.3325  |  100.0325  |
     +-------------------------------------+

     +-------------------------------------+
389. | product | survquar | news | reg_tpi |
     |     110 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 60723.95  |  28.05668  |  2164.331  |
     +-------------------------------------+

     +-------------------------------------+
390. | product | survquar | news | reg_tpi |
     |     110 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 78900.36  |  34.19142  |  2307.607  |
     +-------------------------------------+

     +-------------------------------------+
391. | product | survquar | news | reg_tpi |
     |     110 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 32496.47  |  17.69062  |  1836.932  |
     +-------------------------------------+

     +-------------------------------------+
392. | product | survquar | news | reg_tpi |
     |     110 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 23335.01  |  10.99167  |  2122.973  |
     +-------------------------------------+

     +-------------------------------------+
393. | product | survquar | news | reg_tpi |
     |     112 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 247033.4  |   426.781  |  578.8295  |
     +-------------------------------------+

     +-------------------------------------+
394. | product | survquar | news | reg_tpi |
     |     112 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 1720.131  |  2.951568  |  582.7856  |
     +-------------------------------------+

     +-------------------------------------+
395. | product | survquar | news | reg_tpi |
     |     112 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 89191.91  |  159.5971  |  558.8568  |
     +-------------------------------------+

     +-------------------------------------+
396. | product | survquar | news | reg_tpi |
     |     112 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 5393.006  |  19.11349  |  282.1571  |
     +-------------------------------------+

     +-------------------------------------+
397. | product | survquar | news | reg_tpi |
     |     113 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 247032.9  |  217.9405  |  1133.488  |
     +-------------------------------------+

     +-------------------------------------+
398. | product | survquar | news | reg_tpi |
     |     113 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 481742.5  |  407.7542  |  1181.453  |
     +-------------------------------------+

     +-------------------------------------+
399. | product | survquar | news | reg_tpi |
     |     113 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 300553.1  |  384.2893  |  782.1011  |
     +-------------------------------------+

     +-------------------------------------+
400. | product | survquar | news | reg_tpi |
     |     113 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 179695.2  |  210.9265  |  851.9329  |
     +-------------------------------------+

     +-------------------------------------+
401. | product | survquar | news | reg_tpi |
     |     114 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 65879.63  |  30.32915  |  2172.155  |
     +-------------------------------------+

     +-------------------------------------+
402. | product | survquar | news | reg_tpi |
     |     114 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 41914.19  |  19.93449  |  2102.596  |
     +-------------------------------------+

     +-------------------------------------+
403. | product | survquar | news | reg_tpi |
     |     114 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 6844.912  |  5.049122  |  1355.664  |
     +-------------------------------------+

     +-------------------------------------+
404. | product | survquar | news | reg_tpi |
     |     114 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 35195.41  |  26.22903  |  1341.849  |
     +-------------------------------------+

     +-------------------------------------+
405. | product | survquar | news | reg_tpi |
     |     115 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 119378.4  |  124.2133  |  961.0759  |
     +-------------------------------------+

     +-------------------------------------+
406. | product | survquar | news | reg_tpi |
     |     115 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 112994.6  |  90.00769  |  1255.389  |
     +-------------------------------------+

     +-------------------------------------+
407. | product | survquar | news | reg_tpi |
     |     115 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  28583.3  |  21.63304  |  1321.279  |
     +-------------------------------------+

     +-------------------------------------+
408. | product | survquar | news | reg_tpi |
     |     115 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 89048.72  |  104.0911  |  855.4886  |
     +-------------------------------------+

     +-------------------------------------+
409. | product | survquar | news | reg_tpi |
     |     116 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 6429.374  |   5.99793  |  1071.932  |
     +-------------------------------------+

     +-------------------------------------+
410. | product | survquar | news | reg_tpi |
     |     116 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 22554.48  |  24.61613  |  916.2479  |
     +-------------------------------------+

     +-------------------------------------+
411. | product | survquar | news | reg_tpi |
     |     116 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  6805.51  |   12.7653  |  533.1255  |
     +-------------------------------------+

     +-------------------------------------+
412. | product | survquar | news | reg_tpi |
     |     116 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  4571.43  |   5.77854  |  791.1048  |
     +-------------------------------------+

     +-------------------------------------+
413. | product | survquar | news | reg_tpi |
     |     117 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 234255.5  |  60.18694  |  3892.131  |
     +-------------------------------------+

     +-------------------------------------+
414. | product | survquar | news | reg_tpi |
     |     117 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 210976.1  |  56.27686  |  3748.896  |
     +-------------------------------------+

     +-------------------------------------+
415. | product | survquar | news | reg_tpi |
     |     117 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 49763.81  |  12.39388  |  4015.191  |
     +-------------------------------------+

     +-------------------------------------+
416. | product | survquar | news | reg_tpi |
     |     117 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 85618.86  |  22.50526  |  3804.393  |
     +-------------------------------------+

     +-------------------------------------+
417. | product | survquar | news | reg_tpi |
     |     119 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 132111.7  |  24.17783  |  5464.167  |
     +-------------------------------------+

     +-------------------------------------+
418. | product | survquar | news | reg_tpi |
     |     119 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 62900.37  |  12.63612  |  4977.822  |
     +-------------------------------------+

     +-------------------------------------+
419. | product | survquar | news | reg_tpi |
     |     119 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 17135.04  |  3.536517  |  4845.175  |
     +-------------------------------------+

     +-------------------------------------+
420. | product | survquar | news | reg_tpi |
     |     119 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  60467.7  |  13.06854  |  4626.967  |
     +-------------------------------------+

     +-------------------------------------+
421. | product | survquar | news | reg_tpi |
     |     121 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 41738.85  |   10.8535  |  3845.658  |
     +-------------------------------------+

     +-------------------------------------+
422. | product | survquar | news | reg_tpi |
     |     121 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 46482.51  |  12.03831  |  3861.215  |
     +-------------------------------------+

     +-------------------------------------+
423. | product | survquar | news | reg_tpi |
     |     121 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 24895.02  |  6.827045  |  3646.529  |
     +-------------------------------------+

     +-------------------------------------+
424. | product | survquar | news | reg_tpi |
     |     121 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  42317.1  |  11.00061  |  3846.797  |
     +-------------------------------------+

     +-------------------------------------+
425. | product | survquar | news | reg_tpi |
     |     122 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  26699.9  |  15.56788  |  1715.063  |
     +-------------------------------------+

     +-------------------------------------+
426. | product | survquar | news | reg_tpi |
     |     122 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  56613.3  |  73.75848  |  767.5496  |
     +-------------------------------------+

     +-------------------------------------+
427. | product | survquar | news | reg_tpi |
     |     122 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 20093.35  |   77.6041  |  258.9212  |
     +-------------------------------------+

     +-------------------------------------+
428. | product | survquar | news | reg_tpi |
     |     122 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  27498.7  |   25.4713  |  1079.595  |
     +-------------------------------------+

     +-------------------------------------+
429. | product | survquar | news | reg_tpi |
     |     123 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 38233.82  |  35.12215  |  1088.596  |
     +-------------------------------------+

     +-------------------------------------+
430. | product | survquar | news | reg_tpi |
     |     123 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 50912.63  |  198.6889  |  256.2429  |
     +-------------------------------------+

     +-------------------------------------+
431. | product | survquar | news | reg_tpi |
     |     123 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 12227.24  |  53.36464  |  229.1262  |
     +-------------------------------------+

     +-------------------------------------+
432. | product | survquar | news | reg_tpi |
     |     123 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 55207.01  |  226.1123  |  244.1574  |
     +-------------------------------------+

     +-------------------------------------+
433. | product | survquar | news | reg_tpi |
     |     125 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 130840.5  |  1798.963  |  72.73106  |
     +-------------------------------------+

     +-------------------------------------+
434. | product | survquar | news | reg_tpi |
     |     125 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |   163777  |  1773.586  |  92.34233  |
     +-------------------------------------+

     +-------------------------------------+
435. | product | survquar | news | reg_tpi |
     |     125 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 58478.13  |  768.4346  |  76.10033  |
     +-------------------------------------+

     +-------------------------------------+
436. | product | survquar | news | reg_tpi |
     |     125 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 112844.5  |  1274.624  |  88.53163  |
     +-------------------------------------+

     +-------------------------------------+
437. | product | survquar | news | reg_tpi |
     |     127 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 29171.46  |  24.93191  |  1170.045  |
     +-------------------------------------+

     +-------------------------------------+
438. | product | survquar | news | reg_tpi |
     |     127 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 33290.21  |  20.63014  |  1613.668  |
     +-------------------------------------+

     +-------------------------------------+
439. | product | survquar | news | reg_tpi |
     |     127 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 20825.27  |  18.11654  |  1149.517  |
     +-------------------------------------+

     +-------------------------------------+
440. | product | survquar | news | reg_tpi |
     |     127 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 28236.01  |   16.7201  |  1688.747  |
     +-------------------------------------+

     +-------------------------------------+
441. | product | survquar | news | reg_tpi |
     |     132 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 129777.8  |  479.9669  |  270.3892  |
     +-------------------------------------+

     +-------------------------------------+
442. | product | survquar | news | reg_tpi |
     |     132 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 7054.213  |  29.07483  |  242.6227  |
     +-------------------------------------+

     +-------------------------------------+
443. | product | survquar | news | reg_tpi |
     |     132 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 27554.52  |  76.46606  |  360.3498  |
     +-------------------------------------+

     +-------------------------------------+
444. | product | survquar | news | reg_tpi |
     |     132 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 3228.541  |  6.953988  |  464.2719  |
     +-------------------------------------+

     +-------------------------------------+
445. | product | survquar | news | reg_tpi |
     |     134 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 39625.29  |  118.4858  |  334.4306  |
     +-------------------------------------+

     +-------------------------------------+
446. | product | survquar | news | reg_tpi |
     |     134 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 16294.92  |  44.08614  |  369.6154  |
     +-------------------------------------+

     +-------------------------------------+
447. | product | survquar | news | reg_tpi |
     |     134 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 14656.99  |  34.52512  |  424.5313  |
     +-------------------------------------+

     +-------------------------------------+
448. | product | survquar | news | reg_tpi |
     |     134 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 64578.79  |  223.1512  |  289.3947  |
     +-------------------------------------+

     +-------------------------------------+
449. | product | survquar | news | reg_tpi |
     |     136 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 85067.58  |  114.7494  |  741.3333  |
     +-------------------------------------+

     +-------------------------------------+
450. | product | survquar | news | reg_tpi |
     |     136 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 59887.71  |  87.32884  |  685.7725  |
     +-------------------------------------+

     +-------------------------------------+
451. | product | survquar | news | reg_tpi |
     |     136 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 21924.38  |  31.89978  |  687.2893  |
     +-------------------------------------+

     +-------------------------------------+
452. | product | survquar | news | reg_tpi |
     |     136 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 43128.63  |  53.89383  |  800.2518  |
     +-------------------------------------+

     +-------------------------------------+
453. | product | survquar | news | reg_tpi |
     |     138 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 36797.67  |  103.3901  |  355.9111  |
     +-------------------------------------+

     +-------------------------------------+
454. | product | survquar | news | reg_tpi |
     |     138 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 66269.23  |  217.6548  |  304.4694  |
     +-------------------------------------+

     +-------------------------------------+
455. | product | survquar | news | reg_tpi |
     |     138 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 15880.55  |  55.12859  |  288.0638  |
     +-------------------------------------+

     +-------------------------------------+
456. | product | survquar | news | reg_tpi |
     |     138 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 26687.62  |  93.42125  |  285.6697  |
     +-------------------------------------+

     +-------------------------------------+
457. | product | survquar | news | reg_tpi |
     |     140 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 239131.5  |   321.812  |  743.0782  |
     +-------------------------------------+

     +-------------------------------------+
458. | product | survquar | news | reg_tpi |
     |     140 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 102046.1  |  82.79775  |  1232.475  |
     +-------------------------------------+

     +-------------------------------------+
459. | product | survquar | news | reg_tpi |
     |     140 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 90682.35  |  102.8637  |   881.578  |
     +-------------------------------------+

     +-------------------------------------+
460. | product | survquar | news | reg_tpi |
     |     140 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 14782.63  |  16.84725  |  877.4501  |
     +-------------------------------------+

     +-------------------------------------+
461. | product | survquar | news | reg_tpi |
     |     141 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 282870.5  |  199.2808  |  1419.457  |
     +-------------------------------------+

     +-------------------------------------+
462. | product | survquar | news | reg_tpi |
     |     141 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 368970.1  |  238.9932  |  1543.852  |
     +-------------------------------------+

     +-------------------------------------+
463. | product | survquar | news | reg_tpi |
     |     141 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 147304.6  |  116.1563  |  1268.158  |
     +-------------------------------------+

     +-------------------------------------+
464. | product | survquar | news | reg_tpi |
     |     141 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 165064.2  |  112.4359  |  1468.074  |
     +-------------------------------------+

     +-------------------------------------+
465. | product | survquar | news | reg_tpi |
     |     144 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 45217.27  |  21.91822  |  2062.999  |
     +-------------------------------------+

     +-------------------------------------+
466. | product | survquar | news | reg_tpi |
     |     144 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 120485.3  |   59.5132  |  2024.514  |
     +-------------------------------------+

     +-------------------------------------+
467. | product | survquar | news | reg_tpi |
     |     144 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 49337.66  |  26.24553  |   1879.85  |
     +-------------------------------------+

     +-------------------------------------+
468. | product | survquar | news | reg_tpi |
     |     144 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  39266.8  |  19.33405  |  2030.966  |
     +-------------------------------------+

     +-------------------------------------+
469. | product | survquar | news | reg_tpi |
     |     147 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 115666.6  |  53.27449  |  2171.144  |
     +-------------------------------------+

     +-------------------------------------+
470. | product | survquar | news | reg_tpi |
     |     147 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 91657.35  |  39.83657  |  2300.834  |
     +-------------------------------------+

     +-------------------------------------+
471. | product | survquar | news | reg_tpi |
     |     147 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 32984.11  |   13.7591  |  2397.257  |
     +-------------------------------------+

     +-------------------------------------+
472. | product | survquar | news | reg_tpi |
     |     147 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 43775.56  |  18.40739  |  2378.151  |
     +-------------------------------------+

     +-------------------------------------+
473. | product | survquar | news | reg_tpi |
     |     153 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 40516.21  |   34.8496  |  1162.602  |
     +-------------------------------------+

     +-------------------------------------+
474. | product | survquar | news | reg_tpi |
     |     153 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 67954.04  |  53.72313  |  1264.893  |
     +-------------------------------------+

     +-------------------------------------+
475. | product | survquar | news | reg_tpi |
     |     153 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 34123.73  |  32.29235  |  1056.712  |
     +-------------------------------------+

     +-------------------------------------+
476. | product | survquar | news | reg_tpi |
     |     153 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     |  24482.3  |  21.57769  |  1134.612  |
     +-------------------------------------+

     +-------------------------------------+
477. | product | survquar | news | reg_tpi |
     |     157 |        1 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 43491.31  |        52  |  836.3714  |
     +-------------------------------------+

     +-------------------------------------+
478. | product | survquar | news | reg_tpi |
     |     157 |        2 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 54376.38  |        39  |  1394.266  |
     +-------------------------------------+

     +-------------------------------------+
479. | product | survquar | news | reg_tpi |
     |     157 |        3 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 7924.377  |        16  |  495.2735  |
     +-------------------------------------+

     +-------------------------------------+
480. | product | survquar | news | reg_tpi |
     |     157 |        4 |    4 |       4 |
     |-------------------------------------|
     | valued~t  |  quanti~t  |  ppkg_t~m  |
     | 17660.75  |        28  |  630.7412  |
     +-------------------------------------+

.                         tempfile uvq2;

.                         keep reg_tpi product surv
> quar ppkg_trim;

.                 save `uvq2', replace;
(note: file /tmp/St02502.00000k not found)
file /tmp/St02502.00000k saved

.                                 use `uvq' ;

.                         merge reg_tpi product sur
> vquar using `uvq2';
(label REG_TPI already defined)
(label lsurvquar already defined)

.                         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        480      100.00      100.00
------------+-----------------------------------
      Total |        480      100.00

.                         drop _merge;

.                 save `uvq', replace;
file /tmp/St02502.00000i saved

.                 save "$path/work/tpi_unit_val_qua
> rterly.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/tpi_unit
> _val_quarterly.dta saved

.         restore;

. *************************************************
> *************************;
. * Now calculate the weights for the temporal pric
> e index. The weights
> * will be based on the bottom 50% of the national
>  nominal consumption
> * per capita (see below). We let the weights vary
>  by strata (3 regions X rural/urban).
> *
> * First, make a small file that has the total nom
> inal HH daily consumption,
> * to use as our denominator. We cannot simply use
>  the `bottom_tpi' file that
> * was created earlier because we will need some o
> ther variables from
> * the cons_cat.dta file.
> *************************************************
> *************************;
. use "$path/work/conpc.dta", clear;

. keep hhid cons_hh_nom;

. *use "$path/in/cons_cat.dta", clear ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;

.         merge hhid using "$path/work/hhdata.dta";

.           tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         collapse (mean) cons_hh_nom hhsize strata
>  hhweight rural news survquar reg_tpi,
>                 by(hhid);

.         lab var cons_hh_nom "Nominal daily HH con
> sumption";

.         rename hhsize   cc_hhs;

.         rename strata   cc_reg;

.         rename hhweight cc_hhw;

.         rename rural    cc_rur;

.         rename news     cc_news;

.         rename survquar cc_qua;

.         rename reg_tpi  cc_reg_tpi;

.         sort hhid;

.         tempfile thhcons;

. save `thhcons', replace;
(note: file /tmp/St02502.00000l not found)
file /tmp/St02502.00000l saved

. *************************************************
> *************************;
. * Merge the file with consumption on the food pro
> ducts with HH consumption file,
> * then use "fillin" to take care of cases where a
>  household did not
> * consume all n_tpi commodities. Note that we nee
> d to do the merge
> * first because there are some households that ar
> e not in `acredd' at
> * all, because they did not consume *any* of the 
> n_tpi items. Then replace
> * missing values in the "filled in" observations 
> with the relevant values 
> * for that household.
> *************************************************
> *************************;
. use `acredd';

.         cap drop _merge;

.         drop if product==.;
(128 observations deleted)

.         merge hhid using `thhcons';
variable hhid does not uniquely identify
    observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        128        0.23        0.23
          3 |     54,646       99.77      100.00
------------+-----------------------------------
      Total |     54,774      100.00

.         for var valued_tot quantityd_tot : replac
> e X=0 if _merge==2;

->  replace valued_tot=0 if _merge==2
(128 real changes made)

->  replace quantityd_tot=0 if _merge==2
(128 real changes made)

.                 /*
>         for var valued_ac quantityd_ac valued_re 
> quantityd_re valued_dd quantityd_dd 
>                 valued_tot quantityd_tot : replac
> e X=0 if _merge==2;
>                                 */
> 
>         replace hhsize  =cc_hhs     if _merge==2;
(128 real changes made)

.         replace strata  =cc_reg     if _merge==2;
(128 real changes made)

.         replace hhweight=cc_hhw     if _merge==2;
(128 real changes made)

.         replace rural   =cc_rur     if _merge==2;
(128 real changes made)

.         replace news    =cc_news        if _merge
> ==2;
(128 real changes made)

.         replace survquar=cc_qua     if _merge==2;
(128 real changes made)

.         replace reg_tpi =cc_reg_tpi     if _merge
> ==2;
(128 real changes made)

.         drop _merge cc_* ;

.                 fillin hhid product;

.         replace valued_tot=0 if _fillin;
(155251 real changes made)

.                 for var quantityd_tot 
>                 strata rural hhweight hhsize surv
> quar survmon news reg_tpi cons_hh_nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;

->  egen tmp=mean(quantityd_tot), by(hhid)

->  replace quantityd_tot=tmp if _fillin
(155251 real changes made)

->  drop tmp

->  egen tmp=mean(strata), by(hhid)

->  replace strata=tmp if _fillin
(155251 real changes made)

->  drop tmp

->  egen tmp=mean(rural), by(hhid)

->  replace rural=tmp if _fillin
(155251 real changes made)

->  drop tmp

->  egen tmp=mean(hhweight), by(hhid)

->  replace hhweight=tmp if _fillin
(155251 real changes made)

->  drop tmp

->  egen tmp=mean(hhsize), by(hhid)

->  replace hhsize=tmp if _fillin
(155251 real changes made)

->  drop tmp

->  egen tmp=mean(survquar), by(hhid)

->  replace survquar=tmp if _fillin
(155251 real changes made)

->  drop tmp

->  egen tmp=mean(survmon), by(hhid)
(3968 missing values generated)

->  replace survmon=tmp if _fillin
(151411 real changes made)

->  drop tmp

->  egen tmp=mean(news), by(hhid)

->  replace news=tmp if _fillin
(155251 real changes made)

->  drop tmp

->  egen tmp=mean(reg_tpi), by(hhid)

->  replace reg_tpi=tmp if _fillin
(155251 real changes made)

->  drop tmp

->  egen tmp=mean(cons_hh_nom), by(hhid)

->  replace cons_hh_nom=tmp if _fillin
(155251 real changes made)

->  drop tmp

.                                 /*
>         for var valued_ac quantityd_ac valued_re 
> quantityd_re valued_dd quantityd_dd 
>                 quantityd_tot 
>                 strata rural hhweight hhsize surv
> quar survmon news reg_tpi cons_hh_nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;
>                                 */
> 
> *************************************************
> *************************;
. * Now calculate the shares, and then the mean sha
> res in each strata, 
> * using hhweight*hhsize weighting. 
> * Note that we are not doing quantity weighting n
> ow for the shares.
> *************************************************
> *************************;
.         gen share = valued_tot/cons_hh_nom ;

.         gen popwt = hhsize*hhweight;

.         lab var share "HH share in total consumpt
> ion";

.         lab var popwt "Population weight: hhsize*
> hhweight";

. *************************************************
> *************************;
. * Select the bottom 50% (weighted) of the distrib
> ution of nominal per 
> * capita consumption.
> *************************************************
> *************************;
.         gen cpc=cons_hh_nom/hhsize;

.         sum cpc [aw=hhweight] , detail;

                             cpc
---------------------------------------------------
> ----------
      Percentiles      Smallest
 1%     341.2898       78.55931
 5%     695.3857       78.55931
10%     897.8539       78.55932       Obs          
>     210025
25%     1376.486       78.55932       Sum of Wgt.  
>  952113106

50%     2259.297                      Mean         
>   10464.25
                        Largest       Std. Dev.    
>   451461.1
75%     4217.707       8.12e+07
90%     9842.668       8.12e+07       Variance     
>   2.04e+11
95%     19766.71       8.12e+07       Skewness     
>   177.7597
99%     111655.2       8.12e+07       Kurtosis     
>   31946.76

.         global medcpc=r(p$tpi_bottom);

. * MAH ;
.  sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |    210025    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |    203250    123.1333    15.43319   
>      102        157
  valued_tot |    210025    137.5085    444.6322   
>        0      18500
quantityd_~t |    210025    1.199512    2.389503   
>        0   364.2857
      strata |    210025    5.551734    2.873466   
>        1         10
-------------+-------------------------------------
> -------------------
      hhsize |    210025        4.96    2.758373   
>        1         24
    hhweight |    210025    4533.332    4303.934   
>       54      92511
    survquar |    210025    2.499336    1.143942   
>        1          4
     survmon |    206057    6.715962     3.34915   
>        1         12
       rural |    210025    .8199262    .3842498   
>        0          1
-------------+-------------------------------------
> -------------------
        news |    210025    2.416827    1.118309   
>        1          4
    spdomain |     54646    3.158676    1.388666   
>        1          5
     reg_tpi |    210025    2.416827    1.118309   
>        1          4
 cons_hh_nom |    210025    97487.28     4938143   
> 232.1918   4.06e+08
     _fillin |    210025    .7392025    .4390707   
>        0          1
-------------+-------------------------------------
> -------------------
       share |    210025    .0105519    .0345066   
>        0   .7896302
       popwt |    210025    29614.26    44552.33   
>       62     832599
         cpc |    210025    20773.97    987325.8   
> 78.55931   8.12e+07

.  codebook hhid;

---------------------------------------------------
hhid                                 Household Code
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6775                     m
> issing .:  0/210025

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

.         keep if cpc<=$medcpc;
(0 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |    210025    2.51e+09    1.13e+09   
> 1.01e+09   4.19e+09
     product |    203250    123.1333    15.43319   
>      102        157
  valued_tot |    210025    137.5085    444.6322   
>        0      18500
quantityd_~t |    210025    1.199512    2.389503   
>        0   364.2857
      strata |    210025    5.551734    2.873466   
>        1         10
-------------+-------------------------------------
> -------------------
      hhsize |    210025        4.96    2.758373   
>        1         24
    hhweight |    210025    4533.332    4303.934   
>       54      92511
    survquar |    210025    2.499336    1.143942   
>        1          4
     survmon |    206057    6.715962     3.34915   
>        1         12
       rural |    210025    .8199262    .3842498   
>        0          1
-------------+-------------------------------------
> -------------------
        news |    210025    2.416827    1.118309   
>        1          4
    spdomain |     54646    3.158676    1.388666   
>        1          5
     reg_tpi |    210025    2.416827    1.118309   
>        1          4
 cons_hh_nom |    210025    97487.28     4938143   
> 232.1918   4.06e+08
     _fillin |    210025    .7392025    .4390707   
>        0          1
-------------+-------------------------------------
> -------------------
       share |    210025    .0105519    .0345066   
>        0   .7896302
       popwt |    210025    29614.26    44552.33   
>       62     832599
         cpc |    210025    20773.97    987325.8   
> 78.55931   8.12e+07

.                 collapse (mean) share (median) me
> dshare=share [aw=popwt] , 
>                         by(reg_tpi product);

.                 egen sumsh=sum(share) , by(reg_tp
> i);

.                 replace share=share/sumsh;
(120 real changes made)

.                 drop sumsh;

.                 egen sumsh=sum(medshare) , by(reg
> _tpi);

.                 replace medshare=medshare/sumsh;
(24 real changes made)

.                 drop sumsh;

.                 lab var share "Reg 6: Mean HH sha
> re of total consumption";

.                 lab var medshare "Reg 6: Median H
> H share of total consumption";

.                 sort reg_tpi product;

.                 save "$path/work/tpi_reg_tpi_shar
> e.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/tpi_reg_
> tpi_share.dta saved

.                 tempfile tempwt6;

.                 save `tempwt6', replace;
(note: file /tmp/St02502.00000m not found)
file /tmp/St02502.00000m saved

. use `uvq', clear;

.         sort reg_tpi product;

. save , replace;
file /tmp/St02502.00000i saved

. use `tempwt6';

.         merge reg_tpi product using `uvq';
variables reg_tpi product do not uniquely
    identify observations in /tmp/St02502.00000i
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          4        0.83        0.83
          3 |        480       99.17      100.00
------------+-----------------------------------
      Total |        484      100.00

.         gen tpi1     =ppkg     *share;
(4 missing values generated)

.         gen tpi1_trim=ppkg_trim*share;
(4 missing values generated)

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     product |       480    123.1333    15.44925   
>      102        157
     reg_tpi |       484         2.5    1.119191   
>        1          4
       share |       484    .0330579    .0329701   
>        0    .149083
    medshare |       484    .0330579    .0963407   
>        0   .6723011
    survquar |       480         2.5      1.1192   
>        1          4
-------------+-------------------------------------
> -------------------
        news |       480         2.5      1.1192   
>        1          4
  valued_tot |       480    68916.05    68727.79   
> 421.7399   425672.9
quantityd_~t |       480    154.3016    307.5828   
> .6235518   3353.071
        ppkg |       480    1295.331    1249.919   
> 63.26157    6280.27
   ppkg_trim |       480     1203.61     1231.14   
> 56.65459   6596.031
-------------+-------------------------------------
> -------------------
      _merge |       484    2.983471    .1812526   
>        1          3
        tpi1 |       480    38.95141    49.95466   
> .1747039    264.609
   tpi1_trim |       480      37.099    49.84823   
> .1012088   299.6517

. keep if survquar!=.;
(4 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     product |       480    123.1333    15.44925   
>      102        157
     reg_tpi |       480         2.5      1.1192   
>        1          4
       share |       480    .0333333    .0329682   
> .0007248    .149083
    medshare |       480    .0333333    .0966945   
>        0   .6723011
    survquar |       480         2.5      1.1192   
>        1          4
-------------+-------------------------------------
> -------------------
        news |       480         2.5      1.1192   
>        1          4
  valued_tot |       480    68916.05    68727.79   
> 421.7399   425672.9
quantityd_~t |       480    154.3016    307.5828   
> .6235518   3353.071
        ppkg |       480    1295.331    1249.919   
> 63.26157    6280.27
   ppkg_trim |       480     1203.61     1231.14   
> 56.65459   6596.031
-------------+-------------------------------------
> -------------------
      _merge |       480           3           0   
>        3          3
        tpi1 |       480    38.95141    49.95466   
> .1747039    264.609
   tpi1_trim |       480      37.099    49.84823   
> .1012088   299.6517

. list in  1/3;

     +-----------------------------------------+
  1. | product | reg_tpi |    share | medshare |
     |     102 | central | .0206776 |        0 |
     |-------------------+----------+----------|
     |   survquar | news | valued~t | quanti~t |
     | May-Jul 09 |    1 | 87863.27 |  265.855 |
     |------------------------------+----------|
     |     ppkg | ppkg_t~m | _merge |     tpi1 |
     | 330.4932 | 327.3867 |      3 | 6.833801 |
     |-----------------------------------------|
     |                tpi1_t~m                 |
     |                6.769566                 |
     +-----------------------------------------+

     +-----------------------------------------+
  2. | product | reg_tpi |    share | medshare |
     |     103 | central | .0480068 |        0 |
     |-------------------+----------+----------|
     |   survquar | news | valued~t | quanti~t |
     | May-Jul 09 |    1 | 130912.3 | 425.6857 |
     |------------------------------+----------|
     |     ppkg | ppkg_t~m | _merge |     tpi1 |
     | 307.5327 | 305.1313 |      3 | 14.76367 |
     |-----------------------------------------|
     |                tpi1_t~m                 |
     |                14.64839                 |
     +-----------------------------------------+

     +-----------------------------------------+
  3. | product | reg_tpi |    share | medshare |
     |     104 | central | .0524175 |        0 |
     |-------------------+----------+----------|
     |   survquar | news | valued~t | quanti~t |
     | May-Jul 09 |    1 | 163908.7 | 266.3135 |
     |------------------------------+----------|
     |     ppkg | ppkg_t~m | _merge |     tpi1 |
     | 615.4728 | 586.9709 |      3 | 32.26154 |
     |-----------------------------------------|
     |                tpi1_t~m                 |
     |                30.76754                 |
     +-----------------------------------------+

. list in -3/-1;

     +------------------------------------------+
478. | product | reg_tpi |    share | medshare  |
     |     157 | western | .0178493 |        0  |
     |------------------------------------------|
     |    survquar | news | valued~t | quanti~t |
     | Sept-Oct 09 |    4 | 73901.08 |       43 |
     |------------------------------------------|
     |     ppkg | ppkg_t~m | _merge |     tpi1  |
     |  1718.63 | 1394.266 |      3 | 30.67636  |
     |------------------------------------------|
     |                 tpi1_t~m                 |
     |                 24.88669                 |
     +------------------------------------------+

     +------------------------------------------+
479. | product | reg_tpi |    share | medshare  |
     |     157 | western | .0178493 |        0  |
     |------------------------------------------|
     |    survquar | news | valued~t | quanti~t |
     | Nov09-Jan10 |    4 | 7924.377 |       16 |
     |------------------------------------------|
     |     ppkg | ppkg_t~m | _merge |     tpi1  |
     | 495.2735 | 495.2735 |      3 | 8.840291  |
     |------------------------------------------|
     |                 tpi1_t~m                 |
     |                 8.840291                 |
     +------------------------------------------+

     +------------------------------------------+
480. | product | reg_tpi |    share | medshare  |
     |     157 | western | .0178493 |        0  |
     |------------------------------------------|
     |    survquar | news | valued~t | quanti~t |
     |  Feb-Apr 10 |    4 | 75378.66 |       29 |
     |------------------------------------------|
     |     ppkg | ppkg_t~m | _merge |     tpi1  |
     | 2599.264 | 630.7412 |      3 | 46.39508  |
     |------------------------------------------|
     |                 tpi1_t~m                 |
     |                  11.2583                 |
     +------------------------------------------+

.         *****************************************
> *********************************;
. * Find TPI level and indexes for non-trimmed and 
> trimmed prices
> *************************************************
> *************************;
. * Not trimmed ;
.         collapse (sum) tpi1 tpi1_trim  , by(reg_t
> pi survquar);

.                 for num 1/$n_tpi :
>                         sum tpi1 if reg_tpi==X & 
> survquar==2 , meanonly \
>                         sum tpi1 if reg_tpi==X & 
> survquar==4 , meanonly \
>                         global baseX=r(mean);

->  sum tpi1 if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1 if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)

->  sum tpi1 if reg_tpi==3 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==3 & survquar==4 , meanonly

->  global base3=r(mean)

->  sum tpi1 if reg_tpi==4 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==4 & survquar==4 , meanonly

->  global base4=r(mean)

.                 lab var tpi1 "Temporal price inde
> x before normalization";

.                                 foreach v of numl
> ist 1/$n_tpi { ;
  2.                                         if `v'
> ==1 { ;
  3.                                               
>   gen tpi=tpi1/${base`v'} if reg_tpi==`v' ;
  4.                                         } ;
  5.                                         if `v'
> >1 { ;
  6.                                               
>   replace tpi=tpi1/${base`v'} if reg_tpi==`v' ;
  7.                                         } ;
  8.                                 } ;
(12 missing values generated)
(4 real changes made)
(4 real changes made)
(4 real changes made)

.                                                  
>                                                *g
> en     tpi=tpi1/$base1 if reg_tpi==1;
.                 *replace tpi=tpi1/$base2 if reg_t
> pi==2;
.                 *replace tpi=tpi1/$base3 if reg_t
> pi==3;
.                 *replace tpi=tpi1/$base4 if reg_t
> pi==4;
.                 *replace tpi=tpi1/$base5 if reg_t
> pi==5;
.                 *replace tpi=tpi1/$base6 if reg_t
> pi==6;
.                                                  
>                                lab var tpi "Tempo
> ral price index (Q4=1)";

. * Trimmed ;
.                 for num 1/$n_tpi :
>                         sum tpi1_trim if reg_tpi=
> =X & survquar==2 , meanonly \
>                         sum tpi1_trim if reg_tpi=
> =X & survquar==4 , meanonly \
>                         global baseX=r(mean);

->  sum tpi1_trim if reg_tpi==1 & survquar==2 , mea
> nonly

->  sum tpi1_trim if reg_tpi==1 & survquar==4 , mea
> nonly

->  global base1=r(mean)

->  sum tpi1_trim if reg_tpi==2 & survquar==2 , mea
> nonly

->  sum tpi1_trim if reg_tpi==2 & survquar==4 , mea
> nonly

->  global base2=r(mean)

->  sum tpi1_trim if reg_tpi==3 & survquar==2 , mea
> nonly

->  sum tpi1_trim if reg_tpi==3 & survquar==4 , mea
> nonly

->  global base3=r(mean)

->  sum tpi1_trim if reg_tpi==4 & survquar==2 , mea
> nonly

->  sum tpi1_trim if reg_tpi==4 & survquar==4 , mea
> nonly

->  global base4=r(mean)

.                 lab var tpi1_trim "Six regions: T
> RIMMED Temporal price index before normalization"
> ;

.                                 foreach v of numl
> ist 1/$n_tpi { ;
  2.                                         if `v'
> ==1 { ;
  3.                                               
>   gen tpi_trim=tpi1_trim/${base`v'} if reg_tpi==`
> v' ;
  4.                                         } ;
  5.                                         if `v'
> >1 { ;
  6.                                               
>   replace tpi_trim=tpi1_trim/${base`v'} if reg_tp
> i==`v' ;
  7.                                         } ;
  8.                                 } ;
(12 missing values generated)
(4 real changes made)
(4 real changes made)
(4 real changes made)

.                                                 l
> ab var tpi_trim "TRIMMED Temporal price index (Q4
> =1)";

.                 sort reg_tpi survquar;

.             drop if reg_tpi<1 | reg_tpi>$n_tpi;
(0 observations deleted)

. gen tpi_diff = tpi - tpi_trim;

. lab var tpi_diff "TPI difference btw trimmed/untr
> immed";

. twoway (connected tpi_trim survquar),yline(1) by(
> , title("TPI: Trimmed"))
> by(reg_tpi) sav("$path/work/reg_tpi-tpi_trim", re
> place);
(file /home/bjvca/data/data/GAP/Haruna/work/reg_tpi
> -tpi_trim.gph saved)

. graph export "$path/work/reg_tpi-tpi_trim.tif", r
> eplace;
(file /home/bjvca/data/data/GAP/Haruna/work/reg_tpi
> -tpi_trim.tif written in TIFF format)

. list reg_tpi survquar tpi tpi_trim tpi_diff;

     +-----------------------------------+
  1. |  reg_tpi |    survquar |      tpi |
     |  central |  May-Jul 09 | .9804398 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    .9592169    |     .0212229     |
     +-----------------------------------+

     +-----------------------------------+
  2. |  reg_tpi |    survquar |      tpi |
     |  central | Sept-Oct 09 | .9933354 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    1.016097    |    -.0227617     |
     +-----------------------------------+

     +-----------------------------------+
  3. |  reg_tpi |    survquar |      tpi |
     |  central | Nov09-Jan10 | 1.023367 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    1.000702    |     .0226651     |
     +-----------------------------------+

     +-----------------------------------+
  4. |  reg_tpi |    survquar |      tpi |
     |  central |  Feb-Apr 10 |        1 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |           1    |            0     |
     +-----------------------------------+

     +-----------------------------------+
  5. |  reg_tpi |    survquar |      tpi |
     |  eastern |  May-Jul 09 | .9812485 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    1.008404    |    -.0271556     |
     +-----------------------------------+

     +-----------------------------------+
  6. |  reg_tpi |    survquar |      tpi |
     |  eastern | Sept-Oct 09 | .9906502 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |     1.01455    |    -.0238995     |
     +-----------------------------------+

     +-----------------------------------+
  7. |  reg_tpi |    survquar |      tpi |
     |  eastern | Nov09-Jan10 | 1.010648 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    1.045658    |      -.03501     |
     +-----------------------------------+

     +-----------------------------------+
  8. |  reg_tpi |    survquar |      tpi |
     |  eastern |  Feb-Apr 10 |        1 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |           1    |            0     |
     +-----------------------------------+

     +-----------------------------------+
  9. |  reg_tpi |    survquar |      tpi |
     | northern |  May-Jul 09 |  .985511 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    1.054405    |    -.0688937     |
     +-----------------------------------+

     +-----------------------------------+
 10. |  reg_tpi |    survquar |      tpi |
     | northern | Sept-Oct 09 |   1.0463 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    .9905822    |     .0557178     |
     +-----------------------------------+

     +-----------------------------------+
 11. |  reg_tpi |    survquar |      tpi |
     | northern | Nov09-Jan10 | 1.002047 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |     .974431    |     .0276164     |
     +-----------------------------------+

     +-----------------------------------+
 12. |  reg_tpi |    survquar |      tpi |
     | northern |  Feb-Apr 10 |        1 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |           1    |            0     |
     +-----------------------------------+

     +-----------------------------------+
 13. |  reg_tpi |    survquar |      tpi |
     |  western |  May-Jul 09 | .9481067 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    1.052164    |    -.1040569     |
     +-----------------------------------+

     +-----------------------------------+
 14. |  reg_tpi |    survquar |      tpi |
     |  western | Sept-Oct 09 | 1.052062 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    1.100966    |    -.0489043     |
     +-----------------------------------+

     +-----------------------------------+
 15. |  reg_tpi |    survquar |      tpi |
     |  western | Nov09-Jan10 |  .932542 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |    .9871649    |    -.0546228     |
     +-----------------------------------+

     +-----------------------------------+
 16. |  reg_tpi |    survquar |      tpi |
     |  western |  Feb-Apr 10 |        1 |
     |-----------------------------------|
     |    tpi_trim    |     tpi_diff     |
     |           1    |            0     |
     +-----------------------------------+

.                 sort reg_tpi survquar;

. keep reg_tpi survquar tpi_trim;

. save "$path/work/temp_index_reg_tpi.dta", replace
> ;
file /home/bjvca/data/data/GAP/Haruna/work/temp_ind
> ex_reg_tpi.dta saved

.                        **************************
> ************************************************
> * 090_temp_index.do     (end)
> *************************************************
> *************************;
. cap log close;

. 
end of do-file

. do "$path/new/100_food_basket_flex.do"/* Flexible
>  food basket */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/100_food_basket_flex.log", r
> eplace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 00_food_basket_flex.log
  log type:  text
 opened on:  20 May 2013, 12:16:27

. clear

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 100_food_basket_flex.do     (start)
> *
> * This file is to get the data from the cons_cod.
> dta in work and then 
> * to create the do file with the 90% of the consu
> mption expenditures 
> * using a flexible basket of goods.
> *
> * NOTE: we actually keep goods representing 95% o
> f expenditure
> * in order to facilitate dropping of some goods (
> such as rats) where
> * quantity and nutrition information is unknown.
> *
> * We base our basket on the bottom 60 percent of 
> consumption per capita
> * (weighted by hhweight*hhsize). We use the TEMPO
> RALLY-ADJUSTED
> * NOMINAL consumption because we don't have a spa
> tial adjustment yet.
> *
> * (Then we iterate this process to arrive at a fi
> nal food bundle in later code)
> *************************************************
> *************************;
. *CA modified to bring in hhdata into bootstrap;
. /*
> This file uses:
>                 work/cons_cod.dta
>                 work/hhdata.dta
>                 work/products.dta
>                 work/consump_nom.dta
>                 work/temp_index_reg_tpi.dta
>                 work/food_cat.dta
> 
> This file creates:
>                 work/food_basket_flex.dta
>                 work/codes_food_basket_flex.dta
> */
> 
> 
> 
> *do "$path/new/010_initial.do";
. *************************************************
> *************************;
. * First, make a small temp file that has the temp
> orally adjusted 
> * nominal consumption per capita, using work/cons
> ump_nom and 
> * work/temp_index_reg_tpi.dta. Make a dummy varia
> ble indicating
> * whether they are in the bottom 60%.
> *************************************************
> *************************;
. use "$path/work/conpc.dta", clear;

. *use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work/hhdata.dta for boot
> strap;
.         sort hhid;

.         merge hhid using "$path/work/hhdata.dta";

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _m;

.         keep hhid hhweight hhsize cons_pc_nom reg
> _tpi rural survquar;

.         sort reg_tpi survquar;

.         cap drop _merge;

.         merge reg_tpi survquar using "$path/work/
> temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely
    identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         sort hhid;

.         merge hhid using "$path/work/conpc.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.                 gen food_pc_tpi  = food_pc_nom /t
> pi_trim;

.         lab var food_pc_tpi "Temp-adjusted per ca
> pita food consumption/day";

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom
> ;

.         lab var cons_pc_tpi "Temp adjusted total 
> consumption/day";

.         gen one=1;

.         tempfile contpi;

.         save `contpi', replace;
(note: file /tmp/St02502.000007 not found)
file /tmp/St02502.000007 saved

.         collapse (p$bottom) one cons_pc_tpi [aw=h
> hsize*hhweight] ;

.         rename cons_pc_tpi pctile_60;

.         tempfile 60pct;

.         sort one;

.         save `60pct', replace;
(note: file /tmp/St02502.000008 not found)
file /tmp/St02502.000008 saved

.                 use `contpi';

.                 sort one;

.                 merge one using `60pct';
variable one does not uniquely identify
    observations in the master data

.                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.                 drop _merge;

.                 drop one;

.                         gen bottom_basket=cons_pc
> _tpi< pctile_60;

.                 tab bottom_basket [aw=hhsize*hhwe
> ight];

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 4,746.2627       70.06       70.06
          1 | 2,028.7373       29.94      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.                 lab var bottom_basket "=1 if in b
> ottom 60% of PCE";

.                                 sort hhid;

. save `contpi' , replace;
file /tmp/St02502.000007 saved

. *************************************************
> *************************;
. * Next, need to keep only the food products in or
> der to calculate the 
> * food poverty line, and then calculate the food 
> expenses by code.
> *************************************************
> *************************;
. use "$path/work/cons_cod.dta";

. /*
>         sort product;
>         merge product using "$path/work/food_cat.
> dta";
>         tab _merge;
>         keep if _merge==3;
>         drop _merge;
> */
>         
>         keep if food_cat;
(0 observations deleted)

.         codebook hhid;

---------------------------------------------------
hhid                                 Household Code
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6775                     m
> issing .:  0/412045

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

.         sort hhid;

. *************************************************
> *************************;
. * Next, merge in the consumption information, and
>  select those in bottom
> * 60% of nominal distribution, after making tempo
> ral adjustment. 
> *************************************************
> *************************;
.         merge hhid using `contpi';
variable hhid does not uniquely identify
    observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00

.         keep if _merge==3;
(0 observations deleted)

.         drop _merge;

.         keep if bottom_basket==1;
(308310 observations deleted)

.      ********************************************
> ******************************;
. * Calculate food shares. Since we're only doing s
> hares here, we can
> * work with the expenditures without doing tempor
> al adjustment.
> *************************************************
> *************************;
.           gen  food_expenditure= cod_hh_nom3;

.                             *gen  food_expenditur
> e= own_valued + daily_valued + monthly_valued + e
> duc_valued;
.           egen tot_food_expen= sum (food_expen), 
> by (hhid) ;

.           count if food_expenditure==.;
    0

.           count if tot_food_expen==.;
    0

.                     gen food_share= food_expendit
> ure/tot_food_expen;
(792 missing values generated)

.           count if food_share==.;
  792

.           drop if food_share==.;
(792 observations deleted)

.           sort hhid product;

.                         tempfile food_basket_flex
> ;

. save `food_basket_flex', replace;
(note: file /tmp/St02502.000009 not found)
file /tmp/St02502.000009 saved

. *************************************************
> *******************************;
. * Now prepare to get the variable spdomain to the
>  using dataset, and then find the 
> * total shares by each product in order to select
>  the most important goods in the 
> * basket.
> *************************************************
> *******************************;
.                 preserve;

.                 use "$path/work/hhdata.dta", clea
> r;

.                         keep hhid spdomain;

.                         sort hhid;

.                         tempfile spdomain;

.                 save `spdomain' , replace;
(note: file /tmp/St02502.00000b not found)
file /tmp/St02502.00000b saved

.                 restore;

.                            collapse (mean) hhweig
> ht, by (hhid);

.            sort hhid ;

.             merge hhid using `spdomain';

.            tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |      4,866       71.82       71.82
          3 |      1,909       28.18      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.            drop if _m==2;
(4866 observations deleted)

.            drop _merge;

.             collapse (sum) hhweight , by(spdomain
> );

.            rename hhweight tothhweight;

.            tempfile tothhweight;

. save `tothhweight';
file /tmp/St02502.00000c saved

. use `food_basket_flex';

.           sort hhid;

.           merge hhid using `spdomain';
variable hhid does not uniquely identify
    observations in the master data

.           tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |      4,866        4.51        4.51
          3 |    102,943       95.49      100.00
------------+-----------------------------------
      Total |    107,809      100.00

.           sort _m;

.           drop if _m==2;
(4866 observations deleted)

.           drop _m;

.           sort spdomain;

.             merge spdomain using `tothhweight';
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

.           tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    102,943      100.00      100.00
------------+-----------------------------------
      Total |    102,943      100.00

.           drop _merge;

.             sort spdomain product;

.             gen f_share_w=(food_share*hhweight)/t
> othhweight;

.                                                 *
> drop descript;
.                         *gen descript = 0;
.             collapse (sum) f_share_w, by(spdomain
>  product descript);

.                      sort spdomain f_share_w;

.           by spdomain: gen cumshr= sum(f_share_w)
> ;

.                     count if cumshr<=.075;
  147

.           drop if cumshr<=.075;
(147 observations deleted)

.             lab var f_share_w "average food share
>  for the 13 regions";

. save "$path/work/food_basket_flex.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/food_bas
> ket_flex.dta saved

. * List first spatial region to get an idea about 
> contents;
. list product spdomain f_share_w cumshr if spdomai
> n==1;

     +------------------------------------+
  1. | product |      spdomain | f_shar~w |
     |     132 | Central rural | .0064902 |
     |------------------------------------|
     |                cumshr              |
     |              .0767658              |
     +------------------------------------+

     +------------------------------------+
  2. | product |      spdomain | f_shar~w |
     |     157 | Central rural | .0070342 |
     |------------------------------------|
     |                cumshr              |
     |                 .0838              |
     +------------------------------------+

     +------------------------------------+
  3. | product |      spdomain | f_shar~w |
     |     137 | Central rural | .0070677 |
     |------------------------------------|
     |                cumshr              |
     |              .0908678              |
     +------------------------------------+

     +------------------------------------+
  4. | product |      spdomain | f_shar~w |
     |     118 | Central rural | .0075093 |
     |------------------------------------|
     |                cumshr              |
     |              .0983771              |
     +------------------------------------+

     +------------------------------------+
  5. | product |      spdomain | f_shar~w |
     |     139 | Central rural |  .007917 |
     |------------------------------------|
     |                cumshr              |
     |               .106294              |
     +------------------------------------+

     +------------------------------------+
  6. | product |      spdomain | f_shar~w |
     |     153 | Central rural | .0085809 |
     |------------------------------------|
     |                cumshr              |
     |               .114875              |
     +------------------------------------+

     +------------------------------------+
  7. | product |      spdomain | f_shar~w |
     |     102 | Central rural | .0087598 |
     |------------------------------------|
     |                cumshr              |
     |              .1236347              |
     +------------------------------------+

     +------------------------------------+
  8. | product |      spdomain | f_shar~w |
     |     122 | Central rural | .0098372 |
     |------------------------------------|
     |                cumshr              |
     |              .1334719              |
     +------------------------------------+

     +------------------------------------+
  9. | product |      spdomain | f_shar~w |
     |     135 | Central rural | .0104738 |
     |------------------------------------|
     |                cumshr              |
     |              .1439457              |
     +------------------------------------+

     +------------------------------------+
 10. | product |      spdomain | f_shar~w |
     |     117 | Central rural | .0119606 |
     |------------------------------------|
     |                cumshr              |
     |              .1559063              |
     +------------------------------------+

     +------------------------------------+
 11. | product |      spdomain | f_shar~w |
     |     150 | Central rural | .0137989 |
     |------------------------------------|
     |                cumshr              |
     |              .1697052              |
     +------------------------------------+

     +------------------------------------+
 12. | product |      spdomain | f_shar~w |
     |     125 | Central rural | .0139139 |
     |------------------------------------|
     |                cumshr              |
     |              .1836191              |
     +------------------------------------+

     +------------------------------------+
 13. | product |      spdomain | f_shar~w |
     |     123 | Central rural | .0141114 |
     |------------------------------------|
     |                cumshr              |
     |              .1977305              |
     +------------------------------------+

     +------------------------------------+
 14. | product |      spdomain | f_shar~w |
     |     134 | Central rural | .0155849 |
     |------------------------------------|
     |                cumshr              |
     |              .2133154              |
     +------------------------------------+

     +------------------------------------+
 15. | product |      spdomain | f_shar~w |
     |     127 | Central rural | .0169561 |
     |------------------------------------|
     |                cumshr              |
     |              .2302715              |
     +------------------------------------+

     +------------------------------------+
 16. | product |      spdomain | f_shar~w |
     |     144 | Central rural | .0182187 |
     |------------------------------------|
     |                cumshr              |
     |              .2484902              |
     +------------------------------------+

     +------------------------------------+
 17. | product |      spdomain | f_shar~w |
     |     136 | Central rural | .0223372 |
     |------------------------------------|
     |                cumshr              |
     |              .2708274              |
     +------------------------------------+

     +------------------------------------+
 18. | product |      spdomain | f_shar~w |
     |     140 | Central rural |  .025018 |
     |------------------------------------|
     |                cumshr              |
     |              .2958453              |
     +------------------------------------+

     +------------------------------------+
 19. | product |      spdomain | f_shar~w |
     |     108 | Central rural | .0275436 |
     |------------------------------------|
     |                cumshr              |
     |              .3233889              |
     +------------------------------------+

     +------------------------------------+
 20. | product |      spdomain | f_shar~w |
     |     112 | Central rural | .0288198 |
     |------------------------------------|
     |                cumshr              |
     |              .3522087              |
     +------------------------------------+

     +------------------------------------+
 21. | product |      spdomain | f_shar~w |
     |     147 | Central rural | .0372514 |
     |------------------------------------|
     |                cumshr              |
     |              .3894601              |
     +------------------------------------+

     +------------------------------------+
 22. | product |      spdomain | f_shar~w |
     |     138 | Central rural |  .037537 |
     |------------------------------------|
     |                cumshr              |
     |              .4269971              |
     +------------------------------------+

     +------------------------------------+
 23. | product |      spdomain | f_shar~w |
     |     103 | Central rural | .0500118 |
     |------------------------------------|
     |                cumshr              |
     |               .477009              |
     +------------------------------------+

     +------------------------------------+
 24. | product |      spdomain | f_shar~w |
     |     141 | Central rural | .0610395 |
     |------------------------------------|
     |                cumshr              |
     |              .5380485              |
     +------------------------------------+

     +------------------------------------+
 25. | product |      spdomain | f_shar~w |
     |     104 | Central rural | .0611586 |
     |------------------------------------|
     |                cumshr              |
     |              .5992071              |
     +------------------------------------+

     +------------------------------------+
 26. | product |      spdomain | f_shar~w |
     |     107 | Central rural | .0639378 |
     |------------------------------------|
     |                cumshr              |
     |              .6631449              |
     +------------------------------------+

     +------------------------------------+
 27. | product |      spdomain | f_shar~w |
     |     113 | Central rural | .1620319 |
     |------------------------------------|
     |                cumshr              |
     |              .8251768              |
     +------------------------------------+

     +------------------------------------+
 28. | product |      spdomain | f_shar~w |
     |     105 | Central rural | .1748232 |
     |------------------------------------|
     |                cumshr              |
     |                     1              |
     +------------------------------------+

.                     gen numreg=1;

.           collapse (sum) numreg cumshr, by (produ
> ct descript);

.                           keep product descript n
> umreg;

.           display _N;
42

.                     lab var numreg "number of goo
> ds in the basket";

. /*
>           merge product using "$path/work/product
> s.dta";
>             tab _merge;
>           keep if _merge==3;
> */
>           keep product descript numreg;

.             sort product;

.                display _N;
42

.   save "$path/work/codes_food_basket_flex.dta", r
> eplace;
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex.dta saved

. *************************************************
> *************************
> * 100_food_basket_flex.do     (end)
> *************************************************
> *************************;
. cap log close;

. 
end of do-file

. do "$path/new/110_price_unit_flex.do"/* Flexible 
> basket: Prices */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/110_price_unit_flex.log", re
> place
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 10_price_unit_flex.log
  log type:  text
 opened on:  20 May 2013, 12:16:28

. clear

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> ***************************************
> * 110_price_unit_flex.do                (start)
> *
> * Purpose: This do file creates a price_unit_flex
>  database with the unit prices of the
> * goods of the flexible food basket in order to d
> etermine the poverty lines per spatial
> * domain. It uses the files work/daily.dta and wo
> rk/own.dta file and draw unit prices
> * by: sum of values and quantity
> *************************************************
> ***************************************;
. *CA modified to bring in work/hhdata.dta for boot
> strap
> *CA check for price calcs conditional on number o
> f observations;
. /*
> This file uses:
>         work/daily.dta
>         work/own.dta
>         work/hhdata.dta
>         work/consump_nom.dta
>         work/codes_food_basket_flex.dta
>         work/temp_index_reg_tpi.dta
>           new/conversions.do
> 
> This file creates:
>         work/price_unit_flex.dta
>         work/bottom_basket.dta
> */
> 
> 
> 
> 
> *do "$path/new/010_initial.do";
. *************************************************
> *************************************
> * Create sorted data set with daily and own and t
> he matched codes
> *************************************************
> *************************************;
. use "$path/work/cons_cod_trans.dta", clear;

. *use "$path/in/cons_cod_trans.dta", clear;
. *save "$path/work/cons_cod_trans.dta", replace;
. *drop if quantityd==0 ;
. keep hhid product food_cat valuez quantityz unit;

. rename valuez    value;

. rename quantityz quantity;

. drop if quantity==0 ;
(4392 observations deleted)

. *drop count;
.         sort product;

.         gen count=1;

.                 tempfile dd_acsort;

. save `dd_acsort', replace;
(note: file /tmp/St02502.000007 not found)
file /tmp/St02502.000007 saved

. /*
> use "$path/work/daily.dta";
> tempfile dd_acsort;
>         drop days;
>         sort product;
>         tempfile dd_acsort;
> save `dd_acsort', replace;
> 
> use "$path/work/own.dta";
>         keep hhid product valued quantityd unit;
>         rename valued value;
>         rename quantityd quantity;
> 
>         *CHECK THE ZEROS IN quantity FOR NOW DELE
> TE;
>         drop if quantity==0;
> 
>         append using `dd_acsort';
> 
> *CA modified to merge in work/hhdata.dta for boot
> strap;
>         sort hhid;
>       merge hhid using "$path/work/hhdata.dta";
>       tab _m;
> 
> * Drop observations if non existent in HH data se
> t;
> drop if _m!=3;
> drop _m;
> 
> 
>         sort product;
>         gen count=1;
> 
> 
> save `dd_acsort', replace;
> */
> 
> 
> *************************************************
> *************************************;
. * Merge the flexible food basket codes with the d
> aily and own data sets
> * Drop all codes not a part of the flexible food 
> basket
> *************************************************
> *************************************;
.         merge product using "$path/work/codes_foo
> d_basket_flex.dta";
variable product does not uniquely identify
    observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     13,346       15.66       15.66
          3 |     71,858       84.34      100.00
------------+-----------------------------------
      Total |     85,204      100.00

.         drop if _merge~=3;
(13346 observations deleted)

.         drop _merge;

. *************************************************
> *************************************;
. * Drop observations where product code or quantit
> y or value information is unavailable
> *************************************************
> *************************************;
.                                 codebook hhid;

---------------------------------------------------
hhid                                   household id
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6747                     m
> issing .:  0/71858

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

. *        drop if product==. | value==. | quantity
> ==.  ;
.                                 codebook hhid;

---------------------------------------------------
hhid                                   household id
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6747                     m
> issing .:  0/71858

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

. *************************************************
> *************************************;
. * Convert non-KG quantities (units and liters) to
>  kilograms;
. *************************************************
> *************************************;
. *do "$path/new/110a_conversions.do"
> 
> *************************************************
> *******************
> * There remain a few difficult to interpret obser
> vations such as liters
> * of fish and liters of pasta. These are dropped
> *************************************************
> *******************;
. *        drop if unit~=2;
. *************************************************
> *******************
> * Merge in labels for the 13 spatial domains
> *************************************************
> *******************;
.         preserve;

.                 use "$path/work/hhdata.dta", clea
> r;

.                                                  
>                        keep hhid spdomain reg_tpi
>  survquar;

.                         sort hhid;

.                         tempfile spdomainreg_tpi;

.                 save `spdomainreg_tpi', replace;
(note: file /tmp/St02502.000009 not found)
file /tmp/St02502.000009 saved

.                                 codebook hhid;

---------------------------------------------------
hhid                                   Household ID
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6775                     m
> issing .:  0/6775

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

.         restore;

.                 sort hhid;

.         merge hhid using `spdomainreg_tpi';
variable hhid does not uniquely identify
    observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         28        0.04        0.04
          3 |     71,858       99.96      100.00
------------+-----------------------------------
      Total |     71,886      100.00

.         drop _merge;

.         drop if product==.;
(28 observations deleted)

. codebook hhid;

---------------------------------------------------
hhid                                   household id
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6747                     m
> issing .:  0/71858

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

. tab spd;

     spdomain |      Freq.     Percent        Cum.
--------------+-----------------------------------
Central rural |     12,483       17.37       17.37
Central urban |      9,125       12.70       30.07
      Eastern |     16,311       22.70       52.77
     Northern |     19,026       26.48       79.25
      Western |     14,913       20.75      100.00
--------------+-----------------------------------
        Total |     71,858      100.00

. sum if spd>=3;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |     50250    3.07e+09    7.86e+08   
> 2.01e+09   4.19e+09
     product |     50250    130.2235    15.80087   
>      102        161
        unit |     50250           1           0   
>        1          1
    food_cat |     50250           1           0   
>        1          1
    quantity |     50250    .9732545    3.934012   
> .0000286   364.2857
-------------+-------------------------------------
> -------------------
       value |     50250    412.0003    637.8504   
>        0      18500
       count |     50250           1           0   
>        1          1
    descript |     50250           1           0   
>        1          1
      numreg |     50250    4.145254     1.29297   
>        1          5
    survquar |     50250    2.476876    1.137676   
>        1          4
-------------+-------------------------------------
> -------------------
    spdomain |     50250    3.972179     .787789   
>        3          5
     reg_tpi |     50250    2.972179     .787789   
>        2          4

. table spdomain, content(mean quantity count quant
> ity count hhid) row missing;

---------------------------------------------------
     spdomain |    __000002 N(quantity)     N(hhid)
--------------+------------------------------------
Central rural |    1.002078      12,483      12,483
Central urban |    .6193954       9,125       9,125
      Eastern |    .9685605      16,311      16,311
     Northern |    .8221988      19,026      19,026
      Western |    1.171105      14,913      14,913
              | 
        Total |    .9333262      71,858      71,858
---------------------------------------------------

.         drop if product==. | value==. | quantity=
> =.  ;
(0 observations deleted)

. codebook hhid;

---------------------------------------------------
hhid                                   household id
---------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.193e+09]     
>    units:  1
         unique values:  6747                     m
> issing .:  0/71858

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       
> 50%                                              
>           75%                                    
>                     90%
                           1.0e+09   1.1e+09   2.2e
> +09                                              
>       3.2e+09                                    
>                 4.1e+09

. tab spd;

     spdomain |      Freq.     Percent        Cum.
--------------+-----------------------------------
Central rural |     12,483       17.37       17.37
Central urban |      9,125       12.70       30.07
      Eastern |     16,311       22.70       52.77
     Northern |     19,026       26.48       79.25
      Western |     14,913       20.75      100.00
--------------+-----------------------------------
        Total |     71,858      100.00

. *************************************************
> *******************
> * Merge in temporal price index to convert nomina
> l value to real
> *************************************************
> *******************;
.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/
> temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely
    identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     71,858      100.00      100.00
------------+-----------------------------------
      Total |     71,858      100.00

.         drop if _merge ~= 3;
(0 observations deleted)

.         drop _merge;

.         gen value_r=value/tpi_trim;

. *************************************************
> *************************;
. * Identify relatively poor households, based on n
> ominal temporally adjusted
> * consumption per capita. Only work with these ho
> useholds for the price
> * calculations.
> *************************************************
> *************************;
.                 preserve;

.                         use "$path/work/conpc.dta
> ", clear;

. *                       use "$path/work/consump_n
> om.dta", clear;
. *CA modified to merge in work/hhdata.dta for boot
> strap;
.         sort hhid;

.       merge hhid using "$path/work/hhdata.dta";

.       tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.       drop _m;

. *CA modified to keep bswt;
.                                 keep hhid hhweigh
> t hhsize cons_pc_nom bswt ;

.                                 sort hhid;

.                                 merge hhid using 
> `spdomainreg_tpi';
(label REG_TPI already defined)
(label spdomain_original already defined)
(label lsurvquar already defined)

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.                                 drop _merge;

.                                 sort reg_tpi surv
> quar;

.                                 cap drop _merge;

.                                 merge reg_tpi sur
> vquar using "$path/work/temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely
    identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.                                 drop _merge;

.                                 sort hhid;

.                                 merge hhid using 
> "$path/work/conpc.dta";

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.                                 drop _merge;

.                                 gen food_pc_tpi  
> = food_pc_nom /tpi_trim;

.                                 lab var food_pc_t
> pi "Temp-adjusted per capita food consumption/day
> ";

.                                                  
>                * Non-food not TPI adjusted ;
.                                 gen cons_pc_tpi =
>  food_pc_tpi + nf_pc_nom;

.                                 lab var cons_pc_t
> pi "Temp adjusted total consumption/day";

.                                 gen one=1;

.                                 tempfile contpi;

.                                 save `contpi', re
> place;
(note: file /tmp/St02502.00000b not found)
file /tmp/St02502.00000b saved

.                                 collapse (p$botto
> m) one cons_pc_tpi [aw=hhsize*hhweight], by(spdom
> ain) ;

.                                 rename cons_pc_tp
> i pctile_60;

.                                 tempfile 60pct;

.                                 sort spdomain;

.                                 save `60pct', rep
> lace;
(note: file /tmp/St02502.00000c not found)
file /tmp/St02502.00000c saved

.                                 use `contpi';

.                                         sort spdo
> main;

.                                         merge spd
> omain using `60pct';
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

.                                         tab _merg
> e;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.                                         drop _mer
> ge;

.                                         drop one;

.                                         sort spdo
> main;

.                                         gen botto
> m_basket=cons_pc_tpi< pctile_60;

.                                         by spdoma
> in: tab bottom_basket [aw=hhsize*hhweight];

---------------------------------------------------
-> spdomain = Central rural

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 824.031356       70.01       70.01
          1 | 352.968644       29.99      100.00
------------+-----------------------------------
      Total |      1,177      100.00

---------------------------------------------------
-> spdomain = Central urban

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 571.588845       70.65       70.65
          1 | 237.411155       29.35      100.00
------------+-----------------------------------
      Total |        809      100.00

---------------------------------------------------
-> spdomain = Eastern

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 984.333338       70.01       70.01
          1 | 421.666662       29.99      100.00
------------+-----------------------------------
      Total |      1,406      100.00

---------------------------------------------------
-> spdomain = Northern

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 1,374.0502       70.25       70.25
          1 |581.9498358       29.75      100.00
------------+-----------------------------------
      Total |      1,956      100.00

---------------------------------------------------
-> spdomain = Western

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 999.376658       70.03       70.03
          1 | 427.623342       29.97      100.00
------------+-----------------------------------
      Total |      1,427      100.00


.                                         lab var b
> ottom_basket "=1 if in bottom (60%) of PCE";

.                                         sort hhid
> ;

.                                                  
>                save "$path/work/bottom_basket.dta
> ", replace;
file /home/bjvca/data/data/GAP/Haruna/work/bottom_b
> asket.dta saved

.         restore;

.         sort hhid;

.         merge hhid using "$path/work/bottom_baske
> t.dta";
variable hhid does not uniquely identify
    observations in the master data
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         28        0.04        0.04
          3 |     71,858       99.96      100.00
------------+-----------------------------------
      Total |     71,886      100.00

.         drop _merge;

.                         * Only keep price observa
> tions for the poor ;
.         keep if bottom_basket==1;
(56077 observations deleted)

.         *****************************************
> *********************************;
. * Toss out the bottom 5% and top 5% of the HH-LEV
> EL prices per kg in
> * for each spdomain & product combination. This s
> hould eliminate outliers
> * that may have an undue influence on the price c
> alculation. 
> *************************************************
> *************************;
.                 gen hhppkg=value_r/quantity;
(11 missing values generated)

.                 egen lower5=pctile(hhppkg), p(5) 
> by(spdomain product);
(11 missing values generated)

.                 egen upper5=pctile(hhppkg), p(95)
>  by(spdomain product);
(11 missing values generated)

. sum;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        hhid |     15809    2.44e+09    1.16e+09   
> 1.01e+09   4.19e+09
     product |     15798    131.2775     16.2917   
>      102        161
        unit |     15798           1           0   
>        1          1
    food_cat |     15798           1           0   
>        1          1
    quantity |     15798    .7916805    2.808474   
> .0000429      227.4
-------------+-------------------------------------
> -------------------
       value |     15798    318.2154    466.6913   
>        0   8142.857
       count |     15798           1           0   
>        1          1
    descript |     15798           1           0   
>        1          1
      numreg |     15798     4.16078    1.291418   
>        1          5
    survquar |     15809    2.515023    1.165588   
>        1          4
-------------+-------------------------------------
> -------------------
    spdomain |     15809    3.176988    1.387498   
>        1          5
     reg_tpi |     15809    2.349484    1.147522   
>        1          4
    tpi_trim |     15809    1.010909    .0342491   
> .9592169   1.100966
     value_r |     15798    314.7535     462.268   
>        0   8489.067
 cons_pc_nom |     15809    1351.051     892.386   
> 78.55931   4466.259
-------------+-------------------------------------
> -------------------
      hhsize |     15809    5.708331    2.463885   
>        1         18
    hhweight |     15809    5051.077    4386.431   
>      100      60164
        bswt |     15809           1           0   
>        1          1
 cons_hh_nom |     15809     7092.23    4779.402   
> 232.1918   41911.81
 food_pc_nom |     15809    625.3658    395.8899   
>        0   2984.524
-------------+-------------------------------------
> -------------------
   nf_pc_nom |     15809    725.6852    619.6513   
> 23.11263   3923.402
 food_pc_tpi |     15809    620.4625    398.5883   
>        0   2984.524
 cons_pc_tpi |     15809    1346.148    896.7206   
> 77.24399   4457.659
   pctile_60 |     15809    1931.414    1165.033   
> 955.8005   4465.591
bottom_bas~t |     15809           1           0   
>        1          1
-------------+-------------------------------------
> -------------------
      hhppkg |     15798    1542.042    9722.969   
>        0   956335.4
      lower5 |     15798    527.7237    547.1752   
>        0   5904.947
      upper5 |     15798    2528.168    2200.834   
> 78.94154    13413.4

. describe;

Contains data from /tmp/St02502.000007
  obs:        15,809                          
 vars:            28                          20 Ma
> y 2013 12:16
 size:     2,023,552                          
---------------------------------------------------
              storage  display     value
variable name   type   format      label      varia
> ble label
---------------------------------------------------
hhid            double %9.0g                  house
                               > hold id
product         float  %10.0g      HS10A2     Food
                               product code:
                               numerical
unit            float  %10.0g                 set
                               equal to one since
                               all observations are
                               converted into kg
food_cat        float  %9.0g                  food
                               category equals 1,
                               if product is food
                               and 0 if non food
quantity        float  %9.0g                  daily
                               quantity consumed in
                               Kgs per household
value           float  %9.0g                  daily
                               value of consumption
                               in UGX per per
                               household
count           float  %9.0g                  
descript        float  %9.0g       descrip    produ
                               > ct description
                               including product
                               code but equals 2
                               for all non-foods
numreg          double %9.0g                  numbe
                               > r of goods in the
                               basket
survquar        float  %11.0g      lsurvquar
                                              Seque
                               > ntial Survey
                               Quarter May-Jun
                               09=1)
spdomain        float  %13.0g      spdomain_origina
                               > l
                                              
reg_tpi         float  %9.0g       REG_TPI    
tpi_trim        float  %9.0g                  TRIMM
                               > ED Temporal price
                               index (Q4=1)
value_r         float  %9.0g                  
cons_pc_nom     float  %9.0g                  
hhsize          double %9.0g                  House
                               > hold Size
hhweight        float  %9.0g                  House
                               > hold sample weight
bswt            float  %9.0g                  
cons_hh_nom     double %9.0g                  (sum)
                               cod_hh_nom
food_pc_nom     float  %9.0g                  nomin
                               > al food
                               consumption per
                               capita
nf_pc_nom       float  %9.0g                  nomin
                               > al non-food
                               consumption per
                               capita
food_pc_tpi     float  %9.0g                  Temp-
                               > adjusted per
                               capita food
                               consumption/day
cons_pc_tpi     float  %9.0g                  Temp
                               adjusted total
                               consumption/day
pctile_60       float  %9.0g                  (p
                               30) cons_pc_tpi
bottom_basket   float  %9.0g                  =1 if
                               in bottom (60%) of
                               PCE
hhppkg          float  %9.0g                  
lower5          float  %9.0g                  
upper5          float  %9.0g                  
---------------------------------------------------
Sorted by:  
     Note:  dataset has changed since last saved

. keep if hhppkg-lower5>=0 & hhppkg-upper5<=0;
(1143 observations deleted)

. *************************************************
> ********************
> * Note that we do prices in three ways. First, by
>  summing quantity and value 
> * This average price price_unitw is thus quantity
> /value weighted. Second, we
> * calculate the price and take simple means for a
>  transaction weighted
> * price, price_unitt. Last we take the median, pr
> ice_unitm. But in the end
> * we only use price_unitw
> *************************************************
> ********************;
.         gen price_unitt=value_r/(quantity*1000);

.         gen price_unitm=price_unitt;

.                 *CA modified to count the boot sa
> mple weight bswt;
.         collapse (sum) quantity value_r count bsw
> t 
>                  (mean) price_unitt 
>                  (median) price_unitm [aw=hhweigh
> t], by(spdomain product);

.         *Generate weighted price per gram ;
.         gen price_unitw=value_r/(quantity*1000);

.         drop value_r quantity;

.         sort spdomain product;

.         lab var price_unitt "simple average of ca
> lculated prices - transaction weighted";

.         lab var price_unitm "median of prices";

.         lab var price_unitw "value share weighted
>  mean prices";

. * Get an idea of the difference between the price
>  measures;
.         gen ratiotw=price_unitt/price_unitw;

.         gen ratiomw=price_unitm/price_unitw;

.         sum ratiotw ratiomw;

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     ratiotw |       208    1.240923    .4444796   
> .8704481   3.768888
     ratiomw |       208    1.094773    .5160427   
>        0    4.85301

.         sort product;

.         merge product using "$path/work/codes_foo
> d_basket_flex.dta";
variable product does not uniquely identify
    observations in the master data

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        208      100.00      100.00
------------+-----------------------------------
      Total |        208      100.00

.         count if _merge~=3;
    0

.         drop if _merge~=3;
(0 observations deleted)

.         drop _merge;

.         sort product spdomain;

. save "$path/work/price_unit_flex.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex.dta saved

. *************************************************
> ***************************************
> * 110_price_unit_flex.do                (end)
> *************************************************
> ***************************************;
. cap log close;

. 
end of do-file

. do "$path/new/120_povline_food_flex_original.do"/
> * Flexible basket: Poverty line */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/120_povline_food_flex.log", 
> replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 20_povline_food_flex.log
  log type:  text
 opened on:  20 May 2013, 12:16:30

. clear

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 120_povline_food_flex.do      (start)
> *
> * Use the file with the food basket (food_basket_
> flex), which is in shares. 
> * Then merge it with the prices file, and then wi
> th the calories file.
> * Along the way, drop those observations where we
>  have no price information
> * or no calorie information.
> *************************************************
> *************************;
. /*
> This file uses:
>         work/food_basket_flex.dta
>         work/price_unit_flex.dta
>         work/calperg.dta
>         work/calpp.dta
> 
> This file creates:
>         work/povline_flex.dta
> */
> 
> 
> * start with the quantity information;
. use "$path/work/food_basket_flex.dta";

.         sort product spdomain;

.         * merge in price information;
.         merge product spdomain using "$path/work/
> price_unit_flex.dta";
(label spdomain_original already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         71       34.13       34.13
          3 |        137       65.87      100.00
------------+-----------------------------------
      Total |        208      100.00

.         list product spdomain descript if _merge=
> =1;

.         drop if _merge ~=3;
(71 observations deleted)

.         drop _merge;

.         sort product;

.         * merge in information on calories per gr
> am;
.         merge product using "$path/work/calperg.d
> ta";
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         20       12.74       12.74
          3 |        137       87.26      100.00
------------+-----------------------------------
      Total |        157      100.00

.         * This tells where we are lacking calorie
>  info or are lacking quantity info due to 
>         * missing price info above;
.         list product spdomain descript if _merge=
> =1;

.         drop if _merge~=3;
(20 observations deleted)

.         drop _merge;

.         sort spdomain f_share_w;

.                 * CA modified to handle bootstrap
>  counting;
.         * determine if any quantity has fewer tha
> n 10 price observations;
.         by spdomain: count if round(bswt)<10;

---------------------------------------------------
-> spdomain = Central rural
    0
---------------------------------------------------
-> spdomain = Central urban
    1
---------------------------------------------------
-> spdomain = Eastern
    0
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

.         drop if round(bswt) < 10;
(2 observations deleted)

.         by spdomain: egen baskshr=sum(f_share_w);

.         by spdomain: gen cumshr1=sum(f_share_w);

.         * bundle was cut at 92.5 percent- cut bac
> k to 90 percent if necessary;
.         drop if cumshr1<=baskshr-.9;
(12 observations deleted)

.         * reobtain the share represented from the
>  average basket- should be slightly more than 90;
.         drop baskshr;

.         by spdomain: egen baskshr=sum(f_share_w);

.         by spdomain: sum baskshr;

---------------------------------------------------
-> spdomain = Central rural

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     baskshr |        24     .901623           0   
>  .901623    .901623

---------------------------------------------------
-> spdomain = Central urban

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     baskshr |        21    .9074457           0   
> .9074457   .9074457

---------------------------------------------------
-> spdomain = Eastern

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     baskshr |        26      .90792           0   
>   .90792     .90792

---------------------------------------------------
-> spdomain = Northern

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     baskshr |        26    .9066816           0   
> .9066816   .9066816

---------------------------------------------------
-> spdomain = Western

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
     baskshr |        26    .9009271           0   
> .9009271   .9009271


.         * obtain quantities and calories provided
>  by these quantities;
.         gen quan=f_share_w/price_unitw;

.                         /* how many g in 1 MT exp
>  on food item */
>         gen cal_ir=quan*calperg;

.                                 /* how many cal i
> n 1 MT exp on food item */
>         by spdomain: egen calreg=sum(cal_ir);

.         /* how many cal in 1 MT exp in food baske
> t*/
> 
>         * merge in calorie requirements;
.         sort spdomain;

.         merge spdomain using "$path/work/calpp.dt
> a";
variable spdomain does not uniquely identify
    observations in the master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        123      100.00      100.00
------------+-----------------------------------
      Total |        123      100.00

.         drop _merge;

.         * get the expansion factor to hit 95% of 
> calorie requirements;
.         gen ratio=.95*calpp/calreg;

.                         replace quan=quan*ratio;
(123 real changes made)

.         replace cal_ir=quan*calperg;
(116 real changes made)

.         * do a consistency check;
.         sort spdomain;

.         by spdomain: egen chkcal=sum(cal_ir);

.         replace chkcal=chkcal/.95-calpp ;
(123 real changes made)

.                         * these values should be 
> about zero;
.         by spdomain: sum chkcal;

---------------------------------------------------
-> spdomain = Central rural

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
      chkcal |        24   -.0000771           0  -
> .0000771  -.0000771

---------------------------------------------------
-> spdomain = Central urban

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
      chkcal |        21   -.0000128           0  -
> .0000128  -.0000128

---------------------------------------------------
-> spdomain = Eastern

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
      chkcal |        26   -.0000899           0  -
> .0000899  -.0000899

---------------------------------------------------
-> spdomain = Northern

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
      chkcal |        26    .0001413           0   
> .0001413   .0001413

---------------------------------------------------
-> spdomain = Western

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
      chkcal |        26    .0001285           0   
> .0001285   .0001285


.         * obtain the value of each good in the bu
> ndle;
.         gen val_ir=quan*price_unitw;

.         * the sum of the value of the goods in th
> e bundle is assumed to represent 90% of expenditu
> re;
.         by spdomain: egen povline_f_flex90=sum(va
> l_ir);

.         replace povline_f_flex=povline_f_flex90/.
> 9;
(123 real changes made)

.         collapse (mean) povline_f_flex, by (spdom
> ain);

.                 lab var povline_f_flex "Food pove
> rty line. Flexible basket";

.         sort spdomain;

.         keep spdomain povline_f_flex;

. save "$path/work/povline_food_flex.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex.dta saved

. /*
> * To be used in 140_iterate.do;
> gen cutoff = 1.5 * povline_f_flex;
> keep spdomain cutoff;
> save "$path/work/povlines_first_iterate.dta", rep
> lace;
> */
> 
> *************************************************
> *************************
> * 120_povline_food_flex.do      (end)
> *************************************************
> *************************;
. log close;
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 20_povline_food_flex.log
  log type:  text
 closed on:  20 May 2013, 12:16:30
---------------------------------------------------

. 
end of do-file

. do "$path/new/130_povmeas_flex.do"/* Flexible bas
> ket: Poverty rates */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/130_povmeas_flex.log", repla
> ce
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 30_povmeas_flex.log
  log type:  text
 opened on:  20 May 2013, 12:16:30

. clear

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 130_povmeas_flex.do           (start)
> *
> * Purpose:
> * Initial poverty measures calculation for flexib
> le basket. (Before any iteration)
> *************************************************
> *************************;
. *CA modified to add work/hhdata.dta for bootstrap
> ;
. /*
> This file uses:
>         in/foodshr96.dta
>         work/povline_f_flex.dta
>         work/consump_nom.dta
>         work/hhdata.dta
>         work/temp_index_reg_tpi.dta
> 
> This file creates:
>         work/foodshr96.dta
>         work/povmeas.dta
>         work/povlines.dta
>         work/cons_real.dta
> */
> 
> 
> 
> *************************************************
> *************************;
. * Bring in data file with nominal consumption per
>  capita, and deflate it
> * by temporal price index.
> *************************************************
> *************************;
. use "$path/work/hhdata.dta", clear;

.         keep hhid strata reg_tpi spdomain news ru
> ral survmon survquar;

.         tab reg_tpi, miss;

    reg_tpi |      Freq.     Percent        Cum.
------------+-----------------------------------
    central |      1,986       29.31       29.31
    eastern |      1,406       20.75       50.07
   northern |      1,956       28.87       78.94
    western |      1,427       21.06      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         tab survquar, miss;

 Sequential |
     Survey |
    Quarter |
    May-Jun |
      09=1) |      Freq.     Percent        Cum.
------------+-----------------------------------
 May-Jul 09 |      1,749       25.82       25.82
Sept-Oct 09 |      1,731       25.55       51.37
Nov09-Jan10 |      1,458       21.52       72.89
 Feb-Apr 10 |      1,837       27.11      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         keep hhid spdomain reg_tpi survquar;

.         sort hhid;

.         tempfile spdomainreg_tpi;

. save `spdomainreg_tpi', replace;
(note: file /tmp/St02502.000007 not found)
file /tmp/St02502.000007 saved

. use "$path/work/conpc.dta", clear;

. *use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work/hhdata.dta for boot
> strap;
.     sort hhid;

.     merge hhid using "$path/work/hhdata.dta";

.     tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.     drop _m;

.         keep hhid hhweight hhsize cons_pc_nom ;

.         sort hhid;

.         merge hhid using `spdomainreg_tpi';
(label REG_TPI already defined)
(label spdomain_original already defined)
(label lsurvquar already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/
> temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely
    identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         sort hhid;

.         merge hhid using "$path/work/conpc.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         gen food_pc_tpi  = food_pc_nom /tpi_trim;

.         lab var food_pc_tpi "Temp-adjusted per ca
> pita food consumption/day";

.                 gen cons_pc_tpi = food_pc_tpi + n
> f_pc_nom;

.         lab var cons_pc_tpi "Temp adjusted total 
> consumption/day";

.         gen one=1;

. * TPI deflated per capita consumption ;
.         tempfile contpi;

. save `contpi', replace;
(note: file /tmp/St02502.000008 not found)
file /tmp/St02502.000008 saved

. *************************************************
> *************************
> * Calculate non-food expenditure for HH around th
> e food poverty line
> *
> * Develop a discrete triangular weighted distribu
> tion. This gives a
> * weight of  1 to HH at +/- 18-20% from food pove
> rty line, and
> * weight of  2 to HH at +/- 16-18% from food pove
> rty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food pove
> rty line.
> * This weight is called triwt below.
> *************************************************
> *************************;
. use `contpi';

.         sort spdomain;

.         merge spdomain using "$path/work/povline_
> food_flex.dta";
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

. gen     triwt = 0 ;

. replace triwt = 11 - round(50*abs(cons_pc_tpi/pov
> line_f_flex-1)+0.5)
>                 if abs(cons_pc_tpi/povline_f_flex
> -1)<=0.2;
(306 real changes made)

.                                         * Nearnes
> s to poverty line and population weights ;
.         gen tripopwt=triwt*hhweight*hhsize;

.         preserve;

.                 collapse (mean) nf_pc_nom [aw=tri
> popwt] ,
>                         by(spdomain);

.                                         rename nf
> _pc_nom povline_na_flex;

.                 lab var povline_na_flex "Nonfood 
> poverty line. Flexible bundle";

.                                 tempfile znf;

.                 sort spdomain;

.                 save `znf', replace;
(note: file /tmp/St02502.00000a not found)
file /tmp/St02502.00000a saved

.                 tab spdomain;

     spdomain |      Freq.     Percent        Cum.
--------------+-----------------------------------
Central rural |          1       20.00       20.00
Central urban |          1       20.00       40.00
      Eastern |          1       20.00       60.00
     Northern |          1       20.00       80.00
      Western |          1       20.00      100.00
--------------+-----------------------------------
        Total |          5      100.00

.         restore;

.         sort spdomain;

.         merge spdomain using `znf';
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

. *************************************************
> *************************;
. * Poverty line is the sum of the food and non-foo
> d poverty lines
> *************************************************
> *************************;
.         gen povline_flex=povline_f_flex + povline
> _na_flex;

.         lab var povline_flex "Poverty line. Flexi
> ble bundle";

.         sort spdomain;

. save "$path/work/povlines.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> .dta saved

. *************************************************
> *************************;
. * Create spatial price index, based on the total 
> poverty line, with
> * adjustment so that mean (and total) nominal con
> sumption equals
> * mean (and total) spatially deflated consumption
> .
> *
> * Choose arbitrary strata to be the base at first
> : we just use the first stratum.
> *************************************************
> *************************;
. use `contpi';

.         sort spdomain;

.         merge spdomain using "$path/work/povlines
> .dta";
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s.dta
(label REG_TPI already defined)
(label spdomain_original already defined)
(label lsurvquar already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         * Real consumption pc, temporally deflate
> d ;
.         gen cr= cons_pc_tpi ;

.         * Poverty line;
.         gen linpob=povline_flex;

.         *qui sum linpob if spdomain==1, meanonly;
.         sum linpob if spdomain==3, meanonly;

.         global spi_base=r(mean);

.         * Spatial price index ;
.         gen spi=linpob/$spi_base;

.         * Real consumption pc, temporally and spa
> tially deflated ;
.         gen cr2=cr/spi;

.         qui sum cr [aw=hhweight*hhsize];

.         global sumcr=r(sum);

.         qui sum cr2 [aw=hhweight*hhsize];

.         global sumcr2=r(sum);

.         replace spi=spi*$sumcr2/$sumcr;
(6775 real changes made)

.         gen linpobr=linpob/spi;

.         replace cr2=cr/spi;
(6775 real changes made)

.         sum cr cr2 linpob linpobr [aw=hhweight*hh
> size];

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
         cr2 |    6775   200636622    9399.102   34
> 1359.2   84.11493   6.99e+07
      linpob |    6775   200636622    920.2749    1
> 40.342   713.6486   1224.502
     linpobr |    6775   200636622    1054.704    .
> 000033   1054.704   1054.704

.         lab var cr      "Temporally-adjusted cons
>  pc";

.         lab var cr2     "Spatially & temporally a
> djusted cons pc";

.         lab var linpob  "Poverty line";

.         lab var linpobr "Real poverty line";

.         lab var spi     "Spatial price index";

. *************************************************
> *************************
> * calculate poverty measures with the flexible fo
> od bundle
> *************************************************
> *************************;
.         gen h = 100     if cr <=(linpob);
(6003 missing values generated)

.         replace  h = 0 if cr > (linpob);
(6003 real changes made)

.                         gen             pg      =
>  ((linpob - cr )/linpob) *100;

.         replace         pg      = 0             i
> f h==0;
(6003 real changes made)

.         gen             spg     = ((( linpob - cr
>  )/ linpob )^2)*100;

.         replace         spg     = 0             i
> f h==0;
(6003 real changes made)

.         gen h_flex=h;

.         gen pg_flex=pg;

.         gen spg_flex=spg;

.         lab var h_flex   "Poverty headcount. Flex
>  bundle";

.         lab var pg_flex  "Poverty gap. Flex bundl
> e";

.         lab var spg_flex "Squared poverty gap. Fl
> ex bundle";

.         sort hhid;

.         merge hhid using "$path/work/hhdata.dta";
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop if _merge~=3;
(0 observations deleted)

.         drop _merge;

.         gen popwt=hhsize*hhweight;

.                 * Stata 10.1 syntax ;
.         svyset , clear;

.         svyset [pweight=popwt] , str(strata) psu(
> psu);

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>

.         svy: mean h_flex pg_flex spg_flex;
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
      h_flex |   9.812639   .6858461       8.46608 
>     11.1592
     pg_flex |   2.555231   .2162973      2.130563 
>    2.979899
    spg_flex |   1.018482   .1128775      .7968632 
>      1.2401
---------------------------------------------------
> -----------

.         svy: mean h_flex pg_flex spg_flex , over(
> rural);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex       |
       Urban |   2.012786   .5879872      .8583587 
>    3.167212
       Rural |   11.00402   .7640295      9.503964 
>    12.50409
-------------+-------------------------------------
> -----------
pg_flex      |
       Urban |   .3711761    .115079      .1452353 
>    .5971168
       Rural |   2.888834   .2452176      2.407385 
>    3.370282
-------------+-------------------------------------
> -----------
spg_flex     |
       Urban |   .1041604   .0390057      .0275784 
>    .1807423
       Rural |   1.158139     .12913      .9046115 
>    1.411667
---------------------------------------------------
> -----------

.         svy: mean h_flex pg_flex spg_flex , over(
> news);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

            1: news = 1
            2: news = 2
            3: news = 3
            4: news = 4

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex       |
           1 |   6.064121   1.035207      4.031644 
>    8.096597
           2 |   7.781384   1.338286      5.153855 
>    10.40891
           3 |   18.38831   1.732566      14.98667 
>    21.78996
           4 |   9.220304   1.231211      6.803001 
>    11.63761
-------------+-------------------------------------
> -----------
pg_flex      |
           1 |   1.245848   .2726874      .7104657 
>     1.78123
           2 |   1.521297   .2336501      1.062559 
>    1.980035
           3 |   6.060577   .8006579      4.488603 
>    7.632552
           4 |   2.365778   .4537375      1.474931 
>    3.256626
-------------+-------------------------------------
> -----------
spg_flex     |
           1 |   .3898021   .1109849      .1718995 
>    .6077046
           2 |    .402008   .0636428      .2770546 
>    .5269614
           3 |   2.879937   .4367486      2.022445 
>    3.737429
           4 |   .9427215   .2699228      .4127675 
>    1.472676
---------------------------------------------------
> -----------

.         svy: mean h_flex pg_flex spg_flex , over(
> reg_tpi);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      central: reg_tpi = central
      eastern: reg_tpi = eastern
     northern: reg_tpi = northern
      western: reg_tpi = western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex       |
     central |   6.064121   1.035207      4.031644 
>    8.096597
     eastern |   7.781384   1.338286      5.153855 
>    10.40891
    northern |   18.38831   1.732566      14.98667 
>    21.78996
     western |   9.220304   1.231211      6.803001 
>    11.63761
-------------+-------------------------------------
> -----------
pg_flex      |
     central |   1.245848   .2726874      .7104657 
>     1.78123
     eastern |   1.521297   .2336501      1.062559 
>    1.980035
    northern |   6.060577   .8006579      4.488603 
>    7.632552
     western |   2.365778   .4537375      1.474931 
>    3.256626
-------------+-------------------------------------
> -----------
spg_flex     |
     central |   .3898021   .1109849      .1718995 
>    .6077046
     eastern |    .402008   .0636428      .2770546 
>    .5269614
    northern |   2.879937   .4367486      2.022445 
>    3.737429
     western |   .9427215   .2699228      .4127675 
>    1.472676
---------------------------------------------------
> -----------

.         svy: mean h_flex pg_flex spg_flex , over(
> strata);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex       |
     KAMPALA |   1.536145   .8756774     -.1831199 
>    3.255409
   _subpop_2 |   4.947974   1.435556       2.12947 
>    7.766477
   _subpop_3 |   9.123401   1.972289      5.251099 
>     12.9957
   _subpop_4 |   5.509239   1.167082      3.217844 
>    7.800634
     EASTERN |   9.635651   2.184211      5.347273 
>    13.92403
   _subpop_6 |     10.461   1.988955      6.555977 
>    14.36602
   _subpop_7 |   65.02235   5.871258      53.49499 
>    76.54971
   _subpop_8 |   7.791329   1.560699      4.727124 
>    10.85553
   _subpop_9 |   12.88647   2.061614      8.838789 
>    16.93414
  _subpop_10 |   5.334378   1.069359      3.234848 
>    7.433908
-------------+-------------------------------------
> -----------
pg_flex      |
     KAMPALA |   .3109429   .1957665      -.073416 
>    .6953018
   _subpop_2 |   1.155752   .4521289      .2680626 
>    2.043441
   _subpop_3 |   1.733529   .4679141      .8148479 
>     2.65221
   _subpop_4 |   1.180249   .2528726      .6837702 
>    1.676727
     EASTERN |   1.799622   .3629978      1.086929 
>    2.512315
   _subpop_6 |   3.150965   .8145148      1.551784 
>    4.750145
   _subpop_7 |   25.09056   3.329085      18.55439 
>    31.62673
   _subpop_8 |   1.253884   .3653045      .5366624 
>    1.971106
   _subpop_9 |   3.573783   .7962997      2.010365 
>    5.137201
  _subpop_10 |   1.085362   .2877284       .520449 
>    1.650274
-------------+-------------------------------------
> -----------
spg_flex     |
     KAMPALA |   .0684444   .0447147     -.0193464 
>    .1562351
   _subpop_2 |   .3890002   .2071312     -.0176715 
>     .795672
   _subpop_3 |   .5264891   .1676451      .1973425 
>    .8556357
   _subpop_4 |   .3568361   .0921396      .1759334 
>    .5377388
     EASTERN |   .4388722   .0871189       .267827 
>    .6099174
   _subpop_6 |   1.341063   .4248042      .5070215 
>    2.175104
   _subpop_7 |    12.8202   1.975756      8.941096 
>    16.69931
   _subpop_8 |   .3974138   .1458939      .1109726 
>    .6838551
   _subpop_9 |   1.511506   .4851388      .5590073 
>    2.464006
  _subpop_10 |   .3398414   .1283629      .0878195 
>    .5918632
---------------------------------------------------
> -----------

.         svy: mean h_flex pg_flex spg_flex , over(
> spdomain);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex       |
   _subpop_1 |   8.088027   1.437815      5.265088 
>    10.91097
   _subpop_2 |   1.914678   .7063461      .5278702 
>    3.301485
     Eastern |   7.781384   1.338286      5.153855 
>    10.40891
    Northern |   18.38831   1.732566      14.98667 
>    21.78996
     Western |   9.220304   1.231211      6.803001 
>    11.63761
-------------+-------------------------------------
> -----------
pg_flex      |
   _subpop_1 |   1.692854   .3885907      .9299131 
>    2.455795
   _subpop_2 |   .3293883   .1408386      .0528722 
>    .6059044
     Eastern |   1.521297   .2336501      1.062559 
>    1.980035
    Northern |   6.060577   .8006579      4.488603 
>    7.632552
     Western |   2.365778   .4537375      1.474931 
>    3.256626
-------------+-------------------------------------
> -----------
spg_flex     |
   _subpop_1 |    .544273   .1612903      .2276032 
>    .8609429
   _subpop_2 |   .0731034   .0328303      .0086459 
>    .1375609
     Eastern |    .402008   .0636428      .2770546 
>    .5269614
    Northern |   2.879937   .4367486      2.022445 
>    3.737429
     Western |   .9427215   .2699228      .4127675 
>    1.472676
---------------------------------------------------
> -----------

.         compress;
survquar was float now byte
spdomain was float now byte
reg_tpi was float now byte
one was float now byte
triwt was float now byte
h was float now byte
h_flex was float now byte
rmult was float now int
poor09 was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
hhsize was double now byte

.         sort hhid;

. save "$path/work/cons_real.dta" , replace;
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l.dta saved

.         collapse  (mean) h_flex pg_flex spg_flex 
> [aw=hhweight*hhsize], by(strata);

. save "$path/work/povmeas.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/povmeas.
> dta saved

. *************************************************
> *************************
> * 130_povmeas_flex.do           (end)
> *************************************************
> *************************;
. log close;
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 30_povmeas_flex.log
  log type:  text
 closed on:  20 May 2013, 12:16:31
---------------------------------------------------

. 
end of do-file

. do "$path/new/140_iterate_bjorn.do" $it_n $bottom
> /* Flexible basket: Iterations */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/140_iterate.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 40_iterate.log
  log type:  text
 opened on:  20 May 2013, 12:16:31

. clear

. set more off

. #delimit ;
delimiter now ;
. *global povline_initial "$path/in/povlines_first_
> iof.dta";
. *************************************************
> *************************
> * 140_iterate.do        (start)
> *
> * Purpose: Create flexible food basket and povert
> y line with iterative procedure
> *
> * This program will take the results from the fir
> st pass at the
> * poverty lines and applies the corresponding spa
> tial deflator to
> * re-select the relatively poor, their consumptio
> n bundles, and
> * their prices.
> *
> * Welfare indicator is here always temporally and
>  spatially adjusted per capita
> * expenditure. Here called cr_it< >.
> *
> * We will iterate this process 5 times which here
>  assures convergence.
> *
> * CA, Mar 2010: Relatively poor are those below l
> ast iterated poverty line
> * MAH, Apr 2010: Cleaning
> * URB, feb 2012: Commented out "drop if unit~=2"
> *************************************************
> *************************;
. /*
> This file uses:
>             in/povlines_first_new.dta
>         work/hhdata.dta
>         work/consump_nom.dta
>         work/own.dta
>         work/daily.dta
>         work/temp_index_reg_tpi.dta
>         work/cons_cod.dta
>         work/food_cat.dta
>         work/cons_real.dta
>         work/products.dta
>         work/match96_02.dta
>         new/conversions.do
>         
> This file creates (where `pass' is the number of 
> the iteration):
>         work/codes_food_basket_flex_it`pass'.dta
>         work/price_unit_flex_it`pass'.dta
>         work/quan_flex_it`pass'.dta
>         work/match_cod_flex_it`pass'.csv
>         work/relpoor_it`pass'.dta
>         work/povlines_it`pass'.dta
>         work/foodshares_it`pass'.dta
>         work/nat_pov_flex.csv
>         work/rur_pov_flex.csv
>         work/strata_pov_flex.csv
>         work/spdomain_pov_flex.csv
>         work/reg_tpi_pov_flex.csv
> */
> 
> *************************************************
> *************************;
. * Make a key file that will be used over and over
> , without change
> * in every iteration. This will include the TEMPO
> RALLY deflated consumption
> * and various HH data such as hhweight, spdomain,
>  etc.
> *************************************************
> *************************;
. use "$path/work/conpc.dta";

.         sort hhid;

.         merg hhid using "$path/work/hhdata.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/
> temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely
    identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.                 gen food_pc_tpi = food_pc_nom /tp
> i_trim;

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom
> ;

.         lab var food_pc_tpi "Temp-adjusted per ca
> pita food consumption/day";

.         lab var cons_pc_tpi "Temp adjusted total 
> consumption/day";

.         tempfile contpi;

.         sort hhid;

. save `contpi', replace;
(note: file /tmp/St02502.000007 not found)
file /tmp/St02502.000007 saved

. save contpi_, replace;
(note: file contpi_.dta not found)
file contpi_.dta saved

. *use "$path/in/povlines_first_iterate.dta", clear
> ;
. *save "$path/work/povlines_first.dta", replace;
. *************************************************
> *************************;
. * Now set some information pertaining to the iter
> ations. For now we'll
> * manually set the number of iterations. Also spe
> cify the percentile
> * cutpoint that we will use for defining the rela
> tively poor.
> *************************************************
> *************************;
. local lastpass=0;

. local pass=1;

. * Use these two lines to manually specify the num
> ber of iterations
> * and the cutpoint here in the do file.;
.   *local maxit=5;
.   *local cutpt=50;
. * Use these few lines if you want to specify the 
> number of iterations
> * and percentile cutpoint by passing them as para
> meters on the command
> * line, e.g.:   wstata do new/iterate1.do 5 50;
. if "`1'"=="" | "`2'"=="" {      ;
.         di in red "Error: you need to specify num
> ber of iterations as first parameter";
.         di in red "       and percentile cutpoint
>  as second parameter on command line.";
. };

. local maxit=`1';

. local cutpt=`2';
invalid syntax
r(198);

end of do-file

r(198);

.  maxit
unrecognized command:  maxit
r(199);

. do "$path/new/140_iterate_bjorn.do" $it_n $bottom

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/140_iterate.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 40_iterate.log
  log type:  text
 opened on:  20 May 2013, 12:17:33

. clear

. set more off

. #delimit ;
delimiter now ;
. *global povline_initial "$path/in/povlines_first_
> iof.dta";
. *************************************************
> *************************
> * 140_iterate.do        (start)
> *
> * Purpose: Create flexible food basket and povert
> y line with iterative procedure
> *
> * This program will take the results from the fir
> st pass at the
> * poverty lines and applies the corresponding spa
> tial deflator to
> * re-select the relatively poor, their consumptio
> n bundles, and
> * their prices.
> *
> * Welfare indicator is here always temporally and
>  spatially adjusted per capita
> * expenditure. Here called cr_it< >.
> *
> * We will iterate this process 5 times which here
>  assures convergence.
> *
> * CA, Mar 2010: Relatively poor are those below l
> ast iterated poverty line
> * MAH, Apr 2010: Cleaning
> * URB, feb 2012: Commented out "drop if unit~=2"
> *************************************************
> *************************;
. /*
> This file uses:
>             in/povlines_first_new.dta
>         work/hhdata.dta
>         work/consump_nom.dta
>         work/own.dta
>         work/daily.dta
>         work/temp_index_reg_tpi.dta
>         work/cons_cod.dta
>         work/food_cat.dta
>         work/cons_real.dta
>         work/products.dta
>         work/match96_02.dta
>         new/conversions.do
>         
> This file creates (where `pass' is the number of 
> the iteration):
>         work/codes_food_basket_flex_it`pass'.dta
>         work/price_unit_flex_it`pass'.dta
>         work/quan_flex_it`pass'.dta
>         work/match_cod_flex_it`pass'.csv
>         work/relpoor_it`pass'.dta
>         work/povlines_it`pass'.dta
>         work/foodshares_it`pass'.dta
>         work/nat_pov_flex.csv
>         work/rur_pov_flex.csv
>         work/strata_pov_flex.csv
>         work/spdomain_pov_flex.csv
>         work/reg_tpi_pov_flex.csv
> */
> 
> *************************************************
> *************************;
. * Make a key file that will be used over and over
> , without change
> * in every iteration. This will include the TEMPO
> RALLY deflated consumption
> * and various HH data such as hhweight, spdomain,
>  etc.
> *************************************************
> *************************;
. use "$path/work/conpc.dta";

.         sort hhid;

.         merg hhid using "$path/work/hhdata.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/
> temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely
    identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.                 gen food_pc_tpi = food_pc_nom /tp
> i_trim;

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom
> ;

.         lab var food_pc_tpi "Temp-adjusted per ca
> pita food consumption/day";

.         lab var cons_pc_tpi "Temp adjusted total 
> consumption/day";

.         tempfile contpi;

.         sort hhid;

. save `contpi', replace;
(note: file /tmp/St02502.000007 not found)
file /tmp/St02502.000007 saved

. save contpi_, replace;
file contpi_.dta saved

. *use "$path/in/povlines_first_iterate.dta", clear
> ;
. *save "$path/work/povlines_first.dta", replace;
. *************************************************
> *************************;
. * Now set some information pertaining to the iter
> ations. For now we'll
> * manually set the number of iterations. Also spe
> cify the percentile
> * cutpoint that we will use for defining the rela
> tively poor.
> *************************************************
> *************************;
. local lastpass=0;

. local pass=1;

. * Use these two lines to manually specify the num
> ber of iterations
> * and the cutpoint here in the do file.;
.   *local maxit=5;
.   *local cutpt=50;
. * Use these few lines if you want to specify the 
> number of iterations
> * and percentile cutpoint by passing them as para
> meters on the command
> * line, e.g.:   wstata do new/iterate1.do 5 50;
. if "`1'"=="" | "`2'"=="" {      
>         di in red "Error: you need to specify num
> ber of iterations as first parameter"
>         di in red "       and percentile cutpoint
>  as second parameter on command line."
> };
. local maxit=`1';
. local cutpt=`2';
. tempfile cutoff;
. while `pass' <= `maxit' {;
  2.         **************************************
> ************************************;
. *************************************************
> *************************;
. * Pick out the bottom X percent in real consumpti
> on per capita 
> * (temporally & spatially adjusted), as ranked by
>  the previous iteration.
> * The percentile to use is defined by "cutpt". Th
> is produces a file that
> * has the hhid, and a dummy variable indicating i
> f they were below the
> * cutpoint on the last iteration.
> *************************************************
> *************************;
. *************************************************
> *************************;
. /*
> * Comment out if IOF 2008/09. (This code included
>  instead of below code in order to replicate publ
> ished figures 2002/03). ( START ) ;
> 
>         if "`pass'"=="1" {      ;
>               use `contpi', clear;
>               sort spdomain;
>               merge spdomain using "$path/work/po
> vlines_first.dta";
>               tab _m;
>               drop _m;
> *              gen relpoor`pass'= cons_pc_tpi<=cu
> toff;
>                gen relpoor`pass'= cons_pc_tpi if 
> cons_pc_tpi<=cutoff;
>               rename cons_pc_tpi cr_it0;
>               sort hhid;
>          save "$path/work/relpoor_it`pass'.dta", 
> replace;
> *        use "$path/work/cons_real.dta", clear;
> *              gen cr_it0=cr2;
>         };
>         
> 
> * Comment out if IOF 2008/09. (This code included
>  instead of below code in order to replicate publ
> ished figures 2002/03). ( END ) ;
> */
> 
> 
> 
> * Comment out if IAF 2002/03. (This code below ex
> cluded in order to replicate published figures 20
> 02/03). ( START ) ;
.         if "`pass'"=="1" { ;
  3. * Find real income at cut point initially;
.                 use "$path/work/cons_real.dta", c
> lear;
  4.                                     gen cr_it0
> =cr2;
  5.                         cap drop one;
  6.             gen one=1;
  7.                                     collapse (
> p`cutpt') one cr_it`lastpass' [aw=popwt] ;
  8.                                     rename cr_
> it`lastpass' cutoff;
  9.                                     sort one;
 10.             save `cutoff', replace;
 11.  * Find relatively poor initially;
.             use "$path/work/cons_real.dta", clear
> ;
 12.                                               
>   gen cr_it`lastpass'=cr2;
 13.             cap drop one;
 14.             gen one=1;
 15.                                     sort one;
 16.             merge one using `cutoff';
 17.             tab _merge;
 18.             drop _merge;
 19.                                     drop one;
 20.                            gen relpoor`pass'=c
> r_it`lastpass'<=cutoff;
 21.             *lab var relpoor`pass' "=1 if in b
> ottom of PCE";
.                                     tab relpoor`p
> ass' [aw=popwt];
 22.                                     keep hhid 
> cr_it`lastpass' relpoor`pass' popwt;
 23.             sort hhid;
 24.         save $path/work/relpoor_it`pass'.dta, 
> replace;
 25.         };
 26. * Comment out if IAF 2002/03. (This code below
>  excluded in order to replicate published figures
>  2002/03). ( END ) ;
.                 if `pass'>1 {   ;
 27. * Find real income at cut point in iteration n
> umber `pass' ;
.                 use "$path/work/cons_real_it`last
> pass'.dta" , clear;
 28.                                               
>   cap drop one;
 29.                 gen one=1;
 30.                                               
>                   *CA modified from hhweight*hhsi
> ze to popwt;
.                 collapse (p`cutpt') one cr_it`las
> tpass' [aw=popwt] ;
 31.                         rename cr_it`lastpass'
>  cutoff;
 32.                                               
>                           sort one;
 33.         save `cutoff', replace;
 34.         * Find relatively poor in iteration nu
> mber `pass' ;
.                 use "$path/work/cons_real_it`last
> pass'.dta", clear;
 35.                                               
>   cap drop one;
 36.                 gen one=1;
 37.                                               
>   sort one;
 38.                 merge one using `cutoff';
 39.                 tab _merge;
 40.                 drop _merge;
 41.                                               
>   drop one;
 42.                 gen relpoor`pass'=cr_it`lastpa
> ss'<=cutoff;
 43.                 *lab var relpoor`pass' "=1 if 
> in bottom of PCE";
.                                                 t
> ab relpoor`pass' [aw=popwt];
 44. *CA modified to popwt above and to keep popwt 
> below;
.                 keep hhid cr_it`lastpass' relpoor
> `pass' popwt;
 45.                 sort hhid;
 46.         save "$path/work/relpoor_it`pass'.dta"
> , replace;
 47.         };
 48.         **************************************
> ************************************;
. * Get the consumption file, and select only those
>  codes that are food,
> * using our definition of "food", which includes 
> alcoholic beverages.
> *************************************************
> *************************;
.         use "$path/work/cons_cod.dta", clear;
 49. *CA modified to merge in work/hhdata.dta for b
> ootstrap;
.     sort hhid;
 50.     merge hhid using "$path/work/hhdata.dta";
 51.     tab _m;
 52.     drop _m;
 53.         /*
>                 sort product;
>                 merge product using "$path/work/f
> ood_cat.dta";
>                 tab _merge;
>                 keep if _merge==3;
>                 drop _merge;
> */
> 
>                                 * Only food trans
> actions ;
.                 keep if food_cat;
 54.                 sort hhid;
 55. **********************************************
> ****************************;
. * Merge with file that has temporally AND spatial
> ly adjusted consumption
> * per capita from the previous iteration, and als
> o identifies those below 
> * the cutoff. Then select only those who are belo
> w the cutoff.
> *************************************************
> *************************;
.                 merge hhid using "$path/work/relp
> oor_it`pass'.dta";
 56.                 tab _merge;
 57.                 drop _merge;
 58.                                 * Keep only tr
> ansactions by the poor ;
.                 keep if relpoor`pass';
 59. **********************************************
> ****************************;
. * Calculate HH level food shares. Since we're onl
> y doing shares here, we can
> * work with the expenditures without doing tempor
> al adjustment.
> *************************************************
> *************************;
.                 gen  food_expenditure = cod_hh_no
> m3;
 60.                 *gen  food_expenditure= own_va
> lued + daily_valued + monthly_valued + educ_value
> d;
.                 egen tot_food_expen= sum (food_ex
> pen), by (hhid) ;
 61.                 count if food_expenditure==.;
 62.                 count if tot_food_expen==.;
 63.                 gen food_share= food_expenditu
> re/tot_food_expen;
 64.                 count if food_share==.;
 65.                 drop if food_share==.;
 66.                 sort hhid product;
 67.                 tempfile foodshares;
 68.         save `foodshares', replace;
 69. **********************************************
> **********************************;
. * Now find the total (economy wise, e.g. not by H
> H) shares by each product in
> * order to select the most important goods in eac
> h domain's basket.
> *************************************************
> *******************************;
.                 collapse (mean) hhweight spdomain
> , by (hhid);
 70.                 sort hhid ;
 71.                  collapse (sum) hhweight , by(
> spdomain);
 72.                 rename hhweight tothhweight;
 73.                 tempfile tothhweight;
 74.                 sort spdomain;
 75.         save `tothhweight', replace;
 76.         use `foodshares', clear;
 77.                 sort spdomain;
 78.                 merge spdomain using `tothhwei
> ght';
 79.                 tab _merge;
 80.                 drop _merge;
 81.                 sort spdomain product;
 82.                 gen f_share_w`pass'=(food_shar
> e*hhweight)/tothhweight;
 83.                 collapse (sum) f_share_w`pass'
> , by(spdomain product descript);
 84.                                sort spdomain f
> _share_w`pass';
 85.                 by spdomain: gen cumshr`pass'=
>  sum(f_share_w`pass');
 86.                 count if cumshr`pass'<=.075;
 87.                 drop if cumshr`pass'<=.075;
 88.                 lab var f_share_w`pass' "avera
> ge food share for the 13 spatial domains";
 89.         save `foodshares', replace;
 90.                                               
>   * Number of spatials domains a food product app
> ears ;
.                 gen numreg=1;
 91.                 collapse (sum) numreg cumshr`p
> ass', by (product descript);
 92.                 keep product numreg descript;
 93.                 display _N;
 94.                 sort product;
 95.                                 * Include food
>  product labels ;
. *                merge product using "$path/work/
> products.dta";
. *                tab _merge;
. *                keep if _merge==3;
.                 keep product descript numreg;
 96.                   sort product;
 97.                      display _N;
 98.           save "$path/work/codes_food_basket_f
> lex_it`pass'.dta", replace;
 99. **********************************************
> ****************************;
. *************************************************
> *************************;
. * That is pretty much the part equivalent to "100
> _food_basket_flex.do",
> * which figures out the food shares for the relev
> ant reference group. Now
> * we figure out the prices with a code stream tha
> t is adapted from
> * "110_price_unit_flex.do".
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************************
> * Create sorted data set with daily + own expendi
> ture and the matched codes
> *************************************************
> *************************************;
. use "$path/in/cons_cod_trans.dta", clear;
100. *save "$path/work/cons_cod_trans.dta", replace
> ;
. *drop value   ;
. *drop quantity;
. keep hhid product food_cat valuez quantityz unit;
101. rename valuez    value;
102. rename quantityz quantity;
103. *drop count;
. drop if quantity==0 ;
104.         tempfile dd_acsort;
105.         save    `dd_acsort', replace;
106. /*
>         use "$path/work/daily.dta", clear;
>                 drop days;
>                 sort product;
>                 tempfile dd_acsort;
>         save `dd_acsort', replace;
>         
>         use "$path/work/own.dta", clear;
>                 keep hhid product valued quantity
> d unit;
>                 rename valued value;
>                 rename quantityd quantity;
>         
>                 *CHECK THE ZEROS IN quantity FOR 
> NOW DELETE;
>                 drop if quantity==0;
>         
>                 append using `dd_acsort';
> */
> 
>                 *CA modified to insert work/hhdat
> a.dta for bootstrap;
.                 sort hhid;
107.                 merge hhid using "$path/work/h
> hdata.dta";
108.                 tab _m;
109.                  drop if _m==2;
110.                 drop _m;
111.                                 sort product;
112.                 gen count=1;
113.         save `dd_acsort', replace;
114.         **************************************
> ************************************;
. * Merge the basket codes with the dd  and own dat
> a sets.
> * Drop all codes not a part of the flexible food 
> basket
> *************************************************
> *************************;
.                 merge product using "$path/work/c
> odes_food_basket_flex_it`pass'.dta";
115.                         tab _merge;
116.                 drop if _merge~=3;
117.                 drop _merge;
118. **********************************************
> ****************************************
> * Drop observations where product code, quantity 
> or value information is unavailable
> *************************************************
> *************************************;
.                 drop if product==. | value==. | q
> uantity==.  ;
119.         **************************************
> ************************************************
> * Convert non-KG quantities (units, liters) into 
> kilograms
> *************************************************
> *************************************;
. *do "$path/new/110a_conversions.do"
> 
> *************************************************
> *******************
> * There remain a few difficult to interpret obser
> vations such as liters
> * of fish and liters of pasta. These are dropped.
> *************************************************
> *******************;
. *                $MZ drop if unit~=2;
.         *****************************************
> *********************************;
. * Bring in the spdomain and reg_tpi variables, an
> d also the information on
> * relatively poor households.
> *************************************************
> *************************;
.                 preserve;
120.                                               
>   * Temporally adjusted expenditure ;
.                         use `contpi', clear;
121.                                 keep hhid hhwe
> ight spdomain reg_tpi survquar tpi_trim cons_pc_t
> pi ;
122.                                 sort hhid;
123.                                 tempfile hhd2;
124.                         save `hhd2', replace;
125.                 restore;
126.                                 compress;
127.                 sort hhid;
128.                 merge hhid using `hhd2';
129.                 tab _merge;
130.                 drop _merge;
131.                 sort hhid;
132.                 merge hhid using "$path/work/r
> elpoor_it`pass'.dta";
133.                 tab _merge;
134.                 drop _merge;
135.                                               
>   * Keep nominal food transactions by poor people
>  ;
.                 keep if relpoor`pass';
136.                 drop if product==.;
137.                                               
>                   * Temporally deflate transactio
> n values ;
.                 gen value_r=value/tpi_trim;
138. **********************************************
> ****************************;
. * Toss out the bottom 5% and top 5% of the HH-LEV
> EL prices per kg in
> * each spdomain & product combination. This shoul
> d eliminate outliers
> * that may have an undue influence on the price c
> alculation. 
> *************************************************
> *************************;
.                 gen hhppkg=value_r/quantity;
139.                 egen lower5=pctile(hhppkg), p(
> 5)  by(spdomain product);
140.                 egen upper5=pctile(hhppkg), p(
> 95) by(spdomain product);
141.                 keep if hhppkg>=lower5 & hhppk
> g<=upper5;
142. **********************************************
> ***********************
> * Note that we do prices in three ways. First, by
>  summing quantity and value 
> * This average price price_uw is thus quantity/va
> lue weighted. Second, we
> * calculate the price and take simple means for a
>  transaction weighted
> * price, price_ut. Last we take the median, price
> _um. But in the end
> * we only use price_unitw
> *************************************************
> ********************;
.                 gen price_ut`pass'=value_r/(quant
> ity*1000);
143.                 gen price_um`pass'=price_ut;
144.                 collapse (sum) 
>                         quantity value_r count bs
> wt (mean) price_ut (median) price_um [aw=hhweight
> ], 
>                         by(spdomain product);
145.                 *Generate weighted price per g
> ram ;
.                 gen price_uw`pass'=value_r/(quant
> ity*1000);
146.                 drop value_r quantity;
147.                 sort spdomain product;
148.                 lab var price_ut`pass' "Averag
> e of calculated prices - transaction weighted";
149.                 lab var price_um`pass' "Median
>  of prices";
150.                 lab var price_uw`pass' "Value 
> share weighted mean prices";
151. * Get an idea of the difference between the pr
> ice measures;
.                 gen ratiotw`pass'=price_ut`pass'/
> price_uw`pass';
152.                 gen ratiomw`pass'=price_um`pas
> s'/price_uw`pass';
153.                 sum ratiotw`pass' ratiomw`pass
> ';
154.                 sort product;
155.                 merge product using "$path/wor
> k/codes_food_basket_flex_it`pass'.dta";
156.                 tab _m;
157.                 count if _merge~=3;
158.                 drop if _merge~=3;
159.                 drop _merge;
160.                 sort product spdomain;
161.         save "$path/work/price_unit_flex_it`pa
> ss'.dta", replace;
162. **********************************************
> ****************************;
. *************************************************
> *************************;
. * That concludes the prices part. Now we move to 
> calculating the food
> * poverty lines, which draws code from "120_povli
> ne_flex.do" with very few
> * changes:
> * - The changes facilitate accumulating vectors
> *   of intermediate results across iterations, ra
> ther than generating a
> *   bunch of new files.
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************;
. * Use the file with the food basket (`foodshares'
> ), which is in shares. 
> * Then merge it with the prices file, and then wi
> th the calories file.
> * Along the way, drop those observations where we
>  have no price information
> * or no calorie information, but list them out.
> *************************************************
> *************************;
.         use `foodshares', clear;
163.                 sort product spdomain;
164.                 merge product spdomain using "
> $path/work/price_unit_flex_it`pass'.dta";
165.                         tab _merge;
166.                 list product spdomain descript
>  if _merge==1;
167.                         drop if _merge ~=3;
168.                 drop _merge;
169.                 sort product;
170.                         merge product using "$
> path/work/calperg.dta";
171.                 tab _merge;
172.                                               
>   * This tells where we are lacking calorie info 
> or are lacking quantity info due to 
>                 * missing price info above;
.                 list product spdomain descript if
>  _merge==1;
173.                         drop if _merge~=3;
174.                 drop _merge;
175.                 sort spdomain f_share_w`pass';
176.                                 *CA modified t
> o change count bswt;
.                 by spdomain: count if round(bswt)
> <10;
177.                                 sum bswt;
178.                                               
>   drop if round(bswt) < 10;
179.                                               
>                   * Total food share in spatial d
> omain ;
.                 by spdomain: egen baskshr=sum(f_s
> hare_w`pass');
180.                                 * Cumulated fo
> od share in spatial domain ;
.                 by spdomain: gen  cumshr =sum(f_s
> hare_w`pass');
181.                 drop if cumshr<=baskshr-.9;
182.                         drop baskshr;
183.                 by spdomain: egen baskshr=sum(
> f_share_w`pass');
184.                 tabstat baskshr , by(spdomain)
>  st(n mean sd min max);
185.                                               
>                   * How many grams in 1 MT exp on
>  food item ;
.                                 gen quan`pass'=f_
> share_w`pass'/price_uw`pass';
186.                                 * How many cal
> ories in 1 MT exp on food item ;
.                 gen cal_ir`pass'=quan`pass'*calpe
> rg;
187.                                 * how many cal
> ories in 1 MT exp in food basket ;
.                 by spdomain: egen calreg=sum(cal_
> ir);
188.                         sort spdomain;
189.                 merge spdomain using "$path/wo
> rk/calpp.dta";
190.                 tab _merge;
191.                 drop _merge;
192.                                               
>           * get the expansion factor to hit 95% o
> f calorie requirements ;
.                 gen ratio=.95*calpp/calreg;
193.                         replace quan`pass'=qua
> n`pass'*ratio;
194.                 replace cal_ir`pass'=quan`pass
> '*calperg;
195.                         sort spdomain product;
196.                 by spdomain: egen chkcal=sum(c
> al_ir`pass');
197.                 replace chkcal=chkcal/.95-calp
> p ;
198.                                               
>   tabstat chkcal , by(spdomain) st(n mean sd min 
> max);
199.                         gen val_ir`pass'=quan`
> pass'*price_uw`pass';
200.                         by spdomain: egen povl
> ine_f_flex90_`pass'=sum(val_ir`pass');
201.                 replace povline_f=povline_f_fl
> ex90_`pass'/.9;
202.                 *drop product96;
. keep product spdomain quan`pass'  price_uw`pass' 
> val_ir`pass' povline_f_flex90_`pass' calpp calper
> g;
203.                     save "$path/work/quan_flex
> _it`pass'.dta", replace;
204.                         collapse (mean) povlin
> e_f_flex90_`pass', by (spdomain);
205.                                               
>   keep spdomain povline_f_flex90_`pass';
206.                 sort spdomain;
207.                 save "$path/work/povline_food_
> flex_it`pass'.dta", replace;
208.         **************************************
> ************************************;
. *************************************************
> *************************;
. * Now comes the part that draws the non-food and 
> total poverty lines,
> * and generates estimates of poverty measures. Th
> is is drawn from 
> * "130_povmeas_flex.do" with a few changes.
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************
> * Calculate non-food expenditure for HH around th
> e food poverty line
> *
> * Develop a discrete triangular weighted distribu
> tion. This gives a
> * weight of  1 to HH at +/- 18-20% from food pove
> rty line, and
> * weight of  2 to HH at +/- 16-18% from food pove
> rty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food pove
> rty line.
> * This weight is called triwt below.
> *************************************************
> *************************;
.         use `contpi', clear;
209.                 sort spdomain;
210.                 merge spdomain using "$path/wo
> rk/povline_food_flex_it`pass'.dta";
211.                 tab _merge;
212.                 drop _merge;
213.                 gen triwt=1 ;
214.                 replace triwt = 11 - round(50*
> abs(cons_pc_tpi/povline_f_flex90_`pass'-1)+0.5) i
> f abs(cons_pc_tpi/povline_f_flex90_`pass'-1)<=0.2
> ;
215.                                               
>                   * Nearness to poverty line and 
> population weights ;
.                 gen tripopwt=(triwt+1)*hhweight*h
> hsize;
216.                                               
>   preserve;
217.                         collapse (mean) nf_pc_
> nom [aw=tripopwt] , by(spdomain);
218.                         rename nf_pc_nom povli
> ne_nf_flex`pass';
219.                         lab var povline_nf_fle
> x`pass' "Nonfood poverty line. Flexible bundle";
220.                         tempfile znf;
221.                         sort spdomain;
222.                         save `znf', replace;
223.                                               
>                   restore;
224.                                 sort spdomain;
225.                 merge spdomain using `znf';
226.                 tab _merge;
227.                 drop _merge;
228. **********************************************
> ****************************
> * Poverty line is the sum of the food and non-foo
> d poverty lines
> *************************************************
> *************************;
.                 gen povline_flex`pass'=povline_f_
> flex90_`pass' + povline_nf_flex`pass';
229. keep spdomain povline_flex`pass';
230.                 sort spdomain;
231.         save "$path/work/povlines_it`pass'.dta
> ", replace;
232. **********************************************
> ****************************;
. * Create spatial price index, based on the total 
> poverty line, with
> * adjustment so that mean (and total) nominal con
> sumption equals
> * mean (and total) spatially deflated consumption
> .
> *
> * Choose arbitrary strata to be the base at first
> : we just use the first stratum.
> *************************************************
> *************************;
.         use `contpi', clear;
233.                 sort spdomain;
234.                 merge spdomain using "$path/wo
> rk/povlines_it`pass'.dta";
235.                 tab _merge;
236.                 drop _merge;
237.                 gen cr= cons_pc_tpi ;
238.                 gen linpob`pass'=povline_flex`
> pass';
239.                 qui sum linpob`pass' if spdoma
> in==1, meanonly;
240.                 global spi_base=r(mean);
241.                 gen spi`pass'=linpob`pass'/$sp
> i_base;
242.                 gen cr_it`pass'=cr/spi`pass';
243.                 qui sum cr [aw=hhweight*hhsize
> ];
244.                 global sumcr=r(sum);
245.                 qui sum cr_it`pass' [aw=hhweig
> ht*hhsize];
246.                 global sumcr2=r(sum);
247.                 replace spi`pass'=spi`pass'*$s
> umcr2/$sumcr;
248.                 gen linpobr`pass'=linpob`pass'
> /spi`pass';
249.                 replace cr_it`pass'=cr/spi`pas
> s';
250.                 su cr cr_it`pass' linpob`pass'
>  linpobr`pass' [aw=hhweight*hhsize];
251.                 lab var cr "Temporally-adjuste
> d cons pc";
252.                 lab var cr_it`pass' "Spatially
>  & temporally adjusted cons pc";
253.                 lab var linpob`pass' "Poverty 
> line";
254.                 lab var linpobr`pass' "Real po
> verty line";
255.                 lab var spi`pass' "Spatial pri
> ce index";
256.                 gen linpob=linpob`pass';
257. **********************************************
> ****************************
> * calculate poverty measures with the flexible fo
> od bundle
> *************************************************
> *************************;
.                 gen h=100 if cr_it`pass'<=linpobr
> `pass' & linpobr`pass'~=. & cr_it`pass'~=.;
258.                 replace  h   = 0 if cr_it`pass
> ' > linpobr`pass' & linpobr`pass'~=. & cr_it`pass
> '~=.;
259.                 gen      pg  = ((linpobr`pass'
>  - cr_it`pass' )/linpobr`pass') *100;
260.                 replace  pg  = 0             i
> f h==0;
261.                 gen      spg = ((( linpobr`pas
> s' - cr_it`pass' )/ linpobr`pass' )^2)*100;
262.                 replace  spg = 0             i
> f h==0;
263.                 gen h_flex`pass'  =h;
264.                 gen pg_flex`pass' =pg;
265.                 gen spg_flex`pass'=spg;
266.                                 lab var h_flex
> `pass'   "Poverty headcount. Flexible bundle";
267.                 lab var pg_flex`pass'  "Povert
> y gap. Flexible bundle";
268.                 lab var spg_flex`pass' "Square
> d poverty gap. Flexible bundle";
269.                 gen popwt=hhsize*hhweight;
270.                         * Stata 10.1 syntax ;
.                         svyset , clear;
271.                         svyset [pweight=popwt]
>  , str(strata) psu(psu);
272.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass';
273.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(rural);
274.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(strata);
275.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(strata rural);
276.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(spdomain);
277. *preserve;
. keep hhid popwt cr_it`pass' h_flex`pass' pg_flex`
> pass' spg_flex`pass' rural news reg_tpi strata sp
> domain;
278.                 compress;
279.                 sort hhid;
280.         save "$path/work/cons_real_it`pass'.dt
> a" , replace;
281. *restore;
.                                 * New cutoff poin
> t (percentile) to use in next iteration is equal 
> to the poverty ;
.                 * rate in this iteration ;
.                                                 s
> um h_flex`pass' [aw=popwt] ;
282.                                 * Comment out 
> next line for IAF 2002/03 in order to replicate o
> fficial figures ( START );
.                 * URB: In this case, we just use 
> the poorest 50% as there are too few actually poo
> r to calculate the bundle and prices..;
.                 local cutpt= $tpi_bottom;
283. *               local cutpt= round(r(mean));
.                 * Comment out next line for IAF 2
> 002/03 in order to replicate official figures ( E
> ND );
. *       save foodshares tempfile to disk;
.         use `foodshares', clear;
284.         save "$path/work/foodshares_it`pass'.d
> ta", replace;
285.         local lastpass = `pass';
286.         local pass = `pass' + 1;
287.         };
. *************************************************
> *************************
> * Send results to one big csv-file
> *************************************************
> *************************;
. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;
.         gen dum=1;
.         collapse (mean) dum h_flex`lastpass' pg_f
> lex`lastpass' spg_flex`lastpass' [aw=popwt];
. gen geo="National";
. gen geono=dum;
. tempfile nat;
. save `nat';
.         use "$path/work/cons_real_it`lastpass'.dt
> a", clear ;
.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(rural
> );
. gen geo="Rural/Urban";
. gen geono=rural;
. tempfile rur;
. save `rur';
. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;
.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(news)
> ;
. gen geo="North/Center/South";
. gen geono=news;
. tempfile new;
. save `new';
. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;
.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(reg_t
> pi);
. gen geo="TPI - 6 regions";
. gen geono=reg_tpi;
. tempfile rtp;
. save `rtp';
. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;
.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(strat
> a);
. gen geo="Provinces";
. gen geono=strata;
. tempfile str;
. save `str';
. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;
.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(spdom
> ain);
. gen geo="Spatial domains";
. gen geono=spdomain;
. tempfile r13;
. save `r13';
. clear;
. set obs 1;
. gen geo=" ";
. tempfile one;
. save `one';
. use          `nat';
. append using `one';
. append using `rur';
. append using `one';
. append using `new';
. append using `one';
. append using `rtp';
. append using `one';
. append using `str';
. append using `one';
. append using `r13';
. outsheet geo geono h_flex`lastpass' pg_flex`lastp
> ass' spg_flex`lastpass' dum rural news reg_tpi st
> rata spdomain using "$path/work/poverty_flexBask.
> csv", replace c;
. *************************************************
> *************************
> * Convergence graph (based on 5 iterations)
> *************************************************
> *************************;
. #delimit cr
delimiter now cr
. 
. clear
. set obs 1
. gen iteration=.
. tempfile converg
. save `converg'
. 
. forvalues X = 1/5 {
  2.         use "$path/work/cons_real_it`X'.dta", 
> clear
  3.         collapse (mean) h_flex`X' pg_flex`X' s
> pg_flex`X' [aw=popwt], by(strata)
  4.         rename h_flex`X' h_flex
  5.         rename pg_flex`X' pg_flex
  6.         rename spg_flex`X' spg_flex
  7.         gen iteration=`X'
  8.         order iteration
  9.         *sum
.         if `X' != 1     {
 10.                 append using `converg'
 11.                         }
 12.         save `converg', replace
 13.         }
. 
. use `converg', clear
. sum
. 
. twoway (connected h_flex iteration), by(, title(C
> onvergence graph: Poverty rate. %) subtitle(After
>  iterative procedure)) by(strata)
. graph export "$path/work/converge_pov_rate.tif", 
> replace
. 
. sort strata iteration
. 
. for var h_flex pg_flex spg_flex: replace X = roun
> d(X,0.01)
. 
. list strata iteration h_flex pg_flex spg_flex
.         
. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 140_iterate.do        (end)
> *************************************************
> *************************;
. cap log close;
. program error:  matching close brace not found
r(198);

end of do-file

r(198);
. local lastpass=0;
0; invalid name
r(198);

. local pass=1;
1; invalid name
r(198);

. 
. * Use these two lines to manually specify the num
> ber of iterations

. * and the cutpoint here in the do file.;

.   *local maxit=5;

.   *local cutpt=50;

. 
. * Use these few lines if you want to specify the 
> number of iterations

. * and percentile cutpoint by passing them as para
> meters on the command

. * line, e.g.:   wstata do new/iterate1.do 5 50;

. if "`1'"=="" | "`2'"=="" {;
.         di in red "Error: you need to specify num
> ber of iterations as first parameter";
Error: you need to specify number of iterations as 
> first parameter; invalid name
r(198);
.         di in red "       and percentile cutpoint
>  as second parameter on command line.";
. };
program error:  code follows on the same line as cl
> ose brace
r(198);

. local maxit=`1';
; invalid name
r(198);

. local cutpt=`2';
; invalid name
r(198);

. 
. tempfile cutoff;
_; invalid name
r(198);

. do "$path/new/140_iterate_bjorn.do" $it_n $bottom

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/140_iterate.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 40_iterate.log
  log type:  text
 opened on:  20 May 2013, 12:19:18

. clear

. set more off

. #delimit ;
delimiter now ;
. *global povline_initial "$path/in/povlines_first_
> iof.dta";
. *************************************************
> *************************
> * 140_iterate.do        (start)
> *
> * Purpose: Create flexible food basket and povert
> y line with iterative procedure
> *
> * This program will take the results from the fir
> st pass at the
> * poverty lines and applies the corresponding spa
> tial deflator to
> * re-select the relatively poor, their consumptio
> n bundles, and
> * their prices.
> *
> * Welfare indicator is here always temporally and
>  spatially adjusted per capita
> * expenditure. Here called cr_it< >.
> *
> * We will iterate this process 5 times which here
>  assures convergence.
> *
> * CA, Mar 2010: Relatively poor are those below l
> ast iterated poverty line
> * MAH, Apr 2010: Cleaning
> * URB, feb 2012: Commented out "drop if unit~=2"
> *************************************************
> *************************;
. /*
> This file uses:
>             in/povlines_first_new.dta
>         work/hhdata.dta
>         work/consump_nom.dta
>         work/own.dta
>         work/daily.dta
>         work/temp_index_reg_tpi.dta
>         work/cons_cod.dta
>         work/food_cat.dta
>         work/cons_real.dta
>         work/products.dta
>         work/match96_02.dta
>         new/conversions.do
>         
> This file creates (where `pass' is the number of 
> the iteration):
>         work/codes_food_basket_flex_it`pass'.dta
>         work/price_unit_flex_it`pass'.dta
>         work/quan_flex_it`pass'.dta
>         work/match_cod_flex_it`pass'.csv
>         work/relpoor_it`pass'.dta
>         work/povlines_it`pass'.dta
>         work/foodshares_it`pass'.dta
>         work/nat_pov_flex.csv
>         work/rur_pov_flex.csv
>         work/strata_pov_flex.csv
>         work/spdomain_pov_flex.csv
>         work/reg_tpi_pov_flex.csv
> */
> 
> *************************************************
> *************************;
. * Make a key file that will be used over and over
> , without change
> * in every iteration. This will include the TEMPO
> RALLY deflated consumption
> * and various HH data such as hhweight, spdomain,
>  etc.
> *************************************************
> *************************;
. use "$path/work/conpc.dta";

.         sort hhid;

.         merg hhid using "$path/work/hhdata.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/
> temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely
    identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.                 gen food_pc_tpi = food_pc_nom /tp
> i_trim;

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom
> ;

.         lab var food_pc_tpi "Temp-adjusted per ca
> pita food consumption/day";

.         lab var cons_pc_tpi "Temp adjusted total 
> consumption/day";

.         tempfile contpi;

.         sort hhid;

. save `contpi', replace;
(note: file /tmp/St02502.000008 not found)
file /tmp/St02502.000008 saved

. save contpi_, replace;
file contpi_.dta saved

. *use "$path/in/povlines_first_iterate.dta", clear
> ;
. *save "$path/work/povlines_first.dta", replace;
. *************************************************
> *************************;
. * Now set some information pertaining to the iter
> ations. For now we'll
> * manually set the number of iterations. Also spe
> cify the percentile
> * cutpoint that we will use for defining the rela
> tively poor.
> *************************************************
> *************************;
. local lastpass=0;

. local pass=1;

. * Use these two lines to manually specify the num
> ber of iterations
> * and the cutpoint here in the do file.;
.   *local maxit=5;
.   *local cutpt=50;
. * Use these few lines if you want to specify the 
> number of iterations
> * and percentile cutpoint by passing them as para
> meters on the command
> * line, e.g.:   wstata do new/iterate1.do 5 50;
. if "`1'"=="" | "`2'"=="" {      ;
.         di in red "Error: you need to specify num
> ber of iterations as first parameter";
.         di in red "       and percentile cutpoint
>  as second parameter on command line.";
. };

. local maxit=`1';

. local cutpt=`2';

. tempfile cutoff;

. while `pass' <= `maxit' {;
  2.         **************************************
> ************************************;
. *************************************************
> *************************;
. * Pick out the bottom X percent in real consumpti
> on per capita 
> * (temporally & spatially adjusted), as ranked by
>  the previous iteration.
> * The percentile to use is defined by "cutpt". Th
> is produces a file that
> * has the hhid, and a dummy variable indicating i
> f they were below the
> * cutpoint on the last iteration.
> *************************************************
> *************************;
. *************************************************
> *************************;
. /*
> * Comment out if IOF 2008/09. (This code included
>  instead of below code in order to replicate publ
> ished figures 2002/03). ( START ) ;
> 
>         if "`pass'"=="1" {      ;
>               use `contpi', clear;
>               sort spdomain;
>               merge spdomain using "$path/work/po
> vlines_first.dta";
>               tab _m;
>               drop _m;
> *              gen relpoor`pass'= cons_pc_tpi<=cu
> toff;
>                gen relpoor`pass'= cons_pc_tpi if 
> cons_pc_tpi<=cutoff;
>               rename cons_pc_tpi cr_it0;
>               sort hhid;
>          save "$path/work/relpoor_it`pass'.dta", 
> replace;
> *        use "$path/work/cons_real.dta", clear;
> *              gen cr_it0=cr2;
>         };
>         
> 
> * Comment out if IOF 2008/09. (This code included
>  instead of below code in order to replicate publ
> ished figures 2002/03). ( END ) ;
> */
> 
> 
> 
> * Comment out if IAF 2002/03. (This code below ex
> cluded in order to replicate published figures 20
> 02/03). ( START ) ;
.         if "`pass'"=="1" { ;
  3. * Find real income at cut point initially;
.                 use "$path/work/cons_real.dta", c
> lear;
  4.                                     gen cr_it0
> =cr2;
  5.                         cap drop one;
  6.             gen one=1;
  7.                                     collapse (
> p`cutpt') one cr_it`lastpass' [aw=popwt] ;
  8.                                     rename cr_
> it`lastpass' cutoff;
  9.                                     sort one;
 10.             save `cutoff', replace;
 11.  * Find relatively poor initially;
.             use "$path/work/cons_real.dta", clear
> ;
 12.                                               
>   gen cr_it`lastpass'=cr2;
 13.             cap drop one;
 14.             gen one=1;
 15.                                     sort one;
 16.             merge one using `cutoff';
 17.             tab _merge;
 18.             drop _merge;
 19.                                     drop one;
 20.                            gen relpoor`pass'=c
> r_it`lastpass'<=cutoff;
 21.             *lab var relpoor`pass' "=1 if in b
> ottom of PCE";
.                                     tab relpoor`p
> ass' [aw=popwt];
 22.                                     keep hhid 
> cr_it`lastpass' relpoor`pass' popwt;
 23.             sort hhid;
 24.         save $path/work/relpoor_it`pass'.dta, 
> replace;
 25.         };
 26. * Comment out if IAF 2002/03. (This code below
>  excluded in order to replicate published figures
>  2002/03). ( END ) ;
.                 if `pass'>1 {   ;
 27. * Find real income at cut point in iteration n
> umber `pass' ;
.                 use "$path/work/cons_real_it`last
> pass'.dta" , clear;
 28.                                               
>   cap drop one;
 29.                 gen one=1;
 30.                                               
>                   *CA modified from hhweight*hhsi
> ze to popwt;
.                 collapse (p`cutpt') one cr_it`las
> tpass' [aw=popwt] ;
 31.                         rename cr_it`lastpass'
>  cutoff;
 32.                                               
>                           sort one;
 33.         save `cutoff', replace;
 34.         * Find relatively poor in iteration nu
> mber `pass' ;
.                 use "$path/work/cons_real_it`last
> pass'.dta", clear;
 35.                                               
>   cap drop one;
 36.                 gen one=1;
 37.                                               
>   sort one;
 38.                 merge one using `cutoff';
 39.                 tab _merge;
 40.                 drop _merge;
 41.                                               
>   drop one;
 42.                 gen relpoor`pass'=cr_it`lastpa
> ss'<=cutoff;
 43.                 *lab var relpoor`pass' "=1 if 
> in bottom of PCE";
.                                                 t
> ab relpoor`pass' [aw=popwt];
 44. *CA modified to popwt above and to keep popwt 
> below;
.                 keep hhid cr_it`lastpass' relpoor
> `pass' popwt;
 45.                 sort hhid;
 46.         save "$path/work/relpoor_it`pass'.dta"
> , replace;
 47.         };
 48.         **************************************
> ************************************;
. * Get the consumption file, and select only those
>  codes that are food,
> * using our definition of "food", which includes 
> alcoholic beverages.
> *************************************************
> *************************;
.         use "$path/work/cons_cod.dta", clear;
 49. *CA modified to merge in work/hhdata.dta for b
> ootstrap;
.     sort hhid;
 50.     merge hhid using "$path/work/hhdata.dta";
 51.     tab _m;
 52.     drop _m;
 53.         /*
>                 sort product;
>                 merge product using "$path/work/f
> ood_cat.dta";
>                 tab _merge;
>                 keep if _merge==3;
>                 drop _merge;
> */
> 
>                                 * Only food trans
> actions ;
.                 keep if food_cat;
 54.                 sort hhid;
 55. **********************************************
> ****************************;
. * Merge with file that has temporally AND spatial
> ly adjusted consumption
> * per capita from the previous iteration, and als
> o identifies those below 
> * the cutoff. Then select only those who are belo
> w the cutoff.
> *************************************************
> *************************;
.                 merge hhid using "$path/work/relp
> oor_it`pass'.dta";
 56.                 tab _merge;
 57.                 drop _merge;
 58.                                 * Keep only tr
> ansactions by the poor ;
.                 keep if relpoor`pass';
 59. **********************************************
> ****************************;
. * Calculate HH level food shares. Since we're onl
> y doing shares here, we can
> * work with the expenditures without doing tempor
> al adjustment.
> *************************************************
> *************************;
.                 gen  food_expenditure = cod_hh_no
> m3;
 60.                 *gen  food_expenditure= own_va
> lued + daily_valued + monthly_valued + educ_value
> d;
.                 egen tot_food_expen= sum (food_ex
> pen), by (hhid) ;
 61.                 count if food_expenditure==.;
 62.                 count if tot_food_expen==.;
 63.                 gen food_share= food_expenditu
> re/tot_food_expen;
 64.                 count if food_share==.;
 65.                 drop if food_share==.;
 66.                 sort hhid product;
 67.                 tempfile foodshares;
 68.         save `foodshares', replace;
 69. **********************************************
> **********************************;
. * Now find the total (economy wise, e.g. not by H
> H) shares by each product in
> * order to select the most important goods in eac
> h domain's basket.
> *************************************************
> *******************************;
.                 collapse (mean) hhweight spdomain
> , by (hhid);
 70.                 sort hhid ;
 71.                  collapse (sum) hhweight , by(
> spdomain);
 72.                 rename hhweight tothhweight;
 73.                 tempfile tothhweight;
 74.                 sort spdomain;
 75.         save `tothhweight', replace;
 76.         use `foodshares', clear;
 77.                 sort spdomain;
 78.                 merge spdomain using `tothhwei
> ght';
 79.                 tab _merge;
 80.                 drop _merge;
 81.                 sort spdomain product;
 82.                 gen f_share_w`pass'=(food_shar
> e*hhweight)/tothhweight;
 83.                 collapse (sum) f_share_w`pass'
> , by(spdomain product descript);
 84.                                sort spdomain f
> _share_w`pass';
 85.                 by spdomain: gen cumshr`pass'=
>  sum(f_share_w`pass');
 86.                 count if cumshr`pass'<=.075;
 87.                 drop if cumshr`pass'<=.075;
 88.                 lab var f_share_w`pass' "avera
> ge food share for the 13 spatial domains";
 89.         save `foodshares', replace;
 90.                                               
>   * Number of spatials domains a food product app
> ears ;
.                 gen numreg=1;
 91.                 collapse (sum) numreg cumshr`p
> ass', by (product descript);
 92.                 keep product numreg descript;
 93.                 display _N;
 94.                 sort product;
 95.                                 * Include food
>  product labels ;
. *                merge product using "$path/work/
> products.dta";
. *                tab _merge;
. *                keep if _merge==3;
.                 keep product descript numreg;
 96.                   sort product;
 97.                      display _N;
 98.           save "$path/work/codes_food_basket_f
> lex_it`pass'.dta", replace;
 99. **********************************************
> ****************************;
. *************************************************
> *************************;
. * That is pretty much the part equivalent to "100
> _food_basket_flex.do",
> * which figures out the food shares for the relev
> ant reference group. Now
> * we figure out the prices with a code stream tha
> t is adapted from
> * "110_price_unit_flex.do".
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************************
> * Create sorted data set with daily + own expendi
> ture and the matched codes
> *************************************************
> *************************************;
. use "$path/in/cons_cod_trans.dta", clear;
100. *save "$path/work/cons_cod_trans.dta", replace
> ;
. *drop value   ;
. *drop quantity;
. keep hhid product food_cat valuez quantityz unit;
101. rename valuez    value;
102. rename quantityz quantity;
103. *drop count;
. drop if quantity==0 ;
104.         tempfile dd_acsort;
105.         save    `dd_acsort', replace;
106. /*
>         use "$path/work/daily.dta", clear;
>                 drop days;
>                 sort product;
>                 tempfile dd_acsort;
>         save `dd_acsort', replace;
>         
>         use "$path/work/own.dta", clear;
>                 keep hhid product valued quantity
> d unit;
>                 rename valued value;
>                 rename quantityd quantity;
>         
>                 *CHECK THE ZEROS IN quantity FOR 
> NOW DELETE;
>                 drop if quantity==0;
>         
>                 append using `dd_acsort';
> */
> 
>                 *CA modified to insert work/hhdat
> a.dta for bootstrap;
.                 sort hhid;
107.                 merge hhid using "$path/work/h
> hdata.dta";
108.                 tab _m;
109.                  drop if _m==2;
110.                 drop _m;
111.                                 sort product;
112.                 gen count=1;
113.         save `dd_acsort', replace;
114.         **************************************
> ************************************;
. * Merge the basket codes with the dd  and own dat
> a sets.
> * Drop all codes not a part of the flexible food 
> basket
> *************************************************
> *************************;
.                 merge product using "$path/work/c
> odes_food_basket_flex_it`pass'.dta";
115.                         tab _merge;
116.                 drop if _merge~=3;
117.                 drop _merge;
118. **********************************************
> ****************************************
> * Drop observations where product code, quantity 
> or value information is unavailable
> *************************************************
> *************************************;
.                 drop if product==. | value==. | q
> uantity==.  ;
119.         **************************************
> ************************************************
> * Convert non-KG quantities (units, liters) into 
> kilograms
> *************************************************
> *************************************;
. *do "$path/new/110a_conversions.do"
> 
> *************************************************
> *******************
> * There remain a few difficult to interpret obser
> vations such as liters
> * of fish and liters of pasta. These are dropped.
> *************************************************
> *******************;
. *                $MZ drop if unit~=2;
.         *****************************************
> *********************************;
. * Bring in the spdomain and reg_tpi variables, an
> d also the information on
> * relatively poor households.
> *************************************************
> *************************;
.                 preserve;
120.                                               
>   * Temporally adjusted expenditure ;
.                         use `contpi', clear;
121.                                 keep hhid hhwe
> ight spdomain reg_tpi survquar tpi_trim cons_pc_t
> pi ;
122.                                 sort hhid;
123.                                 tempfile hhd2;
124.                         save `hhd2', replace;
125.                 restore;
126.                                 compress;
127.                 sort hhid;
128.                 merge hhid using `hhd2';
129.                 tab _merge;
130.                 drop _merge;
131.                 sort hhid;
132.                 merge hhid using "$path/work/r
> elpoor_it`pass'.dta";
133.                 tab _merge;
134.                 drop _merge;
135.                                               
>   * Keep nominal food transactions by poor people
>  ;
.                 keep if relpoor`pass';
136.                 drop if product==.;
137.                                               
>                   * Temporally deflate transactio
> n values ;
.                 gen value_r=value/tpi_trim;
138. **********************************************
> ****************************;
. * Toss out the bottom 5% and top 5% of the HH-LEV
> EL prices per kg in
> * each spdomain & product combination. This shoul
> d eliminate outliers
> * that may have an undue influence on the price c
> alculation. 
> *************************************************
> *************************;
.                 gen hhppkg=value_r/quantity;
139.                 egen lower5=pctile(hhppkg), p(
> 5)  by(spdomain product);
140.                 egen upper5=pctile(hhppkg), p(
> 95) by(spdomain product);
141.                 keep if hhppkg>=lower5 & hhppk
> g<=upper5;
142. **********************************************
> ***********************
> * Note that we do prices in three ways. First, by
>  summing quantity and value 
> * This average price price_uw is thus quantity/va
> lue weighted. Second, we
> * calculate the price and take simple means for a
>  transaction weighted
> * price, price_ut. Last we take the median, price
> _um. But in the end
> * we only use price_unitw
> *************************************************
> ********************;
.                 gen price_ut`pass'=value_r/(quant
> ity*1000);
143.                 gen price_um`pass'=price_ut;
144.                 collapse (sum) 
>                         quantity value_r count bs
> wt (mean) price_ut (median) price_um [aw=hhweight
> ], 
>                         by(spdomain product);
145.                 *Generate weighted price per g
> ram ;
.                 gen price_uw`pass'=value_r/(quant
> ity*1000);
146.                 drop value_r quantity;
147.                 sort spdomain product;
148.                 lab var price_ut`pass' "Averag
> e of calculated prices - transaction weighted";
149.                 lab var price_um`pass' "Median
>  of prices";
150.                 lab var price_uw`pass' "Value 
> share weighted mean prices";
151. * Get an idea of the difference between the pr
> ice measures;
.                 gen ratiotw`pass'=price_ut`pass'/
> price_uw`pass';
152.                 gen ratiomw`pass'=price_um`pas
> s'/price_uw`pass';
153.                 sum ratiotw`pass' ratiomw`pass
> ';
154.                 sort product;
155.                 merge product using "$path/wor
> k/codes_food_basket_flex_it`pass'.dta";
156.                 tab _m;
157.                 count if _merge~=3;
158.                 drop if _merge~=3;
159.                 drop _merge;
160.                 sort product spdomain;
161.         save "$path/work/price_unit_flex_it`pa
> ss'.dta", replace;
162. **********************************************
> ****************************;
. *************************************************
> *************************;
. * That concludes the prices part. Now we move to 
> calculating the food
> * poverty lines, which draws code from "120_povli
> ne_flex.do" with very few
> * changes:
> * - The changes facilitate accumulating vectors
> *   of intermediate results across iterations, ra
> ther than generating a
> *   bunch of new files.
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************;
. * Use the file with the food basket (`foodshares'
> ), which is in shares. 
> * Then merge it with the prices file, and then wi
> th the calories file.
> * Along the way, drop those observations where we
>  have no price information
> * or no calorie information, but list them out.
> *************************************************
> *************************;
.         use `foodshares', clear;
163.                 sort product spdomain;
164.                 merge product spdomain using "
> $path/work/price_unit_flex_it`pass'.dta";
165.                         tab _merge;
166.                 list product spdomain descript
>  if _merge==1;
167.                         drop if _merge ~=3;
168.                 drop _merge;
169.                 sort product;
170.                         merge product using "$
> path/work/calperg.dta";
171.                 tab _merge;
172.                                               
>   * This tells where we are lacking calorie info 
> or are lacking quantity info due to 
>                 * missing price info above;
.                 list product spdomain descript if
>  _merge==1;
173.                         drop if _merge~=3;
174.                 drop _merge;
175.                 sort spdomain f_share_w`pass';
176.                                 *CA modified t
> o change count bswt;
.                 by spdomain: count if round(bswt)
> <10;
177.                                 sum bswt;
178.                                               
>   drop if round(bswt) < 10;
179.                                               
>                   * Total food share in spatial d
> omain ;
.                 by spdomain: egen baskshr=sum(f_s
> hare_w`pass');
180.                                 * Cumulated fo
> od share in spatial domain ;
.                 by spdomain: gen  cumshr =sum(f_s
> hare_w`pass');
181.                 drop if cumshr<=baskshr-.9;
182.                         drop baskshr;
183.                 by spdomain: egen baskshr=sum(
> f_share_w`pass');
184.                 tabstat baskshr , by(spdomain)
>  st(n mean sd min max);
185.                                               
>                   * How many grams in 1 MT exp on
>  food item ;
.                                 gen quan`pass'=f_
> share_w`pass'/price_uw`pass';
186.                                 * How many cal
> ories in 1 MT exp on food item ;
.                 gen cal_ir`pass'=quan`pass'*calpe
> rg;
187.                                 * how many cal
> ories in 1 MT exp in food basket ;
.                 by spdomain: egen calreg=sum(cal_
> ir);
188.                         sort spdomain;
189.                 merge spdomain using "$path/wo
> rk/calpp.dta";
190.                 tab _merge;
191.                 drop _merge;
192.                                               
>           * get the expansion factor to hit 95% o
> f calorie requirements ;
.                 gen ratio=.95*calpp/calreg;
193.                         replace quan`pass'=qua
> n`pass'*ratio;
194.                 replace cal_ir`pass'=quan`pass
> '*calperg;
195.                         sort spdomain product;
196.                 by spdomain: egen chkcal=sum(c
> al_ir`pass');
197.                 replace chkcal=chkcal/.95-calp
> p ;
198.                                               
>   tabstat chkcal , by(spdomain) st(n mean sd min 
> max);
199.                         gen val_ir`pass'=quan`
> pass'*price_uw`pass';
200.                         by spdomain: egen povl
> ine_f_flex90_`pass'=sum(val_ir`pass');
201.                 replace povline_f=povline_f_fl
> ex90_`pass'/.9;
202.                 *drop product96;
. keep product spdomain quan`pass'  price_uw`pass' 
> val_ir`pass' povline_f_flex90_`pass' calpp calper
> g;
203.                     save "$path/work/quan_flex
> _it`pass'.dta", replace;
204.                         collapse (mean) povlin
> e_f_flex90_`pass', by (spdomain);
205.                                               
>   keep spdomain povline_f_flex90_`pass';
206.                 sort spdomain;
207.                 save "$path/work/povline_food_
> flex_it`pass'.dta", replace;
208.         **************************************
> ************************************;
. *************************************************
> *************************;
. * Now comes the part that draws the non-food and 
> total poverty lines,
> * and generates estimates of poverty measures. Th
> is is drawn from 
> * "130_povmeas_flex.do" with a few changes.
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************
> * Calculate non-food expenditure for HH around th
> e food poverty line
> *
> * Develop a discrete triangular weighted distribu
> tion. This gives a
> * weight of  1 to HH at +/- 18-20% from food pove
> rty line, and
> * weight of  2 to HH at +/- 16-18% from food pove
> rty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food pove
> rty line.
> * This weight is called triwt below.
> *************************************************
> *************************;
.         use `contpi', clear;
209.                 sort spdomain;
210.                 merge spdomain using "$path/wo
> rk/povline_food_flex_it`pass'.dta";
211.                 tab _merge;
212.                 drop _merge;
213.                 gen triwt=1 ;
214.                 replace triwt = 11 - round(50*
> abs(cons_pc_tpi/povline_f_flex90_`pass'-1)+0.5) i
> f abs(cons_pc_tpi/povline_f_flex90_`pass'-1)<=0.2
> ;
215.                                               
>                   * Nearness to poverty line and 
> population weights ;
.                 gen tripopwt=(triwt+1)*hhweight*h
> hsize;
216.                                               
>   preserve;
217.                         collapse (mean) nf_pc_
> nom [aw=tripopwt] , by(spdomain);
218.                         rename nf_pc_nom povli
> ne_nf_flex`pass';
219.                         lab var povline_nf_fle
> x`pass' "Nonfood poverty line. Flexible bundle";
220.                         tempfile znf;
221.                         sort spdomain;
222.                         save `znf', replace;
223.                                               
>                   restore;
224.                                 sort spdomain;
225.                 merge spdomain using `znf';
226.                 tab _merge;
227.                 drop _merge;
228. **********************************************
> ****************************
> * Poverty line is the sum of the food and non-foo
> d poverty lines
> *************************************************
> *************************;
.                 gen povline_flex`pass'=povline_f_
> flex90_`pass' + povline_nf_flex`pass';
229. keep spdomain povline_flex`pass';
230.                 sort spdomain;
231.         save "$path/work/povlines_it`pass'.dta
> ", replace;
232. **********************************************
> ****************************;
. * Create spatial price index, based on the total 
> poverty line, with
> * adjustment so that mean (and total) nominal con
> sumption equals
> * mean (and total) spatially deflated consumption
> .
> *
> * Choose arbitrary strata to be the base at first
> : we just use the first stratum.
> *************************************************
> *************************;
.         use `contpi', clear;
233.                 sort spdomain;
234.                 merge spdomain using "$path/wo
> rk/povlines_it`pass'.dta";
235.                 tab _merge;
236.                 drop _merge;
237.                 gen cr= cons_pc_tpi ;
238.                 gen linpob`pass'=povline_flex`
> pass';
239.                 qui sum linpob`pass' if spdoma
> in==1, meanonly;
240.                 global spi_base=r(mean);
241.                 gen spi`pass'=linpob`pass'/$sp
> i_base;
242.                 gen cr_it`pass'=cr/spi`pass';
243.                 qui sum cr [aw=hhweight*hhsize
> ];
244.                 global sumcr=r(sum);
245.                 qui sum cr_it`pass' [aw=hhweig
> ht*hhsize];
246.                 global sumcr2=r(sum);
247.                 replace spi`pass'=spi`pass'*$s
> umcr2/$sumcr;
248.                 gen linpobr`pass'=linpob`pass'
> /spi`pass';
249.                 replace cr_it`pass'=cr/spi`pas
> s';
250.                 su cr cr_it`pass' linpob`pass'
>  linpobr`pass' [aw=hhweight*hhsize];
251.                 lab var cr "Temporally-adjuste
> d cons pc";
252.                 lab var cr_it`pass' "Spatially
>  & temporally adjusted cons pc";
253.                 lab var linpob`pass' "Poverty 
> line";
254.                 lab var linpobr`pass' "Real po
> verty line";
255.                 lab var spi`pass' "Spatial pri
> ce index";
256.                 gen linpob=linpob`pass';
257. **********************************************
> ****************************
> * calculate poverty measures with the flexible fo
> od bundle
> *************************************************
> *************************;
.                 gen h=100 if cr_it`pass'<=linpobr
> `pass' & linpobr`pass'~=. & cr_it`pass'~=.;
258.                 replace  h   = 0 if cr_it`pass
> ' > linpobr`pass' & linpobr`pass'~=. & cr_it`pass
> '~=.;
259.                 gen      pg  = ((linpobr`pass'
>  - cr_it`pass' )/linpobr`pass') *100;
260.                 replace  pg  = 0             i
> f h==0;
261.                 gen      spg = ((( linpobr`pas
> s' - cr_it`pass' )/ linpobr`pass' )^2)*100;
262.                 replace  spg = 0             i
> f h==0;
263.                 gen h_flex`pass'  =h;
264.                 gen pg_flex`pass' =pg;
265.                 gen spg_flex`pass'=spg;
266.                                 lab var h_flex
> `pass'   "Poverty headcount. Flexible bundle";
267.                 lab var pg_flex`pass'  "Povert
> y gap. Flexible bundle";
268.                 lab var spg_flex`pass' "Square
> d poverty gap. Flexible bundle";
269.                 gen popwt=hhsize*hhweight;
270.                         * Stata 10.1 syntax ;
.                         svyset , clear;
271.                         svyset [pweight=popwt]
>  , str(strata) psu(psu);
272.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass';
273.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(rural);
274.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(strata);
275.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(strata rural);
276.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(spdomain);
277. *preserve;
. keep hhid popwt cr_it`pass' h_flex`pass' pg_flex`
> pass' spg_flex`pass' rural news reg_tpi strata sp
> domain;
278.                 compress;
279.                 sort hhid;
280.         save "$path/work/cons_real_it`pass'.dt
> a" , replace;
281. *restore;
.                                 * New cutoff poin
> t (percentile) to use in next iteration is equal 
> to the poverty ;
.                 * rate in this iteration ;
.                                                 s
> um h_flex`pass' [aw=popwt] ;
282.                                 * Comment out 
> next line for IAF 2002/03 in order to replicate o
> fficial figures ( START );
.                 * URB: In this case, we just use 
> the poorest 50% as there are too few actually poo
> r to calculate the bundle and prices..;
.                 local cutpt= $tpi_bottom;
283. *               local cutpt= round(r(mean));
.                 * Comment out next line for IAF 2
> 002/03 in order to replicate official figures ( E
> ND );
. *       save foodshares tempfile to disk;
.         use `foodshares', clear;
284.         save "$path/work/foodshares_it`pass'.d
> ta", replace;
285.         local lastpass = `pass';
286.         local pass = `pass' + 1;
287.         };
(note: file /tmp/St02502.000009 not found)
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor1 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 4,740.3184       69.97       69.97
          1 | 2,034.6816       30.03      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it1.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(311450 observations deleted)
    0
    0
(792 missing values generated)
  792
(792 observations deleted)
(note: file /tmp/St02502.00000a not found)
file /tmp/St02502.00000a saved
(note: file /tmp/St02502.00000b not found)
file /tmp/St02502.00000b saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     99,803      100.00      100.00
------------+-----------------------------------
      Total |     99,803      100.00
  152
(152 observations deleted)
file /tmp/St02502.00000a saved
45
45
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it1.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.00000c not found)
file /tmp/St02502.00000c saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.00000c saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     11,416       13.40       13.40
          3 |     73,788       86.60      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(11416 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.00000e not found)
file /tmp/St02502.00000e saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         28        0.04        0.04
          3 |     73,788       99.96      100.00
------------+-----------------------------------
      Total |     73,816      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     73,816      100.00      100.00
------------+-----------------------------------
      Total |     73,816      100.00
(58845 observations deleted)
(10 observations deleted)
(1057 observations deleted)
(1 missing value generated)
(1 missing value generated)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw1 |       214    1.252188     .533108   
> .8704481   5.979547
    ratiomw1 |       214    1.086329    .4376949   
>        0   4.751065
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        215      100.00      100.00
------------+-----------------------------------
      Total |        215      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it1.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         77       35.81       35.81
          3 |        138       64.19      100.00
------------+-----------------------------------
      Total |        215      100.00
(77 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         17       10.97       10.97
          3 |        138       89.03      100.00
------------+-----------------------------------
      Total |        155      100.00
(17 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    2
---------------------------------------------------
-> spdomain = Central urban
    7
---------------------------------------------------
-> spdomain = Eastern
    0
---------------------------------------------------
-> spdomain = Northern
    0
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       138    93.04348    96.72422   
>        2        665
(9 observations deleted)
(11 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        26  .9014085         0
Central urban |        14  .8130065         0
      Eastern |        26  .9076375         0
     Northern |        25  .9090231         0
      Western |        27  .9042501         0
--------------+------------------------------
        Total |       118  .8945561  .0301767
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9014085  .9014085
Central urban |  .8130065  .8130065
      Eastern |  .9076375  .9076375
     Northern |  .9090231  .9090231
      Western |  .9042501  .9042501
--------------+--------------------
        Total |  .8130065  .9090231
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        118      100.00      100.00
------------+-----------------------------------
      Total |        118      100.00
(118 real changes made)
(113 real changes made)
(118 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        26  .0001799         0
Central urban |        14 -.0000128         0
      Eastern |        26 -.0000899         0
     Northern |        25 -.0001156         0
      Western |        27  .0001285         0
--------------+------------------------------
        Total |       118  .0000232   .000123
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .0001799  .0001799
Central urban | -.0000128 -.0000128
      Eastern | -.0000899 -.0000899
     Northern | -.0001156 -.0001156
      Western |  .0001285  .0001285
--------------+--------------------
        Total | -.0001156  .0001799
-----------------------------------
(118 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it1.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it1.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(275 real changes made)
(note: file /tmp/St02502.00000g not found)
file /tmp/St02502.00000g saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it1.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it1.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it1 |    6775   200636622    9399.102    7
> 5300.7   114.3488   1.15e+07
     linpob1 |    6775   200636622    8816.665   14
> 841.94   2295.988   58962.39
    linpobr1 |    6775   200636622    8382.393     
>      0   8382.393   8382.393
(1507 missing values generated)
(1507 real changes made)
(1507 real changes made)
(1507 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex1 |   80.26557   1.062561      78.17938 
>    82.35175
    pg_flex1 |   46.24044   .8354983      44.60007 
>    47.88082
   spg_flex1 |   30.97067   .7281799      29.54099 
>    32.40034
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex1      |
       Urban |   75.37546   3.216785      69.05977 
>    81.69114
       Rural |   81.01251   1.136435      78.78128 
>    83.24373
-------------+-------------------------------------
> -----------
pg_flex1     |
       Urban |   53.71416   3.445674      46.94909 
>    60.47924
       Rural |   45.09887   .8140485      43.50061 
>    46.69714
-------------+-------------------------------------
> -----------
spg_flex1    |
       Urban |   43.44286   3.381168      36.80443 
>    50.08129
       Rural |    29.0656   .6484292      27.79251 
>     30.3387
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex1      |
     KAMPALA |    87.6499   2.776667      82.19832 
>    93.10148
   _subpop_2 |   77.88982   5.135115      67.80777 
>    87.97187
   _subpop_3 |   91.07631   1.795039      87.55201 
>    94.60061
   _subpop_4 |   74.01664   2.749553      68.61829 
>    79.41498
     EASTERN |   80.55027   2.613759      75.41854 
>      85.682
   _subpop_6 |   69.83465   2.880081      64.18003 
>    75.48926
   _subpop_7 |   90.61182   3.962735      82.83157 
>    98.39207
   _subpop_8 |   75.89978   3.951777      68.14104 
>    83.65851
   _subpop_9 |   86.89741   3.111629      80.78818 
>    93.00664
  _subpop_10 |   79.64297   2.890097      73.96868 
>    85.31725
-------------+-------------------------------------
> -----------
pg_flex1     |
     KAMPALA |   74.66873   3.360241      68.07139 
>    81.26607
   _subpop_2 |    53.0058   3.881631      45.38479 
>    60.62682
   _subpop_3 |   61.67015   2.274721      57.20406 
>    66.13623
   _subpop_4 |   35.23562   1.816196      31.66978 
>    38.80145
     EASTERN |   43.01513   1.746222      39.58668 
>    46.44358
   _subpop_6 |   31.38743   2.248057       26.9737 
>    35.80116
   _subpop_7 |   65.87423    4.08622      57.85154 
>    73.89693
   _subpop_8 |   32.86208   2.765291      27.43283 
>    38.29132
   _subpop_9 |    51.8713   2.143194      47.66345 
>    56.07915
  _subpop_10 |   44.96663   1.910809      41.21504 
>    48.71822
-------------+-------------------------------------
> -----------
spg_flex1    |
     KAMPALA |   65.97072   3.686804      58.73222 
>    73.20922
   _subpop_2 |   39.14366   3.193491      32.87371 
>    45.41361
   _subpop_3 |   45.92913   2.386079      41.24441 
>    50.61384
   _subpop_4 |   20.26663   1.291697      17.73057 
>    22.80269
     EASTERN |    26.2806   1.338404      23.65284 
>    28.90836
   _subpop_6 |   17.80533     1.6793      14.50827 
>    21.10239
   _subpop_7 |   50.33342   3.873622      42.72813 
>    57.93871
   _subpop_8 |   17.17144   1.762878      13.71028 
>    20.63259
   _subpop_9 |   35.12075   1.752287      31.68039 
>    38.56111
  _subpop_10 |    28.7572   1.441322      25.92738 
>    31.58703
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex1      |
   _subpop_1 |    87.6499   2.776667      82.19832 
>    93.10148
   _subpop_2 |   95.48657   1.516357      92.50943 
>    98.46372
   _subpop_3 |   73.39131   5.696102      62.20785 
>    84.57477
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   89.89926   2.093657      85.78867 
>    94.00985
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   75.44072   2.759737      70.02238 
>    80.85906
   _subpop_8 |   56.26273   4.645491      47.14199 
>    65.38348
   _subpop_9 |   82.47302   2.680235      77.21077 
>    87.73527
  _subpop_10 |   30.51595   9.566351      11.73382 
>    49.29808
  _subpop_11 |   74.11862   2.472907      69.26343 
>    78.97381
  _subpop_12 |   36.47187   8.259363      20.25582 
>    52.68792
  _subpop_13 |    92.6165   3.899015      84.96135 
>    100.2716
  _subpop_14 |   46.71982   8.315395      30.39376 
>    63.04589
  _subpop_15 |   80.22252   3.374937      73.59632 
>    86.84872
  _subpop_16 |   83.96739   5.725892      72.72544 
>    95.20935
  _subpop_17 |   87.08055   3.295113      80.61107 
>    93.55002
  _subpop_18 |   46.08261   4.959741      36.34488 
>    55.82034
  _subpop_19 |   81.35317   2.888902      75.68123 
>    87.02511
-------------+-------------------------------------
> -----------
pg_flex1     |
   _subpop_1 |   74.66873   3.360241      68.07139 
>    81.26607
   _subpop_2 |   74.46037   4.298087       66.0217 
>    82.89904
   _subpop_3 |   47.52106   3.884168      39.89507 
>    55.14706
   _subpop_4 |   73.30385   6.102828      61.32183 
>    85.28586
   _subpop_5 |   59.26833   2.244757      54.86108 
>    63.67558
   _subpop_6 |   18.53779   7.378365      4.051449 
>    33.02413
   _subpop_7 |   36.17031   1.852233      32.53372 
>     39.8069
   _subpop_8 |   27.91137   2.824175      22.36652 
>    33.45623
   _subpop_9 |   44.21084   1.761986      40.75144 
>    47.67024
  _subpop_10 |   9.551439   3.058158      3.547192 
>    15.55569
  _subpop_11 |   33.76657   2.270542      29.30869 
>    38.22445
  _subpop_12 |   11.96405   2.939137      6.193486 
>    17.73462
  _subpop_13 |    67.8704    4.07603      59.86771 
>    75.87309
  _subpop_14 |     17.573   4.496215      8.745339 
>    26.40066
  _subpop_15 |   35.12701   2.643505      29.93688 
>    40.31715
  _subpop_16 |   46.56073   5.283435      36.18748 
>    56.93398
  _subpop_17 |   52.20324   2.256754      47.77243 
>    56.63404
  _subpop_18 |   20.72855   3.133654      14.57608 
>    26.88102
  _subpop_19 |   46.20178   1.901451      42.46856 
>      49.935
-------------+-------------------------------------
> -----------
spg_flex1    |
   _subpop_1 |   65.97072   3.686804      58.73222 
>    73.20922
   _subpop_2 |   60.90852   6.377548      48.38713 
>     73.4299
   _subpop_3 |    33.5796   2.956731      27.77449 
>    39.38471
   _subpop_4 |   61.68942   7.121926      47.70656 
>    75.67229
   _subpop_5 |   42.67536   2.053409      38.64379 
>    46.70693
   _subpop_6 |   8.476944   3.920067      .7804642 
>    16.17342
   _subpop_7 |   20.92658   1.327699      18.31984 
>    23.53332
   _subpop_8 |   17.38895   1.980004       13.5015 
>     21.2764
   _subpop_9 |   26.98452    1.38361        24.268 
>    29.70103
  _subpop_10 |   4.697739   1.624226      1.508808 
>     7.88667
  _subpop_11 |   19.23347   1.756658      15.78453 
>    22.68241
  _subpop_12 |   7.061679   3.427505      .3322736 
>    13.79108
  _subpop_13 |   51.93567   3.921752      44.23589 
>    59.63546
  _subpop_14 |   8.424223   2.747368      3.030168 
>    13.81828
  _subpop_15 |   18.46726   1.736552      15.05779 
>    21.87672
  _subpop_16 |    30.1952   5.222944      19.94071 
>    40.44969
  _subpop_17 |   35.42862   1.829275      31.83711 
>    39.02014
  _subpop_18 |   10.53484   2.260803       6.09608 
>    14.97359
  _subpop_19 |    29.6858   1.437422      26.86363 
>    32.50796
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex1      |
   _subpop_1 |   81.70514   3.320774      75.18529 
>      88.225
   _subpop_2 |   91.63447   1.618542       88.4567 
>    94.81224
     Eastern |   77.61428   1.911707      73.86092 
>    81.36764
    Northern |   75.24411     2.0962      71.12852 
>    79.35969
     Western |   83.37574   2.091208      79.26996 
>    87.48152
-------------+-------------------------------------
> -----------
pg_flex1     |
   _subpop_1 |   53.43729   2.429147      48.66802 
>    58.20657
   _subpop_2 |   74.32357   2.467422      69.47915 
>    79.16799
     Eastern |   39.51928   1.288252      36.98999 
>    42.04858
    Northern |   37.46555   1.632287       34.2608 
>    40.67031
     Western |   48.51943   1.443037      45.68624 
>    51.35262
-------------+-------------------------------------
> -----------
spg_flex1    |
   _subpop_1 |   38.16046   1.928362       34.3744 
>    41.94652
   _subpop_2 |   63.74108   3.177293      57.50293 
>    69.97923
     Eastern |   23.57813   .9627805      21.68785 
>     25.4684
    Northern |    22.8547   1.256833      20.38709 
>    25.32231
     Western |   32.03157   1.162611      29.74895 
>    34.31418
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex1 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it1.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex1 |    6775   200636622    80.26557   39
> .80238          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it1.dta saved
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor2 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 4,742.0085       69.99       69.99
          1 | 2,032.9915       30.01      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it2.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(292524 observations deleted)
    0
    0
(947 missing values generated)
  947
(947 observations deleted)
(note: file /tmp/St02502.00000h not found)
file /tmp/St02502.00000h saved
(note: file /tmp/St02502.00000i not found)
file /tmp/St02502.00000i saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    118,574      100.00      100.00
------------+-----------------------------------
      Total |    118,574      100.00
  153
(153 observations deleted)
file /tmp/St02502.00000h saved
48
48
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it2.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.00000j not found)
file /tmp/St02502.00000j saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.00000j saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      7,718        9.06        9.06
          3 |     77,486       90.94      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(7718 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.00000l not found)
file /tmp/St02502.00000l saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         24        0.03        0.03
          3 |     77,486       99.97      100.00
------------+-----------------------------------
      Total |     77,510      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     77,510      100.00      100.00
------------+-----------------------------------
      Total |     77,510      100.00
(57385 observations deleted)
(17 observations deleted)
(1434 observations deleted)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw2 |       231    1.265099    .6237359   
> .7641575   7.890666
    ratiomw2 |       231     1.12691    .5384967   
>        0   5.918852
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        231      100.00      100.00
------------+-----------------------------------
      Total |        231      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it2.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         85       36.80       36.80
          3 |        146       63.20      100.00
------------+-----------------------------------
      Total |        231      100.00
(85 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        8.75        8.75
          3 |        146       91.25      100.00
------------+-----------------------------------
      Total |        160      100.00
(14 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    0
---------------------------------------------------
-> spdomain = Central urban
    0
---------------------------------------------------
-> spdomain = Eastern
    1
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       146    114.6644    100.8113   
>        6        476
(2 observations deleted)
(14 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27  .9028558         0
Central urban |        32  .9033799         0
      Eastern |        23  .9069439         0
     Northern |        21  .9069096         0
      Western |        27  .9063116         0
--------------+------------------------------
        Total |       130  .9050807  .0017984
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9028558  .9028558
Central urban |  .9033799  .9033799
      Eastern |  .9069439  .9069439
     Northern |  .9069096  .9069096
      Western |  .9063116  .9063116
--------------+--------------------
        Total |  .9028558  .9069439
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        130      100.00      100.00
------------+-----------------------------------
      Total |        130      100.00
(130 real changes made)
(125 real changes made)
(130 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27 -.0000771         0
Central urban |        32 -.0000128         0
      Eastern |        23 -.0000899         0
     Northern |        21 -.0001156         0
      Western |        27 -.0001285         0
--------------+------------------------------
        Total |       130 -.0000805  .0000429
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural | -.0000771 -.0000771
Central urban | -.0000128 -.0000128
      Eastern | -.0000899 -.0000899
     Northern | -.0001156 -.0001156
      Western | -.0001285 -.0001285
--------------+--------------------
        Total | -.0001285 -.0000128
-----------------------------------
(130 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it2.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it2.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(244 real changes made)
(note: file /tmp/St02502.00000n not found)
file /tmp/St02502.00000n saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it2.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it2.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it2 |    6775   200636622    9399.102    7
> 7518.7   120.9728   1.22e+07
     linpob2 |    6775   200636622    8509.616   13
> 843.84   2253.021   55226.62
    linpobr2 |    6775   200636622    8306.112   .0
> 004776   8306.111   8306.112
(1524 missing values generated)
(1524 real changes made)
(1524 real changes made)
(1524 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex2 |   79.99166   1.073911      77.88319 
>    82.10013
    pg_flex2 |   45.99465   .8305928       44.3639 
>     47.6254
   spg_flex2 |   30.73885   .7198597      29.32551 
>    32.15219
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex2      |
       Urban |   75.24888   3.234309      68.89879 
>    81.59898
       Rural |   80.71609   1.150976      78.45632 
>    82.97587
-------------+-------------------------------------
> -----------
pg_flex2     |
       Urban |   52.93964   3.408698      46.24716 
>    59.63212
       Rural |   44.93384   .8141659      43.33534 
>    46.53233
-------------+-------------------------------------
> -----------
spg_flex2    |
       Urban |   42.56217   3.332787      36.01873 
>    49.10561
       Rural |   28.93291   .6482066      27.66025 
>    30.20556
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex2      |
     KAMPALA |   87.64422   2.776729      82.19252 
>    93.09592
   _subpop_2 |   77.88982   5.135115      67.80777 
>    87.97187
   _subpop_3 |   91.07631   1.795039      87.55201 
>    94.60061
   _subpop_4 |   74.01664   2.749553      68.61829 
>    79.41498
     EASTERN |   80.55027   2.613759      75.41854 
>      85.682
   _subpop_6 |   67.45598    3.17546      61.22142 
>    73.69053
   _subpop_7 |    90.5675   3.961386       82.7899 
>     98.3451
   _subpop_8 |   75.37696   4.024637      67.47517 
>    83.27875
   _subpop_9 |   86.89741   3.111629      80.78818 
>    93.00664
  _subpop_10 |   79.64297   2.890097      73.96868 
>    85.31725
-------------+-------------------------------------
> -----------
pg_flex2     |
     KAMPALA |   73.79064   3.416684      67.08248 
>     80.4988
   _subpop_2 |   52.71407   3.807338      45.23892 
>    60.18922
   _subpop_3 |   61.39577   2.281224      56.91692 
>    65.87462
   _subpop_4 |   35.22593   1.816111      31.66027 
>     38.7916
     EASTERN |   43.00576   1.746187      39.57738 
>    46.43414
   _subpop_6 |     30.679   2.244929      26.27141 
>    35.08659
   _subpop_7 |   65.40323   4.092182      57.36883 
>    73.43763
   _subpop_8 |   32.04602   2.746429      26.65381 
>    37.43823
   _subpop_9 |   51.83446   2.143127      47.62675 
>    56.04218
  _subpop_10 |   44.93016   1.910128       41.1799 
>    48.68042
-------------+-------------------------------------
> -----------
spg_flex2    |
     KAMPALA |   64.81358   3.735228         57.48 
>    72.14715
   _subpop_2 |   38.77502   3.104368      32.68005 
>       44.87
   _subpop_3 |   45.66665   2.360916      41.03133 
>    50.30196
   _subpop_4 |   20.25916   1.291465      17.72355 
>    22.79476
     EASTERN |   26.27224   1.338254      23.64478 
>    28.89971
   _subpop_6 |   17.29599   1.659738      14.03734 
>    20.55464
   _subpop_7 |   49.74399   3.866827      42.15204 
>    57.33594
   _subpop_8 |   16.58286    1.72588      13.19434 
>    19.97137
   _subpop_9 |   35.08554   1.751785      31.64617 
>    38.52491
  _subpop_10 |   28.72313   1.440442      25.89503 
>    31.55123
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex2      |
   _subpop_1 |   87.64422   2.776729      82.19252 
>    93.09592
   _subpop_2 |   95.48657   1.516357      92.50943 
>    98.46372
   _subpop_3 |   73.39131   5.696102      62.20785 
>    84.57477
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   89.89926   2.093657      85.78867 
>    94.00985
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   75.44072   2.759737      70.02238 
>    80.85906
   _subpop_8 |   56.26273   4.645491      47.14199 
>    65.38348
   _subpop_9 |   82.47302   2.680235      77.21077 
>    87.73527
  _subpop_10 |   28.82766   9.877507      9.434622 
>     48.2207
  _subpop_11 |   71.66473   2.945749      65.88118 
>    77.44827
  _subpop_12 |   36.47187   8.259363      20.25582 
>    52.68792
  _subpop_13 |   92.57054   3.896837      84.91967 
>    100.2214
  _subpop_14 |   46.71982   8.315395      30.39376 
>    63.04589
  _subpop_15 |   79.62226   3.494443      72.76143 
>    86.48308
  _subpop_16 |   83.96739   5.725892      72.72544 
>    95.20935
  _subpop_17 |   87.08055   3.295113      80.61107 
>    93.55002
  _subpop_18 |   46.08261   4.959741      36.34488 
>    55.82034
  _subpop_19 |   81.35317   2.888902      75.68123 
>    87.02511
-------------+-------------------------------------
> -----------
pg_flex2     |
   _subpop_1 |   73.79064   3.416684      67.08248 
>     80.4988
   _subpop_2 |   73.03806   4.546895       64.1109 
>    81.96523
   _subpop_3 |   47.51836      3.884      39.89269 
>    55.14402
   _subpop_4 |   71.71598   6.513158      58.92835 
>    84.50361
   _subpop_5 |   59.26512   2.244803      54.85778 
>    63.67247
   _subpop_6 |   18.53029   7.376389      4.047828 
>    33.01275
   _subpop_7 |   36.16051   1.852166      32.52405 
>    39.79696
   _subpop_8 |    27.9043    2.82399       22.3598 
>    33.44879
   _subpop_9 |   44.20129   1.761964      40.74193 
>    47.66065
  _subpop_10 |   9.177301   2.934732      3.415383 
>    14.93922
  _subpop_11 |   33.02172    2.27429      28.55649 
>    37.48696
  _subpop_12 |   11.49666   3.152703      5.306791 
>    17.68653
  _subpop_13 |   67.39926   4.082859      59.38317 
>    75.41536
  _subpop_14 |   17.01714   4.437645      8.304475 
>    25.72981
  _subpop_15 |   34.27241    2.63321      29.10249 
>    39.44234
  _subpop_16 |   46.52139   5.285719      36.14365 
>    56.89913
  _subpop_17 |   52.16655   2.256643      47.73596 
>    56.59714
  _subpop_18 |   20.70188   3.132645      14.55139 
>    26.85237
  _subpop_19 |   46.16481   1.900796      42.43288 
>    49.89674
-------------+-------------------------------------
> -----------
spg_flex2    |
   _subpop_1 |   64.81358   3.735228         57.48 
>    72.14715
   _subpop_2 |    59.1093   6.658014      46.03727 
>    72.18134
   _subpop_3 |   33.57668   2.956551      27.77193 
>    39.38144
   _subpop_4 |   60.17239   7.245675      45.94657 
>    74.39821
   _subpop_5 |   42.67189   2.053379      38.64038 
>     46.7034
   _subpop_6 |   8.471921   3.918349      .7788158 
>    16.16503
   _subpop_7 |   20.91897   1.327468      18.31268 
>    23.52526
   _subpop_8 |    17.3837   1.979591      13.49706 
>    21.27034
   _subpop_9 |   26.97592    1.38348      24.25966 
>    29.69218
  _subpop_10 |   4.518077   1.573815      1.428122 
>    7.608033
  _subpop_11 |   18.68821   1.739061      15.27382 
>     22.1026
  _subpop_12 |   6.881823   3.442237      .1234937 
>    13.64015
  _subpop_13 |   51.33108   3.916997      43.64063 
>    59.02153
  _subpop_14 |   8.082543    2.68421      2.812489 
>     13.3526
  _subpop_15 |    17.8421   1.703229      14.49806 
>    21.18614
  _subpop_16 |    30.1608   5.223197      19.90581 
>    40.41578
  _subpop_17 |   35.39336   1.828714      31.80294 
>    38.98377
  _subpop_18 |   10.51341   2.259005      6.078185 
>    14.94864
  _subpop_19 |   29.65108   1.436564      26.83059 
>    32.47156
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex2      |
   _subpop_1 |   81.70514   3.320774      75.18529 
>      88.225
   _subpop_2 |   91.63148   1.618625      88.45354 
>    94.80941
     Eastern |   77.61428   1.911707      73.86092 
>    81.36764
    Northern |   73.86967   2.252177      69.44785 
>    78.29149
     Western |   83.37574   2.091208      79.26996 
>    87.48152
-------------+-------------------------------------
> -----------
pg_flex2     |
   _subpop_1 |   53.43433   2.429074       48.6652 
>    58.20346
   _subpop_2 |   73.15259   2.581343       68.0845 
>    78.22068
     Eastern |   39.50977   1.288214      36.98055 
>      42.039
    Northern |   36.75921   1.628878      33.56115 
>    39.95727
     Western |   48.48277   1.442855      45.64993 
>     51.3156
-------------+-------------------------------------
> -----------
spg_flex2    |
   _subpop_1 |   38.15726   1.928267      34.37139 
>    41.94313
   _subpop_2 |   62.34017   3.281426      55.89757 
>    68.78277
     Eastern |   23.57017   .9626494      21.68015 
>    25.46019
    Northern |   22.30565   1.244901      19.86147 
>    24.74983
     Western |   31.99691    1.16219      29.71512 
>     34.2787
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex2 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it2.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex2 |    6775   200636622    79.99166   40
> .00921          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it2.dta saved
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor3 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |4,740.79368       69.97       69.97
          1 |2,034.20632       30.03      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it3.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(293499 observations deleted)
    0
    0
(947 missing values generated)
  947
(947 observations deleted)
(note: file /tmp/St02502.00000o not found)
file /tmp/St02502.00000o saved
(note: file /tmp/St02502.00000p not found)
file /tmp/St02502.00000p saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    117,599      100.00      100.00
------------+-----------------------------------
      Total |    117,599      100.00
  154
(154 observations deleted)
file /tmp/St02502.00000o saved
48
48
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it3.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.00000q not found)
file /tmp/St02502.00000q saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.00000q saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      7,899        9.27        9.27
          3 |     77,305       90.73      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(7899 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.00000s not found)
file /tmp/St02502.00000s saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         24        0.03        0.03
          3 |     77,305       99.97      100.00
------------+-----------------------------------
      Total |     77,329      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     77,329      100.00      100.00
------------+-----------------------------------
      Total |     77,329      100.00
(57411 observations deleted)
(17 observations deleted)
(1429 observations deleted)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw3 |       232    1.267155     .626248   
> .7641575   7.890666
    ratiomw3 |       232    1.128912    .5397317   
>        0   6.016366
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        232      100.00      100.00
------------+-----------------------------------
      Total |        232      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it3.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         87       37.50       37.50
          3 |        145       62.50      100.00
------------+-----------------------------------
      Total |        232      100.00
(87 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        8.81        8.81
          3 |        145       91.19      100.00
------------+-----------------------------------
      Total |        159      100.00
(14 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    0
---------------------------------------------------
-> spdomain = Central urban
    0
---------------------------------------------------
-> spdomain = Eastern
    2
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       145    113.9724      99.524   
>        6        465
(3 observations deleted)
(12 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27  .9028977         0
Central urban |        32  .9050493         0
      Eastern |        23  .9053178         0
     Northern |        21  .9063946         0
      Western |        27  .9062343         0
--------------+------------------------------
        Total |       130  .9051134  .0012515
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9028977  .9028977
Central urban |  .9050493  .9050493
      Eastern |  .9053178  .9053178
     Northern |  .9063946  .9063946
      Western |  .9062343  .9062343
--------------+--------------------
        Total |  .9028977  .9063946
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        130      100.00      100.00
------------+-----------------------------------
      Total |        130      100.00
(130 real changes made)
(125 real changes made)
(130 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27 -.0000771         0
Central urban |        32 -.0000128         0
      Eastern |        23   .000167         0
     Northern |        21 -.0001156         0
      Western |        27 -.0001285         0
--------------+------------------------------
        Total |       130  -.000035  .0001032
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural | -.0000771 -.0000771
Central urban | -.0000128 -.0000128
      Eastern |   .000167   .000167
     Northern | -.0001156 -.0001156
      Western | -.0001285 -.0001285
--------------+--------------------
        Total | -.0001285   .000167
-----------------------------------
(130 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it3.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it3.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(246 real changes made)
(note: file /tmp/St02502.00000u not found)
file /tmp/St02502.00000u saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it3.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it3.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it3 |    6775   200636622    9399.102   77
> 481.84   120.7875   1.22e+07
     linpob3 |    6775   200636622    8502.374   13
> 845.89   2251.941   55227.18
    linpobr3 |    6775   200636622    8293.471     
>      0   8293.471   8293.471
(1525 missing values generated)
(1525 real changes made)
(1525 real changes made)
(1525 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex3 |   79.99021   1.073941      77.88169 
>    82.09874
    pg_flex3 |    45.9401   .8305831      44.30937 
>    47.57083
   spg_flex3 |   30.68896   .7196911      29.27595 
>    32.10197
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex3      |
       Urban |   75.23795   3.234895      68.88671 
>    81.58919
       Rural |   80.71609   1.150976      78.45632 
>    82.97587
-------------+-------------------------------------
> -----------
pg_flex3     |
       Urban |   52.91897    3.41026      46.22343 
>    59.61452
       Rural |   44.87411   .8138961      43.27615 
>    46.47208
-------------+-------------------------------------
> -----------
spg_flex3    |
       Urban |   42.54568    3.33407      35.99972 
>    49.09164
       Rural |   28.87791   .6476486      27.60635 
>    30.14947
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex3      |
     KAMPALA |   87.64422   2.776729      82.19252 
>    93.09592
   _subpop_2 |   77.88982   5.135115      67.80777 
>    87.97187
   _subpop_3 |   91.07631   1.795039      87.55201 
>    94.60061
   _subpop_4 |   74.01664   2.749553      68.61829 
>    79.41498
     EASTERN |   80.55027   2.613759      75.41854 
>      85.682
   _subpop_6 |   67.45598    3.17546      61.22142 
>    73.69053
   _subpop_7 |   90.52253   3.966338      82.73521 
>    98.30986
   _subpop_8 |   75.37696   4.024637      67.47517 
>    83.27875
   _subpop_9 |   86.89741   3.111629      80.78818 
>    93.00664
  _subpop_10 |   79.64297   2.890097      73.96868 
>    85.31725
-------------+-------------------------------------
> -----------
pg_flex3     |
     KAMPALA |   73.79078   3.416674      67.08264 
>    80.49892
   _subpop_2 |   52.71412   3.807349      45.23895 
>     60.1893
   _subpop_3 |   61.39582   2.281222      56.91697 
>    65.87466
   _subpop_4 |   35.19883   1.815873      31.63363 
>    38.76404
     EASTERN |   42.97953   1.746089      39.55134 
>    46.40772
   _subpop_6 |   30.66138   2.244775      26.25409 
>    35.06867
   _subpop_7 |   65.39118   4.092337      57.35647 
>    73.42588
   _subpop_8 |   32.02526    2.74593      26.63403 
>    37.41649
   _subpop_9 |   51.65185   2.142833      47.44471 
>    55.85899
  _subpop_10 |   44.74937   1.906769      41.00571 
>    48.49303
-------------+-------------------------------------
> -----------
spg_flex3    |
     KAMPALA |   64.81376   3.735221       57.4802 
>    72.14732
   _subpop_2 |   38.77509   3.104381      32.68009 
>    44.87009
   _subpop_3 |    45.6667    2.36092      41.03137 
>    50.30202
   _subpop_4 |   20.23826   1.290815      17.70393 
>    22.77258
     EASTERN |   26.24887   1.337835      23.62223 
>    28.87552
   _subpop_6 |   17.28317   1.659234      14.02551 
>    20.54083
   _subpop_7 |   49.72899   3.866649      42.13739 
>    57.32059
   _subpop_8 |   16.56805   1.724933      13.18139 
>     19.9547
   _subpop_9 |   34.91158   1.749291       31.4771 
>    38.34605
  _subpop_10 |   28.55481   1.436088      25.73526 
>    31.37436
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex3      |
   _subpop_1 |   87.64422   2.776729      82.19252 
>    93.09592
   _subpop_2 |   95.48657   1.516357      92.50943 
>    98.46372
   _subpop_3 |   73.39131   5.696102      62.20785 
>    84.57477
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   89.89926   2.093657      85.78867 
>    94.00985
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   75.44072   2.759737      70.02238 
>    80.85906
   _subpop_8 |   56.26273   4.645491      47.14199 
>    65.38348
   _subpop_9 |   82.47302   2.680235      77.21077 
>    87.73527
  _subpop_10 |   28.82766   9.877507      9.434622 
>     48.2207
  _subpop_11 |   71.66473   2.945749      65.88118 
>    77.44827
  _subpop_12 |   35.21238   7.165809      21.14337 
>     49.2814
  _subpop_13 |   92.57054   3.896837      84.91967 
>    100.2214
  _subpop_14 |   46.71982   8.315395      30.39376 
>    63.04589
  _subpop_15 |   79.62226   3.494443      72.76143 
>    86.48308
  _subpop_16 |   83.96739   5.725892      72.72544 
>    95.20935
  _subpop_17 |   87.08055   3.295113      80.61107 
>    93.55002
  _subpop_18 |   46.08261   4.959741      36.34488 
>    55.82034
  _subpop_19 |   81.35317   2.888902      75.68123 
>    87.02511
-------------+-------------------------------------
> -----------
pg_flex3     |
   _subpop_1 |   73.79078   3.416674      67.08264 
>    80.49892
   _subpop_2 |   73.03829   4.546854      64.11121 
>    81.96538
   _subpop_3 |   47.51836   3.884001       39.8927 
>    55.14403
   _subpop_4 |   71.71624   6.513091      58.92874 
>    84.50374
   _subpop_5 |   59.26513   2.244803      54.85779 
>    63.67248
   _subpop_6 |    18.5093   7.370859      4.037695 
>     32.9809
   _subpop_7 |   36.13306   1.851977      32.49698 
>    39.76915
   _subpop_8 |   27.88448   2.823472      22.34101 
>    33.42796
   _subpop_9 |   44.17455   1.761905      40.71531 
>    47.63379
  _subpop_10 |   9.167886   2.931542      3.412233 
>    14.92354
  _subpop_11 |   33.00321   2.274283      28.53798 
>    37.46843
  _subpop_12 |   11.48476   3.158112      5.284273 
>    17.68525
  _subpop_13 |    67.3872   4.083035      59.37076 
>    75.40365
  _subpop_14 |   17.00291   4.436158      8.293163 
>    25.71266
  _subpop_15 |   34.25069   2.632922      29.08133 
>    39.42004
  _subpop_16 |   46.32637   5.297111      35.92626 
>    56.72647
  _subpop_17 |   51.98472   2.256135      47.55513 
>    56.41431
  _subpop_18 |    20.5697   3.127685      14.42894 
>    26.71045
  _subpop_19 |   45.98154   1.897566      42.25595 
>    49.70714
-------------+-------------------------------------
> -----------
spg_flex3    |
   _subpop_1 |   64.81376   3.735221       57.4802 
>    72.14732
   _subpop_2 |   59.10959    6.65797      46.03764 
>    72.18154
   _subpop_3 |   33.57669   2.956551      27.77193 
>    39.38145
   _subpop_4 |   60.17263   7.245658      45.94683 
>    74.39842
   _subpop_5 |    42.6719   2.053379      38.64039 
>    46.70341
   _subpop_6 |   8.457877   3.913542      .7742101 
>    16.14154
   _subpop_7 |   20.89769   1.326821      18.29267 
>     23.5027
   _subpop_8 |   17.36901   1.978438      13.48463 
>    21.25338
   _subpop_9 |   26.95186   1.383114      24.23632 
>     29.6674
  _subpop_10 |   4.513616   1.572581      1.426084 
>    7.601148
  _subpop_11 |   18.67448   1.738605      15.26098 
>    22.08797
  _subpop_12 |   6.877405   3.442512      .1185363 
>    13.63627
  _subpop_13 |   51.31569   3.916871      43.62548 
>    59.00589
  _subpop_14 |   8.073987   2.682605      2.807083 
>    13.34089
  _subpop_15 |   17.82636   1.702374        14.484 
>    21.16873
  _subpop_16 |   29.99095   5.224376      19.73366 
>    40.24825
  _subpop_17 |   35.21914   1.825925       31.6342 
>    38.80407
  _subpop_18 |    10.4077   2.250088      5.989978 
>    14.82542
  _subpop_19 |   29.47957   1.432323      26.66742 
>    32.29173
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex3      |
   _subpop_1 |   81.70514   3.320774      75.18529 
>      88.225
   _subpop_2 |   91.63148   1.618625      88.45354 
>    94.80941
     Eastern |   77.61428   1.911707      73.86092 
>    81.36764
    Northern |   73.86239   2.252734      69.43948 
>     78.2853
     Western |   83.37574   2.091208      79.26996 
>    87.48152
-------------+-------------------------------------
> -----------
pg_flex3     |
   _subpop_1 |   53.43434   2.429074      48.66521 
>    58.20347
   _subpop_2 |   73.15278   2.581324      68.08473 
>    78.22083
     Eastern |   39.48315    1.28811      36.95414 
>    42.01217
    Northern |   36.74143   1.628756      33.54361 
>    39.93926
     Western |   48.30104   1.441975      45.46993 
>    51.13215
-------------+-------------------------------------
> -----------
spg_flex3    |
   _subpop_1 |   38.15727   1.928267       34.3714 
>    41.94314
   _subpop_2 |   62.34039    3.28141      55.89782 
>    68.78296
     Eastern |   23.54791   .9622823      21.65861 
>    25.43721
    Northern |   22.29181   1.244595      19.84823 
>    24.73539
     Western |   31.82568   1.160099        29.548 
>    34.10337
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex3 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it3.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex3 |    6775   200636622    79.99021   40
> .01029          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it3.dta saved
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor4 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |4,741.87836       69.99       69.99
          1 |2,033.12164       30.01      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it4.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(293558 observations deleted)
    0
    0
(947 missing values generated)
  947
(947 observations deleted)
(note: file /tmp/St02502.00000v not found)
file /tmp/St02502.00000v saved
(note: file /tmp/St02502.00000w not found)
file /tmp/St02502.00000w saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    117,540      100.00      100.00
------------+-----------------------------------
      Total |    117,540      100.00
  154
(154 observations deleted)
file /tmp/St02502.00000v saved
48
48
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it4.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.00000x not found)
file /tmp/St02502.00000x saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.00000x saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      7,899        9.27        9.27
          3 |     77,305       90.73      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(7899 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.000011 not found)
file /tmp/St02502.000011 saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         24        0.03        0.03
          3 |     77,305       99.97      100.00
------------+-----------------------------------
      Total |     77,329      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     77,329      100.00      100.00
------------+-----------------------------------
      Total |     77,329      100.00
(57426 observations deleted)
(17 observations deleted)
(1423 observations deleted)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw4 |       232    1.266773    .6262096   
> .7641575   7.890666
    ratiomw4 |       232     1.12856    .5397522   
>        0   6.016366
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        232      100.00      100.00
------------+-----------------------------------
      Total |        232      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it4.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         87       37.50       37.50
          3 |        145       62.50      100.00
------------+-----------------------------------
      Total |        232      100.00
(87 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        8.81        8.81
          3 |        145       91.19      100.00
------------+-----------------------------------
      Total |        159      100.00
(14 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    0
---------------------------------------------------
-> spdomain = Central urban
    0
---------------------------------------------------
-> spdomain = Eastern
    2
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       145    113.9241    99.54752   
>        6        465
(3 observations deleted)
(12 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27  .9030181         0
Central urban |        32  .9050493         0
      Eastern |        23  .9053178         0
     Northern |        21  .9063946         0
      Western |        27  .9065197         0
--------------+------------------------------
        Total |       130  .9051977  .0012654
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9030181  .9030181
Central urban |  .9050493  .9050493
      Eastern |  .9053178  .9053178
     Northern |  .9063946  .9063946
      Western |  .9065197  .9065197
--------------+--------------------
        Total |  .9030181  .9065197
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        130      100.00      100.00
------------+-----------------------------------
      Total |        130      100.00
(130 real changes made)
(125 real changes made)
(130 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27 -.0000771         0
Central urban |        32 -.0000128         0
      Eastern |        23   .000167         0
     Northern |        21 -.0001156         0
      Western |        27 -.0001285         0
--------------+------------------------------
        Total |       130  -.000035  .0001032
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural | -.0000771 -.0000771
Central urban | -.0000128 -.0000128
      Eastern |   .000167   .000167
     Northern | -.0001156 -.0001156
      Western | -.0001285 -.0001285
--------------+--------------------
        Total | -.0001285   .000167
-----------------------------------
(130 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it4.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it4.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(245 real changes made)
(note: file /tmp/St02502.000013 not found)
file /tmp/St02502.000013 saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it4.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it4.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it4 |    6775   200636622    9399.102   77
> 503.73   120.9324   1.22e+07
     linpob4 |    6775   200636622    8508.604   13
> 844.37   2251.941   55227.18
    linpobr4 |    6775   200636622     8303.42   .0
> 004838    8303.42   8303.421
(1525 missing values generated)
(1525 real changes made)
(1525 real changes made)
(1525 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex4 |   79.99021   1.073941      77.88169 
>    82.09874
    pg_flex4 |   45.98255   .8306294      44.35173 
>    47.61337
   spg_flex4 |   30.72892   .7198645      29.31557 
>    32.14227
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex4      |
       Urban |   75.23795   3.234895      68.88671 
>    81.58919
       Rural |   80.71609   1.150976      78.45632 
>    82.97587
-------------+-------------------------------------
> -----------
pg_flex4     |
       Urban |   52.93496   3.409386      46.24113 
>    59.62879
       Rural |   44.92061   .8141699       43.3221 
>    46.51911
-------------+-------------------------------------
> -----------
spg_flex4    |
       Urban |   42.55921   3.333194      36.01497 
>    49.10345
       Rural |   28.92191   .6481612      27.64934 
>    30.19448
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex4      |
     KAMPALA |   87.64422   2.776729      82.19252 
>    93.09592
   _subpop_2 |   77.88982   5.135115      67.80777 
>    87.97187
   _subpop_3 |   91.07631   1.795039      87.55201 
>    94.60061
   _subpop_4 |   74.01664   2.749553      68.61829 
>    79.41498
     EASTERN |   80.55027   2.613759      75.41854 
>      85.682
   _subpop_6 |   67.45598    3.17546      61.22142 
>    73.69053
   _subpop_7 |   90.52253   3.966338      82.73521 
>    98.30986
   _subpop_8 |   75.37696   4.024637      67.47517 
>    83.27875
   _subpop_9 |   86.89741   3.111629      80.78818 
>    93.00664
  _subpop_10 |   79.64297   2.890097      73.96868 
>    85.31725
-------------+-------------------------------------
> -----------
pg_flex4     |
     KAMPALA |   73.79078   3.416674      67.08264 
>    80.49892
   _subpop_2 |   52.71296   3.807351      45.23778 
>    60.18813
   _subpop_3 |   61.39438   2.281269      56.91544 
>    65.87332
   _subpop_4 |   35.19883   1.815873      31.63363 
>    38.76403
     EASTERN |   42.97953   1.746089      39.55134 
>    46.40772
   _subpop_6 |   30.66138   2.244775       26.2541 
>    35.06867
   _subpop_7 |   65.39118   4.092336      57.35647 
>    73.42588
   _subpop_8 |   32.02526    2.74593      26.63403 
>    37.41649
   _subpop_9 |   51.83598    2.14313      47.62826 
>     56.0437
  _subpop_10 |   44.93166   1.910156      41.18135 
>    48.68197
-------------+-------------------------------------
> -----------
spg_flex4    |
     KAMPALA |   64.81376   3.735221       57.4802 
>    72.14732
   _subpop_2 |   38.77383   3.104384      32.67883 
>    44.86884
   _subpop_3 |   45.66514   2.360959      41.02974 
>    50.30053
   _subpop_4 |   20.23825   1.290815      17.70393 
>    22.77258
     EASTERN |   26.24887   1.337835      23.62223 
>    28.87551
   _subpop_6 |   17.28317   1.659234      14.02551 
>    20.54083
   _subpop_7 |   49.72899   3.866649      42.13739 
>    57.32059
   _subpop_8 |   16.56805   1.724933      13.18139 
>     19.9547
   _subpop_9 |   35.08699   1.751805      31.64757 
>     38.5264
  _subpop_10 |   28.72453   1.440478      25.89636 
>     31.5527
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex4      |
   _subpop_1 |   87.64422   2.776729      82.19252 
>    93.09592
   _subpop_2 |   95.48657   1.516357      92.50943 
>    98.46372
   _subpop_3 |   73.39131   5.696102      62.20785 
>    84.57477
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   89.89926   2.093657      85.78867 
>    94.00985
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   75.44072   2.759737      70.02238 
>    80.85906
   _subpop_8 |   56.26273   4.645491      47.14199 
>    65.38348
   _subpop_9 |   82.47302   2.680235      77.21077 
>    87.73527
  _subpop_10 |   28.82766   9.877507      9.434622 
>     48.2207
  _subpop_11 |   71.66473   2.945749      65.88118 
>    77.44827
  _subpop_12 |   35.21238   7.165809      21.14337 
>     49.2814
  _subpop_13 |   92.57054   3.896837      84.91967 
>    100.2214
  _subpop_14 |   46.71982   8.315395      30.39376 
>    63.04589
  _subpop_15 |   79.62226   3.494443      72.76143 
>    86.48308
  _subpop_16 |   83.96739   5.725892      72.72544 
>    95.20935
  _subpop_17 |   87.08055   3.295113      80.61107 
>    93.55002
  _subpop_18 |   46.08261   4.959741      36.34488 
>    55.82034
  _subpop_19 |   81.35317   2.888902      75.68123 
>    87.02511
-------------+-------------------------------------
> -----------
pg_flex4     |
   _subpop_1 |   73.79078   3.416674      67.08264 
>    80.49892
   _subpop_2 |   73.03829   4.546855      64.11121 
>    81.96538
   _subpop_3 |    47.5169    3.88391      39.89141 
>    55.14239
   _subpop_4 |   71.71624   6.513091      58.92873 
>    84.50374
   _subpop_5 |    59.2634   2.244827      54.85601 
>    63.67079
   _subpop_6 |    18.5093   7.370859      4.037695 
>     32.9809
   _subpop_7 |   36.13306   1.851977      32.49698 
>    39.76915
   _subpop_8 |   27.88448   2.823472      22.34101 
>    33.42796
   _subpop_9 |   44.17455   1.761905      40.71531 
>    47.63379
  _subpop_10 |   9.167886   2.931541      3.412233 
>    14.92354
  _subpop_11 |   33.00321   2.274283      28.53799 
>    37.46843
  _subpop_12 |   11.48476   3.158112      5.284273 
>    17.68525
  _subpop_13 |    67.3872   4.083035      59.37076 
>    75.40365
  _subpop_14 |   17.00291   4.436158      8.293163 
>    25.71266
  _subpop_15 |   34.25069   2.632922      29.08133 
>    39.42004
  _subpop_16 |   46.52301   5.285625      36.14546 
>    56.90056
  _subpop_17 |   52.16806   2.256648      47.73746 
>    56.59866
  _subpop_18 |   20.70298   3.132686      14.55241 
>    26.85355
  _subpop_19 |   46.16633   1.900822      42.43434 
>    49.89832
-------------+-------------------------------------
> -----------
spg_flex4    |
   _subpop_1 |   64.81376   3.735221       57.4802 
>    72.14732
   _subpop_2 |   59.10959    6.65797      46.03764 
>    72.18154
   _subpop_3 |   33.57511   2.956454      27.77055 
>    39.37968
   _subpop_4 |   60.17263   7.245659      45.94683 
>    74.39842
   _subpop_5 |   42.67002   2.053363      38.63854 
>     46.7015
   _subpop_6 |   8.457877   3.913541        .77421 
>    16.14154
   _subpop_7 |   20.89768   1.326821      18.29266 
>     23.5027
   _subpop_8 |   17.36901   1.978438      13.48463 
>    21.25338
   _subpop_9 |   26.95186   1.383114      24.23632 
>     29.6674
  _subpop_10 |   4.513616   1.572581      1.426084 
>    7.601148
  _subpop_11 |   18.67448   1.738605      15.26098 
>    22.08797
  _subpop_12 |   6.877405   3.442512      .1185364 
>    13.63627
  _subpop_13 |   51.31568   3.916871      43.62548 
>    59.00589
  _subpop_14 |   8.073987   2.682605      2.807083 
>    13.34089
  _subpop_15 |   17.82636   1.702374        14.484 
>    21.16873
  _subpop_16 |   30.16221   5.223187      19.90725 
>    40.41718
  _subpop_17 |   35.39481   1.828737      31.80435 
>    38.98526
  _subpop_18 |   10.51429   2.259079      6.078921 
>    14.94966
  _subpop_19 |   29.65251     1.4366      26.83195 
>    32.47306
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex4      |
   _subpop_1 |   81.70514   3.320774      75.18529 
>      88.225
   _subpop_2 |   91.63148   1.618625      88.45354 
>    94.80941
     Eastern |   77.61428   1.911707      73.86092 
>    81.36764
    Northern |   73.86239   2.252734      69.43948 
>     78.2853
     Western |   83.37574   2.091208      79.26996 
>    87.48152
-------------+-------------------------------------
> -----------
pg_flex4     |
   _subpop_1 |   53.43274   2.429035      48.66369 
>    58.20179
   _subpop_2 |   73.15278   2.581324      68.08473 
>    78.22083
     Eastern |   39.48315    1.28811      36.95414 
>    42.01217
    Northern |   36.74143   1.628756      33.54361 
>    39.93926
     Western |   48.48428   1.442863      45.65143 
>    51.31713
-------------+-------------------------------------
> -----------
spg_flex4    |
   _subpop_1 |   38.15554   1.928216      34.36977 
>    41.94131
   _subpop_2 |   62.34039    3.28141      55.89782 
>    68.78296
     Eastern |   23.54791   .9622823      21.65861 
>    25.43721
    Northern |   22.29181   1.244595      19.84823 
>    24.73539
     Western |   31.99833   1.162207      29.71651 
>    34.28015
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex4 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it4.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex4 |    6775   200636622    79.99021   40
> .01029          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it4.dta saved
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor5 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 4,739.9216       69.96       69.96
          1 | 2,035.0784       30.04      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it5.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(293405 observations deleted)
    0
    0
(947 missing values generated)
  947
(947 observations deleted)
(note: file /tmp/St02502.000014 not found)
file /tmp/St02502.000014 saved
(note: file /tmp/St02502.000015 not found)
file /tmp/St02502.000015 saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    117,693      100.00      100.00
------------+-----------------------------------
      Total |    117,693      100.00
  154
(154 observations deleted)
file /tmp/St02502.000014 saved
48
48
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it5.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.000016 not found)
file /tmp/St02502.000016 saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.000016 saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      7,899        9.27        9.27
          3 |     77,305       90.73      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(7899 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.000018 not found)
file /tmp/St02502.000018 saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         24        0.03        0.03
          3 |     77,305       99.97      100.00
------------+-----------------------------------
      Total |     77,329      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     77,329      100.00      100.00
------------+-----------------------------------
      Total |     77,329      100.00
(57396 observations deleted)
(17 observations deleted)
(1430 observations deleted)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw5 |       232    1.267267    .6262224   
> .7641575   7.890666
    ratiomw5 |       232    1.128922    .5397738   
>        0   6.016366
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        232      100.00      100.00
------------+-----------------------------------
      Total |        232      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it5.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         87       37.50       37.50
          3 |        145       62.50      100.00
------------+-----------------------------------
      Total |        232      100.00
(87 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        8.81        8.81
          3 |        145       91.19      100.00
------------+-----------------------------------
      Total |        159      100.00
(14 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    0
---------------------------------------------------
-> spdomain = Central urban
    0
---------------------------------------------------
-> spdomain = Eastern
    2
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       145    114.0621    99.60033   
>        6        465
(3 observations deleted)
(12 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27  .9030181         0
Central urban |        32  .9050493         0
      Eastern |        23  .9053178         0
     Northern |        21  .9063946         0
      Western |        27  .9063479         0
--------------+------------------------------
        Total |       130   .905162  .0012293
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9030181  .9030181
Central urban |  .9050493  .9050493
      Eastern |  .9053178  .9053178
     Northern |  .9063946  .9063946
      Western |  .9063479  .9063479
--------------+--------------------
        Total |  .9030181  .9063946
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        130      100.00      100.00
------------+-----------------------------------
      Total |        130      100.00
(130 real changes made)
(125 real changes made)
(130 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27 -.0000771         0
Central urban |        32 -.0000128         0
      Eastern |        23   .000167         0
     Northern |        21 -.0001156         0
      Western |        27 -.0001285         0
--------------+------------------------------
        Total |       130  -.000035  .0001032
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural | -.0000771 -.0000771
Central urban | -.0000128 -.0000128
      Eastern |   .000167   .000167
     Northern | -.0001156 -.0001156
      Western | -.0001285 -.0001285
--------------+--------------------
        Total | -.0001285   .000167
-----------------------------------
(130 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it5.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it5.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(247 real changes made)
(note: file /tmp/St02502.00001a not found)
file /tmp/St02502.00001a saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it5.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it5.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it5 |    6775   200636622    9399.102     
>  77480   120.7782   1.22e+07
     linpob5 |    6775   200636622    8501.951   13
> 845.97   2251.941   55227.18
    linpobr5 |    6775   200636622    8292.836   .0
> 004576   8292.835   8292.836
(1525 missing values generated)
(1525 real changes made)
(1525 real changes made)
(1525 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex5 |   79.99021   1.073941      77.88169 
>    82.09874
    pg_flex5 |   45.93745   .8305816      44.30673 
>    47.56818
   spg_flex5 |   30.68644   .7196819      29.27345 
>    32.09943
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex5      |
       Urban |   75.23795   3.234895      68.88671 
>    81.58919
       Rural |   80.71609   1.150976      78.45632 
>    82.97587
-------------+-------------------------------------
> -----------
pg_flex5     |
       Urban |   52.91808   3.410309      46.22244 
>    59.61372
       Rural |    44.8712   .8138777      43.27327 
>    46.46913
-------------+-------------------------------------
> -----------
spg_flex5    |
       Urban |   42.54493    3.33412      35.99887 
>    49.09098
       Rural |   28.87512   .6476143      27.60362 
>    30.14661
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex5      |
     KAMPALA |   87.64422   2.776729      82.19252 
>    93.09592
   _subpop_2 |   77.88982   5.135115      67.80777 
>    87.97187
   _subpop_3 |   91.07631   1.795039      87.55201 
>    94.60061
   _subpop_4 |   74.01664   2.749553      68.61829 
>    79.41498
     EASTERN |   80.55027   2.613759      75.41854 
>      85.682
   _subpop_6 |   67.45598    3.17546      61.22142 
>    73.69053
   _subpop_7 |   90.52253   3.966338      82.73521 
>    98.30986
   _subpop_8 |   75.37696   4.024637      67.47517 
>    83.27875
   _subpop_9 |   86.89741   3.111629      80.78818 
>    93.00664
  _subpop_10 |   79.64297   2.890097      73.96868 
>    85.31725
-------------+-------------------------------------
> -----------
pg_flex5     |
     KAMPALA |   73.79078   3.416674      67.08264 
>    80.49892
   _subpop_2 |   52.71296   3.807351      45.23778 
>    60.18813
   _subpop_3 |   61.39438   2.281269      56.91544 
>    65.87332
   _subpop_4 |   35.19883   1.815873      31.63363 
>    38.76403
     EASTERN |   42.97953   1.746089      39.55134 
>    46.40772
   _subpop_6 |   30.66138   2.244775      26.25409 
>    35.06867
   _subpop_7 |   65.39118   4.092337      57.35647 
>    73.42588
   _subpop_8 |   32.02526    2.74593      26.63403 
>    37.41649
   _subpop_9 |   51.64157   2.142818      47.43446 
>    55.84868
  _subpop_10 |   44.73919    1.90658       40.9959 
>    48.48248
-------------+-------------------------------------
> -----------
spg_flex5    |
     KAMPALA |   64.81376   3.735221       57.4802 
>    72.14732
   _subpop_2 |   38.77383   3.104384      32.67883 
>    44.86884
   _subpop_3 |   45.66514   2.360959      41.02974 
>    50.30054
   _subpop_4 |   20.23825   1.290815      17.70393 
>    22.77258
     EASTERN |   26.24887   1.337835      23.62223 
>    28.87551
   _subpop_6 |   17.28317   1.659234       14.0255 
>    20.54083
   _subpop_7 |   49.72899   3.866649      42.13739 
>    57.32059
   _subpop_8 |   16.56805   1.724933      13.18139 
>     19.9547
   _subpop_9 |   34.90181   1.749151      31.46761 
>    38.33601
  _subpop_10 |   28.54536   1.435843       25.7263 
>    31.36443
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex5      |
   _subpop_1 |   87.64422   2.776729      82.19252 
>    93.09592
   _subpop_2 |   95.48657   1.516357      92.50943 
>    98.46372
   _subpop_3 |   73.39131   5.696102      62.20785 
>    84.57477
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   89.89926   2.093657      85.78867 
>    94.00985
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   75.44072   2.759737      70.02238 
>    80.85906
   _subpop_8 |   56.26273   4.645491      47.14199 
>    65.38348
   _subpop_9 |   82.47302   2.680235      77.21077 
>    87.73527
  _subpop_10 |   28.82766   9.877507      9.434622 
>     48.2207
  _subpop_11 |   71.66473   2.945749      65.88118 
>    77.44827
  _subpop_12 |   35.21238   7.165809      21.14337 
>     49.2814
  _subpop_13 |   92.57054   3.896837      84.91967 
>    100.2214
  _subpop_14 |   46.71982   8.315395      30.39376 
>    63.04589
  _subpop_15 |   79.62226   3.494443      72.76143 
>    86.48308
  _subpop_16 |   83.96739   5.725892      72.72544 
>    95.20935
  _subpop_17 |   87.08055   3.295113      80.61107 
>    93.55002
  _subpop_18 |   46.08261   4.959741      36.34488 
>    55.82034
  _subpop_19 |   81.35317   2.888902      75.68123 
>    87.02511
-------------+-------------------------------------
> -----------
pg_flex5     |
   _subpop_1 |   73.79078   3.416674      67.08264 
>    80.49892
   _subpop_2 |   73.03829   4.546855      64.11121 
>    81.96538
   _subpop_3 |    47.5169    3.88391      39.89141 
>    55.14239
   _subpop_4 |   71.71624    6.51309      58.92874 
>    84.50374
   _subpop_5 |    59.2634   2.244827      54.85601 
>    63.67079
   _subpop_6 |    18.5093   7.370859      4.037693 
>     32.9809
   _subpop_7 |   36.13306   1.851977      32.49698 
>    39.76915
   _subpop_8 |   27.88448   2.823471      22.34101 
>    33.42796
   _subpop_9 |   44.17455   1.761905      40.71531 
>    47.63379
  _subpop_10 |   9.167885   2.931541      3.412233 
>    14.92354
  _subpop_11 |   33.00321   2.274283      28.53798 
>    37.46843
  _subpop_12 |   11.48476   3.158112      5.284271 
>    17.68525
  _subpop_13 |    67.3872   4.083035      59.37076 
>    75.40365
  _subpop_14 |   17.00291   4.436157      8.293162 
>    25.71266
  _subpop_15 |   34.25068   2.632922      29.08133 
>    39.42004
  _subpop_16 |   46.31538   5.297756      35.91402 
>    56.71675
  _subpop_17 |   51.97448   2.256108      47.54494 
>    56.40402
  _subpop_18 |   20.56225   3.127407      14.42205 
>    26.70246
  _subpop_19 |   45.97122   1.897384      42.24599 
>    49.69646
-------------+-------------------------------------
> -----------
spg_flex5    |
   _subpop_1 |   64.81376   3.735221       57.4802 
>    72.14732
   _subpop_2 |   59.10959    6.65797      46.03764 
>    72.18154
   _subpop_3 |   33.57511   2.956454      27.77055 
>    39.37968
   _subpop_4 |   60.17263   7.245658      45.94684 
>    74.39842
   _subpop_5 |   42.67002   2.053363      38.63854 
>     46.7015
   _subpop_6 |   8.457876   3.913541      .7742095 
>    16.14154
   _subpop_7 |   20.89768   1.326821      18.29266 
>     23.5027
   _subpop_8 |     17.369   1.978437      13.48463 
>    21.25338
   _subpop_9 |   26.95186   1.383114      24.23631 
>     29.6674
  _subpop_10 |   4.513616   1.572581      1.426084 
>    7.601148
  _subpop_11 |   18.67448   1.738605      15.26098 
>    22.08797
  _subpop_12 |   6.877405   3.442512       .118536 
>    13.63627
  _subpop_13 |   51.31568   3.916871      43.62548 
>    59.00589
  _subpop_14 |   8.073986   2.682605      2.807083 
>    13.34089
  _subpop_15 |   17.82636   1.702374        14.484 
>    21.16872
  _subpop_16 |   29.98142   5.224438        19.724 
>    40.23885
  _subpop_17 |   35.20935   1.825768      31.62472 
>    38.79398
  _subpop_18 |   10.40177   2.249586      5.985036 
>     14.8185
  _subpop_19 |   29.46994   1.432084      26.65826 
>    32.28163
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex5      |
   _subpop_1 |   81.70514   3.320774      75.18529 
>      88.225
   _subpop_2 |   91.63148   1.618625      88.45354 
>    94.80941
     Eastern |   77.61428   1.911707      73.86092 
>    81.36764
    Northern |   73.86239   2.252734      69.43948 
>     78.2853
     Western |   83.37574   2.091208      79.26996 
>    87.48152
-------------+-------------------------------------
> -----------
pg_flex5     |
   _subpop_1 |   53.43274   2.429035      48.66369 
>     58.2018
   _subpop_2 |   73.15278   2.581324      68.08473 
>    78.22083
     Eastern |   39.48315    1.28811      36.95413 
>    42.01217
    Northern |   36.74143   1.628756       33.5436 
>    39.93925
     Western |   48.29081   1.441927       45.4598 
>    51.12182
-------------+-------------------------------------
> -----------
spg_flex5    |
   _subpop_1 |   38.15554   1.928216      34.36977 
>    41.94131
   _subpop_2 |   62.34039    3.28141      55.89783 
>    68.78296
     Eastern |   23.54791   .9622823       21.6586 
>    25.43721
    Northern |    22.2918   1.244595      19.84822 
>    24.73538
     Western |   31.81607   1.159982      29.53862 
>    34.09353
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex5 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it5.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex5 |    6775   200636622    79.99021   40
> .01029          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it5.dta saved

. *************************************************
> *************************
> * Send results to one big csv-file
> *************************************************
> *************************;
. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         gen dum=1;

.         collapse (mean) dum h_flex`lastpass' pg_f
> lex`lastpass' spg_flex`lastpass' [aw=popwt];

. gen geo="National";

. gen geono=dum;

. tempfile nat;

. save `nat';
file /tmp/St02502.00001b saved

.         use "$path/work/cons_real_it`lastpass'.dt
> a", clear ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(rural
> );

. gen geo="Rural/Urban";

. gen geono=rural;

. tempfile rur;

. save `rur';
file /tmp/St02502.00001c saved

. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(news)
> ;

. gen geo="North/Center/South";

. gen geono=news;

. tempfile new;

. save `new';
file /tmp/St02502.00001d saved

. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(reg_t
> pi);

. gen geo="TPI - 6 regions";

. gen geono=reg_tpi;

. tempfile rtp;

. save `rtp';
file /tmp/St02502.00001e saved

. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(strat
> a);

. gen geo="Provinces";

. gen geono=strata;

. tempfile str;

. save `str';
file /tmp/St02502.00001f saved

. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(spdom
> ain);

. gen geo="Spatial domains";

. gen geono=spdomain;

. tempfile r13;

. save `r13';
file /tmp/St02502.00001g saved

. clear;

. set obs 1;
obs was 0, now 1

. gen geo=" ";

. tempfile one;

. save `one';
file /tmp/St02502.00001h saved

. use          `nat';

. append using `one';

. append using `rur';
geo was str8 now str11

. append using `one';

. append using `new';
geo was str11 now str18

. append using `one';

. append using `rtp';

. append using `one';

. append using `str';

. append using `one';

. append using `r13';

. outsheet geo geono h_flex`lastpass' pg_flex`lastp
> ass' spg_flex`lastpass' dum rural news reg_tpi st
> rata spdomain using "$path/work/poverty_flexBask.
> csv", replace c;

. *************************************************
> *************************
> * Convergence graph (based on 5 iterations)
> *************************************************
> *************************;
. #delimit cr
delimiter now cr
. 
. clear

. set obs 1
obs was 0, now 1

. gen iteration=.
(1 missing value generated)

. tempfile converg

. save `converg'
file /tmp/St02502.00001i saved

. 
. forvalues X = 1/5 {
  2.         use "$path/work/cons_real_it`X'.dta", 
> clear
  3.         collapse (mean) h_flex`X' pg_flex`X' s
> pg_flex`X' [aw=popwt], by(strata)
  4.         rename h_flex`X' h_flex
  5.         rename pg_flex`X' pg_flex
  6.         rename spg_flex`X' spg_flex
  7.         gen iteration=`X'
  8.         order iteration
  9.         *sum
.         if `X' != 1     {
 10.                 append using `converg'
 11.                         }
 12.         save `converg', replace
 13.         }
file /tmp/St02502.00001i saved
(label STRA already defined)
file /tmp/St02502.00001i saved
(label STRA already defined)
file /tmp/St02502.00001i saved
(label STRA already defined)
file /tmp/St02502.00001i saved
(label STRA already defined)
file /tmp/St02502.00001i saved

. 
. use `converg', clear

. sum

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
   iteration |        50           3    1.428571   
>        1          5
      strata |        50         5.5    2.901442   
>        1         10
      h_flex |        50    81.16814    7.382056   
> 67.45598   91.07631
     pg_flex |        50    49.15195    14.02931   
> 30.66138   74.66873
    spg_flex |        50     34.3737    15.08143   
> 16.56804   65.97072

. 
. twoway (connected h_flex iteration), by(, title(C
> onvergence graph: Poverty rate. %) subtitle(After
>  iterative procedure)) by(strata)

. graph export "$path/work/converge_pov_rate.tif", 
> replace
(file /home/bjvca/data/data/GAP/Haruna/work/converg
> e_pov_rate.tif written in TIFF format)

. 
. sort strata iteration

. 
. for var h_flex pg_flex spg_flex: replace X = roun
> d(X,0.01)

->  replace h_flex = round(h_flex,0.01)
(50 real changes made)

->  replace pg_flex = round(pg_flex,0.01)
(50 real changes made)

->  replace spg_flex = round(spg_flex,0.01)
(50 real changes made)

. 
. list strata iteration h_flex pg_flex spg_flex

     +-----------------------------------+
  1. |        strata | iterat~n | h_flex |
     |       KAMPALA |        1 |  87.65 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      74.67     |        65.97     |
     +-----------------------------------+

     +-----------------------------------+
  2. |        strata | iterat~n | h_flex |
     |       KAMPALA |        2 |  87.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      73.79     |        64.81     |
     +-----------------------------------+

     +-----------------------------------+
  3. |        strata | iterat~n | h_flex |
     |       KAMPALA |        3 |  87.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      73.79     |        64.81     |
     +-----------------------------------+

     +-----------------------------------+
  4. |        strata | iterat~n | h_flex |
     |       KAMPALA |        4 |  87.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      73.79     |        64.81     |
     +-----------------------------------+

     +-----------------------------------+
  5. |        strata | iterat~n | h_flex |
     |       KAMPALA |        5 |  87.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      73.79     |        64.81     |
     +-----------------------------------+

     +-----------------------------------+
  6. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        1 |  77.89 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      53.01     |        39.14     |
     +-----------------------------------+

     +-----------------------------------+
  7. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        2 |  77.89 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      52.71     |        38.78     |
     +-----------------------------------+

     +-----------------------------------+
  8. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        3 |  77.89 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      52.71     |        38.78     |
     +-----------------------------------+

     +-----------------------------------+
  9. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        4 |  77.89 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      52.71     |        38.77     |
     +-----------------------------------+

     +-----------------------------------+
 10. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        5 |  77.89 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      52.71     |        38.77     |
     +-----------------------------------+

     +-----------------------------------+
 11. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        1 |  91.08 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      61.67     |        45.93     |
     +-----------------------------------+

     +-----------------------------------+
 12. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        2 |  91.08 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |       61.4     |        45.67     |
     +-----------------------------------+

     +-----------------------------------+
 13. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        3 |  91.08 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |       61.4     |        45.67     |
     +-----------------------------------+

     +-----------------------------------+
 14. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        4 |  91.08 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      61.39     |        45.67     |
     +-----------------------------------+

     +-----------------------------------+
 15. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        5 |  91.08 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      61.39     |        45.67     |
     +-----------------------------------+

     +-----------------------------------+
 16. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        1 |  74.02 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      35.24     |        20.27     |
     +-----------------------------------+

     +-----------------------------------+
 17. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        2 |  74.02 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      35.23     |        20.26     |
     +-----------------------------------+

     +-----------------------------------+
 18. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        3 |  74.02 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |       35.2     |        20.24     |
     +-----------------------------------+

     +-----------------------------------+
 19. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        4 |  74.02 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |       35.2     |        20.24     |
     +-----------------------------------+

     +-----------------------------------+
 20. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        5 |  74.02 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |       35.2     |        20.24     |
     +-----------------------------------+

     +-----------------------------------+
 21. |        strata | iterat~n | h_flex |
     |       EASTERN |        1 |  80.55 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      43.02     |        26.28     |
     +-----------------------------------+

     +-----------------------------------+
 22. |        strata | iterat~n | h_flex |
     |       EASTERN |        2 |  80.55 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      43.01     |        26.27     |
     +-----------------------------------+

     +-----------------------------------+
 23. |        strata | iterat~n | h_flex |
     |       EASTERN |        3 |  80.55 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      42.98     |        26.25     |
     +-----------------------------------+

     +-----------------------------------+
 24. |        strata | iterat~n | h_flex |
     |       EASTERN |        4 |  80.55 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      42.98     |        26.25     |
     +-----------------------------------+

     +-----------------------------------+
 25. |        strata | iterat~n | h_flex |
     |       EASTERN |        5 |  80.55 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      42.98     |        26.25     |
     +-----------------------------------+

     +-----------------------------------+
 26. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        1 |  69.83 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      31.39     |        17.81     |
     +-----------------------------------+

     +-----------------------------------+
 27. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        2 |  67.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      30.68     |         17.3     |
     +-----------------------------------+

     +-----------------------------------+
 28. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        3 |  67.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      30.66     |        17.28     |
     +-----------------------------------+

     +-----------------------------------+
 29. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        4 |  67.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      30.66     |        17.28     |
     +-----------------------------------+

     +-----------------------------------+
 30. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        5 |  67.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      30.66     |        17.28     |
     +-----------------------------------+

     +-----------------------------------+
 31. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        1 |  90.61 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      65.87     |        50.33     |
     +-----------------------------------+

     +-----------------------------------+
 32. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        2 |  90.57 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |       65.4     |        49.74     |
     +-----------------------------------+

     +-----------------------------------+
 33. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        3 |  90.52 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      65.39     |        49.73     |
     +-----------------------------------+

     +-----------------------------------+
 34. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        4 |  90.52 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      65.39     |        49.73     |
     +-----------------------------------+

     +-----------------------------------+
 35. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        5 |  90.52 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      65.39     |        49.73     |
     +-----------------------------------+

     +-----------------------------------+
 36. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        1 |   75.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      32.86     |        17.17     |
     +-----------------------------------+

     +-----------------------------------+
 37. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        2 |  75.38 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      32.05     |        16.58     |
     +-----------------------------------+

     +-----------------------------------+
 38. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        3 |  75.38 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      32.03     |        16.57     |
     +-----------------------------------+

     +-----------------------------------+
 39. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        4 |  75.38 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      32.03     |        16.57     |
     +-----------------------------------+

     +-----------------------------------+
 40. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        5 |  75.38 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      32.03     |        16.57     |
     +-----------------------------------+

     +-----------------------------------+
 41. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        1 |   86.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      51.87     |        35.12     |
     +-----------------------------------+

     +-----------------------------------+
 42. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        2 |   86.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      51.83     |        35.09     |
     +-----------------------------------+

     +-----------------------------------+
 43. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        3 |   86.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      51.65     |        34.91     |
     +-----------------------------------+

     +-----------------------------------+
 44. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        4 |   86.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      51.84     |        35.09     |
     +-----------------------------------+

     +-----------------------------------+
 45. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        5 |   86.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      51.64     |         34.9     |
     +-----------------------------------+

     +-----------------------------------+
 46. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        1 |  79.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      44.97     |        28.76     |
     +-----------------------------------+

     +-----------------------------------+
 47. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        2 |  79.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      44.93     |        28.72     |
     +-----------------------------------+

     +-----------------------------------+
 48. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        3 |  79.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      44.75     |        28.55     |
     +-----------------------------------+

     +-----------------------------------+
 49. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        4 |  79.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      44.93     |        28.72     |
     +-----------------------------------+

     +-----------------------------------+
 50. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        5 |  79.64 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      44.74     |        28.55     |
     +-----------------------------------+

.         
. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 140_iterate.do        (end)
> *************************************************
> *************************;
. cap log close;

. 
end of do-file

. do "$path/new/140_iterate_bjorn.do" $it_n $bottom

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/140_iterate.log", replace
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 40_iterate.log
  log type:  text
 opened on:  20 May 2013, 12:22:00

. clear

. set more off

. #delimit ;
delimiter now ;
. *global povline_initial "$path/in/povlines_first_
> iof.dta";
. *************************************************
> *************************
> * 140_iterate.do        (start)
> *
> * Purpose: Create flexible food basket and povert
> y line with iterative procedure
> *
> * This program will take the results from the fir
> st pass at the
> * poverty lines and applies the corresponding spa
> tial deflator to
> * re-select the relatively poor, their consumptio
> n bundles, and
> * their prices.
> *
> * Welfare indicator is here always temporally and
>  spatially adjusted per capita
> * expenditure. Here called cr_it< >.
> *
> * We will iterate this process 5 times which here
>  assures convergence.
> *
> * CA, Mar 2010: Relatively poor are those below l
> ast iterated poverty line
> * MAH, Apr 2010: Cleaning
> * URB, feb 2012: Commented out "drop if unit~=2"
> *************************************************
> *************************;
. /*
> This file uses:
>             in/povlines_first_new.dta
>         work/hhdata.dta
>         work/consump_nom.dta
>         work/own.dta
>         work/daily.dta
>         work/temp_index_reg_tpi.dta
>         work/cons_cod.dta
>         work/food_cat.dta
>         work/cons_real.dta
>         work/products.dta
>         work/match96_02.dta
>         new/conversions.do
>         
> This file creates (where `pass' is the number of 
> the iteration):
>         work/codes_food_basket_flex_it`pass'.dta
>         work/price_unit_flex_it`pass'.dta
>         work/quan_flex_it`pass'.dta
>         work/match_cod_flex_it`pass'.csv
>         work/relpoor_it`pass'.dta
>         work/povlines_it`pass'.dta
>         work/foodshares_it`pass'.dta
>         work/nat_pov_flex.csv
>         work/rur_pov_flex.csv
>         work/strata_pov_flex.csv
>         work/spdomain_pov_flex.csv
>         work/reg_tpi_pov_flex.csv
> */
> 
> *************************************************
> *************************;
. * Make a key file that will be used over and over
> , without change
> * in every iteration. This will include the TEMPO
> RALLY deflated consumption
> * and various HH data such as hhweight, spdomain,
>  etc.
> *************************************************
> *************************;
. use "$path/work/conpc.dta";

.         sort hhid;

.         merg hhid using "$path/work/hhdata.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/
> temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely
    identify observations in the master data
(label lsurvquar already defined)
(label REG_TPI already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

.         drop _merge;

.                 gen food_pc_tpi = food_pc_nom /tp
> i_trim;

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom
> ;

.         lab var food_pc_tpi "Temp-adjusted per ca
> pita food consumption/day";

.         lab var cons_pc_tpi "Temp adjusted total 
> consumption/day";

.         tempfile contpi;

.         sort hhid;

. save `contpi', replace;
(note: file /tmp/St02502.000008 not found)
file /tmp/St02502.000008 saved

. save contpi_, replace;
file contpi_.dta saved

. *use "$path/in/povlines_first_iterate.dta", clear
> ;
. *save "$path/work/povlines_first.dta", replace;
. *************************************************
> *************************;
. * Now set some information pertaining to the iter
> ations. For now we'll
> * manually set the number of iterations. Also spe
> cify the percentile
> * cutpoint that we will use for defining the rela
> tively poor.
> *************************************************
> *************************;
. local lastpass=0;

. local pass=1;

. * Use these two lines to manually specify the num
> ber of iterations
> * and the cutpoint here in the do file.;
.   *local maxit=5;
.   *local cutpt=50;
. * Use these few lines if you want to specify the 
> number of iterations
> * and percentile cutpoint by passing them as para
> meters on the command
> * line, e.g.:   wstata do new/iterate1.do 5 50;
. if "`1'"=="" | "`2'"=="" {      ;
.         di in red "Error: you need to specify num
> ber of iterations as first parameter";
.         di in red "       and percentile cutpoint
>  as second parameter on command line.";
. };

. local maxit=`1';

. local cutpt=`2';

. tempfile cutoff;

. while `pass' <= `maxit' {;
  2.         **************************************
> ************************************;
. *************************************************
> *************************;
. * Pick out the bottom X percent in real consumpti
> on per capita 
> * (temporally & spatially adjusted), as ranked by
>  the previous iteration.
> * The percentile to use is defined by "cutpt". Th
> is produces a file that
> * has the hhid, and a dummy variable indicating i
> f they were below the
> * cutpoint on the last iteration.
> *************************************************
> *************************;
. *************************************************
> *************************;
. /*
> * Comment out if IOF 2008/09. (This code included
>  instead of below code in order to replicate publ
> ished figures 2002/03). ( START ) ;
> 
>         if "`pass'"=="1" {      ;
>               use `contpi', clear;
>               sort spdomain;
>               merge spdomain using "$path/work/po
> vlines_first.dta";
>               tab _m;
>               drop _m;
> *              gen relpoor`pass'= cons_pc_tpi<=cu
> toff;
>                gen relpoor`pass'= cons_pc_tpi if 
> cons_pc_tpi<=cutoff;
>               rename cons_pc_tpi cr_it0;
>               sort hhid;
>          save "$path/work/relpoor_it`pass'.dta", 
> replace;
> *        use "$path/work/cons_real.dta", clear;
> *              gen cr_it0=cr2;
>         };
>         
> 
> * Comment out if IOF 2008/09. (This code included
>  instead of below code in order to replicate publ
> ished figures 2002/03). ( END ) ;
> */
> 
> 
> 
> * Comment out if IAF 2002/03. (This code below ex
> cluded in order to replicate published figures 20
> 02/03). ( START ) ;
.         if "`pass'"=="1" { ;
  3. * Find real income at cut point initially;
.                 use "$path/work/cons_real.dta", c
> lear;
  4.                                     gen cr_it0
> =cr2;
  5.                         cap drop one;
  6.             gen one=1;
  7.                                     collapse (
> p`cutpt') one cr_it`lastpass' [aw=popwt] ;
  8.                                     rename cr_
> it`lastpass' cutoff;
  9.                                     sort one;
 10.             save `cutoff', replace;
 11.  * Find relatively poor initially;
.             use "$path/work/cons_real.dta", clear
> ;
 12.                                               
>   gen cr_it`lastpass'=cr2;
 13.             cap drop one;
 14.             gen one=1;
 15.                                     sort one;
 16.             merge one using `cutoff';
 17.             tab _merge;
 18.             drop _merge;
 19.                                     drop one;
 20.                            gen relpoor`pass'=c
> r_it`lastpass'<=cutoff;
 21.             *lab var relpoor`pass' "=1 if in b
> ottom of PCE";
.                                     tab relpoor`p
> ass' [aw=popwt];
 22.                                     keep hhid 
> cr_it`lastpass' relpoor`pass' popwt;
 23.             sort hhid;
 24.         save $path/work/relpoor_it`pass'.dta, 
> replace;
 25.         };
 26. * Comment out if IAF 2002/03. (This code below
>  excluded in order to replicate published figures
>  2002/03). ( END ) ;
.                 if `pass'>1 {   ;
 27. * Find real income at cut point in iteration n
> umber `pass' ;
.                 use "$path/work/cons_real_it`last
> pass'.dta" , clear;
 28.                                               
>   cap drop one;
 29.                 gen one=1;
 30.                                               
>                   *CA modified from hhweight*hhsi
> ze to popwt;
.                 collapse (p`cutpt') one cr_it`las
> tpass' [aw=popwt] ;
 31.                         rename cr_it`lastpass'
>  cutoff;
 32.                                               
>                           sort one;
 33.         save `cutoff', replace;
 34.         * Find relatively poor in iteration nu
> mber `pass' ;
.                 use "$path/work/cons_real_it`last
> pass'.dta", clear;
 35.                                               
>   cap drop one;
 36.                 gen one=1;
 37.                                               
>   sort one;
 38.                 merge one using `cutoff';
 39.                 tab _merge;
 40.                 drop _merge;
 41.                                               
>   drop one;
 42.                 gen relpoor`pass'=cr_it`lastpa
> ss'<=cutoff;
 43.                 *lab var relpoor`pass' "=1 if 
> in bottom of PCE";
.                                                 t
> ab relpoor`pass' [aw=popwt];
 44. *CA modified to popwt above and to keep popwt 
> below;
.                 keep hhid cr_it`lastpass' relpoor
> `pass' popwt;
 45.                 sort hhid;
 46.         save "$path/work/relpoor_it`pass'.dta"
> , replace;
 47.         };
 48.         **************************************
> ************************************;
. * Get the consumption file, and select only those
>  codes that are food,
> * using our definition of "food", which includes 
> alcoholic beverages.
> *************************************************
> *************************;
.         use "$path/work/cons_cod.dta", clear;
 49. *CA modified to merge in work/hhdata.dta for b
> ootstrap;
.     sort hhid;
 50.     merge hhid using "$path/work/hhdata.dta";
 51.     tab _m;
 52.     drop _m;
 53.         /*
>                 sort product;
>                 merge product using "$path/work/f
> ood_cat.dta";
>                 tab _merge;
>                 keep if _merge==3;
>                 drop _merge;
> */
> 
>                                 * Only food trans
> actions ;
.                 keep if food_cat;
 54.                 sort hhid;
 55. **********************************************
> ****************************;
. * Merge with file that has temporally AND spatial
> ly adjusted consumption
> * per capita from the previous iteration, and als
> o identifies those below 
> * the cutoff. Then select only those who are belo
> w the cutoff.
> *************************************************
> *************************;
.                 merge hhid using "$path/work/relp
> oor_it`pass'.dta";
 56.                 tab _merge;
 57.                 drop _merge;
 58.                                 * Keep only tr
> ansactions by the poor ;
.                 keep if relpoor`pass';
 59. **********************************************
> ****************************;
. * Calculate HH level food shares. Since we're onl
> y doing shares here, we can
> * work with the expenditures without doing tempor
> al adjustment.
> *************************************************
> *************************;
.                 gen  food_expenditure = cod_hh_no
> m3;
 60.                 *gen  food_expenditure= own_va
> lued + daily_valued + monthly_valued + educ_value
> d;
.                 egen tot_food_expen= sum (food_ex
> pen), by (hhid) ;
 61.                 count if food_expenditure==.;
 62.                 count if tot_food_expen==.;
 63.                 gen food_share= food_expenditu
> re/tot_food_expen;
 64.                 count if food_share==.;
 65.                 drop if food_share==.;
 66.                 sort hhid product;
 67.                 tempfile foodshares;
 68.         save `foodshares', replace;
 69. **********************************************
> **********************************;
. * Now find the total (economy wise, e.g. not by H
> H) shares by each product in
> * order to select the most important goods in eac
> h domain's basket.
> *************************************************
> *******************************;
.                 collapse (mean) hhweight spdomain
> , by (hhid);
 70.                 sort hhid ;
 71.                  collapse (sum) hhweight , by(
> spdomain);
 72.                 rename hhweight tothhweight;
 73.                 tempfile tothhweight;
 74.                 sort spdomain;
 75.         save `tothhweight', replace;
 76.         use `foodshares', clear;
 77.                 sort spdomain;
 78.                 merge spdomain using `tothhwei
> ght';
 79.                 tab _merge;
 80.                 drop _merge;
 81.                 sort spdomain product;
 82.                 gen f_share_w`pass'=(food_shar
> e*hhweight)/tothhweight;
 83.                 collapse (sum) f_share_w`pass'
> , by(spdomain product descript);
 84.                                sort spdomain f
> _share_w`pass';
 85.                 by spdomain: gen cumshr`pass'=
>  sum(f_share_w`pass');
 86.                 count if cumshr`pass'<=.075;
 87.                 drop if cumshr`pass'<=.075;
 88.                 lab var f_share_w`pass' "avera
> ge food share for the 13 spatial domains";
 89.         save `foodshares', replace;
 90.                                               
>   * Number of spatials domains a food product app
> ears ;
.                 gen numreg=1;
 91.                 collapse (sum) numreg cumshr`p
> ass', by (product descript);
 92.                 keep product numreg descript;
 93.                 display _N;
 94.                 sort product;
 95.                                 * Include food
>  product labels ;
. *                merge product using "$path/work/
> products.dta";
. *                tab _merge;
. *                keep if _merge==3;
.                 keep product descript numreg;
 96.                   sort product;
 97.                      display _N;
 98.           save "$path/work/codes_food_basket_f
> lex_it`pass'.dta", replace;
 99. **********************************************
> ****************************;
. *************************************************
> *************************;
. * That is pretty much the part equivalent to "100
> _food_basket_flex.do",
> * which figures out the food shares for the relev
> ant reference group. Now
> * we figure out the prices with a code stream tha
> t is adapted from
> * "110_price_unit_flex.do".
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************************
> * Create sorted data set with daily + own expendi
> ture and the matched codes
> *************************************************
> *************************************;
. use "$path/in/cons_cod_trans.dta", clear;
100. *save "$path/work/cons_cod_trans.dta", replace
> ;
. *drop value   ;
. *drop quantity;
. keep hhid product food_cat valuez quantityz unit;
101. rename valuez    value;
102. rename quantityz quantity;
103. *drop count;
. drop if quantity==0 ;
104.         tempfile dd_acsort;
105.         save    `dd_acsort', replace;
106. /*
>         use "$path/work/daily.dta", clear;
>                 drop days;
>                 sort product;
>                 tempfile dd_acsort;
>         save `dd_acsort', replace;
>         
>         use "$path/work/own.dta", clear;
>                 keep hhid product valued quantity
> d unit;
>                 rename valued value;
>                 rename quantityd quantity;
>         
>                 *CHECK THE ZEROS IN quantity FOR 
> NOW DELETE;
>                 drop if quantity==0;
>         
>                 append using `dd_acsort';
> */
> 
>                 *CA modified to insert work/hhdat
> a.dta for bootstrap;
.                 sort hhid;
107.                 merge hhid using "$path/work/h
> hdata.dta";
108.                 tab _m;
109.                  drop if _m==2;
110.                 drop _m;
111.                                 sort product;
112.                 gen count=1;
113.         save `dd_acsort', replace;
114.         **************************************
> ************************************;
. * Merge the basket codes with the dd  and own dat
> a sets.
> * Drop all codes not a part of the flexible food 
> basket
> *************************************************
> *************************;
.                 merge product using "$path/work/c
> odes_food_basket_flex_it`pass'.dta";
115.                         tab _merge;
116.                 drop if _merge~=3;
117.                 drop _merge;
118. **********************************************
> ****************************************
> * Drop observations where product code, quantity 
> or value information is unavailable
> *************************************************
> *************************************;
.                 drop if product==. | value==. | q
> uantity==.  ;
119.         **************************************
> ************************************************
> * Convert non-KG quantities (units, liters) into 
> kilograms
> *************************************************
> *************************************;
. *do "$path/new/110a_conversions.do"
> 
> *************************************************
> *******************
> * There remain a few difficult to interpret obser
> vations such as liters
> * of fish and liters of pasta. These are dropped.
> *************************************************
> *******************;
. *                $MZ drop if unit~=2;
.         *****************************************
> *********************************;
. * Bring in the spdomain and reg_tpi variables, an
> d also the information on
> * relatively poor households.
> *************************************************
> *************************;
.                 preserve;
120.                                               
>   * Temporally adjusted expenditure ;
.                         use `contpi', clear;
121.                                 keep hhid hhwe
> ight spdomain reg_tpi survquar tpi_trim cons_pc_t
> pi ;
122.                                 sort hhid;
123.                                 tempfile hhd2;
124.                         save `hhd2', replace;
125.                 restore;
126.                                 compress;
127.                 sort hhid;
128.                 merge hhid using `hhd2';
129.                 tab _merge;
130.                 drop _merge;
131.                 sort hhid;
132.                 merge hhid using "$path/work/r
> elpoor_it`pass'.dta";
133.                 tab _merge;
134.                 drop _merge;
135.                                               
>   * Keep nominal food transactions by poor people
>  ;
.                 keep if relpoor`pass';
136.                 drop if product==.;
137.                                               
>                   * Temporally deflate transactio
> n values ;
.                 gen value_r=value/tpi_trim;
138. **********************************************
> ****************************;
. * Toss out the bottom 5% and top 5% of the HH-LEV
> EL prices per kg in
> * each spdomain & product combination. This shoul
> d eliminate outliers
> * that may have an undue influence on the price c
> alculation. 
> *************************************************
> *************************;
.                 gen hhppkg=value_r/quantity;
139.                 egen lower5=pctile(hhppkg), p(
> 5)  by(spdomain product);
140.                 egen upper5=pctile(hhppkg), p(
> 95) by(spdomain product);
141.                 keep if hhppkg>=lower5 & hhppk
> g<=upper5;
142. **********************************************
> ***********************
> * Note that we do prices in three ways. First, by
>  summing quantity and value 
> * This average price price_uw is thus quantity/va
> lue weighted. Second, we
> * calculate the price and take simple means for a
>  transaction weighted
> * price, price_ut. Last we take the median, price
> _um. But in the end
> * we only use price_unitw
> *************************************************
> ********************;
.                 gen price_ut`pass'=value_r/(quant
> ity*1000);
143.                 gen price_um`pass'=price_ut;
144.                 collapse (sum) 
>                         quantity value_r count bs
> wt (mean) price_ut (median) price_um [aw=hhweight
> ], 
>                         by(spdomain product);
145.                 *Generate weighted price per g
> ram ;
.                 gen price_uw`pass'=value_r/(quant
> ity*1000);
146.                 drop value_r quantity;
147.                 sort spdomain product;
148.                 lab var price_ut`pass' "Averag
> e of calculated prices - transaction weighted";
149.                 lab var price_um`pass' "Median
>  of prices";
150.                 lab var price_uw`pass' "Value 
> share weighted mean prices";
151. * Get an idea of the difference between the pr
> ice measures;
.                 gen ratiotw`pass'=price_ut`pass'/
> price_uw`pass';
152.                 gen ratiomw`pass'=price_um`pas
> s'/price_uw`pass';
153.                 sum ratiotw`pass' ratiomw`pass
> ';
154.                 sort product;
155.                 merge product using "$path/wor
> k/codes_food_basket_flex_it`pass'.dta";
156.                 tab _m;
157.                 count if _merge~=3;
158.                 drop if _merge~=3;
159.                 drop _merge;
160.                 sort product spdomain;
161.         save "$path/work/price_unit_flex_it`pa
> ss'.dta", replace;
162. **********************************************
> ****************************;
. *************************************************
> *************************;
. * That concludes the prices part. Now we move to 
> calculating the food
> * poverty lines, which draws code from "120_povli
> ne_flex.do" with very few
> * changes:
> * - The changes facilitate accumulating vectors
> *   of intermediate results across iterations, ra
> ther than generating a
> *   bunch of new files.
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************;
. * Use the file with the food basket (`foodshares'
> ), which is in shares. 
> * Then merge it with the prices file, and then wi
> th the calories file.
> * Along the way, drop those observations where we
>  have no price information
> * or no calorie information, but list them out.
> *************************************************
> *************************;
.         use `foodshares', clear;
163.                 sort product spdomain;
164.                 merge product spdomain using "
> $path/work/price_unit_flex_it`pass'.dta";
165.                         tab _merge;
166.                 list product spdomain descript
>  if _merge==1;
167.                         drop if _merge ~=3;
168.                 drop _merge;
169.                 sort product;
170.                         merge product using "$
> path/work/calperg.dta";
171.                 tab _merge;
172.                                               
>   * This tells where we are lacking calorie info 
> or are lacking quantity info due to 
>                 * missing price info above;
.                 list product spdomain descript if
>  _merge==1;
173.                         drop if _merge~=3;
174.                 drop _merge;
175.                 sort spdomain f_share_w`pass';
176.                                 *CA modified t
> o change count bswt;
.                 by spdomain: count if round(bswt)
> <10;
177.                                 sum bswt;
178.                                               
>   drop if round(bswt) < 10;
179.                                               
>                   * Total food share in spatial d
> omain ;
.                 by spdomain: egen baskshr=sum(f_s
> hare_w`pass');
180.                                 * Cumulated fo
> od share in spatial domain ;
.                 by spdomain: gen  cumshr =sum(f_s
> hare_w`pass');
181.                 drop if cumshr<=baskshr-.9;
182.                         drop baskshr;
183.                 by spdomain: egen baskshr=sum(
> f_share_w`pass');
184.                 tabstat baskshr , by(spdomain)
>  st(n mean sd min max);
185.                                               
>                   * How many grams in 1 MT exp on
>  food item ;
.                                 gen quan`pass'=f_
> share_w`pass'/price_uw`pass';
186.                                 * How many cal
> ories in 1 MT exp on food item ;
.                 gen cal_ir`pass'=quan`pass'*calpe
> rg;
187.                                 * how many cal
> ories in 1 MT exp in food basket ;
.                 by spdomain: egen calreg=sum(cal_
> ir);
188.                         sort spdomain;
189.                 merge spdomain using "$path/wo
> rk/calpp.dta";
190.                 tab _merge;
191.                 drop _merge;
192.                                               
>           * get the expansion factor to hit 95% o
> f calorie requirements ;
.                 gen ratio=.95*calpp/calreg;
193.                         replace quan`pass'=qua
> n`pass'*ratio;
194.                 replace cal_ir`pass'=quan`pass
> '*calperg;
195.                         sort spdomain product;
196.                 by spdomain: egen chkcal=sum(c
> al_ir`pass');
197.                 replace chkcal=chkcal/.95-calp
> p ;
198.                                               
>   tabstat chkcal , by(spdomain) st(n mean sd min 
> max);
199.                         gen val_ir`pass'=quan`
> pass'*price_uw`pass';
200.                         by spdomain: egen povl
> ine_f_flex90_`pass'=sum(val_ir`pass');
201.                 replace povline_f=povline_f_fl
> ex90_`pass'/.9;
202.                 *drop product96;
. keep product spdomain quan`pass'  price_uw`pass' 
> val_ir`pass' povline_f_flex90_`pass' calpp calper
> g;
203.                     save "$path/work/quan_flex
> _it`pass'.dta", replace;
204.                         collapse (mean) povlin
> e_f_flex90_`pass', by (spdomain);
205.                                               
>   keep spdomain povline_f_flex90_`pass';
206.                 sort spdomain;
207.                 save "$path/work/povline_food_
> flex_it`pass'.dta", replace;
208.         **************************************
> ************************************;
. *************************************************
> *************************;
. * Now comes the part that draws the non-food and 
> total poverty lines,
> * and generates estimates of poverty measures. Th
> is is drawn from 
> * "130_povmeas_flex.do" with a few changes.
> *************************************************
> *************************;
. *************************************************
> *************************;
. *************************************************
> *************************
> * Calculate non-food expenditure for HH around th
> e food poverty line
> *
> * Develop a discrete triangular weighted distribu
> tion. This gives a
> * weight of  1 to HH at +/- 18-20% from food pove
> rty line, and
> * weight of  2 to HH at +/- 16-18% from food pove
> rty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food pove
> rty line.
> * This weight is called triwt below.
> *************************************************
> *************************;
.         use `contpi', clear;
209.                 sort spdomain;
210.                 merge spdomain using "$path/wo
> rk/povline_food_flex_it`pass'.dta";
211.                 tab _merge;
212.                 drop _merge;
213.                 gen triwt=0 ;
214.                 replace triwt = 11 - round(50*
> abs(cons_pc_tpi/povline_f_flex90_`pass'-1)+0.5) i
> f abs(cons_pc_tpi/povline_f_flex90_`pass'-1)<=0.2
> ;
215.                                               
>                   * Nearness to poverty line and 
> population weights ;
.                 gen tripopwt=(triwt+1)*hhweight*h
> hsize;
216.                                               
>   preserve;
217.                         collapse (mean) nf_pc_
> nom [aw=tripopwt] , by(spdomain);
218.                         rename nf_pc_nom povli
> ne_nf_flex`pass';
219.                         lab var povline_nf_fle
> x`pass' "Nonfood poverty line. Flexible bundle";
220.                         tempfile znf;
221.                         sort spdomain;
222.                         save `znf', replace;
223.                                               
>                   restore;
224.                                 sort spdomain;
225.                 merge spdomain using `znf';
226.                 tab _merge;
227.                 drop _merge;
228. **********************************************
> ****************************
> * Poverty line is the sum of the food and non-foo
> d poverty lines
> *************************************************
> *************************;
.                 gen povline_flex`pass'=povline_f_
> flex90_`pass' + povline_nf_flex`pass';
229. keep spdomain povline_flex`pass';
230.                 sort spdomain;
231.         save "$path/work/povlines_it`pass'.dta
> ", replace;
232. **********************************************
> ****************************;
. * Create spatial price index, based on the total 
> poverty line, with
> * adjustment so that mean (and total) nominal con
> sumption equals
> * mean (and total) spatially deflated consumption
> .
> *
> * Choose arbitrary strata to be the base at first
> : we just use the first stratum.
> *************************************************
> *************************;
.         use `contpi', clear;
233.                 sort spdomain;
234.                 merge spdomain using "$path/wo
> rk/povlines_it`pass'.dta";
235.                 tab _merge;
236.                 drop _merge;
237.                 gen cr= cons_pc_tpi ;
238.                 gen linpob`pass'=povline_flex`
> pass';
239.                 qui sum linpob`pass' if spdoma
> in==1, meanonly;
240.                 global spi_base=r(mean);
241.                 gen spi`pass'=linpob`pass'/$sp
> i_base;
242.                 gen cr_it`pass'=cr/spi`pass';
243.                 qui sum cr [aw=hhweight*hhsize
> ];
244.                 global sumcr=r(sum);
245.                 qui sum cr_it`pass' [aw=hhweig
> ht*hhsize];
246.                 global sumcr2=r(sum);
247.                 replace spi`pass'=spi`pass'*$s
> umcr2/$sumcr;
248.                 gen linpobr`pass'=linpob`pass'
> /spi`pass';
249.                 replace cr_it`pass'=cr/spi`pas
> s';
250.                 su cr cr_it`pass' linpob`pass'
>  linpobr`pass' [aw=hhweight*hhsize];
251.                 lab var cr "Temporally-adjuste
> d cons pc";
252.                 lab var cr_it`pass' "Spatially
>  & temporally adjusted cons pc";
253.                 lab var linpob`pass' "Poverty 
> line";
254.                 lab var linpobr`pass' "Real po
> verty line";
255.                 lab var spi`pass' "Spatial pri
> ce index";
256.                 gen linpob=linpob`pass';
257. **********************************************
> ****************************
> * calculate poverty measures with the flexible fo
> od bundle
> *************************************************
> *************************;
.                 gen h=100 if cr_it`pass'<=linpobr
> `pass' & linpobr`pass'~=. & cr_it`pass'~=.;
258.                 replace  h   = 0 if cr_it`pass
> ' > linpobr`pass' & linpobr`pass'~=. & cr_it`pass
> '~=.;
259.                 gen      pg  = ((linpobr`pass'
>  - cr_it`pass' )/linpobr`pass') *100;
260.                 replace  pg  = 0             i
> f h==0;
261.                 gen      spg = ((( linpobr`pas
> s' - cr_it`pass' )/ linpobr`pass' )^2)*100;
262.                 replace  spg = 0             i
> f h==0;
263.                 gen h_flex`pass'  =h;
264.                 gen pg_flex`pass' =pg;
265.                 gen spg_flex`pass'=spg;
266.                                 lab var h_flex
> `pass'   "Poverty headcount. Flexible bundle";
267.                 lab var pg_flex`pass'  "Povert
> y gap. Flexible bundle";
268.                 lab var spg_flex`pass' "Square
> d poverty gap. Flexible bundle";
269.                 gen popwt=hhsize*hhweight;
270.                         * Stata 10.1 syntax ;
.                         svyset , clear;
271.                         svyset [pweight=popwt]
>  , str(strata) psu(psu);
272.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass';
273.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(rural);
274.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(strata);
275.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(strata rural);
276.                 svy: mean h_flex`pass' pg_flex
> `pass' spg_flex`pass' , over(spdomain);
277. *preserve;
. keep hhid popwt cr_it`pass' h_flex`pass' pg_flex`
> pass' spg_flex`pass' rural news reg_tpi strata sp
> domain;
278.                 compress;
279.                 sort hhid;
280.         save "$path/work/cons_real_it`pass'.dt
> a" , replace;
281. *restore;
.                                 * New cutoff poin
> t (percentile) to use in next iteration is equal 
> to the poverty ;
.                 * rate in this iteration ;
.                                                 s
> um h_flex`pass' [aw=popwt] ;
282.                                 * Comment out 
> next line for IAF 2002/03 in order to replicate o
> fficial figures ( START );
.                 * URB: In this case, we just use 
> the poorest 50% as there are too few actually poo
> r to calculate the bundle and prices..;
.                 local cutpt= $tpi_bottom;
283. *               local cutpt= round(r(mean));
.                 * Comment out next line for IAF 2
> 002/03 in order to replicate official figures ( E
> ND );
. *       save foodshares tempfile to disk;
.         use `foodshares', clear;
284.         save "$path/work/foodshares_it`pass'.d
> ta", replace;
285.         local lastpass = `pass';
286.         local pass = `pass' + 1;
287.         };
(note: file /tmp/St02502.000009 not found)
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor1 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 4,740.3184       69.97       69.97
          1 | 2,034.6816       30.03      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it1.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(311450 observations deleted)
    0
    0
(792 missing values generated)
  792
(792 observations deleted)
(note: file /tmp/St02502.00000a not found)
file /tmp/St02502.00000a saved
(note: file /tmp/St02502.00000b not found)
file /tmp/St02502.00000b saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     99,803      100.00      100.00
------------+-----------------------------------
      Total |     99,803      100.00
  152
(152 observations deleted)
file /tmp/St02502.00000a saved
45
45
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it1.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.00000c not found)
file /tmp/St02502.00000c saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.00000c saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     11,416       13.40       13.40
          3 |     73,788       86.60      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(11416 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.00000e not found)
file /tmp/St02502.00000e saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         28        0.04        0.04
          3 |     73,788       99.96      100.00
------------+-----------------------------------
      Total |     73,816      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     73,816      100.00      100.00
------------+-----------------------------------
      Total |     73,816      100.00
(58845 observations deleted)
(10 observations deleted)
(1057 observations deleted)
(1 missing value generated)
(1 missing value generated)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw1 |       214    1.252188     .533108   
> .8704481   5.979547
    ratiomw1 |       214    1.086329    .4376949   
>        0   4.751065
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        215      100.00      100.00
------------+-----------------------------------
      Total |        215      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it1.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         77       35.81       35.81
          3 |        138       64.19      100.00
------------+-----------------------------------
      Total |        215      100.00
(77 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         17       10.97       10.97
          3 |        138       89.03      100.00
------------+-----------------------------------
      Total |        155      100.00
(17 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    2
---------------------------------------------------
-> spdomain = Central urban
    7
---------------------------------------------------
-> spdomain = Eastern
    0
---------------------------------------------------
-> spdomain = Northern
    0
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       138    93.04348    96.72422   
>        2        665
(9 observations deleted)
(11 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        26  .9014085         0
Central urban |        14  .8130065         0
      Eastern |        26  .9076375         0
     Northern |        25  .9090231         0
      Western |        27  .9042501         0
--------------+------------------------------
        Total |       118  .8945561  .0301767
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9014085  .9014085
Central urban |  .8130065  .8130065
      Eastern |  .9076375  .9076375
     Northern |  .9090231  .9090231
      Western |  .9042501  .9042501
--------------+--------------------
        Total |  .8130065  .9090231
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        118      100.00      100.00
------------+-----------------------------------
      Total |        118      100.00
(118 real changes made)
(113 real changes made)
(118 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        26  .0001799         0
Central urban |        14 -.0000128         0
      Eastern |        26 -.0000899         0
     Northern |        25 -.0001156         0
      Western |        27  .0001285         0
--------------+------------------------------
        Total |       118  .0000232   .000123
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .0001799  .0001799
Central urban | -.0000128 -.0000128
      Eastern | -.0000899 -.0000899
     Northern | -.0001156 -.0001156
      Western |  .0001285  .0001285
--------------+--------------------
        Total | -.0001156  .0001799
-----------------------------------
(118 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it1.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it1.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(300 real changes made)
(note: file /tmp/St02502.00000g not found)
file /tmp/St02502.00000g saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it1.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it1.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it1 |    6775   200636622    9399.102   72
> 647.87   106.8221   1.08e+07
     linpob1 |    6775   200636622    8529.183   14
> 910.72   2086.069   58962.39
    linpobr1 |    6775   200636622    7830.645   .0
> 003642   7830.645   7830.646
(1640 missing values generated)
(1640 real changes made)
(1640 real changes made)
(1640 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex1 |   78.12939   1.116629      75.93705 
>    80.32173
    pg_flex1 |   43.87233   .8394614      42.22417 
>    45.52049
   spg_flex1 |   28.90331   .7282709      27.47345 
>    30.33316
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex1      |
       Urban |   73.16009   3.651554       65.9908 
>    80.32939
       Rural |   78.88842    1.17596      76.57959 
>    81.19725
-------------+-------------------------------------
> -----------
pg_flex1     |
       Urban |   52.91586   3.530613      45.98401 
>     59.8477
       Rural |   42.49098   .8048401      40.91079 
>    44.07116
-------------+-------------------------------------
> -----------
spg_flex1    |
       Urban |   42.89031   3.436605      36.14304 
>    49.63758
       Rural |   26.76687   .6291234      25.53167 
>    28.00206
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex1      |
     KAMPALA |    87.6499   2.776667      82.19832 
>    93.10148
   _subpop_2 |   77.64706   5.127033      67.58088 
>    87.71324
   _subpop_3 |     90.392    1.87805      86.70472 
>    94.07928
   _subpop_4 |    71.9724    2.85977      66.35766 
>    77.58714
     EASTERN |    79.0723   2.808611      73.55801 
>     84.5866
   _subpop_6 |   62.85492   3.391321      56.19655 
>    69.51328
   _subpop_7 |   90.45878   3.961178      82.68159 
>    98.23597
   _subpop_8 |   72.17648    4.51712      63.30777 
>    81.04518
   _subpop_9 |   83.99374   3.211037      77.68934 
>    90.29814
  _subpop_10 |   78.04533   2.883223      72.38455 
>    83.70612
-------------+-------------------------------------
> -----------
pg_flex1     |
     KAMPALA |   74.66873   3.360241      68.07139 
>    81.26607
   _subpop_2 |   51.45886   3.895527      43.81056 
>    59.10716
   _subpop_3 |   59.78295   2.343004       55.1828 
>     64.3831
   _subpop_4 |   33.28099   1.787485      29.77152 
>    36.79045
     EASTERN |   41.08151   1.736523       37.6721 
>    44.49092
   _subpop_6 |   27.88397   2.210014      23.54493 
>    32.22301
   _subpop_7 |   63.39349   4.118463      55.30749 
>    71.47949
   _subpop_8 |   28.69332   2.643034      23.50411 
>    33.88253
   _subpop_9 |   48.95864   2.129954      44.77679 
>    53.14049
  _subpop_10 |     42.022    1.85527      38.37945 
>    45.66455
-------------+-------------------------------------
> -----------
spg_flex1    |
     KAMPALA |   65.97072   3.686804      58.73222 
>    73.20922
   _subpop_2 |   37.51964   3.213559      31.21028 
>    43.82899
   _subpop_3 |    43.9155   2.441912      39.12116 
>    48.70984
   _subpop_4 |   18.75517   1.243075      16.31457 
>    21.19576
     EASTERN |   24.57746   1.306558      22.01223 
>     27.1427
   _subpop_6 |   15.29763   1.574634      12.20607 
>     18.3892
   _subpop_7 |   47.29809   3.833932      39.77072 
>    54.82546
   _subpop_8 |   14.28052   1.569429      11.19917 
>    17.36186
   _subpop_9 |   32.34916   1.710191      28.99145 
>    35.70687
  _subpop_10 |   26.08458   1.370648      23.39351 
>    28.77565
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex1      |
   _subpop_1 |    87.6499   2.776667      82.19832 
>    93.10148
   _subpop_2 |   95.48657   1.516357      92.50943 
>    98.46372
   _subpop_3 |    73.0865    5.66949      61.95528 
>    84.21771
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   89.07367   2.188137      84.77759 
>    93.36976
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   73.28206   2.883707      67.62032 
>     78.9438
   _subpop_8 |   48.13661   5.094458      38.13439 
>    58.13884
   _subpop_9 |   81.52137   2.701404      76.21756 
>    86.82518
  _subpop_10 |   18.29759   5.497389      7.504272 
>    29.09091
  _subpop_11 |   67.70966   3.104628      61.61418 
>    73.80515
  _subpop_12 |   35.21238   7.165809      21.14337 
>     49.2814
  _subpop_13 |   92.50442     3.8909      84.86521 
>    100.1436
  _subpop_14 |   41.09108   8.016503      25.35185 
>    56.83031
  _subpop_15 |   76.78149   4.014324      68.89995 
>    84.66303
  _subpop_16 |   83.01909   5.512659      72.19579 
>    93.84239
  _subpop_17 |   84.05466   3.397109      77.38493 
>    90.72438
  _subpop_18 |   44.24118   4.512846      35.38087 
>     53.1015
  _subpop_19 |   79.76796   2.883128      74.10736 
>    85.42856
-------------+-------------------------------------
> -----------
pg_flex1     |
   _subpop_1 |   74.66873   3.360241      68.07139 
>    81.26607
   _subpop_2 |   74.46037   4.298087       66.0217 
>    82.89904
   _subpop_3 |   45.57866   3.765832        38.185 
>    52.97232
   _subpop_4 |   73.30385   6.102828      61.32184 
>    85.28586
   _subpop_5 |   56.99152   2.276275      52.52238 
>    61.46065
   _subpop_6 |   16.95889   6.963019       3.28802 
>    30.62976
   _subpop_7 |   34.19465   1.825947      30.60967 
>    37.77963
   _subpop_8 |   26.52503   2.774929      21.07687 
>     31.9732
   _subpop_9 |    42.2339   1.756875      38.78453 
>    45.68326
  _subpop_10 |   7.953776   2.554456      2.938474 
>    12.96908
  _subpop_11 |   30.05547   2.264644      25.60917 
>    34.50177
  _subpop_12 |   9.598075   3.979013      1.785865 
>    17.41029
  _subpop_13 |    65.3854   4.113377      57.30939 
>    73.46142
  _subpop_14 |   14.89565   4.152913      6.742011 
>    23.04928
  _subpop_15 |   30.73732    2.56786      25.69571 
>    35.77894
  _subpop_16 |   43.38161   5.526733      32.53068 
>    54.23254
  _subpop_17 |   49.30723   2.238741      44.91179 
>    53.70267
  _subpop_18 |    18.6702   3.050584      12.68082 
>    24.65957
  _subpop_19 |   43.21199   1.848406      39.58291 
>    46.84106
-------------+-------------------------------------
> -----------
spg_flex1    |
   _subpop_1 |   65.97072   3.686804      58.73222 
>    73.20922
   _subpop_2 |   60.90852   6.377548      48.38713 
>     73.4299
   _subpop_3 |    31.5404   2.831105      25.98194 
>    37.09886
   _subpop_4 |   61.68943   7.121926      47.70657 
>    75.67229
   _subpop_5 |   40.24602   2.029003      36.26237 
>    44.22967
   _subpop_6 |   7.474484   3.570558       .464216 
>    14.48475
   _subpop_7 |   19.38662   1.279158      16.87518 
>    21.89806
   _subpop_8 |    16.3307   1.893907      12.61229 
>    20.04911
   _subpop_9 |   25.23033     1.3556      22.56881 
>    27.89185
  _subpop_10 |   3.856616   1.401653      1.104676 
>    6.608556
  _subpop_11 |   16.54419   1.660361      13.28431 
>    19.80407
  _subpop_12 |   6.265591   3.424264     -.4574516 
>    12.98863
  _subpop_13 |   48.81743   3.892691       41.1747 
>    56.46015
  _subpop_14 |    6.77086   2.428713      2.002437 
>    11.53928
  _subpop_15 |   15.39301   1.559649      12.33086 
>    18.45515
  _subpop_16 |   27.51407   5.223004      17.25947 
>    37.76867
  _subpop_17 |   32.65137   1.782525      29.15165 
>     36.1511
  _subpop_18 |   8.872371   2.112748      4.724299 
>    13.02044
  _subpop_19 |    26.9617   1.368499      24.27485 
>    29.64855
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex1      |
   _subpop_1 |   81.13805   3.312955      74.63355 
>    87.64256
   _subpop_2 |   91.63447   1.618542       88.4567 
>    94.81224
     Eastern |   75.88185   2.021369      71.91319 
>    79.85051
    Northern |   70.46833   2.459184      65.64008 
>    75.29658
     Western |   81.10608   2.138084      76.90827 
>     85.3039
-------------+-------------------------------------
> -----------
pg_flex1     |
   _subpop_1 |   51.32647   2.377942      46.65773 
>    55.99521
   _subpop_2 |   74.32357   2.467422      69.47915 
>    79.16799
     Eastern |   37.57623   1.276298       35.0704 
>    40.08205
    Northern |   33.90299   1.601833      30.75802 
>    37.04795
     Western |   45.59125   1.425061      42.79335 
>    48.38915
-------------+-------------------------------------
> -----------
spg_flex1    |
   _subpop_1 |   35.92478   1.861168      32.27064 
>    39.57891
   _subpop_2 |   63.74108   3.177293      57.50293 
>    69.97923
     Eastern |   21.96112   .9350687      20.12525 
>    23.79699
    Northern |   20.13226   1.193961      17.78809 
>    22.47642
     Western |   29.30802   1.127944      27.09347 
>    31.52257
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex1 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it1.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex1 |    6775   200636622    78.12939   41
> .33993          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it1.dta saved
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor2 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 4,741.6226       69.99       69.99
          1 | 2,033.3774       30.01      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it2.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(293101 observations deleted)
    0
    0
(947 missing values generated)
  947
(947 observations deleted)
(note: file /tmp/St02502.00000h not found)
file /tmp/St02502.00000h saved
(note: file /tmp/St02502.00000i not found)
file /tmp/St02502.00000i saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    117,997      100.00      100.00
------------+-----------------------------------
      Total |    117,997      100.00
  152
(152 observations deleted)
file /tmp/St02502.00000h saved
48
48
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it2.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.00000j not found)
file /tmp/St02502.00000j saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.00000j saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      7,718        9.06        9.06
          3 |     77,486       90.94      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(7718 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.00000l not found)
file /tmp/St02502.00000l saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         24        0.03        0.03
          3 |     77,486       99.97      100.00
------------+-----------------------------------
      Total |     77,510      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     77,510      100.00      100.00
------------+-----------------------------------
      Total |     77,510      100.00
(57500 observations deleted)
(17 observations deleted)
(1453 observations deleted)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw2 |       231    1.269803    .6312932   
> .7641575   7.890666
    ratiomw2 |       231     1.12829    .5445916   
>        0   6.016366
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        231      100.00      100.00
------------+-----------------------------------
      Total |        231      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it2.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         84       36.36       36.36
          3 |        147       63.64      100.00
------------+-----------------------------------
      Total |        231      100.00
(84 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        8.70        8.70
          3 |        147       91.30      100.00
------------+-----------------------------------
      Total |        161      100.00
(14 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    1
---------------------------------------------------
-> spdomain = Central urban
    0
---------------------------------------------------
-> spdomain = Eastern
    0
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       147    113.3537    100.2693   
>        3        481
(2 observations deleted)
(15 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27  .9026229         0
Central urban |        32   .901824         0
      Eastern |        23   .902478         0
     Northern |        21  .9064019         0
      Western |        27  .9040464         0
--------------+------------------------------
        Total |       130  .9033067   .001562
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9026229  .9026229
Central urban |   .901824   .901824
      Eastern |   .902478   .902478
     Northern |  .9064019  .9064019
      Western |  .9040464  .9040464
--------------+--------------------
        Total |   .901824  .9064019
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        130      100.00      100.00
------------+-----------------------------------
      Total |        130      100.00
(130 real changes made)
(125 real changes made)
(130 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27 -.0000771         0
Central urban |        32 -.0000128         0
      Eastern |        23 -.0000899         0
     Northern |        21 -.0001156         0
      Western |        27 -.0001285         0
--------------+------------------------------
        Total |       130 -.0000805  .0000429
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural | -.0000771 -.0000771
Central urban | -.0000128 -.0000128
      Eastern | -.0000899 -.0000899
     Northern | -.0001156 -.0001156
      Western | -.0001285 -.0001285
--------------+--------------------
        Total | -.0001285 -.0000128
-----------------------------------
(130 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it2.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it2.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(269 real changes made)
(note: file /tmp/St02502.00000n not found)
file /tmp/St02502.00000n saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it2.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it2.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it2 |    6775   200636622    9399.102   78
> 304.77   123.4689   1.25e+07
     linpob2 |    6775   200636622    7840.653   12
> 600.26    2064.99   50353.15
    linpobr2 |    6775   200636622      7729.4   .0
> 003039     7729.4   7729.401
(1659 missing values generated)
(1659 real changes made)
(1659 real changes made)
(1659 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex2 |   77.91174   1.118198      75.71633 
>    80.10716
    pg_flex2 |   43.59398   .8254842      41.97326 
>     45.2147
   spg_flex2 |   28.59481   .7063904      27.20792 
>    29.98171
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex2      |
       Urban |   72.93595   3.657478      65.75503 
>    80.11688
       Rural |   78.67177   1.178488      76.35798 
>    80.98556
-------------+-------------------------------------
> -----------
pg_flex2     |
       Urban |   51.14365   3.419476      44.43001 
>    57.85729
       Rural |   42.44081   .8047364      40.86082 
>    44.02079
-------------+-------------------------------------
> -----------
spg_flex2    |
       Urban |   40.83173   3.309068      34.33486 
>     47.3286
       Rural |   26.72569   .6290269      25.49069 
>    27.96069
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex2      |
     KAMPALA |   87.37149   2.801288      81.87157 
>    92.87141
   _subpop_2 |   77.21555   5.137259      67.12929 
>     87.3018
   _subpop_3 |   90.23427   1.883523      86.53625 
>    93.93229
   _subpop_4 |    71.9724    2.85977      66.35766 
>    77.58714
     EASTERN |    79.0723   2.808611      73.55801 
>     84.5866
   _subpop_6 |   61.56979   3.396763      54.90075 
>    68.23884
   _subpop_7 |   90.45878   3.961178      82.68159 
>    98.23597
   _subpop_8 |   71.90154   4.535149      62.99744 
>    80.80564
   _subpop_9 |   83.99374   3.211037      77.68934 
>    90.29814
  _subpop_10 |   78.04533   2.883223      72.38455 
>    83.70612
-------------+-------------------------------------
> -----------
pg_flex2     |
     KAMPALA |   72.46313   3.504191      65.58316 
>     79.3431
   _subpop_2 |    50.6582   3.702695      43.38849 
>     57.9279
   _subpop_3 |   58.99592    2.36065      54.36113 
>    63.63071
   _subpop_4 |   33.42708   1.789649      29.91336 
>    36.94079
     EASTERN |   41.22496   1.737699      37.81324 
>    44.63667
   _subpop_6 |   27.53515   2.202883      23.21011 
>    31.86019
   _subpop_7 |   63.11721   4.122297      55.02368 
>    71.21073
   _subpop_8 |   28.25039   2.626624       23.0934 
>    33.40738
   _subpop_9 |   48.95646   2.129936      44.77464 
>    53.13828
  _subpop_10 |   42.01976   1.855228      38.37729 
>    45.66223
-------------+-------------------------------------
> -----------
spg_flex2    |
     KAMPALA |   63.12086   3.801248      55.65766 
>    70.58405
   _subpop_2 |   36.53496   2.988603      30.66728 
>    42.40265
   _subpop_3 |   43.19019   2.372837      38.53147 
>    47.84891
   _subpop_4 |    18.8652    1.24673      16.41743 
>    21.31298
     EASTERN |    24.7024   1.308985       22.1324 
>     27.2724
   _subpop_6 |   15.04294   1.562898      11.97442 
>    18.11146
   _subpop_7 |   46.97063   3.828904      39.45314 
>    54.48813
   _subpop_8 |    13.9893   1.548296      10.94944 
>    17.02915
   _subpop_9 |    32.3471   1.710158      28.98945 
>    35.70474
  _subpop_10 |    26.0826   1.370595      23.39164 
>    28.77356
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex2      |
   _subpop_1 |   87.37149   2.801288      81.87157 
>    92.87141
   _subpop_2 |   94.61326   1.750274      91.17685 
>    98.04967
   _subpop_3 |   72.76792   5.674296      61.62727 
>    83.90857
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   88.88338   2.192153      84.57941 
>    93.18735
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   73.28206   2.883707      67.62032 
>     78.9438
   _subpop_8 |   48.13661   5.094458      38.13439 
>    58.13884
   _subpop_9 |   81.52137   2.701404      76.21756 
>    86.82518
  _subpop_10 |   18.29759   5.497389      7.504272 
>    29.09091
  _subpop_11 |   66.28452   3.151859      60.09631 
>    72.47274
  _subpop_12 |   35.21238   7.165809      21.14337 
>     49.2814
  _subpop_13 |   92.50442     3.8909      84.86521 
>    100.1436
  _subpop_14 |   41.09108   8.016503      25.35185 
>    56.83031
  _subpop_15 |   76.46583   4.045551      68.52298 
>    84.40867
  _subpop_16 |   83.01909   5.512659      72.19579 
>    93.84239
  _subpop_17 |   84.05466   3.397109      77.38493 
>    90.72438
  _subpop_18 |   44.24118   4.512846      35.38087 
>     53.1015
  _subpop_19 |   79.76796   2.883128      74.10736 
>    85.42856
-------------+-------------------------------------
> -----------
pg_flex2     |
   _subpop_1 |   72.46313   3.504191      65.58316 
>     79.3431
   _subpop_2 |   70.93401   4.938656      61.23768 
>    80.63034
   _subpop_3 |    45.4748   3.759574      38.09343 
>    52.85617
   _subpop_4 |   69.29038    7.14551      55.26121 
>    83.31954
   _subpop_5 |    56.8706   2.277945      52.39818 
>    61.34301
   _subpop_6 |   17.07827   6.994376      3.345832 
>     30.8107
   _subpop_7 |   34.34223   1.827935      30.75335 
>    37.93112
   _subpop_8 |   26.60663   2.781625      21.14532 
>    32.06795
   _subpop_9 |   42.38223   1.757236      38.93216 
>    45.83231
  _subpop_10 |   7.848187   2.529362      2.882155 
>    12.81422
  _subpop_11 |   29.68015   2.260858      25.24128 
>    34.11901
  _subpop_12 |   9.336608   4.092778      1.301037 
>    17.37218
  _subpop_13 |   65.10858   4.117794      57.02389 
>    73.19326
  _subpop_14 |   14.62825   4.122574      6.534177 
>    22.72232
  _subpop_15 |   30.26838   2.556036      25.24998 
>    35.28679
  _subpop_16 |   43.37915   5.526945       32.5278 
>    54.23049
  _subpop_17 |   49.30507   2.238718      44.90967 
>    53.70046
  _subpop_18 |   18.66861   3.050522      12.67935 
>    24.65786
  _subpop_19 |   43.20972   1.848366      39.58072 
>    46.83871
-------------+-------------------------------------
> -----------
spg_flex2    |
   _subpop_1 |   63.12086   3.801248      55.65766 
>    70.58405
   _subpop_2 |   56.48751   7.057731      42.63069 
>    70.34433
   _subpop_3 |   31.43421   2.824574      25.88857 
>    36.97985
   _subpop_4 |   58.06451   7.351308      43.63129 
>    72.49773
   _subpop_5 |   40.11933    2.02752      36.13859 
>    44.10007
   _subpop_6 |   7.546421    3.59612      .4859652 
>    14.60688
   _subpop_7 |   19.49879   1.282815      16.98017 
>    22.01741
   _subpop_8 |   16.40785   1.900335      12.67682 
>    20.13888
   _subpop_9 |   25.35905   1.357755      22.69329 
>     28.0248
  _subpop_10 |    3.77362   1.380682      1.062852 
>    6.484389
  _subpop_11 |   16.27079   1.649253      13.03273 
>    19.50886
  _subpop_12 |   6.199878    3.41172     -.4985353 
>    12.89829
  _subpop_13 |   48.48028   3.888825      40.84514 
>    56.11542
  _subpop_14 |   6.606869   2.394985      1.904666 
>    11.30907
  _subpop_15 |   15.08293   1.539953      12.05946 
>    18.10641
  _subpop_16 |    27.5121   5.222986      17.25753 
>    37.76667
  _subpop_17 |    32.6493   1.782488      29.14965 
>    36.14896
  _subpop_18 |   8.871153   2.112633      4.723307 
>      13.019
  _subpop_19 |   26.95968   1.368447      24.27294 
>    29.64643
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex2      |
   _subpop_1 |   80.88408   3.314836      74.37589 
>    87.39228
   _subpop_2 |   91.26064   1.661792      87.99795 
>    94.52332
     Eastern |   75.88185   2.021369      71.91319 
>    79.85051
    Northern |   69.73218   2.481296      64.86051 
>    74.60384
     Western |   81.10608   2.138084      76.90827 
>     85.3039
-------------+-------------------------------------
> -----------
pg_flex2     |
   _subpop_1 |   51.21402   2.375274      46.55052 
>    55.87752
   _subpop_2 |   71.38897   2.759907       65.9703 
>    76.80764
     Eastern |   37.72086   1.277353      35.21296 
>    40.22875
    Northern |   33.53413   1.596853      30.39894 
>    36.66932
     Western |   45.58904   1.425045      42.79117 
>    48.38691
-------------+-------------------------------------
> -----------
spg_flex2    |
   _subpop_1 |   35.80826   1.857621       32.1611 
>    39.45543
   _subpop_2 |   60.31724   3.426108      53.59058 
>     67.0439
     Eastern |   22.07936   .9371681      20.23937 
>    23.91936
    Northern |   19.85346   1.187038      17.52288 
>    22.18403
     Western |     29.306   1.127917       27.0915 
>     31.5205
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex2 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it2.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex2 |    6775   200636622    77.91174   41
> .48721          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it2.dta saved
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor3 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 4,741.2972       69.98       69.98
          1 | 2,033.7028       30.02      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it3.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(294285 observations deleted)
    0
    0
(947 missing values generated)
  947
(947 observations deleted)
(note: file /tmp/St02502.00000o not found)
file /tmp/St02502.00000o saved
(note: file /tmp/St02502.00000p not found)
file /tmp/St02502.00000p saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    116,813      100.00      100.00
------------+-----------------------------------
      Total |    116,813      100.00
  153
(153 observations deleted)
file /tmp/St02502.00000o saved
47
47
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it3.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.00000q not found)
file /tmp/St02502.00000q saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.00000q saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      8,015        9.41        9.41
          3 |     77,189       90.59      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(8015 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.00000s not found)
file /tmp/St02502.00000s saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         24        0.03        0.03
          3 |     77,189       99.97      100.00
------------+-----------------------------------
      Total |     77,213      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     77,213      100.00      100.00
------------+-----------------------------------
      Total |     77,213      100.00
(57495 observations deleted)
(17 observations deleted)
(1425 observations deleted)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw3 |       227    1.271925    .6335286   
> .7641575   7.890666
    ratiomw3 |       227    1.123267     .543231   
>        0   6.016366
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        227      100.00      100.00
------------+-----------------------------------
      Total |        227      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it3.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         82       36.12       36.12
          3 |        145       63.88      100.00
------------+-----------------------------------
      Total |        227      100.00
(82 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         15        9.38        9.38
          3 |        145       90.62      100.00
------------+-----------------------------------
      Total |        160      100.00
(15 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    1
---------------------------------------------------
-> spdomain = Central urban
    0
---------------------------------------------------
-> spdomain = Eastern
    0
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       145    112.6897    98.19648   
>        3        461
(2 observations deleted)
(13 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27  .9027494         0
Central urban |        32  .9051954         0
      Eastern |        23  .9021129         0
     Northern |        21   .909676         0
      Western |        27  .9058289         0
--------------+------------------------------
        Total |       130  .9049974  .0025018
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9027494  .9027494
Central urban |  .9051954  .9051954
      Eastern |  .9021129  .9021129
     Northern |   .909676   .909676
      Western |  .9058289  .9058289
--------------+--------------------
        Total |  .9021129   .909676
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        130      100.00      100.00
------------+-----------------------------------
      Total |        130      100.00
(130 real changes made)
(125 real changes made)
(130 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27 -.0000771         0
Central urban |        32 -.0000128         0
      Eastern |        23 -.0000899         0
     Northern |        21 -.0001156         0
      Western |        27  .0001285         0
--------------+------------------------------
        Total |       130 -.0000271  .0000873
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural | -.0000771 -.0000771
Central urban | -.0000128 -.0000128
      Eastern | -.0000899 -.0000899
     Northern | -.0001156 -.0001156
      Western |  .0001285  .0001285
--------------+--------------------
        Total | -.0001156  .0001285
-----------------------------------
(130 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it3.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it3.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(312 real changes made)
(note: file /tmp/St02502.00000u not found)
file /tmp/St02502.00000u saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it3.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it3.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it3 |    6775   200636622    9399.102   78
> 437.88   123.7173   1.25e+07
     linpob3 |    6775   200636622    7832.423   12
> 576.69   2076.222   50265.79
    linpobr3 |    6775   200636622     7731.51    .
> 000195    7731.51   7731.511
(1654 missing values generated)
(1654 real changes made)
(1654 real changes made)
(1654 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex3 |   77.99546   1.117027      75.80234 
>    80.18858
    pg_flex3 |   43.60359   .8251954      41.98344 
>    45.22374
   spg_flex3 |   28.59694   .7059372      27.21093 
>    29.98294
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex3      |
       Urban |   72.93595   3.657478      65.75503 
>    80.11688
       Rural |   78.76827   1.176548      76.45829 
>    81.07825
-------------+-------------------------------------
> -----------
pg_flex3     |
       Urban |   51.12741   3.417468      44.41771 
>    57.83711
       Rural |   42.45436   .8044996      40.87484 
>    44.03388
-------------+-------------------------------------
> -----------
spg_flex3    |
       Urban |   40.80985   3.307431       34.3162 
>    47.30351
       Rural |   26.73148   .6286945      25.49713 
>    27.96583
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex3      |
     KAMPALA |   87.37149   2.801288      81.87157 
>    92.87141
   _subpop_2 |   77.21555   5.137259      67.12929 
>     87.3018
   _subpop_3 |   90.23427   1.883523      86.53625 
>    93.93229
   _subpop_4 |    71.9724    2.85977      66.35766 
>    77.58714
     EASTERN |    79.0723   2.808611      73.55801 
>     84.5866
   _subpop_6 |   62.24982   3.373715      55.62602 
>    68.87362
   _subpop_7 |   90.45878   3.961178      82.68159 
>    98.23597
   _subpop_8 |   72.13857   4.519481      63.26523 
>    81.01191
   _subpop_9 |   83.99374   3.211037      77.68934 
>    90.29814
  _subpop_10 |   78.04533   2.883223      72.38455 
>    83.70612
-------------+-------------------------------------
> -----------
pg_flex3     |
     KAMPALA |   72.43722   3.505923      65.55385 
>    79.32059
   _subpop_2 |   50.65079   3.700593      43.38522 
>    57.91637
   _subpop_3 |   58.98894   2.360976      54.35351 
>    63.62437
   _subpop_4 |   33.42445    1.78961      29.91081 
>    36.93809
     EASTERN |   41.22238   1.737677       37.8107 
>    44.63405
   _subpop_6 |   27.72056   2.206865       23.3877 
>    32.05341
   _subpop_7 |   63.26512   4.120239      55.17564 
>    71.35461
   _subpop_8 |   28.48712   2.635434      23.31283 
>     33.6614
   _subpop_9 |   48.84568   2.129027      44.66565 
>    53.02572
  _subpop_10 |   41.90586   1.853103      38.26756 
>    45.54416
-------------+-------------------------------------
> -----------
spg_flex3    |
     KAMPALA |    63.0884   3.802453      55.62284 
>    70.55396
   _subpop_2 |   36.52575   2.986392      30.66241 
>    42.38909
   _subpop_3 |   43.18476   2.371978      38.52773 
>     47.8418
   _subpop_4 |   18.86322   1.246665      16.41557 
>    21.31086
     EASTERN |   24.70015   1.308942      22.13023 
>    27.27006
   _subpop_6 |   15.17874   1.569178      12.09789 
>    18.25959
   _subpop_7 |   47.14566   3.831612      39.62285 
>    54.66847
   _subpop_8 |   14.14446   1.559594      11.08243 
>     17.2065
   _subpop_9 |   32.24225   1.708476      28.88791 
>    35.59659
  _subpop_10 |   25.98202   1.367864      23.29642 
>    28.66762
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex3      |
   _subpop_1 |   87.37149   2.801288      81.87157 
>    92.87141
   _subpop_2 |   94.61326   1.750274      91.17685 
>    98.04967
   _subpop_3 |   72.76792   5.674296      61.62727 
>    83.90857
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   88.88338   2.192153      84.57941 
>    93.18735
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   73.28206   2.883707      67.62032 
>     78.9438
   _subpop_8 |   48.13661   5.094458      38.13439 
>    58.13884
   _subpop_9 |   81.52137   2.701404      76.21756 
>    86.82518
  _subpop_10 |   18.29759   5.497389      7.504272 
>    29.09091
  _subpop_11 |   67.03864   3.098073      60.95602 
>    73.12125
  _subpop_12 |   35.21238   7.165809      21.14337 
>     49.2814
  _subpop_13 |   92.50442     3.8909      84.86521 
>    100.1436
  _subpop_14 |   41.09108   8.016503      25.35185 
>    56.83031
  _subpop_15 |   76.73797   4.018017      68.84918 
>    84.62676
  _subpop_16 |   83.01909   5.512659      72.19579 
>    93.84239
  _subpop_17 |   84.05466   3.397109      77.38493 
>    90.72438
  _subpop_18 |   44.24118   4.512846      35.38087 
>     53.1015
  _subpop_19 |   79.76796   2.883128      74.10736 
>    85.42856
-------------+-------------------------------------
> -----------
pg_flex3     |
   _subpop_1 |   72.43722   3.505923      65.55385 
>    79.32059
   _subpop_2 |   70.89285   4.946454      61.18121 
>    80.60449
   _subpop_3 |   45.47603   3.759649      38.09451 
>    52.85755
   _subpop_4 |    69.2426   7.158022      55.18887 
>    83.29633
   _subpop_5 |   56.87203   2.277925      52.39966 
>    61.34441
   _subpop_6 |   17.07612   6.993812      3.344792 
>    30.80745
   _subpop_7 |   34.33958   1.827899      30.75077 
>    37.92839
   _subpop_8 |   26.60517   2.781504      21.14409 
>    32.06624
   _subpop_9 |   42.37957    1.75723       38.9295 
>    45.82963
  _subpop_10 |   7.904718   2.542772      2.912358 
>    12.89708
  _subpop_11 |   29.87959   2.263113       25.4363 
>    34.32288
  _subpop_12 |   9.476594    4.03187      1.560607 
>    17.39258
  _subpop_13 |   65.25679   4.115424      57.17675 
>    73.33682
  _subpop_14 |   14.77141   4.138775       6.64553 
>    22.89729
  _subpop_15 |   30.51897   2.562412      25.48805 
>    35.54989
  _subpop_16 |   43.25381   5.537738      32.38128 
>    54.12635
  _subpop_17 |    49.1952   2.237573      44.80205 
>    53.58835
  _subpop_18 |   18.58775   3.047367      12.60469 
>    24.57081
  _subpop_19 |   43.09413   1.846336      39.46912 
>    46.71914
-------------+-------------------------------------
> -----------
spg_flex3    |
   _subpop_1 |    63.0884   3.802453      55.62284 
>    70.55396
   _subpop_2 |   56.43732   7.065234      42.56576 
>    70.30887
   _subpop_3 |   31.43547   2.824651      25.88968 
>    36.98126
   _subpop_4 |   58.02554   7.352392      43.59019 
>    72.46088
   _subpop_5 |   40.12084   2.027538      36.14006 
>    44.10161
   _subpop_6 |   7.545121   3.595658       .485571 
>    14.60467
   _subpop_7 |   19.49677    1.28275      16.97828 
>    22.01526
   _subpop_8 |   16.40646   1.900219      12.67565 
>    20.13726
   _subpop_9 |   25.35673   1.357716      22.69105 
>     28.0224
  _subpop_10 |   3.817893    1.39187       1.08516 
>    6.550626
  _subpop_11 |   16.41656   1.655204      13.16681 
>    19.66631
  _subpop_12 |   6.234482   3.418739     -.4777126 
>    12.94668
  _subpop_13 |   48.66051    3.89091      41.02127 
>    56.29974
  _subpop_14 |   6.694199   2.413011      1.956605 
>    11.43179
  _subpop_15 |   15.24815   1.550491      12.20399 
>    18.29231
  _subpop_16 |     27.412   5.222017      17.15933 
>    37.66467
  _subpop_17 |   32.54416   1.780636      29.04814 
>    36.04018
  _subpop_18 |   8.809357   2.106765      4.673032 
>    12.94568
  _subpop_19 |   26.85713    1.36578      24.17562 
>    29.53864
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex3      |
   _subpop_1 |   80.88408   3.314836      74.37589 
>    87.39228
   _subpop_2 |   91.26064   1.661792      87.99795 
>    94.52332
     Eastern |   75.88185   2.021369      71.91319 
>    79.85051
    Northern |   70.15262   2.461655      65.31952 
>    74.98572
     Western |   81.10608   2.138084      76.90827 
>     85.3039
-------------+-------------------------------------
> -----------
pg_flex3     |
   _subpop_1 |   51.21535   2.375306      46.55179 
>    55.87892
   _subpop_2 |   71.35443   2.763484      65.92873 
>    76.78013
     Eastern |   37.71826   1.277334       35.2104 
>    40.22611
    Northern |    33.7308   1.599586      30.59024 
>    36.87135
     Western |   45.47674   1.424209      42.68052 
>    48.27297
-------------+-------------------------------------
> -----------
spg_flex3    |
   _subpop_1 |   35.80965   1.857663       32.1624 
>     39.4569
   _subpop_2 |   60.27878   3.428784      53.54686 
>     67.0107
     Eastern |   22.07723   .9371303      20.23731 
>    23.91715
    Northern |   20.00214    1.19074       17.6643 
>    22.33999
     Western |   29.20322   1.126551      26.99141 
>    31.41504
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex3 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it3.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex3 |    6775   200636622    77.99546   41
> .43076          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it3.dta saved
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor4 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |4,742.15809       69.99       69.99
          1 |2,032.84191       30.01      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it4.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(294424 observations deleted)
    0
    0
(947 missing values generated)
  947
(947 observations deleted)
(note: file /tmp/St02502.00000v not found)
file /tmp/St02502.00000v saved
(note: file /tmp/St02502.00000w not found)
file /tmp/St02502.00000w saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    116,674      100.00      100.00
------------+-----------------------------------
      Total |    116,674      100.00
  153
(153 observations deleted)
file /tmp/St02502.00000v saved
47
47
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it4.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.00000x not found)
file /tmp/St02502.00000x saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.00000x saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      8,015        9.41        9.41
          3 |     77,189       90.59      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(8015 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.000011 not found)
file /tmp/St02502.000011 saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         24        0.03        0.03
          3 |     77,189       99.97      100.00
------------+-----------------------------------
      Total |     77,213      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     77,213      100.00      100.00
------------+-----------------------------------
      Total |     77,213      100.00
(57519 observations deleted)
(17 observations deleted)
(1424 observations deleted)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw4 |       227    1.270958    .6328591   
> .7641575   7.890666
    ratiomw4 |       227    1.123883    .5432015   
>        0   6.016366
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        227      100.00      100.00
------------+-----------------------------------
      Total |        227      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it4.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         81       35.68       35.68
          3 |        146       64.32      100.00
------------+-----------------------------------
      Total |        227      100.00
(81 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         15        9.32        9.32
          3 |        146       90.68      100.00
------------+-----------------------------------
      Total |        161      100.00
(15 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    1
---------------------------------------------------
-> spdomain = Central urban
    0
---------------------------------------------------
-> spdomain = Eastern
    0
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       146    112.5753    97.64565   
>        3        461
(2 observations deleted)
(14 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27  .9026434         0
Central urban |        32  .9050849         0
      Eastern |        23  .9021129         0
     Northern |        21  .9064019         0
      Western |        27  .9050478         0
--------------+------------------------------
        Total |       130  .9042571  .0015538
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |  .9026434  .9026434
Central urban |  .9050849  .9050849
      Eastern |  .9021129  .9021129
     Northern |  .9064019  .9064019
      Western |  .9050478  .9050478
--------------+--------------------
        Total |  .9021129  .9064019
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        130      100.00      100.00
------------+-----------------------------------
      Total |        130      100.00
(130 real changes made)
(125 real changes made)
(130 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27 -.0000771         0
Central urban |        32 -.0000128         0
      Eastern |        23 -.0000899         0
     Northern |        21 -.0001156         0
      Western |        27 -.0001285         0
--------------+------------------------------
        Total |       130 -.0000805  .0000429
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural | -.0000771 -.0000771
Central urban | -.0000128 -.0000128
      Eastern | -.0000899 -.0000899
     Northern | -.0001156 -.0001156
      Western | -.0001285 -.0001285
--------------+--------------------
        Total | -.0001285 -.0000128
-----------------------------------
(130 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it4.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it4.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(273 real changes made)
(note: file /tmp/St02502.000013 not found)
file /tmp/St02502.000013 saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it4.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it4.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it4 |    6775   200636622    9399.102   78
> 353.98   123.5346   1.25e+07
     linpob4 |    6775   200636622    7828.784   12
> 578.29    2064.99   50266.61
    linpobr4 |    6775   200636622    7720.221     
>      0   7720.221   7720.221
(1659 missing values generated)
(1659 real changes made)
(1659 real changes made)
(1659 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex4 |   77.91174   1.118198      75.71633 
>    80.10716
    pg_flex4 |   43.55361   .8252532      41.93334 
>    45.17387
   spg_flex4 |   28.55743   .7060023       27.1713 
>    29.94357
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex4      |
       Urban |   72.93595   3.657478      65.75503 
>    80.11688
       Rural |   78.67177   1.178488      76.35798 
>    80.98556
-------------+-------------------------------------
> -----------
pg_flex4     |
       Urban |   51.10876    3.41916      44.39574 
>    57.82178
       Rural |    42.3996   .8044325      40.82021 
>    43.97898
-------------+-------------------------------------
> -----------
spg_flex4    |
       Urban |   40.79758   3.308489      34.30185 
>    47.29332
       Rural |   26.68782   .6285685      25.45371 
>    27.92192
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex4      |
     KAMPALA |   87.37149   2.801288      81.87157 
>    92.87141
   _subpop_2 |   77.21555   5.137259      67.12929 
>     87.3018
   _subpop_3 |   90.23427   1.883523      86.53625 
>    93.93229
   _subpop_4 |    71.9724    2.85977      66.35766 
>    77.58714
     EASTERN |    79.0723   2.808611      73.55801 
>     84.5866
   _subpop_6 |   61.56979   3.396763      54.90075 
>    68.23884
   _subpop_7 |   90.45878   3.961178      82.68159 
>    98.23597
   _subpop_8 |   71.90154   4.535149      62.99744 
>    80.80564
   _subpop_9 |   83.99374   3.211037      77.68934 
>    90.29814
  _subpop_10 |   78.04533   2.883223      72.38455 
>    83.70612
-------------+-------------------------------------
> -----------
pg_flex4     |
     KAMPALA |   72.43746   3.505906      65.55413 
>     79.3208
   _subpop_2 |   50.64999   3.700614      43.38438 
>    57.91561
   _subpop_3 |   58.98794   2.361006      54.35245 
>    63.62343
   _subpop_4 |   33.42445    1.78961      29.91081 
>    36.93809
     EASTERN |   41.22237   1.737677       37.8107 
>    44.63405
   _subpop_6 |   27.53515   2.202883      23.21011 
>    31.86019
   _subpop_7 |   63.11721   4.122297      55.02368 
>    71.21074
   _subpop_8 |   28.25039   2.626624       23.0934 
>    33.40738
   _subpop_9 |    48.8006   2.128663      44.62128 
>    52.97992
  _subpop_10 |   41.85951   1.852242       38.2229 
>    45.49611
-------------+-------------------------------------
> -----------
spg_flex4    |
     KAMPALA |   63.08871   3.802441      55.62317 
>    70.55424
   _subpop_2 |   36.52494   2.986413      30.66156 
>    42.38833
   _subpop_3 |    43.1837   2.372013       38.5266 
>    47.84081
   _subpop_4 |   18.86322   1.246665      16.41557 
>    21.31086
     EASTERN |   24.70014   1.308942      22.13023 
>    27.27006
   _subpop_6 |   15.04294   1.562898      11.97442 
>    18.11147
   _subpop_7 |   46.97063   3.828904      39.45314 
>    54.48813
   _subpop_8 |    13.9893   1.548296      10.94944 
>    17.02915
   _subpop_9 |   32.19969   1.707791      28.84669 
>    35.55269
  _subpop_10 |   25.94121   1.366754      23.25779 
>    28.62463
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex4      |
   _subpop_1 |   87.37149   2.801288      81.87157 
>    92.87141
   _subpop_2 |   94.61326   1.750274      91.17685 
>    98.04967
   _subpop_3 |   72.76792   5.674296      61.62727 
>    83.90857
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |   88.88338   2.192153      84.57941 
>    93.18735
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   73.28206   2.883707      67.62032 
>     78.9438
   _subpop_8 |   48.13661   5.094458      38.13439 
>    58.13884
   _subpop_9 |   81.52137   2.701404      76.21756 
>    86.82518
  _subpop_10 |   18.29759   5.497389      7.504272 
>    29.09091
  _subpop_11 |   66.28452   3.151859      60.09631 
>    72.47274
  _subpop_12 |   35.21238   7.165809      21.14337 
>     49.2814
  _subpop_13 |   92.50442     3.8909      84.86521 
>    100.1436
  _subpop_14 |   41.09108   8.016503      25.35185 
>    56.83031
  _subpop_15 |   76.46583   4.045551      68.52298 
>    84.40867
  _subpop_16 |   83.01909   5.512659      72.19579 
>    93.84239
  _subpop_17 |   84.05466   3.397109      77.38493 
>    90.72438
  _subpop_18 |   44.24118   4.512846      35.38087 
>     53.1015
  _subpop_19 |   79.76796   2.883128      74.10736 
>    85.42856
-------------+-------------------------------------
> -----------
pg_flex4     |
   _subpop_1 |   72.43746   3.505906      65.55413 
>     79.3208
   _subpop_2 |   70.89324    4.94638      61.18175 
>    80.60473
   _subpop_3 |   45.47492   3.759581      38.09353 
>    52.85631
   _subpop_4 |   69.24305   7.157904      55.18955 
>    83.29655
   _subpop_5 |   56.87074   2.277943      52.39833 
>    61.34315
   _subpop_6 |   17.07612   6.993812      3.344792 
>    30.80745
   _subpop_7 |   34.33958   1.827899      30.75077 
>    37.92839
   _subpop_8 |   26.60517   2.781504      21.14409 
>    32.06624
   _subpop_9 |   42.37956    1.75723       38.9295 
>    45.82963
  _subpop_10 |   7.848188   2.529362      2.882155 
>    12.81422
  _subpop_11 |   29.68015   2.260858      25.24128 
>    34.11901
  _subpop_12 |    9.33661   4.092777       1.30104 
>    17.37218
  _subpop_13 |   65.10858   4.117794      57.02389 
>    73.19326
  _subpop_14 |   14.62825   4.122574      6.534178 
>    22.72232
  _subpop_15 |   30.26839   2.556036      25.24998 
>    35.28679
  _subpop_16 |   43.20281   5.542143      32.32162 
>      54.084
  _subpop_17 |   49.15049   2.237113      44.75824 
>    53.54273
  _subpop_18 |   18.55485   3.046087       12.5743 
>    24.53539
  _subpop_19 |   43.04709   1.845513       39.4237 
>    46.67049
-------------+-------------------------------------
> -----------
spg_flex4    |
   _subpop_1 |   63.08871   3.802441      55.62317 
>    70.55424
   _subpop_2 |   56.43779   7.065163      42.56638 
>    70.30921
   _subpop_3 |   31.43434   2.824581      25.88868 
>    36.97999
   _subpop_4 |    58.0259   7.352382      43.59058 
>    72.46123
   _subpop_5 |   40.11948   2.027522      36.13874 
>    44.10023
   _subpop_6 |   7.545121   3.595659      .4855708 
>    14.60467
   _subpop_7 |   19.49677    1.28275      16.97828 
>    22.01526
   _subpop_8 |   16.40646   1.900219      12.67565 
>    20.13726
   _subpop_9 |   25.35673   1.357716      22.69105 
>     28.0224
  _subpop_10 |   3.773621   1.380683      1.062852 
>    6.484389
  _subpop_11 |   16.27079   1.649253      13.03273 
>    19.50886
  _subpop_12 |   6.199878    3.41172     -.4985351 
>    12.89829
  _subpop_13 |   48.48028   3.888825      40.84514 
>    56.11542
  _subpop_14 |    6.60687   2.394985      1.904666 
>    11.30907
  _subpop_15 |   15.08294   1.539953      12.05946 
>    18.10641
  _subpop_16 |    27.3714   5.221602      17.11955 
>    37.62325
  _subpop_17 |   32.50148   1.779883      29.00694 
>    35.99602
  _subpop_18 |   8.784299   2.104377      4.652663 
>    12.91593
  _subpop_19 |   26.81551   1.364696      24.13613 
>    29.49489
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex4      |
   _subpop_1 |   80.88408   3.314836      74.37589 
>    87.39228
   _subpop_2 |   91.26064   1.661792      87.99795 
>    94.52332
     Eastern |   75.88185   2.021369      71.91319 
>    79.85051
    Northern |   69.73218   2.481296      64.86051 
>    74.60384
     Western |   81.10608   2.138084      76.90827 
>     85.3039
-------------+-------------------------------------
> -----------
pg_flex4     |
   _subpop_1 |   51.21415   2.375277      46.55064 
>    55.87766
   _subpop_2 |   71.35476    2.76345      65.92913 
>    76.78039
     Eastern |   37.71825   1.277334       35.2104 
>    40.22611
    Northern |   33.53413   1.596853      30.39895 
>    36.66932
     Western |   45.43105   1.423872      42.63548 
>    48.22661
-------------+-------------------------------------
> -----------
spg_flex4    |
   _subpop_1 |    35.8084   1.857625      32.16123 
>    39.45558
   _subpop_2 |   60.27914   3.428758      53.54728 
>    67.01101
     Eastern |   22.07723   .9371303      20.23731 
>    23.91715
    Northern |   19.85346   1.187038      17.52288 
>    22.18404
     Western |   29.16151   1.125995      26.95078 
>    31.37224
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex4 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it4.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex4 |    6775   200636622    77.91174   41
> .48721          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it4.dta saved
file /tmp/St02502.000009 saved
variable one does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00

   relpoor5 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 4,733.8671       69.87       69.87
          1 | 2,041.1329       30.13      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/relpoor_
> it5.dta saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(0 observations deleted)
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    412,045      100.00      100.00
------------+-----------------------------------
      Total |    412,045      100.00
(293810 observations deleted)
    0
    0
(947 missing values generated)
  947
(947 observations deleted)
(note: file /tmp/St02502.000014 not found)
file /tmp/St02502.000014 saved
(note: file /tmp/St02502.000015 not found)
file /tmp/St02502.000015 saved
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |    117,288      100.00      100.00
------------+-----------------------------------
      Total |    117,288      100.00
  153
(153 observations deleted)
file /tmp/St02502.000014 saved
47
47
file /home/bjvca/data/data/GAP/Haruna/work/codes_fo
> od_basket_flex_it5.dta saved
(4392 observations deleted)
(note: file /tmp/St02502.000016 not found)
file /tmp/St02502.000016 saved
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         14        0.02        0.02
          3 |     85,204       99.98      100.00
------------+-----------------------------------
      Total |     85,218      100.00
(14 observations deleted)
file /tmp/St02502.000016 saved
variable product does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      8,015        9.41        9.41
          3 |     77,189       90.59      100.00
------------+-----------------------------------
      Total |     85,204      100.00
(8015 observations deleted)
(0 observations deleted)
(note: file /tmp/St02502.000018 not found)
file /tmp/St02502.000018 saved
product was float now int
unit was float now byte
food_cat was float now byte
rmult was float now int
poor09 was float now byte
survquar was float now byte
survmon was float now byte
rural was float now byte
news was float now byte
bswt was float now byte
spdomain was float now byte
reg_tpi was float now byte
count was float now byte
descript was float now byte
hhsize was double now byte
numreg was double now byte
variable hhid does not uniquely identify
    observations in the master data
survquar was byte now float
spdomain was byte now float
reg_tpi was byte now float
(label lsurvquar already defined)
(label spdomain_original already defined)
(label REG_TPI already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         24        0.03        0.03
          3 |     77,189       99.97      100.00
------------+-----------------------------------
      Total |     77,213      100.00
variable hhid does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     77,213      100.00      100.00
------------+-----------------------------------
      Total |     77,213      100.00
(57406 observations deleted)
(17 observations deleted)
(1414 observations deleted)

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
    ratiotw5 |       227    1.271955    .6328992   
> .7641575   7.890666
    ratiomw5 |       227    1.125179    .5432671   
>        0   6.016366
variable product does not uniquely identify
    observations in the master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        227      100.00      100.00
------------+-----------------------------------
      Total |        227      100.00
    0
(0 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/price_un
> it_flex_it5.dta saved
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         80       35.24       35.24
          3 |        147       64.76      100.00
------------+-----------------------------------
      Total |        227      100.00
(80 observations deleted)
variable product does not uniquely identify
    observations in the master data
(note: descript is str26 in using data but will be 
> float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         15        9.26        9.26
          3 |        147       90.74      100.00
------------+-----------------------------------
      Total |        162      100.00
(15 observations deleted)

---------------------------------------------------
-> spdomain = Central rural
    0
---------------------------------------------------
-> spdomain = Central urban
    0
---------------------------------------------------
-> spdomain = Eastern
    0
---------------------------------------------------
-> spdomain = Northern
    1
---------------------------------------------------
-> spdomain = Western
    0

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
        bswt |       147    113.1769    97.78385   
>        9        462
(1 observation deleted)
(16 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27   .902948         0
Central urban |        32  .9051542         0
      Eastern |        23  .9018891         0
     Northern |        21  .9064019         0
      Western |        27  .9047614         0
--------------+------------------------------
        Total |       130  .9042383  .0015362
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural |   .902948   .902948
Central urban |  .9051542  .9051542
      Eastern |  .9018891  .9018891
     Northern |  .9064019  .9064019
      Western |  .9047614  .9047614
--------------+--------------------
        Total |  .9018891  .9064019
-----------------------------------
variable spdomain does not uniquely identify
    observations in the master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        130      100.00      100.00
------------+-----------------------------------
      Total |        130      100.00
(130 real changes made)
(125 real changes made)
(130 real changes made)

Summary for variables: chkcal
     by categories of: spdomain 

     spdomain |         N      mean        sd
--------------+------------------------------
Central rural |        27 -.0000771         0
Central urban |        32 -.0000128         0
      Eastern |        23 -.0000899         0
     Northern |        21 -.0001156         0
      Western |        27  .0001285         0
--------------+------------------------------
        Total |       130 -.0000271  .0000873
---------------------------------------------

     spdomain |       min       max
--------------+--------------------
Central rural | -.0000771 -.0000771
Central urban | -.0000128 -.0000128
      Eastern | -.0000899 -.0000899
     Northern | -.0001156 -.0001156
      Western |  .0001285  .0001285
--------------+--------------------
        Total | -.0001156  .0001285
-----------------------------------
(130 real changes made)
file /home/bjvca/data/data/GAP/Haruna/work/quan_fle
> x_it5.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/povline_
> food_flex_it5.dta saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(270 real changes made)
(note: file /tmp/St02502.00001a not found)
file /tmp/St02502.00001a saved
variable spdomain does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
file /home/bjvca/data/data/GAP/Haruna/work/povlines
> _it5.dta saved
variable spdomain does not uniquely identify
    observations in the master data
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/povline
    > s_it5.dta
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      6,775      100.00      100.00
------------+-----------------------------------
      Total |      6,775      100.00
(6775 real changes made)
(6775 real changes made)

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
          cr |    6775   200636622    9399.102   39
> 5673.3   77.24399   8.12e+07
      cr_it5 |    6775   200636622    9399.102   78
> 394.87    123.639   1.25e+07
     linpob5 |    6775   200636622    7841.368   12
> 587.88    2064.99   50306.63
    linpobr5 |    6775   200636622    7732.894     
>      0   7732.894   7732.894
(1655 missing values generated)
(1655 real changes made)
(1655 real changes made)
(1655 real changes made)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

---------------------------------------------------
> -----------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
     h_flex5 |   77.95775    1.11757      75.76356 
>    80.15193
    pg_flex5 |   43.60744   .8252727      41.98714 
>    45.22775
   spg_flex5 |   28.60896   .7061724       27.2225 
>    29.99543
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

        Urban: rural = Urban
        Rural: rural = Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex5      |
       Urban |   72.93595   3.657478      65.75503 
>    80.11688
       Rural |    78.7248    1.17807      76.41183 
>    81.03777
-------------+-------------------------------------
> -----------
pg_flex5     |
       Urban |   51.12834   3.418936      44.41576 
>    57.84092
       Rural |   42.45867   .8048897      40.87838 
>    44.03895
-------------+-------------------------------------
> -----------
spg_flex5    |
       Urban |   40.81608   3.308417      34.32049 
>    47.31168
       Rural |   26.74439   .6293756      25.50871 
>    27.98008
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

      KAMPALA: strata = KAMPALA
    _subpop_2: strata = CENTRAL 1
    _subpop_3: strata = CENTRAL 2
    _subpop_4: strata = EAST CENTRAL
      EASTERN: strata = EASTERN
    _subpop_6: strata = MID-NOTHERN
    _subpop_7: strata = NORTH-EAST
    _subpop_8: strata = WEST-NILE
    _subpop_9: strata = MID-WESTERN
   _subpop_10: strata = SOUTH-WESTERN

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex5      |
     KAMPALA |   87.37149   2.801288      81.87157 
>    92.87141
   _subpop_2 |   77.46926   5.123204       67.4106 
>    87.52792
   _subpop_3 |   90.43886   1.881894      86.74403 
>    94.13368
   _subpop_4 |    71.9724    2.85977      66.35766 
>    77.58714
     EASTERN |    79.0723   2.808611      73.55801 
>     84.5866
   _subpop_6 |   61.56979   3.396763      54.90075 
>    68.23884
   _subpop_7 |   90.45878   3.961178      82.68159 
>    98.23597
   _subpop_8 |   71.90154   4.535149      62.99744 
>    80.80564
   _subpop_9 |   83.99374   3.211037      77.68934 
>    90.29814
  _subpop_10 |   78.04533   2.883223      72.38455 
>    83.70612
-------------+-------------------------------------
> -----------
pg_flex5     |
     KAMPALA |   72.44934   3.505112      65.56757 
>    79.33112
   _subpop_2 |   50.76515   3.701327      43.49813 
>    58.03216
   _subpop_3 |   59.12669   2.356601      54.49985 
>    63.75353
   _subpop_4 |   33.45442   1.790056       29.9399 
>    36.96893
     EASTERN |    41.2518   1.737922      37.83964 
>    44.66395
   _subpop_6 |   27.53515   2.202883      23.21011 
>    31.86019
   _subpop_7 |   63.11721   4.122297      55.02368 
>    71.21073
   _subpop_8 |   28.25039   2.626624       23.0934 
>    33.40738
   _subpop_9 |    48.8779   2.129289      44.69735 
>    53.05844
  _subpop_10 |   41.93898    1.85372      38.29947 
>    45.57849
-------------+-------------------------------------
> -----------
spg_flex5    |
     KAMPALA |   63.10358    3.80189      55.63913 
>    70.56804
   _subpop_2 |   36.64341   2.987324      30.77823 
>    42.50858
   _subpop_3 |   43.32803   2.369019       38.6768 
>    47.97925
   _subpop_4 |   18.88587   1.247415      16.43675 
>    21.33499
     EASTERN |   24.72585   1.309439      22.15495 
>    27.29674
   _subpop_6 |   15.04294   1.562898      11.97442 
>    18.11146
   _subpop_7 |   46.97063   3.828904      39.45314 
>    54.48813
   _subpop_8 |    13.9893   1.548296      10.94944 
>    17.02915
   _subpop_9 |    32.2727   1.708965       28.9174 
>      35.628
  _subpop_10 |   26.01123   1.368657      23.32407 
>    28.69839
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

         Over: strata rural
    _subpop_1: KAMPALA Urban
    _subpop_2: CENTRAL 1 Urban
    _subpop_3: CENTRAL 1 Rural
    _subpop_4: CENTRAL 2 Urban
    _subpop_5: CENTRAL 2 Rural
    _subpop_6: EAST CENTRAL Urban
    _subpop_7: EAST CENTRAL Rural
    _subpop_8: EASTERN Urban
    _subpop_9: EASTERN Rural
   _subpop_10: MID-NOTHERN Urban
   _subpop_11: MID-NOTHERN Rural
   _subpop_12: NORTH-EAST Urban
   _subpop_13: NORTH-EAST Rural
   _subpop_14: WEST-NILE Urban
   _subpop_15: WEST-NILE Rural
   _subpop_16: MID-WESTERN Urban
   _subpop_17: MID-WESTERN Rural
   _subpop_18: SOUTH-WESTERN Urban
   _subpop_19: SOUTH-WESTERN Rural

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex5      |
   _subpop_1 |   87.37149   2.801288      81.87157 
>    92.87141
   _subpop_2 |   94.61326   1.750274      91.17685 
>    98.04967
   _subpop_3 |    73.0865    5.66949      61.95528 
>    84.21771
   _subpop_4 |   96.77758   2.186975      92.48378 
>    101.0714
   _subpop_5 |    89.1302   2.193895      84.82281 
>     93.4376
   _subpop_6 |   48.57609   15.39494      18.35038 
>    78.80179
   _subpop_7 |   73.28206   2.883707      67.62032 
>     78.9438
   _subpop_8 |   48.13661   5.094458      38.13439 
>    58.13884
   _subpop_9 |   81.52137   2.701404      76.21756 
>    86.82518
  _subpop_10 |   18.29759   5.497389      7.504272 
>    29.09091
  _subpop_11 |   66.28452   3.151859      60.09631 
>    72.47274
  _subpop_12 |   35.21238   7.165809      21.14337 
>     49.2814
  _subpop_13 |   92.50442     3.8909      84.86521 
>    100.1436
  _subpop_14 |   41.09108   8.016503      25.35185 
>    56.83031
  _subpop_15 |   76.46583   4.045551      68.52298 
>    84.40867
  _subpop_16 |   83.01909   5.512659      72.19579 
>    93.84239
  _subpop_17 |   84.05466   3.397109      77.38493 
>    90.72438
  _subpop_18 |   44.24118   4.512846      35.38087 
>     53.1015
  _subpop_19 |   79.76796   2.883128      74.10736 
>    85.42856
-------------+-------------------------------------
> -----------
pg_flex5     |
   _subpop_1 |   72.44934   3.505112      65.56757 
>    79.33112
   _subpop_2 |   70.91211   4.942804      61.20764 
>    80.61659
   _subpop_3 |   45.61469   3.767992      38.21679 
>    53.01259
   _subpop_4 |   69.26496   7.152167      55.22272 
>    83.30719
   _subpop_5 |   57.03361   2.275691      52.56562 
>    61.50159
   _subpop_6 |   17.10061   7.000245      3.356649 
>    30.84457
   _subpop_7 |   34.36985   1.828309      30.78023 
>    37.95947
   _subpop_8 |    26.6219   2.782881      21.15812 
>    32.08568
   _subpop_9 |   42.40999   1.757308      38.95978 
>    45.86021
  _subpop_10 |   7.848188   2.529362      2.882155 
>    12.81422
  _subpop_11 |   29.68015   2.260858      25.24128 
>    34.11901
  _subpop_12 |   9.336608   4.092777      1.301038 
>    17.37218
  _subpop_13 |   65.10858   4.117794      57.02389 
>    73.19326
  _subpop_14 |   14.62825   4.122574      6.534177 
>    22.72232
  _subpop_15 |   30.26838   2.556036      25.24998 
>    35.28679
  _subpop_16 |   43.29026   5.534595      32.42389 
>    54.15662
  _subpop_17 |   49.22715   2.237903      44.83335 
>    53.62094
  _subpop_18 |   18.61126   3.048283       12.6264 
>    24.59612
  _subpop_19 |   43.12774   1.846925      39.50157 
>    46.75391
-------------+-------------------------------------
> -----------
spg_flex5    |
   _subpop_1 |   63.10358    3.80189      55.63913 
>    70.56804
   _subpop_2 |    56.4608   7.061725      42.59613 
>    70.32546
   _subpop_3 |    31.5772   2.833368       26.0143 
>    37.14011
   _subpop_4 |   58.04376   7.351889       43.6094 
>    72.47812
   _subpop_5 |   40.28991   2.029512      36.30526 
>    44.27456
   _subpop_6 |   7.559952   3.600919      .4900744 
>    14.62983
   _subpop_7 |   19.51986     1.2835       16.9999 
>    22.03982
   _subpop_8 |   16.42232    1.90154      12.68892 
>    20.15572
   _subpop_9 |   25.38321   1.358157      22.71666 
>    28.04975
  _subpop_10 |    3.77362   1.380682      1.062852 
>    6.484389
  _subpop_11 |   16.27079   1.649253      13.03273 
>    19.50886
  _subpop_12 |   6.199878    3.41172     -.4985352 
>    12.89829
  _subpop_13 |   48.48028   3.888825      40.84514 
>    56.11542
  _subpop_14 |   6.606869   2.394985      1.904666 
>    11.30907
  _subpop_15 |   15.08293   1.539953      12.05946 
>    18.10641
  _subpop_16 |   27.44106   5.222307      17.18782 
>    37.69429
  _subpop_17 |    32.5747   1.781174      29.07762 
>    36.07177
  _subpop_18 |   8.827293   2.108471      4.687619 
>    12.96697
  _subpop_19 |    26.8869   1.366555      24.20387 
>    29.56994
---------------------------------------------------
> -----------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10       Number of obs    =
>        6775
Number of PSUs   =     711       Population size  =
>   200636622
                                 Design df        =
>         701

    _subpop_1: spdomain = Central rural
    _subpop_2: spdomain = Central urban
      Eastern: spdomain = Eastern
     Northern: spdomain = Northern
      Western: spdomain = Western

---------------------------------------------------
> -----------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf
> . Interval]
-------------+-------------------------------------
> -----------
h_flex5      |
   _subpop_1 |   81.16652   3.315315      74.65739 
>    87.67566
   _subpop_2 |   91.26064   1.661792      87.99795 
>    94.52332
     Eastern |   75.88185   2.021369      71.91319 
>    79.85051
    Northern |   69.73218   2.481296      64.86051 
>    74.60384
     Western |   81.10608   2.138084      76.90827 
>     85.3039
-------------+-------------------------------------
> -----------
pg_flex5     |
   _subpop_1 |   51.36555   2.378868      46.69499 
>    56.03611
   _subpop_2 |   71.37059    2.76181      65.94818 
>      76.793
     Eastern |   37.74792   1.277552      35.23964 
>    40.25621
    Northern |   33.53413   1.596853      30.39894 
>    36.66932
     Western |    45.5094   1.424451       42.7127 
>     48.3061
-------------+-------------------------------------
> -----------
spg_flex5    |
   _subpop_1 |   35.96515   1.862395      32.30861 
>    39.62169
   _subpop_2 |   60.29677   3.427532      53.56731 
>    67.02623
     Eastern |   22.10156   .9375609       20.2608 
>    23.94233
    Northern |   19.85346   1.187038      17.52288 
>    22.18403
     Western |   29.23307   1.126948      27.02047 
>    31.44566
---------------------------------------------------
> -----------
rural was float now byte
news was float now byte
spdomain was float now byte
reg_tpi was float now byte
h_flex5 was float now byte
file /home/bjvca/data/data/GAP/Haruna/work/cons_rea
> l_it5.dta saved

    Variable |     Obs      Weight        Mean   St
> d. Dev.       Min        Max
-------------+-------------------------------------
> ----------------------------
     h_flex5 |    6775   200636622    77.95775   41
> .45622          0        100
file /home/bjvca/data/data/GAP/Haruna/work/foodshar
> es_it5.dta saved

. *************************************************
> *************************
> * Send results to one big csv-file
> *************************************************
> *************************;
. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         gen dum=1;

.         collapse (mean) dum h_flex`lastpass' pg_f
> lex`lastpass' spg_flex`lastpass' [aw=popwt];

. gen geo="National";

. gen geono=dum;

. tempfile nat;

. save `nat';
file /tmp/St02502.00001b saved

.         use "$path/work/cons_real_it`lastpass'.dt
> a", clear ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(rural
> );

. gen geo="Rural/Urban";

. gen geono=rural;

. tempfile rur;

. save `rur';
file /tmp/St02502.00001c saved

. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(news)
> ;

. gen geo="North/Center/South";

. gen geono=news;

. tempfile new;

. save `new';
file /tmp/St02502.00001d saved

. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(reg_t
> pi);

. gen geo="TPI - 6 regions";

. gen geono=reg_tpi;

. tempfile rtp;

. save `rtp';
file /tmp/St02502.00001e saved

. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(strat
> a);

. gen geo="Provinces";

. gen geono=strata;

. tempfile str;

. save `str';
file /tmp/St02502.00001f saved

. use "$path/work/cons_real_it`lastpass'.dta", clea
> r ;

.         collapse (mean) h_flex`lastpass' pg_flex`
> lastpass' spg_flex`lastpass' [aw=popwt], by(spdom
> ain);

. gen geo="Spatial domains";

. gen geono=spdomain;

. tempfile r13;

. save `r13';
file /tmp/St02502.00001g saved

. clear;

. set obs 1;
obs was 0, now 1

. gen geo=" ";

. tempfile one;

. save `one';
file /tmp/St02502.00001h saved

. use          `nat';

. append using `one';

. append using `rur';
geo was str8 now str11

. append using `one';

. append using `new';
geo was str11 now str18

. append using `one';

. append using `rtp';

. append using `one';

. append using `str';

. append using `one';

. append using `r13';

. outsheet geo geono h_flex`lastpass' pg_flex`lastp
> ass' spg_flex`lastpass' dum rural news reg_tpi st
> rata spdomain using "$path/work/poverty_flexBask.
> csv", replace c;

. *************************************************
> *************************
> * Convergence graph (based on 5 iterations)
> *************************************************
> *************************;
. #delimit cr
delimiter now cr
. 
. clear

. set obs 1
obs was 0, now 1

. gen iteration=.
(1 missing value generated)

. tempfile converg

. save `converg'
file /tmp/St02502.00001i saved

. 
. forvalues X = 1/5 {
  2.         use "$path/work/cons_real_it`X'.dta", 
> clear
  3.         collapse (mean) h_flex`X' pg_flex`X' s
> pg_flex`X' [aw=popwt], by(strata)
  4.         rename h_flex`X' h_flex
  5.         rename pg_flex`X' pg_flex
  6.         rename spg_flex`X' spg_flex
  7.         gen iteration=`X'
  8.         order iteration
  9.         *sum
.         if `X' != 1     {
 10.                 append using `converg'
 11.                         }
 12.         save `converg', replace
 13.         }
file /tmp/St02502.00001i saved
(label STRA already defined)
file /tmp/St02502.00001i saved
(label STRA already defined)
file /tmp/St02502.00001i saved
(label STRA already defined)
file /tmp/St02502.00001i saved
(label STRA already defined)
file /tmp/St02502.00001i saved

. 
. use `converg', clear

. sum

    Variable |       Obs        Mean    Std. Dev.  
>      Min        Max
-------------+-------------------------------------
> -------------------
   iteration |        50           3    1.428571   
>        1          5
      strata |        50         5.5    2.901442   
>        1         10
      h_flex |        50    79.25958    8.730608   
> 61.56979   90.45878
     pg_flex |        50    46.75746    14.51645   
> 27.53515   74.66873
    spg_flex |        50    32.18856    15.15824   
>  13.9893   65.97073

. 
. twoway (connected h_flex iteration), by(, title(C
> onvergence graph: Poverty rate. %) subtitle(After
>  iterative procedure)) by(strata)

. graph export "$path/work/converge_pov_rate.tif", 
> replace
(file /home/bjvca/data/data/GAP/Haruna/work/converg
> e_pov_rate.tif written in TIFF format)

. 
. sort strata iteration

. 
. for var h_flex pg_flex spg_flex: replace X = roun
> d(X,0.01)

->  replace h_flex = round(h_flex,0.01)
(50 real changes made)

->  replace pg_flex = round(pg_flex,0.01)
(50 real changes made)

->  replace spg_flex = round(spg_flex,0.01)
(50 real changes made)

. 
. list strata iteration h_flex pg_flex spg_flex

     +-----------------------------------+
  1. |        strata | iterat~n | h_flex |
     |       KAMPALA |        1 |  87.65 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      74.67     |        65.97     |
     +-----------------------------------+

     +-----------------------------------+
  2. |        strata | iterat~n | h_flex |
     |       KAMPALA |        2 |  87.37 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      72.46     |        63.12     |
     +-----------------------------------+

     +-----------------------------------+
  3. |        strata | iterat~n | h_flex |
     |       KAMPALA |        3 |  87.37 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      72.44     |        63.09     |
     +-----------------------------------+

     +-----------------------------------+
  4. |        strata | iterat~n | h_flex |
     |       KAMPALA |        4 |  87.37 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      72.44     |        63.09     |
     +-----------------------------------+

     +-----------------------------------+
  5. |        strata | iterat~n | h_flex |
     |       KAMPALA |        5 |  87.37 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      72.45     |         63.1     |
     +-----------------------------------+

     +-----------------------------------+
  6. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        1 |  77.65 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      51.46     |        37.52     |
     +-----------------------------------+

     +-----------------------------------+
  7. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        2 |  77.22 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      50.66     |        36.53     |
     +-----------------------------------+

     +-----------------------------------+
  8. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        3 |  77.22 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      50.65     |        36.53     |
     +-----------------------------------+

     +-----------------------------------+
  9. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        4 |  77.22 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      50.65     |        36.52     |
     +-----------------------------------+

     +-----------------------------------+
 10. |        strata | iterat~n | h_flex |
     |     CENTRAL 1 |        5 |  77.47 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      50.77     |        36.64     |
     +-----------------------------------+

     +-----------------------------------+
 11. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        1 |  90.39 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      59.78     |        43.92     |
     +-----------------------------------+

     +-----------------------------------+
 12. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        2 |  90.23 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |         59     |        43.19     |
     +-----------------------------------+

     +-----------------------------------+
 13. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        3 |  90.23 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      58.99     |        43.18     |
     +-----------------------------------+

     +-----------------------------------+
 14. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        4 |  90.23 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      58.99     |        43.18     |
     +-----------------------------------+

     +-----------------------------------+
 15. |        strata | iterat~n | h_flex |
     |     CENTRAL 2 |        5 |  90.44 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      59.13     |        43.33     |
     +-----------------------------------+

     +-----------------------------------+
 16. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        1 |  71.97 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      33.28     |        18.76     |
     +-----------------------------------+

     +-----------------------------------+
 17. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        2 |  71.97 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      33.43     |        18.87     |
     +-----------------------------------+

     +-----------------------------------+
 18. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        3 |  71.97 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      33.42     |        18.86     |
     +-----------------------------------+

     +-----------------------------------+
 19. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        4 |  71.97 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      33.42     |        18.86     |
     +-----------------------------------+

     +-----------------------------------+
 20. |        strata | iterat~n | h_flex |
     |  EAST CENTRAL |        5 |  71.97 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      33.45     |        18.89     |
     +-----------------------------------+

     +-----------------------------------+
 21. |        strata | iterat~n | h_flex |
     |       EASTERN |        1 |  79.07 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      41.08     |        24.58     |
     +-----------------------------------+

     +-----------------------------------+
 22. |        strata | iterat~n | h_flex |
     |       EASTERN |        2 |  79.07 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      41.22     |         24.7     |
     +-----------------------------------+

     +-----------------------------------+
 23. |        strata | iterat~n | h_flex |
     |       EASTERN |        3 |  79.07 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      41.22     |         24.7     |
     +-----------------------------------+

     +-----------------------------------+
 24. |        strata | iterat~n | h_flex |
     |       EASTERN |        4 |  79.07 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      41.22     |         24.7     |
     +-----------------------------------+

     +-----------------------------------+
 25. |        strata | iterat~n | h_flex |
     |       EASTERN |        5 |  79.07 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      41.25     |        24.73     |
     +-----------------------------------+

     +-----------------------------------+
 26. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        1 |  62.85 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      27.88     |         15.3     |
     +-----------------------------------+

     +-----------------------------------+
 27. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        2 |  61.57 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      27.54     |        15.04     |
     +-----------------------------------+

     +-----------------------------------+
 28. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        3 |  62.25 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      27.72     |        15.18     |
     +-----------------------------------+

     +-----------------------------------+
 29. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        4 |  61.57 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      27.54     |        15.04     |
     +-----------------------------------+

     +-----------------------------------+
 30. |        strata | iterat~n | h_flex |
     |   MID-NOTHERN |        5 |  61.57 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      27.54     |        15.04     |
     +-----------------------------------+

     +-----------------------------------+
 31. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        1 |  90.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      63.39     |         47.3     |
     +-----------------------------------+

     +-----------------------------------+
 32. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        2 |  90.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      63.12     |        46.97     |
     +-----------------------------------+

     +-----------------------------------+
 33. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        3 |  90.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      63.27     |        47.15     |
     +-----------------------------------+

     +-----------------------------------+
 34. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        4 |  90.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      63.12     |        46.97     |
     +-----------------------------------+

     +-----------------------------------+
 35. |        strata | iterat~n | h_flex |
     |    NORTH-EAST |        5 |  90.46 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      63.12     |        46.97     |
     +-----------------------------------+

     +-----------------------------------+
 36. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        1 |  72.18 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      28.69     |        14.28     |
     +-----------------------------------+

     +-----------------------------------+
 37. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        2 |   71.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      28.25     |        13.99     |
     +-----------------------------------+

     +-----------------------------------+
 38. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        3 |  72.14 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      28.49     |        14.14     |
     +-----------------------------------+

     +-----------------------------------+
 39. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        4 |   71.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      28.25     |        13.99     |
     +-----------------------------------+

     +-----------------------------------+
 40. |        strata | iterat~n | h_flex |
     |     WEST-NILE |        5 |   71.9 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      28.25     |        13.99     |
     +-----------------------------------+

     +-----------------------------------+
 41. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        1 |  83.99 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      48.96     |        32.35     |
     +-----------------------------------+

     +-----------------------------------+
 42. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        2 |  83.99 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      48.96     |        32.35     |
     +-----------------------------------+

     +-----------------------------------+
 43. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        3 |  83.99 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      48.85     |        32.24     |
     +-----------------------------------+

     +-----------------------------------+
 44. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        4 |  83.99 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |       48.8     |         32.2     |
     +-----------------------------------+

     +-----------------------------------+
 45. |        strata | iterat~n | h_flex |
     |   MID-WESTERN |        5 |  83.99 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      48.88     |        32.27     |
     +-----------------------------------+

     +-----------------------------------+
 46. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        1 |  78.05 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      42.02     |        26.08     |
     +-----------------------------------+

     +-----------------------------------+
 47. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        2 |  78.05 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      42.02     |        26.08     |
     +-----------------------------------+

     +-----------------------------------+
 48. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        3 |  78.05 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      41.91     |        25.98     |
     +-----------------------------------+

     +-----------------------------------+
 49. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        4 |  78.05 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      41.86     |        25.94     |
     +-----------------------------------+

     +-----------------------------------+
 50. |        strata | iterat~n | h_flex |
     | SOUTH-WESTERN |        5 |  78.05 |
     |-----------------------------------|
     |    pg_flex     |     spg_flex     |
     |      41.94     |        26.01     |
     +-----------------------------------+

.         
. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 140_iterate.do        (end)
> *************************************************
> *************************;
. cap log close;

. 
end of do-file

. do "$path/new/170_pref_r_price_bjorn.do"

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/170_pref_r_price.log", repla
> ce
---------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 70_pref_r_price.log
  log type:  text
 opened on:  20 May 2013, 12:22:27

. clear

. set more off

. #delimit ;
delimiter now ;
. *************************************************
> *************************
> * 170_pref_r_price.do           (start)
> *
> * This file conducts revealed preference comparis
> ons so that
> * we can check the quality of the regional basket
> s.
> * It also exports the price and quantity data for
>  work in GAMS
> * Rather than make up for missing prices with sha
> res, we estimate
> * a missing price in this case
> *************************************************
> *************************;
. *global n_spdom "13";
. *global it_n "5";
. /*
> This file uses:
>         work/quan_flex_it$it_n.dta
>         work/povline_food_flex_it$it_n.dta
>         work/price_unit_flex_it$it_n.dta
>                 
> This file creates:
>         work/pref_r_price.dta
>         work/revpref_price_`i'.dta
>         work/product_flex.inc
>         work/price_unit_flex.inc
>         work/quan_flex.inc
> */
> 
> 
> 
> *************************************************
> **************************;
. * Export price, codes and quantity data to text
> *************************************************
> **************************;
. use "$path/work/price_unit_flex_it$it_n.dta";

. gen reg=spdomain ;

. gen crap=1;

.  lab def crap
>          1  ".";

.  lab val crap crap;

. outsheet product crap reg bswt price_uw$it_n usin
> g "$path/work/price_unit_flex.inc",  noquote nona
> me replace ;

. collapse (min) spdomain, by(product);

. outsheet product  using "$path/work/product_flex.
> inc", noname replace;

. use "$path/work/quan_flex_it$it_n.dta", clear;

. gen reg=spdomain;

. gen crap=1;

.  lab def crap
>          1  ".";

.  lab val crap crap;

. format calperg quan$it_n calpp %14.9e;

. outsheet  product crap reg calperg quan$it_n  cal
> pp povline_f_flex90_$it_n using "$path/work/quan_
> flex.inc", noname noquote replace;

. clear;

. *************************************************
> *************************;
. * Revealed preference calculations
> * get the basket for the region we want to test
> *************************************************
> *************************;
. tempfile quanreg;

. tempfile getmiss;

. tempfile codmiss;

. gen crap=0;

. save "$path/work/pref_r_price.dta", replace;
(note: dataset contains 0 observations)
file /home/bjvca/data/data/GAP/Haruna/work/pref_r_p
> rice.dta saved

. forvalues i=1/$n_spdom {                ;
  2.         clear;
  3.         gen crap=0;
  4.         save "$path/work/revpref_price_`i'.dta
> ", replace;
  5.         clear;
  6.                 use "$path/work/quan_flex_it$i
> t_n.dta", clear;
  7.                 keep product spdomain quan$it_
> n price_uw$it_n val_ir$it_n povline_f_flex90_$it_
> n calpp;
  8.         gen share=val_ir$it_n/povline_f_flex90
> _$it_n;
  9.         rename price_uw$it_n pquanreg;
 10.         rename spdomain spdomainq;
 11.         drop if spdomainq~= `i';
 12.         sort product;
 13.                                 *rescale quant
> ities to hit constant calorie target;
.                 gen ratquan=2150/calpp;
 14.             gen quan_s=quan$it_n*ratquan;
 15.             lab var quan_s "quantities rescale
> d to hit 2150 calories pp";
 16.         save `quanreg', replace;
 17. **********************************************
> ****************************;
. * Now get the prices in other regions so that you
>  can use them 
> * to build  a new poverty line
> *************************************************
> *************************;
.         forvalues j= 1/$n_spdom {               ;
 18.                 use "$path/work/price_unit_fle
> x_it$it_n.dta";
 19.                                 keep product s
> pdomain price_uw$it_n descript count bswt;
 20.                         sort product;
 21.                 keep if spdomain==`j';
 22.                 sort product;
 23.                 merge product using `quanreg';
 24.                     *here we have to deal with
>  the fact that not all commodities are consumed i
> n every region;
.                 *so we might have a quantity from
>  region i but no price in region j;
.                 *these will have _merge value=2;
.                 *alternatively the number of obse
> rvations might be too small;
.                 *deal with these problems by TAKI
> NG THE MAX PRICE OBSERVED ELSEWHERE (excluding Ma
> puto)
>                         
>                 tab _m;
.                 drop if _m==1;
 25.                                 *CA modified t
> o handle the counting of bswt instead of count
>                   replace price_uw$it_n=. if roun
> d(bswt)<5;
.                         gen pricemiss=0;
 26.                   replace spdomain=`j' if _m==
> 2 ;
 27.                   replace pricemiss=1 if _m==2
>  | round(bswt)<5;
 28.                         lab var pricemiss "ide
> ntify those items with no price observation";
 29.                   drop _m;
 30.                         sort product;
 31. *browse;
.                *this is the tempfile containing o
> bserved quans and prices;
.              save `getmiss', replace;
 32.                         keep if pricemiss==1;
 33.                         if _N>0 {
>                             keep product;
 34.                                             so
> rt product;
 35.                                             *t
> his file contains the price codes that are missin
> g for the region in question;
.                             save `codmiss', repla
> ce;
 36. *browse;
.                                   use "$path/work
> /price_unit_flex_it$it_n.dta", clear;
 37.                         sort product;
 38. *browse;
.                         merge product using `codm
> iss';
 39.                                               
>   tab _m;
 40.                         keep if _m==3 ;
 41.                                 *exclude Maput
> o province and city from other price calculation;
.                                 drop if spdomain>
> 10;
 42.                         collapse (max) price_u
> w$it_n, by(product);
 43.                   *this file contains the code
>  and the max price;
.                   save `codmiss', replace;
 44. *browse;
.                         use `getmiss';
 45.                               merge product us
> ing `codmiss';
 46. *browse;
.                         tab _m;
 47.                         drop _m;
 48.                         *end if;
.                  };
 49.                                               
>               else use `getmiss', clear;
 50.                         gen val_q=quan_s*price
> _uw$it_n;
 51.                                               
>   collapse (sum) val_q pricemiss (mean) spdomainq
>  ratquan, by(spdomain);
 52.                   gen linf_q=val_q/.9;
 53.                   drop val_q;
 54.                         append using "$path/wo
> rk/revpref_price_`i'.dta";
 55.                         sort spdomain;
 56.                 save "$path/work/revpref_price
> _`i'.dta", replace;
 57.    *browse;
.         *close j loop;
.         };
 58.         *aggregate into a big data set;
.         append using "$path/work/pref_r_price.dta
> ";
 59.       sort spdomain spdomainq;
 60.       save "$path/work/pref_r_price.dta", repl
> ace;
 61.  *close i loop;
. };
(note: dataset contains 0 observations)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_1.dta saved
(103 observations deleted)
(note: file /tmp/St02502.000008 not found)
file /tmp/St02502.000008 saved
(180 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
(note: file /tmp/St02502.000009 not found)
file /tmp/St02502.000009 saved
(27 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_1.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(27 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_1.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(1 real change made)
(1 real change made)
file /tmp/St02502.000009 saved
(26 observations deleted)
(note: file /tmp/St02502.00000a not found)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        224       98.68       98.68
          3 |          3        1.32      100.00
------------+-----------------------------------
      Total |        227      100.00
(224 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         26       96.30       96.30
          3 |          1        3.70      100.00
------------+-----------------------------------
      Total |         27      100.00
(1 missing value generated)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_1.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(18 observations deleted)
(2 real changes made)
(7 real changes made)
file /tmp/St02502.000009 saved
(20 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        195       85.90       85.90
          3 |         32       14.10      100.00
------------+-----------------------------------
      Total |        227      100.00
(195 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         20       74.07       74.07
          3 |          7       25.93      100.00
------------+-----------------------------------
      Total |         27      100.00
(2 missing values generated)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_1.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(27 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_1.dta saved
file /home/bjvca/data/data/GAP/Haruna/work/pref_r_p
> rice.dta saved
(note: dataset contains 0 observations)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_2.dta saved
(98 observations deleted)
file /tmp/St02502.000008 saved
(180 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(0 real changes made)
(1 real change made)
file /tmp/St02502.000009 saved
(31 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        224       98.68       98.68
          3 |          3        1.32      100.00
------------+-----------------------------------
      Total |        227      100.00
(224 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         31       96.88       96.88
          3 |          1        3.12      100.00
------------+-----------------------------------
      Total |         32      100.00
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_2.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(32 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_2.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(14 observations deleted)
(3 real changes made)
(5 real changes made)
file /tmp/St02502.000009 saved
(27 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        208       91.63       91.63
          3 |         19        8.37      100.00
------------+-----------------------------------
      Total |        227      100.00
(208 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         27       84.38       84.38
          3 |          5       15.62      100.00
------------+-----------------------------------
      Total |         32      100.00
(3 missing values generated)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_2.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(4 real changes made)
(12 real changes made)
file /tmp/St02502.000009 saved
(20 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        174       76.65       76.65
          3 |         53       23.35      100.00
------------+-----------------------------------
      Total |        227      100.00
(174 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         20       62.50       62.50
          3 |         12       37.50      100.00
------------+-----------------------------------
      Total |         32      100.00
(4 missing values generated)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_2.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(15 observations deleted)
(0 real changes made)
(1 real change made)
file /tmp/St02502.000009 saved
(31 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        224       98.68       98.68
          3 |          3        1.32      100.00
------------+-----------------------------------
      Total |        227      100.00
(224 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         31       96.88       96.88
          3 |          1        3.12      100.00
------------+-----------------------------------
      Total |         32      100.00
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_2.dta saved
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/pref_r_p
> rice.dta saved
(note: dataset contains 0 observations)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_3.dta saved
(107 observations deleted)
file /tmp/St02502.000008 saved
(180 observations deleted)
(label spdomain_original already defined)
(24 observations deleted)
(0 real changes made)
(1 real change made)
file /tmp/St02502.000009 saved
(22 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        222       97.80       97.80
          3 |          5        2.20      100.00
------------+-----------------------------------
      Total |        227      100.00
(222 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         22       95.65       95.65
          3 |          1        4.35      100.00
------------+-----------------------------------
      Total |         23      100.00
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_3.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(24 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(23 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_3.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(23 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_3.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(2 real changes made)
file /tmp/St02502.000009 saved
(21 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        217       95.59       95.59
          3 |         10        4.41      100.00
------------+-----------------------------------
      Total |        227      100.00
(217 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         21       91.30       91.30
          3 |          2        8.70      100.00
------------+-----------------------------------
      Total |         23      100.00
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_3.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(24 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(23 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_3.dta saved
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/pref_r_p
> rice.dta saved
(note: dataset contains 0 observations)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_4.dta saved
(109 observations deleted)
file /tmp/St02502.000008 saved
(180 observations deleted)
(label spdomain_original already defined)
(26 observations deleted)
(0 real changes made)
(3 real changes made)
file /tmp/St02502.000009 saved
(18 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        213       93.83       93.83
          3 |         14        6.17      100.00
------------+-----------------------------------
      Total |        227      100.00
(213 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         18       85.71       85.71
          3 |          3       14.29      100.00
------------+-----------------------------------
      Total |         21      100.00
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_4.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(26 observations deleted)
(0 real changes made)
(1 real change made)
file /tmp/St02502.000009 saved
(20 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        222       97.80       97.80
          3 |          5        2.20      100.00
------------+-----------------------------------
      Total |        227      100.00
(222 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         20       95.24       95.24
          3 |          1        4.76      100.00
------------+-----------------------------------
      Total |         21      100.00
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_4.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(23 observations deleted)
(1 real change made)
(3 real changes made)
file /tmp/St02502.000009 saved
(18 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        213       93.83       93.83
          3 |         14        6.17      100.00
------------+-----------------------------------
      Total |        227      100.00
(213 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         18       85.71       85.71
          3 |          3       14.29      100.00
------------+-----------------------------------
      Total |         21      100.00
(1 missing value generated)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_4.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(22 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(21 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_4.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(26 observations deleted)
(0 real changes made)
(1 real change made)
file /tmp/St02502.000009 saved
(20 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        222       97.80       97.80
          3 |          5        2.20      100.00
------------+-----------------------------------
      Total |        227      100.00
(222 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         20       95.24       95.24
          3 |          1        4.76      100.00
------------+-----------------------------------
      Total |         21      100.00
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_4.dta saved
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/pref_r_p
> rice.dta saved
(note: dataset contains 0 observations)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_5.dta saved
(103 observations deleted)
file /tmp/St02502.000008 saved
(180 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(27 observations deleted)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_5.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(27 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_5.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(1 real change made)
(2 real changes made)
file /tmp/St02502.000009 saved
(25 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        219       96.48       96.48
          3 |          8        3.52      100.00
------------+-----------------------------------
      Total |        227      100.00
(219 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         25       92.59       92.59
          3 |          2        7.41      100.00
------------+-----------------------------------
      Total |         27      100.00
(1 missing value generated)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_5.dta saved
(184 observations deleted)
(label spdomain_original already defined)
(17 observations deleted)
(1 real change made)
(8 real changes made)
file /tmp/St02502.000009 saved
(19 observations deleted)
file /tmp/St02502.00000a saved
variable product does not uniquely identify
    observations in the master data
(label spdomain_original already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        189       83.26       83.26
          3 |         38       16.74      100.00
------------+-----------------------------------
      Total |        227      100.00
(189 observations deleted)
(0 observations deleted)
file /tmp/St02502.00000a saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         19       70.37       70.37
          3 |          8       29.63      100.00
------------+-----------------------------------
      Total |         27      100.00
(1 missing value generated)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_5.dta saved
(180 observations deleted)
(label spdomain_original already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file /tmp/St02502.000009 saved
(27 observations deleted)
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/revpref_
> price_5.dta saved
(label spdomain_original already defined)
file /home/bjvca/data/data/GAP/Haruna/work/pref_r_p
> rice.dta saved

. *bring in actual flexible bundle numbers;
. use "$path/work/povline_food_flex_it$it_n.dta", c
> lear;

.         merge spdomain using "$path/work/pref_r_p
> rice.dta";
variable spdomain does not uniquely identify
    observations in
    /home/bjvca/data/data/GAP/Haruna/work/pref_r_
    > price.dta
(label spdomain_original already defined)

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |         25      100.00      100.00
------------+-----------------------------------
      Total |         25      100.00

.          drop crap;

.         drop _m;

.         order spdomainq spdomain;

.       sort spdomainq spdomain;

.         *rescale expenditures to hit a constant c
> alorie target;
.         gen povline_f5_s=ratquan*povline_f_flex90
> _$it_n;

.       compress;
spdomainq was float now byte
spdomain was float now byte
pricemiss was double now byte

. *browse;
.         *categorize revealed preference performan
> ce;
.       gen pref_r=0;

.       replace pref_r=1 if float(linf_q)>float(pov
> line_f5_s);
(13 real changes made)

.       replace pref_r=2 if float(linf_q)<float(pov
> line_f5_s);
(7 real changes made)

.       lab var pref_r "Fails or passes revealed pr
> eference test";

.       lab def pref_r
>                         0 "comparison of the same
>  region with itself"
>                         1 "passes revealed prefer
> ence test"
>                         2 "fails revealed prefere
> nce test" ;

.         lab val pref_r pref_r;

.       drop if spdomainq==spdomain;
(5 observations deleted)

.         tab pref_r;

    Fails or passes revealed preference |
                                   test |      Freq
> .     Percent        Cum.
----------------------------------------+----------
> -------------------------
        passes revealed preference test |         1
> 3       65.00       65.00
         fails revealed preference test |          
> 7       35.00      100.00
----------------------------------------+----------
> -------------------------
                                  Total |         2
> 0      100.00

.              sort spdomainq ;

.       by spdomainq: tab pref_r;

---------------------------------------------------
-> spdomainq = 1

    Fails or passes revealed preference |
                                   test |      Freq
> .     Percent        Cum.
----------------------------------------+----------
> -------------------------
        passes revealed preference test |          
> 2       50.00       50.00
         fails revealed preference test |          
> 2       50.00      100.00
----------------------------------------+----------
> -------------------------
                                  Total |          
> 4      100.00

---------------------------------------------------
-> spdomainq = 2

    Fails or passes revealed preference |
                                   test |      Freq
> .     Percent        Cum.
----------------------------------------+----------
> -------------------------
        passes revealed preference test |          
> 4      100.00      100.00
----------------------------------------+----------
> -------------------------
                                  Total |          
> 4      100.00

---------------------------------------------------
-> spdomainq = 3

    Fails or passes revealed preference |
                                   test |      Freq
> .     Percent        Cum.
----------------------------------------+----------
> -------------------------
        passes revealed preference test |          
> 1       25.00       25.00
         fails revealed preference test |          
> 3       75.00      100.00
----------------------------------------+----------
> -------------------------
                                  Total |          
> 4      100.00

---------------------------------------------------
-> spdomainq = 4

    Fails or passes revealed preference |
                                   test |      Freq
> .     Percent        Cum.
----------------------------------------+----------
> -------------------------
        passes revealed preference test |          
> 3       75.00       75.00
         fails revealed preference test |          
> 1       25.00      100.00
----------------------------------------+----------
> -------------------------
                                  Total |          
> 4      100.00

---------------------------------------------------
-> spdomainq = 5

    Fails or passes revealed preference |
                                   test |      Freq
> .     Percent        Cum.
----------------------------------------+----------
> -------------------------
        passes revealed preference test |          
> 3       75.00       75.00
         fails revealed preference test |          
> 1       25.00      100.00
----------------------------------------+----------
> -------------------------
                                  Total |          
> 4      100.00


. save "$path/work/pref_r_price.dta", replace;
file /home/bjvca/data/data/GAP/Haruna/work/pref_r_p
> rice.dta saved

. *drop comparisons with Maputo ;
. drop if spdomain>=11;
(0 observations deleted)

. drop if spdomainq>=11;
(0 observations deleted)

. display "this is with maputo dropped";
this is with maputo dropped

. tab pref_r;

    Fails or passes revealed preference |
                                   test |      Freq
> .     Percent        Cum.
----------------------------------------+----------
> -------------------------
        passes revealed preference test |         1
> 3       65.00       65.00
         fails revealed preference test |          
> 7       35.00      100.00
----------------------------------------+----------
> -------------------------
                                  Total |         2
> 0      100.00

. *further drop Nampula rural and urban;
. drop if spdomain==3 | spdomain==4;
(8 observations deleted)

. display "this is with maputo and nampula dropped 
> (MAH: Actually not - experimenting with 6 spatial
>  domains)";
this is with maputo and nampula dropped (MAH: Actua
> lly not - experimenting with 6 spatial domains)

. tab pref_r;

    Fails or passes revealed preference |
                                   test |      Freq
> .     Percent        Cum.
----------------------------------------+----------
> -------------------------
        passes revealed preference test |          
> 6       50.00       50.00
         fails revealed preference test |          
> 6       50.00      100.00
----------------------------------------+----------
> -------------------------
                                  Total |         1
> 2      100.00

. *************************************************
> *************************
> * 170_pref_r_price.do           (end)
> *************************************************
> *************************;
. log close;
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/rep/1
> 70_pref_r_price.log
  log type:  text
 closed on:  20 May 2013, 12:22:27
---------------------------------------------------

. 
end of do-file

. exit, clear
