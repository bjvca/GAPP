------------------------------------------------------------
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/UNPS_2011/GAPP
> 3//rep/220_gen_results.log
  log type:  text
 opened on:  23 Oct 2013, 15:47:01

. set more off

. #delimit ;
delimiter now ;
. **********************************************************
> *******
> * 220_gen_results.do            (start)
> *
> * Do file to generate poverty and inequality results at va
> rious
> * levels of aggregation, and save the results for each 
> * bootstrap replication in a file.
> * NOTE: for some reason, -ineqdeco- doesn't generate resul
> ts
> *       for GE(0), GE(1), GE(2), Gini, etc. when an "if" c
> ondition
> *               is used, so I'm using preserve/restore blo
> cks for
> *               sub-groups instead.
> *               Also, saving results presented a few wrink
> les, but
> *               doing it via matrices works.
> **********************************************************
> *******;
. /*
>         This file uses:
>                 work/povmeas_ent_flex.dta (the bootstrappe
> d version)
>                 out/bs_results.dta
>         
>         This file creates:
>                 out/bs_results.dta (updated)    
> */
> 
> 
> 
> 
> * Housecleaning;
. cap mat drop rep nat rur urb full;

. * Save the poverty lines in data file created for that pur
> pose,;
. * and store in a matrix, for saving to a data file later.;
. use "$path/work/povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calcul
> ated from this data s)

.         foreach reg of numlist 1/13 {;
  2.                 qui sum linpob if spdomain==`reg';
  3.                 global linpob`reg'=r(mean);
  4.         };

.         mat input rep=(0);

.         mat input linpob=($linpob1 $linpob2 $linpob3 $linp
> ob4 $linpob5 $linpob6 
>                 $linpob7 $linpob8 $linpob9 $linpob10 $linp
> ob11 $linpob12 $linpob13);

.         mat linpob = rep, linpob;

.         mat colnames linpob = rep linpob1 linpob2 linpob3 
> linpob4 linpob5 linpob6 
>                 linpob7 linpob8 linpob9 linpob10 linpob11 
> linpob12 linpob13;

.         #delimit cr
delimiter now cr
. 
.         * Change poverty measures from percentage to index
>  terms;
.         gen h   = h_ent_   /100

.         gen pg  = pg_ent_m /100
(8 missing values generated)

.         gen spg = spg_ent_m/100
(8 missing values generated)

. 
.         * National figures;
.         sum h [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
           h |    2714  37328356.8    .2634638    .440593   
>        0          1

.         glob p0_nat=r(mean)

.         sum pg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
          pg |    2707    37257099    .0903411   .1990422   
>        0          1

.         glob p1_nat=r(mean)

.         sum spg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
         spg |    2707    37257099    .0477647     .14867   
>        0          1

.         glob p2_nat=r(mean)

.         ineqdeco cr2 [aw=hhweight*hhsize]
(2 missing values generated)
 
Warning: cr2 has 10 values = 0. Not used in calculations
 
 
Percentile ratios for distribution of cr2: all valid obs.
------------------------------------------------------------
p90/p10  p90/p50  p10/p50  p75/p25  p75/p50  p25/p50
------------------------------------------------------------
  6.396    2.660    0.416    2.465    1.557    0.632
              
Generalized Entropy indices GE(a), where a = income differen
> ce
 sensitivity parameter, and Gini coefficient

------------------------------------------------------------
  All obs |   GE(-1)     GE(0)     GE(1)     GE(2)      Gini
----------+-------------------------------------------------
        0 |                                                 
------------------------------------------------------------
   
Atkinson indices, A(e), where e > 0 is the inequality aversi
> on parameter

----------------------------------------------
  All obs |     A(0.5)        A(1)        A(2)
----------+-----------------------------------
          |    0.16478     0.29438     0.65006
----------------------------------------------

.         glob gini_nat=$S_gini

.         glob ge0_nat =$S_i0

.         glob ge1_nat =$S_i1

.         glob ge2_nat =$S_i2

.         mat input nat=($p0_nat $p1_nat $p2_nat $gini_nat $
> ge0_nat $ge1_nat $ge2_nat)

. 
.         * Rural figures;
.         preserve

.                 keep if rural==1
(611 observations deleted)

.                 sum h [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
           h |    2104  31604004.3    .2963539   .4567575   
>        0          1

.                 glob p0_rur=r(mean)

.                 sum pg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
          pg |    2104  31604004.3    .1016528   .2077098   
>        0          1

.                 glob p1_rur=r(mean)

.                 sum spg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
         spg |    2104  31604004.3    .0534562   .1556065   
>        0          1

.                 glob p2_rur=r(mean)

.                 ineqdeco cr2 [aw=hhweight*hhsize]
(1 missing value generated)
 
Warning: cr2 has 8 values = 0. Not used in calculations
 
 
Percentile ratios for distribution of cr2: all valid obs.
------------------------------------------------------------
p90/p10  p90/p50  p10/p50  p75/p25  p75/p50  p25/p50
------------------------------------------------------------
  5.616    2.418    0.431    2.367    1.518    0.641
              
Generalized Entropy indices GE(a), where a = income differen
> ce
 sensitivity parameter, and Gini coefficient

------------------------------------------------------------
  All obs |   GE(-1)     GE(0)     GE(1)     GE(2)      Gini
----------+-------------------------------------------------
        0 |                                                 
------------------------------------------------------------
   
Atkinson indices, A(e), where e > 0 is the inequality aversi
> on parameter

----------------------------------------------
  All obs |     A(0.5)        A(1)        A(2)
----------+-----------------------------------
          |    0.14899     0.26711     0.60720
----------------------------------------------

.                 glob gini_rur=$S_gini

.                 glob ge0_rur =$S_i0

.                 glob ge1_rur =$S_i1

.                 glob ge2_rur =$S_i2

.         restore

.         mat input rur=($p0_rur $p1_rur $p2_rur $gini_rur $
> ge0_rur $ge1_rur $ge2_rur)

. 
.         * Urban figures;
.         preserve

.                 keep if rural==0
(2105 observations deleted)

.                 sum h [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
           h |     610  5724352.44    .0818786   .2744046   
>        0          1

.                 glob p0_urb=r(mean)

.                 sum pg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
          pg |     603  5653094.68    .0271019   .1234378   
>        0          1

.                 glob p1_urb=r(mean)

.                 sum spg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.  
>      Min        Max
-------------+----------------------------------------------
> -------------------
         spg |     603  5653094.68    .0159461   .0955795   
>        0          1

.                 glob p2_urb=r(mean)

.                 ineqdeco cr2 [aw=hhweight*hhsize]
(1 missing value generated)
 
Warning: cr2 has 2 values = 0. Not used in calculations
 
 
Percentile ratios for distribution of cr2: all valid obs.
------------------------------------------------------------
p90/p10  p90/p50  p10/p50  p75/p25  p75/p50  p25/p50
------------------------------------------------------------
  6.142    2.591    0.422    2.397    1.563    0.652
              
Generalized Entropy indices GE(a), where a = income differen
> ce
 sensitivity parameter, and Gini coefficient

------------------------------------------------------------
  All obs |   GE(-1)     GE(0)     GE(1)     GE(2)      Gini
----------+-------------------------------------------------
        0 |                                                 
------------------------------------------------------------
   
Atkinson indices, A(e), where e > 0 is the inequality aversi
> on parameter

----------------------------------------------
  All obs |     A(0.5)        A(1)        A(2)
----------+-----------------------------------
          |    0.14289     0.26881     0.76118
----------------------------------------------

.                 glob gini_urb=$S_gini

.                 glob ge0_urb =$S_i0

.                 glob ge1_urb =$S_i1

.                 glob ge2_urb =$S_i2

.         restore

.         mat input urb=($p0_urb $p1_urb $p2_urb $gini_urb $
> ge0_urb $ge1_urb $ge2_urb)

. 
.         * Assemble the matrix pieces and save this set of 
> estimates in the data file;
.                 #delimit;
delimiter now ;
.                 mat full= rep, nat, rur, urb;

.                 mat colnames full = rep 
>                                         p0_nat  p1_nat  p2
> _nat  gini_nat  ge0_nat  ge1_nat      ge2_nat
>                                         p0_rur  p1_rur  p2
> _rur  gini_rur  ge0_rur  ge1_rur      ge2_rur
>                                         p0_urb  p1_urb  p2
> _urb  gini_urb  ge0_urb  ge1_urb      ge2_urb;

.         #delimit cr
delimiter now cr
.         mat list full

full[1,22]
          rep     p0_nat     p1_nat     p2_nat   gini_nat
r1          0  .26346379  .09034107  .04776468          .

      ge0_nat    ge1_nat    ge2_nat     p0_rur     p1_rur
r1          .          .          .  .29635386  .10165283

       p2_rur   gini_rur    ge0_rur    ge1_rur    ge2_rur
r1  .05345615          .          .          .          .

       p0_urb     p1_urb     p2_urb   gini_urb    ge0_urb
r1  .08187856  .02710193  .01594614          .          .

      ge1_urb    ge2_urb
r1          .          .

. 
. 
. drop _all

. 
. svmat full , names(col)
number of observations will be reset to 1
Press any key to continue, or Break to abort
obs was 0, now 1

.         tempfile rep

.         compress
rep was float now byte
gini_nat was float now byte
ge0_nat was float now byte
ge1_nat was float now byte
ge2_nat was float now byte
gini_rur was float now byte
ge0_rur was float now byte
ge1_rur was float now byte
ge2_rur was float now byte
gini_urb was float now byte
ge0_urb was float now byte
ge1_urb was float now byte
ge2_urb was float now byte

. 
. 
. 
. 
. 
. **********************************************************
> *******
. * 220_gen_results.do            (end)
. **********************************************************
> *******;
. 
. log close
      name:  <unnamed>
       log:  /home/bjvca/data/data/GAP/Haruna/UNPS_2011/GAPP
> 3//rep/220_gen_results.log
  log type:  text
 closed on:  23 Oct 2013, 15:47:01
------------------------------------------------------------
