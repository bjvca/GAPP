-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNPS_20
> 11\GAPP3/rep/110_price_unit_flex.log
  log type:  text
 opened on:   9 Jul 2013, 11:36:05

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *******************
> * 110_price_unit_flex.do                (start)
> *
> * Purpose: This do file creates a price_unit_flex database with the u
> nit prices of the
> * goods of the flexible food basket in order to determine the poverty
>  lines per spatial
> * domain. It uses the files work/daily.dta and work/own.dta file and 
> draw unit prices
> * by: sum of values and quantity
> *********************************************************************
> *******************;
. *CA modified to bring in work/hhdata.dta for bootstrap
> *CA check for price calcs conditional on number of observations;
. /*
> This file uses:
>         work/daily.dta
>         work/own.dta
>         work/hhdata.dta
>         work/consump_nom.dta
>         work/codes_food_basket_flex.dta
>         work/temp_index_reg_tpi.dta
>           new/conversions.do
> 
> This file creates:
>         work/price_unit_flex.dta
>         work/bottom_basket.dta
> */
> 
> 
> 
> 
> *do "$path/new/010_initial.do";
. *********************************************************************
> *****************
> * Create sorted data set with daily and own and the matched codes
> *********************************************************************
> *****************;
. use "$path/work/cons_cod_trans.dta", clear;
(HH food cons. (1 rec per item cons. cat A& B per HH; Cat B: only T6SQ1
>  + T6AEQ3))

. *use "$path/in/cons_cod_trans.dta", clear;
. *save "$path/work/cons_cod_trans.dta", replace;
. *drop if quantityd==0 ;
. keep hhid product food_cat valuez quantityz unit;

. rename valuez    value;

. rename quantityz quantity;

. drop if quantity==0 ;
(779 observations deleted)

. *drop count;
.         sort product;

.         gen count=1;

.                 tempfile dd_acsort;

. save `dd_acsort', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. /*
> use "$path/work/daily.dta";
> tempfile dd_acsort;
>         drop days;
>         sort product;
>         tempfile dd_acsort;
> save `dd_acsort', replace;
> 
> use "$path/work/own.dta";
>         keep hhid product valued quantityd unit;
>         rename valued value;
>         rename quantityd quantity;
> 
>         *CHECK THE ZEROS IN quantity FOR NOW DELETE;
>         drop if quantity==0;
> 
>         append using `dd_acsort';
> 
> *CA modified to merge in work/hhdata.dta for bootstrap;
>         sort hhid;
>       merge hhid using "$path/work/hhdata.dta";
>       tab _m;
> 
> * Drop observations if non existent in HH data set;
> drop if _m!=3;
> drop _m;
> 
> 
>         sort product;
>         gen count=1;
> 
> 
> save `dd_acsort', replace;
> */
> 
> 
> *********************************************************************
> *****************;
. * Merge the flexible food basket codes with the daily and own data se
> ts
> * Drop all codes not a part of the flexible food basket
> *********************************************************************
> *****************;
.         merge product using "$path/work/codes_food_basket_flex.dta";
variable product does not uniquely identify observations in the
    master data
product was int now float

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      5,957       17.71       17.71
          2 |          2        0.01       17.72
          3 |     27,668       82.28      100.00
------------+-----------------------------------
      Total |     33,627      100.00

.         drop if _merge~=3;
(5959 observations deleted)

.         drop _merge;

. *********************************************************************
> *****************;
. * Drop observations where product code or quantity or value informati
> on is unavailable
> *********************************************************************
> *****************;
.                                 codebook hhid;

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,2.115e+14]        units:  1
         unique values:  2582                     missing .:  149/27668

                  mean:   1.4e+11
              std. dev:   4.2e+12

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.2e+09   4.0e+09   1.1e
> +11

. *        drop if product==. | value==. | quantity==.  ;
.                                 codebook hhid;

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,2.115e+14]        units:  1
         unique values:  2582                     missing .:  149/27668

                  mean:   1.4e+11
              std. dev:   4.2e+12

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.2e+09   4.0e+09   1.1e
> +11

. *********************************************************************
> *****************;
. * Convert non-KG quantities (units and liters) to kilograms;
. *********************************************************************
> *****************;
. *do "$path/new/110a_conversions.do"
> 
> ********************************************************************
> * There remain a few difficult to interpret observations such as lite
> rs
> * of fish and liters of pasta. These are dropped
> ********************************************************************;
. *        drop if unit~=2;
. ********************************************************************
> * Merge in labels for the 13 spatial domains
> ********************************************************************;
.         preserve;

.                 use "$path/work/hhdata.dta", clear;
(Household master record (1 record per household))

.                                                                      
>    keep hhid spdomain reg_tpi survquar;

.                         sort hhid;

.                         tempfile spdomainreg_tpi;

.                 save `spdomainreg_tpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

.                                 codebook hhid;

-----------------------------------------------------------------------
hhid                                                       Household ID
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,2.115e+14]        units:  1
         unique values:  2716                     missing .:  0/2716

                  mean:   1.3e+11
              std. dev:   4.1e+12

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   3.0e+09   4.0e+09   1.1e
> +11

.         restore;

.                 sort hhid;

.         merge hhid using `spdomainreg_tpi';
variable hhid does not uniquely identify observations in the master
    data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        149        0.54        0.54
          2 |        134        0.48        1.02
          3 |     27,519       98.98      100.00
------------+-----------------------------------
      Total |     27,802      100.00

.         drop _merge;

.         drop if product==.;
(156 observations deleted)

. codebook hhid;

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,2.115e+14]        units:  1
         unique values:  2560                     missing .:  149/27646

                  mean:   1.4e+11
              std. dev:   4.2e+12

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.2e+09   4.0e+09   1.1e
> +11

. tab spd;

      Spatial |
domains: each |
     with own |
 poverty line |
 (they are 5) |      Freq.     Percent        Cum.
--------------+-----------------------------------
Central Urban |      3,604       13.11       13.11
Central Rural |      5,265       19.15       32.25
      Eastern |      6,960       25.31       57.57
     Northern |      7,111       25.86       83.43
      Western |      4,557       16.57      100.00
--------------+-----------------------------------
        Total |     27,497      100.00

. sum if spd>=3;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     18628    5.28e+10    2.42e+11   1.07e+09   2.32e+12
     product |     18777    131.0222    15.66918        101        171
    quantity |     18628    .5872794    1.198033   .0071429         60
       value |     18628    437.5707    673.2686   2.857143      15000
        unit |     18628           1           0          1          1
-------------+--------------------------------------------------------
    food_cat |     18628           1           0          1          1
       count |     18777           1           0          1          1
    descript |     18777           1           0          1          1
      numreg |     18777    3.612718    1.193151          1          5
    survquar |     18628    2.514119    1.123197          1          4
-------------+--------------------------------------------------------
     reg_tpi |     18628    2.871001    .7756638          2          4
    spdomain |     18628    3.871001    .7756638          3          5

. table spdomain, content(mean quantity count quantity count hhid) row 
> missing;

--------------------------------------------------------------
Spatial       |
domains: each |
with own      |
poverty line  |
(they are 5)  | mean(quantity)     N(quantity)         N(hhid)
--------------+-----------------------------------------------
Central Urban |       .4384165           3,604           3,604
Central Rural |       .5270678           5,265           5,265
      Eastern |        .622596           6,960           6,960
     Northern |       .5400435           7,111           7,111
      Western |       .6070493           4,557           4,557
              | 
        Total |       .5562391          27,497          27,497
--------------------------------------------------------------

.         drop if product==. | value==. | quantity==.  ;
(149 observations deleted)

. codebook hhid;

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,2.115e+14]        units:  1
         unique values:  2560                     missing .:  0/27497

                  mean:   1.4e+11
              std. dev:   4.2e+12

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.2e+09   4.0e+09   1.1e
> +11

. tab spd;

      Spatial |
domains: each |
     with own |
 poverty line |
 (they are 5) |      Freq.     Percent        Cum.
--------------+-----------------------------------
Central Urban |      3,604       13.11       13.11
Central Rural |      5,265       19.15       32.25
      Eastern |      6,960       25.31       57.57
     Northern |      7,111       25.86       83.43
      Western |      4,557       16.57      100.00
--------------+-----------------------------------
        Total |     27,497      100.00

. ********************************************************************
> * Merge in temporal price index to convert nominal value to real
> ********************************************************************;
.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.d
> ta";
variables reg_tpi survquar do not uniquely identify observations in
    the master data
(label lsurvquar already defined)
(label lbreg already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,134        7.76        7.76
          3 |     25,363       92.24      100.00
------------+-----------------------------------
      Total |     27,497      100.00

.         drop if _merge ~= 3;
(2134 observations deleted)

.         drop _merge;

.         gen value_r=value/tpi_trim;

. *********************************************************************
> *****;
. * Identify relatively poor households, based on nominal temporally ad
> justed
> * consumption per capita. Only work with these households for the pri
> ce
> * calculations.
> *********************************************************************
> *****;
.                 preserve;

.                         use "$path/work/conpc.dta", clear;

. *                       use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work/hhdata.dta for bootstrap;
.         sort hhid;

.       merge hhid using "$path/work/hhdata.dta";

.       tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.04        0.04
          3 |      2,716       99.96      100.00
------------+-----------------------------------
      Total |      2,717      100.00

.       drop _m;

. *CA modified to keep bswt;
.                                 keep hhid hhweight hhsize cons_pc_nom
>  bswt ;

.                                 sort hhid;

.                                 merge hhid using `spdomainreg_tpi';
(label lbreg already defined)
(label lsurvquar already defined)
(label lspdomain already defined)

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.04        0.04
          3 |      2,716       99.96      100.00
------------+-----------------------------------
      Total |      2,717      100.00

.                                 drop _merge;

.                                 sort reg_tpi survquar;

.                                 cap drop _merge;

.                                 merge reg_tpi survquar using "$path/w
> ork/temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely identify observations in
    the master data
(label lsurvquar already defined)
(label lbreg already defined)

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        225        8.28        8.28
          3 |      2,492       91.72      100.00
------------+-----------------------------------
      Total |      2,717      100.00

.                                 drop _merge;

.                                 sort hhid;

.                                 merge hhid using "$path/work/conpc.dt
> a";

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      2,717      100.00      100.00
------------+-----------------------------------
      Total |      2,717      100.00

.                                 drop _merge;

.                                 gen food_pc_tpi  = food_pc_nom /tpi_t
> rim;
(225 missing values generated)

.                                 lab var food_pc_tpi "Temp-adjusted pe
> r capita food consumption/day";

.                                                                 * Non
> -food not TPI adjusted ;
.                                 gen cons_pc_tpi = food_pc_tpi + nf_pc
> _nom;
(225 missing values generated)

.                                 lab var cons_pc_tpi "Temp adjusted to
> tal consumption/day";

.                                 gen one=1;

.                                 tempfile contpi;

.                                 save `contpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp saved

.                                 collapse (p$bottom) one cons_pc_tpi [
> aw=hhsize*hhweight], by(spdomain) ;

.                                 rename cons_pc_tpi pctile_60;

.                                 tempfile 60pct;

.                                 sort spdomain;

.                                 save `60pct', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp saved

.                                 use `contpi';

.                                         sort spdomain;

.                                         merge spdomain using `60pct';
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

.                                         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      2,717      100.00      100.00
------------+-----------------------------------
      Total |      2,717      100.00

.                                         drop _merge;

.                                         drop one;

.                                         sort spdomain;

.                                         gen bottom_basket=cons_pc_tpi
> < pctile_60;

.                                         by spdomain: tab bottom_baske
> t [aw=hhsize*hhweight];

-----------------------------------------------------------------------
-> spdomain = Central Urban

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  241.69825       79.51       79.51
          1 |62.30174983       20.49      100.00
------------+-----------------------------------
      Total |        304      100.00

-----------------------------------------------------------------------
-> spdomain = Central Rural

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 266.462553       50.37       50.37
          1 | 262.537447       49.63      100.00
------------+-----------------------------------
      Total |        529      100.00

-----------------------------------------------------------------------
-> spdomain = Eastern

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |326.7689633       50.58       50.58
          1 |319.2310367       49.42      100.00
------------+-----------------------------------
      Total |        646      100.00

-----------------------------------------------------------------------
-> spdomain = Northern

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 352.503617       50.87       50.87
          1 | 340.496383       49.13      100.00
------------+-----------------------------------
      Total |        693      100.00

-----------------------------------------------------------------------
-> spdomain = Western

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |278.7435543       52.10       52.10
          1 |256.2564457       47.90      100.00
------------+-----------------------------------
      Total |        535      100.00

-----------------------------------------------------------------------
-> spdomain = .

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00


.                                         lab var bottom_basket "=1 if 
> in bottom (60%) of PCE";

.                                         sort hhid;

.                                                                 save 
> "$path/work/bottom_basket.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNPS_2011\GAPP3
> /work/bottom_basket.dta saved

.         restore;

.         sort hhid;

.         merge hhid using "$path/work/bottom_basket.dta";
variable hhid does not uniquely identify observations in the master
    data
(label lspdomain already defined)
(label lsurvquar already defined)
(label lbreg already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        319        1.24        1.24
          3 |     25,363       98.76      100.00
------------+-----------------------------------
      Total |     25,682      100.00

.         drop _merge;

.                         * Only keep price observations for the poor ;
.         keep if bottom_basket==1;
(15277 observations deleted)

.         *************************************************************
> *************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * for each spdomain & product combination. This should eliminate outl
> iers
> * that may have an undue influence on the price calculation. 
> *********************************************************************
> *****;
.                 gen hhppkg=value_r/quantity;
(50 missing values generated)

.                 egen lower5=pctile(hhppkg), p(5) by(spdomain product)
> ;
(50 missing values generated)

.                 egen upper5=pctile(hhppkg), p(95) by(spdomain product
> );
(50 missing values generated)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     10405    3.95e+10    2.23e+11   1.02e+09   2.31e+12
     product |     10355    131.5637    15.75313        101        171
    quantity |     10355    .5502244    1.016882   .0142857   34.28571
       value |     10355    366.5467    539.4332   2.857143   7714.286
        unit |     10355           1           0          1          1
-------------+--------------------------------------------------------
    food_cat |     10355           1           0          1          1
       count |     10355           1           0          1          1
    descript |     10355           1           0          1          1
      numreg |     10355     3.64423    1.169494          1          5
    survquar |     10405    2.397886     1.08078          1          4
-------------+--------------------------------------------------------
     reg_tpi |     10405    2.298799    1.046866          1          4
    spdomain |     10405    3.235175    1.149257          1          5
    tpi_trim |     10405    .9620845    .0953176   .7983326   1.159266
     value_r |     10355    382.8098    557.7301   3.274749   8261.106
 cons_pc_nom |     10405    765.0789    347.5735          0   2452.366
-------------+--------------------------------------------------------
    hhweight |     10405    2002.106    1470.699   308.1181   8736.727
        bswt |     10405           1           0          1          1
      hhsize |     10405    7.854974    3.157322          1         29
 cons_hh_nom |     10405    5995.319    3950.675          0   39287.83
 food_pc_nom |     10405    521.6734    249.4096          0   1803.061
-------------+--------------------------------------------------------
   nf_pc_nom |     10405    243.4055    188.3797          0   1715.154
 food_pc_tpi |     10405    545.9181    263.8467          0   1814.827
 cons_pc_tpi |     10405    789.3236    358.2619          0   2449.415
   pctile_60 |     10405    1175.064    389.3798   895.5701   2489.117
bottom_bas~t |     10405           1           0          1          1
-------------+--------------------------------------------------------
      hhppkg |     10355    1227.363     1650.93   3.034752   17290.76
      lower5 |     10355    447.1951     706.767    25.2896   5763.585
      upper5 |     10355    2567.291    2467.469   114.2019   17290.76

. describe;

Contains data from C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp
  obs:        10,405                          HH food cons. (1 rec
                                                per item cons. cat A& B
                                                per HH; Cat B: only
                                                T6SQ1 + T6AEQ3)
 vars:            28                          9 Jul 2013 11:36
 size:     1,259,005                          (_dta has notes)
-----------------------------------------------------------------------
              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
hhid            double %10.0g                 household id
product         float  %39.0g      itmds      Food product code:
                                                numerical
quantity        float  %9.0g                  daily household food
                                                consumption
value           float  %9.0g                  daily value of
                                                consumption in UGX per
                                                per household
unit            float  %9.0g                  set equal to one since
                                                all observations are
                                                converted into kg
food_cat        float  %9.0g                  food category equals 1,
                                                if product is food and
                                                0 if non food
count           float  %9.0g                  
descript        float  %9.0g       descrip    product description
                                                including product code
                                                but equals 2 for all
                                                non-foods
numreg          double %9.0g                  number of goods in the
                                                basket
survquar        float  %14.0g      lsurvquar
                                              Sequential Survey Quarter
                                                (Oct-Dec 10 = 1)
reg_tpi         byte   %24.0g      lbreg      Regions used for temporal
                                                price index
                                                calculations
spdomain        float  %13.0g      lspdomain
                                              Spatial domains: each
                                                with own poverty line
                                                (they are 5)
tpi_trim        float  %9.0g                  TRIMMED Temporal price
                                                index (Q4=1)
value_r         float  %9.0g                  
cons_pc_nom     float  %9.0g                  
hhweight        float  %9.0g                  Household sample weight
bswt            float  %9.0g                  bootstrap weights; and
                                                all equal to 1 for all
                                                households, as a
                                                toolkit requireme
hhsize          long   %9.0g                  number of household
                                                menbers
cons_hh_nom     double %9.0g                  (sum) cod_hh_nom
food_pc_nom     float  %9.0g                  nominal food consumption
                                                per capita
nf_pc_nom       float  %9.0g                  nominal non-food
                                                consumption per capita
food_pc_tpi     float  %9.0g                  Temp-adjusted per capita
                                                food consumption/day
cons_pc_tpi     float  %9.0g                  Temp adjusted total
                                                consumption/day
pctile_60       float  %9.0g                  (p 50) cons_pc_tpi
bottom_basket   float  %9.0g                  =1 if in bottom (60%) of
                                                PCE
hhppkg          float  %9.0g                  
lower5          float  %9.0g                  
upper5          float  %9.0g                  
-----------------------------------------------------------------------
Sorted by:  
     Note:  dataset has changed since last saved

. keep if hhppkg-lower5>=0 & hhppkg-upper5<=0;
(801 observations deleted)

. *********************************************************************
> * Note that we do prices in three ways. First, by summing quantity an
> d value 
> * This average price price_unitw is thus quantity/value weighted. Sec
> ond, we
> * calculate the price and take simple means for a transaction weighte
> d
> * price, price_unitt. Last we take the median, price_unitm. But in th
> e end
> * we only use price_unitw
> *********************************************************************
> ;
.         gen price_unitt=value_r/(quantity*1000);

.         gen price_unitm=price_unitt;

.                 *CA modified to count the boot sample weight bswt;
.         collapse (sum) quantity value_r count bswt 
>                  (mean) price_unitt 
>                  (median) price_unitm [aw=hhweight], by(spdomain prod
> uct);

.         *Generate weighted price per gram ;
.         gen price_unitw=value_r/(quantity*1000);

.         drop value_r quantity;

.         sort spdomain product;

.         lab var price_unitt "simple average of calculated prices - tr
> ansaction weighted";

.         lab var price_unitm "median of prices";

.         lab var price_unitw "value share weighted mean prices";

. * Get an idea of the difference between the price measures;
.         gen ratiotw=price_unitt/price_unitw;

.         gen ratiomw=price_unitm/price_unitw;

.         sum ratiotw ratiomw;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     ratiotw |       185      1.2179    .3331531   .8040299    3.07245
     ratiomw |       185      1.0032    .2398947   .2391765   2.132446

.         sort product;

.         merge product using "$path/work/codes_food_basket_flex.dta";
variable product does not uniquely identify observations in the
    master data

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          3        1.60        1.60
          3 |        185       98.40      100.00
------------+-----------------------------------
      Total |        188      100.00

.         count if _merge~=3;
    3

.         drop if _merge~=3;
(3 observations deleted)

.         drop _merge;

.         sort product spdomain;

. save "$path/work/price_unit_flex.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNPS_2011\GAPP3
> /work/price_unit_flex.dta saved

. *********************************************************************
> *******************
> * 110_price_unit_flex.do                (end)
> *********************************************************************
> *******************;
. cap log close;
