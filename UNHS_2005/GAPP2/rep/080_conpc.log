------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UN
> HS_2005\GAPP2/rep/080_conpc.log
  log type:  text
 opened on:   2 Jul 2013, 15:04:20

. set more off

. 
. 
. ****************************************************************
> ***********
. * 080_conpc.do          (start)
. *
. * Creates a file with per capita nominal consumption divided bet
> ween food
. * and non-food categories based on the calorie definition of foo
> d
. * rather than the COICOP (INE) definition of food. ready for 
. * temporal deflation when necessary
. ****************************************************************
> ************ 
. 
. /*
> This file uses:
>         work/hhdata.dta
>         work/consump_nom.dta
>       
> This file creates:
>         work/conpc.dta
> */
. 
. 
. 
. ****************************************************************
> ***********
. * Food expenditure
. ****************************************************************
> ************ 
. use "$path/in/cons_cod.dta" 

. *use "$path/work/cons_cod.dta" 
.             *sort product 
.             *merge product using "$path/work/food_cat.dta" 
.             *tab _m 
.             *drop _m 
.             keep if food_cat==1 
(7558 observations deleted)

.             collapse (sum) cod_hh_nom, by(hhid) 

.             rename cod_hh_nom food_hh_nom 

.                 sort hhid 

.             keep hhid food_hh_nom 

.             tempfile foodexp 

. save `foodexp' 
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. 
. ****************************************************************
> ***********
. * Food expenditure merged with all expenditure
. ****************************************************************
> ************ 
. *use "$path/work/cons_cod.dta" 
. use "$path/in/cons_cod.dta" 

. *use "$path/in/cons_cat.dta" 
. sum 

    Variable |       Obs        Mean    Std. Dev.       Min       
>  Max
-------------+----------------------------------------------------
> ----
        hhid |     99622    2.42e+09    1.14e+09   1.01e+09   4.15
> e+09
     product |     99744    195.1728    228.4847        100       
>  999
    food_cat |     99622    1.074532    .2626356          1       
>    2
    prod_cat |     99755    1.074432    .2624745          1       
>    2
    descript |     99755    1.074432    .2624745          1       
>    2
-------------+----------------------------------------------------
> ----
        comm |     92143    2.42e+07    1.14e+07   1.01e+07   4.15
> e+07
      region |     92197    2.347473    1.140668          1       
>    4
    district |     92197    241.3533    114.1282        101       
>  415
    substrat |     92197    2.483194    .8755183          1       
>    3
          ea |     92197    12.33798    9.833649          1       
>   39
-------------+----------------------------------------------------
> ----
        snum |     92197    6.134451    3.234912          1       
>   17
       vtype |     88729    1.488476    .5000503          1       
>    3
      gpsnsa |     92124    125026.1      140329         34    340
> 0000
      gpsnsb |     92106     3136478     1472945       4522   8.03
> e+07
    inidpcmp |     92197    1.969674    .1714847          1       
>    2
-------------+----------------------------------------------------
> ----
    daysurve |     91952    17.27792    6.235454          1       
>   31
    monsurve |     92197    6.483118    3.435524          1       
>   12
     yrsurve |     92197    2005.336    .4722653       2005       
> 2006
       scode |     86722    42.84401    21.05484          3       
>   98
     daychks |     86286     17.6338    6.423909          1       
>   72
-------------+----------------------------------------------------
> ----
     monchks |     86307    5.143951    4.242129          1       
>   30
    yearchks |     86395    2006.029    20.31882       2005       
> 3200
    editcode |     34786    47.60044    24.69147          1       
>   89
     dayedit |     34547    18.39807    6.972217          1       
>   72
     monedit |     34598    9.325655    3.827327          1       
>   30
-------------+----------------------------------------------------
> ----
    yearedit |     34652    2006.068    32.08359       2005       
> 3200
     strthrs |     79053    10.66273     2.27634          6       
>   61
     strtmin |     79010    25.82305     17.6342          0       
>   59
    respcode |     92180    1.013137    .1560634          1       
>    8
    our_resp |     92046    1.415108    .4947017          1       
>    3
-------------+----------------------------------------------------
> ----
     entrant |     90467    12.22909    5.905464          1       
>   19
    dayentry |     90467     15.6576    8.136146          1       
>   31
    monentry |     90467    3.780915    1.954447          0       
>   12
     yrentry |     90467    2006.832       53.09       2005       
> 5200
    verifier |      2096     6.35687     3.46748          1       
>   15
-------------+----------------------------------------------------
> ----
    dayverif |      1836    16.77996    8.605844          2       
>   30
    monverif |      1836    4.093682    2.321078          1       
>   11
    yrverify |      1954     2005.91    .2856233       2005       
> 2006
    qhmember |     92068    6.162912    3.329044          1       
>   33
       hmult |     92197    700.4122    344.7489      60.97    440
> 4.13
-------------+----------------------------------------------------
> ----
   quantityd |     92197    .6260404    4.070338          0   857.
> 1429
      valuez |     92197    455.3519    2520.947          0   5107
> 14.3
    quantity |     84735    2.410407     54.5909          0   1494
> 2.86
  cod_hh_nom |     99755    661.7962    3772.266          0   6803
> 53.7

. collapse (sum) cod_hh_nom, by(hhid) 

. *gen cons_pc_nom = cons_hh_nom/hhsize 
. rename cod_hh_nom cons_hh_nom 

. *keep  hhid cons_pc_nom cons_hh_nom  
. *keep hhid cod_hh_nom 
. *use "$path/in/cons_cod.dta" 
. *use "$path/in/consump_nom.dta" 
. *use "$path/work/consump_nom.dta" 
. *            keep  hhid cons_hh_nom  
.             display _N 
7427

.             keep  hhid cons_hh_nom  

.             sort hhid 

.             merge hhid using "$path/work/hhdata.dta" 

.             tab _m 

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.             drop _m 

. gen cons_pc_nom = cons_hh_nom/hhsize 
(12 missing values generated)

.             sort hhid 

.             merge hhid using `foodexp' 

.             tab _m 

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          2        0.03        0.03
          3 |      7,425       99.97      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.                 drop if _merge==2 
(0 observations deleted)

.             replace food_hh_nom=0 if _merge==1 & food_hh_nom==. 
(2 real changes made)

.             drop _m 

.                 gen food_pc_nom=food_hh_nom/hhsize 
(12 missing values generated)

.                 gen nf_hh_nom=cons_hh_nom-food_hh_nom 

.             gen nf_pc_nom=nf_hh_nom/hhsize 
(12 missing values generated)

.  
.             keep hhid cons_hh_nom food_pc_nom nf_pc_nom cons_pc_
> nom survquar spdomain news reg_tpi rural hhweight hhsize 

.             lab var food_pc_nom "nominal food consumption per ca
> pita" 

.             lab var nf_pc_nom "nominal non-food consumption per 
> capita" 

. keep hhid cons_hh_nom cons_pc_nom food_pc_nom nf_pc_nom 

.             sort hhid 

. 
. * MAH   sum  codebook hhid 
. save "$path/work/conpc.dta", replace 
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\
> GAPP2/work/conpc.dta saved

. 
. 
. ****************************************************************
> ***********
. * 080_conpc.do          (end)
. ****************************************************************
> ************ 
. 
. 
. log close 
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UN
> HS_2005\GAPP2/rep/080_conpc.log
  log type:  text
 closed on:   2 Jul 2013, 15:04:21
------------------------------------------------------------------
