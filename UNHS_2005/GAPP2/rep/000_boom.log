-----------------------------------------------------------------------
      name:  log_000_boom
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/000_boom.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:07

. 
. display "* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # 
> * # *"
* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *

. display ""


. display "Generel information:"
Generel information:

. display "   UGANDA HOUSEHOLD BUDGET SURVEY 2005/06"
   UGANDA HOUSEHOLD BUDGET SURVEY 2005/06

. display "   Poverty rate estimation"
   Poverty rate estimation

. display "   Methodology: Iterative procedure and revealed preferences
>  tests"
   Methodology: Iterative procedure and revealed preferences tests

. display ""


. display "* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # 
> * # *"
* # * # * # * # * # * # * # * # * # * # * # * # * # * # * # * # *

. 
. 
. *********************************************************************
> *****
. * 000_boom.do   (start)
. *
. * Reminders:
. *       1) Check very top of this file to make sure you are on the ri
> ght path! 
. *       2) GAMS 22.5 must be placed onto the path. See 190_revpref13_
> m1.bat.
. *          Typically this needs to be edited.
. *   3) In case of implementing a new survey the user must make necess
> ary
. *      changes in 010_initial.do, 020_hhdata.do and 030_rawdata.do.
. *
. * Process:
. * - The do-file prefix indicates first time a do-file is called
. *
. * KS, 2003
. * CA, 2005-2006
. * MAH, June. 2013
. *********************************************************************
> *****
. 
. clear all

. set more off

. set mem 700m

. 
. noisily display "Start time: " "$S_TIME"
Start time: 11:07:07

. 
. 
. 
. *********************************************************************
> *****
. * Macros. Region definitions. Demographic definitions.
. *********************************************************************
> *****
. do "$path/new/010_initial.do"

. cap log close

. log using "$path/rep/010_initial.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/010_initial.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:07

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *********
> * 010_initial.do                (start)
> *********************************************************************
> *********;
. *********************************************************************
> *********
> * Purpose: Set some globals
> *********************************************************************
> *********;
. *********************************************************************
> *********
> * TPI basket
> *********************************************************************
> *********;
. * Number of items for Uganda i primarily set it to 30 on considering 
> a product for appearing over 1000 times on households menu min was 10
> 85 and max was 6157 however the relevant code in new is atvivated to 
> take care of this automatically;
. global product_tpi_n "30";

. * Code choose $product_tpi_n ;
. global product_tpi   "product_tpi==1";

. * Initial (arbitrary) quantile defining poor for price index calculat
> ions.
> * Mozambique: bottom 60%. Vietnam: bottom 20%. Tanzania: bottom 40% .
>  Uganda: headcount 2009 24.5% ;
. global tpi_bottom "50";

.  * Set the number of regions in the TPI calc for Uganda are set to 4 
> as east central north and east;
. global n_tpi "4";

. * To reproduce the mozambique 10 numbers, the following global should
>  be commented out. It controls a line in 140_iterate.do 
> * where observations not measured in kg are dropped. For all other da
> tasets, all observations should be converted to kg's before
> * the toolkit is run. For all other datasets, this line should theref
> ore be included.
> global MZ "*";
. *********************************************************************
> *********
> * Initial (arbitrary) quantile defining the (relatively) poor.
> *********************************************************************
> *********;
. global bottom "50";

. *********************************************************************
> *********
> * Number of iterations in 140_iterate.do
> *********************************************************************
> *********;
. global it_n "5";

. *********************************************************************
> *********
> * Set the number of regions in the spatial domain;
. *********************************************************************
> *********;
. global n_spdom "9";

. ******************* we deleted East urban (132 hhds), North urban (17
> 2 hhds) and West urban (107 hhds) because too few observations were i
> n those spatial domains;
.  ********************************************************************
> **********
> * Revealed preferences choices
> *********************************************************************
> *********;
. * Activate GAMS program according to number of regions in spatial dom
> ain;
. *global revpref "190_revpref13_m1.bat";
. *global no_temp_rev " ";
. * k spatial regions and no intertemporal revealed preference conditio
> n:
>   Activate the next two lines below;
. global no_temp_rev "*";

. global revpref "190_revpref13_r.bat";

.  ********************************************************************
> ******
> * 010_initial.do                (end)
> *********************************************************************
> *****;
. log close;
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/010_initial.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:07
-----------------------------------------------------------------------

. 
end of do-file

. 
. *do "C:\user\gapp\z_data_preb/new/100_collect_expen_moz.do"
. *s;
. 
. *do "C:\user\gapp\z_data_preb/new/000_boom.do"
. 
. *global path "C:\user\gapp"
. 
. 
. 
. *********************************************************************
> *****;
. *********************************************************************
> *****;
. * This is the block of do files to set up the data to get nominal
. * consumption. These DO NOT need to be bootstrapped.
. *********************************************************************
> *****;
. *********************************************************************
> *****;
.         
.         * This code produces some once for all data for the in-folder
> . Don't
.         * run it unless you know what you are doing!!!
.                 * Produces education expenditure
.                 *do "$path\new\Create/education_Create.do"
.                 * Imputation of missing recepts-in-kind. Run the code
>  without this first...
.                 *do "$path\new\Create/0_code_chain.do"
.                 * First poverty lines dependent on IAF
.                 *do "$path\new\Create/povlines_first_iof_Create.do"
.                 * Match product codes for different surveys
.                 *do "$path\new\Create/match96_02_Create.do"
.                 * Basket from previous survey
.                 *do "$path\new\Create/smallbasket_iof_Create.do"
.                 * Match product codes between surveys
.                 *do "$path\new\Create/rev_pref_matchcodes_02-96_iof_C
> reate.do"
.                 * Update poverty lines
.                 *do "$path\new\Create/povlines-96-v1-vers7_iof_Create
> .do"               
.                 * Food share
.                 *do "$path\new\Create/foodshr96_iof_Create.do"
.                 
.                 *do "$path\new\Create/.do"
.                 *do "$path\new\Create/.do"
. 
. */
.         * This set of files takes the raw data and creates more handy
>  data 
.         * sets in the work-folder
.         do "$path/new/020_in_2_work_folder.do"

. clear all

. *global path "C:/Users/Templeton/Desktop/GAPP/GAPP-UGANDA-HARUNA"
. set mem 999m

. 
. cap log close

. log using "$path/rep/020_hhdata.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/020_hhdata.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:07

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *****
> * 020_hhdata.do         (start)
> *
> * Organize the hhid identifier in the HHData file the same way, and k
> eep
> * only the relevant variables.
> *
> * This file sets:
> * - interview month, quarter and year
> * - regions: make all needed regions. But in the end only the one spe
> cified
> *            in initial.do are kept. These are
> *            - rural: 0=urban, 1=rural
> *            - news: speficifying North, East, West, South. But combi
> nations
> *                    are also possible, eg. North-East, Center,...
> *            - reg_tpi: regions with own TPI
> *            - strata: strata regions
> *            - spdomain: spatial domains (regions with own poverty li
> ne)
> *            - news_ru_ur: combination of news and rural
> *********************************************************************
> *****;
. use "$path/in/hhdata.dta", clear;

. *recode spdomain 10=1 11=2 20=3 30=4 40=5 these have been set to five
>  for Uganda to ensure hwe have at least 1000 households per domain;
. tab spdomain, missing;

       Spatial |
 domains: each |
      with own |
  poverty line |
  (they are 9) |      Freq.     Percent        Cum.
---------------+-----------------------------------
       Kampala |        324        4.36        4.36
 Central urban |        192        2.59        6.95
 Central rural |      1,584       21.33       28.28
 Eastern urban |        414        5.58       33.85
 Eastern rural |      1,518       20.44       54.30
Northern urban |        344        4.63       58.93
Northern rural |      1,280       17.24       76.16
 Western urban |        425        5.72       81.89
 Western rural |      1,345       18.11      100.00
---------------+-----------------------------------
         Total |      7,426      100.00

.         sort hhid;

.         save "$path/work/hhdata.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/hhdata.dta saved

.         sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      7426    2.48e+09    1.13e+09   1.01e+09   4.15e+09
        comm |      7422    2.48e+07    1.13e+07   1.01e+07   4.15e+07
      region |      7426    2.412604    1.133499          1          4
    district |      7426    247.8391    113.3708        101        415
    substrat |      7426    2.542419     .840165          1          3
-------------+--------------------------------------------------------
         psu |      7426    12.43307    9.843949          1         39
        snum |      7426     5.99219    3.213011          1         17
       vtype |      7071    1.487767    .5001685          1          3
      gpsnsa |      7421    130231.5    138688.1         34    3400000
      gpsnsb |      7420     3149466     1515975       4522   8.03e+07
-------------+--------------------------------------------------------
    inidpcmp |      7426    1.959601    .1969055          1          2
    daysurve |      7409    17.17303    6.229309          1         31
    monsurve |      7426    6.489362    3.436694          1         12
     yrsurve |      7426    2005.335    .4721769       2005       2006
       scode |      6990    42.41159    21.68829          3         98
-------------+--------------------------------------------------------
     daychks |      6960    17.52744    6.375368          1         72
     monchks |      6961    5.121822    4.233872          1         30
    yearchks |      6967    2005.855    14.31612       2005       3200
    editcode |      2816     48.2951    25.71762          1         89
     dayedit |      2796    18.27825    6.935107          1         72
-------------+--------------------------------------------------------
     monedit |      2801    9.271332    3.841028          1         30
    yearedit |      2807    2005.634    22.55493       2005       3200
     strthrs |      6362    10.69239    2.177149          6         61
     strtmin |      6358    25.79412     17.5706          0         59
    respcode |      7424    1.011045    .1287743          1          8
-------------+--------------------------------------------------------
    our_resp |      7410    1.412011    .4941459          1          3
     entrant |      7288    12.28224    5.929164          1         19
    dayentry |      7288     15.6674    8.075122          1         31
    monentry |      7288    3.868551    2.079063          0         12
     yrentry |      7288     2006.38    37.41513       2005       5200
-------------+--------------------------------------------------------
    verifier |       167    6.538922    3.487928          1         15
    dayverif |       148    16.77703    8.431251          2         30
    monverif |       148    4.141892    2.501728          1         11
    yrverify |       157    2005.898    .3034991       2005       2006
      hhsize |      7415    5.782738    3.284401          1         33
-------------+--------------------------------------------------------
    hhweight |      7426    704.6189    339.0242      60.97    4404.13
    survquar |      7426     2.50983    1.074578          1          4
     survmon |      7426    6.514678    3.303603          1         12
      strata |      7426    5.644762    2.836484          1         10
       rural |      7426    .7712093    .4200825          0          1
-------------+--------------------------------------------------------
     reg_tpi |      7426    2.412604    1.133499          1          4
    spdomain |      7426    5.552788    2.384061          1          9
        news |      7426    2.412604    1.133499          1          4
        bswt |      7426           1           0          1          1

. use "$path/in/indata.dta", clear;

.         *sort hhid;
.         save "$path/work/indata.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/indata.dta saved

.         sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       indid |     41810    2.50e+11    1.12e+11   1.01e+11   4.15e+11
    motherhh |     39374    .5007111    .5000058          0          1
        hhid |     41797    2.50e+09    1.12e+09   1.01e+09   4.15e+09
         sex |     41797    .5243199    .5348987          0          2
         age |     40470    19.68325    17.41645          0        110

. use "$path/in/calperg.dta", clear;

.         *sort hhid;
.         save "$path/work/calperg.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/calperg.dta saved

.         sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |        62       130.5    18.04162        100        161
    descript |         0
     calperg |        62    1.980935    2.136932          0       8.84

. /*
> use "$path/in/cons_cod_trans.dta", clear;
>         *sort hhid;
>         sum;
> for var value quantityd cod_hh_nom cod_hh_nom2 cod_hh_nom3: replace X
> =0 if X==.;
> collapse food_cat prod_cat (sum) value quantityd cod_hh_nom cod_hh_no
> m2 cod_hh_nom3, by(hhid product descript);
>         save "$path/work/cons_cod.dta", replace;
>         sum;
> */
>  
> *********************************************************************
> *****
> * 020_hhdata.do         (end)
> *********************************************************************
> *****;
. cap log close;

. 
end of do-file

.         do "$path/new/final_tableA1-A5-Haruna-2005.do"

. 
. *********************************************************************
. *********************************************************************
. **
. **     PROGRAMME:    preparing_hhdata_200 for Uganda_tables_A1_to_A3_
> vXX       
. **     AUTHOR:       HARUNA SEKABIRA
. **     OBJECTIVE:    Create standard tables A1 to A3 for UNHS 2005/20
> 06
. **
. **     DATA IN:      hsec1b.dta
. **                                       hsec2.dta
. **                                       hsec3.dta
. **                   hsec14a.dta
. **
. **
. **
. **     DATA OUT:     hhdata.dta (table A1)
. **                                       indata.dta (table A2)
. **                                       calperg.dta (table A3)
. **                   cons_cod_trans.dta (table A4)
. **                   cons_cod.dta (table A5)
. **
. **     NOTES:           the files in the in folder here have been cop
> ied from C:\Users\Templeton\Desktop\GAPP\UNHS_2005\UNHS_III_SOCIO_DAT
> A
. **                  originally from UBOS and pasted in the in folder 
> as the original files for use              
. **
. *********************************************************************
> *****
. 
. clear

. set logtype text

. capture log close

. set more off

. 
. if c(os)=="Unix" {
. global path "/home/bjvca/data/data/GAP/Haruna/UNHS_2005/GAPP2/"
. }

. else{
. global path "C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_
> 2005\GAPP2"
. }

. 
. 
. **************************************************************
. * Table A1: Household Characteristics and interview details
. **************************************************************
. 
. use "$path/in/hsec1b.dta" 

. *keep
. 
. ***------- Primary Sampling Unit
. * The primary sampling unit for the 2005/6 UNHS is the enumeration ar
> ea.
. codebook ea 

-----------------------------------------------------------------------
ea                                                                   ea
-----------------------------------------------------------------------

                  type:  numeric (int)

                 range:  [1,39]                       units:  1
         unique values:  39                       missing .:  0/7426

                  mean:   12.4331
              std. dev:   9.84395

           percentiles:        10%       25%       50%       75%       
> 90%
                                 2         4         9        20       
>  28

.         /* There are 39 unique values, the UNHS 05/06 report mentions
>  600, located in C:\Users\Templeton\Desktop\GAPP\UNHS_2005\GAPP2\work
> ing-files */
. rename ea psu

. label variable psu "Primary Sampling Unit"

. 
. ***------Interview date
. ** the interview date was in three propotions, the day, month and yea
> r and all these had been entered separately. However, this infromatio
> n is 
. ** replicated below in the survey quarters and months better thus mig
> ht be a repeat to do it here.
. 
. ***------- Interview Quarter
. * For the Mozambique Data, instead of using the regular quarter defin
> ition for their "surquar" variable they defined the quarters
. * relative to the time period covered by the survey: the survey ran f
> rom Sept 2008 to August 2009 so they defined the quarters
. * as follows: Sept-Nov 08, Dec08-Feb09, Mar-May 08 and June-Aug 08.
. * I will use the same framework
. tab monsurve yrsurve,m 

  Month of |   Year of interview
 interview |      2005       2006 |     Total
-----------+----------------------+----------
         1 |         0        705 |       705 
         2 |         0        547 |       547 
         3 |         0        800 |       800 
         4 |         0        439 |       439 
         5 |       481          0 |       481 
         6 |       583          0 |       583 
         7 |       509          0 |       509 
         8 |       804          0 |       804 
         9 |       711          0 |       711 
        10 |       765          0 |       765 
        11 |       696          0 |       696 
        12 |       386          0 |       386 
-----------+----------------------+----------
     Total |     4,935      2,491 |     7,426 


.         /* According to the repartition of months and year, the surve
> y ran from May 2005 to April 2006. I will define the
>          * the quarters accordingly */
. gen float survquar=1 if monsurve>=5 & monsurve<=7 & yrsurve==2005
(5853 missing values generated)

. replace survquar=2 if monsurve>=8 & monsurve<=10  & yrsurve==2005
(2280 real changes made)

. replace survquar=3 if (monsurve>=11 & monsurve<=12  & yrsurve==2005) 
> | (monsurve==1  & yrsurve==2006)
(1787 real changes made)

. replace survquar=4 if monsurve>=2 & monsurve<=4  & yrsurve==2006
(1786 real changes made)

. label define lsurvquar 1 "May-Jul 05" 2 "Sept-Oct 05" 3 "Nov05-Jan06"
>  4 "Feb-Apr 2006"

. label values survquar lsurvquar

. label variable survquar "Sequential Survey Quarter (May-Jul 05=1)"

. 
. ***------- Sequential Interview month 
. * Following the Mozambique file, I am creating a survey month variabl
> e rather than an interview date variable as per the excel sheet
. * Number 1 corresponds to the first month of the survey and not to Ja
> nuary.
. gen float survmon=1 if monsurve==5 & yrsurve==2005
(6945 missing values generated)

. replace survmon=2 if monsurve==6 & yrsurve==2005
(583 real changes made)

. replace survmon=3 if monsurve==7 & yrsurve==2005
(509 real changes made)

. replace survmon=4 if monsurve==8 & yrsurve==2005
(804 real changes made)

. replace survmon=5 if monsurve==9 & yrsurve==2005
(711 real changes made)

. replace survmon=6 if monsurve==10 & yrsurve==2005
(765 real changes made)

. replace survmon=7 if monsurve==11 & yrsurve==2005
(696 real changes made)

. replace survmon=8 if monsurve==12 & yrsurve==2005
(386 real changes made)

. replace survmon=9 if monsurve==1 & yrsurve==2006
(705 real changes made)

. replace survmon=10 if monsurve==2 & yrsurve==2006
(547 real changes made)

. replace survmon=11 if monsurve==3 & yrsurve==2006                    
>            
(800 real changes made)

. replace survmon=12 if monsurve==4 & yrsurve==2006
(439 real changes made)

. 
. label define lsurvmon 1 "May 05" 2 "Jun 05" 3 "Jul 05" 4 "Aug 05" 5 "
>  Sep 05" 6 "Oct 05" 7 "Nov 05" 8 "Dec 05" 9 "Jan 06" 10 "Feb 06" 11 "
> Mar 06" 12 "Apr 06"

. 
. label values survmon lsurvmon

. tab survmon,m

    survmon |      Freq.     Percent        Cum.
------------+-----------------------------------
     May 05 |        481        6.48        6.48
     Jun 05 |        583        7.85       14.33
     Jul 05 |        509        6.85       21.18
     Aug 05 |        804       10.83       32.01
     Sep 05 |        711        9.57       41.58
     Oct 05 |        765       10.30       51.89
     Nov 05 |        696        9.37       61.26
     Dec 05 |        386        5.20       66.46
     Jan 06 |        705        9.49       75.95
     Feb 06 |        547        7.37       83.32
     Mar 06 |        800       10.77       94.09
     Apr 06 |        439        5.91      100.00
------------+-----------------------------------
      Total |      7,426      100.00

. label variable survmon "Sequential Survey Month (May 2005=1)"

. 
. ***------- Household Sample Weight
. rename hmult hhweight

. label variable hhweight "Household sample weight"

. 
. ***------- Household id
. codebook hh /*there are  7426 different values and 7426 observations 
> in the dataset so the variable "hh" uniquely identifies the observati
> ons */

-----------------------------------------------------------------------
hh                                                          (unlabeled)
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7426                     missing .:  0/7426

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

. rename hh hhid

. label variable hhid "Household ID"

. 
. ***------- Household Size
. rename qhmember hhsize

. label variable hhsize "Household Size"

. 
. ***------- Geographical Stratification during sampling
. * this was not there as was with 2009, therefore we shall generate "s
> trata" from the distict and region variables here. the 2009 UBOS 
. ** has explanations for what districts belong to which sub regions, s
> o we shall use that to build our strata variable. UBOS 2009/10 report
>  had described them
. ** as follows: Notes: Sub-region of North East includes the districts
>  of Kotido, Moroto, Nakapiripiriti, Katwaki, Amuria, Soroti, Kumi
. ** and Kaberamaido; Mid-Northern included Gulu, Kitgum, Pader, Apac, 
> and Lira; West Nile includes Moyo, Adjumani, Yumbe, Arua, 
. **Koboko, and Nebbi; Mid-Western includes Masindi, Hoima, Kibaale, Bu
> ndibugyo, Kabarole, Kasese, Kyenjojo and Kamwenge; South Western incl
> udes 
. **  Bushenyi, Rukungiri, Kanungu, Kabale, Kisoro, Mbarara, and Ntunga
> mo; Eastern includes Kapchorwa, Mbale,
. ** Tororo, Sironko, Paliisa, and Busia; Central 1 includes Kalangala,
>  Masaka, Mpigi, Rakai, Sembabule and Wakiso; Central 2 includes
. ** Kayunga, Kiboga, Luwero, Mubende, Mukono and Nakasongola; East Cen
> tral includes Jinja, Iganga, Kamuli, Bugiri and 
. ** Mayuge; and Kampala. We have used the same nomenclature
. 
. tab district

     district |      Freq.     Percent        Cum.
--------------+-----------------------------------
    kalangala |         19        0.26        0.26
      kampala |        324        4.36        4.62
       kiboga |         49        0.66        5.28
       luwero |        132        1.78        7.06
       masaka |        319        4.30       11.35
        mpigi |         99        1.33       12.69
      mubende |        304        4.09       16.78
       mukono |        323        4.35       21.13
  nakasongola |         40        0.54       21.67
        rakai |        126        1.70       23.36
    sembabule |         49        0.66       24.02
      kayunga |         69        0.93       24.95
       wakiso |        247        3.33       28.28
       bugiri |         88        1.19       29.46
        busia |         69        0.93       30.39
       iganga |        352        4.74       35.13
        jinja |        156        2.10       37.23
       kamuli |        315        4.24       41.48
    kapchorwa |         40        0.54       42.01
      katakwi |         43        0.58       42.59
         kumi |         79        1.06       43.66
        mbale |        361        4.86       48.52
      pallisa |         97        1.31       49.82
       soroti |         87        1.17       51.00
       tororo |        128        1.72       52.72
  kaberamaido |          9        0.12       52.84
       mayuge |         39        0.53       53.37
      sironko |         69        0.93       54.30
     adjumani |         30        0.40       54.70
         apac |        310        4.17       58.87
         arua |        347        4.67       63.55
         gulu |        215        2.90       66.44
       kitgum |         90        1.21       67.65
       kotido |         67        0.90       68.56
         lira |        263        3.54       72.10
       moroto |         30        0.40       72.50
         moyo |         28        0.38       72.88
        nebbi |        118        1.59       74.47
nakapiripirit |         26        0.35       74.82
        pader |         70        0.94       75.76
        yumbe |         30        0.40       76.16
    budibugyo |         49        0.66       76.82
     bushenyi |        328        4.42       81.24
        hoima |         89        1.20       82.44
       kabale |        119        1.60       84.04
     kabarole |         98        1.32       85.36
       kasese |        117        1.58       86.94
      kibaale |         84        1.13       88.07
       kisoro |         50        0.67       88.74
      masindi |        107        1.44       90.18
      mbarara |        383        5.16       95.34
     ntungamo |         87        1.17       96.51
    rukungiri |         59        0.79       97.31
     kamwenge |         60        0.81       98.11
      kanungu |         50        0.67       98.79
     kyenjojo |         90        1.21      100.00
--------------+-----------------------------------
        Total |      7,426      100.00

. tab district, nolabel

   district |      Freq.     Percent        Cum.
------------+-----------------------------------
        101 |         19        0.26        0.26
        102 |        324        4.36        4.62
        103 |         49        0.66        5.28
        104 |        132        1.78        7.06
        105 |        319        4.30       11.35
        106 |         99        1.33       12.69
        107 |        304        4.09       16.78
        108 |        323        4.35       21.13
        109 |         40        0.54       21.67
        110 |        126        1.70       23.36
        111 |         49        0.66       24.02
        112 |         69        0.93       24.95
        113 |        247        3.33       28.28
        201 |         88        1.19       29.46
        202 |         69        0.93       30.39
        203 |        352        4.74       35.13
        204 |        156        2.10       37.23
        205 |        315        4.24       41.48
        206 |         40        0.54       42.01
        207 |         43        0.58       42.59
        208 |         79        1.06       43.66
        209 |        361        4.86       48.52
        210 |         97        1.31       49.82
        211 |         87        1.17       51.00
        212 |        128        1.72       52.72
        213 |          9        0.12       52.84
        214 |         39        0.53       53.37
        215 |         69        0.93       54.30
        301 |         30        0.40       54.70
        302 |        310        4.17       58.87
        303 |        347        4.67       63.55
        304 |        215        2.90       66.44
        305 |         90        1.21       67.65
        306 |         67        0.90       68.56
        307 |        263        3.54       72.10
        308 |         30        0.40       72.50
        309 |         28        0.38       72.88
        310 |        118        1.59       74.47
        311 |         26        0.35       74.82
        312 |         70        0.94       75.76
        313 |         30        0.40       76.16
        401 |         49        0.66       76.82
        402 |        328        4.42       81.24
        403 |         89        1.20       82.44
        404 |        119        1.60       84.04
        405 |         98        1.32       85.36
        406 |        117        1.58       86.94
        407 |         84        1.13       88.07
        408 |         50        0.67       88.74
        409 |        107        1.44       90.18
        410 |        383        5.16       95.34
        411 |         87        1.17       96.51
        412 |         59        0.79       97.31
        413 |         60        0.81       98.11
        414 |         50        0.67       98.79
        415 |         90        1.21      100.00
------------+-----------------------------------
      Total |      7,426      100.00

. 
. 
. gen float strata=2 if (district==101|district==105|district==106|dist
> rict==110|district==111|district==113)
(6567 missing values generated)

. replace strata=1 if (district==102)
(324 real changes made)

. replace strata=3 if (district==103|district==104|district==107|distri
> ct==108|district==109|district==112)
(917 real changes made)

. replace strata=4 if (district==201|district==203|district==204|distri
> ct==205|district==214)
(950 real changes made)

. replace strata=5 if (district==202|district==206|district==209|distri
> ct==210|district==212|district==215)
(764 real changes made)

. replace strata=6 if (district==302|district==304|district==305|distri
> ct==307|district==312)
(948 real changes made)

. replace strata=7 if (district==207|district==208|district==211|distri
> ct==213|district==306|district==308|district==311)
(341 real changes made)

. replace strata=8 if (district==301|district==303|district==309|distri
> ct==310|district==313)
(553 real changes made)

. replace strata=9 if (district==401|district==403|district==405|distri
> ct==406|district==407|district==409|district==413|district==415)
(694 real changes made)

. replace strata=10 if (district==402|district==404|district==408|distr
> ict==410|district==411|district==412|district==414)
(1076 real changes made)

. 
. label define lstrata  1 "Kampala" 2 "Central 1" 3 "Central 2" 4 "East
>  Central" 5 "Eastern" 6 "Mid Northern" 7 "North East" 8 "West Nile" 9
>  "Mid Western" 10 "South Western"

. label values strata lstrata

. label variable strata "Geographical stratification variable during sa
> mpling (ranging from 1 to 10 sub regions)"
note: label truncated to 80 characters

. * to ensure that the right districts had been used for the right sub-
> regions (strata), we checked this by tabbing these sub-regions with r
> ural/urban description and then
. ** tabbed the big regions (region) with substrat to ensure that the t
> otal numbers of Urban/Rural are the same in both
. tab strata substrat

 Geographical |
stratificatio |
   n variable |
       during |
     sampling |
(ranging from |      substratum
1 to 10 sub r |     urban      rural |     Total
--------------+----------------------+----------
      Kampala |       324          0 |       324 
    Central 1 |       106        753 |       859 
    Central 2 |        86        831 |       917 
 East Central |       203        747 |       950 
      Eastern |       162        602 |       764 
 Mid Northern |       218        730 |       948 
   North East |        68        273 |       341 
    West Nile |       107        446 |       553 
  Mid Western |       212        482 |       694 
South Western |       213        863 |     1,076 
--------------+----------------------+----------
        Total |     1,699      5,727 |     7,426 


. tab region substrat

           |      substratum
    region |     urban      rural |     Total
-----------+----------------------+----------
   Central |       516      1,584 |     2,100 
   Eastern |       414      1,518 |     1,932 
  Northern |       344      1,280 |     1,624 
   Western |       425      1,345 |     1,770 
-----------+----------------------+----------
     Total |     1,699      5,727 |     7,426 


. * tab strata substrat
. *
. * Geographical |
. *stratificatio |
. *   n variable |
. *       during |
. *     sampling |
. *(ranging from |      substratum
. *1 to 10 sub r |     urban      rural |     Total
. *--------------+----------------------+----------
. *      Kampala |       324          0 |       324 
. *    Central 1 |        79        461 |       540 
. *    Central 2 |       113      1,123 |     1,236 
. * East Central |       203        747 |       950 
. *      Eastern |       162        602 |       764 
. * Mid Northern |       218        730 |       948 
. *   North East |        68        273 |       341 
. *    West Nile |       107        446 |       553 
. *  Mid Western |       212        482 |       694 
. *South Western |       213        863 |     1,076 
. *--------------+----------------------+----------
. *        Total |     1,699      5,727 |     7,426 
. *
. *
. * tab region substrat
. *
. *           |      substratum
. *    region |     urban      rural |     Total
. *-----------+----------------------+----------
. *   Central |       516      1,584 |     2,100 
. *  Eastern |       414      1,518 |     1,932 
. * Northern |       344      1,280 |     1,624 
. *  Western |       425      1,345 |     1,770 
. *-----------+----------------------+----------
. *    Total |     1,699      5,727 |     7,426 
. *
. ***------- Rural-Urban Location
. * I checked and the variable is substrat, coded as 3=rural and 1=urba
> n. I will create a new variable with a toolkit same coding 
. tab substrat,m

 substratum |      Freq.     Percent        Cum.
------------+-----------------------------------
      urban |      1,699       22.88       22.88
      rural |      5,727       77.12      100.00
------------+-----------------------------------
      Total |      7,426      100.00

. gen rural=1 if substrat==3
(1699 missing values generated)

. replace rural=0 if substrat==1
(1699 real changes made)

. 
. tab rural,m

      rural |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,699       22.88       22.88
          1 |      5,727       77.12      100.00
------------+-----------------------------------
      Total |      7,426      100.00

. 
. 
. label define lrural 0 "Urban" 1 "Rural"

. label values rural lrural

. label variable rural "Rural/Urban Location"

. tab rural,m

Rural/Urban |
   Location |      Freq.     Percent        Cum.
------------+-----------------------------------
      Urban |      1,699       22.88       22.88
      Rural |      5,727       77.12      100.00
------------+-----------------------------------
      Total |      7,426      100.00

. 
. ** just to confirm that the rural urban specification was not changed
> , we tabbed again to see if totals are still as before with substrat*
. **
. *tab rural,m
. *
. *Rural/Urban |
. *   Location |      Freq.     Percent        Cum.
. *------------+-----------------------------------
. *      Urban |      1,699       22.88       22.88
. *      Rural |      5,727       77.12      100.00
. *------------+-----------------------------------
. *      Total |      7,426      100.00
. * 
. ***-----Regions used for temporal price index calculations
. * in the 2009 data analysis, we used the traditions regions that are 
> east, cetral, western and northern. these are well presented in varia
> ble region
. 
. tab region,m

     region |      Freq.     Percent        Cum.
------------+-----------------------------------
    Central |      2,100       28.28       28.28
    Eastern |      1,932       26.02       54.30
   Northern |      1,624       21.87       76.16
    Western |      1,770       23.84      100.00
------------+-----------------------------------
      Total |      7,426      100.00

. clonevar reg_tpi = region 

. label variable reg_tpi "Regions used for temporal price index calcula
> tions"

. 
. ***------ Spatial domains (each with its own poverty line)
. * In the Arndt & Simler 2010 paper the spatial domains are a combinai
> son of regions and rural/urban delimitations + the capital
. * city, however in the 2009/10 data urban sections of the north east 
> and western regions were very small to about 100 observations, yet
. ** in 2005 data, the smallest section is the northern urban which has
>  344, households; therefore, we would generate the spatial domains on
>  the 
. ** region, and rural/urban demarcations, however since Kampala is all
>  urban and has 324 households, and is the capital, we shall consider 
> it alone as 
. ** in Mozambique, so we have 9 spatial domains
. tab region rural,m

           | Rural/Urban Location
    region |     Urban      Rural |     Total
-----------+----------------------+----------
   Central |       516      1,584 |     2,100 
   Eastern |       414      1,518 |     1,932 
  Northern |       344      1,280 |     1,624 
   Western |       425      1,345 |     1,770 
-----------+----------------------+----------
     Total |     1,699      5,727 |     7,426 


. tab district rural,m

              | Rural/Urban Location
     district |     Urban      Rural |     Total
--------------+----------------------+----------
    kalangala |         0         19 |        19 
      kampala |       324          0 |       324 
       kiboga |         0         49 |        49 
       luwero |        18        114 |       132 
       masaka |        27        292 |       319 
        mpigi |         0         99 |        99 
      mubende |        18        286 |       304 
       mukono |        30        293 |       323 
  nakasongola |        10         30 |        40 
        rakai |        10        116 |       126 
    sembabule |         0         49 |        49 
      kayunga |        10         59 |        69 
       wakiso |        69        178 |       247 
       bugiri |        19         69 |        88 
        busia |        29         40 |        69 
       iganga |        49        303 |       352 
        jinja |       106         50 |       156 
       kamuli |        20        295 |       315 
    kapchorwa |         0         40 |        40 
      katakwi |        10         33 |        43 
         kumi |        10         69 |        79 
        mbale |        66        295 |       361 
      pallisa |        19         78 |        97 
       soroti |        29         58 |        87 
       tororo |        39         89 |       128 
  kaberamaido |         0          9 |         9 
       mayuge |         9         30 |        39 
      sironko |         9         60 |        69 
     adjumani |        10         20 |        30 
         apac |        20        290 |       310 
         arua |        48        299 |       347 
         gulu |        80        135 |       215 
       kitgum |        30         60 |        90 
       kotido |        10         57 |        67 
         lira |        78        185 |       263 
       moroto |         0         30 |        30 
         moyo |         0         28 |        28 
        nebbi |        49         69 |       118 
nakapiripirit |         9         17 |        26 
        pader |        10         60 |        70 
        yumbe |         0         30 |        30 
    budibugyo |        10         39 |        49 
     bushenyi |        30        298 |       328 
        hoima |        29         60 |        89 
       kabale |        40         79 |       119 
     kabarole |        48         50 |        98 
       kasese |        38         79 |       117 
      kibaale |        18         66 |        84 
       kisoro |        10         40 |        50 
      masindi |        39         68 |       107 
      mbarara |        85        298 |       383 
     ntungamo |        18         69 |        87 
    rukungiri |        10         49 |        59 
     kamwenge |        10         50 |        60 
      kanungu |        20         30 |        50 
     kyenjojo |        20         70 |        90 
--------------+----------------------+----------
        Total |     1,699      5,727 |     7,426 


. gen float spdomain=2 if region==1 & rural==0
(6910 missing values generated)

. replace spdomain=3 if region==1 & rural==1
(1584 real changes made)

. replace spdomain=4 if region==2 & rural==0
(414 real changes made)

. replace spdomain=5 if region==2 & rural==1
(1518 real changes made)

. replace spdomain=6 if region==3 & rural==0
(344 real changes made)

. replace spdomain=7 if region==3 & rural==1
(1280 real changes made)

. replace spdomain=8 if region==4 & rural==0
(425 real changes made)

. replace spdomain=9 if region==4 & rural==1
(1345 real changes made)

. replace spdomain=1 if district==102
(324 real changes made)

. 
. 
. label define lspdomain 1 "Kampala" 2 "Central urban" 3 "Central rural
> " 4 "Eastern urban" 5 "Eastern rural" 6 "Northern urban" 7 "Northern 
> rural" 8 "Western urban" 9 "Western rural" 

. label values spdomain lspdomain

. label variable spdomain "Spatial domains: each with own poverty line 
> (they are 9)"

. 
. tab spdomain rural

       Spatial |
 domains: each |
      with own |
  poverty line | Rural/Urban Location
  (they are 9) |     Urban      Rural |     Total
---------------+----------------------+----------
       Kampala |       324          0 |       324 
 Central urban |       192          0 |       192 
 Central rural |         0      1,584 |     1,584 
 Eastern urban |       414          0 |       414 
 Eastern rural |         0      1,518 |     1,518 
Northern urban |       344          0 |       344 
Northern rural |         0      1,280 |     1,280 
 Western urban |       425          0 |       425 
 Western rural |         0      1,345 |     1,345 
---------------+----------------------+----------
         Total |     1,699      5,727 |     7,426 


. 
. ***-----News; another way to specify variables, is the traditional Ug
> anda regions, North east central and western, represented in region
. clonevar new = region

. label variable new "regions north, east, central and western; other w
> ays to dissagregate poverty lines"
note: label truncated to 80 characters

. rename new news

. 
. ****-------geo1-geo?; other administrative geographical boundariies w
> here a survey is representative is not required as also done in news 
> rural and others
. 
. *** Bootstrap weights: the toolkit requires that this should be=1 for
>  all households and we generate it below
. 
. gen float bswt=1

. label variable bswt "bootstrap weights; and all equal to 1 for all ho
> useholds, as a toolkit requirement"
note: label truncated to 80 characters

.  
. sort hhid

. save "$path/out/hhdata.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdata.dta saved

. save "$path/in/hhdata.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/hhdata.dta saved

. save "$path/work/hhdata.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/hhdata.dta saved

. 
. 
. ************************************************************
. * Table A2: Individual characteristics - demographics
. ************************************************************
. 
. clear

. 
. use "$path/in/hsec2.dta" 

. sort hh

. 
. ***----- Household members
. *According to the enumerator manual of 2005/06, Usual and Regular hou
> sehold members are defined as follows:
. 
. *Usual members are defined as those persons who have been living in t
> he household for 6 months or
. *more during the last 12 months. However, members who have come to st
> ay in the household permanently
. *are to be included as usual members, even though they have lived in 
> this household for less than 6
. *months. Furthermore, children born to usual members on any date duri
> ng the last 12 months will be taken
. *as usual members. Both these categories will be given code "1" or "2
> " depending upon whether they are
. *present or absent on the date of the interview.
. 
. *Regular members refer to those persons who would have been usual mem
> bers of this household, but
. *have been away for more than six months during the last 12 months, f
> or education purposes, search of
. *employment, business transactions etc. and living in boarding school
> s, lodging houses or hostels etc.
. *These categories will be given code "3" or "4" depending upon presen
> ce or absence on the date of the
. *interview. */
. 
. /* 
> * For the purposes of the calculation of a poverty line we'll exclude
>  from the household the members who have left 
> the household permanently or died
> *  We'll keep the members away for more than 6 months but present on 
> the day of the interview
> */
. 
. rename  tid resident

. drop if resident==7
(430 observations deleted)

. 
. ***------ Household ID
. rename hh hhid

. label variable hhid "Household ID"

. 
. ***------ Individual ID
. gen double indid=hhid*100 +  pid

. codebook indid

-----------------------------------------------------------------------
indid                                                       (unlabeled)
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+11,4.153e+11]        units:  1
         unique values:  41797                    missing .:  0/41797

                  mean:   2.5e+11
              std. dev:   1.1e+11

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+11   1.1e+11   2.1e+11   3.1e+11   4.1e
> +11

.         * There are 42,227 different values, and there are 42,227 obs
> ervations in the dataset so indid uniquely identifies
.                 * the individuals
. label variable indid "Individual ID"

. 
. ***------ Sex
. rename  h2q4 sex

. label variable sex "Sex"

. 
. ***------ Age
. rename  h2q9 age

. label variable age "Age in years"

. 
. * In order to have the information on whether the mother resides in t
> he house or not we need the file "hsec3"
. sort indid

. save "$path/in/temp_A2_1.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/temp_A2_1.dta saved

. 
. clear

. use "$path/in/hsec3.dta" 

. 
. ***------ Individual ID
. rename hh hhid

. destring hhid,replace
hhid already numeric; no replace

. gen double indid=hhid*100 +  pid

. label variable indid "Individual ID"

. codebook indid

-----------------------------------------------------------------------
indid                                                     Individual ID
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+11,4.153e+11]        units:  1
         unique values:  39434                    missing .:  0/39434

                  mean:   2.5e+11
              std. dev:   1.1e+11

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+11   1.1e+11   2.1e+11   3.1e+11   4.1e
> +11

.         * There are 39,434 different values, and there are 39,434 obs
> ervations in the dataset so indid uniquely identifies
.                 * the individuals
. 
. ***----- Mother lives in household?
. tab h3q6,m

      is tha |
     natural |
   mother of |
 name living |
  in this hh |      Freq.     Percent        Cum.
-------------+-----------------------------------
         yes |     19,715       49.99       49.99
no but alive |     12,057       30.58       80.57
 no but dead |      7,500       19.02       99.59
no dont know |        102        0.26       99.85
           . |         60        0.15      100.00
-------------+-----------------------------------
       Total |     39,434      100.00

. *There are 60  (ie 0.15 %) missing responses, NOT so bad like for the
>  2009/10 dataset *
. * They have four categories: 1: Yes = 19,715 2: No, Alive = 12,057 3:
>  No, Dead = 7,500 4:No, Don't know = 106. I will group them 
. gen motherhh=1 if h3q6==1 
(19719 missing values generated)

. replace motherhh=0 if h3q6==2 | h3q6==3 | h3q6==4
(19659 real changes made)

. label variable motherhh "Mother lives in hh"

. label define lmoth 0 "No" 1 "Yes"

. label values motherhh lmoth

. 
. keep indid motherhh

. sort indid

. merge 1:1 indid using "$path/in/temp_A2_1.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                         2,389
        from master                        13  (_merge==1)
        from using                      2,376  (_merge==2)

    matched                            39,421  (_merge==3)
    -----------------------------------------

. tab _merge

                 _merge |      Freq.     Percent        Cum.
------------------------+-----------------------------------
        master only (1) |         13        0.03        0.03
         using only (2) |      2,376        5.68        5.71
            matched (3) |     39,421       94.29      100.00
------------------------+-----------------------------------
                  Total |     41,810      100.00

.         * There are some obs coming only from the using data. The exp
> lanation is that Section 3 of the questionnaire 
.         * is administered only to usual and regular household members
> , as is confirmed by the cross tab below
.         tab resident _merge

          what is the |        _merge
   residential status | using onl  matched ( |     Total
----------------------+----------------------+----------
 usual member present |       894     35,682 |    36,576 
  usual member absent |        91      1,900 |     1,991 
regular member presen |        17        427 |       444 
regular member absent |        66      1,379 |     1,445 
                guest |     1,068         22 |     1,090 
usual member who left |       240         11 |       251 
----------------------+----------------------+----------
                Total |     2,376     39,421 |    41,797 


.         * We leave the variable as is, with additional missing values
>  for the variable "motherhh".
. drop _merge

. 
. keep hhid indid sex age motherhh

. save "$path/out/indata.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/indata.dta saved

. save "$path/in/indata.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/indata.dta saved

. save "$path/work/indata.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/indata.dta saved

. 
. **********************************************
. * Table A3: Calorie content of food items
. **********************************************
. * since the food products were the same across the surveys, we compil
> ed the calorie content and edible portion in an excel file then conve
> rted that file into a STATA file
. * The excel file (with more detailed information, inculding the sourc
> es) is in the "in" folder
. 
. clear

. use "$path/in/foodcomp_uganda_HHsurvey2005.dta", replace

. 
. * Since they did not include edible portions in the file I assume tha
> t the calorie per gram is only for the edible portion.
. * I will therefore compute calperg that way
. destring kcal_100g edible, replace
kcal_100g already numeric; no replace
edible already numeric; no replace

. gen double calperg=((kcal_100g*edible)/100)/100

. keep product descript calperg

. label variable product "Food product code: numerical"

. label variable descript "Product Description: incl. product code in t
> he beginning"

. label variable calperg "Calorie content of food product: calories per
>  gram"

. destring product, replace
product has all characters numeric; replaced as int

. sort product

. save "$path/out/calperg.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/calperg.dta saved

. save "$path/in/calperg.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/calperg.dta saved

. save "$path/work/calperg.dta",replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/calperg.dta saved

. 
. clear

. *********************************************************************
> ******
. * Table A4: Amount and Quantity of food transactoin - Transaction lev
> el
. *********************************************************************
> ******
. *use "$path/in/hsec1b.dta"
. *sort hh
. *** I had used the hsec1b.dta file here just to carry along the distr
> ict variable that would enable me
. *** the problem associated with the yet very low figures of poverty e
> stimates
. *save "$path/in/hsec1b.dta", replace
. 
. clear

. 
. use "$path/in/hsec14a.dta"

. sort hh

. *merge m:1 hh using "$path/in/hsec1b.dta"
. *tab _m
. *drop _m 
. rename hh hhid

. la var hhid "household id"

. ** we drop alcoholic and tobacco as these were not considered basic i
> n foods generally and by GAPP, these included beer-152, other alcohol
> ic dricns-153
. ** cigarettes-155, other tobacco-156 and beer taken in restaurants-15
> 9, just like we did in the 2009 poverty calculations
. drop if inlist( h14aq2 ,152,153,155,156,159)
(3072 observations deleted)

. duplicates report  hhid h14aq2

Duplicates in terms of hhid h14aq2

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        92192             0
--------------------------------------

. duplicates list  hhid h14aq2

Duplicates in terms of hhid h14aq2

(0 observations are duplicates)

. codebook hhid

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7420                     missing .:  0/92192

                  mean:   2.4e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

. egen quantity=rowtotal( h14aq4 h14aq6 h14aq8 h14aq10)

.  
. la var quantity "quantity of food consumed by the household including
>  purchases, at home, away from home & kind"
note: label truncated to 80 characters

. ** these quantities and values are collected by UBOS at a 7 days basi
> s, thus we divide by 7 to get the daily figures as a requirement by G
> APP 
. gen quantityd = quantity/7

. drop quantity h14aq10 h14aq8 h14aq6 h14aq4

. la var quantityd "daily household food consumption"

. egen value=rowtotal ( h14aq5 h14aq7 h14aq9 h14aq11 )

. la var value "household food consumption in seven days"

. gen valuez = value/7 

. la var valuez "daily value of food consumed by the household"

. *replace valuez = valuez*13 if district==102
. rename quantityd quantityz

. drop value h14aq11 h14aq9 h14aq7 h14aq5 h14aq13 h14aq12

. gen unit = 1

. la var unit "set equal to one since all observations are converted in
> to kg"

. gen food_cat = 1

. la var food_cat "food category equals 1, if product is food and 0 if 
> non food"

. 
. des hhid

              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
hhid            double %10.0g                 household id

. des food_cat

              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
food_cat        float  %9.0g                  food category equals 1,
                                                if product is food and
                                                0 if non food

. des valuez

              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
valuez          float  %9.0g                  daily value of food
                                                consumed by the
                                                household

. rename h14aq2 product

. format %10.0g product

. format %9.0g hhid

. format %10.0g unit

. la var product "Food product code: numerical"

. destring product, replace
product already numeric; no replace

. save "$path/in/household_table4.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/household_table4.dta saved

. save "$path/out/household_table4.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/household_table4.dta saved

. save "$path/work/household_table4.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/household_table4.dta saved

. set more off

. count
92192

. sort product h14aq3

. 
. ** to the quantities of the food in standard unite, the Kilograms, a 
> file called conversion factors was generated in excel with details
. ** of the sources of information, located in the "in" folder named "u
> cf_uganda_UNSH2005.xls" and a STATA extract of both excel and STATA u
> se named
. ** "conversionfactors.xls AND .dta" is also in the in folder for use 
> below. The file has equivalents of local units into kilograms and 
. ** we need it to convert the local units used in food consumption bun
> dles into kilograms. Since the foods and the local units were the sam
> e, this file is 
. ** similar to the one used for the 2009 data
. merge m:1 product h14aq3 using  "$path/in/conversionfactors.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                         7,590
        from master                     7,457  (_merge==1)
        from using                        133  (_merge==2)

    matched                            84,735  (_merge==3)
    -----------------------------------------

. tab _m

                 _merge |      Freq.     Percent        Cum.
------------------------+-----------------------------------
        master only (1) |      7,457        8.08        8.08
         using only (2) |        133        0.14        8.22
            matched (3) |     84,735       91.78      100.00
------------------------+-----------------------------------
                  Total |     92,325      100.00

. drop _m

. ** I had to destring all the variables of the "conversionfactors.dta"
>  file to match type with that of "--table4.dta" to enable the merge s
> uccessful
. save "$path/in/household_table4cf.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/household_table4cf.dta saved

. save "$path/out/household_table4cf.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/household_table4cf.dta saved

. save "$path/work/household_table4cf.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/household_table4cf.dta saved

. gen quantity = quantityz* convfactor
(7590 missing values generated)

. 
. la var quantity "daily quantity consumed in Kgs per household"

. la var value  "daily value of consumption in UGX per per household"

. 
. drop convfactor

. sort hhid

. label drop _all

. destring hhid, replace
hhid already numeric; no replace

. 
. save "$path/out/cons_cod_trans.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/cons_cod_trans.dta saved

. save "$path/in/cons_cod_trans.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/cons_cod_trans.dta saved

. save "$path/work/cons_cod_trans.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/cons_cod_trans.dta saved

. 
. **   Generating Standard Table 5: TOTAL AMOUNT AND QUANTITY OF PRODUC
> TS: Food as well as non food
. **
. *********************************************************************
> **************************
. **  DATA IN:       hsec4.dta : On Education costs, column 13f which h
> as all total school expenses, it is on 365 dayss basis
. **                 hsec5.dta : On Medical Expenditure, column 10 and 
> 11, on 30 days basis
. **                 hsec12a.dta : On assets Expenditure, column h8q5 o
> n total estimated present value, considering 10% value used per 365 d
> ays basis
. **                 hsec14b.dta: On non-durables and frequently purcha
> sed items e.g imputed rent, electricity, soap etc, on 30 days basis, 
> columns 5,7 & 9 for value
. **                 hsec14c.dta: On semi-durable goods and services, c
> olumn 3, 4 & 5, on 365 days basis for value
. **                 hsec14d.dta:     On Non-consumption expenses like 
> taxes, remitances away, subscriptions etc, on 365 days basis, colum 3
. **
. **  DATA OUT: cons_cod.dta
. *********************************************************************
> *********************************************************************
> ************
. clear

. use "$path/in/hsec4.dta"

. 
. rename hh hhid

. codebook hhid

-----------------------------------------------------------------------
hhid                                                        (unlabeled)
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7423                     missing .:  0/32387

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

. keep hhid h4q10f

. sort hhid

. ** since total education expenses were clooected in h4q10f and since 
> is at yearly basis, we divided it by 365 to get daily expenses on edu
> cation
. gen educationd = h4q10f/365
(16472 missing values generated)

. la var educationd "daily household expense on education"

. drop h4q10f

. save "$path/out/hhdeducationexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdeducationexp.dta saved

. 
. clear

. 
. use "$path/in/hsec5.dta"

. 
. des

Contains data from C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\U
> NHS_2005\GAPP2/in/hsec5.dta
  obs:        39,313                          
 vars:            17                          3 Nov 2006 17:33
 size:     1,375,955                          
-----------------------------------------------------------------------
              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
hh              double %10.0g                 
pid             byte   %8.0g                  person id
h5q2            byte   %8.0g       H5Q2       during the past 30days
                                                did you suffer from any
                                                illnes or inj
h5q3            byte   %8.0g                  for how many days did you
                                                suffer due to illness
                                                or injury du
h5q4            byte   %8.0g                  for how many days did you
                                                have to stop doing your
                                                usual acti
h5q5a           byte   %36.0g      H5Q5A      can you describe the
                                                first symptom that you
                                                primarily suffer
h5q5b           byte   %36.0g      H5Q5B      can you describe the
                                                second symptom that you
                                                primarily suffe
h5q5c           byte   %36.0g      H5Q5C      can you describe the
                                                third symptom that you
                                                primarily suffer
h5q6            byte   %8.0g       H5Q6       was any one consulted eg
                                                a doctor,
                                                nurse,pharmacist or
                                                tradi
h5q7            byte   %31.0g      H5Q7       why was no one consulted
                                                for the major illness
h5q8            byte   %24.0g      H5Q8       where did you go for
                                                first consultation
                                                during the past 30da
h5q9            float  %9.0g                  distance to the place
                                                where this treatment
                                                was sought for in
h5q10           long   %12.0g                 what was the cost of this
                                                consultation including
                                                any medicin
h5q11           long   %12.0g                 what was the cost of
                                                transportation to the
                                                place where this
h5q12           byte   %8.0g       H5Q12      during the past 6 months
                                                including the past
                                                30days did you s
h5q13           int    %8.0g                  for how many days in
                                                total did you have to
                                                stop doing your y
h5q14           int    %8.0g                  for how many days did you
                                                have to stop doing your
                                                usual acti
-----------------------------------------------------------------------
Sorted by:  

. rename hh hhid

. sort hhid

. keep hhid h5q10 h5q11

. egen medicalexp = rowtotal ( h5q10 h5q11)

. gen medicalexpd = medicalexp/30

. la var medicalexpd "household daily expenditure"

. drop h5q10 h5q11 medicalexp

. save "$path/out/hhdmedicalexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdmedicalexp.dta saved

. 
. clear

. set more off 

. use "$path/in/hsec12a.dta"

. des

Contains data from C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\U
> NHS_2005\GAPP2/in/hsec12a.dta
  obs:       162,674                          
 vars:             9                          3 Nov 2006 17:33
 size:     3,741,502                          
-----------------------------------------------------------------------
              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
hh              double %10.0g                 
h12aq2          int    %34.0g      H12AQ2     asset code
h12aq3          byte   %8.0g       H12AQ3     does any member of your
                                                hh own (asset) at
                                                present
h12aq4          byte   %8.0g                  how many do your hh hold
                                                at present.number
h12aq5          long   %12.0g                 how many do your hh hold
                                                at present.total
                                                estimated value
h12aq6          byte   %8.0g       H12AQ6     did any member of your hh
                                                own (asset) 12months
                                                ago
h12aq7          byte   %8.0g                  how many did your hh own
                                                12months ago.number
h12aq8          long   %12.0g                 how many did your hh own
                                                12months ago.total
                                                estimated value
h12aq9          byte   %13.0g      H12AQ9     compared with 2001 would
                                                you say that your
                                                (...)is
-----------------------------------------------------------------------
Sorted by:  

. save "$path/out/hhddurables.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhddurables.dta saved

. keep if inlist( h12aq2 ,010,011,012)
(140519 observations deleted)

.  
. gen assetvalue = h12aq5
(18877 missing values generated)

. 
. *********************************************************************
> *****************************************
. ** i took land, bicycle, motor cycle and other transport equipment-01
> 2, that in 2009 were motor vehicles, as durables and assumed that a y
> ear, the household can use 10% of these assests. there was no land in
>  2005 assets
. ** house not treated as an asset as the toolkit takes care of imputed
>  rent
. *********************************************************************
> ***************************************************
. gen dassetvalue = (assetvalue*0.01)/365
(18877 missing values generated)

. la var dassetvalue "household daily durables expenditure"

. rename hh hhid

. sort hhid

. save "$path/out/hhddurablesexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhddurablesexp.dta saved

. 
. clear

. 
. use "$path/in/hsec12a.dta"

. save "$path/out/hhnondurables.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhnondurables.dta saved

. rename hh hhid

. drop if inlist(  h12aq2 ,010,011,012 ,001)
(29572 observations deleted)

. gen nondurablevalue = h12aq5
(87352 missing values generated)

. **h12aq4 multiple has been dropped since UBOS had recorded h12aq5 as 
> total estimated value in Ush and also discounted them by 10% to get r
> ough value used per year
. *** we considered other buildings-002, furniture-003, Bednets-005, Hh
>  appliances as Kettle,flat iron-006, electronics as tv,radio-007, gen
> erators-008, solar-panel-009
. *** , jewelry&watches-013, mobilephone-014, otherassets as lawn mores
> -015, Enterprise assests like; home-101, ploughs-102, wheelbarrows-10
> 4, pangas-103
. **  others-105, 106 and 107 and financial assets-201, NOTE: figures a
> re codes in data set
. la var nondurablevalue "household daily non-durables expenditure"

. sort hhid

. gen dnondurables = (nondurablevalue*0.01)/365
(87352 missing values generated)

. la var dnondurables "household daily non-durables expenditure"

. save "$path/out/hhdnondurablesexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdnondurablesexp.dta saved

. 
. clear

. 
. use "$path/in/hsec14b.dta"

. des

Contains data from C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\U
> NHS_2005\GAPP2/in/hsec14b.dta
  obs:        80,022                          
 vars:            10                          3 Nov 2006 17:33
 size:     3,440,946                          
-----------------------------------------------------------------------
              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
hh              double %10.0g                 
h14bq2          int    %54.0g      H14BQ2     code
h14bq3          byte   %34.0g      H14BQ3     unit of quantity
h14bq4          float  %9.0g                  purchase quantity
h14bq5          long   %12.0g                 purchase value
h14bq6          float  %9.0g                  home produced quantity
h14bq7          long   %12.0g                 home produced value
h14bq8          float  %9.0g                  received in kind quantity
h14bq9          long   %12.0g                 received in kind value
h14bq10         double %9.0g                  unit price
-----------------------------------------------------------------------
Sorted by:  

. rename hh hhid

. sort hhid

. ** here we considered rent of rented house-301, imputed rent of own h
> ouse-302, imputed rent of free given house-303, repair expenses-304, 
> water-305 
. ** electricity-306, generator fuels-307, parafin-308, charcoal-309, f
> irewood-310, matches-451, washing soap-452, bathing soap-453, toothpa
> ste-454, 
. ** taxifares-463, and expenditure on phones not owned-468
. ** and we dropped others-311, cosmetics-455, handbags-456, batteries-
> drycells-457, newspapers-458, others-459, tires-461, petrol-462, 
. *** bus fares-464, bodaboda fare-465, stamps/envelops-466, mobilephon
> eairtime-467 and others-469,health fees as consultation-501, medicine
> -502
. *** hospitalcharges-503, traditionaldoctors-504, others-509 since med
> ical expenses were cosidered in section 5, sports/theater-701,
. **  drycleaning-702, houseboys-703, barbers&beauty shops-704 and lodg
> ing-705. THESE HAVE BEEN CONSIDERED NON BASIC
. 
. drop if inlist( h14bq2 ,311,455,456,457,458,459,461,462,464,465,466,4
> 67,469,501,502,503,504,509,701,702,703,704,705)
(26166 observations deleted)

.  
. egen hhfrequents = rowtotal ( h14bq5 h14bq7 h14bq9)

. gen dhhfrequents = hhfrequents/30

. la var dhhfrequents "daily household expenditure on frequently bought
>  commodities"

. 
. save "$path/out/hhdfrequentsexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdfrequentsexp.dta saved

. 
. clear

. 
. *********************************************************************
> **********************
. **   in considering semi durable goods and services, the value of tho
> se services and goods recieved in kind, column 5 of hsec14c.dta has b
> een excluded
. **   just as in kind food consumptions were eliminated in table 4 as 
> per the GAPP guidelines, These have also been discounted by 10% usage
>  per year
. *********************************************************************
> *********************************************************************
> *********
. 
. use "$path/in/hsec14c.dta"

. save "$path/out/hhsemidurables.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhsemidurables.dta saved

. des

Contains data from C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\U
> NHS_2005\GAPP2/out/hhsemidurables.dta
  obs:        68,152                          
 vars:             5                          9 Jul 2013 11:07
 size:     1,499,344                          
-----------------------------------------------------------------------
              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
hh              double %10.0g                 
h14cq2          int    %37.0g      H14CQ2     code
h14cq3          long   %12.0g                 purchases value
h14cq4          long   %12.0g                 consumption out of
                                                hh/enterprise stock
h14cq5          long   %12.0g                 value received in kind
-----------------------------------------------------------------------
Sorted by:  

. sort hh

. rename hh hhid

. ** we have considered the following men clothing-201, womenclothing-2
> 02, childrenclothing-203, men footware-221, women footware-222, child
> ren footware-223
. ** bedding mattress-404, blankets-405, charcoal/parafin stoves-422, p
> lastic plates and tumblers-442
. ** and dropped other clothing-209, tailoring materials-210, other foo
> tware-229, furniture items-401, carpets-402, curtains&bedsheets-403, 
> others-409
. ** kettles-421, tv&radio-423, byclcles-424, radio-425, motors-426, mo
> torcycles-427,computers-428, phone handsets-429, others-430, jewelry&
> watches-431, 
. ** glass/table ware of codes 441-449, education cost (601-609) as edu
> cation done in section 4, and others like functions & premiums (801-8
> 09)
. ** as these have been consideered NON BASIC
. drop if inlist( h14cq2 ,209,210,229,401,402,403,409,421,423,424,425,4
> 26,427,428,429,430,431,441,443,444,445,449,601,602,603,604,609,801,80
> 2,803)
(39978 observations deleted)

. egen hhsemidurables = rowtotal ( h14cq3 h14cq4)

. sort hhid

. gen hhdsemidurs = (hhsemidurables*0.01)/365

. la var hhdsemidurs "household daily semi durables goods and seervices
>  expenses"

. drop hhsemidurables

. save "$path/out/hhdsemidurablesexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdsemidurablesexp.dta saved

. 
. clear

. 
. use "$path/in/hsec14d.dta"

. save "$path/in/hhnonconsmpexptaxes.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/hhnonconsmpexptaxes.dta saved

. sort hh

. rename hh hhid

. ** we only considered graduated tax-904, that may cause arrest if not
>  paid and it used to be per head paid to local government annually
. ** and dropped income tax-901, property tax-902, user fees-903, socia
> l security payments-905, remmitances-906, funerals-907 and others-909
. drop if inlist( h14dq2 ,901,902,903,905,906,907,909)
(9066 observations deleted)

. gen hhdnonconsumpexp = h14dq3/365
(2 missing values generated)

. la var hhdnonconsumpexp "hh daily expenditure on taxes, contributions
> , donations, duties, etc"

. sort hhid

. save "$path/out/hhdnonconsumpexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdnonconsumpexp.dta saved

. clear

. *********************************************************************
> *********
. ** after generating all daily non food total household expenditures o
> f various considered items, then we start merging these  seven hhd---
>  prefixed files, and ending with sufix exp to get all non food hh dai
> ly expenditure
. **
. *********************************************************************
> *************************
. 
. 
. use "$path/out/hhdeducationexp.dta", clear

. collapse (sum) educationd , by(hhid)

. sort hhid

. save "$path/out/hhdeducationexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdeducationexp.dta saved

. 
. use "$path/out/hhdmedicalexp.dta", clear

. collapse (sum) medicalexpd , by(hhid)

. sort hhid

. save "$path/out/hhdmedicalexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdmedicalexp.dta saved

. 
. use "$path/out/hhdeducationexp.dta", clear

. merge 1:1 hhid using "$path/out/hhdmedicalexp.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                            10
        from master                         8  (_merge==1)
        from using                          2  (_merge==2)

    matched                             7,415  (_merge==3)
    -----------------------------------------

. drop _merge

. sort hhid

. save "$path/out/hhdeduc&medicex.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdeduc&medicex.dta saved

. 
. 
. use "$path/out/hhddurablesexp.dta"

. collapse (sum) dassetvalue , by(hhid)

. sort hhid

. save "$path/out/hhddurablesexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhddurablesexp.dta saved

. 
. use "$path/out/hhdeduc&medicex.dta"

. merge 1:1 hhid using "$path/out/hhddurablesexp.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                             7
        from master                         7  (_merge==1)
        from using                          0  (_merge==2)

    matched                             7,418  (_merge==3)
    -----------------------------------------

. drop _merge

. sort hhid

. save "$path/out/hhdeduc&medic&durabex.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdeduc&medic&durabex.dta saved

. 
. use "$path/out/hhdnondurablesexp.dta"

. collapse (sum) dnondurables , by(hhid)

. sort hhid

. save "$path/out/hhdnondurablesexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdnondurablesexp.dta saved

. 
. use "$path/out/hhdeduc&medic&durabex.dta"

. merge 1:1 hhid using "$path/out/hhdnondurablesexp.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                             5
        from master                         5  (_merge==1)
        from using                          0  (_merge==2)

    matched                             7,420  (_merge==3)
    -----------------------------------------

. drop _merge

. sort hhid

. save "$path/out/hhdeduc&medic&durab&nondurabex.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdeduc&medic&durab&nondurabex.dta saved

. 
. 
. 
. use "$path/out/hhdfrequentsexp.dta"

. collapse (sum) dhhfrequents , by(hhid)

. sort hhid

. save "$path/out/hhdfrequentsexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdfrequentsexp.dta saved

. 
. use "$path/out/hhdeduc&medic&durab&nondurabex.dta"

. merge 1:1 hhid using "$path/out/hhdfrequentsexp.dta" 

    Result                           # of obs.
    -----------------------------------------
    not matched                             1
        from master                         1  (_merge==1)
        from using                          0  (_merge==2)

    matched                             7,424  (_merge==3)
    -----------------------------------------

. drop _merge

. sort hhid

. save "$path/out/hhdeduc&medic&durab&nondurab&freqsex.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdeduc&medic&durab&nondurab&freqsex.dta saved

. 
. use "$path/out/hhdsemidurablesexp.dta"

. collapse (sum) hhdsemidurs , by(hhid)

. sort hhid

. save "$path/out/hhdsemidurablesexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdsemidurablesexp.dta saved

. 
. use "$path/out/hhdeduc&medic&durab&nondurab&freqsex.dta"

. merge 1:1 hhid using "$path/out/hhdsemidurablesexp.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           438
        from master                       438  (_merge==1)
        from using                          0  (_merge==2)

    matched                             6,987  (_merge==3)
    -----------------------------------------

. drop _merge

. replace hhdsemidurs=0 if hhdsemidurs==.
(438 real changes made)

. sort hhid

. save "$path/out/hhdeduc&medic&durab&nondurab&freqs&semidurabex.dta", 
> replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdeduc&medic&durab&nondurab&freqs&semidurabex.dta saved

. 
. use "$path/out/hhdnonconsumpexp.dta"

. collapse (sum) hhdnonconsumpexp , by(hhid)

. sort hhid

. save "$path/out/hhdnonconsumpexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdnonconsumpexp.dta saved

. 
. use "$path/out/hhdeduc&medic&durab&nondurab&freqs&semidurabex.dta"

. merge 1:1 hhid using "$path/out/hhdnonconsumpexp.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                         5,272
        from master                     5,272  (_merge==1)
        from using                          0  (_merge==2)

    matched                             2,153  (_merge==3)
    -----------------------------------------

. drop _merge

. replace hhdnonconsumpexp=0 if hhdnonconsumpexp==.
(5272 real changes made)

. sort hhid

. save "$path/out/hhdeduc&medic&durab&nondurab&freqs&semidurab&nonconsm
> pex.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhdeduc&medic&durab&nondurab&freqs&semidurab&nonconsmpex.dta sav
> ed

. 
. gen hhnonfoodexp =  educationd+medicalexpd+dassetvalue+dnondurables+d
> hhfrequents+hhdsemidurs+hhdnonconsumpexp
(17 missing values generated)

. la var hhnonfoodexp "household total non food expenditure"

. keep hhid hhnonfoodexp

. 
. 
. gen product = 0

. la var product "product code equal to 1 for food and 0 for non food"

. gen food_cat = 0

. la var food_cat "food product or not equals 1 for foods and 0 for non
>  foods"

. gen prod_cat = 2

. la var prod_cat "COICOP product categories, 2 for all non food"

. replace product = 2 if product==0
(7425 real changes made)

. replace food_cat = 2 if food_cat==0
(7425 real changes made)

. gen descript = 2

. la var descript "product description including product code but equal
> s 2 for all non-foods"

. save "$path/out/hhtotalnonfoodexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhtotalnonfoodexp.dta saved

. label define descrip 2 " non food", add

. label values descript descrip

. label define descrip 1 " food", add

. replace descript = 1 in 6
(1 real change made)

. replace descript = 2 in 6
(1 real change made)

. sort hhid

. destring hhid, replace
hhid already numeric; no replace

. save "$path/out/hhtotalnonfoodexp.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/hhtotalnonfoodexp.dta saved

. 
. use "$path/out/hhtotalnonfoodexp.dta"

. append using  "$path/out/cons_cod_trans.dta"

. 
. 
. rename quantityz quantityd

. egen cod_hh_nom = rowtotal( hhnonfoodexp valuez)

. la var cod_hh_nom "total household daily expenditure"

. la var quantityd "housedhold daily quantity of food consumed in Kgs"

. drop unit

. drop hhnonfoodexp

. sort hhid

. replace product = 999 if product==2
(7425 real changes made)

. la var product "product code is 999, if product is non food"

. replace prod_cat = 1 if prod_cat==.
(92325 real changes made)

. drop h14aq3

. replace descript=1 if descript==.
(92325 real changes made)

. label drop _all

. save "$path/out/cons_cod.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /out/cons_cod.dta saved

. save "$path/work/cons_cod.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/cons_cod.dta saved

. save "$path/in/cons_cod.dta", replace
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /in/cons_cod.dta saved

. 
. 
. 
end of do-file

.         
. /*
>         * All kind of raw expenditure is handled: daily, own and mont
> hly, rent and use value, education etc.
>         do "$path/new/030_rawdata.do"
> 
>         * Data set specific changes to each processed raw data set ta
> kes place here
>         do "$path/new/040_specifities.do"
> 
>         * These files summarizes and checks the data. But no temporal
>  deflation done here yet
>         do "$path/new/050_consump_nom.do"
> 
>         * Bring in data on food product's calories per gram
>         do "$path/new/060_calperg.do"
> */
. *********************************************************************
> *;
. *********************************************************************
> *;
. 
.                                 do "$path/new/070_calpp.do"          
>                    /* Calories per person in spatial domains*/

. *global path "C:/Users/Templeton/Desktop/GAPP/GAPP-UGANDA-HARUNA"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/070_calpp.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/070_calpp.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:12

. clear

. set more off

. #delimit ;
delimiter now ;
. *global fert_rate "fert_rate";
. *********************************************************************
> **
> * 070_calpp.do          (start)
> *
> * Purpose: Determine calories required for each person per domain per
>  day.
> *********************************************************************
> **;
. /*
> This file uses:
>         work/indata.dta
>         work/hhdata.dta
> 
> This file creates:
>         work/calpp.dta
> */
> 
> *--------------------------------------------------------------------
> -----*
> * Include fertility rates from csv-file
> *--------------------------------------------------------------------
> -----*;
. clear;

. insheet sex rural age fert_rate using "$path/in/fert_rate_Uganda.csv"
> ;
(4 vars, 96 obs)

. ***************************************** check for Ugandan fertility
>  rates *************************************
> *********************************************************************
> ****************************************;
. sort sex rural age;

. tempfile fert_rate;

. save `fert_rate';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. list;

     +------------------------------+
     | sex   rural   age   fert_r~e |
     |------------------------------|
  1. |   2       0    12       .008 |
  2. |   2       0    13       .008 |
  3. |   2       0    14       .008 |
  4. |   2       0    15       .134 |
  5. |   2       0    16       .134 |
     |------------------------------|
  6. |   2       0    17       .134 |
  7. |   2       0    18       .134 |
  8. |   2       0    19       .134 |
  9. |   2       0    20       .313 |
 10. |   2       0    21       .313 |
     |------------------------------|
 11. |   2       0    22       .313 |
 12. |   2       0    23       .313 |
 13. |   2       0    24       .313 |
 14. |   2       0    25       .291 |
 15. |   2       0    26       .291 |
     |------------------------------|
 16. |   2       0    27       .291 |
 17. |   2       0    28       .291 |
 18. |   2       0    29       .291 |
 19. |   2       0    30       .232 |
 20. |   2       0    31       .232 |
     |------------------------------|
 21. |   2       0    32       .232 |
 22. |   2       0    33       .232 |
 23. |   2       0    34       .232 |
 24. |   2       0    35       .172 |
 25. |   2       0    36       .172 |
     |------------------------------|
 26. |   2       0    37       .172 |
 27. |   2       0    38       .172 |
 28. |   2       0    39       .172 |
 29. |   2       0    40       .074 |
 30. |   2       0    41       .074 |
     |------------------------------|
 31. |   2       0    42       .074 |
 32. |   2       0    43       .074 |
 33. |   2       0    44       .074 |
 34. |   2       0    45       .023 |
 35. |   2       0    46       .023 |
     |------------------------------|
 36. |   2       0    47       .023 |
 37. |   2       0    48       .023 |
 38. |   2       0    49       .023 |
 39. |   2       0    50       .006 |
 40. |   2       0    51       .006 |
     |------------------------------|
 41. |   2       0    52       .006 |
 42. |   2       0    53       .006 |
 43. |   2       0    54       .006 |
 44. |   2       0    55       .006 |
 45. |   2       0    56       .006 |
     |------------------------------|
 46. |   2       0    57       .006 |
 47. |   2       0    58       .006 |
 48. |   2       0    59       .006 |
 49. |   2       1    12       .008 |
 50. |   2       1    13       .008 |
     |------------------------------|
 51. |   2       1    14       .008 |
 52. |   2       1    15       .134 |
 53. |   2       1    16       .134 |
 54. |   2       1    17       .134 |
 55. |   2       1    18       .134 |
     |------------------------------|
 56. |   2       1    19       .134 |
 57. |   2       1    20       .313 |
 58. |   2       1    21       .313 |
 59. |   2       1    22       .313 |
 60. |   2       1    23       .313 |
     |------------------------------|
 61. |   2       1    24       .313 |
 62. |   2       1    25       .291 |
 63. |   2       1    26       .291 |
 64. |   2       1    27       .291 |
 65. |   2       1    28       .291 |
     |------------------------------|
 66. |   2       1    29       .291 |
 67. |   2       1    30       .232 |
 68. |   2       1    31       .232 |
 69. |   2       1    32       .232 |
 70. |   2       1    33       .232 |
     |------------------------------|
 71. |   2       1    34       .232 |
 72. |   2       1    35       .172 |
 73. |   2       1    36       .172 |
 74. |   2       1    37       .172 |
 75. |   2       1    38       .172 |
     |------------------------------|
 76. |   2       1    39       .172 |
 77. |   2       1    40       .074 |
 78. |   2       1    41       .074 |
 79. |   2       1    42       .074 |
 80. |   2       1    43       .074 |
     |------------------------------|
 81. |   2       1    44       .074 |
 82. |   2       1    45       .023 |
 83. |   2       1    46       .023 |
 84. |   2       1    47       .023 |
 85. |   2       1    48       .023 |
     |------------------------------|
 86. |   2       1    49       .023 |
 87. |   2       1    50       .006 |
 88. |   2       1    51       .006 |
 89. |   2       1    52       .006 |
 90. |   2       1    53       .006 |
     |------------------------------|
 91. |   2       1    54       .006 |
 92. |   2       1    55       .006 |
 93. |   2       1    56       .006 |
 94. |   2       1    57       .006 |
 95. |   2       1    58       .006 |
     |------------------------------|
 96. |   2       1    59       .006 |
     +------------------------------+

. *--------------------------------------------------------------------
> -----*
> * Now do the calorie needs for individuals
> *--------------------------------------------------------------------
> -----*;
. use "$path/work/indata.dta";

. * CA bootstrap modification;
. sort hhid;

. merge hhid using "$path/work/hhdata.dta";
variable hhid does not uniquely identify observations in the master
    data

. tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         13        0.03        0.03
          3 |     41,797       99.97      100.00
------------+-----------------------------------
      Total |     41,810      100.00

.  drop _m;

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       indid |     41810    2.50e+11    1.12e+11   1.01e+11   4.15e+11
    motherhh |     39374    .5007111    .5000058          0          1
        hhid |     41797    2.50e+09    1.12e+09   1.01e+09   4.15e+09
         sex |     41797    .5243199    .5348987          0          2
         age |     40470    19.68325    17.41645          0        110
-------------+--------------------------------------------------------
        comm |     41769    2.50e+07    1.12e+07   1.01e+07   4.15e+07
      region |     41797    2.432974    1.120305          1          4
    district |     41797    249.8793     112.023        101        415
    substrat |     41797    2.569826    .8217755          1          3
         psu |     41797    12.52817    9.868414          1         39
-------------+--------------------------------------------------------
        snum |     41797    6.278202    3.161775          1         17
       vtype |     39961    1.528741    .4993299          1          3
      gpsnsa |     41769    132836.4    135310.7         34    3400000
      gpsnsb |     41764     3143840     1709632       4522   8.03e+07
    inidpcmp |     41797    1.962414    .1901961          1          2
-------------+--------------------------------------------------------
    daysurve |     41712    17.22658    6.202464          1         31
    monsurve |     41797     6.36182    3.512427          1         12
     yrsurve |     41797     2005.36    .4799714       2005       2006
       scode |     39542    42.14665    21.97753          3         98
     daychks |     39328    17.55452    6.340026          1         72
-------------+--------------------------------------------------------
     monchks |     39335    5.222652    4.288041          1         30
    yearchks |     39378    2005.734    8.524417       2005       3200
    editcode |     16167    47.80095    25.98742          1         89
     dayedit |     16064    18.29071    6.849501          1         72
     monedit |     16096    9.424826    3.752378          1         30
-------------+--------------------------------------------------------
    yearedit |     16111    2005.342     13.3177       2005       3200
     strthrs |     36529    10.62167    2.092694          6         61
     strtmin |     36506    25.95088    17.61905          0         59
    respcode |     41783    1.007659    .0980336          1          8
    our_resp |     41684    1.461928    .5003317          1          3
-------------+--------------------------------------------------------
     entrant |     40995    12.27838    5.949383          1         19
    dayentry |     40995    15.56104    8.096496          1         31
    monentry |     40995    3.814026    2.044584          0         12
     yrentry |     40995    2006.099    22.31054       2005       5200
    verifier |       954    6.873166      3.6039          1         15
-------------+--------------------------------------------------------
    dayverif |       846    15.91962    8.499811          2         30
    monverif |       846    4.166667    2.578817          1         11
    yrverify |       892    2005.885    .3197686       2005       2006
      hhsize |     41748    7.637276    3.687256          1         33
    hhweight |     41797    701.3982    328.8969      60.97    4404.13
-------------+--------------------------------------------------------
    survquar |     41797    2.566428     1.08261          1          4
     survmon |     41797    6.680408    3.333466          1         12
      strata |     41797    5.707898    2.797051          1         10
       rural |     41797    .7849128    .4108877          0          1
     reg_tpi |     41797    2.432974    1.120305          1          4
-------------+--------------------------------------------------------
    spdomain |     41797    5.614398    2.340276          1          9
        news |     41797    2.432974    1.120305          1          4
        bswt |     41797           1           0          1          1

. * Include fertility rates;
. sort sex rural age;

. merge sex rural age using `fert_rate';
variables sex rural age do not uniquely identify observations in the
    master data

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       indid |     41810    2.50e+11    1.12e+11   1.01e+11   4.15e+11
    motherhh |     39374    .5007111    .5000058          0          1
        hhid |     41797    2.50e+09    1.12e+09   1.01e+09   4.15e+09
         sex |     41889    .5275609    .5387583          0          2
         age |     40562    19.72023    17.42655          0        110
-------------+--------------------------------------------------------
        comm |     41769    2.50e+07    1.12e+07   1.01e+07   4.15e+07
      region |     41797    2.432974    1.120305          1          4
    district |     41797    249.8793     112.023        101        415
    substrat |     41797    2.569826    .8217755          1          3
         psu |     41797    12.52817    9.868414          1         39
-------------+--------------------------------------------------------
        snum |     41797    6.278202    3.161775          1         17
       vtype |     39961    1.528741    .4993299          1          3
      gpsnsa |     41769    132836.4    135310.7         34    3400000
      gpsnsb |     41764     3143840     1709632       4522   8.03e+07
    inidpcmp |     41797    1.962414    .1901961          1          2
-------------+--------------------------------------------------------
    daysurve |     41712    17.22658    6.202464          1         31
    monsurve |     41797     6.36182    3.512427          1         12
     yrsurve |     41797     2005.36    .4799714       2005       2006
       scode |     39542    42.14665    21.97753          3         98
     daychks |     39328    17.55452    6.340026          1         72
-------------+--------------------------------------------------------
     monchks |     39335    5.222652    4.288041          1         30
    yearchks |     39378    2005.734    8.524417       2005       3200
    editcode |     16167    47.80095    25.98742          1         89
     dayedit |     16064    18.29071    6.849501          1         72
     monedit |     16096    9.424826    3.752378          1         30
-------------+--------------------------------------------------------
    yearedit |     16111    2005.342     13.3177       2005       3200
     strthrs |     36529    10.62167    2.092694          6         61
     strtmin |     36506    25.95088    17.61905          0         59
    respcode |     41783    1.007659    .0980336          1          8
    our_resp |     41684    1.461928    .5003317          1          3
-------------+--------------------------------------------------------
     entrant |     40995    12.27838    5.949383          1         19
    dayentry |     40995    15.56104    8.096496          1         31
    monentry |     40995    3.814026    2.044584          0         12
     yrentry |     40995    2006.099    22.31054       2005       5200
    verifier |       954    6.873166      3.6039          1         15
-------------+--------------------------------------------------------
    dayverif |       846    15.91962    8.499811          2         30
    monverif |       846    4.166667    2.578817          1         11
    yrverify |       892    2005.885    .3197686       2005       2006
      hhsize |     41748    7.637276    3.687256          1         33
    hhweight |     41797    701.3982    328.8969      60.97    4404.13
-------------+--------------------------------------------------------
    survquar |     41797    2.566428     1.08261          1          4
     survmon |     41797    6.680408    3.333466          1         12
      strata |     41797    5.707898    2.797051          1         10
       rural |     41889     .784287    .4113209          0          1
     reg_tpi |     41797    2.432974    1.120305          1          4
-------------+--------------------------------------------------------
    spdomain |     41797    5.614398    2.340276          1          9
        news |     41797    2.432974    1.120305          1          4
        bswt |     41797           1           0          1          1
   fert_rate |        96    .1308125    .1150995       .006       .313
      _merge |     41902    1.002387     .050713          1          3

. * Do calorie calculations ;
.     gen num=1;

.     gen cal = .;
(41902 missing values generated)

. * Same assumptions about sex/age specific calories need in IAF 1997, 
> IAF 2003 and IOF 2009;
. * Children (no difference between boys and girls)   ;
.      replace cal =  820 if age < 1;
(1505 real changes made)

. * Add 500 cal per day for mothers in first six months of breast feedi
> ng
> * We assume that 60% of children under 1 are under six months old
> * And that all of them breast feed
> * We add these mother requirements of 300 on average to each child un
> der 1 whose mother is alive;
.     replace cal = 1120 if age <  1 & motherhh==1;
(1425 real changes made)

.     replace cal = 1150 if age >= 1 & age <2;
(1457 real changes made)

.     replace cal = 1350 if age >= 2 & age <3;
(1463 real changes made)

.     replace cal = 1550 if age >= 3 & age <5;
(2666 real changes made)

. * Males ;
.     replace cal = 1850 if age >=  5 & age <7  & sex==1;
(1432 real changes made)

.     replace cal = 2100 if age >=  7 & age <10 & sex==1;
(1928 real changes made)

.     replace cal = 2200 if age >= 10 & age <12 & sex==1;
(1262 real changes made)

.     replace cal = 2400 if age >= 12 & age <14 & sex==1;
(1287 real changes made)

.     replace cal = 2650 if age >= 14 & age <16 & sex==1;
(1136 real changes made)

.     replace cal = 2850 if age >= 16 & age <18 & sex==1;
(910 real changes made)

.     replace cal = 3000 if age >= 18 & age <30 & sex==1;
(3736 real changes made)

.     replace cal = 2900 if age >= 30 & age <60 & sex==1;
(3799 real changes made)

.     replace cal = 2450 if age>=60 & age~=. & sex==1;
(819 real changes made)

. * Girls 5-12 years (probability of pregnancy assumed = 0) ;
.     replace cal = 1750 if age >=  5 & age < 7 & sex==2;
(1 real change made)

.     replace cal = 1800 if age >=  7 & age <10 & sex==2;
(0 real changes made)

.     replace cal = 1950 if age >= 10 & age <12 & sex==2;
(1 real change made)

. * Women with a correction for pregnancy. We add 285 calories per for 
> the final trimester.
> * To do this we find the probability that rural and urban women are p
> regnant from
> * live births data in the 1997 census over the past 12 months (no cor
> rection for still births).
> * 3/4*probability of birth gives probability of preganancy. Probabili
> ty of final trimester is one
> * third of that of that or 1/4 of the probability of birth
> 
> * Women urban;
.     replace cal = 2100 + (fert_rate*285)/4 if age >= 12 & age <14 & s
> ex==2 & rural==0;
(2 real changes made)

.     replace cal = 2150 + (fert_rate*285)/4 if age >= 14 & age <18 & s
> ex==2 & rural==0;
(4 real changes made)

.     replace cal = 2100 + (fert_rate*285)/4 if age >= 18 & age <30 & s
> ex==2 & rural==0;
(12 real changes made)

.     replace cal = 2150 + (fert_rate*285)/4 if age >= 30 & age <60 & s
> ex==2 & rural==0;
(30 real changes made)

. * Women rural;
.     replace cal = 2100 + (fert_rate*285)/4 if age >= 12 & age <14 & s
> ex==2 & rural==1;
(2 real changes made)

.     replace cal = 2150 + (fert_rate*285)/4 if age >= 14 & age <18 & s
> ex==2 & rural==1;
(4 real changes made)

.     replace cal = 2100 + (fert_rate*285)/4 if age >= 18 & age <30 & s
> ex==2 & rural==1;
(12 real changes made)

.     replace cal = 2150 + (fert_rate*285)/4 if age >= 30 & age <60 & s
> ex==2 & rural==1;
(30 real changes made)

. * Women 60+ are not pregnant ;
.     replace cal = 1950 if age>=60 & age~=. & sex==2;
(0 real changes made)

.     count if cal ==.;
18404

.     *Fill in these two observations for IAF 2002/03:;
.     * 1) this one is a child;
.     *replace cal = 1500 if cal ==. & age==.;
.     * 2) this one is 21 years old;
.     *replace cal = 2500 if cal ==. & b2==.;
.     collapse (sum) cal num (max) psu hhsize hhweight strata rural spd
> omain, by (hhid);

.     gen chk=hhsize - num;
(12 missing values generated)

.     sum chk;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         chk |      7415    .1525287    .5954247        -11         10

.     drop chk;

.     gen calpp = cal / hhsize;
(12 missing values generated)

.     sort spdomain;

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      7426    2.48e+09    1.13e+09   1.01e+09   4.15e+09
         cal |      7427    7008.596    5086.838          0   197325.6
         num |      7427    5.641847    3.433554          1        105
         psu |      7426    12.43307    9.843949          1         39
      hhsize |      7415    5.782738    3.284401          1         33
-------------+--------------------------------------------------------
    hhweight |      7426    704.6189    339.0242      60.97    4404.13
      strata |      7426    5.644762    2.836484          1         10
       rural |      7427    .7712401    .4200626          0          1
    spdomain |      7426    5.552788    2.384061          1          9
       calpp |      7415    1273.419    682.3688          0      17550

. * MAH ;
.  sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      7426    2.48e+09    1.13e+09   1.01e+09   4.15e+09
         cal |      7427    7008.596    5086.838          0   197325.6
         num |      7427    5.641847    3.433554          1        105
         psu |      7426    12.43307    9.843949          1         39
      hhsize |      7415    5.782738    3.284401          1         33
-------------+--------------------------------------------------------
    hhweight |      7426    704.6189    339.0242      60.97    4404.13
      strata |      7426    5.644762    2.836484          1         10
       rural |      7427    .7712401    .4200626          0          1
    spdomain |      7426    5.552788    2.384061          1          9
       calpp |      7415    1273.419    682.3688          0      17550

.  codebook hhid;

-----------------------------------------------------------------------
hhid                                                       Household ID
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7426                     missing .:  1/7427

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

. collapse (mean) calpp[aw=hhsize*hhweight], by (spdomain);

. sort spdomain;

. save "$path/work/calpp.dta",replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/calpp.dta saved

. *********************************************************************
> **
> * 070_calpp.do          (end)
> *********************************************************************
> **;
. log close;
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/070_calpp.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:13
-----------------------------------------------------------------------

. 
end of do-file

.                                 do "$path/new/080_conpc.do"          
>                    /* Nominal food/non-food expenditure */

. *global path "C:/Users/Templeton/Desktop/GAPP/GAPP-UGANDA-HARUNA"
. clear all

. set mem 100m

. 
. clear

. cap log close

. log using "$path/rep/080_conpc.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/080_conpc.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:13

. set more off

. 
. 
. *********************************************************************
> ******
. * 080_conpc.do          (start)
. *
. * Creates a file with per capita nominal consumption divided between 
> food
. * and non-food categories based on the calorie definition of food
. * rather than the COICOP (INE) definition of food. ready for 
. * temporal deflation when necessary
. *********************************************************************
> ******* 
. 
. /*
> This file uses:
>         work/hhdata.dta
>         work/consump_nom.dta
>       
> This file creates:
>         work/conpc.dta
> */
. 
. 
. 
. *********************************************************************
> ******
. * Food expenditure
. *********************************************************************
> ******* 
. use "$path/in/cons_cod.dta" 

. *use "$path/work/cons_cod.dta" 
.             *sort product 
.             *merge product using "$path/work/food_cat.dta" 
.             *tab _m 
.             *drop _m 
.             keep if food_cat==1 
(7558 observations deleted)

.             collapse (sum) cod_hh_nom, by(hhid) 

.             rename cod_hh_nom food_hh_nom 

.                 sort hhid 

.             keep hhid food_hh_nom 

.             tempfile foodexp 

. save `foodexp' 
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. 
. *********************************************************************
> ******
. * Food expenditure merged with all expenditure
. *********************************************************************
> ******* 
. *use "$path/work/cons_cod.dta" 
. use "$path/in/cons_cod.dta" 

. *use "$path/in/cons_cat.dta" 
. sum 

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     99617    2.42e+09    1.14e+09   1.01e+09   4.15e+09
     product |     99744    195.1728    228.4847        100        999
    food_cat |     99617    1.074535    .2626416          1          2
    prod_cat |     99750    1.074436    .2624806          1          2
    descript |     99750    1.074436    .2624806          1          2
-------------+--------------------------------------------------------
   quantityd |     92192    .6260744    4.070446          0   857.1429
      valuez |     92192    250.8346    477.1331          0      40000
    quantity |     84735    2.410407     54.5909          0   14942.86
  cod_hh_nom |     99750    444.6134    2649.193          0   675256.8

. collapse (sum) cod_hh_nom, by(hhid) 

. *gen cons_pc_nom = cons_hh_nom/hhsize 
. rename cod_hh_nom cons_hh_nom 

. *keep  hhid cons_pc_nom cons_hh_nom  
. *keep hhid cod_hh_nom 
. *use "$path/in/cons_cod.dta" 
. *use "$path/in/consump_nom.dta" 
. *use "$path/work/consump_nom.dta" 
. *            keep  hhid cons_hh_nom  
.             display _N 
7426

.             keep  hhid cons_hh_nom  

.             sort hhid 

.             merge hhid using "$path/work/hhdata.dta" 

.             tab _m 

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          2 |          1        0.01        0.03
          3 |      7,425       99.97      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.             drop _m 

. gen cons_pc_nom = cons_hh_nom/hhsize 
(13 missing values generated)

.             sort hhid 

.             merge hhid using `foodexp' 

.             tab _m 

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7        0.09        0.09
          3 |      7,420       99.91      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.                 drop if _merge==2 
(0 observations deleted)

.             replace food_hh_nom=0 if _merge==1 & food_hh_nom==. 
(7 real changes made)

.             drop _m 

.                 gen food_pc_nom=food_hh_nom/hhsize 
(12 missing values generated)

.                 gen nf_hh_nom=cons_hh_nom-food_hh_nom 
(1 missing value generated)

.             gen nf_pc_nom=nf_hh_nom/hhsize 
(13 missing values generated)

.  
.             keep hhid cons_hh_nom food_pc_nom nf_pc_nom cons_pc_nom s
> urvquar spdomain news reg_tpi rural hhweight hhsize 

.             lab var food_pc_nom "nominal food consumption per capita"
>  

.             lab var nf_pc_nom "nominal non-food consumption per capit
> a" 

. keep hhid cons_hh_nom cons_pc_nom food_pc_nom nf_pc_nom 

.             sort hhid 

. 
. * MAH   sum  codebook hhid 
. save "$path/work/conpc.dta", replace 
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/conpc.dta saved

. 
. 
. *********************************************************************
> ******
. * 080_conpc.do          (end)
. *********************************************************************
> ******* 
. 
. 
. log close 
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/080_conpc.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:14
-----------------------------------------------------------------------

. 
end of do-file

.                                 do "$path/new/090_temp_index.do"     
>            /* Temporal price index */

. *global path "C:/Users/Templeton/Desktop/GAPP/GAPP-UGANDA-HARUNA"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/090_temp_index.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/090_temp_index.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:14

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *****
> * 090_temp_index.do     (start)
> *********************************************************************
> *****;
. *do "$path/new/010_initial.do";
. *********************************************************************
> *****
> * Program to compute the temporal price index (intra-survey)
> * 
> * The index is based on 6 regions (North/Center/South by rural/urban)
>  
> * and four quarters. For IAF 2002/03 (t=t1) it is based on the same 9
> * commodities used for the analysis of the 1996 IAF (t=t0), 
> * except that we have to go to 8 commodities because the 2002-03 surv
> ey 
> * does not distinguish between large and small groundnuts, which were
>  
> * separate items in the old index. For IOF 2008/09 (t=t2) we expand t
> he
> * the food basket to include the 15 most important food products amon
> g
> * the poorest.
> *
> * The commodity weights for the items vary by the 6 regions, and are 
> * calculated from the observations in the IAF2002, using the relative
> ly 
> * poor households (below median nominal consumption per capita).
> *
> * The unit values (prices) calculated here are also based on the pric
> es 
> * paid by the relatively poor, using the same definition.
> *
> * K Simler, Sep 2003
> * CA
> * MAH, April 2010
> * URB, Feb 2013 (automatization to any number of n_tpi's)
> *********************************************************************
> *****;
. /*
> This file uses:
>         work/own.dta
>         work/receipts.dta
>         work/daily.dta
>         work/hhdata
>         work/cons_cat.dta
> 
> This file creates:
>         work/tpi_unit_val_quarterly.dta
>         work/tpi_unit_val_monthly.dta
>         work/tpi_news_share.dta
>         work/tpi_reg_tpi_share.dta
>         work/temp_index_news.dta
>         work/temp_index_reg_tpi.dta
> */      
> 
> 
> *********************************************************************
> *****
> * Either the products used for intertemporal price index is specified
> * explicitly, or they are automatically found as the the n_tpi produc
> ts
> * with the highest weighted expenditure shares among the $bottom % po
> orest
> * part of the population
> *********************************************************************
> *****;
. * Generating the n_tpi most important food items for the poorest $bot
> tom % ;
. *********************************************************************
> *****
> * Find the n_tpi most important food products among the lowest $botto
> m %
> * (start)
> *********************************************************************
> *****;
. *--------------------------------------------------------------------
> ----*
> * Population weights for each HH
> *--------------------------------------------------------------------
> ----*;
. use "$path/work/hhdata.dta", clear;

. keep hhid hhweight hhsize;

. gen popwt = hhweight*hhsize;
(11 missing values generated)

. lab var popwt "Population weights = hhsize X hhweight";

. sort hhid;

. tempfile popwt;

. save `popwt', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      7426    2.48e+09    1.13e+09   1.01e+09   4.15e+09
      hhsize |      7415    5.782738    3.284401          1         33
    hhweight |      7426    704.6189    339.0242      60.97    4404.13
       popwt |      7415    4061.087    3109.766      90.05   57253.69

. *--------------------------------------------------------------------
> ----*
> * Make list of all consumed products
> *--------------------------------------------------------------------
> ----*;
. *use "$path/in/cons_cod.dta", clear;
. *save "$path/work/cons_cod.dta", replace;
. use "$path/work/cons_cod.dta", clear;

. keep product descript;

. collapse product, by(descript);

. sort product;

. tempfile descript;

. save `descript', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
    descript |         2         1.5    .7071068          1          2
     product |         2    564.7614    614.1061   130.5228        999

. *--------------------------------------------------------------------
> ----*
> * Find the poorest part of the population
> *--------------------------------------------------------------------
> ----*;
. use
> "$path/work/cons_cod.dta", clear;

. *use
> *"$path/work/cons_cod.dta", clear;
. ********************************************check the COICOP categori
> es to create the variable prod_cat, for the moment it is equal to foo
> d_cat******;
. keep hhid prod_cat product cod_hh_nom;

. sort hhid;

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     99617    2.42e+09    1.14e+09   1.01e+09   4.15e+09
     product |     99744    195.1728    228.4847        100        999
    prod_cat |     99750    1.074436    .2624806          1          2
  cod_hh_nom |     99750    444.6134    2649.193          0   675256.8

. merge hhid using `popwt';
variable hhid does not uniquely identify observations in the master
    data

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     99618    2.42e+09    1.14e+09   1.01e+09   4.15e+09
     product |     99744    195.1728    228.4847        100        999
    prod_cat |     99750    1.074436    .2624806          1          2
  cod_hh_nom |     99750    444.6134    2649.193          0   675256.8
      hhsize |     99478    6.134613    3.327188          1         33
-------------+--------------------------------------------------------
    hhweight |     99618     700.727    344.3291      60.97    4404.13
       popwt |     99478    4285.188    3248.491      90.05   57253.69
      _merge |     99751    2.997323    .0730493          1          3

. drop _merge;

. preserve;

. collapse (sum) cod_hh_nom (mean) popwt hhweight hhsize, by(hhid);

. gen cod_pc_nom = cod_hh_nom/hhsize;
(12 missing values generated)

.         sum cod_pc_nom [aw=popwt] , detail;

                         cod_pc_nom
-------------------------------------------------------------
      Percentiles      Smallest
 1%     179.6215              0
 5%     269.9558       57.35135
10%      330.564       73.75905       Obs                7415
25%     481.6351       87.50163       Sum of Wgt.    30112959

50%     741.9806                      Mean           1028.994
                        Largest       Std. Dev.      1182.896
75%     1179.243       20262.63
90%      1976.43       32463.37       Variance        1399244
95%     2755.182       35755.48       Skewness       26.09108
99%     5247.669       112858.3       Kurtosis       2142.404

.         global medcpc_= r(p$tpi_bottom);

.         gen bottom_ = cod_pc_nom <= $medcpc_;

. sum [aw=popwt];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
        hhid |    7415    30112959    2.48e+09   1.16e+09   1.01e+09   
> 4.15e+09
  cod_hh_nom |    7415    30112959    7568.485    9009.33          0   
> 677149.6
       popwt |    7415    30112959     6442.06   5014.064      90.05   
> 57253.69
    hhweight |    7415    30112959      856.71   485.0167      60.97   
>  4404.13
      hhsize |    7415    30112959    7.592919     3.6258          1   
>       33
-------------+---------------------------------------------------------
> --------
  cod_pc_nom |    7415    30112959    1028.994   1182.896          0   
> 112858.3
     bottom_ |    7415    30112959    .5001213   .5000337          0   
>        1

. sum [aw=hhweight];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
        hhid |    7426  5232499.75    2.45e+09   1.18e+09   1.01e+09   
> 4.15e+09
  cod_hh_nom |    7426  5232499.75    5926.541   7574.558          0   
> 677149.6
       popwt |    7415  5227323.23    4935.236   4179.065      90.05   
> 57253.69
    hhweight |    7426  5232499.75    867.7168   491.7563      60.97   
>  4404.13
      hhsize |    7415  5227323.23    5.760684   3.249054          1   
>       33
-------------+---------------------------------------------------------
> --------
  cod_pc_nom |    7415  5227323.23    1184.766   1479.291          0   
> 112858.3
     bottom_ |    7426  5232499.75     .447572   .4972772          0   
>        1

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      7426    2.48e+09    1.13e+09   1.01e+09   4.15e+09
  cod_hh_nom |      7427     5971.48    10299.67          0   677149.6
       popwt |      7415    4061.087    3109.766      90.05   57253.69
    hhweight |      7426    704.6189    339.0242      60.97    4404.13
      hhsize |      7415    5.782738    3.284401          1         33
-------------+--------------------------------------------------------
  cod_pc_nom |      7415    1191.802    1902.365          0   112858.3
     bottom_ |      7427    .4489027    .4974157          0          1

. keep if bottom_==1;
(4093 observations deleted)

. keep hhid;

. sort hhid;

. tempfile hhid;

. save `hhid';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000004.tmp saved

. restore;

. sort hhid;

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     99618    2.42e+09    1.14e+09   1.01e+09   4.15e+09
     product |     99744    195.1728    228.4847        100        999
    prod_cat |     99750    1.074436    .2624806          1          2
  cod_hh_nom |     99750    444.6134    2649.193          0   675256.8
      hhsize |     99478    6.134613    3.327188          1         33
-------------+--------------------------------------------------------
    hhweight |     99618     700.727    344.3291      60.97    4404.13
       popwt |     99478    4285.188    3248.491      90.05   57253.69

. merge hhid using `hhid';
variable hhid does not uniquely identify observations in the master
    data

. tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     61,751       61.91       61.91
          3 |     38,000       38.09      100.00
------------+-----------------------------------
      Total |     99,751      100.00

. keep if _m==3;
(61751 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     38000    2.60e+09    9.63e+08   1.01e+09   4.15e+09
     product |     37997     207.009    246.0536        101        999
    prod_cat |     37999    1.087713    .2828805          1          2
  cod_hh_nom |     37999    270.1796     450.652          0   8192.708
      hhsize |     38000    6.755105    3.007071          1         29
-------------+--------------------------------------------------------
    hhweight |     38000    697.5898    291.4569      60.97    4404.13
       popwt |     38000    4681.574    2910.152      90.05   57253.69
      _merge |     38000           3           0          3          3

. *--------------------------------------------------------------------
> ----*
> * Keep only food product expenditure by the poor. Calculate food prod
> uct
> * share of total food expenditure by the poor
> *--------------------------------------------------------------------
> ----*;
. keep if prod_cat==1;
(3334 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     34666    2.59e+09    9.62e+08   1.01e+09   4.15e+09
     product |     34664    130.8578    15.86809        101        161
    prod_cat |     34666           1           0          1          1
  cod_hh_nom |     34666    190.0887    281.5453          0   6857.143
      hhsize |     34666    6.782698    3.010305          1         29
-------------+--------------------------------------------------------
    hhweight |     34666    697.1238    291.7748      60.97    4404.13
       popwt |     34666    4697.389    2918.108      90.05   57253.69
      _merge |     34666           3           0          3          3

. sort product;

. *preserve;
. collapse (sum) cod_hh_nom [aw=hhweight], by(product);

. sort cod;

. egen total=sum(cod_hh_nom);

. gen sh=100*cod_hh_nom/total;

. *--------------------------------------------------------------------
> ----*
> * Include product labels
> *--------------------------------------------------------------------
> ----*;
. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |        56    128.8571    16.91844        101        161
  cod_hh_nom |        57    115664.2    156094.5   53.69359     698595
       total |        57     6592861           0    6592861    6592861
          sh |        57    1.754386     2.36763   .0008144   10.59624

. sort product;

. merge product using `descript';

. tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         57       96.61       96.61
          2 |          2        3.39      100.00
------------+-----------------------------------
      Total |         59      100.00

. keep if _merge==1 | _merge==3;
(2 observations deleted)

. drop _merge;

. sort sh;

. *list;
. list in -$product_tpi_n/-1;

     +----------------------------------------------------+
     | product   cod_hh~m     total         sh   descript |
     |----------------------------------------------------|
 28. |     145   61682.29   6592861   .9355923          . |
 29. |     109   63640.89   6592861   .9653002          . |
 30. |     150   64866.88   6592861   .9838958          . |
 31. |     146   66314.84   6592861   1.005858          . |
 32. |     144   69768.51   6592861   1.058243          . |
     |----------------------------------------------------|
 33. |     121   80299.19   6592861   1.217972          . |
 34. |     134   81798.87   6592861   1.240719          . |
 35. |     157   90767.81   6592861   1.376759          . |
 36. |     138   92160.22   6592861   1.397879          . |
 37. |     161    92642.4   6592861   1.405193          . |
     |----------------------------------------------------|
 38. |     110   94933.65   6592861   1.439946          . |
 39. |     140    98979.4   6592861   1.501312          . |
 40. |     102   101257.4   6592861   1.535865          . |
 41. |     116     102916   6592861   1.561021          . |
 42. |     122   119487.3   6592861   1.812374          . |
     |----------------------------------------------------|
 43. |     136     120401   6592861   1.826233          . |
 44. |     112     126718   6592861   1.922049          . |
 45. |     139   134738.2   6592861   2.043698          . |
 46. |     115   139379.2   6592861   2.114093          . |
 47. |     125   149108.1   6592861    2.26166          . |
     |----------------------------------------------------|
 48. |     123   163312.5   6592861   2.477112          . |
 49. |     127   171803.9   6592861   2.605908          . |
 50. |     117   227078.6   6592861   3.444311          . |
 51. |     147   305866.6   6592861   4.639361          . |
 52. |     107   388847.5   6592861   5.898009          . |
     |----------------------------------------------------|
 53. |     101   396037.4   6592861   6.007064          . |
 54. |     108   437748.1   6592861    6.63973          . |
 55. |     141   526407.7   6592861   7.984512          . |
 56. |     113   656398.6   6592861   9.956203          . |
 57. |     105     698595   6592861   10.59624          . |
     +----------------------------------------------------+

. list product descript in -$product_tpi_n/-1;

     +--------------------+
     | product   descript |
     |--------------------|
 28. |     145          . |
 29. |     109          . |
 30. |     150          . |
 31. |     146          . |
 32. |     144          . |
     |--------------------|
 33. |     121          . |
 34. |     134          . |
 35. |     157          . |
 36. |     138          . |
 37. |     161          . |
     |--------------------|
 38. |     110          . |
 39. |     140          . |
 40. |     102          . |
 41. |     116          . |
 42. |     122          . |
     |--------------------|
 43. |     136          . |
 44. |     112          . |
 45. |     139          . |
 46. |     115          . |
 47. |     125          . |
     |--------------------|
 48. |     123          . |
 49. |     127          . |
 50. |     117          . |
 51. |     147          . |
 52. |     107          . |
     |--------------------|
 53. |     101          . |
 54. |     108          . |
 55. |     141          . |
 56. |     113          . |
 57. |     105          . |
     +--------------------+

. *restore;
. *--------------------------------------------------------------------
> ----*
> * Keep the required number of most important food products
> *--------------------------------------------------------------------
> ----*;
. keep in -$product_tpi_n/-1;
(27 observations deleted)

. list;

     +----------------------------------------------------+
     | product   cod_hh~m     total         sh   descript |
     |----------------------------------------------------|
  1. |     145   61682.29   6592861   .9355923          . |
  2. |     109   63640.89   6592861   .9653002          . |
  3. |     150   64866.88   6592861   .9838958          . |
  4. |     146   66314.84   6592861   1.005858          . |
  5. |     144   69768.51   6592861   1.058243          . |
     |----------------------------------------------------|
  6. |     121   80299.19   6592861   1.217972          . |
  7. |     134   81798.87   6592861   1.240719          . |
  8. |     157   90767.81   6592861   1.376759          . |
  9. |     138   92160.22   6592861   1.397879          . |
 10. |     161    92642.4   6592861   1.405193          . |
     |----------------------------------------------------|
 11. |     110   94933.65   6592861   1.439946          . |
 12. |     140    98979.4   6592861   1.501312          . |
 13. |     102   101257.4   6592861   1.535865          . |
 14. |     116     102916   6592861   1.561021          . |
 15. |     122   119487.3   6592861   1.812374          . |
     |----------------------------------------------------|
 16. |     136     120401   6592861   1.826233          . |
 17. |     112     126718   6592861   1.922049          . |
 18. |     139   134738.2   6592861   2.043698          . |
 19. |     115   139379.2   6592861   2.114093          . |
 20. |     125   149108.1   6592861    2.26166          . |
     |----------------------------------------------------|
 21. |     123   163312.5   6592861   2.477112          . |
 22. |     127   171803.9   6592861   2.605908          . |
 23. |     117   227078.6   6592861   3.444311          . |
 24. |     147   305866.6   6592861   4.639361          . |
 25. |     107   388847.5   6592861   5.898009          . |
     |----------------------------------------------------|
 26. |     101   396037.4   6592861   6.007064          . |
 27. |     108   437748.1   6592861    6.63973          . |
 28. |     141   526407.7   6592861   7.984512          . |
 29. |     113   656398.6   6592861   9.956203          . |
 30. |     105     698595   6592861   10.59624          . |
     +----------------------------------------------------+

. gen product_tpi=1;

. keep product product_tpi;

. list;

     +--------------------+
     | product   produc~i |
     |--------------------|
  1. |     145          1 |
  2. |     109          1 |
  3. |     150          1 |
  4. |     146          1 |
  5. |     144          1 |
     |--------------------|
  6. |     121          1 |
  7. |     134          1 |
  8. |     157          1 |
  9. |     138          1 |
 10. |     161          1 |
     |--------------------|
 11. |     110          1 |
 12. |     140          1 |
 13. |     102          1 |
 14. |     116          1 |
 15. |     122          1 |
     |--------------------|
 16. |     136          1 |
 17. |     112          1 |
 18. |     139          1 |
 19. |     115          1 |
 20. |     125          1 |
     |--------------------|
 21. |     123          1 |
 22. |     127          1 |
 23. |     117          1 |
 24. |     147          1 |
 25. |     107          1 |
     |--------------------|
 26. |     101          1 |
 27. |     108          1 |
 28. |     141          1 |
 29. |     113          1 |
 30. |     105          1 |
     +--------------------+

. sort product;

. tempfile product_tpi;

. save `product_tpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |        30    127.0333    17.36521        101        161
 product_tpi |        30           1           0          1          1

. clear;

. *********************************************************************
> *****
> * Find the n_tpi most important food products among the lowest $botto
> m %
> * (end)
> *********************************************************************
> *****;
. *********************************************************************
> *****;
. * First, need to calculate the average prices for the food items, by 
> * strata and quarter. For this, we are using the "unit values"
> * (value/quantity) for the observations in the consumption questionna
> ires,
> * including daily, own and receipts-in-kind.
> *
> * The unit values are constructed as sum(value)/sum(quantity), which 
> effectively
> * weights them by the quantity and value of the transaction. Sampling
> * weights are also used.
> *
> * Get the own consumption file, and limit analysis to the observation
> s
> * in KGs where both value and quantity are available.
> *********************************************************************
> *****;
. use "$path/work/cons_cod.dta";

. *use "$path/work/cons_cod.dta";
. keep if prod_cat==1;
(7425 observations deleted)

. drop if quantityd==0 | quantityd==.;
(2903 observations deleted)

. *keep if quantityd!=. & cod_hh_nom2!=.;
. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     89422    2.43e+09    1.14e+09   1.01e+09   4.15e+09
     product |     89421    129.6649     15.4627        101        161
    food_cat |     89422           1           0          1          1
    prod_cat |     89422           1           0          1          1
    descript |     89422           1           0          1          1
-------------+--------------------------------------------------------
   quantityd |     89422    .6454681    4.131496   .0014286   857.1429
      valuez |     89422    236.9391     388.556          0      24000
    quantity |     82015    2.490347    55.48698   .0000357   14942.86
  cod_hh_nom |     89422    236.9391     388.556          0      24000

. sort product;

. merge product using `product_tpi';
variable product does not uniquely identify observations in the
    master data

. tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     22,152       24.77       24.77
          2 |          1        0.00       24.77
          3 |     67,270       75.23      100.00
------------+-----------------------------------
      Total |     89,423      100.00

. drop _merge;

. keep if $product_tpi;
(22152 observations deleted)

. *        replace valued_ac=0 if valued_ac==.;
. *        replace quantityd_ac=0 if quantityd_ac==.;
.         gen valued_tot=cod_hh_nom;
(1 missing value generated)

.         gen quantityd_tot=quantityd;
(1 missing value generated)

. *               replace quantityd_tot=0 if (valued_tot>0 & valued_tot
> <.) & quantityd_tot==.;
.         keep if quantityd_tot!=. & valued_tot!=.;
(1 observation deleted)

.                 collapse (sum) valued_tot quantityd_tot, by(hhid prod
> uct);

.                 sort hhid;

. tempfile acredd;

. save `acredd' , replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     67270    2.44e+09    1.13e+09   1.01e+09   4.15e+09
     product |     67270    127.8322     15.9003        101        161
  valued_tot |     67270     269.683    418.7454          0      24000
quantityd_~t |     67270    .6858805    4.521992   .0014286   857.1429

. /*
> *********************************************************************
> *****;
> * Create a data set with an empty 1 observation. Used to avoid empty 
> data
> * sets when the survey do not have the Mozambican set up
> *********************************************************************
> *****;
> use "$path/work/own.dta";
> 
> preserve;
> keep in 1;
> drop unit valued quantityd;
> gen unit=2;
> gen valued=0;
> gen quantityd=0;
> tempfile 1obs;
> save `1obs';
> restore;
> 
> *********************************************************************
> *****;
> * Own consumption
> *********************************************************************
> *****;
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
>         rename valued valued_ac;
>         rename quantityd quantityd_ac;
>         compress;
>         sort hhid product;
>         tempfile ac;
> save `ac', replace;
> 
> *********************************************************************
> *****;
> * Now do a similar thing with receipts-in-kind file.
> *********************************************************************
> *****;
> use "$path/work/receipts.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> 
> 
> keep if $product_tpi;
> append using `1obs';
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
>         rename valued valued_re;
>         rename quantityd quantityd_re;
>         compress;
>         sort hhid product;
>         tempfile re;
> save `re', replace;
> 
> *********************************************************************
> *****;
> * And also with the daily expenditure file.
> *********************************************************************
> *****;
> use "$path/work/daily.dta";
> 
> sum;
> sort product;
> merge product using `product_tpi';
> tab _merge;
> drop _merge;
> 
> keep if $product_tpi;
> 
> 
> 
> * Comment out below if IAF 2002/03 ( START ) ;
> 
> *rename quantityd quantity;
> do "$path/new/110a_conversions.do";
> *rename quantity quantityd;
> 
> * Comment out below if IAF 2002/03 ( END ) ;
> 
> 
> 
>         collapse (sum) value quantity days , 
>                 by(hhid product unit);
> 
>         gen valued=value/7 if days<=7;
>         replace valued=value/days if days>7 & days<.;
>         gen quantityd=quantity/7 if days<=7;
>         replace quantityd=quantity/days if days>7 & days<.;
> 
>         keep if unit==2 & quantityd!=. & valued!=.;
>         collapse (sum) valued quantityd , by(hhid product);
> 
>         rename valued valued_dd;
>         rename quantityd quantityd_dd;
>         compress;
>         sort hhid product;
>         tempfile dd;
> save `dd', replace;
> 
> 
> 
> 
> *********************************************************************
> *****;
> * Merge the three components (own, daily, receipts) together at the H
> H/product level, 
> * then aggregate to the regional level, using the sample weights (hhw
> eight).
> * We DON'T want to weight by "hhsize" because the quantity and value 
> are
> * already for the household (i.e., other things equal, larger househo
> lds
> * are buying larger quantities, and therefore already getting more we
> ight).
> * Then calculate sum(val)/sum(quantity) to get the quantity weighted 
> mean
> * unit value in each strata in each quarter.
> *********************************************************************
> *****;
> use `ac';
>         sort hhid product;
>         merge hhid product using `re';
>         tab _m;
>         drop _m;
>         
>         sort hhid product;
>         merge hhid product using `dd';
>         tab _m;
>         drop _m;
>         
>         replace valued_ac=0 if valued_ac==.;
>         replace valued_re=0 if valued_re==.;
>         replace valued_dd=0 if valued_dd==.;
>         replace quantityd_ac=0 if quantityd_ac==.;
>         replace quantityd_re=0 if quantityd_re==.;
>         replace quantityd_dd=0 if quantityd_dd==.;
> 
>         gen valued_tot=valued_ac+valued_re+valued_dd;
>         gen quantityd_tot=quantityd_ac+quantityd_re+quantityd_dd;
> 
>         sort hhid;
> 
>         tempfile acredd;
> save `acredd' , replace;
> */
> 
> 
> 
> use "$path/work/hhdata.dta";

.         keep strata hhid hhweight hhsize rural survmon survquar news 
> spdomain reg_tpi;

.         sort hhid;

.         tempfile hhd;

. save `hhd' , replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000007.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000007.tmp saved

. use `acredd', clear;

.         merge hhid using `hhd';
variable hhid does not uniquely identify observations in the master
    data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        240        0.36        0.36
          3 |     67,270       99.64      100.00
------------+-----------------------------------
      Total |     67,510      100.00

.         drop _merge;

.                 tab survquar , miss;

  Sequential |
      Survey |
     Quarter |
    (May-Jul |
       05=1) |      Freq.     Percent        Cum.
-------------+-----------------------------------
  May-Jul 05 |     14,338       21.24       21.24
 Sept-Oct 05 |     20,497       30.36       51.60
 Nov05-Jan06 |     16,532       24.49       76.09
Feb-Apr 2006 |     16,143       23.91      100.00
-------------+-----------------------------------
       Total |     67,510      100.00

.                 tab survmon survquar, miss;

Sequential |
    Survey |
Month (May |  Sequential Survey Quarter (May-Jul 05=1)
   2005=1) | May-Jul 0  Sept-Oct   Nov05-Jan  Feb-Apr 2 |     Total
-----------+--------------------------------------------+----------
    May 05 |     4,452          0          0          0 |     4,452 
    Jun 05 |     5,343          0          0          0 |     5,343 
    Jul 05 |     4,543          0          0          0 |     4,543 
    Aug 05 |         0      7,168          0          0 |     7,168 
    Sep 05 |         0      6,583          0          0 |     6,583 
    Oct 05 |         0      6,746          0          0 |     6,746 
    Nov 05 |         0          0      6,464          0 |     6,464 
    Dec 05 |         0          0      3,607          0 |     3,607 
    Jan 06 |         0          0      6,461          0 |     6,461 
    Feb 06 |         0          0          0      5,022 |     5,022 
    Mar 06 |         0          0          0      7,027 |     7,027 
    Apr 06 |         0          0          0      4,094 |     4,094 
-----------+--------------------------------------------+----------
     Total |    14,338     20,497     16,532     16,143 |    67,510 


.         compress;
product was float now int
survquar was float now byte
survmon was float now byte
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte

.         sort hhid;

. save `acredd', replace;
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     67510    2.44e+09    1.13e+09   1.01e+09   4.15e+09
     product |     67270    127.8322     15.9003        101        161
  valued_tot |     67270     269.683    418.7454          0      24000
quantityd_~t |     67270    .6858805    4.521992   .0014286   857.1429
      hhsize |     67420    6.173821    3.288602          1         33
-------------+--------------------------------------------------------
    hhweight |     67510    700.1193    339.4945      60.97    4404.13
    survquar |     67510    2.510739    1.073736          1          4
     survmon |     67510    6.513524    3.305396          1         12
      strata |     67510    5.546141    2.838808          1         10
       rural |     67510    .7545549     .430354          0          1
-------------+--------------------------------------------------------
     reg_tpi |     67510    2.372863    1.134435          1          4
    spdomain |     67510    5.453874    2.388375          1          9
        news |     67510    2.372863    1.134435          1          4

. *********************************************************************
> *****;
. * Need to merge with the file that has nominal consumption per househ
> old,
> * and compute nominal consumption per capita from that, so that we ca
> n
> * choose the relatively poor (i.e., below median nominal consumption 
> per
> * capita).
> *********************************************************************
> *****;
. use "$path/work/conpc.dta", clear;

. keep hhid cons_hh_nom;

. *use "$path/in/cons_cat.dta" ;
. *save "$path/work/cons_cat.dta", replace ;
. *use "$path/work/cons_cat.dta" ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;

.         merge hhid using "$path/work/hhdata.dta";

.           tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.  drop _m;

.         collapse (mean) cons_hh_nom hhsize hhweight , by(hhid);

.         gen cpc=cons_hh_nom/hhsize;
(13 missing values generated)

.         sum cpc [aw=hhsize*hhweight] , detail;

                             cpc
-------------------------------------------------------------
      Percentiles      Smallest
 1%      182.542       57.35135
 5%     270.3972       73.75905
10%      330.564       87.50163       Obs                7414
25%     481.6351       95.06575       Sum of Wgt.  30109848.2

50%     741.9806                      Mean             1029.1
                        Largest       Std. Dev.      1182.911
75%     1179.243       20262.63
90%      1976.43       32463.37       Variance        1399279
95%     2755.182       35755.48       Skewness       26.09259
99%     5247.669       112858.3       Kurtosis       2142.508

.         global medcpc=r(p$tpi_bottom);

.         gen bottom_tpi=cpc<=$medcpc;

.         keep hhid bottom_tpi;

.         sort hhid;

.         tempfile bottom_tpi;

. save `bottom_tpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000008.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000008.tmp saved

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |      7426    2.48e+09    1.13e+09   1.01e+09   4.15e+09
  bottom_tpi |      7427     .448768    .4974018          0          1

. use `acredd' ;

.         merge hhid using `bottom_tpi';
variable hhid does not uniquely identify observations in the master
    data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          1        0.00        0.00
          3 |     67,510      100.00      100.00
------------+-----------------------------------
      Total |     67,511      100.00

.         drop _merge;

.         keep if bottom_tpi;
(40461 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     27050    2.61e+09    9.61e+08   1.01e+09   4.15e+09
     product |     27019    128.7823    15.90697        101        150
  valued_tot |     27019    211.8023    290.4275          0       5000
quantityd_~t |     27019    .7597645    6.543398   .0014286   857.1429
      hhsize |     27050    6.749945     2.98412          1         29
-------------+--------------------------------------------------------
    hhweight |     27050    698.0141    290.5159      60.97    4404.13
    survquar |     27050    2.489649    1.054043          1          4
     survmon |     27050    6.442181    3.208056          1         12
      strata |     27050    5.953715    2.364569          1         10
       rural |     27050    .8818115    .3228372          0          1
-------------+--------------------------------------------------------
     reg_tpi |     27050    2.540518    .9636848          1          4
    spdomain |     27050    5.959667    1.936198          1          9
        news |     27050    2.540518    .9636848          1          4
  bottom_tpi |     27050           1           0          1          1

. * Drop one HH with extremely high quantity and low value in IAF 2002/
> 03 (t=t1) ;
. *        drop if hhid==263001;
.         preserve;

.                 collapse (sum) valued_tot quantityd_tot [aw=hhweight]
>  , 
>                                 by(reg_tpi news product survmon);

.                         drop if product==.;
(21 observations deleted)

.                         gen ppkg=valued_tot/quantityd_tot;

.                         lab var ppkg "Unit value per kg";

.                         sort reg_tpi product ;

.                         compress;

.                         tempfile uvm;

.                 save `uvm', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000a.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000a.tmp saved

.                 save "$path/work/tpi_unit_val_monthly.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/tpi_unit_val_monthly.dta saved

.         restore;

.         preserve;

.                 collapse (sum) valued_tot quantityd_tot [aw=hhweight]
>  , 
>                                 by(reg_tpi news product survquar);

.                         drop if product==.;
(14 observations deleted)

.                         gen ppkg=valued_tot/quantityd_tot;

.                         sort reg_tpi product survquar;

.                         list in  1/3;

     +------------------------------------------------------+
  1. | product |    survquar | reg_tpi |    news | valued~t |
     |     101 |  May-Jul 05 | Central | Central |  15655.5 |
     |------------------------------------------------------|
     |         quanti~t         |             ppkg          |
     |         9.570205         |         1635.859          |
     +------------------------------------------------------+

     +------------------------------------------------------+
  2. | product |    survquar | reg_tpi |    news | valued~t |
     |     101 | Sept-Oct 05 | Central | Central | 32953.27 |
     |------------------------------------------------------|
     |         quanti~t         |             ppkg          |
     |         22.20471         |         1484.066          |
     +------------------------------------------------------+

     +------------------------------------------------------+
  3. | product |    survquar | reg_tpi |    news | valued~t |
     |     101 | Nov05-Jan06 | Central | Central | 18484.62 |
     |------------------------------------------------------|
     |         quanti~t         |             ppkg          |
     |         13.64185         |         1354.994          |
     +------------------------------------------------------+

.                         list in -3/-1;

     +-------------------------------------------------------+
436. | product |     survquar | reg_tpi |    news | valued~t |
     |     150 |  Sept-Oct 05 | Western | Western | 3845.008 |
     |-------------------------------------------------------|
     |         quanti~t          |             ppkg          |
     |         17.55526          |          219.023          |
     +-------------------------------------------------------+

     +-------------------------------------------------------+
437. | product |     survquar | reg_tpi |    news | valued~t |
     |     150 |  Nov05-Jan06 | Western | Western | 3305.908 |
     |-------------------------------------------------------|
     |         quanti~t          |             ppkg          |
     |         26.49371          |         124.7809          |
     +-------------------------------------------------------+

     +-------------------------------------------------------+
438. | product |     survquar | reg_tpi |    news | valued~t |
     |     150 | Feb-Apr 2006 | Western | Western | 3788.854 |
     |-------------------------------------------------------|
     |         quanti~t          |             ppkg          |
     |         15.00283          |         252.5427          |
     +-------------------------------------------------------+

.                         tempfile uvq;

.                 save "$path/work/tpi_unit_val_quarterly.dta", replace
> ;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/tpi_unit_val_quarterly.dta saved

.                 save `uvq', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp saved

.         restore;

.         *************************************************************
> *************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * each reg_tpi & product combination. This should eliminate outliers 
> that
> * may have an undue influence on the price calculation. Then use samp
> le
> * weighting PLUS quantity weighting on those HH-level observations.
> *********************************************************************
> *****;
.         preserve;

.                 gen hhppkg=valued_tot/quantityd_tot;
(31 missing values generated)

.                 egen lower5=pctile(hhppkg), p(5) by(reg_tpi product);
(31 missing values generated)

.                 egen upper5=pctile(hhppkg), p(95) by(reg_tpi product)
> ;
(31 missing values generated)

.                 keep if hhppkg>=lower5 & hhppkg<=upper5;
(1505 observations deleted)

.                                 gen hhqtywt=hhweight*quantityd_tot;
(31 missing values generated)

.                                 collapse (sum) valued_tot quantityd_t
> ot [aw=hhqtywt] , 
>                                 by(reg_tpi news product survquar);

.                         drop if product==.;
(0 observations deleted)

.                         gen ppkg_trim=valued_tot/quantityd_tot;

.                         lab var ppkg_trim "90% trimmed unit value per
>  kg";

.                         sort reg_tpi product survquar;

.                         list , nol;

     +-----------------------------------------------------------+
  1. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        1 |       1 |    1 | 14817.22 | 10.40251 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1424.389                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
  2. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        2 |       1 |    1 | 72582.89 | 50.84475 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          1427.54                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
  3. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        3 |       1 |    1 | 23752.23 | 18.10125 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1312.187                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
  4. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        4 |       1 |    1 | 44604.13 | 38.32662 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          1163.79                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
  5. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        1 |       1 |    1 | 3279.893 | 4.123469 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         795.4209                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
  6. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        2 |       1 |    1 | 1902.305 | 1.616002 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1177.167                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
  7. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        3 |       1 |    1 | 2574.288 | 1.037763 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2480.613                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
  8. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        4 |       1 |    1 | 6346.177 | 4.644834 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1366.287                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
  9. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        1 |       1 |    1 | 26821.08 | 41.52079 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         645.9673                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 10. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        2 |       1 |    1 | 65558.26 | 90.06228 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         727.9214                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 11. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        3 |       1 |    1 |  73428.1 |  79.3625 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         925.2242                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 12. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        4 |       1 |    1 | 41562.76 | 51.95801 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         799.9298                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 13. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        1 |       1 |    1 |  22782.9 | 30.76128 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         740.6359                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 14. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        2 |       1 |    1 | 62259.71 | 76.00535 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         819.1491                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 15. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        3 |       1 |    1 | 26224.73 | 40.06295 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         654.5882                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 16. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        4 |       1 |    1 | 28217.81 | 33.71034 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          837.067                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 17. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        1 |       1 |    1 | 3065.938 | 5.586194 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          548.842                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 18. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        2 |       1 |    1 | 22795.82 |  49.4652 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         460.8455                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 19. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        3 |       1 |    1 |  7649.85 | 17.95528 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         426.0502                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 20. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        4 |       1 |    1 | 3509.817 | 10.38925 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         337.8316                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 21. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        1 |       1 |    1 | 3957.785 | 3.255546 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1215.706                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 22. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        2 |       1 |    1 | 545.9126 | 1.023783 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          533.231                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 23. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        3 |       1 |    1 | 4369.184 | 3.064291 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1425.838                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 24. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        4 |       1 |    1 | 339.0511 | .5714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         593.3394                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 25. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        1 |       1 |    1 |  2298.47 | 1.944316 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1182.148                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 26. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        2 |       1 |    1 | 15045.18 | 12.83642 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          1172.07                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 27. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        3 |       1 |    1 | 21369.76 | 19.61619 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1089.394                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 28. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        4 |       1 |    1 | 4921.135 | 4.041879 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1217.536                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 29. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        1 |       1 |    1 | 42585.09 | 449.9434 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         94.64543                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 30. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        2 |       1 |    1 | 1432.564 | 13.75675 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         104.1354                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 31. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        3 |       1 |    1 | 6284.902 | 98.07328 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         64.08373                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 32. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        4 |       1 |    1 | 290.2362 | .7744094 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          374.784                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 33. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        1 |       1 |    1 | 66946.23 | 103.2354 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         648.4814                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 34. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        2 |       1 |    1 |   106307 | 201.3744 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          527.907                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 35. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        3 |       1 |    1 |  49083.6 | 92.01516 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         533.4295                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 36. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        4 |       1 |    1 | 39234.93 |  64.3271 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         609.9285                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 37. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        1 |       1 |    1 | 142.8571 | .1428571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                             1000                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 38. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        2 |       1 |    1 | 7157.715 | 10.14349 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         705.6463                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 39. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        3 |       1 |    1 | 4091.374 | 12.79401 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         319.7881                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 40. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        4 |       1 |    1 | 2398.033 | 5.604387 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         427.8849                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 41. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        1 |       1 |    1 | 85.71429 | .1428571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              600                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 42. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        2 |       1 |    1 | 28.57143 | .0714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              400                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 43. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        3 |       1 |    1 | 186.6032 | .5714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         326.5555                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 44. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        1 |       1 |    1 | 3843.042 | 1.861784 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2064.172                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 45. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        2 |       1 |    1 | 12809.26 | 6.069779 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2110.334                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 46. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        3 |       1 |    1 | 12303.99 | 5.680539 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2165.989                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 47. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        4 |       1 |    1 | 17829.08 | 8.101571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2200.694                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 48. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        1 |       1 |    1 | 571.4286 | .1428571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                             4000                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 49. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        2 |       1 |    1 | 2190.069 | .5714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          3832.62                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 50. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        3 |       1 |    1 | 1453.083 | .5714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2542.896                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 51. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        4 |       1 |    1 | 2610.156 | .7142857 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         3654.219                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 52. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        1 |       1 |    1 | 5006.909 | 10.45994 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         478.6747                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 53. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        2 |       1 |    1 | 10998.66 | 17.12213 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         642.3654                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 54. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        3 |       1 |    1 | 8626.914 | 15.04184 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          573.528                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 55. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        4 |       1 |    1 | 7541.608 | 18.33114 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         411.4096                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 56. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        1 |       1 |    1 | 2355.035 | 8.790901 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         267.8947                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 57. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        2 |       1 |    1 | 6983.624 | 33.24443 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          210.069                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 58. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        3 |       1 |    1 | 6158.348 | 35.32363 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         174.3407                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 59. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        4 |       1 |    1 | 7093.849 | 62.28359 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          113.896                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 60. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        1 |       1 |    1 | 11178.51 |  51.7036 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         216.2037                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 61. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        2 |       1 |    1 | 29549.51 | 156.1067 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         189.2905                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 62. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        3 |       1 |    1 | 16992.74 |  74.9129 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         226.8333                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 63. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        4 |       1 |    1 | 13461.16 |  65.6903 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         204.9185                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 64. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        1 |       1 |    1 | 3964.993 | 45.80313 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         86.56597                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 65. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        2 |       1 |    1 | 8776.551 | 124.5658 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         70.45716                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 66. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        3 |       1 |    1 |  5290.31 | 72.54215 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          72.9274                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 67. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        4 |       1 |    1 | 5462.748 |  58.8469 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         92.82984                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 68. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        1 |       1 |    1 | 2798.704 | 11.10531 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          252.015                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 69. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        2 |       1 |    1 | 13435.63 | 37.05562 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                           362.58                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 70. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        3 |       1 |    1 | 41845.98 |  125.158 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         334.3452                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 71. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        4 |       1 |    1 | 13212.19 | 44.47468 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         297.0722                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 72. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        1 |       1 |    1 | 5234.169 | 45.62901 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         114.7114                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 73. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        2 |       1 |    1 | 11473.92 | 101.2831 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         113.2856                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 74. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        3 |       1 |    1 | 7105.211 | 64.49827 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         110.1613                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 75. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        4 |       1 |    1 | 4955.806 | 45.39653 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         109.1671                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 76. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        1 |       1 |    1 | 1998.333 | 20.26917 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         98.58981                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 77. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        2 |       1 |    1 | 7497.992 |  75.6644 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         99.09538                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 78. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        3 |       1 |    1 | 2394.867 | 23.93961 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         100.0378                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 79. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        4 |       1 |    1 | 4247.928 | 39.98552 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         106.2366                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 80. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        1 |       1 |    1 | 2052.726 | 22.35323 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         91.83129                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 81. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        2 |       1 |    1 | 4110.345 |   31.552 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         130.2721                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 82. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        3 |       1 |    1 |  1369.57 | 14.09186 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         97.18876                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 83. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        4 |       1 |    1 | 1530.451 | 19.68249 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         77.75699                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 84. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        1 |       1 |    1 | 16303.52 | 53.76817 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         303.2188                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 85. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        2 |       1 |    1 | 9486.844 | 27.16252 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         349.2624                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 86. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        3 |       1 |    1 |  4479.69 | 19.41171 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         230.7726                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 87. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        4 |       1 |    1 |  2603.34 | 7.251901 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         358.9872                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 88. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        1 |       1 |    1 | 15538.88 | 42.66084 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         364.2422                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 89. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        2 |       1 |    1 | 39397.82 | 105.7812 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         372.4463                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 90. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        3 |       1 |    1 | 31576.06 | 114.8752 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         274.8728                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 91. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        4 |       1 |    1 | 27148.64 | 50.12248 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         541.6461                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 92. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        1 |       1 |    1 | 2214.353 | 3.904787 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         567.0867                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 93. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        2 |       1 |    1 | 8197.522 | 18.97563 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         432.0025                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 94. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        3 |       1 |    1 | 4935.546 | 15.71432 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         314.0794                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 95. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        4 |       1 |    1 | 9130.902 | 25.62532 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         356.3235                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 96. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        2 |       1 |    1 | 285.7143 | .1428571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                             2000                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 97. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        4 |       1 |    1 | 42.85714 | .1428571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              300                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 98. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        2 |       1 |    1 | 612.7943 | .5714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          1072.39                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
 99. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        3 |       1 |    1 | 71.42857 | .0714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                             1000                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
100. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        1 |       1 |    1 | 16187.74 | 9.791795 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1653.195                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
101. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        2 |       1 |    1 |  35602.5 | 21.85749 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1628.847                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
102. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        3 |       1 |    1 | 26009.54 | 16.06858 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1618.658                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
103. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        4 |       1 |    1 |  21553.4 | 13.33529 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1616.268                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
104. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        1 |       1 |    1 |  1721.01 | 10.53944 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         163.2924                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
105. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        2 |       1 |    1 | 3815.709 | 21.41848 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         178.1503                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
106. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        3 |       1 |    1 | 2658.109 | 15.02412 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         176.9227                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
107. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        4 |       1 |    1 |  1700.06 | 10.22195 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         166.3147                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
108. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        1 |       2 |    2 |  21072.7 |  15.4843 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1360.907                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
109. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        2 |       2 |    2 | 28962.94 | 27.10606 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1068.504                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
110. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        3 |       2 |    2 | 30557.48 | 22.78107 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1341.354                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
111. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        4 |       2 |    2 | 36504.87 | 41.40497 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         881.6542                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
112. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        1 |       2 |    2 | 1398.177 | 1.234384 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1132.692                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
113. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        2 |       2 |    2 | 2037.013 |  1.11047 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1834.371                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
114. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        3 |       2 |    2 | 14467.16 | 6.409769 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2257.049                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
115. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        4 |       2 |    2 | 29658.47 | 16.17009 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1834.156                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
116. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        1 |       2 |    2 | 65213.98 | 99.54827 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         655.0991                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
117. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        2 |       2 |    2 | 137978.8 | 214.1822 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         644.2123                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
118. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        3 |       2 |    2 | 151690.5 | 254.5931 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         595.8154                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
119. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        4 |       2 |    2 | 70483.75 | 60.75163 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1160.195                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
120. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        1 |       2 |    2 | 29507.23 | 67.36361 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         438.0292                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
121. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        2 |       2 |    2 | 28827.28 | 33.43465 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         862.1979                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
122. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        3 |       2 |    2 |  12298.8 | 25.30951 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         485.9359                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
123. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        4 |       2 |    2 | 50672.23 | 64.96504 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         779.9922                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
124. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        1 |       2 |    2 | 85203.44 | 209.3232 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         407.0424                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
125. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        2 |       2 |    2 | 34476.72 | 108.1004 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         318.9324                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
126. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        3 |       2 |    2 |  55961.2 | 182.0006 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         307.4781                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
127. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        4 |       2 |    2 | 49265.72 | 140.3394 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          351.047                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
128. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        1 |       2 |    2 | 294.3309 | 1.284564 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         229.1289                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
129. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        2 |       2 |    2 | 2585.291 | 12.51289 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         206.6102                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
130. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        3 |       2 |    2 | 285.7143 | .7142857 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              400                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
131. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        4 |       2 |    2 | 599.2538 |  1.95017 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         307.2828                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
132. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        1 |       2 |    2 | 17916.49 | 21.13298 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         847.7977                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
133. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        2 |       2 |    2 | 25281.83 |  31.0473 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         814.3007                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
134. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        3 |       2 |    2 | 31044.42 | 41.28119 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         752.0234                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
135. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        4 |       2 |    2 | 16471.27 | 16.05358 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1026.019                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
136. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        1 |       2 |    2 | 44939.25 |  748.214 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         60.06202                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
137. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        2 |       2 |    2 | 17354.53 | 233.8585 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         74.20954                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
138. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        3 |       2 |    2 | 14419.35 | 219.2605 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         65.76356                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
139. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        4 |       2 |    2 | 42.85714 | .1428571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              300                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
140. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        1 |       2 |    2 | 91668.88 | 190.5745 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         481.0133                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
141. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        2 |       2 |    2 | 102546.3 | 245.9916 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         416.8692                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
142. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        3 |       2 |    2 | 81494.27 | 166.0101 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         490.8995                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
143. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        4 |       2 |    2 | 155426.2 | 336.4392 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          461.974                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
144. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        1 |       2 |    2 | 18024.67 | 39.82804 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         452.5623                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
145. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        2 |       2 |    2 |  14190.2 | 39.00435 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         363.8105                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
146. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        3 |       2 |    2 | 18183.76 | 43.37533 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         419.2188                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
147. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        4 |       2 |    2 | 33237.44 | 71.84495 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         462.6274                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
148. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        1 |       2 |    2 | 11142.09 | 63.47838 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         175.5258                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
149. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        2 |       2 |    2 |  2026.05 | 12.49542 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         162.1434                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
150. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        3 |       2 |    2 | 18811.74 |  123.012 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         152.9261                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
151. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        4 |       2 |    2 | 6841.844 |  48.2214 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          141.884                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
152. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        1 |       2 |    2 |  22844.3 | 9.347525 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2443.888                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
153. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        2 |       2 |    2 | 31287.85 | 12.79333 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2445.638                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
154. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        3 |       2 |    2 | 30958.78 | 12.67949 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2441.642                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
155. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        4 |       2 |    2 | 29934.18 | 12.37801 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2418.336                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
156. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        1 |       2 |    2 | 6691.944 | 2.092056 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          3198.74                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
157. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        2 |       2 |    2 | 10210.62 | 3.335884 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         3060.843                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
158. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        3 |       2 |    2 | 13085.31 | 4.068691 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         3216.097                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
159. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        4 |       2 |    2 | 9643.958 |        3 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         3214.653                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
160. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        1 |       2 |    2 | 17976.62 | 31.89412 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         563.6344                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
161. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        2 |       2 |    2 | 10206.56 | 15.23336 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         670.0138                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
162. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        3 |       2 |    2 | 28134.08 | 38.08221 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         738.7722                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
163. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        4 |       2 |    2 | 17432.43 | 32.88029 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         530.1787                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
164. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        1 |       2 |    2 | 14569.65 |  51.3482 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         283.7422                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
165. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        2 |       2 |    2 | 9562.227 | 39.05826 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         244.8196                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
166. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        3 |       2 |    2 | 12834.33 | 63.29673 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         202.7645                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
167. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        4 |       2 |    2 | 20402.12 | 69.85047 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         292.0827                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
168. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        1 |       2 |    2 |  19055.1 | 87.18094 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         218.5696                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
169. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        2 |       2 |    2 |  29575.6 | 129.2621 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         228.8033                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
170. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        3 |       2 |    2 | 22914.55 | 117.7151 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         194.6611                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
171. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        4 |       2 |    2 | 19324.07 | 81.51921 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         237.0493                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
172. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        1 |       2 |    2 | 13031.36 | 181.8361 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         71.66544                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
173. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        2 |       2 |    2 | 20510.16 | 280.2814 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         73.17705                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
174. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        3 |       2 |    2 | 14110.05 | 189.7193 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         74.37332                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
175. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        4 |       2 |    2 |  21303.2 | 304.7384 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         69.90652                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
176. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        1 |       2 |    2 | 1850.082 | 4.805801 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         384.9685                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
177. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        2 |       2 |    2 | 2007.837 | 8.876133 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         226.2063                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
178. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        3 |       2 |    2 | 16151.61 | 54.96579 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         293.8484                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
179. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        4 |       2 |    2 | 20218.94 | 56.83947 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         355.7201                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
180. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        1 |       2 |    2 | 14890.73 | 118.3728 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         125.7952                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
181. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        2 |       2 |    2 | 18404.28 | 145.4785 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         126.5086                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
182. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        3 |       2 |    2 | 21472.53 | 193.8696 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         110.7576                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
183. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        4 |       2 |    2 | 23517.57 | 166.6684 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          141.104                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
184. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        1 |       2 |    2 | 21266.63 | 246.4271 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         86.29986                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
185. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        2 |       2 |    2 | 23096.06 | 222.6768 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         103.7201                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
186. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        3 |       2 |    2 | 9120.751 | 93.84607 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         97.18842                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
187. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        4 |       2 |    2 | 26218.57 | 331.8349 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          79.0109                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
188. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        1 |       2 |    2 | 28493.22 | 289.8346 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         98.30855                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
189. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        2 |       2 |    2 | 25699.05 | 261.4231 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         98.30443                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
190. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        3 |       2 |    2 |  23550.2 | 243.3006 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         96.79465                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
191. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        4 |       2 |    2 | 12245.17 | 124.5877 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         98.28552                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
192. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        1 |       2 |    2 | 11818.21 | 37.65167 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         313.8828                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
193. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        2 |       2 |    2 | 5752.831 | 28.12924 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         204.5143                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
194. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        3 |       2 |    2 | 1680.457 | 8.739759 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         192.2772                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
195. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        4 |       2 |    2 | 85.71429 | .2857143 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              300                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
196. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        1 |       2 |    2 | 35623.24 | 111.4969 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         319.4998                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
197. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        2 |       2 |    2 | 21501.04 | 59.52638 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         361.2019                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
198. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        3 |       2 |    2 | 39383.52 | 92.01992 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          427.989                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
199. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        4 |       2 |    2 | 32424.37 | 52.37679 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                           619.06                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
200. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        1 |       2 |    2 | 4963.093 |  16.5225 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         300.3839                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
201. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        2 |       2 |    2 | 7295.964 |  34.6153 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         210.7728                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
202. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        3 |       2 |    2 | 6250.011 | 39.43476 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         158.4899                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
203. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        4 |       2 |    2 | 12093.43 | 58.64569 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         206.2118                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
204. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        1 |       2 |    2 |  968.429 | 3.835223 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         252.5092                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
205. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        2 |       2 |    2 | 836.2954 | 3.079186 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         271.5963                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
206. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        3 |       2 |    2 | 9900.293 | 39.69377 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         249.4168                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
207. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        4 |       2 |    2 | 259.5035 | .8257265 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         314.2729                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
208. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        1 |       2 |    2 | 777.5953 |  1.52954 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         508.3851                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
209. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        2 |       2 |    2 | 701.2689 | 1.184039 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         592.2683                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
210. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        3 |       2 |    2 | 599.3758 | 1.546987 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         387.4471                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
211. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        4 |       2 |    2 | 479.4042 | .7519666 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         637.5339                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
212. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        1 |       2 |    2 | 49458.16 | 38.00319 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1301.421                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
213. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        2 |       2 |    2 | 42149.98 |  67.8808 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         620.9412                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
214. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        3 |       2 |    2 | 39001.04 |  27.5046 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1417.982                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
215. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        4 |       2 |    2 | 47141.21 | 42.26292 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1115.427                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
216. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        1 |       2 |    2 | 3865.617 | 22.69776 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         170.3083                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
217. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        2 |       2 |    2 | 4319.251 | 33.32901 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         129.5943                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
218. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        3 |       2 |    2 | 4444.254 | 30.98773 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         143.4198                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
219. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        4 |       2 |    2 | 5306.819 |  32.1305 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         165.1645                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
220. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        1 |       3 |    3 | 1390.987 | .8131065 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1710.707                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
221. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        2 |       3 |    3 | 1768.265 | .9170238 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1928.266                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
222. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        3 |       3 |    3 | 4379.008 |  2.02721 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2160.116                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
223. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        4 |       3 |    3 | 3081.916 | 14.49261 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         212.6543                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
224. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        1 |       3 |    3 | 71.42857 | .1428571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              500                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
225. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        1 |       3 |    3 | 8488.497 | 26.85067 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         316.1372                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
226. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        2 |       3 |    3 | 41455.81 | 187.5475 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         221.0416                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
227. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        3 |       3 |    3 | 79235.29 | 405.7402 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         195.2858                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
228. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        4 |       3 |    3 | 24967.52 | 101.3181 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          246.427                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
229. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        1 |       3 |    3 | 65137.52 | 225.4568 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         288.9135                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
230. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        2 |       3 |    3 | 49940.01 | 180.0392 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         277.3842                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
231. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        3 |       3 |    3 | 48365.95 | 174.7898 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         276.7093                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
232. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        4 |       3 |    3 | 48691.62 | 167.2456 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         291.1384                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
233. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        1 |       3 |    3 | 55865.83 | 287.4899 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         194.3228                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
234. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        2 |       3 |    3 | 45708.51 | 183.6865 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         248.8398                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
235. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        3 |       3 |    3 | 73195.07 | 224.6885 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         325.7624                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
236. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        4 |       3 |    3 | 73740.97 | 266.7387 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          276.454                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
237. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        1 |       3 |    3 | 71.42857 | .0714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                             1000                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
238. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        2 |       3 |    3 | 428.5714 | .4285714 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                             1000                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
239. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        3 |       3 |    3 |  109.588 | .2260299 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         484.8386                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
240. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        4 |       3 |    3 | 942.7636 | 1.211593 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          778.119                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
241. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        1 |       3 |    3 | 2026.852 | 3.257749 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         622.1635                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
242. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        2 |       3 |    3 | 2388.418 | 3.808495 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          627.129                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
243. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        3 |       3 |    3 | 1982.076 | 4.740141 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          418.147                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
244. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        4 |       3 |    3 |  1874.37 | 3.196385 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          586.403                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
245. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        1 |       3 |    3 |  33098.1 | 475.2548 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         69.64285                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
246. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        2 |       3 |    3 | 37416.37 | 506.7127 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         73.84138                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
247. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        3 |       3 |    3 | 3009.034 | 22.65483 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         132.8208                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
248. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        4 |       3 |    3 | 28.57143 | .2857143 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         99.99999                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
249. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        1 |       3 |    3 | 43684.85 | 271.3043 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         161.0179                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
250. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        2 |       3 |    3 | 129694.7 | 1073.017 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         120.8692                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
251. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        3 |       3 |    3 | 69180.49 | 629.3461 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         109.9244                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
252. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        4 |       3 |    3 |  25567.2 | 163.5918 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         156.2866                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
253. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        1 |       3 |    3 | 9733.962 | 68.69202 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         141.7044                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
254. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        2 |       3 |    3 | 10399.43 | 85.77323 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         121.2433                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
255. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        3 |       3 |    3 | 7140.829 | 54.27897 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         131.5579                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
256. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        4 |       3 |    3 | 14413.46 | 94.16258 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         153.0699                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
257. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        1 |       3 |    3 | 28063.41 |  206.534 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         135.8779                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
258. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        2 |       3 |    3 | 30862.66 | 295.0106 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         104.6154                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
259. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        3 |       3 |    3 | 21349.48 | 195.7935 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         109.0408                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
260. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        4 |       3 |    3 | 19521.76 | 133.7114 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         145.9992                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
261. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        1 |       3 |    3 | 10765.15 |  4.39301 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2450.517                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
262. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        2 |       3 |    3 | 24206.23 | 9.613958 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2517.821                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
263. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        3 |       3 |    3 | 18742.51 | 7.010836 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2673.363                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
264. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        4 |       3 |    3 |  12267.5 | 5.197029 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2360.484                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
265. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        1 |       3 |    3 | 7497.727 | 2.006038 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          3737.58                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
266. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        2 |       3 |    3 | 8668.904 | 2.988937 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          2900.33                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
267. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        3 |       3 |    3 | 6657.606 | 2.211886 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         3009.923                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
268. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        4 |       3 |    3 | 9173.973 | 2.998978 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         3059.033                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
269. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        1 |       3 |    3 | 10817.72 | 41.10144 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         263.1956                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
270. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        2 |       3 |    3 | 5912.496 | 16.39344 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         360.6624                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
271. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        3 |       3 |    3 | 6133.215 | 17.94412 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         341.7952                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
272. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        4 |       3 |    3 | 11417.15 | 25.69626 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         444.3115                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
273. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        1 |       3 |    3 | 12269.63 | 59.98422 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         204.5476                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
274. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        2 |       3 |    3 | 26269.01 | 105.8623 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         248.1433                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
275. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        3 |       3 |    3 | 27883.44 | 109.9474 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          253.607                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
276. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        4 |       3 |    3 |  14075.2 |  47.9428 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         293.5831                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
277. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        1 |       3 |    3 | 5477.911 | 39.58321 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         138.3898                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
278. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        2 |       3 |    3 | 14310.45 | 123.8312 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         115.5641                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
279. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        3 |       3 |    3 | 2099.041 | 11.13789 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         188.4595                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
280. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        4 |       3 |    3 | 10170.95 | 57.76746 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         176.0672                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
281. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        1 |       3 |    3 | 18529.32 | 220.2945 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          84.1116                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
282. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        2 |       3 |    3 | 34600.24 | 265.6703 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         130.2375                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
283. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        3 |       3 |    3 |  45452.1 | 385.9982 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         117.7521                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
284. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        4 |       3 |    3 | 18074.36 | 155.6446 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         116.1258                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
285. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        1 |       3 |    3 | 736.1901 | 12.72987 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         57.83168                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
286. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        2 |       3 |    3 | 1075.561 | 8.609292 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         124.9303                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
287. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        3 |       3 |    3 | 1070.385 | 5.296579 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         202.0898                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
288. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        4 |       3 |    3 | 604.9731 | 3.653728 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         165.5769                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
289. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        1 |       3 |    3 | 7399.334 | 59.01362 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         125.3835                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
290. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        2 |       3 |    3 | 15786.68 | 137.2988 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         114.9805                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
291. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        3 |       3 |    3 | 16103.79 | 132.8627 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         121.2062                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
292. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        4 |       3 |    3 | 4532.003 | 31.85252 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         142.2808                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
293. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        1 |       3 |    3 | 3491.114 |   46.383 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         75.26711                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
294. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        2 |       3 |    3 | 6159.278 |  77.9205 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         79.04566                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
295. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        3 |       3 |    3 | 4723.327 | 73.18727 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         64.53755                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
296. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        4 |       3 |    3 | 1449.463 |  22.2748 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         65.07185                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
297. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        1 |       3 |    3 | 35659.61 |  403.404 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         88.39677                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
298. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        2 |       3 |    3 | 37263.01 | 426.3994 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         87.38993                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
299. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        3 |       3 |    3 | 23739.66 |  338.125 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         70.20972                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
300. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        4 |       3 |    3 |  11074.3 | 169.8476 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         65.20141                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
301. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        1 |       3 |    3 | 2708.876 | 16.96873 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         159.6393                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
302. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        2 |       3 |    3 |  12619.7 | 71.95159 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         175.3916                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
303. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        3 |       3 |    3 | 794.5994 | 3.920937 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         202.6555                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
304. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        4 |       3 |    3 | 1076.343 | 5.381717 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              200                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
305. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        1 |       3 |    3 | 98183.32 |  366.459 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         267.9244                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
306. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        2 |       3 |    3 | 77751.27 | 330.1998 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         235.4673                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
307. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        3 |       3 |    3 | 76885.44 | 421.2923 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         182.4991                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
308. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        4 |       3 |    3 | 80728.98 | 376.7726 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         214.2644                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
309. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        1 |       3 |    3 | 171.4286 | .8571429 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              200                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
310. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        2 |       3 |    3 | 347.1684 | 2.552378 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         136.0176                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
311. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        3 |       3 |    3 | 129.3591 | .4206945 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         307.4895                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
312. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        4 |       3 |    3 | 1197.845 | 4.752976 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                           252.02                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
313. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        1 |       3 |    3 | 10035.05 | 46.09267 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         217.7147                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
314. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        2 |       3 |    3 | 18180.68 | 124.1616 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         146.4275                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
315. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        3 |       3 |    3 | 31821.49 | 190.5295 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         167.0161                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
316. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        4 |       3 |    3 | 8972.977 | 36.11071 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         248.4852                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
317. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        1 |       3 |    3 | 14647.41 |   58.829 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         248.9829                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
318. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        2 |       3 |    3 | 14079.88 | 55.43043 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                           254.01                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
319. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        3 |       3 |    3 | 27917.39 | 126.2995 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         221.0412                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
320. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        4 |       3 |    3 | 23077.73 | 93.19566 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         247.6266                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
321. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        1 |       3 |    3 | 15953.17 | 47.40394 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         336.5369                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
322. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        2 |       3 |    3 | 26247.18 | 75.98398 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         345.4305                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
323. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        3 |       3 |    3 | 37774.88 | 146.0861 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         258.5795                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
324. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        4 |       3 |    3 | 17472.09 | 40.56834 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         430.6828                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
325. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        1 |       3 |    3 | 5020.994 | 39.28343 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         127.8145                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
326. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        2 |       3 |    3 | 7870.837 | 67.61603 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         116.4049                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
327. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        3 |       3 |    3 | 8427.949 | 62.24297 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          135.404                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
328. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        4 |       3 |    3 | 4074.923 | 30.24792 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         134.7174                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
329. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        1 |       4 |    4 | 67774.53 | 47.41165 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1429.491                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
330. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        2 |       4 |    4 | 52803.38 | 41.23083 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1280.677                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
331. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        3 |       4 |    4 | 81134.07 | 51.24709 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1583.194                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
332. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     101 |        4 |       4 |    4 |  77093.2 | 63.62402 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                           1211.7                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
333. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        1 |       4 |    4 | 44710.01 | 26.69745 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1674.692                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
334. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        2 |       4 |    4 | 27802.32 | 20.84711 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          1333.63                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
335. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        3 |       4 |    4 | 8200.108 | 5.951261 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1377.877                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
336. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     102 |        4 |       4 |    4 | 10330.92 | 6.828694 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1512.868                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
337. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        1 |       4 |    4 | 36429.02 | 32.09259 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1135.122                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
338. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        2 |       4 |    4 | 35114.63 | 41.97553 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                           836.55                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
339. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        3 |       4 |    4 | 71459.49 | 70.32612 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1016.116                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
340. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     105 |        4 |       4 |    4 | 26323.16 | 24.19417 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1087.996                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
341. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        1 |       4 |    4 | 14882.34 | 25.30433 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         588.1344                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
342. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        2 |       4 |    4 |  27322.3 | 54.72894 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         499.2294                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
343. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        3 |       4 |    4 | 15433.37 | 23.52552 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         656.0269                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
344. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     107 |        4 |       4 |    4 | 38836.86 | 57.10935 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         680.0438                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
345. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        1 |       4 |    4 | 16077.57 | 107.2588 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         149.8951                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
346. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        2 |       4 |    4 | 27149.66 | 119.8567 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         226.5177                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
347. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        3 |       4 |    4 | 8169.376 | 49.70824 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         164.3465                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
348. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     108 |        4 |       4 |    4 | 37335.53 | 127.6286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         292.5327                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
349. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        1 |       4 |    4 | 17595.89 | 17.94794 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         980.3853                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
350. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        2 |       4 |    4 | 4791.304 |  7.03005 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         681.5462                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
351. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        3 |       4 |    4 | 42830.51 | 24.98053 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1714.556                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
352. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     109 |        4 |       4 |    4 | 3505.268 | 3.459595 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1013.202                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
353. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        1 |       4 |    4 | 4580.668 | 6.608866 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         693.1096                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
354. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        2 |       4 |    4 |  1802.18 | 1.818912 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         990.8011                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
355. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        3 |       4 |    4 | 1786.946 | 2.794887 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         639.3626                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
356. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     110 |        4 |       4 |    4 | 4960.951 | 4.926336 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1007.027                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
357. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        1 |       4 |    4 | 10937.86 |   147.26 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          74.2758                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
358. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        2 |       4 |    4 | 1903.234 | 19.03234 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              100                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
359. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        3 |       4 |    4 | 11361.55 | 150.9351 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         75.27444                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
360. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     112 |        4 |       4 |    4 | 417.9261 | 2.665528 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         156.7893                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
361. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        1 |       4 |    4 | 28516.16 | 60.27339 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         473.1137                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
362. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        2 |       4 |    4 | 40319.44 | 108.4298 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         371.8483                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
363. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        3 |       4 |    4 | 32855.64 | 76.37286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         430.2005                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
364. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     113 |        4 |       4 |    4 | 27924.68 | 95.68695 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         291.8337                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
365. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        1 |       4 |    4 | 30216.19 |  53.8821 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         560.7834                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
366. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        2 |       4 |    4 | 10917.86 |  35.8112 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         304.8727                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
367. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        3 |       4 |    4 |  17490.2 | 51.98106 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         336.4725                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
368. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     115 |        4 |       4 |    4 | 24237.91 | 115.0451 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         210.6818                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
369. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        1 |       4 |    4 | 2518.776 | 6.007933 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         419.2417                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
370. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        2 |       4 |    4 | 1569.046 | 8.067675 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         194.4855                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
371. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        3 |       4 |    4 | 6853.654 | 16.40746 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         417.7157                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
372. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     116 |        4 |       4 |    4 | 1369.527 | 6.031814 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         227.0506                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
373. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        1 |       4 |    4 | 9916.254 | 4.808438 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2062.261                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
374. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        2 |       4 |    4 | 16800.88 | 7.516048 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2235.334                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
375. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        3 |       4 |    4 | 13654.48 | 6.406459 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2131.362                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
376. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     117 |        4 |       4 |    4 | 21581.57 | 10.49265 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2056.828                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
377. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        2 |       4 |    4 | 2679.254 | .7142857 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         3750.955                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
378. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        3 |       4 |    4 | 1300.179 | .4285714 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         3033.752                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
379. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     121 |        4 |       4 |    4 | 2285.714 | .7656507 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         2985.323                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
380. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        1 |       4 |    4 | 1383.082 | 1.022819 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1352.224                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
381. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        2 |       4 |    4 | 3573.863 | 5.095131 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         701.4271                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
382. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        3 |       4 |    4 | 1266.281 | 2.178585 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         581.2398                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
383. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     122 |        4 |       4 |    4 | 5043.034 | 4.167294 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1210.146                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
384. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        1 |       4 |    4 | 4418.389 | 10.75712 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         410.7407                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
385. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        2 |       4 |    4 | 4651.051 | 5.063213 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         918.5969                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
386. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        3 |       4 |    4 | 5906.646 | 5.296248 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1115.251                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
387. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     123 |        4 |       4 |    4 | 9721.339 | 10.21323 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         951.8377                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
388. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        1 |       4 |    4 | 15580.53 | 90.69982 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         171.7813                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
389. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        2 |       4 |    4 | 8294.302 | 38.52665 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         215.2874                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
390. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        3 |       4 |    4 | 15322.15 |  115.793 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         132.3236                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
391. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     125 |        4 |       4 |    4 | 14491.29 | 102.3825 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         141.5407                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
392. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        1 |       4 |    4 | 3808.395 | 27.25115 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         139.7517                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
393. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        2 |       4 |    4 | 2297.123 | 14.80115 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          155.199                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
394. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        3 |       4 |    4 | 2077.344 | 15.06358 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         137.9051                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
395. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     127 |        4 |       4 |    4 | 3647.508 | 32.85721 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         111.0109                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
396. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        1 |       4 |    4 |   1212.8 | 15.46956 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         78.39916                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
397. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        2 |       4 |    4 |  11107.8 | 72.15061 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         153.9529                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
398. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        3 |       4 |    4 | 2453.402 |  24.4971 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         100.1507                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
399. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     134 |        4 |       4 |    4 | 2329.909 | 27.83563 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          83.7024                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
400. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        1 |       4 |    4 | 6556.756 | 47.24859 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         138.7715                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
401. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        2 |       4 |    4 | 7595.717 |  54.4986 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         139.3745                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
402. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        3 |       4 |    4 | 5087.003 | 30.51331 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         166.7142                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
403. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     136 |        4 |       4 |    4 | 5463.213 | 32.22252 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         169.5464                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
404. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        1 |       4 |    4 | 4886.908 | 51.21239 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         95.42434                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
405. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        2 |       4 |    4 | 5124.895 | 46.73009 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         109.6701                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
406. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        3 |       4 |    4 | 6187.434 | 64.93464 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         95.28712                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
407. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     138 |        4 |       4 |    4 | 7312.347 | 91.19976 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         80.17946                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
408. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        1 |       4 |    4 | 4571.093 | 24.29969 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         188.1132                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
409. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        2 |       4 |    4 | 3812.683 | 37.91977 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         100.5461                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
410. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        3 |       4 |    4 | 2079.029 | 17.41404 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         119.3881                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
411. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     139 |        4 |       4 |    4 | 705.4369 | 7.170858 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         98.37552                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
412. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        1 |       4 |    4 | 27917.87 | 107.5945 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         259.4731                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
413. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        2 |       4 |    4 | 2177.396 | 8.225445 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         264.7147                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
414. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        3 |       4 |    4 | 25781.74 | 129.2053 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         199.5409                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
415. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     140 |        4 |       4 |    4 | 1440.262 | 13.87893 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         103.7732                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
416. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        1 |       4 |    4 | 37846.71 | 119.7399 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         316.0743                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
417. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        2 |       4 |    4 | 49864.93 | 173.3917 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         287.5855                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
418. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        3 |       4 |    4 | 44129.97 | 136.6028 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         323.0532                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
419. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     141 |        4 |       4 |    4 | 53347.27 | 137.2929 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         388.5655                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
420. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        1 |       4 |    4 | 11808.91 | 25.18073 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         468.9661                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
421. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        2 |       4 |    4 | 13343.06 | 24.32888 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         548.4454                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
422. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        3 |       4 |    4 | 3354.114 | 5.539579 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         605.4817                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
423. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     144 |        4 |       4 |    4 | 4794.505 | 10.10423 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         474.5046                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
424. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        1 |       4 |    4 | 1810.105 | 3.772482 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         479.8181                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
425. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        2 |       4 |    4 | 533.3512 | 1.479786 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         360.4247                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
426. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        3 |       4 |    4 | 962.0808 | 1.923405 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         500.1967                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
427. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     145 |        4 |       4 |    4 | 2337.321 | 3.251221 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         718.9055                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
428. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        2 |       4 |    4 | 235.4197 | .5714286 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         411.9844                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
429. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        3 |       4 |    4 | 71.42857 | .1428571 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                              500                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
430. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     146 |        4 |       4 |    4 | 337.4349 | 4.426223 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                          76.2354                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
431. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        1 |       4 |    4 | 13816.81 | 9.729025 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1420.164                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
432. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        2 |       4 |    4 | 12787.05 |  8.61412 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1484.429                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
433. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        3 |       4 |    4 | 9726.157 | 6.337428 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1534.717                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
434. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     147 |        4 |       4 |    4 | 11800.97 | 7.118523 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         1657.783                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
435. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        1 |       4 |    4 | 4401.865 | 21.30583 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         206.6038                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
436. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        2 |       4 |    4 | 3928.388 | 21.02952 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         186.8035                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
437. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        3 |       4 |    4 | 4180.125 | 20.89964 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         200.0094                          |
     +-----------------------------------------------------------+

     +-----------------------------------------------------------+
438. | product | survquar | reg_tpi | news | valued~t | quanti~t |
     |     150 |        4 |       4 |    4 | 3617.738 |  17.1666 |
     |-----------------------------------------------------------|
     |                         ppkg_t~m                          |
     |                         210.7428                          |
     +-----------------------------------------------------------+

.                         tempfile uvq2;

.                         keep reg_tpi product survquar ppkg_trim;

.                 save `uvq2', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000e.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000e.tmp saved

.                                 use `uvq' ;

.                         merge reg_tpi product survquar using `uvq2';
(label region already defined)
(label lsurvquar already defined)

.                         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        438      100.00      100.00
------------+-----------------------------------
      Total |        438      100.00

.                         drop _merge;

.                 save `uvq', replace;
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp saved

.                 save "$path/work/tpi_unit_val_quarterly.dta", replace
> ;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/tpi_unit_val_quarterly.dta saved

.         restore;

. *********************************************************************
> *****;
. * Now calculate the weights for the temporal price index. The weights
> * will be based on the bottom 50% of the national nominal consumption
> * per capita (see below). We let the weights vary by strata (3 region
> s X rural/urban).
> *
> * First, make a small file that has the total nominal HH daily consum
> ption,
> * to use as our denominator. We cannot simply use the `bottom_tpi' fi
> le that
> * was created earlier because we will need some other variables from
> * the cons_cat.dta file.
> *********************************************************************
> *****;
. use "$path/work/conpc.dta", clear;

. keep hhid cons_hh_nom;

. *use "$path/in/cons_cat.dta", clear ;
. *CA modified to merge in hhdata for bootstrap;
.        sort hhid;

.         merge hhid using "$path/work/hhdata.dta";

.           tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         collapse (mean) cons_hh_nom hhsize strata hhweight rural news
>  survquar reg_tpi,
>                 by(hhid);

.         lab var cons_hh_nom "Nominal daily HH consumption";

.         rename hhsize   cc_hhs;

.         rename strata   cc_reg;

.         rename hhweight cc_hhw;

.         rename rural    cc_rur;

.         rename news     cc_news;

.         rename survquar cc_qua;

.         rename reg_tpi  cc_reg_tpi;

.         sort hhid;

.         tempfile thhcons;

. save `thhcons', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000f.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000f.tmp saved

. *********************************************************************
> *****;
. * Merge the file with consumption on the food products with HH consum
> ption file,
> * then use "fillin" to take care of cases where a household did not
> * consume all n_tpi commodities. Note that we need to do the merge
> * first because there are some households that are not in `acredd' at
> * all, because they did not consume *any* of the n_tpi items. Then re
> place
> * missing values in the "filled in" observations with the relevant va
> lues 
> * for that household.
> *********************************************************************
> *****;
. use `acredd';

.         cap drop _merge;

.         drop if product==.;
(240 observations deleted)

.         merge hhid using `thhcons';
variable hhid does not uniquely identify observations in the master
    data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        241        0.36        0.36
          3 |     67,270       99.64      100.00
------------+-----------------------------------
      Total |     67,511      100.00

.         for var valued_tot quantityd_tot : replace X=0 if _merge==2;

->  replace valued_tot=0 if _merge==2
(241 real changes made)

->  replace quantityd_tot=0 if _merge==2
(241 real changes made)

.                 /*
>         for var valued_ac quantityd_ac valued_re quantityd_re valued_
> dd quantityd_dd 
>                 valued_tot quantityd_tot : replace X=0 if _merge==2;
>                                 */
> 
>         replace hhsize  =cc_hhs     if _merge==2;
(238 real changes made)

.         replace strata  =cc_reg     if _merge==2;
(240 real changes made)

.         replace hhweight=cc_hhw     if _merge==2;
(240 real changes made)

.         replace rural   =cc_rur     if _merge==2;
(240 real changes made)

.         replace news    =cc_news        if _merge==2;
(240 real changes made)

.         replace survquar=cc_qua     if _merge==2;
(240 real changes made)

.         replace reg_tpi =cc_reg_tpi     if _merge==2;
(240 real changes made)

.         drop _merge cc_* ;

.                 fillin hhid product;

.         replace valued_tot=0 if _fillin;
(155299 real changes made)

.                 for var quantityd_tot 
>                 strata rural hhweight hhsize survquar survmon news re
> g_tpi cons_hh_nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;

->  egen tmp=mean(quantityd_tot), by(hhid)

->  replace quantityd_tot=tmp if _fillin
(155299 real changes made)

->  drop tmp

->  egen tmp=mean(strata), by(hhid)
(30 missing values generated)

->  replace strata=tmp if _fillin
(155270 real changes made)

->  drop tmp

->  egen tmp=mean(rural), by(hhid)
(30 missing values generated)

->  replace rural=tmp if _fillin
(155270 real changes made)

->  drop tmp

->  egen tmp=mean(hhweight), by(hhid)
(30 missing values generated)

->  replace hhweight=tmp if _fillin
(155270 real changes made)

->  drop tmp

->  egen tmp=mean(hhsize), by(hhid)
(360 missing values generated)

->  replace hhsize=tmp if _fillin
(155030 real changes made)

->  drop tmp

->  egen tmp=mean(survquar), by(hhid)
(30 missing values generated)

->  replace survquar=tmp if _fillin
(155270 real changes made)

->  drop tmp

->  egen tmp=mean(survmon), by(hhid)
(7230 missing values generated)

->  replace survmon=tmp if _fillin
(148310 real changes made)

->  drop tmp

->  egen tmp=mean(news), by(hhid)
(30 missing values generated)

->  replace news=tmp if _fillin
(155270 real changes made)

->  drop tmp

->  egen tmp=mean(reg_tpi), by(hhid)
(30 missing values generated)

->  replace reg_tpi=tmp if _fillin
(155270 real changes made)

->  drop tmp

->  egen tmp=mean(cons_hh_nom), by(hhid)
(30 missing values generated)

->  replace cons_hh_nom=tmp if _fillin
(155270 real changes made)

->  drop tmp

.                                 /*
>         for var valued_ac quantityd_ac valued_re quantityd_re valued_
> dd quantityd_dd 
>                 quantityd_tot 
>                 strata rural hhweight hhsize survquar survmon news re
> g_tpi cons_hh_nom :
>                 egen tmp=mean(X), by(hhid) \
>                 replace X=tmp if _fillin \
>                 drop tmp;
>                                 */
> 
> *********************************************************************
> *****;
. * Now calculate the shares, and then the mean shares in each strata, 
> * using hhweight*hhsize weighting. 
> * Note that we are not doing quantity weighting now for the shares.
> *********************************************************************
> *****;
.         gen share = valued_tot/cons_hh_nom ;
(60 missing values generated)

.         gen popwt = hhsize*hhweight;
(360 missing values generated)

.         lab var share "HH share in total consumption";

.         lab var popwt "Population weight: hhsize*hhweight";

. *********************************************************************
> *****;
. * Select the bottom 50% (weighted) of the distribution of nominal per
>  
> * capita consumption.
> *********************************************************************
> *****;
.         gen cpc=cons_hh_nom/hhsize;
(390 missing values generated)

.         sum cpc [aw=hhweight] , detail;

                             cpc
-------------------------------------------------------------
      Percentiles      Smallest
 1%     192.3718       57.35135
 5%     279.9608       57.35135
10%     349.6482       57.35135       Obs              222420
25%     512.2343       57.35135       Sum of Wgt.   156806365

50%     810.1329                      Mean           1184.867
                        Largest       Std. Dev.      1479.217
75%     1345.188       112858.3
90%     2314.373       112858.3       Variance        2188083
95%     3249.393       112858.3       Skewness       16.60144
99%         6246       112858.3       Kurtosis       899.9286

.         global medcpc=r(p$tpi_bottom);

. * MAH ;
.  sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |    222780    2.48e+09    1.13e+09   1.01e+09   4.15e+09
     product |    215383         126    16.41702        101        161
  valued_tot |    222810    81.42172    261.2823          0      24000
quantityd_~t |    222810    .6809861    3.148585          0   857.1429
      hhsize |    222450    5.782738    3.284187          1         33
-------------+--------------------------------------------------------
    hhweight |    222780    704.6189    339.0021      60.97    4404.13
    survquar |    222780     2.50983    1.074508          1          4
     survmon |    215580    6.485249     3.30362          1         12
      strata |    222780    5.644762    2.836299          1         10
       rural |    222780    .7712093    .4200551          0          1
-------------+--------------------------------------------------------
     reg_tpi |    222780    2.412604    1.133425          1          4
    spdomain |     67270    5.456459    2.387251          1          9
        news |    222780    2.412604    1.133425          1          4
 cons_hh_nom |    222780    5972.284    10299.46          0   677149.6
     _fillin |    222810    .6970019    .4595554          0          1
-------------+--------------------------------------------------------
       share |    222750    .0162198    .0451776          0   .9170287
       popwt |    222450    4061.087    3109.563      90.05   57253.69
         cpc |    222420    1191.963    1902.319   57.35135   112858.3

.  codebook hhid;

-----------------------------------------------------------------------
hhid                                                        (unlabeled)
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7426                     missing .:  30/222810

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

.         keep if cpc<=$medcpc;
(111780 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |    111030    2.63e+09    9.89e+08   1.01e+09   4.15e+09
     product |    107329         126    16.41706        101        161
  valued_tot |    111030    59.76292    182.3739          0       5000
quantityd_~t |    111030    .7690934    4.202635          0   857.1429
      hhsize |    111030    6.419887    2.965158          1         29
-------------+--------------------------------------------------------
    hhweight |    111030    706.2098    292.8886      60.97    4404.13
    survquar |    111030    2.482572    1.059199          1          4
     survmon |    110040    6.424482    3.225209          1         12
      strata |    111030    6.024048    2.435166          1         10
       rural |    111030    .8892191     .313862          0          1
-------------+--------------------------------------------------------
     reg_tpi |    111030    2.566604    .9912976          1          4
    spdomain |     30606    5.932595    1.985258          1          9
        news |    111030    2.566604    .9912976          1          4
 cons_hh_nom |    111030    3235.749    1895.326   95.06575   15388.31
     _fillin |    111030    .7240476     .446995          0          1
-------------+--------------------------------------------------------
       share |    111030    .0186125    .0517349          0   .7946276
       popwt |    111030    4509.461    2879.001      90.05   57253.69
         cpc |    111030    509.3736    168.3717   57.35135   810.1329

.                 collapse (mean) share (median) medshare=share [aw=pop
> wt] , 
>                         by(reg_tpi product);

.                 egen sumsh=sum(share) , by(reg_tpi);

.                 replace share=share/sumsh;
(112 real changes made)

.                 drop sumsh;

.                 egen sumsh=sum(medshare) , by(reg_tpi);

.                 replace medshare=medshare/sumsh;
(25 real changes made)

.                 drop sumsh;

.                 lab var share "Reg 6: Mean HH share of total consumpt
> ion";

.                 lab var medshare "Reg 6: Median HH share of total con
> sumption";

.                 sort reg_tpi product;

.                 save "$path/work/tpi_reg_tpi_share.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/tpi_reg_tpi_share.dta saved

.                 tempfile tempwt6;

.                 save `tempwt6', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000g.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000g.tmp saved

. use `uvq', clear;

.         sort reg_tpi product;

. save , replace;
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp saved

. use `tempwt6';

.         merge reg_tpi product using `uvq';
variables reg_tpi product do not uniquely identify observations in
    C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          8        1.79        1.79
          3 |        438       98.21      100.00
------------+-----------------------------------
      Total |        446      100.00

.         gen tpi1     =ppkg     *share;
(8 missing values generated)

.         gen tpi1_trim=ppkg_trim*share;
(8 missing values generated)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |       442    125.0249    15.51539        101        161
     reg_tpi |       446    2.506726    1.115247          1          4
       share |       446    .0358547    .0389121          0   .1782766
    medshare |       446    .0358744    .0900386          0   .5244855
    survquar |       438    2.502283    1.115214          1          4
-------------+--------------------------------------------------------
        news |       438    2.506849    1.115195          1          4
  valued_tot |       438    13104.14    15911.72   28.57143   123103.6
quantityd_~t |       438    51.93035    121.7588   .0714286   1647.011
        ppkg |       438    653.4394    736.9162   7.135695       4000
   ppkg_trim |       438     625.512    750.6203   57.83168       4000
-------------+--------------------------------------------------------
      _merge |       446    2.964126    .2657447          1          3
        tpi1 |       438    25.04879    40.48104   .0171248   312.1197
   tpi1_trim |       438    23.57136    38.36288   .0171248   282.2463

. keep if survquar!=.;
(8 observations deleted)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     product |       438    124.6963     15.1979        101        150
     reg_tpi |       438    2.506849    1.115195          1          4
       share |       438    .0365095    .0389603   .0000342   .1782766
    medshare |       438    .0365297    .0907269          0   .5244855
    survquar |       438    2.502283    1.115214          1          4
-------------+--------------------------------------------------------
        news |       438    2.506849    1.115195          1          4
  valued_tot |       438    13104.14    15911.72   28.57143   123103.6
quantityd_~t |       438    51.93035    121.7588   .0714286   1647.011
        ppkg |       438    653.4394    736.9162   7.135695       4000
   ppkg_trim |       438     625.512    750.6203   57.83168       4000
-------------+--------------------------------------------------------
      _merge |       438           3           0          3          3
        tpi1 |       438    25.04879    40.48104   .0171248   312.1197
   tpi1_trim |       438    23.57136    38.36288   .0171248   282.2463

. list in  1/3;

     +----------------------------------------------------------------+
  1. | product | reg_tpi |    share | medshare |   survquar |    news |
     |     101 | Central | .0948313 |        0 | May-Jul 05 | Central |
     |----------------------------------------------------------------|
     | valued~t | quanti~t |     ppkg | ppkg_t~m | _merge |     tpi1  |
     |  15655.5 | 9.570205 | 1635.859 | 1424.389 |      3 | 155.1305  |
     |----------------------------------------------------------------|
     |                            tpi1_t~m                            |
     |                            135.0766                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  2. | product | reg_tpi |    share | medshare |   survquar |    news |
     |     102 | Central | .0097817 |        0 | May-Jul 05 | Central |
     |----------------------------------------------------------------|
     | valued~t | quanti~t |     ppkg | ppkg_t~m | _merge |     tpi1  |
     | 3644.232 | 4.026819 | 904.9902 | 795.4209 |      3 | 8.852324  |
     |----------------------------------------------------------------|
     |                            tpi1_t~m                            |
     |                            7.780552                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  3. | product | reg_tpi |    share | medshare |   survquar |    news |
     |     105 | Central | .1638601 | .3096476 | May-Jul 05 | Central |
     |----------------------------------------------------------------|
     | valued~t | quanti~t |     ppkg | ppkg_t~m | _merge |     tpi1  |
     | 18812.21 | 20.88767 | 900.6369 | 645.9673 |      3 | 147.5784  |
     |----------------------------------------------------------------|
     |                            tpi1_t~m                            |
     |                            105.8483                            |
     +----------------------------------------------------------------+

. list in -3/-1;

     +--------------------------------------------------------------+
436. | product  | reg_tpi  |   share  |  medshare  |      survquar  |
     |     150  | Western  | .012574  |  .0337455  |   Sept-Oct 05  |
     |--------------------------------------------------------------|
     |    news | valued~t | quanti~t |     ppkg | ppkg_t~m | _merge |
     | Western | 3845.008 | 17.55526 |  219.023 | 186.8035 |      3 |
     |--------------------------------------------------------------|
     |               tpi1           |           tpi1_t~m            |
     |              2.754           |           2.348871            |
     +--------------------------------------------------------------+

     +--------------------------------------------------------------+
437. | product  | reg_tpi  |   share  |  medshare  |      survquar  |
     |     150  | Western  | .012574  |  .0337455  |   Nov05-Jan06  |
     |--------------------------------------------------------------|
     |    news | valued~t | quanti~t |     ppkg | ppkg_t~m | _merge |
     | Western | 3305.908 | 26.49371 | 124.7809 | 200.0094 |      3 |
     |--------------------------------------------------------------|
     |               tpi1           |           tpi1_t~m            |
     |           1.568997           |           2.514922            |
     +--------------------------------------------------------------+

     +--------------------------------------------------------------+
438. | product  | reg_tpi  |   share  |  medshare  |      survquar  |
     |     150  | Western  | .012574  |  .0337455  |  Feb-Apr 2006  |
     |--------------------------------------------------------------|
     |    news | valued~t | quanti~t |     ppkg | ppkg_t~m | _merge |
     | Western | 3788.854 | 15.00283 | 252.5427 | 210.7428 |      3 |
     |--------------------------------------------------------------|
     |               tpi1           |           tpi1_t~m            |
     |           3.175477           |           2.649884            |
     +--------------------------------------------------------------+

.         *************************************************************
> *************;
. * Find TPI level and indexes for non-trimmed and trimmed prices
> *********************************************************************
> *****;
. * Not trimmed ;
.         collapse (sum) tpi1 tpi1_trim  , by(reg_tpi survquar);

.                 for num 1/$n_tpi :
>                         sum tpi1 if reg_tpi==X & survquar==2 , meanon
> ly \
>                         sum tpi1 if reg_tpi==X & survquar==4 , meanon
> ly \
>                         global baseX=r(mean);

->  sum tpi1 if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1 if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)

->  sum tpi1 if reg_tpi==3 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==3 & survquar==4 , meanonly

->  global base3=r(mean)

->  sum tpi1 if reg_tpi==4 & survquar==2 , meanonly

->  sum tpi1 if reg_tpi==4 & survquar==4 , meanonly

->  global base4=r(mean)

.                 lab var tpi1 "Temporal price index before normalizati
> on";

.                                 foreach v of numlist 1/$n_tpi { ;
  2.                                         if `v'==1 { ;
  3.                                                 gen tpi=tpi1/${bas
> e`v'} if reg_tpi==`v' ;
  4.                                         } ;
  5.                                         if `v'>1 { ;
  6.                                                 replace tpi=tpi1/$
> {base`v'} if reg_tpi==`v' ;
  7.                                         } ;
  8.                                 } ;
(12 missing values generated)
(4 real changes made)
(4 real changes made)
(4 real changes made)

.                                                                      
>                            *gen     tpi=tpi1/$base1 if reg_tpi==1;
.                 *replace tpi=tpi1/$base2 if reg_tpi==2;
.                 *replace tpi=tpi1/$base3 if reg_tpi==3;
.                 *replace tpi=tpi1/$base4 if reg_tpi==4;
.                 *replace tpi=tpi1/$base5 if reg_tpi==5;
.                 *replace tpi=tpi1/$base6 if reg_tpi==6;
.                                                                      
>            lab var tpi "Temporal price index (Q4=1)";

. * Trimmed ;
.                 for num 1/$n_tpi :
>                         sum tpi1_trim if reg_tpi==X & survquar==2 , m
> eanonly \
>                         sum tpi1_trim if reg_tpi==X & survquar==4 , m
> eanonly \
>                         global baseX=r(mean);

->  sum tpi1_trim if reg_tpi==1 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==1 & survquar==4 , meanonly

->  global base1=r(mean)

->  sum tpi1_trim if reg_tpi==2 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==2 & survquar==4 , meanonly

->  global base2=r(mean)

->  sum tpi1_trim if reg_tpi==3 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==3 & survquar==4 , meanonly

->  global base3=r(mean)

->  sum tpi1_trim if reg_tpi==4 & survquar==2 , meanonly

->  sum tpi1_trim if reg_tpi==4 & survquar==4 , meanonly

->  global base4=r(mean)

.                 lab var tpi1_trim "Six regions: TRIMMED Temporal pric
> e index before normalization";

.                                 foreach v of numlist 1/$n_tpi { ;
  2.                                         if `v'==1 { ;
  3.                                                 gen tpi_trim=tpi1_
> trim/${base`v'} if reg_tpi==`v' ;
  4.                                         } ;
  5.                                         if `v'>1 { ;
  6.                                                 replace tpi_trim=t
> pi1_trim/${base`v'} if reg_tpi==`v' ;
  7.                                         } ;
  8.                                 } ;
(12 missing values generated)
(4 real changes made)
(4 real changes made)
(4 real changes made)

.                                                 lab var tpi_trim "TRI
> MMED Temporal price index (Q4=1)";

.                 sort reg_tpi survquar;

.             drop if reg_tpi<1 | reg_tpi>$n_tpi;
(0 observations deleted)

. gen tpi_diff = tpi - tpi_trim;

. lab var tpi_diff "TPI difference btw trimmed/untrimmed";

. twoway (connected tpi_trim survquar),yline(1) by(, title("TPI: Trimme
> d"))
> by(reg_tpi) sav("$path/work/reg_tpi-tpi_trim", replace);
(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
> 2/work/reg_tpi-tpi_trim.gph saved)

. graph export "$path/work/reg_tpi-tpi_trim.tif", replace;
(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
> 2/work/reg_tpi-tpi_trim.tif written in TIFF format)

. list reg_tpi survquar tpi tpi_trim tpi_diff;

     +-----------------------------------------------------------+
     |  reg_tpi       survquar        tpi   tpi_trim    tpi_diff |
     |-----------------------------------------------------------|
  1. |  Central     May-Jul 05   1.017898   .9836409    .0342567 |
  2. |  Central    Sept-Oct 05   .9350836   .9937251   -.0586416 |
  3. |  Central    Nov05-Jan06   .9660079   .9902771   -.0242692 |
  4. |  Central   Feb-Apr 2006          1          1           0 |
  5. |  Eastern     May-Jul 05   .6640872   .8732729   -.2091857 |
     |-----------------------------------------------------------|
  6. |  Eastern    Sept-Oct 05   .8898644    .807833    .0820314 |
  7. |  Eastern    Nov05-Jan06    .825179   .8807836   -.0556046 |
  8. |  Eastern   Feb-Apr 2006          1          1           0 |
  9. | Northern     May-Jul 05   .9755468   1.024151    -.048604 |
 10. | Northern    Sept-Oct 05   .9299492   .9616348   -.0316856 |
     |-----------------------------------------------------------|
 11. | Northern    Nov05-Jan06   .9109759    .963642   -.0526661 |
 12. | Northern   Feb-Apr 2006          1          1           0 |
 13. |  Western     May-Jul 05    .945576   1.038591   -.0930151 |
 14. |  Western    Sept-Oct 05   .9010914   .9491392   -.0480478 |
 15. |  Western    Nov05-Jan06   .9910709   1.102226   -.1111556 |
     |-----------------------------------------------------------|
 16. |  Western   Feb-Apr 2006          1          1           0 |
     +-----------------------------------------------------------+

.                 sort reg_tpi survquar;

. keep reg_tpi survquar tpi_trim;

. save "$path/work/temp_index_reg_tpi.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/temp_index_reg_tpi.dta saved

.                        **********************************************
> ****************************
> * 090_temp_index.do     (end)
> *********************************************************************
> *****;
. cap log close;

. 
end of do-file

.                                 do "$path/new/100_food_basket_flex.do
> "  /* Flexible food basket */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/100_food_basket_flex.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/100_food_basket_flex.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:25

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *****
> * 100_food_basket_flex.do     (start)
> *
> * This file is to get the data from the cons_cod.dta in work and then
>  
> * to create the do file with the 90% of the consumption expenditures 
> * using a flexible basket of goods.
> *
> * NOTE: we actually keep goods representing 95% of expenditure
> * in order to facilitate dropping of some goods (such as rats) where
> * quantity and nutrition information is unknown.
> *
> * We base our basket on the bottom 60 percent of consumption per capi
> ta
> * (weighted by hhweight*hhsize). We use the TEMPORALLY-ADJUSTED
> * NOMINAL consumption because we don't have a spatial adjustment yet.
> *
> * (Then we iterate this process to arrive at a final food bundle in l
> ater code)
> *********************************************************************
> *****;
. *CA modified to bring in hhdata into bootstrap;
. /*
> This file uses:
>                 work/cons_cod.dta
>                 work/hhdata.dta
>                 work/products.dta
>                 work/consump_nom.dta
>                 work/temp_index_reg_tpi.dta
>                 work/food_cat.dta
> 
> This file creates:
>                 work/food_basket_flex.dta
>                 work/codes_food_basket_flex.dta
> */
> 
> 
> 
> *do "$path/new/010_initial.do";
. *********************************************************************
> *****;
. * First, make a small temp file that has the temporally adjusted 
> * nominal consumption per capita, using work/consump_nom and 
> * work/temp_index_reg_tpi.dta. Make a dummy variable indicating
> * whether they are in the bottom 60%.
> *********************************************************************
> *****;
. use "$path/work/conpc.dta", clear;

. *use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work/hhdata.dta for bootstrap;
.         sort hhid;

.         merge hhid using "$path/work/hhdata.dta";

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _m;

.         keep hhid hhweight hhsize cons_pc_nom reg_tpi rural survquar;

.         sort reg_tpi survquar;

.         cap drop _merge;

.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.d
> ta";
variables reg_tpi survquar do not uniquely identify observations in
    the master data
(label lsurvquar already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.         sort hhid;

.         merge hhid using "$path/work/conpc.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.                 gen food_pc_tpi  = food_pc_nom /tpi_trim;
(12 missing values generated)

.         lab var food_pc_tpi "Temp-adjusted per capita food consumptio
> n/day";

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
(13 missing values generated)

.         lab var cons_pc_tpi "Temp adjusted total consumption/day";

.         gen one=1;

.         tempfile contpi;

.         save `contpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

.         collapse (p$bottom) one cons_pc_tpi [aw=hhsize*hhweight] ;

.         rename cons_pc_tpi pctile_60;

.         tempfile 60pct;

.         sort one;

.         save `60pct', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved

.                 use `contpi';

.                 sort one;

.                 merge one using `60pct';
variable one does not uniquely identify observations in the master
    data

.                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.                 drop _merge;

.                 drop one;

.                         gen bottom_basket=cons_pc_tpi< pctile_60;

.                 tab bottom_basket [aw=hhsize*hhweight];

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  3,709.007       50.02       50.02
          1 |  3,705.993       49.98      100.00
------------+-----------------------------------
      Total |      7,415      100.00

.                 lab var bottom_basket "=1 if in bottom 60% of PCE";

.                                 sort hhid;

. save `contpi' , replace;
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. *********************************************************************
> *****;
. * Next, need to keep only the food products in order to calculate the
>  
> * food poverty line, and then calculate the food expenses by code.
> *********************************************************************
> *****;
. use "$path/work/cons_cod.dta";

. /*
>         sort product;
>         merge product using "$path/work/food_cat.dta";
>         tab _merge;
>         keep if _merge==3;
>         drop _merge;
> */
>         
>         keep if food_cat;
(0 observations deleted)

.         codebook hhid;

-----------------------------------------------------------------------
hhid                                                        (unlabeled)
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7425                     missing .:  133/99750

                  mean:   2.4e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

.         sort hhid;

. *********************************************************************
> *****;
. * Next, merge in the consumption information, and select those in bot
> tom
> * 60% of nominal distribution, after making temporal adjustment. 
> *********************************************************************
> *****;
.         merge hhid using `contpi';
variable hhid does not uniquely identify observations in the master
    data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          1        0.00        0.00
          3 |     99,750      100.00      100.00
------------+-----------------------------------
      Total |     99,751      100.00

.         keep if _merge==3;
(1 observation deleted)

.         drop _merge;

.         keep if bottom_basket==1;
(62035 observations deleted)

.      ****************************************************************
> **********;
. * Calculate food shares. Since we're only doing shares here, we can
> * work with the expenditures without doing temporal adjustment.
> *********************************************************************
> *****;
.           gen  food_expenditure= cod_hh_nom;

.                             *gen  food_expenditure= own_valued + dail
> y_valued + monthly_valued + educ_valued;
.           egen tot_food_expen= sum (food_expen), by (hhid) ;

.           count if food_expenditure==.;
    0

.           count if tot_food_expen==.;
    0

.                     gen food_share= food_expenditure/tot_food_expen;

.           count if food_share==.;
    0

.           drop if food_share==.;
(0 observations deleted)

.           sort hhid product;

.                         tempfile food_basket_flex;

. save `food_basket_flex', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

. *********************************************************************
> ***********;
. * Now prepare to get the variable spdomain to the using dataset, and 
> then find the 
> * total shares by each product in order to select the most important 
> goods in the 
> * basket.
> *********************************************************************
> ***********;
.                 preserve;

.                 use "$path/work/hhdata.dta", clear;

.                         keep hhid spdomain;

.                         sort hhid;

.                         tempfile spdomain;

.                 save `spdomain' , replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp saved

.                 restore;

.                            collapse (mean) hhweight, by (hhid);

.            sort hhid ;

.             merge hhid using `spdomain';

.            tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |      4,104       55.27       55.27
          3 |      3,322       44.73      100.00
------------+-----------------------------------
      Total |      7,426      100.00

.            drop if _m==2;
(4104 observations deleted)

.            drop _merge;

.             collapse (sum) hhweight , by(spdomain);

.            rename hhweight tothhweight;

.            tempfile tothhweight;

. save `tothhweight';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp saved

. use `food_basket_flex';

.           sort hhid;

.           merge hhid using `spdomain';
variable hhid does not uniquely identify observations in the master
    data

.           tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |      4,104        9.81        9.81
          3 |     37,715       90.19      100.00
------------+-----------------------------------
      Total |     41,819      100.00

.           sort _m;

.           drop if _m==2;
(4104 observations deleted)

.           drop _m;

.           sort spdomain;

.             merge spdomain using `tothhweight';
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

.           tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     37,715      100.00      100.00
------------+-----------------------------------
      Total |     37,715      100.00

.           drop _merge;

.             sort spdomain product;

.             gen f_share_w=(food_share*hhweight)/tothhweight;

.                                                 *drop descript;
.                         *gen descript = 0;
.             collapse (sum) f_share_w, by(spdomain product descript);

.                      sort spdomain f_share_w;

.           by spdomain: gen cumshr= sum(f_share_w);

.                     count if cumshr<=.075;
  250

.           drop if cumshr<=.075;
(250 observations deleted)

.             lab var f_share_w "average food share for the 13 regions"
> ;

. save "$path/work/food_basket_flex.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/food_basket_flex.dta saved

. * List first spatial region to get an idea about contents;
. list product spdomain f_share_w cumshr if spdomain==1;

     +------------------------------------------+
     | product   spdomain   f_shar~w     cumshr |
     |------------------------------------------|
  1. |     125    Kampala   .0119839   .0815463 |
  2. |     122    Kampala   .0132478   .0947941 |
  3. |     144    Kampala   .0143908   .1091849 |
  4. |     127    Kampala   .0194378   .1286227 |
  5. |     107    Kampala   .0198948   .1485175 |
     |------------------------------------------|
  6. |     157    Kampala   .0202407   .1687582 |
  7. |     141    Kampala   .0236563   .1924145 |
  8. |     101    Kampala   .0295821   .2219966 |
  9. |     113    Kampala   .0330545   .2550511 |
 10. |     147    Kampala   .0339048   .2889559 |
     |------------------------------------------|
 11. |     105    Kampala   .0343554   .3233113 |
 12. |     110    Kampala   .1215675   .4448787 |
 13. |     999    Kampala   .5551212          1 |
     +------------------------------------------+

.                     gen numreg=1;

.           collapse (sum) numreg cumshr, by (product descript);

.                           keep product descript numreg;

.           display _N;
43

.                     lab var numreg "number of goods in the basket";

. /*
>           merge product using "$path/work/products.dta";
>             tab _merge;
>           keep if _merge==3;
> */
>           keep product descript numreg;

.             sort product;

.                display _N;
43

.   save "$path/work/codes_food_basket_flex.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/codes_food_basket_flex.dta saved

. *********************************************************************
> *****
> * 100_food_basket_flex.do     (end)
> *********************************************************************
> *****;
. cap log close;

. 
end of do-file

.                                 do "$path/new/110_price_unit_flex.do"
>    /* Flexible basket: Prices */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/110_price_unit_flex.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/110_price_unit_flex.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:26

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *******************
> * 110_price_unit_flex.do                (start)
> *
> * Purpose: This do file creates a price_unit_flex database with the u
> nit prices of the
> * goods of the flexible food basket in order to determine the poverty
>  lines per spatial
> * domain. It uses the files work/daily.dta and work/own.dta file and 
> draw unit prices
> * by: sum of values and quantity
> *********************************************************************
> *******************;
. *CA modified to bring in work/hhdata.dta for bootstrap
> *CA check for price calcs conditional on number of observations;
. /*
> This file uses:
>         work/daily.dta
>         work/own.dta
>         work/hhdata.dta
>         work/consump_nom.dta
>         work/codes_food_basket_flex.dta
>         work/temp_index_reg_tpi.dta
>           new/conversions.do
> 
> This file creates:
>         work/price_unit_flex.dta
>         work/bottom_basket.dta
> */
> 
> 
> 
> 
> *do "$path/new/010_initial.do";
. *********************************************************************
> *****************
> * Create sorted data set with daily and own and the matched codes
> *********************************************************************
> *****************;
. use "$path/work/cons_cod_trans.dta", clear;

. *use "$path/in/cons_cod_trans.dta", clear;
. *save "$path/work/cons_cod_trans.dta", replace;
. *drop if quantityd==0 ;
. keep hhid product food_cat valuez quantityz unit;

. rename valuez    value;

. rename quantityz quantity;

. drop if quantity==0 ;
(2770 observations deleted)

. *drop count;
.         sort product;

.         gen count=1;

.                 tempfile dd_acsort;

. save `dd_acsort', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. /*
> use "$path/work/daily.dta";
> tempfile dd_acsort;
>         drop days;
>         sort product;
>         tempfile dd_acsort;
> save `dd_acsort', replace;
> 
> use "$path/work/own.dta";
>         keep hhid product valued quantityd unit;
>         rename valued value;
>         rename quantityd quantity;
> 
>         *CHECK THE ZEROS IN quantity FOR NOW DELETE;
>         drop if quantity==0;
> 
>         append using `dd_acsort';
> 
> *CA modified to merge in work/hhdata.dta for bootstrap;
>         sort hhid;
>       merge hhid using "$path/work/hhdata.dta";
>       tab _m;
> 
> * Drop observations if non existent in HH data set;
> drop if _m!=3;
> drop _m;
> 
> 
>         sort product;
>         gen count=1;
> 
> 
> save `dd_acsort', replace;
> */
> 
> 
> *********************************************************************
> *****************;
. * Merge the flexible food basket codes with the daily and own data se
> ts
> * Drop all codes not a part of the flexible food basket
> *********************************************************************
> *****************;
.         merge product using "$path/work/codes_food_basket_flex.dta";
variable product does not uniquely identify observations in the
    master data
product was int now float

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     10,568       11.80       11.80
          2 |          2        0.00       11.80
          3 |     78,987       88.20      100.00
------------+-----------------------------------
      Total |     89,557      100.00

.         drop if _merge~=3;
(10570 observations deleted)

.         drop _merge;

. *********************************************************************
> *****************;
. * Drop observations where product code or quantity or value informati
> on is unavailable
> *********************************************************************
> *****************;
.                                 codebook hhid;

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7205                     missing .:  62/78987

                  mean:   2.4e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

. *        drop if product==. | value==. | quantity==.  ;
.                                 codebook hhid;

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7205                     missing .:  62/78987

                  mean:   2.4e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

. *********************************************************************
> *****************;
. * Convert non-KG quantities (units and liters) to kilograms;
. *********************************************************************
> *****************;
. *do "$path/new/110a_conversions.do"
> 
> ********************************************************************
> * There remain a few difficult to interpret observations such as lite
> rs
> * of fish and liters of pasta. These are dropped
> ********************************************************************;
. *        drop if unit~=2;
. ********************************************************************
> * Merge in labels for the 13 spatial domains
> ********************************************************************;
.         preserve;

.                 use "$path/work/hhdata.dta", clear;

.                                                                      
>    keep hhid spdomain reg_tpi survquar;

.                         sort hhid;

.                         tempfile spdomainreg_tpi;

.                 save `spdomainreg_tpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

.                                 codebook hhid;

-----------------------------------------------------------------------
hhid                                                       Household ID
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7426                     missing .:  0/7426

                  mean:   2.5e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

.         restore;

.                 sort hhid;

.         merge hhid using `spdomainreg_tpi';
variable hhid does not uniquely identify observations in the master
    data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         62        0.08        0.08
          2 |        221        0.28        0.36
          3 |     78,925       99.64      100.00
------------+-----------------------------------
      Total |     79,208      100.00

.         drop _merge;

.         drop if product==.;
(221 observations deleted)

. codebook hhid;

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7205                     missing .:  62/78987

                  mean:   2.4e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

. tab spd;

       Spatial |
 domains: each |
      with own |
  poverty line |
  (they are 9) |      Freq.     Percent        Cum.
---------------+-----------------------------------
       Kampala |      3,748        4.75        4.75
 Central urban |      2,319        2.94        7.69
 Central rural |     17,078       21.64       29.33
 Eastern urban |      5,017        6.36       35.68
 Eastern rural |     16,787       21.27       56.95
Northern urban |      3,897        4.94       61.89
Northern rural |     11,551       14.64       76.52
 Western urban |      4,671        5.92       82.44
 Western rural |     13,857       17.56      100.00
---------------+-----------------------------------
         Total |     78,925      100.00

. sum if spd>=3;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     72858    2.56e+09    1.11e+09   1.01e+09   4.15e+09
     product |     72920    128.1977    15.41295        101        161
    quantity |     72858    .6792717    4.472681   .0014286   857.1429
       value |     72858    251.7211    392.0249          0   12857.14
        unit |     72858           1           0          1          1
-------------+--------------------------------------------------------
    food_cat |     72858           1           0          1          1
       count |     72920           1           0          1          1
    descript |     72920           1           0          1          1
      numreg |     72920    5.924534    2.898053          1          9
    survquar |     72858    2.493728     1.07467          1          4
-------------+--------------------------------------------------------
     reg_tpi |     72858    2.486233    1.107807          1          4
    spdomain |     72858    5.786008    2.167128          3          9

. table spdomain, content(mean quantity count quantity count hhid) row 
> missing;

---------------------------------------------------------------
Spatial        |
domains: each  |
with own       |
poverty line   |
(they are 9)   | mean(quantity)     N(quantity)         N(hhid)
---------------+-----------------------------------------------
       Kampala |       .4657227           3,748           3,748
 Central urban |       .5114735           2,319           2,319
 Central rural |       .5884213          17,078          17,078
 Eastern urban |       .5913195           5,017           5,017
 Eastern rural |       .8595281          16,787          16,787
Northern urban |       .7179226           3,897           3,897
Northern rural |       .7789626          11,551          11,551
 Western urban |       .4915488           4,671           4,671
 Western rural |       .5740206          13,857          13,857
               | 
         Total |       .6642003          78,925          78,925
---------------------------------------------------------------

.         drop if product==. | value==. | quantity==.  ;
(62 observations deleted)

. codebook hhid;

-----------------------------------------------------------------------
hhid                                                       household id
-----------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1.013e+09,4.153e+09]        units:  1
         unique values:  7205                     missing .:  0/78925

                  mean:   2.4e+09
              std. dev:   1.1e+09

           percentiles:        10%       25%       50%       75%       
> 90%
                           1.1e+09   1.1e+09   2.1e+09   3.1e+09   4.1e
> +09

. tab spd;

       Spatial |
 domains: each |
      with own |
  poverty line |
  (they are 9) |      Freq.     Percent        Cum.
---------------+-----------------------------------
       Kampala |      3,748        4.75        4.75
 Central urban |      2,319        2.94        7.69
 Central rural |     17,078       21.64       29.33
 Eastern urban |      5,017        6.36       35.68
 Eastern rural |     16,787       21.27       56.95
Northern urban |      3,897        4.94       61.89
Northern rural |     11,551       14.64       76.52
 Western urban |      4,671        5.92       82.44
 Western rural |     13,857       17.56      100.00
---------------+-----------------------------------
         Total |     78,925      100.00

. ********************************************************************
> * Merge in temporal price index to convert nominal value to real
> ********************************************************************;
.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.d
> ta";
variables reg_tpi survquar do not uniquely identify observations in
    the master data
(label lsurvquar already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     78,925      100.00      100.00
------------+-----------------------------------
      Total |     78,925      100.00

.         drop if _merge ~= 3;
(0 observations deleted)

.         drop _merge;

.         gen value_r=value/tpi_trim;

. *********************************************************************
> *****;
. * Identify relatively poor households, based on nominal temporally ad
> justed
> * consumption per capita. Only work with these households for the pri
> ce
> * calculations.
> *********************************************************************
> *****;
.                 preserve;

.                         use "$path/work/conpc.dta", clear;

. *                       use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work/hhdata.dta for bootstrap;
.         sort hhid;

.       merge hhid using "$path/work/hhdata.dta";

.       tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.       drop _m;

. *CA modified to keep bswt;
.                                 keep hhid hhweight hhsize cons_pc_nom
>  bswt ;

.                                 sort hhid;

.                                 merge hhid using `spdomainreg_tpi';
(label region already defined)
(label lsurvquar already defined)
(label lspdomain already defined)

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.                                 drop _merge;

.                                 sort reg_tpi survquar;

.                                 cap drop _merge;

.                                 merge reg_tpi survquar using "$path/w
> ork/temp_index_reg_tpi.dta";
variables reg_tpi survquar do not uniquely identify observations in
    the master data
(label lsurvquar already defined)
(label region already defined)

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.                                 drop _merge;

.                                 sort hhid;

.                                 merge hhid using "$path/work/conpc.dt
> a";

.                                 tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.                                 drop _merge;

.                                 gen food_pc_tpi  = food_pc_nom /tpi_t
> rim;
(12 missing values generated)

.                                 lab var food_pc_tpi "Temp-adjusted pe
> r capita food consumption/day";

.                                                                 * Non
> -food not TPI adjusted ;
.                                 gen cons_pc_tpi = food_pc_tpi + nf_pc
> _nom;
(13 missing values generated)

.                                 lab var cons_pc_tpi "Temp adjusted to
> tal consumption/day";

.                                 gen one=1;

.                                 tempfile contpi;

.                                 save `contpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp saved

.                                 collapse (p$bottom) one cons_pc_tpi [
> aw=hhsize*hhweight], by(spdomain) ;

.                                 rename cons_pc_tpi pctile_60;

.                                 tempfile 60pct;

.                                 sort spdomain;

.                                 save `60pct', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp saved

.                                 use `contpi';

.                                         sort spdomain;

.                                         merge spdomain using `60pct';
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

.                                         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.                                         drop _merge;

.                                         drop one;

.                                         sort spdomain;

.                                         gen bottom_basket=cons_pc_tpi
> < pctile_60;

.                                         by spdomain: tab bottom_baske
> t [aw=hhsize*hhweight];

-----------------------------------------------------------------------
-> spdomain = Kampala

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 162.908439       50.28       50.28
          1 | 161.091561       49.72      100.00
------------+-----------------------------------
      Total |        324      100.00

-----------------------------------------------------------------------
-> spdomain = Central urban

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 96.3051029       50.16       50.16
          1 | 95.6948971       49.84      100.00
------------+-----------------------------------
      Total |        192      100.00

-----------------------------------------------------------------------
-> spdomain = Central rural

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 794.225782       50.14       50.14
          1 | 789.774218       49.86      100.00
------------+-----------------------------------
      Total |      1,584      100.00

-----------------------------------------------------------------------
-> spdomain = Eastern urban

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |   203.7171       50.18       50.18
          1 |   202.2829       49.82      100.00
------------+-----------------------------------
      Total |        406      100.00

-----------------------------------------------------------------------
-> spdomain = Eastern rural

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 760.402744       50.13       50.13
          1 | 756.597256       49.87      100.00
------------+-----------------------------------
      Total |      1,517      100.00

-----------------------------------------------------------------------
-> spdomain = Northern urban

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 172.044169       50.01       50.01
          1 | 171.955831       49.99      100.00
------------+-----------------------------------
      Total |        344      100.00

-----------------------------------------------------------------------
-> spdomain = Northern rural

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 640.296236       50.10       50.10
          1 | 637.703764       49.90      100.00
------------+-----------------------------------
      Total |      1,278      100.00

-----------------------------------------------------------------------
-> spdomain = Western urban

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  213.25224       50.18       50.18
          1 |  211.74776       49.82      100.00
------------+-----------------------------------
      Total |        425      100.00

-----------------------------------------------------------------------
-> spdomain = Western rural

bottom_bask |
         et |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  673.15639       50.05       50.05
          1 |  671.84361       49.95      100.00
------------+-----------------------------------
      Total |      1,345      100.00

-----------------------------------------------------------------------
-> spdomain = .
no observations


.                                         lab var bottom_basket "=1 if 
> in bottom (60%) of PCE";

.                                         sort hhid;

.                                                                 save 
> "$path/work/bottom_basket.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/bottom_basket.dta saved

.         restore;

.         sort hhid;

.         merge hhid using "$path/work/bottom_basket.dta";
variable hhid does not uniquely identify observations in the master
    data
(label lspdomain already defined)
(label lsurvquar already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        222        0.28        0.28
          3 |     78,925       99.72      100.00
------------+-----------------------------------
      Total |     79,147      100.00

.         drop _merge;

.                         * Only keep price observations for the poor ;
.         keep if bottom_basket==1;
(47324 observations deleted)

.         *************************************************************
> *************;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * for each spdomain & product combination. This should eliminate outl
> iers
> * that may have an undue influence on the price calculation. 
> *********************************************************************
> *****;
.                 gen hhppkg=value_r/quantity;
(41 missing values generated)

.                 egen lower5=pctile(hhppkg), p(5) by(spdomain product)
> ;
(41 missing values generated)

.                 egen upper5=pctile(hhppkg), p(95) by(spdomain product
> );
(41 missing values generated)

. sum;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        hhid |     31823    2.44e+09    1.15e+09   1.01e+09   4.15e+09
     product |     31782    128.4911    15.59853        101        154
    quantity |     31782    .6936038    6.289653   .0014286   857.1429
       value |     31782    210.0109    295.1421          0       7000
        unit |     31782           1           0          1          1
-------------+--------------------------------------------------------
    food_cat |     31782           1           0          1          1
       count |     31782           1           0          1          1
    descript |     31782           1           0          1          1
      numreg |     31782     5.98754    2.884436          1          9
    survquar |     31823    2.509883    1.070053          1          4
-------------+--------------------------------------------------------
     reg_tpi |     31823    2.374666    1.150536          1          4
    spdomain |     31823    5.437105    2.432483          1          9
    tpi_trim |     31823    .9725561    .0691778    .807833   1.102226
     value_r |     31782    215.6324    300.8843          0       7000
 cons_pc_nom |     31823     603.508    299.0367   57.35135   1919.866
-------------+--------------------------------------------------------
      hhsize |     31823    6.737737    3.027367          1         29
    hhweight |     31823    701.7077    358.8604      60.97    4404.13
        bswt |     31823           1           0          1          1
 cons_hh_nom |     31823    3938.467    2522.033   95.06575   28190.71
 food_pc_nom |     31823    373.5094    177.0708          0   1360.714
-------------+--------------------------------------------------------
   nf_pc_nom |     31823    229.9986    173.6395          0    1420.77
 food_pc_tpi |     31823    383.7265    177.4918          0   1370.031
 cons_pc_tpi |     31823    613.7251    297.8811   57.35136     1920.8
   pctile_60 |     31823    871.3114    361.5737   424.9479   1928.414
bottom_bas~t |     31823           1           0          1          1
-------------+--------------------------------------------------------
      hhppkg |     31782    675.5792    998.5057          0   60997.87
      lower5 |     31782    254.5104     389.535          0   7044.201
      upper5 |     31782    1427.883    1297.244   97.64188   7947.468

. describe;

Contains data from C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp
  obs:        31,823                          
 vars:            28                          9 Jul 2013 11:07
 size:     3,850,583                          
-----------------------------------------------------------------------
              storage  display     value
variable name   type   format      label      variable label
-----------------------------------------------------------------------
hhid            double %9.0g                  household id
product         float  %10.0g      H14AQ2     Food product code:
                                                numerical
quantity        float  %9.0g                  daily household food
                                                consumption
value           float  %9.0g                  daily value of
                                                consumption in UGX per
                                                per household
unit            float  %10.0g                 set equal to one since
                                                all observations are
                                                converted into kg
food_cat        float  %9.0g                  food category equals 1,
                                                if product is food and
                                                0 if non food
count           float  %9.0g                  
descript        float  %9.0g       descrip    product description
                                                including product code
                                                but equals 2 for all
                                                non-foods
numreg          double %9.0g                  number of goods in the
                                                basket
survquar        float  %12.0g      lsurvquar
                                              Sequential Survey Quarter
                                                (May-Jul 05=1)
reg_tpi         float  %9.0g       region     Regions used for temporal
                                                price index
                                                calculations
spdomain        float  %14.0g      lspdomain
                                              Spatial domains: each
                                                with own poverty line
                                                (they are 9)
tpi_trim        float  %9.0g                  TRIMMED Temporal price
                                                index (Q4=1)
value_r         float  %9.0g                  
cons_pc_nom     float  %9.0g                  
hhsize          byte   %8.0g                  Household Size
hhweight        float  %9.0g                  Household sample weight
bswt            float  %9.0g                  bootstrap weights; and
                                                all equal to 1 for all
                                                households, as a
                                                toolkit requireme
cons_hh_nom     double %9.0g                  (sum) cod_hh_nom
food_pc_nom     float  %9.0g                  nominal food consumption
                                                per capita
nf_pc_nom       float  %9.0g                  nominal non-food
                                                consumption per capita
food_pc_tpi     float  %9.0g                  Temp-adjusted per capita
                                                food consumption/day
cons_pc_tpi     float  %9.0g                  Temp adjusted total
                                                consumption/day
pctile_60       float  %9.0g                  (p 50) cons_pc_tpi
bottom_basket   float  %9.0g                  =1 if in bottom (60%) of
                                                PCE
hhppkg          float  %9.0g                  
lower5          float  %9.0g                  
upper5          float  %9.0g                  
-----------------------------------------------------------------------
Sorted by:  
     Note:  dataset has changed since last saved

. keep if hhppkg-lower5>=0 & hhppkg-upper5<=0;
(2429 observations deleted)

. *********************************************************************
> * Note that we do prices in three ways. First, by summing quantity an
> d value 
> * This average price price_unitw is thus quantity/value weighted. Sec
> ond, we
> * calculate the price and take simple means for a transaction weighte
> d
> * price, price_unitt. Last we take the median, price_unitm. But in th
> e end
> * we only use price_unitw
> *********************************************************************
> ;
.         gen price_unitt=value_r/(quantity*1000);

.         gen price_unitm=price_unitt;

.                 *CA modified to count the boot sample weight bswt;
.         collapse (sum) quantity value_r count bswt 
>                  (mean) price_unitt 
>                  (median) price_unitm [aw=hhweight], by(spdomain prod
> uct);

.         *Generate weighted price per gram ;
.         gen price_unitw=value_r/(quantity*1000);

.         drop value_r quantity;

.         sort spdomain product;

.         lab var price_unitt "simple average of calculated prices - tr
> ansaction weighted";

.         lab var price_unitm "median of prices";

.         lab var price_unitw "value share weighted mean prices";

. * Get an idea of the difference between the price measures;
.         gen ratiotw=price_unitt/price_unitw;

.         gen ratiomw=price_unitm/price_unitw;

.         sum ratiotw ratiomw;

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     ratiotw |       352    1.562392    3.449226   .7078901   48.89969
     ratiomw |       352    1.329129    4.010912   .3042114    60.4506

.         sort product;

.         merge product using "$path/work/codes_food_basket_flex.dta";
variable product does not uniquely identify observations in the
    master data

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          3        0.85        0.85
          3 |        352       99.15      100.00
------------+-----------------------------------
      Total |        355      100.00

.         count if _merge~=3;
    3

.         drop if _merge~=3;
(3 observations deleted)

.         drop _merge;

.         sort product spdomain;

. save "$path/work/price_unit_flex.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/price_unit_flex.dta saved

. *********************************************************************
> *******************
> * 110_price_unit_flex.do                (end)
> *********************************************************************
> *******************;
. cap log close;

. 
end of do-file

.                                 do "$path/new/120_povline_food_flex_o
> riginal.do"        /* Flexible basket: Poverty line */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/120_povline_food_flex.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/120_povline_food_flex.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:29

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *****
> * 120_povline_food_flex.do      (start)
> *
> * Use the file with the food basket (food_basket_flex), which is in s
> hares. 
> * Then merge it with the prices file, and then with the calories file
> .
> * Along the way, drop those observations where we have no price infor
> mation
> * or no calorie information.
> *********************************************************************
> *****;
. /*
> This file uses:
>         work/food_basket_flex.dta
>         work/price_unit_flex.dta
>         work/calperg.dta
>         work/calpp.dta
> 
> This file creates:
>         work/povline_flex.dta
> */
> 
> 
> * start with the quantity information;
. use "$path/work/food_basket_flex.dta";

.         sort product spdomain;

.         * merge in price information;
.         merge product spdomain using "$path/work/price_unit_flex.dta"
> ;
(label lspdomain already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         21        5.63        5.63
          2 |        173       46.38       52.01
          3 |        179       47.99      100.00
------------+-----------------------------------
      Total |        373      100.00

.         list product spdomain descript if _merge==1;

     +-------------------------------------+
     | product         spdomain   descript |
     |-------------------------------------|
180. |     157          Kampala          1 |
181. |     157    Central rural          1 |
182. |     157    Eastern urban          1 |
183. |     157    Eastern rural          1 |
184. |     157   Northern urban          1 |
     |-------------------------------------|
185. |     157    Western urban          1 |
186. |     161    Central urban          1 |
187. |     161    Central rural          1 |
188. |     161    Eastern urban          1 |
189. |     161    Eastern rural          1 |
     |-------------------------------------|
190. |     161   Northern urban          1 |
191. |     161   Northern rural          1 |
192. |     999          Kampala          2 |
193. |     999    Central urban          2 |
194. |     999    Central rural          2 |
     |-------------------------------------|
195. |     999    Eastern urban          2 |
196. |     999    Eastern rural          2 |
197. |     999   Northern urban          2 |
198. |     999   Northern rural          2 |
199. |     999    Western urban          2 |
     |-------------------------------------|
200. |     999    Western rural          2 |
     +-------------------------------------+

.         drop if _merge ~=3;
(194 observations deleted)

.         drop _merge;

.         sort product;

.         * merge in information on calories per gram;
.         merge product using "$path/work/calperg.dta";
variable product does not uniquely identify observations in the
    master data
(note: descript is str30 in using data but will be float now)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         22       10.95       10.95
          3 |        179       89.05      100.00
------------+-----------------------------------
      Total |        201      100.00

.         * This tells where we are lacking calorie info or are lacking
>  quantity info due to 
>         * missing price info above;
.         list product spdomain descript if _merge==1;

.         drop if _merge~=3;
(22 observations deleted)

.         drop _merge;

.         sort spdomain f_share_w;

.                 * CA modified to handle bootstrap counting;
.         * determine if any quantity has fewer than 10 price observati
> ons;
.         by spdomain: count if round(bswt)<10;

-----------------------------------------------------------------------
-> spdomain = Kampala
    0
-----------------------------------------------------------------------
-> spdomain = Central urban
    1
-----------------------------------------------------------------------
-> spdomain = Central rural
    0
-----------------------------------------------------------------------
-> spdomain = Eastern urban
    1
-----------------------------------------------------------------------
-> spdomain = Eastern rural
    0
-----------------------------------------------------------------------
-> spdomain = Northern urban
    1
-----------------------------------------------------------------------
-> spdomain = Northern rural
    0
-----------------------------------------------------------------------
-> spdomain = Western urban
    2
-----------------------------------------------------------------------
-> spdomain = Western rural
    0

.         drop if round(bswt) < 10;
(5 observations deleted)

.         by spdomain: egen baskshr=sum(f_share_w);

.         by spdomain: gen cumshr1=sum(f_share_w);

.         * bundle was cut at 92.5 percent- cut back to 90 percent if n
> ecessary;
.         drop if cumshr1<=baskshr-.9;
(0 observations deleted)

.         * reobtain the share represented from the average basket- sho
> uld be slightly more than 90;
.         drop baskshr;

.         by spdomain: egen baskshr=sum(f_share_w);

.         by spdomain: sum baskshr;

-----------------------------------------------------------------------
-> spdomain = Kampala

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        11    .3550757           0   .3550757   .3550757

-----------------------------------------------------------------------
-> spdomain = Central urban

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        14    .4906189           0   .4906189   .4906189

-----------------------------------------------------------------------
-> spdomain = Central rural

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        21    .5415626           0   .5415626   .5415626

-----------------------------------------------------------------------
-> spdomain = Eastern urban

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        21    .5208822           0   .5208822   .5208822

-----------------------------------------------------------------------
-> spdomain = Eastern rural

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        25    .5712394           0   .5712394   .5712394

-----------------------------------------------------------------------
-> spdomain = Northern urban

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        17    .4708542           0   .4708542   .4708542

-----------------------------------------------------------------------
-> spdomain = Northern rural

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        21    .5518201           0   .5518201   .5518201

-----------------------------------------------------------------------
-> spdomain = Western urban

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        20    .4868528           0   .4868528   .4868528

-----------------------------------------------------------------------
-> spdomain = Western rural

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     baskshr |        24    .5836889           0   .5836889   .5836889


.         * obtain quantities and calories provided by these quantities
> ;
.         gen quan=f_share_w/price_unitw;

.                         /* how many g in 1 MT exp on food item */
>         gen cal_ir=quan*calperg;

.                                 /* how many cal in 1 MT exp on food i
> tem */
>         by spdomain: egen calreg=sum(cal_ir);

.         /* how many cal in 1 MT exp in food basket*/
> 
>         * merge in calorie requirements;
.         sort spdomain;

.         merge spdomain using "$path/work/calpp.dta";
variable spdomain does not uniquely identify observations in the
    master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        174      100.00      100.00
------------+-----------------------------------
      Total |        174      100.00

.         drop _merge;

.         * get the expansion factor to hit 95% of calorie requirements
> ;
.         gen ratio=.95*calpp/calreg;

.                         replace quan=quan*ratio;
(174 real changes made)

.         replace cal_ir=quan*calperg;
(171 real changes made)

.         * do a consistency check;
.         sort spdomain;

.         by spdomain: egen chkcal=sum(cal_ir);

.         replace chkcal=chkcal/.95-calpp ;
(174 real changes made)

.                         * these values should be about zero;
.         by spdomain: sum chkcal;

-----------------------------------------------------------------------
-> spdomain = Kampala

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        11    .0001092           0   .0001092   .0001092

-----------------------------------------------------------------------
-> spdomain = Central urban

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        14    .0000578           0   .0000578   .0000578

-----------------------------------------------------------------------
-> spdomain = Central rural

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        21     .000045           0    .000045    .000045

-----------------------------------------------------------------------
-> spdomain = Eastern urban

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        21   -.0000835           0  -.0000835  -.0000835

-----------------------------------------------------------------------
-> spdomain = Eastern rural

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        25   -.0000899           0  -.0000899  -.0000899

-----------------------------------------------------------------------
-> spdomain = Northern urban

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        17    .0000321           0   .0000321   .0000321

-----------------------------------------------------------------------
-> spdomain = Northern rural

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        21   -.0000835           0  -.0000835  -.0000835

-----------------------------------------------------------------------
-> spdomain = Western urban

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        20    -.000045           0   -.000045   -.000045

-----------------------------------------------------------------------
-> spdomain = Western rural

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      chkcal |        24   -.0000899           0  -.0000899  -.0000899


.         * obtain the value of each good in the bundle;
.         gen val_ir=quan*price_unitw;

.         * the sum of the value of the goods in the bundle is assumed 
> to represent 90% of expenditure;
.         by spdomain: egen povline_f_flex90=sum(val_ir);

.         replace povline_f_flex=povline_f_flex90/.9;
(174 real changes made)

.         collapse (mean) povline_f_flex, by (spdomain);

.                 lab var povline_f_flex "Food poverty line. Flexible b
> asket";

.         sort spdomain;

.         keep spdomain povline_f_flex;

. save "$path/work/povline_food_flex.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povline_food_flex.dta saved

. /*
> * To be used in 140_iterate.do;
> gen cutoff = 1.5 * povline_f_flex;
> keep spdomain cutoff;
> save "$path/work/povlines_first_iterate.dta", replace;
> */
> 
> *********************************************************************
> *****
> * 120_povline_food_flex.do      (end)
> *********************************************************************
> *****;
. log close;
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/120_povline_food_flex.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:29
-----------------------------------------------------------------------

. 
end of do-file

.                                 do "$path/new/130_povmeas_flex.do"   
>            /* Flexible basket: Poverty rates */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/130_povmeas_flex.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/130_povmeas_flex.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:29

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *****
> * 130_povmeas_flex.do           (start)
> *
> * Purpose:
> * Initial poverty measures calculation for flexible basket. (Before a
> ny iteration)
> *********************************************************************
> *****;
. *CA modified to add work/hhdata.dta for bootstrap;
. /*
> This file uses:
>         in/foodshr96.dta
>         work/povline_f_flex.dta
>         work/consump_nom.dta
>         work/hhdata.dta
>         work/temp_index_reg_tpi.dta
> 
> This file creates:
>         work/foodshr96.dta
>         work/povmeas.dta
>         work/povlines.dta
>         work/cons_real.dta
> */
> 
> 
> 
> *********************************************************************
> *****;
. * Bring in data file with nominal consumption per capita, and deflate
>  it
> * by temporal price index.
> *********************************************************************
> *****;
. use "$path/work/hhdata.dta", clear;

.         keep hhid strata reg_tpi spdomain news rural survmon survquar
> ;

.         tab reg_tpi, miss;

    Regions |
   used for |
   temporal |
price index |
calculation |
          s |      Freq.     Percent        Cum.
------------+-----------------------------------
    Central |      2,100       28.28       28.28
    Eastern |      1,932       26.02       54.30
   Northern |      1,624       21.87       76.16
    Western |      1,770       23.84      100.00
------------+-----------------------------------
      Total |      7,426      100.00

.         tab survquar, miss;

  Sequential |
      Survey |
     Quarter |
    (May-Jul |
       05=1) |      Freq.     Percent        Cum.
-------------+-----------------------------------
  May-Jul 05 |      1,573       21.18       21.18
 Sept-Oct 05 |      2,280       30.70       51.89
 Nov05-Jan06 |      1,787       24.06       75.95
Feb-Apr 2006 |      1,786       24.05      100.00
-------------+-----------------------------------
       Total |      7,426      100.00

.         keep hhid spdomain reg_tpi survquar;

.         sort hhid;

.         tempfile spdomainreg_tpi;

. save `spdomainreg_tpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. use "$path/work/conpc.dta", clear;

. *use "$path/work/consump_nom.dta", clear;
. *CA modified to merge in work/hhdata.dta for bootstrap;
.     sort hhid;

.     merge hhid using "$path/work/hhdata.dta";

.     tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.     drop _m;

.         keep hhid hhweight hhsize cons_pc_nom ;

.         sort hhid;

.         merge hhid using `spdomainreg_tpi';
(label region already defined)
(label lsurvquar already defined)
(label lspdomain already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.d
> ta";
variables reg_tpi survquar do not uniquely identify observations in
    the master data
(label lsurvquar already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.         sort hhid;

.         merge hhid using "$path/work/conpc.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.         gen food_pc_tpi  = food_pc_nom /tpi_trim;
(12 missing values generated)

.         lab var food_pc_tpi "Temp-adjusted per capita food consumptio
> n/day";

.                 gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
(13 missing values generated)

.         lab var cons_pc_tpi "Temp adjusted total consumption/day";

.         gen one=1;

. * TPI deflated per capita consumption ;
.         tempfile contpi;

. save `contpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved

. *********************************************************************
> *****
> * Calculate non-food expenditure for HH around the food poverty line
> *
> * Develop a discrete triangular weighted distribution. This gives a
> * weight of  1 to HH at +/- 18-20% from food poverty line, and
> * weight of  2 to HH at +/- 16-18% from food poverty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food poverty line.
> * This weight is called triwt below.
> *********************************************************************
> *****;
. use `contpi';

.         sort spdomain;

.         merge spdomain using "$path/work/povline_food_flex.dta";
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

. gen     triwt = 0 ;

. replace triwt = 10 - round(abs(cons_pc_tpi/povline_f_flex-1))
>                 if abs(cons_pc_tpi/povline_f_flex-1)<=10;
(6393 real changes made)

.                                         * Nearness to poverty line an
> d population weights ;
.         gen tripopwt=triwt*hhweight*hhsize;
(12 missing values generated)

.         preserve;

.                 collapse (mean) nf_pc_nom [aw=tripopwt] ,
>                         by(spdomain);

.                                         rename nf_pc_nom povline_na_f
> lex;

.                 lab var povline_na_flex "Nonfood poverty line. Flexib
> le bundle";

.                                 tempfile znf;

.                 sort spdomain;

.                 save `znf', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000004.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000004.tmp saved

.                 tab spdomain;

       Spatial |
 domains: each |
      with own |
  poverty line |
  (they are 9) |      Freq.     Percent        Cum.
---------------+-----------------------------------
       Kampala |          1       11.11       11.11
 Central urban |          1       11.11       22.22
 Central rural |          1       11.11       33.33
 Eastern urban |          1       11.11       44.44
 Eastern rural |          1       11.11       55.56
Northern urban |          1       11.11       66.67
Northern rural |          1       11.11       77.78
 Western urban |          1       11.11       88.89
 Western rural |          1       11.11      100.00
---------------+-----------------------------------
         Total |          9      100.00

.         restore;

.         sort spdomain;

.         merge spdomain using `znf';
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

. *********************************************************************
> *****;
. * Poverty line is the sum of the food and non-food poverty lines
> *********************************************************************
> *****;
.         gen povline_flex= povline_f_flex+ povline_na_flex;
(1 missing value generated)

.         lab var povline_flex "Poverty line. Flexible bundle";

.         sort spdomain;

. save "$path/work/povlines.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povlines.dta saved

. *********************************************************************
> *****;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first: we just use the fi
> rst stratum.
> *********************************************************************
> *****;
. use `contpi';

.         sort spdomain;

.         merge spdomain using "$path/work/povlines.dta";
variable spdomain does not uniquely identify observations in the
    master data
variable spdomain does not uniquely identify observations in
    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
    > 2/work/povlines.dta
(label region already defined)
(label lsurvquar already defined)
(label lspdomain already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.         * Real consumption pc, temporally deflated ;
.         gen cr= cons_pc_tpi ;
(13 missing values generated)

.         * Poverty line;
.         gen linpob=povline_flex;
(1 missing value generated)

.         *qui sum linpob if spdomain==1, meanonly;
.         sum linpob if spdomain==3, meanonly;

.         global spi_base=r(mean);

.         * Spatial price index ;
.         gen spi=linpob/$spi_base;
(1 missing value generated)

.         * Real consumption pc, temporally and spatially deflated ;
.         gen cr2=cr/spi;
(13 missing values generated)

.         qui sum cr [aw=hhweight*hhsize];

.         global sumcr=r(sum);

.         qui sum cr2 [aw=hhweight*hhsize];

.         global sumcr2=r(sum);

.         replace spi=spi*$sumcr2/$sumcr;
(7426 real changes made)

.         gen linpobr=linpob/spi;
(1 missing value generated)

.         replace cr2=cr/spi;
(7414 real changes made)

.         sum cr cr2 linpob linpobr [aw=hhweight*hhsize];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          cr |    7414  30109848.2    1044.199   1186.301   57.35136   
> 112846.5
         cr2 |    7414  30109848.2    1044.199   925.9906   64.47271   
> 61074.16
      linpob |    7415  30112959.1    504.6241    178.568   209.9897   
> 910.5155
     linpobr |    7415  30112959.1     492.784   4.28e-06    492.784   
>  492.784

.         lab var cr      "Temporally-adjusted cons pc";

.         lab var cr2     "Spatially & temporally adjusted cons pc";

.         lab var linpob  "Poverty line";

.         lab var linpobr "Real poverty line";

.         lab var spi     "Spatial price index";

. *********************************************************************
> *****
> * calculate poverty measures with the flexible food bundle
> *********************************************************************
> *****;
.         gen h = 100     if cr <=(linpob);
(6234 missing values generated)

.         replace  h = 0 if cr > (linpob);
(6234 real changes made)

.                         gen             pg      = ((linpob - cr )/lin
> pob) *100;
(13 missing values generated)

.         replace         pg      = 0             if h==0;
(6234 real changes made)

.         gen             spg     = ((( linpob - cr )/ linpob )^2)*100;
(13 missing values generated)

.         replace         spg     = 0             if h==0;
(6234 real changes made)

.         gen h_flex=h;

.         gen pg_flex=pg;
(1 missing value generated)

.         gen spg_flex=spg;
(1 missing value generated)

.         lab var h_flex   "Poverty headcount. Flex bundle";

.         lab var pg_flex  "Poverty gap. Flex bundle";

.         lab var spg_flex "Squared poverty gap. Flex bundle";

.         sort hhid;

.         merge hhid using "$path/work/hhdata.dta";
(label lspdomain already defined)
(label lsurvquar already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop if _merge~=3;
(1 observation deleted)

.         drop _merge;

.         gen popwt=hhsize*hhweight;
(11 missing values generated)

.                 * Stata 10.1 syntax ;
.         svyset , clear;

.         svyset [pweight=popwt] , str(strata) psu(psu);

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>

.         svy: mean h_flex pg_flex spg_flex;
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
      h_flex |   18.76293   .8087632      17.17125    20.35461
     pg_flex |   4.912512     .26814      4.384802    5.440222
    spg_flex |   1.880462   .1324509      1.619793     2.14113
--------------------------------------------------------------

.         svy: mean h_flex pg_flex spg_flex , over(rural);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex       |
       Urban |   9.496852   1.653054      6.243578    12.75013
       Rural |   20.50458   .9504687      18.63402    22.37514
-------------+------------------------------------------------
pg_flex      |
       Urban |   2.238792   .4437758      1.365424     3.11216
       Rural |   5.415063   .3138954      4.797305    6.032821
-------------+------------------------------------------------
spg_flex     |
       Urban |    .855253   .2003305       .460995    1.249511
       Rural |   2.073159   .1543796      1.769334    2.376984
--------------------------------------------------------------

.         svy: mean h_flex pg_flex spg_flex , over(news);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Central: news = Central
      Eastern: news = Eastern
     Northern: news = Northern
      Western: news = Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex       |
     Central |   18.59499   1.373981      15.89094    21.29903
     Eastern |   12.73783   .9913963      10.78673    14.68894
    Northern |   6.645068   1.039844      4.598615    8.691522
     Western |   34.03498   1.898796      30.29808    37.77189
-------------+------------------------------------------------
pg_flex      |
     Central |   4.883524   .3947638      4.106614    5.660434
     Eastern |    2.81991   .2739446      2.280777    3.359044
    Northern |   1.186021   .2607807      .6727942    1.699247
     Western |   9.817519   .7327537      8.375432    11.25961
-------------+------------------------------------------------
spg_flex     |
     Central |   1.813601   .1875658      1.444464    2.182738
     Eastern |   .9500846   .1259133      .7022824    1.197887
    Northern |   .3394684   .0868539      .1685366    .5104002
     Western |   4.036545   .3963577      3.256498    4.816593
--------------------------------------------------------------

.         svy: mean h_flex pg_flex spg_flex , over(reg_tpi);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Central: reg_tpi = Central
      Eastern: reg_tpi = Eastern
     Northern: reg_tpi = Northern
      Western: reg_tpi = Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex       |
     Central |   18.59499   1.373981      15.89094    21.29903
     Eastern |   12.73783   .9913963      10.78673    14.68894
    Northern |   6.645068   1.039844      4.598615    8.691522
     Western |   34.03498   1.898796      30.29808    37.77189
-------------+------------------------------------------------
pg_flex      |
     Central |   4.883524   .3947638      4.106614    5.660434
     Eastern |    2.81991   .2739446      2.280777    3.359044
    Northern |   1.186021   .2607807      .6727942    1.699247
     Western |   9.817519   .7327537      8.375432    11.25961
-------------+------------------------------------------------
spg_flex     |
     Central |   1.813601   .1875658      1.444464    2.182738
     Eastern |   .9500846   .1259133      .7022824    1.197887
    Northern |   .3394684   .0868539      .1685366    .5104002
     Western |   4.036545   .3963577      3.256498    4.816593
--------------------------------------------------------------

.         svy: mean h_flex pg_flex spg_flex , over(strata);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Kampala: strata = Kampala
    _subpop_2: strata = Central 1
    _subpop_3: strata = Central 2
    _subpop_4: strata = East Central
      Eastern: strata = Eastern
    _subpop_6: strata = Mid Northern
    _subpop_7: strata = North East
    _subpop_8: strata = West Nile
    _subpop_9: strata = Mid Western
   _subpop_10: strata = South Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex       |
     Kampala |   4.044422   1.872426      .3594163    7.729427
   _subpop_2 |   20.70962   2.161695      16.45532    24.96392
   _subpop_3 |   23.44927   2.296666      18.92934    27.96919
   _subpop_4 |   9.597109   .9912988      7.646195    11.54802
     Eastern |   14.91656   1.842834       11.2898    18.54333
   _subpop_6 |   5.854919   1.374914      3.149036    8.560802
   _subpop_7 |   22.61524   3.966743      14.80854    30.42194
   _subpop_8 |   3.388888   .9286716      1.561227    5.216549
   _subpop_9 |   34.27805   2.038667      30.26587    38.29022
  _subpop_10 |   33.88113   2.824057      28.32328    39.43898
-------------+------------------------------------------------
pg_flex      |
     Kampala |   .8803621    .436889       .020548    1.740176
   _subpop_2 |    5.25269   .5513412       4.16763    6.337751
   _subpop_3 |   6.421549   .7146481      5.015095    7.828004
   _subpop_4 |   2.428329   .2873554      1.862803    2.993856
     Eastern |   2.911359   .5604902      1.808293    4.014425
   _subpop_6 |   1.001819   .3543582      .3044289     1.69921
   _subpop_7 |   4.696196   .7732116      3.174486    6.217906
   _subpop_8 |   .6171464   .2424352      .1400246    1.094268
   _subpop_9 |   9.820835   1.062119      7.730544    11.91113
  _subpop_10 |    9.81542   .9898984      7.867262    11.76358
-------------+------------------------------------------------
spg_flex     |
     Kampala |   .3926612    .284601     -.1674443    .9527668
   _subpop_2 |   1.857588   .2696659      1.326875      2.3883
   _subpop_3 |   2.442444   .3255227      1.801803    3.083085
   _subpop_4 |    .874058   .1568457      .5653796    1.182736
     Eastern |   .9272935    .249582      .4361067     1.41848
   _subpop_6 |   .2762252   .1146809      .0505287    .5019216
   _subpop_7 |   1.395512   .2191837      .9641505    1.826874
   _subpop_8 |    .240142   .1214215      .0011799     .479104
   _subpop_9 |   4.122507   .6921669      2.760296    5.484718
  _subpop_10 |   3.982133   .4776327      3.042133    4.922132
--------------------------------------------------------------

.         svy: mean h_flex pg_flex spg_flex , over(spdomain);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex       |
     Kampala |   4.044422   1.872426      .3594163    7.729427
   _subpop_2 |   10.82586   5.370641      .2562392    21.39549
   _subpop_3 |   23.75612   1.852098      20.11112    27.40112
   _subpop_4 |   7.508876   2.113577      3.349275    11.66848
   _subpop_5 |   13.19123   1.065228      11.09482    15.28763
   _subpop_6 |   6.542515   2.397999      1.823162    11.26187
   _subpop_7 |   6.663184    1.20359      4.294473    9.031894
   _subpop_8 |   29.31111   2.811987      23.77702    34.84521
   _subpop_9 |   34.44171   2.041453      30.42405    38.45937
-------------+------------------------------------------------
pg_flex      |
     Kampala |   .8803621    .436889       .020548    1.740176
   _subpop_2 |   2.594596   1.485033      -.328006    5.517198
   _subpop_3 |   6.325515   .5164432      5.309135    7.341895
   _subpop_4 |   1.276609   .4568607      .3774902    2.175729
   _subpop_5 |   2.953726   .2928919      2.377304    3.530149
   _subpop_6 |   1.179032   .5392857       .117697    2.240367
   _subpop_7 |   1.187255   .2995376      .5977537    1.776757
   _subpop_8 |   8.062686   .8687079      6.353036    9.772336
   _subpop_9 |    9.96861   .7894922      8.414859    11.52236
-------------+------------------------------------------------
spg_flex     |
     Kampala |   .3926612    .284601     -.1674443    .9527668
   _subpop_2 |   .9672351   .6236257     -.2600841    2.194554
   _subpop_3 |   2.330378   .2388182      1.860374    2.800381
   _subpop_4 |   .3542592   .1486649      .0616811    .6468373
   _subpop_5 |   1.001747   .1351168      .7358322    1.267662
   _subpop_6 |   .3611202   .2053692     -.0430542    .7652946
   _subpop_7 |   .3356437   .0970338      .1446774    .5266099
   _subpop_8 |    3.21428   .4514618      2.325785    4.102774
   _subpop_9 |   4.107342   .4266849       3.26761    4.947075
--------------------------------------------------------------

.         compress;
survquar was float now byte
reg_tpi was float now byte
spdomain was float now byte
one was float now byte
triwt was float now byte
h was float now byte
h_flex was float now byte
region was float now byte
psu was int now byte
survmon was float now byte
strata was float now byte
rural was float now byte
news was float now byte
bswt was float now byte

.         sort hhid;

. save "$path/work/cons_real.dta" , replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/cons_real.dta saved

.         collapse  (mean) h_flex pg_flex spg_flex [aw=hhweight*hhsize]
> , by (strata);

. save "$path/work/povmeas.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povmeas.dta saved

. *** HARUNA, the file Povmeas.dta gives the headcount poverty rates us
> ing flexible food bundle without inflicting reveales preferences
> *** therefore specifications in line 226 of this do file have been ch
> anged repeatedly to generate these counts for particular
> *** classifications of interest including strata spdomain region urba
> n/rural (urban) and national (done by removing the by command 
> *********************************************************************
> *****
> * 130_povmeas_flex.do           (end)
> *********************************************************************
> *****;
. log close;
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/130_povmeas_flex.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:30
-----------------------------------------------------------------------

. 
end of do-file

.                                 do "$path/new/140_iterate_bjorn.do" $
> it_n $bottom       /* Flexible basket: Iterations */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/140_iterate.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/140_iterate.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:30

. clear

. set more off

. #delimit ;
delimiter now ;
. *global povline_initial "$path/in/povlines_first_iof.dta";
. *********************************************************************
> *****
> * 140_iterate.do        (start)
> *
> * Purpose: Create flexible food basket and poverty line with iterativ
> e procedure
> *
> * This program will take the results from the first pass at the
> * poverty lines and applies the corresponding spatial deflator to
> * re-select the relatively poor, their consumption bundles, and
> * their prices.
> *
> * Welfare indicator is here always temporally and spatially adjusted 
> per capita
> * expenditure. Here called cr_it< >.
> *
> * We will iterate this process 5 times which here assures convergence
> .
> *
> * CA, Mar 2010: Relatively poor are those below last iterated poverty
>  line
> * MAH, Apr 2010: Cleaning
> * URB, feb 2012: Commented out "drop if unit~=2"
> *********************************************************************
> *****;
. /*
> This file uses:
>             in/povlines_first_new.dta
>         work/hhdata.dta
>         work/consump_nom.dta
>         work/own.dta
>         work/daily.dta
>         work/temp_index_reg_tpi.dta
>         work/cons_cod.dta
>         work/food_cat.dta
>         work/cons_real.dta
>         work/products.dta
>         work/match96_02.dta
>         new/conversions.do
>         
> This file creates (where `pass' is the number of the iteration):
>         work/codes_food_basket_flex_it`pass'.dta
>         work/price_unit_flex_it`pass'.dta
>         work/quan_flex_it`pass'.dta
>         work/match_cod_flex_it`pass'.csv
>         work/relpoor_it`pass'.dta
>         work/povlines_it`pass'.dta
>         work/foodshares_it`pass'.dta
>         work/nat_pov_flex.csv
>         work/rur_pov_flex.csv
>         work/strata_pov_flex.csv
>         work/spdomain_pov_flex.csv
>         work/reg_tpi_pov_flex.csv
> */
> 
> *********************************************************************
> *****;
. * Make a key file that will be used over and over, without change
> * in every iteration. This will include the TEMPORALLY deflated consu
> mption
> * and various HH data such as hhweight, spdomain, etc.
> *********************************************************************
> *****;
. use "$path/work/conpc.dta";

.         sort hhid;

.         merg hhid using "$path/work/hhdata.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.d
> ta";
variables reg_tpi survquar do not uniquely identify observations in
    the master data
(label lsurvquar already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.                 gen food_pc_tpi = food_pc_nom /tpi_trim;
(12 missing values generated)

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
(13 missing values generated)

.         lab var food_pc_tpi "Temp-adjusted per capita food consumptio
> n/day";

.         lab var cons_pc_tpi "Temp adjusted total consumption/day";

.         tempfile contpi;

.         sort hhid;

. save `contpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. save contpi_, replace;
file contpi_.dta saved

. *use "$path/in/povlines_first_iterate.dta", clear;
. *save "$path/work/povlines_first.dta", replace;
. *********************************************************************
> *****;
. * Now set some information pertaining to the iterations. For now we'l
> l
> * manually set the number of iterations. Also specify the percentile
> * cutpoint that we will use for defining the relatively poor.
> *********************************************************************
> *****;
. local lastpass=0;

. local pass=1;

. * Use these two lines to manually specify the number of iterations
> * and the cutpoint here in the do file.;
.   *local maxit=5;
.   *local cutpt=50;
. * Use these few lines if you want to specify the number of iterations
> * and percentile cutpoint by passing them as parameters on the comman
> d
> * line, e.g.:   wstata do new/iterate1.do 5 50;
. if "`1'"=="" | "`2'"=="" {      ;
.         di in red "Error: you need to specify number of iterations as
>  first parameter";
.         di in red "       and percentile cutpoint as second parameter
>  on command line.";
. };

. local maxit `1';

. local cutpt `2';

. tempfile cutoff;

. di "*****************************************************************
> *****";
**********************************************************************

. while `pass' <= `maxit' {;
  2.         **********************************************************
> ****************;
. *********************************************************************
> *****;
. * Pick out the bottom X percent in real consumption per capita 
> * (temporally & spatially adjusted), as ranked by the previous iterat
> ion.
> * The percentile to use is defined by "cutpt". This produces a file t
> hat
> * has the hhid, and a dummy variable indicating if they were below th
> e
> * cutpoint on the last iteration.
> *********************************************************************
> *****;
. *********************************************************************
> *****;
. /*
> * Comment out if IOF 2008/09. (This code included instead of below co
> de in order to replicate published figures 2002/03). ( START ) ;
> 
>         if "`pass'"=="1" {      ;
>               use `contpi', clear;
>               sort spdomain;
>               merge spdomain using "$path/work/povlines_first.dta";
>               tab _m;
>               drop _m;
> *              gen relpoor`pass'= cons_pc_tpi<=cutoff;
>                gen relpoor`pass'= cons_pc_tpi if cons_pc_tpi<=cutoff;
>               rename cons_pc_tpi cr_it0;
>               sort hhid;
>          save "$path/work/relpoor_it`pass'.dta", replace;
> *        use "$path/work/cons_real.dta", clear;
> *              gen cr_it0=cr2;
>         };
>         
> 
> * Comment out if IOF 2008/09. (This code included instead of below co
> de in order to replicate published figures 2002/03). ( END ) ;
> */
> 
> 
> 
> * Comment out if IAF 2002/03. (This code below excluded in order to r
> eplicate published figures 2002/03). ( START ) ;
.         if "`pass'"=="1" { ;
  3. * Find real income at cut point initially;
.                 use "$path/work/cons_real.dta", clear;
  4.                                     gen cr_it0=cr2;
  5.                         cap drop one;
  6.             gen one=1;
  7.                                     collapse (p`cutpt') one cr_it`
> lastpass' [aw=popwt] ;
  8.                                     rename cr_it`lastpass' cutoff;
  9.                                     sort one;
 10.             save `cutoff', replace;
 11.             save cutoff, replace;
 12.  * Find relatively poor initially;
.             use "$path/work/cons_real.dta", clear;
 13.                                                 gen cr_it`lastpass
> '=cr2;
 14.             cap drop one;
 15.             cap drop cutoff;
 16.             gen one=1;
 17.                                     sort one;
 18.             merge one using `cutoff';
 19.             tab _merge;
 20.             drop _merge;
 21.                                     drop one;
 22.                            gen relpoor`pass'=cr_it`lastpass'<=cuto
> ff;
 23.             *lab var relpoor`pass' "=1 if in bottom of PCE";
.                                     tab relpoor`pass' [aw=popwt];
 24.                                     keep hhid cr_it`lastpass' relp
> oor`pass' popwt;
 25.             sort hhid;
 26.         save "$path/work/relpoor_it`pass'.dta", replace;
 27.         };
 28. * Comment out if IAF 2002/03. (This code below excluded in order t
> o replicate published figures 2002/03). ( END ) ;
.                 if `pass'>1 {   ;
 29. * Find real income at cut point in iteration number `pass' ;
.                 use "$path/work/cons_real_it`lastpass'.dta" , clear;
 30.                                                 cap drop one;
 31.                 gen one=1;
 32.                                                                 *C
> A modified from hhweight*hhsize to popwt;
.                 collapse (p`cutpt') one cr_it`lastpass' [aw=popwt] ;
 33.                         rename cr_it`lastpass' cutoff;
 34.                                                                   
>       sort one;
 35.         save `cutoff', replace;
 36.         * Find relatively poor in iteration number `pass' ;
.                 use "$path/work/cons_real_it`lastpass'.dta", clear;
 37.                                                 cap drop one;
 38.                 gen one=1;
 39.                                                 sort one;
 40.                 merge one using `cutoff';
 41.                 tab _merge;
 42.                 drop _merge;
 43.                                                 drop one;
 44.                 gen relpoor`pass'=cr_it`lastpass'<=cutoff;
 45.                 *lab var relpoor`pass' "=1 if in bottom of PCE";
.                                                 tab relpoor`pass' [aw
> =popwt];
 46. *CA modified to popwt above and to keep popwt below;
.                 keep hhid cr_it`lastpass' relpoor`pass' popwt;
 47.                 sort hhid;
 48.         save "$path/work/relpoor_it`pass'.dta", replace;
 49.         };
 50.         **********************************************************
> ****************;
. * Get the consumption file, and select only those codes that are food
> ,
> * using our definition of "food", which includes alcoholic beverages.
> *********************************************************************
> *****;
.         use "$path/work/cons_cod.dta", clear;
 51. *CA modified to merge in work/hhdata.dta for bootstrap;
.     sort hhid;
 52.     merge hhid using "$path/work/hhdata.dta";
 53.     tab _m;
 54.     drop _m;
 55.         /*
>                 sort product;
>                 merge product using "$path/work/food_cat.dta";
>                 tab _merge;
>                 keep if _merge==3;
>                 drop _merge;
> */
> 
>                                 * Only food transactions ;
.                 keep if food_cat==1;
 56.                 sort hhid;
 57. ******************************************************************
> ********;
. * Merge with file that has temporally AND spatially adjusted consumpt
> ion
> * per capita from the previous iteration, and also identifies those b
> elow 
> * the cutoff. Then select only those who are below the cutoff.
> *********************************************************************
> *****;
.                 merge hhid using "$path/work/relpoor_it`pass'.dta";
 58.                 tab _merge;
 59.                 drop _merge;
 60.                                 * Keep only transactions by the po
> or ;
.                 keep if relpoor`pass';
 61. ******************************************************************
> ********;
. * Calculate HH level food shares. Since we're only doing shares here,
>  we can
> * work with the expenditures without doing temporal adjustment.
> *********************************************************************
> *****;
.                 gen  food_expenditure = cod_hh_nom;
 62.                 *gen  food_expenditure= own_valued + daily_valued 
> + monthly_valued + educ_valued;
.                 egen tot_food_expen= sum (food_expen), by (hhid) ;
 63.                 count if food_expenditure==.;
 64.                 count if tot_food_expen==.;
 65.                 gen food_share= food_expenditure/tot_food_expen;
 66.                 count if food_share==.;
 67.                 drop if food_share==.;
 68.                 sort hhid product;
 69.                 tempfile foodshares;
 70.         save `foodshares', replace;
 71. ******************************************************************
> **************;
. * Now find the total (economy wise, e.g. not by HH) shares by each pr
> oduct in
> * order to select the most important goods in each domain's basket.
> *********************************************************************
> ***********;
.                 collapse (mean) hhweight spdomain, by (hhid);
 72.                 sort hhid ;
 73.                  collapse (sum) hhweight , by(spdomain);
 74.                 rename hhweight tothhweight;
 75.                 tempfile tothhweight;
 76.                 sort spdomain;
 77.         save `tothhweight', replace;
 78.         use `foodshares', clear;
 79.                 sort spdomain;
 80.                 merge spdomain using `tothhweight';
 81.                 tab _merge;
 82.                 drop _merge;
 83.                 sort spdomain product;
 84.                 gen f_share_w`pass'=(food_share*hhweight)/tothhwei
> ght;
 85.                 collapse (sum) f_share_w`pass', by(spdomain produc
> t descript);
 86.                                sort spdomain f_share_w`pass';
 87.                 by spdomain: gen cumshr`pass'= sum(f_share_w`pass'
> );
 88.                 count if cumshr`pass'<=.075;
 89.                 drop if cumshr`pass'<=.075;
 90.                 lab var f_share_w`pass' "average food share for th
> e 13 spatial domains";
 91.         save `foodshares', replace;
 92.                                                 * Number of spatia
> ls domains a food product appears ;
.                 gen numreg=1;
 93.                 collapse (sum) numreg cumshr`pass', by (product de
> script);
 94.                 keep product numreg descript;
 95.                 display _N;
 96.                 sort product;
 97.                                 * Include food product labels ;
. *                merge product using "$path/work/products.dta";
. *                tab _merge;
. *                keep if _merge==3;
.                 keep product descript numreg;
 98.                   sort product;
 99.                      display _N;
100.           save "$path/work/codes_food_basket_flex_it`pass'.dta", r
> eplace;
101. ******************************************************************
> ********;
. *********************************************************************
> *****;
. * That is pretty much the part equivalent to "100_food_basket_flex.do
> ",
> * which figures out the food shares for the relevant reference group.
>  Now
> * we figure out the prices with a code stream that is adapted from
> * "110_price_unit_flex.do".
> *********************************************************************
> *****;
. *********************************************************************
> *****;
. *********************************************************************
> *****************
> * Create sorted data set with daily + own expenditure and the matched
>  codes
> *********************************************************************
> *****************;
. use "$path/in/cons_cod_trans.dta", clear;
102. *save "$path/work/cons_cod_trans.dta", replace;
. *drop value   ;
. *drop quantity;
. keep hhid product food_cat valuez quantityz unit;
103. rename valuez    value;
104. rename quantityz quantity;
105. *drop count;
. drop if quantity==0 ;
106.         tempfile dd_acsort;
107.         save    `dd_acsort', replace;
108. /*
>         use "$path/work/daily.dta", clear;
>                 drop days;
>                 sort product;
>                 tempfile dd_acsort;
>         save `dd_acsort', replace;
>         
>         use "$path/work/own.dta", clear;
>                 keep hhid product valued quantityd unit;
>                 rename valued value;
>                 rename quantityd quantity;
>         
>                 *CHECK THE ZEROS IN quantity FOR NOW DELETE;
>                 drop if quantity==0;
>         
>                 append using `dd_acsort';
> */
> 
>                 *CA modified to insert work/hhdata.dta for bootstrap;
.                 sort hhid;
109.                 merge hhid using "$path/work/hhdata.dta";
110.                 tab _m;
111.                  drop if _m==2;
112.                 drop _m;
113.                                 sort product;
114.                 gen count=1;
115.         save `dd_acsort', replace;
116.         **********************************************************
> ****************;
. * Merge the basket codes with the dd  and own data sets.
> * Drop all codes not a part of the flexible food basket
> *********************************************************************
> *****;
.                 merge product using "$path/work/codes_food_basket_fle
> x_it`pass'.dta";
117.                         tab _merge;
118.                 drop if _merge~=3;
119.                 drop _merge;
120. ******************************************************************
> ********************
> * Drop observations where product code, quantity or value information
>  is unavailable
> *********************************************************************
> *****************;
.                 drop if product==. | value==. | quantity==.  ;
121.         **********************************************************
> ****************************
> * Convert non-KG quantities (units, liters) into kilograms
> *********************************************************************
> *****************;
. *do "$path/new/110a_conversions.do"
> 
> ********************************************************************
> * There remain a few difficult to interpret observations such as lite
> rs
> * of fish and liters of pasta. These are dropped.
> ********************************************************************;
. *                $MZ drop if unit~=2;
.         *************************************************************
> *************;
. * Bring in the spdomain and reg_tpi variables, and also the informati
> on on
> * relatively poor households.
> *********************************************************************
> *****;
.                 preserve;
122.                                                 * Temporally adjus
> ted expenditure ;
.                         use `contpi', clear;
123.                                 keep hhid hhweight spdomain reg_tp
> i survquar tpi_trim cons_pc_tpi ;
124.                                 sort hhid;
125.                                 tempfile hhd2;
126.                         save `hhd2', replace;
127.                 restore;
128.                                 compress;
129.                 sort hhid;
130.                 merge hhid using `hhd2';
131.                 tab _merge;
132.                 drop _merge;
133.                 sort hhid;
134.                 merge hhid using "$path/work/relpoor_it`pass'.dta"
> ;
135.                 tab _merge;
136.                 drop _merge;
137.                                                 * Keep nominal foo
> d transactions by poor people ;
.                 keep if relpoor`pass';
138.                 drop if product==.;
139.                                                                 * 
> Temporally deflate transaction values ;
.                 gen value_r=value/tpi_trim;
140. ******************************************************************
> ********;
. * Toss out the bottom 5% and top 5% of the HH-LEVEL prices per kg in
> * each spdomain & product combination. This should eliminate outliers
> * that may have an undue influence on the price calculation. 
> *********************************************************************
> *****;
.                 gen hhppkg=value_r/quantity;
141.                 egen lower5=pctile(hhppkg), p(5)  by(spdomain prod
> uct);
142.                 egen upper5=pctile(hhppkg), p(95) by(spdomain prod
> uct);
143.                 keep if hhppkg>=lower5 & hhppkg<=upper5;
144. ******************************************************************
> ***
> * Note that we do prices in three ways. First, by summing quantity an
> d value 
> * This average price price_uw is thus quantity/value weighted. Second
> , we
> * calculate the price and take simple means for a transaction weighte
> d
> * price, price_ut. Last we take the median, price_um. But in the end
> * we only use price_unitw
> *********************************************************************
> ;
.                 gen price_ut`pass'=value_r/(quantity*1000);
145.                 gen price_um`pass'=price_ut;
146.                 collapse (sum) 
>                         quantity value_r count bswt (mean) price_ut (
> median) price_um [aw=hhweight], 
>                         by(spdomain product);
147.                 *Generate weighted price per gram ;
.                 gen price_uw`pass'=value_r/(quantity*1000);
148.                 drop value_r quantity;
149.                 sort spdomain product;
150.                 lab var price_ut`pass' "Average of calculated pric
> es - transaction weighted";
151.                 lab var price_um`pass' "Median of prices";
152.                 lab var price_uw`pass' "Value share weighted mean 
> prices";
153. * Get an idea of the difference between the price measures;
.                 gen ratiotw`pass'=price_ut`pass'/price_uw`pass';
154.                 gen ratiomw`pass'=price_um`pass'/price_uw`pass';
155.                 sum ratiotw`pass' ratiomw`pass';
156.                 sort product;
157.                 merge product using "$path/work/codes_food_basket_
> flex_it`pass'.dta";
158.                 tab _m;
159.                 count if _merge~=3;
160.                 drop if _merge~=3;
161.                 drop _merge;
162.                 sort product spdomain;
163.         save "$path/work/price_unit_flex_it`pass'.dta", replace;
164. ******************************************************************
> ********;
. *********************************************************************
> *****;
. * That concludes the prices part. Now we move to calculating the food
> * poverty lines, which draws code from "120_povline_flex.do" with ver
> y few
> * changes:
> * - The changes facilitate accumulating vectors
> *   of intermediate results across iterations, rather than generating
>  a
> *   bunch of new files.
> *********************************************************************
> *****;
. *********************************************************************
> *****;
. *********************************************************************
> *****;
. * Use the file with the food basket (`foodshares'), which is in share
> s. 
> * Then merge it with the prices file, and then with the calories file
> .
> * Along the way, drop those observations where we have no price infor
> mation
> * or no calorie information, but list them out.
> *********************************************************************
> *****;
.         use `foodshares', clear;
165.                 sort product spdomain;
166.                 merge product spdomain using "$path/work/price_uni
> t_flex_it`pass'.dta";
167.                         tab _merge;
168.                 list product spdomain descript if _merge==1;
169.                         drop if _merge ~=3;
170.                 drop _merge;
171.                 sort product;
172.                         merge product using "$path/work/calperg.dt
> a";
173.                 tab _merge;
174.                                                 * This tells where
>  we are lacking calorie info or are lacking quantity info due to 
>                 * missing price info above;
.                 list product spdomain descript if _merge==1;
175.                         drop if _merge~=3;
176.                 drop _merge;
177.                 sort spdomain f_share_w`pass';
178.                                 *CA modified to change count bswt;
.                 by spdomain: count if round(bswt)<10;
179.                                 sum bswt;
180.                                                 drop if round(bswt
> ) < 10;
181.                                                                 * 
> Total food share in spatial domain ;
.                 by spdomain: egen baskshr=sum(f_share_w`pass');
182.                                 * Cumulated food share in spatial 
> domain ;
.                 by spdomain: gen  cumshr =sum(f_share_w`pass');
183.                 drop if cumshr<=baskshr-.9;
184.                         drop baskshr;
185.                 by spdomain: egen baskshr=sum(f_share_w`pass');
186.                 tabstat baskshr , by(spdomain) st(n mean sd min ma
> x);
187.                                                                 * 
> How many grams in 1 MT exp on food item ;
.                                 gen quan`pass'=f_share_w`pass'/price_
> uw`pass';
188.                                 * How many calories in 1 MT exp on
>  food item ;
.                 gen cal_ir`pass'=quan`pass'*calperg;
189.                                 * how many calories in 1 MT exp in
>  food basket ;
.                 by spdomain: egen calreg=sum(cal_ir);
190.                         sort spdomain;
191.                 merge spdomain using "$path/work/calpp.dta";
192.                 tab _merge;
193.                 drop _merge;
194.                                                         * get the 
> expansion factor to hit 95% of calorie requirements ;
.                 gen ratio=.95*calpp/calreg;
195.                         replace quan`pass'=quan`pass'*ratio;
196.                 replace cal_ir`pass'=quan`pass'*calperg;
197.                         sort spdomain product;
198.                 by spdomain: egen chkcal=sum(cal_ir`pass');
199.                 replace chkcal=chkcal/.95-calpp ;
200.                                                 tabstat chkcal , b
> y(spdomain) st(n mean sd min max);
201.                         gen val_ir`pass'=quan`pass'*price_uw`pass'
> ;
202.                         by spdomain: egen povline_f_flex90_`pass'=
> sum(val_ir`pass');
203.                 replace povline_f=povline_f_flex90_`pass'/.9;
204.                 *drop product96;
. keep product spdomain quan`pass'  price_uw`pass' val_ir`pass' povline
> _f_flex90_`pass' calpp calperg;
205.                     save "$path/work/quan_flex_it`pass'.dta", repl
> ace;
206.                         collapse (mean) povline_f_flex90_`pass', b
> y (spdomain);
207.                                                 keep spdomain povl
> ine_f_flex90_`pass';
208.                 sort spdomain;
209.                 save "$path/work/povline_food_flex_it`pass'.dta", 
> replace;
210.         **********************************************************
> ****************;
. *********************************************************************
> *****;
. * Now comes the part that draws the non-food and total poverty lines,
> * and generates estimates of poverty measures. This is drawn from 
> * "130_povmeas_flex.do" with a few changes.
> *********************************************************************
> *****;
. *********************************************************************
> *****;
. *********************************************************************
> *****
> * Calculate non-food expenditure for HH around the food poverty line
> *
> * Develop a discrete triangular weighted distribution. This gives a
> * weight of  1 to HH at +/- 18-20% from food poverty line, and
> * weight of  2 to HH at +/- 16-18% from food poverty line, and ...
> * weight of 10 to HH at +/-  0- 2% from food poverty line.
> * This weight is called triwt below.
> *********************************************************************
> *****;
.         use `contpi', clear;
211.                 sort spdomain;
212.                 merge spdomain using "$path/work/povline_food_flex
> _it`pass'.dta";
213.                 tab _merge;
214.                 drop _merge;
215.                 gen triwt=0;
216.                 replace triwt = 11 - round(50*abs(cons_pc_tpi/povl
> ine_f_flex90_`pass'-1)+0.5) if abs(cons_pc_tpi/povline_f_flex90_`pass
> '-1) <= 0.2;
217.                                 ***since the poor were very few in
>  Kampala and Central urban for Uganda we added 1 to weights****;
.                                 * Nearness to poverty line and popula
> tion weights ;
.                 gen tripopwt=(0.001+triwt)*hhweight*hhsize;
218.                                                 preserve;
219.                         collapse (mean) nf_pc_nom [aw=tripopwt] , 
> by(spdomain);
220.                         rename nf_pc_nom povline_nf_flex`pass';
221.                         lab var povline_nf_flex`pass' "Nonfood pov
> erty line. Flexible bundle";
222.                         tempfile znf;
223.                         sort spdomain;
224.                         save `znf', replace;
225.                                                                 re
> store;
226.                                 sort spdomain;
227.                 merge spdomain using `znf';
228.                 tab _merge;
229.                 drop _merge;
230. ******************************************************************
> ********
> * Poverty line is the sum of the food and non-food poverty lines
> *********************************************************************
> *****;
.                 gen povline_flex`pass'=povline_f_flex90_`pass' + povl
> ine_nf_flex`pass';
231. keep spdomain povline_flex`pass';
232.                 sort spdomain;
233.         save "$path/work/povlines_it`pass'.dta", replace;
234. ******************************************************************
> ********;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first: we just use the fi
> rst stratum.
> *********************************************************************
> *****;
.         use `contpi', clear;
235.                 sort spdomain;
236.                 merge spdomain using "$path/work/povlines_it`pass'
> .dta";
237.                 tab _merge;
238.                 drop _merge;
239.                 gen cr= cons_pc_tpi ;
240.                 gen linpob`pass'=povline_flex`pass';
241.                 qui sum linpob`pass' if spdomain==1, meanonly;
242.                 global spi_base=r(mean);
243.                 gen spi`pass'=linpob`pass'/$spi_base;
244.                 gen cr_it`pass'=cr/spi`pass';
245.                 qui sum cr [aw=hhweight*hhsize];
246.                 global sumcr=r(sum);
247.                 qui sum cr_it`pass' [aw=hhweight*hhsize];
248.                 global sumcr2=r(sum);
249.                 replace spi`pass'=spi`pass'*$sumcr2/$sumcr;
250.                 gen linpobr`pass'=linpob`pass'/spi`pass';
251.                 replace cr_it`pass'=cr/spi`pass';
252.                 su cr cr_it`pass' linpob`pass' linpobr`pass' [aw=h
> hweight*hhsize];
253.                 lab var cr "Temporally-adjusted cons pc";
254.                 lab var cr_it`pass' "Spatially & temporally adjust
> ed cons pc";
255.                 lab var linpob`pass' "Poverty line";
256.                 lab var linpobr`pass' "Real poverty line";
257.                 lab var spi`pass' "Spatial price index";
258.                 gen linpob=linpob`pass';
259. ******************************************************************
> ********
> * calculate poverty measures with the flexible food bundle
> *********************************************************************
> *****;
.                 gen h=100 if cr_it`pass'<=linpobr`pass' & linpobr`pas
> s'~=. & cr_it`pass'~=.;
260.                 replace  h   = 0 if cr_it`pass' > linpobr`pass' & 
> linpobr`pass'~=. & cr_it`pass'~=.;
261.                 gen      pg  = ((linpobr`pass' - cr_it`pass' )/lin
> pobr`pass') *100;
262.                 replace  pg  = 0             if h==0;
263.                 gen      spg = ((( linpobr`pass' - cr_it`pass' )/ 
> linpobr`pass' )^2)*100;
264.                 replace  spg = 0             if h==0;
265.                 gen h_flex`pass'  =h;
266.                 gen pg_flex`pass' =pg;
267.                 gen spg_flex`pass'=spg;
268.                                 lab var h_flex`pass'   "Poverty he
> adcount. Flexible bundle";
269.                 lab var pg_flex`pass'  "Poverty gap. Flexible bund
> le";
270.                 lab var spg_flex`pass' "Squared poverty gap. Flexi
> ble bundle";
271.                 gen popwt=hhsize*hhweight;
272.                         * Stata 10.1 syntax ;
.                         svyset , clear;
273.                         svyset [pweight=popwt] , str(strata) psu(p
> su);
274.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass
> ';
275.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass
> ' , over(rural);
276.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass
> ' , over(strata);
277.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass
> ' , over(strata rural);
278.                 svy: mean h_flex`pass' pg_flex`pass' spg_flex`pass
> ' , over(spdomain);
279. *preserve;
. keep hhid popwt cr_it`pass' h_flex`pass' pg_flex`pass' spg_flex`pass'
>  rural news reg_tpi strata spdomain;
280.                 compress;
281.                 sort hhid;
282.         save "$path/work/cons_real_it`pass'.dta" , replace;
283. *restore;
.                                 * New cutoff point (percentile) to us
> e in next iteration is equal to the poverty ;
.                 * rate in this iteration ;
.                                                 sum h_flex`pass' [aw=
> popwt] ;
284.                                 * Comment out next line for IAF 20
> 02/03 in order to replicate official figures ( START );
.                 * URB: In this case, we just use the poorest 50% as t
> here are too few actually poor to calculate the bundle and prices..;
.                 local cutpt= $tpi_bottom;
285. *               local cutpt= round(r(mean));
.                 * Comment out next line for IAF 2002/03 in order to r
> eplicate official figures ( END );
. *       save foodshares tempfile to disk;
.         use `foodshares', clear;
286.         save "$path/work/foodshares_it`pass'.dta", replace;
287.         local lastpass = `pass';
288.         local pass = `pass' + 1;
289.         };
(12 missing values generated)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
file cutoff.dta saved
(12 missing values generated)
variable one does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,426      100.00      100.00
------------+-----------------------------------
      Total |      7,426      100.00

   relpoor1 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 3,705.4422       49.97       49.97
          1 | 3,709.5578       50.03      100.00
------------+-----------------------------------
      Total |      7,415      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/relpoor_it1.dta saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.13        0.13
          2 |          1        0.00        0.13
          3 |     99,617       99.87      100.00
------------+-----------------------------------
      Total |     99,751      100.00
(7559 observations deleted)
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          6        0.01        0.01
          3 |     92,192       99.99      100.00
------------+-----------------------------------
      Total |     92,198      100.00
(56781 observations deleted)
(5 missing values generated)
    5
    0
(5 missing values generated)
    5
(5 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000004.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000004.tmp saved
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     35,412      100.00      100.00
------------+-----------------------------------
      Total |     35,412      100.00
  222
(222 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
47
47
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/codes_food_basket_flex_it1.dta saved
(2770 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.15        0.15
          2 |        163        0.18        0.33
          3 |     89,422       99.67      100.00
------------+-----------------------------------
      Total |     89,718      100.00
(163 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp saved
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      3,268        3.65        3.65
          2 |          2        0.00        3.65
          3 |     86,287       96.35      100.00
------------+-----------------------------------
      Total |     89,557      100.00
(3270 observations deleted)
(63 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000007.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000007.tmp saved
product was float now int
unit was float now byte
food_cat was float now byte
region was float now byte
psu was int now byte
survquar was float now byte
survmon was float now byte
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
bswt was float now byte
count was float now byte
descript was float now byte
numreg was double now byte
variable hhid does not uniquely identify observations in the master
    data
survquar was byte now float
reg_tpi was byte now float
spdomain was byte now float
(label lspdomain already defined)
(label lsurvquar already defined)
(label region already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        199        0.23        0.23
          3 |     86,224       99.77      100.00
------------+-----------------------------------
      Total |     86,423      100.00
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.00        0.00
          3 |     86,422      100.00      100.00
------------+-----------------------------------
      Total |     86,423      100.00
(52579 observations deleted)
(36 observations deleted)
(2552 observations deleted)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
    ratiotw1 |       379    1.742594    6.706313   .7078901   127.7162
    ratiomw1 |       379    1.450461    6.440925   .3107096   122.9475
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          3        0.79        0.79
          3 |        379       99.21      100.00
------------+-----------------------------------
      Total |        382      100.00
    3
(3 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/price_unit_flex_it1.dta saved
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17        4.29        4.29
          2 |        150       37.88       42.17
          3 |        229       57.83      100.00
------------+-----------------------------------
      Total |        396      100.00

     +-------------------------------------+
     | product         spdomain   descript |
     |-------------------------------------|
230. |     157          Kampala          1 |
231. |     157    Central urban          1 |
232. |     157    Central rural          1 |
233. |     157    Eastern urban          1 |
234. |     157    Eastern rural          1 |
     |-------------------------------------|
235. |     157   Northern urban          1 |
236. |     157    Western urban          1 |
237. |     157    Western rural          1 |
238. |     160          Kampala          1 |
239. |     161          Kampala          1 |
     |-------------------------------------|
240. |     161    Central urban          1 |
241. |     161    Central rural          1 |
242. |     161    Eastern urban          1 |
243. |     161    Eastern rural          1 |
244. |     161   Northern urban          1 |
     |-------------------------------------|
245. |     161   Northern rural          1 |
246. |     161    Western urban          1 |
     +-------------------------------------+
(167 observations deleted)
variable product does not uniquely identify observations in the
    master data
(note: descript is str30 in using data but will be float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         18        7.29        7.29
          3 |        229       92.71      100.00
------------+-----------------------------------
      Total |        247      100.00
(18 observations deleted)

-----------------------------------------------------------------------
-> spdomain = Kampala
    6
-----------------------------------------------------------------------
-> spdomain = Central urban
    3
-----------------------------------------------------------------------
-> spdomain = Central rural
    0
-----------------------------------------------------------------------
-> spdomain = Eastern urban
    3
-----------------------------------------------------------------------
-> spdomain = Eastern rural
    0
-----------------------------------------------------------------------
-> spdomain = Northern urban
    4
-----------------------------------------------------------------------
-> spdomain = Northern rural
    0
-----------------------------------------------------------------------
-> spdomain = Western urban
    1
-----------------------------------------------------------------------
-> spdomain = Western rural
    0

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        bswt |       229    117.6769    146.1576          3        833
(17 observations deleted)
(2 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        15  .7162545         0  .7162545  .7162545
 Central urban |        22  .8427124         0  .8427124  .8427124
 Central rural |        27  .8865423         0  .8865423  .8865423
 Eastern urban |        23  .8387909         0  .8387909  .8387909
 Eastern rural |        28  .8995938         0  .8995938  .8995938
Northern urban |        18  .8324719         0  .8324719  .8324719
Northern rural |        20  .8937585         0  .8937585  .8937585
 Western urban |        29  .8387383         0  .8387383  .8387383
 Western rural |        28  .9054509         0  .9054509  .9054509
---------------+--------------------------------------------------
         Total |       210  .8582698  .0487418  .7162545  .9054509
------------------------------------------------------------------
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        210      100.00      100.00
------------+-----------------------------------
      Total |        210      100.00
(210 real changes made)
(202 real changes made)
(210 real changes made)

Summary for variables: chkcal
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        15  .0001092         0  .0001092  .0001092
 Central urban |        22 -.0000707         0 -.0000707 -.0000707
 Central rural |        27   .000045         0   .000045   .000045
 Eastern urban |        23   .000045         0   .000045   .000045
 Eastern rural |        28  .0000385         0  .0000385  .0000385
Northern urban |        18  .0000321         0  .0000321  .0000321
Northern rural |        20   .000045         0   .000045   .000045
 Western urban |        29  .0000835         0  .0000835  .0000835
 Western rural |        28  .0000385         0  .0000385  .0000385
---------------+--------------------------------------------------
         Total |       210    .00004  .0000437 -.0000707  .0001092
------------------------------------------------------------------
(210 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/quan_flex_it1.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povline_food_flex_it1.dta saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(167 real changes made)
(12 missing values generated)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000009.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000009.tmp saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(1 missing value generated)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povlines_it1.dta saved
variable spdomain does not uniquely identify observations in the
    master data
variable spdomain does not uniquely identify observations in
    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
    > 2/work/povlines_it1.dta
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(13 missing values generated)
(1 missing value generated)
(1 missing value generated)
(13 missing values generated)
(7426 real changes made)
(1 missing value generated)
(7414 real changes made)

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          cr |    7414  30109848.2    1044.199   1186.301   57.35136   
> 112846.5
      cr_it1 |    7414  30109848.2    1044.199   994.3381   28.21577   
> 76485.15
     linpob1 |    7415  30112959.1    402.8133   350.1584   126.7493   
> 1684.631
    linpobr1 |    7415  30112959.1    329.9297   6.71e-06   329.9296   
> 329.9297
(1 missing value generated)
(6855 missing values generated)
(6842 real changes made)
(13 missing values generated)
(6842 real changes made)
(13 missing values generated)
(6842 real changes made)
(13 missing values generated)
(13 missing values generated)
(13 missing values generated)
(12 missing values generated)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
     h_flex1 |   8.833293    .578991      7.693817    9.972769
    pg_flex1 |   2.183429   .2111475      1.767883    2.598975
   spg_flex1 |   .8443075   .1040357      .6395613    1.049054
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex1      |
       Urban |   21.13625   2.644875      15.93103    26.34146
       Rural |   6.520551   .5174449        5.5022    7.538902
-------------+------------------------------------------------
pg_flex1     |
       Urban |   6.442732    1.05224      4.371884    8.513579
       Rural |   1.382754   .1569696      1.073832    1.691676
-------------+------------------------------------------------
spg_flex1    |
       Urban |   2.797997   .5342836      1.746506    3.849488
       Rural |   .4770478   .0716365      .3360643    .6180313
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: strata = Kampala
    _subpop_2: strata = Central 1
    _subpop_3: strata = Central 2
    _subpop_4: strata = East Central
      Eastern: strata = Eastern
    _subpop_6: strata = Mid Northern
    _subpop_7: strata = North East
    _subpop_8: strata = West Nile
    _subpop_9: strata = Mid Western
   _subpop_10: strata = South Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex1      |
     Kampala |    42.1298   4.127294      34.00713    50.25247
   _subpop_2 |   4.309566   .9984056      2.344665    6.274466
   _subpop_3 |   5.847475   1.101234      3.680206    8.014745
   _subpop_4 |   4.931302   1.024255       2.91553    6.947075
     Eastern |   5.155902   1.550225         2.105    8.206804
   _subpop_6 |   .3039417   .2370194     -.1625216     .770405
   _subpop_7 |   6.277219   2.155453      2.035205    10.51923
   _subpop_8 |   .3505304    .255953     -.1531948    .8542556
   _subpop_9 |   13.93486   2.027045       9.94556    17.92416
  _subpop_10 |   14.92852   1.677883      11.62638    18.23065
-------------+------------------------------------------------
pg_flex1     |
     Kampala |    12.8435   2.041789      8.825183    16.86182
   _subpop_2 |   .7777922   .1995152      .3851387    1.170446
   _subpop_3 |   1.042122     .22126      .6066737     1.47757
   _subpop_4 |   1.130032   .2948843      .5496879    1.710375
     Eastern |    1.50553    .609658         .3057     2.70536
   _subpop_6 |   .0263984   .0263461     -.0254516    .0782485
   _subpop_7 |   1.520043   .8821942     -.2161486    3.256235
   _subpop_8 |   .1427909   .1082832     -.0703144    .3558963
   _subpop_9 |   3.440222   .8656037      1.736681    5.143763
  _subpop_10 |   3.287823    .491996      2.319556    4.256089
-------------+------------------------------------------------
spg_flex1    |
     Kampala |   5.622793   1.124636      3.409467    7.836118
   _subpop_2 |   .2176895   .0726159      .0747787    .3606003
   _subpop_3 |   .2882365   .0858468      .1192868    .4571863
   _subpop_4 |   .4242027   .1311643      .1660663     .682339
     Eastern |    .647709   .3029539      .0514841    1.243934
   _subpop_6 |   .0090497   .0091179     -.0088946     .026994
   _subpop_7 |   .6049911   .4544836     -.2894499    1.499432
   _subpop_8 |   .0646765   .0478533     -.0295006    .1588537
   _subpop_9 |   1.314858   .4330593      .4625809    2.167135
  _subpop_10 |   1.154717   .2191025      .7235146    1.585919
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

         Over: strata rural
    _subpop_1: Kampala Urban
    _subpop_2: Central 1 Urban
    _subpop_3: Central 1 Rural
    _subpop_4: Central 2 Urban
    _subpop_5: Central 2 Rural
    _subpop_6: East Central Urban
    _subpop_7: East Central Rural
    _subpop_8: Eastern Urban
    _subpop_9: Eastern Rural
   _subpop_10: Mid Northern Urban
   _subpop_11: Mid Northern Rural
   _subpop_12: North East Urban
   _subpop_13: North East Rural
   _subpop_14: West Nile Urban
   _subpop_15: West Nile Rural
   _subpop_16: Mid Western Urban
   _subpop_17: Mid Western Rural
   _subpop_18: South Western Urban
   _subpop_19: South Western Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex1      |
   _subpop_1 |    42.1298   4.127294      34.00713    50.25247
   _subpop_2 |          0  (omitted)
   _subpop_3 |   5.028574   1.164356      2.737077     7.32007
   _subpop_4 |   .9376656   .5671572     -.1785215    2.053853
   _subpop_5 |   6.466461   1.179984      4.144207    8.788714
   _subpop_6 |   38.68483   4.183255      30.45202    46.91764
   _subpop_7 |    2.36073   .5541031      1.270234    3.451226
   _subpop_8 |   36.84787   5.205435      26.60337    47.09236
   _subpop_9 |   2.427689   .8410558      .7724589    4.082919
  _subpop_10 |   .5050185   .4940115     -.4672149    1.477252
  _subpop_11 |   .2685472   .2655182     -.2540027    .7910971
  _subpop_12 |   25.56631   2.577665      20.49337    30.63925
  _subpop_13 |   3.204848   .6827074      1.861254    4.548442
  _subpop_14 |          0  (omitted)
  _subpop_15 |    .409995   .2977131     -.1759157    .9959058
  _subpop_16 |   5.306188   1.307341      2.733291    7.879085
  _subpop_17 |   15.02838   2.081666      10.93158    19.12518
  _subpop_18 |   4.759291   1.197559      2.402449    7.116133
  _subpop_19 |    15.5576   1.785279       12.0441     19.0711
-------------+------------------------------------------------
pg_flex1     |
   _subpop_1 |    12.8435   2.041789      8.825183    16.86182
   _subpop_2 |          0  (omitted)
   _subpop_3 |    .907559   .2310725      .4527995    1.362319
   _subpop_4 |   .2898836   .1753392     -.0551907    .6349578
   _subpop_5 |   1.136957   .2373818       .669781    1.604134
   _subpop_6 |   10.41986   1.712109      7.050368    13.78936
   _subpop_7 |   .4225443   .1720084      .0840253    .7610634
   _subpop_8 |   14.15991    2.31903      9.595974    18.72385
   _subpop_9 |   .4161737   .1974159      .0276517    .8046957
  _subpop_10 |   .1747376   .1709292     -.1616575    .5111327
  _subpop_11 |   .0002871   .0002838     -.0002715    .0008457
  _subpop_12 |   8.049013   1.092561      5.898812    10.19921
  _subpop_13 |   .4801075   .1281192      .2279641    .7322509
  _subpop_14 |          0  (omitted)
  _subpop_15 |   .1670143   .1259852     -.0809294    .4149579
  _subpop_16 |   1.017232   .3755895      .2780573    1.756406
  _subpop_17 |    3.74729   .9289842      1.919014    5.575566
  _subpop_18 |   .9604185   .4454662      .0837241    1.837113
  _subpop_19 |   3.431799   .5205738       2.40729    4.456308
-------------+------------------------------------------------
spg_flex1    |
   _subpop_1 |   5.622793   1.124636      3.409467    7.836118
   _subpop_2 |          0  (omitted)
   _subpop_3 |   .2540088   .0842573      .0881873    .4198303
   _subpop_4 |   .0896188   .0542069     -.0170625    .1963001
   _subpop_5 |   .3132765   .0933899      .1294816    .4970713
   _subpop_6 |   3.949924   .9700397      2.040849       5.859
   _subpop_7 |   .1556937   .0926381     -.0266216     .338009
   _subpop_8 |   6.694594   1.436314      3.867874    9.521313
   _subpop_9 |    .127161   .0708746      -.012323     .266645
  _subpop_10 |   .0604596   .0591419     -.0559339    .1768532
  _subpop_11 |   3.07e-07   3.03e-07     -2.90e-07    9.04e-07
  _subpop_12 |   3.727104   .7741171      2.203612    5.250595
  _subpop_13 |   .1077003   .0328374       .043075    .1723257
  _subpop_14 |          0  (omitted)
  _subpop_15 |   .0756484   .0556665     -.0339054    .1852022
  _subpop_16 |   .3179064   .1281718      .0656594    .5701533
  _subpop_17 |   1.441203   .4707652       .514719    2.367687
  _subpop_18 |   .3569235   .2587953     -.1523955    .8662425
  _subpop_19 |   1.204069   .2317064      .7480623    1.660076
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex1      |
     Kampala |    42.1298   4.127294      34.00713    50.25247
   _subpop_2 |   .4230458   .3416908     -.2494147    1.095506
   _subpop_3 |   5.777782   .8486196      4.107666    7.447897
   _subpop_4 |   38.31345    2.83304      32.73792    43.88898
   _subpop_5 |   2.550431   .4298125      1.704543    3.396318
   _subpop_6 |   .3341999    .328916     -.3131194    .9815191
   _subpop_7 |   .3784641   .2122985     -.0393474    .7962755
   _subpop_8 |   5.060072   .9066891      3.275673     6.84447
   _subpop_9 |   15.35986   1.364358      12.67475    18.04497
-------------+------------------------------------------------
pg_flex1     |
     Kampala |    12.8435   2.041789      8.825183    16.86182
   _subpop_2 |   .1307865   .1056353     -.0771077    .3386808
   _subpop_3 |   1.027087   .1684326      .6956048    1.358568
   _subpop_4 |   12.20976   1.561704      9.136265    15.28325
   _subpop_5 |   .4451835   .1171442      .2146392    .6757278
   _subpop_6 |    .115634   .1138057     -.1083401     .339608
   _subpop_7 |   .0483062   .0342332      -.019066    .1156785
   _subpop_8 |   .9916645    .288886      .4231259    1.560203
   _subpop_9 |   3.549682   .4759232      2.613047    4.486316
-------------+------------------------------------------------
spg_flex1    |
     Kampala |   5.622793   1.124636      3.409467    7.836118
   _subpop_2 |   .0404333   .0326576     -.0238382    .1047047
   _subpop_3 |   .2848901   .0636931      .1595397    .4102405
   _subpop_4 |    5.30812   .9675994      3.403848    7.212393
   _subpop_5 |    .144118    .054777      .0363147    .2519212
   _subpop_6 |   .0400096   .0393771     -.0374859    .1175052
   _subpop_7 |   .0210828    .015074     -.0085835     .050749
   _subpop_8 |    .335465   .1354749      .0688453    .6020847
   _subpop_9 |   1.292674   .2280171      .8439274     1.74142
--------------------------------------------------------------
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
h_flex1 was float now byte
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/cons_real_it1.dta saved

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
     h_flex1 |    7414  30109848.2    8.833293   28.37976          0   
>      100
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/foodshares_it1.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
variable one does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

   relpoor2 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 3,707.7113       50.00       50.00
          1 | 3,707.2887       50.00      100.00
------------+-----------------------------------
      Total |      7,415      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/relpoor_it2.dta saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.13        0.13
          2 |          1        0.00        0.13
          3 |     99,617       99.87      100.00
------------+-----------------------------------
      Total |     99,751      100.00
(7559 observations deleted)
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          7        0.01        0.01
          3 |     92,192       99.99      100.00
------------+-----------------------------------
      Total |     92,199      100.00
(55138 observations deleted)
(5 missing values generated)
    5
    0
(5 missing values generated)
    5
(5 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000a.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000a.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000b.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000b.tmp saved
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     37,056      100.00      100.00
------------+-----------------------------------
      Total |     37,056      100.00
  210
(210 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000a.tmp saved
49
49
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/codes_food_basket_flex_it2.dta saved
(2770 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.15        0.15
          2 |        163        0.18        0.33
          3 |     89,422       99.67      100.00
------------+-----------------------------------
      Total |     89,718      100.00
(163 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp saved
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,089        2.33        2.33
          2 |          2        0.00        2.33
          3 |     87,466       97.67      100.00
------------+-----------------------------------
      Total |     89,557      100.00
(2091 observations deleted)
(64 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000e.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000e.tmp saved
product was float now int
unit was float now byte
food_cat was float now byte
region was float now byte
psu was int now byte
survquar was float now byte
survmon was float now byte
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
bswt was float now byte
count was float now byte
descript was float now byte
numreg was double now byte
variable hhid does not uniquely identify observations in the master
    data
survquar was byte now float
reg_tpi was byte now float
spdomain was byte now float
(label lspdomain already defined)
(label lsurvquar already defined)
(label region already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        165        0.19        0.19
          3 |     87,402       99.81      100.00
------------+-----------------------------------
      Total |     87,567      100.00
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     87,567      100.00      100.00
------------+-----------------------------------
      Total |     87,567      100.00
(52048 observations deleted)
(44 observations deleted)
(2573 observations deleted)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
    ratiotw2 |       379    1.968465    10.07827   .8060185   189.6305
    ratiomw2 |       379    1.943578    13.96106   .1808162   265.0519
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          3        0.79        0.79
          3 |        379       99.21      100.00
------------+-----------------------------------
      Total |        382      100.00
    3
(3 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/price_unit_flex_it2.dta saved
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17        4.29        4.29
          2 |        158       39.90       44.19
          3 |        221       55.81      100.00
------------+-----------------------------------
      Total |        396      100.00

     +-------------------------------------+
     | product         spdomain   descript |
     |-------------------------------------|
221. |     157          Kampala          1 |
222. |     157    Central urban          1 |
223. |     157    Central rural          1 |
224. |     157    Eastern urban          1 |
225. |     157    Eastern rural          1 |
     |-------------------------------------|
226. |     157   Northern urban          1 |
227. |     157    Western urban          1 |
228. |     157    Western rural          1 |
230. |     160          Kampala          1 |
231. |     161          Kampala          1 |
     |-------------------------------------|
232. |     161    Central urban          1 |
233. |     161    Central rural          1 |
234. |     161    Eastern urban          1 |
235. |     161    Eastern rural          1 |
236. |     161   Northern urban          1 |
     |-------------------------------------|
237. |     161   Northern rural          1 |
238. |     161    Western urban          1 |
     +-------------------------------------+
(175 observations deleted)
variable product does not uniquely identify observations in the
    master data
(note: descript is str30 in using data but will be float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         16        6.75        6.75
          3 |        221       93.25      100.00
------------+-----------------------------------
      Total |        237      100.00
(16 observations deleted)

-----------------------------------------------------------------------
-> spdomain = Kampala
    0
-----------------------------------------------------------------------
-> spdomain = Central urban
   12
-----------------------------------------------------------------------
-> spdomain = Central rural
    0
-----------------------------------------------------------------------
-> spdomain = Eastern urban
    0
-----------------------------------------------------------------------
-> spdomain = Eastern rural
    0
-----------------------------------------------------------------------
-> spdomain = Northern urban
    7
-----------------------------------------------------------------------
-> spdomain = Northern rural
    0
-----------------------------------------------------------------------
-> spdomain = Western urban
    2
-----------------------------------------------------------------------
-> spdomain = Western rural
    0

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        bswt |       221    127.1674    136.7197          2        864
(21 observations deleted)
(2 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        26  .7102003         0  .7102003  .7102003
 Central urban |         4  .3519903         0  .3519903  .3519903
 Central rural |        26   .889146         0   .889146   .889146
 Eastern urban |        30  .8101979         0  .8101979  .8101979
 Eastern rural |        28  .9039342         0  .9039342  .9039342
Northern urban |        10  .5857797         0  .5857797  .5857797
Northern rural |        19  .8990204         0  .8990204  .8990204
 Western urban |        27  .8268004         0  .8268004  .8268004
 Western rural |        28  .9055803         0  .9055803  .9055803
---------------+--------------------------------------------------
         Total |       198  .8243743  .1100024  .3519903  .9055803
------------------------------------------------------------------
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        198      100.00      100.00
------------+-----------------------------------
      Total |        198      100.00
(198 real changes made)
(190 real changes made)
(198 real changes made)

Summary for variables: chkcal
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        26  .0001092         0  .0001092  .0001092
 Central urban |         4  .0000578         0  .0000578  .0000578
 Central rural |        26 -.0000835         0 -.0000835 -.0000835
 Eastern urban |        30   .000045         0   .000045   .000045
 Eastern rural |        28  .0000385         0  .0000385  .0000385
Northern urban |        10  .0000321         0  .0000321  .0000321
Northern rural |        19   .000045         0   .000045   .000045
 Western urban |        27  -.000045         0  -.000045  -.000045
 Western rural |        28  .0000385         0  .0000385  .0000385
---------------+--------------------------------------------------
         Total |       198  .0000221  .0000577 -.0000835  .0001092
------------------------------------------------------------------
(198 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/quan_flex_it2.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povline_food_flex_it2.dta saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(159 real changes made)
(12 missing values generated)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000g.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000g.tmp saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(1 missing value generated)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povlines_it2.dta saved
variable spdomain does not uniquely identify observations in the
    master data
variable spdomain does not uniquely identify observations in
    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
    > 2/work/povlines_it2.dta
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(13 missing values generated)
(1 missing value generated)
(1 missing value generated)
(13 missing values generated)
(7426 real changes made)
(1 missing value generated)
(7414 real changes made)

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          cr |    7414  30109848.2    1044.199   1186.301   57.35136   
> 112846.5
      cr_it2 |    7414  30109848.2    1044.199   989.0372   29.95126   
> 89007.41
     linpob2 |    7415  30112959.1    447.5128   392.3236   129.2579   
> 1749.325
    linpobr2 |    7415  30112959.1    363.6724   .0000139   363.6724   
> 363.6724
(1 missing value generated)
(6689 missing values generated)
(6676 real changes made)
(13 missing values generated)
(6676 real changes made)
(13 missing values generated)
(6676 real changes made)
(13 missing values generated)
(13 missing values generated)
(13 missing values generated)
(12 missing values generated)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
     h_flex2 |    10.8549   .7218229       9.43433    12.27548
    pg_flex2 |    2.83328   .2785297      2.285123    3.381438
   spg_flex2 |   1.121058   .1422773      .8410508    1.401065
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex2      |
       Urban |   34.34789   2.461802      29.50297    39.19281
       Rural |   6.438631   .5139452      5.427168    7.450095
-------------+------------------------------------------------
pg_flex2     |
       Urban |   10.57523   1.171355       8.26996     12.8805
       Rural |   1.377928   .1572567      1.068441    1.687415
-------------+------------------------------------------------
spg_flex2    |
       Urban |   4.552197   .6580791      3.257072    5.847322
       Rural |   .4760633   .0718672       .334626    .6175007
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: strata = Kampala
    _subpop_2: strata = Central 1
    _subpop_3: strata = Central 2
    _subpop_4: strata = East Central
      Eastern: strata = Eastern
    _subpop_6: strata = Mid Northern
    _subpop_7: strata = North East
    _subpop_8: strata = West Nile
    _subpop_9: strata = Mid Western
   _subpop_10: strata = South Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex2      |
     Kampala |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |   8.139775    1.40208      5.380428    10.89912
   _subpop_3 |   11.10101   2.910306      5.373416     16.8286
   _subpop_4 |   4.879676   1.084348      2.745639    7.013713
     Eastern |   5.030744   1.507939      2.063063    7.998425
   _subpop_6 |    4.45834   1.476131      1.553258    7.363421
   _subpop_7 |    9.24555   4.996351     -.5874603    19.07856
   _subpop_8 |   4.808772   2.265917      .3493608    9.268182
   _subpop_9 |   13.84635    2.05648      9.799119    17.89358
  _subpop_10 |   14.89143   1.672492       11.5999    18.18296
-------------+------------------------------------------------
pg_flex2     |
     Kampala |    13.9417   2.089728      9.829037    18.05437
   _subpop_2 |   1.816482   .4276934      .9747648    2.658198
   _subpop_3 |   3.002513   1.277193       .488948    5.516078
   _subpop_4 |   1.144441   .3051977      .5438002    1.745082
     Eastern |   1.514968   .6203009      .2941924    2.735744
   _subpop_6 |   1.092597   .4285392      .2492153    1.935978
   _subpop_7 |   2.269396   1.625739       -.93012    5.468911
   _subpop_8 |   1.067735   .4544719      .1733173    1.962153
   _subpop_9 |   3.439224   .8713954      1.724284    5.154163
  _subpop_10 |   3.301617   .4945044      2.328414    4.274821
-------------+------------------------------------------------
spg_flex2    |
     Kampala |   6.187339   1.188402      3.848519    8.526159
   _subpop_2 |   .5795557   .1714488      .2421378    .9169735
   _subpop_3 |    1.23513    .686975     -.1168631    2.587123
   _subpop_4 |   .4339568   .1343731      .1695054    .6984082
     Eastern |   .6612749   .3117973      .0476459    1.274904
   _subpop_6 |   .4222982    .190451      .0474834     .797113
   _subpop_7 |   .9445417   .7941395     -.6183551    2.507438
   _subpop_8 |   .3250163   .1296571      .0698463    .5801864
   _subpop_9 |   1.316407   .4358807      .4585777    2.174237
  _subpop_10 |   1.160804   .2202715      .7273017    1.594307
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

         Over: strata rural
    _subpop_1: Kampala Urban
    _subpop_2: Central 1 Urban
    _subpop_3: Central 1 Rural
    _subpop_4: Central 2 Urban
    _subpop_5: Central 2 Rural
    _subpop_6: East Central Urban
    _subpop_7: East Central Rural
    _subpop_8: Eastern Urban
    _subpop_9: Eastern Rural
   _subpop_10: Mid Northern Urban
   _subpop_11: Mid Northern Rural
   _subpop_12: North East Urban
   _subpop_13: North East Rural
   _subpop_14: West Nile Urban
   _subpop_15: West Nile Rural
   _subpop_16: Mid Western Urban
   _subpop_17: Mid Western Rural
   _subpop_18: South Western Urban
   _subpop_19: South Western Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex2      |
   _subpop_1 |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |   28.20358   3.702178      20.91755    35.48961
   _subpop_3 |    4.79233     1.0348      2.755805    6.828855
   _subpop_4 |   47.86238   4.632984      38.74449    56.98027
   _subpop_5 |   6.466461   1.179984      4.144207    8.788714
   _subpop_6 |   40.39593   4.613665      31.31606     49.4758
   _subpop_7 |   2.174859    .548178      1.096024    3.253694
   _subpop_8 |   38.38215   4.599029      29.33109    47.43322
   _subpop_9 |   2.159677   .7682942      .6476447    3.671709
  _subpop_10 |   28.26063   5.674043      17.09389    39.42736
  _subpop_11 |   .2685472   .2655182     -.2540027    .7910971
  _subpop_12 |   47.17054   4.753209      37.81605    56.52504
  _subpop_13 |   3.204848   .6827074      1.861254    4.548442
  _subpop_14 |   30.73854   8.836684      13.34761    48.12947
  _subpop_15 |    .409995   .2977131     -.1759157    .9959058
  _subpop_16 |   4.519275   1.582842       1.40418    7.634369
  _subpop_17 |   15.02838   2.081666      10.93158    19.12518
  _subpop_18 |    4.12265   .9762342      2.201384    6.043916
  _subpop_19 |    15.5576   1.785279       12.0441     19.0711
-------------+------------------------------------------------
pg_flex2     |
   _subpop_1 |    13.9417   2.089728      9.829037    18.05437
   _subpop_2 |    7.41742   1.548828      4.369267    10.46557
   _subpop_3 |   .8820211   .2260887      .4370698    1.326972
   _subpop_4 |   18.06831   4.077879      10.04289    26.09373
   _subpop_5 |   1.103152   .2325526      .6454793    1.560824
   _subpop_6 |   10.87841   1.752936      7.428568    14.32826
   _subpop_7 |   .4031294    .170041      .0684823    .7377766
   _subpop_8 |   14.53176   2.321509      9.962942    19.10058
   _subpop_9 |   .3944135   .1919437      .0166609    .7721661
  _subpop_10 |    7.26845   2.060876      3.212568    11.32433
  _subpop_11 |   .0054935   .0054316      -.005196    .0161831
  _subpop_12 |   13.61493    2.59374       8.51035    18.71951
  _subpop_13 |   .4622767   .1293287       .207753    .7168005
  _subpop_14 |   6.349477   1.638355      3.125132    9.573823
  _subpop_15 |   .1717301   .1292425     -.0826241    .4260844
  _subpop_16 |   .8091235   .3236885      .1720923    1.446155
  _subpop_17 |   3.772539   .9307492       1.94079    5.604289
  _subpop_18 |   .7584821   .4182453     -.0646406    1.581605
  _subpop_19 |   3.458939   .5227034      2.430239    4.487639
-------------+------------------------------------------------
spg_flex2    |
   _subpop_1 |   6.187339   1.188402      3.848519    8.526159
   _subpop_2 |   2.579675   .6889668      1.223763    3.935588
   _subpop_3 |   .2458557   .0826781      .0831421    .4085693
   _subpop_4 |   8.628746   2.871592      2.977344    14.28015
   _subpop_5 |   .3030083   .0918149      .1223131    .4837036
   _subpop_6 |   4.161935   .9930202      2.207633    6.116236
   _subpop_7 |   .1500446   .0910375     -.0291207      .32921
   _subpop_8 |   6.936732   1.460859      4.061707    9.811758
   _subpop_9 |   .1210502   .0681937     -.0131577    .2552581
  _subpop_10 |   2.820743   1.025297      .8029196    4.838567
  _subpop_11 |   .0001124   .0001111     -.0001063    .0003311
  _subpop_12 |   6.244289   1.482484      3.326703    9.161875
  _subpop_13 |   .1003968   .0309175      .0395501    .1612436
  _subpop_14 |    1.77374   .4417338      .9043909    2.643089
  _subpop_15 |    .079252   .0583909     -.0356634    .1941675
  _subpop_16 |   .2498707   .1031058      .0469545    .4527868
  _subpop_17 |   1.451571   .4727011      .5212772    2.381865
  _subpop_18 |   .2994154   .2411835     -.1752429    .7740738
  _subpop_19 |   1.214091   .2329359      .7556643    1.672518
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex2      |
     Kampala |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |   37.07303   4.384285      28.44458    45.70147
   _subpop_3 |   5.664632   .8126988       4.06521    7.264054
   _subpop_4 |   40.13523   2.928287      34.37226    45.89821
   _subpop_5 |    2.35479   .4093482      1.549177    3.160403
   _subpop_6 |   30.76159   4.839391      21.23748    40.28569
   _subpop_7 |   .3784641   .2122985     -.0393474    .7962755
   _subpop_8 |   4.340784    .974036      2.423844    6.257724
   _subpop_9 |   15.35986   1.364358      12.67475    18.04497
-------------+------------------------------------------------
pg_flex2     |
     Kampala |    13.9417   2.089728      9.829037    18.05437
   _subpop_2 |   12.22277   2.940721      6.435322    18.01022
   _subpop_3 |   .9972407   .1648501      .6728093    1.321672
   _subpop_4 |   12.63942   1.568678      9.552204    15.72664
   _subpop_5 |   .4231714   .1150563      .1967362    .6496066
   _subpop_6 |   7.524341   1.520484       4.53197    10.51671
   _subpop_7 |    .054714   .0354213     -.0149964    .1244244
   _subpop_8 |   .7863337   .2601183       .274411    1.298256
   _subpop_9 |   3.576115   .4773124      2.636746    4.515484
-------------+------------------------------------------------
spg_flex2    |
     Kampala |   6.187339   1.188402      3.848519    8.526159
   _subpop_2 |    5.30883   1.863097      1.642184    8.975476
   _subpop_3 |   .2756349   .0625553      .1525238    .3987461
   _subpop_4 |   5.533325   .9854463      3.593929    7.472721
   _subpop_5 |    .137745   .0535471      .0323623    .2431277
   _subpop_6 |   2.799828   .7419715        1.3396    4.260056
   _subpop_7 |   .0222536    .015815      -.008871    .0533782
   _subpop_8 |    .272167   .1216609      .0327336    .5116003
   _subpop_9 |   1.302825   .2290632      .8520199     1.75363
--------------------------------------------------------------
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
h_flex2 was float now byte
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/cons_real_it2.dta saved

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
     h_flex2 |    7414  30109848.2     10.8549   31.10936          0   
>      100
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/foodshares_it2.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
variable one does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

   relpoor3 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 3,707.1357       50.00       50.00
          1 | 3,707.8643       50.00      100.00
------------+-----------------------------------
      Total |      7,415      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/relpoor_it3.dta saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.13        0.13
          2 |          1        0.00        0.13
          3 |     99,617       99.87      100.00
------------+-----------------------------------
      Total |     99,751      100.00
(7559 observations deleted)
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          7        0.01        0.01
          3 |     92,192       99.99      100.00
------------+-----------------------------------
      Total |     92,199      100.00
(53666 observations deleted)
(5 missing values generated)
    5
    0
(5 missing values generated)
    5
(5 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000h.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000h.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000i.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000i.tmp saved
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     38,528      100.00      100.00
------------+-----------------------------------
      Total |     38,528      100.00
  227
(227 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000h.tmp saved
49
49
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/codes_food_basket_flex_it3.dta saved
(2770 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000j.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000j.tmp saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.15        0.15
          2 |        163        0.18        0.33
          3 |     89,422       99.67      100.00
------------+-----------------------------------
      Total |     89,718      100.00
(163 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000j.tmp saved
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,089        2.33        2.33
          2 |          2        0.00        2.33
          3 |     87,466       97.67      100.00
------------+-----------------------------------
      Total |     89,557      100.00
(2091 observations deleted)
(64 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000l.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000l.tmp saved
product was float now int
unit was float now byte
food_cat was float now byte
region was float now byte
psu was int now byte
survquar was float now byte
survmon was float now byte
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
bswt was float now byte
count was float now byte
descript was float now byte
numreg was double now byte
variable hhid does not uniquely identify observations in the master
    data
survquar was byte now float
reg_tpi was byte now float
spdomain was byte now float
(label lspdomain already defined)
(label lsurvquar already defined)
(label region already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        165        0.19        0.19
          3 |     87,402       99.81      100.00
------------+-----------------------------------
      Total |     87,567      100.00
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     87,567      100.00      100.00
------------+-----------------------------------
      Total |     87,567      100.00
(50716 observations deleted)
(48 observations deleted)
(2648 observations deleted)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
    ratiotw3 |       405    2.199313    13.77286   .8336519   263.2027
    ratiomw3 |       405    2.185676    17.03467   .1808162   311.3757
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          3        0.74        0.74
          3 |        405       99.26      100.00
------------+-----------------------------------
      Total |        408      100.00
    3
(3 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/price_unit_flex_it3.dta saved
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         18        4.26        4.26
          2 |        167       39.48       43.74
          3 |        238       56.26      100.00
------------+-----------------------------------
      Total |        423      100.00

     +-------------------------------------+
     | product         spdomain   descript |
     |-------------------------------------|
237. |     157          Kampala          1 |
238. |     157    Central urban          1 |
239. |     157    Central rural          1 |
240. |     157    Eastern urban          1 |
241. |     157    Eastern rural          1 |
     |-------------------------------------|
242. |     157   Northern urban          1 |
243. |     157    Western urban          1 |
244. |     157    Western rural          1 |
247. |     160          Kampala          1 |
248. |     160    Central urban          1 |
     |-------------------------------------|
249. |     161          Kampala          1 |
250. |     161    Central urban          1 |
251. |     161    Central rural          1 |
252. |     161    Eastern urban          1 |
253. |     161    Eastern rural          1 |
     |-------------------------------------|
254. |     161   Northern urban          1 |
255. |     161   Northern rural          1 |
256. |     161    Western urban          1 |
     +-------------------------------------+
(185 observations deleted)
variable product does not uniquely identify observations in the
    master data
(note: descript is str30 in using data but will be float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         16        6.30        6.30
          3 |        238       93.70      100.00
------------+-----------------------------------
      Total |        254      100.00
(16 observations deleted)

-----------------------------------------------------------------------
-> spdomain = Kampala
    0
-----------------------------------------------------------------------
-> spdomain = Central urban
    3
-----------------------------------------------------------------------
-> spdomain = Central rural
    0
-----------------------------------------------------------------------
-> spdomain = Eastern urban
    0
-----------------------------------------------------------------------
-> spdomain = Eastern rural
    0
-----------------------------------------------------------------------
-> spdomain = Northern urban
    1
-----------------------------------------------------------------------
-> spdomain = Northern rural
    0
-----------------------------------------------------------------------
-> spdomain = Western urban
    4
-----------------------------------------------------------------------
-> spdomain = Western rural
    0

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        bswt |       238    122.1975    118.5984          3        814
(8 observations deleted)
(3 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        26  .7115215         0  .7115215  .7115215
 Central urban |        24  .7464371         0  .7464371  .7464371
 Central rural |        26  .8934227         0  .8934227  .8934227
 Eastern urban |        30   .814594         0   .814594   .814594
 Eastern rural |        27  .9011765         0  .9011765  .9011765
Northern urban |        23  .8655637         0  .8655637  .8655637
Northern rural |        18  .8879434         0  .8879434  .8879434
 Western urban |        25  .8229235         0  .8229235  .8229235
 Western rural |        28  .9058262         0  .9058262  .9058262
---------------+--------------------------------------------------
         Total |       227  .8380608  .0671168  .7115215  .9058262
------------------------------------------------------------------
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        227      100.00      100.00
------------+-----------------------------------
      Total |        227      100.00
(227 real changes made)
(219 real changes made)
(227 real changes made)

Summary for variables: chkcal
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        26 -.0000193         0 -.0000193 -.0000193
 Central urban |        24  .0000578         0  .0000578  .0000578
 Central rural |        26   .000045         0   .000045   .000045
 Eastern urban |        30 -.0000835         0 -.0000835 -.0000835
 Eastern rural |        27  .0000385         0  .0000385  .0000385
Northern urban |        23  .0000321         0  .0000321  .0000321
Northern rural |        18   .000045         0   .000045   .000045
 Western urban |        25  -.000045         0  -.000045  -.000045
 Western rural |        28 -.0000899         0 -.0000899 -.0000899
---------------+--------------------------------------------------
         Total |       227 -6.62e-06  .0000564 -.0000899  .0000578
------------------------------------------------------------------
(227 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/quan_flex_it3.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povline_food_flex_it3.dta saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(156 real changes made)
(12 missing values generated)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000n.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000n.tmp saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(1 missing value generated)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povlines_it3.dta saved
variable spdomain does not uniquely identify observations in the
    master data
variable spdomain does not uniquely identify observations in
    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
    > 2/work/povlines_it3.dta
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(13 missing values generated)
(1 missing value generated)
(1 missing value generated)
(13 missing values generated)
(7426 real changes made)
(1 missing value generated)
(7414 real changes made)

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          cr |    7414  30109848.2    1044.199   1186.301   57.35136   
> 112846.5
      cr_it3 |    7414  30109848.2    1044.199   976.3533   27.92578   
> 83189.83
     linpob3 |    7415  30112959.1    410.3842   363.7142   127.9185   
> 1746.484
    linpobr3 |    7415  30112959.1    338.5279   .0000121   338.5279   
>  338.528
(1 missing value generated)
(6850 missing values generated)
(6837 real changes made)
(13 missing values generated)
(6837 real changes made)
(13 missing values generated)
(6837 real changes made)
(13 missing values generated)
(13 missing values generated)
(13 missing values generated)
(12 missing values generated)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
     h_flex3 |   8.841936   .5801149      7.700248    9.983624
    pg_flex3 |   2.237824   .2159338      1.812858     2.66279
   spg_flex3 |   .8776813   .1082605      .6646206    1.090742
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex3      |
       Urban |    22.1097   2.587381      17.01763    27.20176
       Rural |   6.347827   .5142363       5.33579    7.359863
-------------+------------------------------------------------
pg_flex3     |
       Urban |    6.94024   1.081839      4.811141     9.06934
       Rural |   1.353851   .1567204       1.04542    1.662283
-------------+------------------------------------------------
spg_flex3    |
       Urban |   3.053146   .5618253      1.947452     4.15884
       Rural |   .4687317    .071597      .3278261    .6096372
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: strata = Kampala
    _subpop_2: strata = Central 1
    _subpop_3: strata = Central 2
    _subpop_4: strata = East Central
      Eastern: strata = Eastern
    _subpop_6: strata = Mid Northern
    _subpop_7: strata = North East
    _subpop_8: strata = West Nile
    _subpop_9: strata = Mid Western
   _subpop_10: strata = South Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex3      |
     Kampala |   42.99088   4.096677      34.92846    51.05329
   _subpop_2 |   3.898094   .8723807      2.181215    5.614972
   _subpop_3 |   6.300114   1.124806      4.086453    8.513774
   _subpop_4 |   4.798543   1.084939      2.663342    6.933744
     Eastern |   5.030744   1.507939      2.063063    7.998425
   _subpop_6 |   .3039417   .2370194     -.1625216     .770405
   _subpop_7 |   6.139828   2.443774      1.330388    10.94927
   _subpop_8 |   .3505304    .255953     -.1531948    .8542556
   _subpop_9 |   13.84635    2.05648      9.799119    17.89358
  _subpop_10 |   14.89143   1.672492       11.5999    18.18296
-------------+------------------------------------------------
pg_flex3     |
     Kampala |   13.89429   2.087693       9.78563    18.00295
   _subpop_2 |   .7191053   .1884672      .3481946    1.090016
   _subpop_3 |   1.062309   .2121898      .6447111    1.479906
   _subpop_4 |    1.11995   .3054807      .5187527    1.721148
     Eastern |   1.489894   .6200247      .2696619    2.710126
   _subpop_6 |   .0334853   .0314094     -.0283297    .0953002
   _subpop_7 |    1.51292    .915174     -.2881777    3.314017
   _subpop_8 |   .1446898   .1096019      -.071011    .3603906
   _subpop_9 |   3.430021   .8709612      1.715937    5.144106
  _subpop_10 |   3.292259   .4938598      2.320324    4.264193
-------------+------------------------------------------------
spg_flex3    |
     Kampala |   6.162168   1.185677       3.82871    8.495626
   _subpop_2 |   .1988063   .0689114       .063186    .3344266
   _subpop_3 |   .3069056   .0862405       .137181    .4766303
   _subpop_4 |   .4270712   .1334098      .1645156    .6896267
     Eastern |   .6539012   .3114188      .0410172    1.266785
   _subpop_6 |   .0128655   .0129381     -.0125972    .0383281
   _subpop_7 |   .6091261   .4722314     -.3202434    1.538496
   _subpop_8 |   .0661154   .0489479     -.0302159    .1624467
   _subpop_9 |   1.312811   .4353124      .4560994    2.169522
  _subpop_10 |   1.157418   .2198801      .7246854     1.59015
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

         Over: strata rural
    _subpop_1: Kampala Urban
    _subpop_2: Central 1 Urban
    _subpop_3: Central 1 Rural
    _subpop_4: Central 2 Urban
    _subpop_5: Central 2 Rural
    _subpop_6: East Central Urban
    _subpop_7: East Central Rural
    _subpop_8: Eastern Urban
    _subpop_9: Eastern Rural
   _subpop_10: Mid Northern Urban
   _subpop_11: Mid Northern Rural
   _subpop_12: North East Urban
   _subpop_13: North East Rural
   _subpop_14: West Nile Urban
   _subpop_15: West Nile Rural
   _subpop_16: Mid Western Urban
   _subpop_17: Mid Western Rural
   _subpop_18: South Western Urban
   _subpop_19: South Western Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex3      |
   _subpop_1 |   42.99088   4.096677      34.92846    51.05329
   _subpop_2 |          0  (omitted)
   _subpop_3 |   4.548452   .9960686      2.588151    6.508753
   _subpop_4 |   6.882256   3.372172      .2456922    13.51882
   _subpop_5 |   6.226722   1.209026      3.847313    8.606131
   _subpop_6 |   40.39593   4.613665      31.31606     49.4758
   _subpop_7 |   2.087547   .5456425      1.013702    3.161392
   _subpop_8 |   38.38215   4.599029      29.33109    47.43322
   _subpop_9 |   2.159677   .7682942      .6476447    3.671709
  _subpop_10 |   .5050185   .4940115     -.4672149    1.477252
  _subpop_11 |   .2685472   .2655182     -.2540027    .7910971
  _subpop_12 |   27.27537   2.224928      22.89663    31.65411
  _subpop_13 |   2.773354   .7684617      1.260992    4.285716
  _subpop_14 |          0  (omitted)
  _subpop_15 |    .409995   .2977131     -.1759157    .9959058
  _subpop_16 |   4.519275   1.582842       1.40418    7.634369
  _subpop_17 |   15.02838   2.081666      10.93158    19.12518
  _subpop_18 |    4.12265   .9762342      2.201384    6.043916
  _subpop_19 |    15.5576   1.785279       12.0441     19.0711
-------------+------------------------------------------------
pg_flex3     |
   _subpop_1 |   13.89429   2.087693       9.78563    18.00295
   _subpop_2 |          0  (omitted)
   _subpop_3 |   .8390808   .2184085      .4092447    1.268917
   _subpop_4 |   1.212853   .6221756     -.0116119    2.437319
   _subpop_5 |   1.043329   .2240758      .6023397    1.484319
   _subpop_6 |   10.88129   1.753184       7.43096    14.33163
   _subpop_7 |   .3765542   .1673829      .0471382    .7059703
   _subpop_8 |   14.53409   2.321551      9.965187    19.10299
   _subpop_9 |   .3669805   .1852759      .0023504    .7316106
  _subpop_10 |   .2081547   .2036179     -.1925731    .6088825
  _subpop_11 |   .0027391   .0027082     -.0025908     .008069
  _subpop_12 |   8.352077   1.046812      6.291911    10.41224
  _subpop_13 |   .4235772   .1259238      .1757543    .6714001
  _subpop_14 |          0  (omitted)
  _subpop_15 |   .1692353   .1275184     -.0817258    .4201963
  _subpop_16 |   .7940582    .319194      .1658723    1.422244
  _subpop_17 |    3.76408    .930157      1.933496    5.594665
  _subpop_18 |   .7448217   .4164636     -.0747947    1.564438
  _subpop_19 |   3.449846   .5219888      2.422552     4.47714
-------------+------------------------------------------------
spg_flex3    |
   _subpop_1 |   6.162168   1.185677       3.82871    8.495626
   _subpop_2 |          0  (omitted)
   _subpop_3 |   .2319751   .0799802      .0745711    .3893792
   _subpop_4 |   .4758205   .2639354     -.0436145    .9952555
   _subpop_5 |   .2856104     .08912      .1102188    .4610019
   _subpop_6 |   4.163246   .9931617      2.208666    6.117826
   _subpop_7 |   .1425348   .0887669     -.0321619    .3172314
   _subpop_8 |   6.938214   1.461004      4.062902    9.813527
   _subpop_9 |   .1129141   .0644672     -.0139597     .239788
  _subpop_10 |   .0857956   .0839257     -.0793733    .2509646
  _subpop_11 |   .0000279   .0000276     -.0000264    .0000823
  _subpop_12 |   3.869485   .7834351      2.327655    5.411315
  _subpop_13 |   .0898154   .0279416      .0348252    .1448057
  _subpop_14 |          0  (omitted)
  _subpop_15 |   .0773313     .05694     -.0347287    .1893913
  _subpop_16 |   .2453809   .1013641      .0458924    .4448694
  _subpop_17 |   1.448087   .4720522      .5190706    2.377104
  _subpop_18 |   .2957352   .2399018     -.1764007     .767871
  _subpop_19 |   1.210723   .2325233      .7531079    1.668337
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex3      |
     Kampala |   42.99088   4.096677      34.92846    51.05329
   _subpop_2 |   3.105062    2.06254     -.9540956     7.16422
   _subpop_3 |   5.422911    .813214      3.822475    7.023347
   _subpop_4 |   40.13523   2.928287      34.37226    45.89821
   _subpop_5 |   2.243725   .4119453      1.433001    3.054449
   _subpop_6 |   .3341999    .328916     -.3131194    .9815191
   _subpop_7 |   .3784641   .2122985     -.0393474    .7962755
   _subpop_8 |   4.340784    .974036      2.423844    6.257724
   _subpop_9 |   15.35986   1.364358      12.67475    18.04497
-------------+------------------------------------------------
pg_flex3     |
     Kampala |   13.89429   2.087693       9.78563    18.00295
   _subpop_2 |   .5472021   .3819729     -.2045351    1.298939
   _subpop_3 |   .9455041    .158872       .632838     1.25817
   _subpop_4 |    12.6421   1.568726      9.554793    15.72942
   _subpop_5 |   .3939482   .1123867       .172767    .6151295
   _subpop_6 |    .137748   .1355701     -.1290592    .4045551
   _subpop_7 |    .051324   .0347432      -.017052    .1197001
   _subpop_8 |   .7719006   .2578264      .2644884    1.279313
   _subpop_9 |   3.567259   .4768462      2.628808    4.505711
-------------+------------------------------------------------
spg_flex3    |
     Kampala |   6.162168   1.185677       3.82871    8.495626
   _subpop_2 |   .2146756   .1611213     -.1024172    .5317683
   _subpop_3 |   .2599217   .0606115      .1406358    .3792075
   _subpop_4 |   5.534712   .9855533      3.595106    7.474319
   _subpop_5 |   .1292645   .0518248      .0272713    .2312577
   _subpop_6 |   .0567759   .0558783     -.0531946    .1667465
   _subpop_7 |   .0216058   .0154202     -.0087417    .0519533
   _subpop_8 |   .2680415   .1206996         .0305     .505583
   _subpop_9 |   1.299414   .2287124      .8492989    1.749528
--------------------------------------------------------------
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
h_flex3 was float now byte
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/cons_real_it3.dta saved

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
     h_flex3 |    7414  30109848.2    8.841936    28.3923          0   
>      100
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/foodshares_it3.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
variable one does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

   relpoor4 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  3,707.684       50.00       50.00
          1 |  3,707.316       50.00      100.00
------------+-----------------------------------
      Total |      7,415      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/relpoor_it4.dta saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.13        0.13
          2 |          1        0.00        0.13
          3 |     99,617       99.87      100.00
------------+-----------------------------------
      Total |     99,751      100.00
(7559 observations deleted)
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          7        0.01        0.01
          3 |     92,192       99.99      100.00
------------+-----------------------------------
      Total |     92,199      100.00
(54989 observations deleted)
(5 missing values generated)
    5
    0
(5 missing values generated)
    5
(5 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000o.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000o.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000p.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000p.tmp saved
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     37,205      100.00      100.00
------------+-----------------------------------
      Total |     37,205      100.00
  217
(217 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000o.tmp saved
49
49
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/codes_food_basket_flex_it4.dta saved
(2770 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000q.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000q.tmp saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.15        0.15
          2 |        163        0.18        0.33
          3 |     89,422       99.67      100.00
------------+-----------------------------------
      Total |     89,718      100.00
(163 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000q.tmp saved
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,089        2.33        2.33
          2 |          2        0.00        2.33
          3 |     87,466       97.67      100.00
------------+-----------------------------------
      Total |     89,557      100.00
(2091 observations deleted)
(64 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000s.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000s.tmp saved
product was float now int
unit was float now byte
food_cat was float now byte
region was float now byte
psu was int now byte
survquar was float now byte
survmon was float now byte
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
bswt was float now byte
count was float now byte
descript was float now byte
numreg was double now byte
variable hhid does not uniquely identify observations in the master
    data
survquar was byte now float
reg_tpi was byte now float
spdomain was byte now float
(label lspdomain already defined)
(label lsurvquar already defined)
(label region already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        165        0.19        0.19
          3 |     87,402       99.81      100.00
------------+-----------------------------------
      Total |     87,567      100.00
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     87,567      100.00      100.00
------------+-----------------------------------
      Total |     87,567      100.00
(51928 observations deleted)
(44 observations deleted)
(2613 observations deleted)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
    ratiotw4 |       391     1.96967    9.927561   .7078901   189.6305
    ratiomw4 |       391    1.927804    13.74751   .1808162   265.0519
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          3        0.76        0.76
          3 |        391       99.24      100.00
------------+-----------------------------------
      Total |        394      100.00
    3
(3 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/price_unit_flex_it4.dta saved
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17        4.17        4.17
          2 |        159       38.97       43.14
          3 |        232       56.86      100.00
------------+-----------------------------------
      Total |        408      100.00

     +-------------------------------------+
     | product         spdomain   descript |
     |-------------------------------------|
232. |     157          Kampala          1 |
233. |     157    Central urban          1 |
234. |     157    Central rural          1 |
235. |     157    Eastern urban          1 |
236. |     157    Eastern rural          1 |
     |-------------------------------------|
237. |     157   Northern urban          1 |
238. |     157    Western urban          1 |
239. |     157    Western rural          1 |
241. |     160          Kampala          1 |
242. |     161          Kampala          1 |
     |-------------------------------------|
243. |     161    Central urban          1 |
244. |     161    Central rural          1 |
245. |     161    Eastern urban          1 |
246. |     161    Eastern rural          1 |
247. |     161   Northern urban          1 |
     |-------------------------------------|
248. |     161   Northern rural          1 |
249. |     161    Western urban          1 |
     +-------------------------------------+
(176 observations deleted)
variable product does not uniquely identify observations in the
    master data
(note: descript is str30 in using data but will be float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         16        6.45        6.45
          3 |        232       93.55      100.00
------------+-----------------------------------
      Total |        248      100.00
(16 observations deleted)

-----------------------------------------------------------------------
-> spdomain = Kampala
    0
-----------------------------------------------------------------------
-> spdomain = Central urban
    2
-----------------------------------------------------------------------
-> spdomain = Central rural
    0
-----------------------------------------------------------------------
-> spdomain = Eastern urban
    0
-----------------------------------------------------------------------
-> spdomain = Eastern rural
    0
-----------------------------------------------------------------------
-> spdomain = Northern urban
    4
-----------------------------------------------------------------------
-> spdomain = Northern rural
    0
-----------------------------------------------------------------------
-> spdomain = Western urban
    3
-----------------------------------------------------------------------
-> spdomain = Western rural
    0

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        bswt |       232    121.6983     130.675          2        811
(9 observations deleted)
(2 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        26   .711933         0   .711933   .711933
 Central urban |        23  .8701249         0  .8701249  .8701249
 Central rural |        26  .8903263         0  .8903263  .8903263
 Eastern urban |        31  .8142971         0  .8142971  .8142971
 Eastern rural |        28   .905108         0   .905108   .905108
Northern urban |        14  .7919405         0  .7919405  .7919405
Northern rural |        19  .8975382         0  .8975382  .8975382
 Western urban |        26  .8243955         0  .8243955  .8243955
 Western rural |        28  .9053635         0  .9053635  .9053635
---------------+--------------------------------------------------
         Total |       221  .8469806  .0626228   .711933  .9053635
------------------------------------------------------------------
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        221      100.00      100.00
------------+-----------------------------------
      Total |        221      100.00
(221 real changes made)
(211 real changes made)
(221 real changes made)

Summary for variables: chkcal
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        26  .0001092         0  .0001092  .0001092
 Central urban |        23 -.0000707         0 -.0000707 -.0000707
 Central rural |        26   .000045         0   .000045   .000045
 Eastern urban |        31   .000045         0   .000045   .000045
 Eastern rural |        28 -.0000899         0 -.0000899 -.0000899
Northern urban |        14  .0000321         0  .0000321  .0000321
Northern rural |        19   .000045         0   .000045   .000045
 Western urban |        26  .0000835         0  .0000835  .0000835
 Western rural |        28  .0000385         0  .0000385  .0000385
---------------+--------------------------------------------------
         Total |       221  .0000263  .0000636 -.0000899  .0001092
------------------------------------------------------------------
(221 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/quan_flex_it4.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povline_food_flex_it4.dta saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(156 real changes made)
(12 missing values generated)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000u.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000u.tmp saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(1 missing value generated)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povlines_it4.dta saved
variable spdomain does not uniquely identify observations in the
    master data
variable spdomain does not uniquely identify observations in
    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
    > 2/work/povlines_it4.dta
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(13 missing values generated)
(1 missing value generated)
(1 missing value generated)
(13 missing values generated)
(7426 real changes made)
(1 missing value generated)
(7414 real changes made)

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          cr |    7414  30109848.2    1044.199   1186.301   57.35136   
> 112846.5
      cr_it4 |    7414  30109848.2    1044.199   990.7639   27.60631   
> 83405.13
     linpob4 |    7415  30112959.1    407.3276   364.0251   129.4328   
> 1752.836
    linpobr4 |    7415  30112959.1    335.8723   .0000186   335.8723   
> 335.8723
(1 missing value generated)
(6848 missing values generated)
(6835 real changes made)
(13 missing values generated)
(6835 real changes made)
(13 missing values generated)
(6835 real changes made)
(13 missing values generated)
(13 missing values generated)
(13 missing values generated)
(12 missing values generated)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
     h_flex4 |   8.844393   .5819642      7.699065    9.989721
    pg_flex4 |   2.245519   .2168756        1.8187    2.672338
   spg_flex4 |   .8807824   .1088786      .6665052     1.09506
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex4      |
       Urban |   21.76562   2.683557      16.48428    27.04697
       Rural |   6.415425   .5135487      5.404742    7.426109
-------------+------------------------------------------------
pg_flex4     |
       Urban |     6.9214   1.100249      4.756068    9.086731
       Rural |   1.366535   .1569612      1.057629     1.67544
-------------+------------------------------------------------
spg_flex4    |
       Urban |   3.052571   .5708164      1.929183     4.17596
       Rural |   .4725237   .0717485      .3313199    .6137275
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: strata = Kampala
    _subpop_2: strata = Central 1
    _subpop_3: strata = Central 2
    _subpop_4: strata = East Central
      Eastern: strata = Eastern
    _subpop_6: strata = Mid Northern
    _subpop_7: strata = North East
    _subpop_8: strata = West Nile
    _subpop_9: strata = Mid Western
   _subpop_10: strata = South Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex4      |
     Kampala |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |   3.940735   .8841311      2.200731    5.680738
   _subpop_3 |   5.847475   1.101234      3.680206    8.014745
   _subpop_4 |   4.879676   1.084348      2.745639    7.013713
     Eastern |   5.030744   1.507939      2.063063    7.998425
   _subpop_6 |   .4144675   .2577255     -.0927461    .9216812
   _subpop_7 |   6.654156    2.50328      1.727605    11.58071
   _subpop_8 |   .3505304    .255953     -.1531948    .8542556
   _subpop_9 |   13.80502   2.069022      9.733102    17.87693
  _subpop_10 |   14.89143   1.672492       11.5999    18.18296
-------------+------------------------------------------------
pg_flex4     |
     Kampala |   14.00028    2.09222      9.882715    18.11785
   _subpop_2 |   .7309903    .190698      .3556894    1.106291
   _subpop_3 |   .9790811   .2106421      .5645294    1.393633
   _subpop_4 |   1.143443   .3066017      .5400397    1.746847
     Eastern |   1.513634   .6217729      .2899613    2.737307
   _subpop_6 |   .0560875   .0428203     -.0281845    .1403594
   _subpop_7 |   1.554942   .9241814     -.2638825    3.373766
   _subpop_8 |   .1470981   .1112764      -.071898    .3660942
   _subpop_9 |   3.429809   .8720467      1.713588     5.14603
  _subpop_10 |   3.294961   .4943251       2.32211    4.267811
-------------+------------------------------------------------
spg_flex4    |
     Kampala |   6.218486   1.191759      3.873059    8.563914
   _subpop_2 |   .2027045   .0696782      .0655752    .3398339
   _subpop_3 |   .2703879   .0823791      .1082627     .432513
   _subpop_4 |   .4344125   .1346874      .1693425    .6994825
     Eastern |   .6621389   .3128762      .0463866    1.277891
   _subpop_6 |    .023707   .0229268     -.0214138    .0688278
   _subpop_7 |   .6194432    .473687      -.312791    1.551677
   _subpop_8 |   .0679714   .0503573     -.0311336    .1670764
   _subpop_9 |   1.313274   .4358238      .4555561    2.170992
  _subpop_10 |   1.158653   .2200951      .7254973    1.591808
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

         Over: strata rural
    _subpop_1: Kampala Urban
    _subpop_2: Central 1 Urban
    _subpop_3: Central 1 Rural
    _subpop_4: Central 2 Urban
    _subpop_5: Central 2 Rural
    _subpop_6: East Central Urban
    _subpop_7: East Central Rural
    _subpop_8: Eastern Urban
    _subpop_9: Eastern Rural
   _subpop_10: Mid Northern Urban
   _subpop_11: Mid Northern Rural
   _subpop_12: North East Urban
   _subpop_13: North East Rural
   _subpop_14: West Nile Urban
   _subpop_15: West Nile Rural
   _subpop_16: Mid Western Urban
   _subpop_17: Mid Western Rural
   _subpop_18: South Western Urban
   _subpop_19: South Western Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex4      |
   _subpop_1 |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |          0  (omitted)
   _subpop_3 |   4.598207   1.007705      2.615004    6.581409
   _subpop_4 |   .9376656   .5671572     -.1785215    2.053853
   _subpop_5 |   6.466461   1.179984      4.144207    8.788714
   _subpop_6 |   40.39593   4.613665      31.31606     49.4758
   _subpop_7 |   2.174859    .548178      1.096024    3.253694
   _subpop_8 |   38.38215   4.599029      29.33109    47.43322
   _subpop_9 |   2.159677   .7682942      .6476447    3.671709
  _subpop_10 |   1.243444   .8257428     -.3816495    2.868537
  _subpop_11 |   .2685472   .2655182     -.2540027    .7910971
  _subpop_12 |   28.30975    2.04247      24.29009    32.32941
  _subpop_13 |   3.204848   .6827074      1.861254    4.548442
  _subpop_14 |          0  (omitted)
  _subpop_15 |    .409995   .2977131     -.1759157    .9959058
  _subpop_16 |   4.151773   1.327489      1.539225    6.764322
  _subpop_17 |   15.02838   2.081666      10.93158    19.12518
  _subpop_18 |    4.12265   .9762342      2.201384    6.043916
  _subpop_19 |    15.5576   1.785279       12.0441     19.0711
-------------+------------------------------------------------
pg_flex4     |
   _subpop_1 |   14.00028    2.09222      9.882715    18.11785
   _subpop_2 |          0  (omitted)
   _subpop_3 |   .8529487    .220937      .4181362    1.287761
   _subpop_4 |   .3130916   .1893768     -.0596093    .6857924
   _subpop_5 |   1.063043   .2269133      .6164691    1.509617
   _subpop_6 |   10.93845   1.758106      7.478427    14.39846
   _subpop_7 |    .397484   .1694788      .0639433    .7310246
   _subpop_8 |   14.58027   2.322392      10.00971    19.15083
   _subpop_9 |   .3887886   .1905558      .0137676    .7638096
  _subpop_10 |   .3414934   .2722873     -.1943784    .8773652
  _subpop_11 |    .005849    .005783     -.0055322    .0172301
  _subpop_12 |   8.458826   1.062106      6.368562    10.54909
  _subpop_13 |   .4552896   .1292161      .2009874    .7095917
  _subpop_14 |          0  (omitted)
  _subpop_15 |   .1720521   .1294651     -.0827403    .4268444
  _subpop_16 |   .7549756   .3076625       .149484    1.360467
  _subpop_17 |   3.768794   .9304869       1.93756    5.600027
  _subpop_18 |    .709303   .4118721      -.101277    1.519883
  _subpop_19 |   3.454913   .5223869      2.426836     4.48299
-------------+------------------------------------------------
spg_flex4    |
   _subpop_1 |   6.218486   1.191759      3.873059    8.563914
   _subpop_2 |          0  (omitted)
   _subpop_3 |   .2365238   .0808658      .0773767    .3956708
   _subpop_4 |   .1045429   .0632339     -.0199039    .2289897
   _subpop_5 |   .2912961   .0900048      .1141632     .468429
   _subpop_6 |   4.189349   .9959755      2.229232    6.149467
   _subpop_7 |   .1484472   .0905691     -.0297963    .3266906
   _subpop_8 |   6.967693   1.463897      4.086689    9.848697
   _subpop_9 |   .1193233   .0674183     -.0133586    .2520051
  _subpop_10 |   .1576629   .1483223      -.134241    .4495669
  _subpop_11 |   .0001274    .000126     -.0001205    .0003753
  _subpop_12 |   3.891651   .7858354      2.345097    5.438205
  _subpop_13 |   .0982452   .0303304      .0385539    .1579365
  _subpop_14 |          0  (omitted)
  _subpop_15 |   .0795022   .0585797     -.0357848    .1947892
  _subpop_16 |   .2341931   .0969613      .0433697    .4250166
  _subpop_17 |   1.450027   .4724137       .520299    2.379755
  _subpop_18 |   .2866145   .2366128     -.1790484    .7522774
  _subpop_19 |   1.212598   .2327531      .7545312    1.670665
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex4      |
     Kampala |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |   .4230458   .3416908     -.2494147    1.095506
   _subpop_3 |   5.571657   .8075784      3.982312    7.161002
   _subpop_4 |   40.13523   2.928287      34.37226    45.89821
   _subpop_5 |    2.35479   .4093482      1.549177    3.160403
   _subpop_6 |   1.022779   .5718075     -.1025596    2.148118
   _subpop_7 |   .3784641   .2122985     -.0393474    .7962755
   _subpop_8 |   4.138667     .85215      2.461603    5.815731
   _subpop_9 |   15.35986   1.364358      12.67475    18.04497
-------------+------------------------------------------------
pg_flex4     |
     Kampala |   14.00028    2.09222      9.882715    18.11785
   _subpop_2 |   .1412573   .1140924     -.0832809    .3657955
   _subpop_3 |    .962418   .1608615      .6458364    1.278999
   _subpop_4 |   12.69534   1.569684      9.606146    15.78454
   _subpop_5 |   .4170165   .1145015      .1916731    .6423599
   _subpop_6 |   .2395356   .1816131     -.1178859     .596957
   _subpop_7 |   .0551514   .0355166     -.0147465    .1250494
   _subpop_8 |   .7344218   .2519661       .238543    1.230301
   _subpop_9 |   3.572194   .4771059      2.633231    4.511157
-------------+------------------------------------------------
spg_flex4    |
     Kampala |   6.218486   1.191759      3.873059    8.563914
   _subpop_2 |   .0471666   .0380961     -.0278079    .1221411
   _subpop_3 |   .2650628   .0612494      .1445217    .3856039
   _subpop_4 |   5.562315   .9876773      3.618528    7.506101
   _subpop_5 |   .1359428   .0531897      .0312634    .2406222
   _subpop_6 |    .105253   .0987728     -.0891357    .2996417
   _subpop_7 |   .0223419   .0158665     -.0088839    .0535676
   _subpop_8 |    .257784   .1182651      .0250338    .4905341
   _subpop_9 |   1.301313   .2289078      .8508139    1.751812
--------------------------------------------------------------
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
h_flex4 was float now byte
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/cons_real_it4.dta saved

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
     h_flex4 |    7414  30109848.2    8.844393   28.39586          0   
>      100
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/foodshares_it4.dta saved
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
variable one does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00

   relpoor5 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 3,707.7212       50.00       50.00
          1 | 3,707.2788       50.00      100.00
------------+-----------------------------------
      Total |      7,415      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/relpoor_it5.dta saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.13        0.13
          2 |          1        0.00        0.13
          3 |     99,617       99.87      100.00
------------+-----------------------------------
      Total |     99,751      100.00
(7559 observations deleted)
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          7        0.01        0.01
          3 |     92,192       99.99      100.00
------------+-----------------------------------
      Total |     92,199      100.00
(55089 observations deleted)
(5 missing values generated)
    5
    0
(5 missing values generated)
    5
(5 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000v.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000v.tmp saved
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000w.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000w.tmp saved
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     37,105      100.00      100.00
------------+-----------------------------------
      Total |     37,105      100.00
  215
(215 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000v.tmp saved
49
49
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/codes_food_basket_flex_it5.dta saved
(2770 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000x.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000x.tmp saved
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        133        0.15        0.15
          2 |        163        0.18        0.33
          3 |     89,422       99.67      100.00
------------+-----------------------------------
      Total |     89,718      100.00
(163 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000x.tmp saved
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,089        2.33        2.33
          2 |          2        0.00        2.33
          3 |     87,466       97.67      100.00
------------+-----------------------------------
      Total |     89,557      100.00
(2091 observations deleted)
(64 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000011.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000011.tmp saved
product was float now int
unit was float now byte
food_cat was float now byte
region was float now byte
psu was int now byte
survquar was float now byte
survmon was float now byte
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
bswt was float now byte
count was float now byte
descript was float now byte
numreg was double now byte
variable hhid does not uniquely identify observations in the master
    data
survquar was byte now float
reg_tpi was byte now float
spdomain was byte now float
(label lspdomain already defined)
(label lsurvquar already defined)
(label region already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        165        0.19        0.19
          3 |     87,402       99.81      100.00
------------+-----------------------------------
      Total |     87,567      100.00
variable hhid does not uniquely identify observations in the master
    data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |     87,567      100.00      100.00
------------+-----------------------------------
      Total |     87,567      100.00
(52012 observations deleted)
(44 observations deleted)
(2570 observations deleted)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
    ratiotw5 |       389    2.046283    10.60327   .8216934   189.6305
    ratiomw5 |       389    2.155162    15.29074   .1808162   265.0519
variable product does not uniquely identify observations in the
    master data
product was int now float

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          3        0.77        0.77
          3 |        389       99.23      100.00
------------+-----------------------------------
      Total |        392      100.00
    3
(3 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/price_unit_flex_it5.dta saved
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17        4.19        4.19
          2 |        160       39.41       43.60
          3 |        229       56.40      100.00
------------+-----------------------------------
      Total |        406      100.00

     +-------------------------------------+
     | product         spdomain   descript |
     |-------------------------------------|
229. |     157          Kampala          1 |
230. |     157    Central urban          1 |
231. |     157    Central rural          1 |
232. |     157    Eastern urban          1 |
233. |     157    Eastern rural          1 |
     |-------------------------------------|
234. |     157   Northern urban          1 |
235. |     157    Western urban          1 |
236. |     157    Western rural          1 |
238. |     160          Kampala          1 |
239. |     161          Kampala          1 |
     |-------------------------------------|
240. |     161    Central urban          1 |
241. |     161    Central rural          1 |
242. |     161    Eastern urban          1 |
243. |     161    Eastern rural          1 |
244. |     161   Northern urban          1 |
     |-------------------------------------|
245. |     161   Northern rural          1 |
246. |     161    Western urban          1 |
     +-------------------------------------+
(177 observations deleted)
variable product does not uniquely identify observations in the
    master data
(note: descript is str30 in using data but will be float now)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |         16        6.53        6.53
          3 |        229       93.47      100.00
------------+-----------------------------------
      Total |        245      100.00
(16 observations deleted)

-----------------------------------------------------------------------
-> spdomain = Kampala
    0
-----------------------------------------------------------------------
-> spdomain = Central urban
   12
-----------------------------------------------------------------------
-> spdomain = Central rural
    0
-----------------------------------------------------------------------
-> spdomain = Eastern urban
    0
-----------------------------------------------------------------------
-> spdomain = Eastern rural
    0
-----------------------------------------------------------------------
-> spdomain = Northern urban
    4
-----------------------------------------------------------------------
-> spdomain = Northern rural
    0
-----------------------------------------------------------------------
-> spdomain = Western urban
    4
-----------------------------------------------------------------------
-> spdomain = Western rural
    0

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
        bswt |       229    122.9694    132.8105          1        862
(20 observations deleted)
(2 observations deleted)

Summary for variables: baskshr
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        26   .711933         0   .711933   .711933
 Central urban |         6  .4342814         0  .4342814  .4342814
 Central rural |        26  .8903407         0  .8903407  .8903407
 Eastern urban |        31  .8142971         0  .8142971  .8142971
 Eastern rural |        28    .90433         0    .90433    .90433
Northern urban |        18  .8370481         0  .8370481  .8370481
Northern rural |        19  .8941204         0  .8941204  .8941204
 Western urban |        25   .812692         0   .812692   .812692
 Western rural |        28  .9054629         0  .9054629  .9054629
---------------+--------------------------------------------------
         Total |       207  .8335974  .0935356  .4342814  .9054629
------------------------------------------------------------------
variable spdomain does not uniquely identify observations in the
    master data

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        207      100.00      100.00
------------+-----------------------------------
      Total |        207      100.00
(207 real changes made)
(199 real changes made)
(207 real changes made)

Summary for variables: chkcal
     by categories of: spdomain (Spatial domains: each with own poverty
>  line (they are 9))

      spdomain |         N      mean        sd       min       max
---------------+--------------------------------------------------
       Kampala |        26  .0001092         0  .0001092  .0001092
 Central urban |         6 -.0000707         0 -.0000707 -.0000707
 Central rural |        26 -.0000835         0 -.0000835 -.0000835
 Eastern urban |        31   .000045         0   .000045   .000045
 Eastern rural |        28 -.0000899         0 -.0000899 -.0000899
Northern urban |        18  .0000321         0  .0000321  .0000321
Northern rural |        19   .000045         0   .000045   .000045
 Western urban |        25  .0000835         0  .0000835  .0000835
 Western rural |        28  .0000385         0  .0000385  .0000385
---------------+--------------------------------------------------
         Total |       207   .000018  .0000703 -.0000899  .0001092
------------------------------------------------------------------
(207 real changes made)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/quan_flex_it5.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povline_food_flex_it5.dta saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(154 real changes made)
(12 missing values generated)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000013.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000013.tmp saved
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(1 missing value generated)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povlines_it5.dta saved
variable spdomain does not uniquely identify observations in the
    master data
variable spdomain does not uniquely identify observations in
    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
    > 2/work/povlines_it5.dta
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,427      100.00      100.00
------------+-----------------------------------
      Total |      7,427      100.00
(13 missing values generated)
(1 missing value generated)
(1 missing value generated)
(13 missing values generated)
(7426 real changes made)
(1 missing value generated)
(7414 real changes made)

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          cr |    7414  30109848.2    1044.199   1186.301   57.35136   
> 112846.5
      cr_it5 |    7414  30109848.2    1044.199   1005.601   28.26964   
> 87243.11
     linpob5 |    7415  30112959.1    431.2904   387.3574   125.7444   
> 1752.836
    linpobr5 |    7415  30112959.1    343.9427          0   343.9427   
> 343.9427
(1 missing value generated)
(6795 missing values generated)
(6782 real changes made)
(13 missing values generated)
(6782 real changes made)
(13 missing values generated)
(6782 real changes made)
(13 missing values generated)
(13 missing values generated)
(13 missing values generated)
(12 missing values generated)

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
     h_flex5 |   9.723778    .655155      8.434408    11.01315
    pg_flex5 |   2.519435   .2521546      2.023186    3.015685
   spg_flex5 |   .9927552   .1268726       .743065    1.242445
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex5      |
       Urban |   27.41294   2.602196      22.29172    32.53416
       Rural |   6.398523   .5129085      5.389099    7.407946
-------------+------------------------------------------------
pg_flex5     |
       Urban |   8.642206   1.150593      6.377795    10.90662
       Rural |   1.368461   .1572301      1.059026    1.677896
-------------+------------------------------------------------
spg_flex5    |
       Urban |   3.754496    .614647      2.544847    4.964145
       Rural |   .4735958   .0719211      .3320524    .6151391
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: strata = Kampala
    _subpop_2: strata = Central 1
    _subpop_3: strata = Central 2
    _subpop_4: strata = East Central
      Eastern: strata = Eastern
    _subpop_6: strata = Mid Northern
    _subpop_7: strata = North East
    _subpop_8: strata = West Nile
    _subpop_9: strata = Mid Western
   _subpop_10: strata = South Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex5      |
     Kampala |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |   6.765768   1.290117      4.226768    9.304768
   _subpop_3 |   10.59858   2.694723      5.295266     15.9019
   _subpop_4 |   4.879676   1.084348      2.745639    7.013713
     Eastern |   5.030744   1.507939      2.063063    7.998425
   _subpop_6 |   .0755901   .0761614     -.0742984    .2254785
   _subpop_7 |   6.512036   2.371215      1.845395    11.17868
   _subpop_8 |   .3505304    .255953     -.1531948    .8542556
   _subpop_9 |   14.01496    2.06434      9.952259    18.07766
  _subpop_10 |    14.8315   1.684098      11.51713    18.14587
-------------+------------------------------------------------
pg_flex5     |
     Kampala |   14.00029    2.09222      9.882717    18.11785
   _subpop_2 |   1.443197   .3545949      .7453407    2.141053
   _subpop_3 |    2.54254   1.073315       .430215    4.654865
   _subpop_4 |    1.14537   .3065863      .5419962    1.748743
     Eastern |   1.515536   .6218022      .2918052    2.739266
   _subpop_6 |   .0254514   .0256437     -.0250165    .0759192
   _subpop_7 |   1.537933   .9153163     -.2634449     3.33931
   _subpop_8 |   .1411308   .1071313     -.0697077    .3519693
   _subpop_9 |   3.434466   .8743169      1.713777    5.155155
  _subpop_10 |    3.30539   .4955527      2.330123    4.280657
-------------+------------------------------------------------
spg_flex5    |
     Kampala |   6.218487   1.191759       3.87306    8.563915
   _subpop_2 |   .4224139   .1298899      .1667857    .6780421
   _subpop_3 |   .9787091   .5395116     -.0830703    2.040488
   _subpop_4 |   .4349542   .1347616      .1697382    .7001701
     Eastern |   .6627195   .3129094      .0469019    1.278537
   _subpop_6 |   .0085696   .0086343     -.0084231    .0255622
   _subpop_7 |   .6189869   .4729949     -.3118852    1.549859
   _subpop_8 |   .0634363   .0469084     -.0288813    .1557539
   _subpop_9 |   1.316038   .4371777      .4556561    2.176421
  _subpop_10 |   1.162937   .2207357      .7285208    1.597353
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

         Over: strata rural
    _subpop_1: Kampala Urban
    _subpop_2: Central 1 Urban
    _subpop_3: Central 1 Rural
    _subpop_4: Central 2 Urban
    _subpop_5: Central 2 Rural
    _subpop_6: East Central Urban
    _subpop_7: East Central Rural
    _subpop_8: Eastern Urban
    _subpop_9: Eastern Rural
   _subpop_10: Mid Northern Urban
   _subpop_11: Mid Northern Rural
   _subpop_12: North East Urban
   _subpop_13: North East Rural
   _subpop_14: West Nile Urban
   _subpop_15: West Nile Rural
   _subpop_16: Mid Western Urban
   _subpop_17: Mid Western Rural
   _subpop_18: South Western Urban
   _subpop_19: South Western Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex5      |
   _subpop_1 |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |   19.75762   5.203562      9.516814    29.99843
   _subpop_3 |   4.598207   1.007705      2.615004    6.581409
   _subpop_4 |   44.19224   2.890198      38.50422    49.88026
   _subpop_5 |   6.363393   1.180995      4.039151    8.687636
   _subpop_6 |   40.39593   4.613665      31.31606     49.4758
   _subpop_7 |   2.174859    .548178      1.096024    3.253694
   _subpop_8 |   38.38215   4.599029      29.33109    47.43322
   _subpop_9 |   2.159677   .7682942      .6476447    3.671709
  _subpop_10 |   .5050185   .4940115     -.4672149    1.477252
  _subpop_11 |          0  (omitted)
  _subpop_12 |   27.27537   2.224928      22.89663    31.65411
  _subpop_13 |   3.204848   .6827074      1.861254    4.548442
  _subpop_14 |          0  (omitted)
  _subpop_15 |    .409995   .2977131     -.1759157    .9959058
  _subpop_16 |   3.650866    1.64092      .4214734    6.880258
  _subpop_17 |   15.32841   2.026575      11.34004    19.31679
  _subpop_18 |   3.094047   1.547189      .0491208    6.138974
  _subpop_19 |    15.5576   1.785279       12.0441     19.0711
-------------+------------------------------------------------
pg_flex5     |
   _subpop_1 |   14.00029    2.09222      9.882717    18.11785
   _subpop_2 |   5.004694    1.33694      2.373546    7.635842
   _subpop_3 |    .848997   .2202152       .415605    1.282389
   _subpop_4 |   14.32272   4.188128      6.080327    22.56512
   _subpop_5 |   1.057399   .2261151      .6123961    1.502403
   _subpop_6 |   10.93845   1.758106      7.478428    14.39847
   _subpop_7 |   .3995567   .1696839      .0656123    .7335012
   _subpop_8 |   14.58027   2.322392      10.00971    19.15083
   _subpop_9 |   .3908538   .1910642      .0148323    .7668754
  _subpop_10 |   .1700411    .166335     -.1573125    .4973948
  _subpop_11 |          0  (omitted)
  _subpop_12 |   8.388721   1.041608      6.338797    10.43865
  _subpop_13 |   .4467374   .1261207       .198527    .6949478
  _subpop_14 |          0  (omitted)
  _subpop_15 |   .1650725    .124646     -.0802356    .4103806
  _subpop_16 |   .6844441   .2858907      .1218003    1.247088
  _subpop_17 |   3.782979    .931408      1.949933    5.616026
  _subpop_18 |   .6449724   .3981717     -.1386447    1.428589
  _subpop_19 |   3.469967   .5235715      2.439558    4.500376
-------------+------------------------------------------------
spg_flex5    |
   _subpop_1 |   6.218487   1.191759       3.87306    8.563915
   _subpop_2 |   1.544372   .4822957      .5951955    2.493548
   _subpop_3 |   .2352264   .0806134      .0765763    .3938766
   _subpop_4 |   6.444167   2.517855      1.488933     11.3994
   _subpop_5 |   .2896727   .0897526      .1130362    .4663092
   _subpop_6 |    4.18935   .9959756      2.229232    6.149468
   _subpop_7 |   .1490301   .0907409     -.0295515    .3276117
   _subpop_8 |   6.967694   1.463897       4.08669    9.848698
   _subpop_9 |   .1199538   .0677024      -.013287    .2531946
  _subpop_10 |   .0572533   .0560055     -.0529676    .1674742
  _subpop_11 |          0  (omitted)
  _subpop_12 |     3.8869   .7844396      2.343093    5.430707
  _subpop_13 |    .098473   .0304183      .0386086    .1583373
  _subpop_14 |          0  (omitted)
  _subpop_15 |   .0741978   .0545672     -.0331925    .1815881
  _subpop_16 |   .2131431   .0883899      .0391884    .3870978
  _subpop_17 |    1.45581   .4734885      .5239662    2.387653
  _subpop_18 |   .2697341   .2300586     -.1830301    .7224982
  _subpop_19 |   1.218192   .2334374       .758778    1.677605
--------------------------------------------------------------
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7414
Number of PSUs   =     305        Population size  =  30109848
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_flex5      |
     Kampala |   43.19118   4.082072      35.15751    51.22485
   _subpop_2 |   30.78177   5.141993      20.66213    40.90141
   _subpop_3 |   5.517954   .8068342      3.930073    7.105834
   _subpop_4 |   40.13523   2.928287      34.37226    45.89821
   _subpop_5 |    2.35479   .4093482      1.549177    3.160403
   _subpop_6 |   .3341999    .328916     -.3131194    .9815191
   _subpop_7 |   .2001222    .118491     -.0330725     .433317
   _subpop_8 |   3.400284   1.151532      1.134026    5.666542
   _subpop_9 |   15.47196   1.351348      12.81246    18.13147
-------------+------------------------------------------------
pg_flex5     |
     Kampala |   14.00029    2.09222      9.882717    18.11785
   _subpop_2 |   9.208702   2.808375      3.681712    14.73569
   _subpop_3 |   .9575846   .1602979      .6421122    1.273057
   _subpop_4 |   12.69534   1.569684      9.606147    15.78454
   _subpop_5 |   .4192763   .1147044      .1935338    .6450188
   _subpop_6 |    .112526   .1107469     -.1054282    .3304802
   _subpop_7 |   .0469008   .0338394     -.0196964     .113498
   _subpop_8 |   .6666809   .2392711      .1957862    1.137576
   _subpop_9 |   3.586923   .4778625      2.646472    4.527375
-------------+------------------------------------------------
spg_flex5    |
     Kampala |   6.218487   1.191759       3.87306    8.563915
   _subpop_2 |   3.755009   1.578957      .6475623    6.862455
   _subpop_3 |   .2635955   .0610675      .1434123    .3837787
   _subpop_4 |   5.562315   .9876773      3.618529    7.506102
   _subpop_5 |   .1366006   .0533207      .0316635    .2415377
   _subpop_6 |   .0378878   .0372888      -.035498    .1112736
   _subpop_7 |   .0206585   .0147754       -.00842    .0497369
   _subpop_8 |   .2386104   .1135285       .015182    .4620387
   _subpop_9 |   1.306977   .2294892      .8553337    1.758621
--------------------------------------------------------------
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
h_flex5 was float now byte
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/cons_real_it5.dta saved

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
     h_flex5 |    7414  30109848.2    9.723778   29.63013          0   
>      100
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/foodshares_it5.dta saved

. *********************************************************************
> *****
> * Send results to one big csv-file
> *********************************************************************
> *****;
. use "$path/work/cons_real_it`lastpass'.dta", clear ;

.         gen dum=1;

.         collapse (mean) dum h_flex`lastpass' pg_flex`lastpass' spg_fl
> ex`lastpass' [aw=popwt];

. gen geo="National";

. gen geono=dum;

. tempfile nat;

. save `nat';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000014.tmp saved

.         use "$path/work/cons_real_it`lastpass'.dta", clear ;

.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`l
> astpass' [aw=popwt], by(rural);

. gen geo="Rural/Urban";

. gen geono=rural;

. tempfile rur;

. save `rur';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000015.tmp saved

. use "$path/work/cons_real_it`lastpass'.dta", clear ;

.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`l
> astpass' [aw=popwt], by(news);

. gen geo="North/Center/South";

. gen geono=news;

. tempfile new;

. save `new';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000016.tmp saved

. use "$path/work/cons_real_it`lastpass'.dta", clear ;

.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`l
> astpass' [aw=popwt], by(reg_tpi);

. gen geo="TPI - 6 regions";

. gen geono=reg_tpi;

. tempfile rtp;

. save `rtp';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000017.tmp saved

. use "$path/work/cons_real_it`lastpass'.dta", clear ;

.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`l
> astpass' [aw=popwt], by(strata);

. gen geo="Provinces";

. gen geono=strata;

. tempfile str;

. save `str';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000018.tmp saved

. use "$path/work/cons_real_it`lastpass'.dta", clear ;

.         collapse (mean) h_flex`lastpass' pg_flex`lastpass' spg_flex`l
> astpass' [aw=popwt], by(spdomain);

. gen geo="Spatial domains";

. gen geono=spdomain;

. tempfile r13;

. save `r13';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000019.tmp saved

. clear;

. set obs 1;
obs was 0, now 1

. gen geo=" ";

. tempfile one;

. save `one';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00001a.tmp saved

. use          `nat';

. append using `one';

. append using `rur';
geo was str8 now str11

. append using `one';

. append using `new';
geo was str11 now str18

. append using `one';

. append using `rtp';
(label region already defined)

. append using `one';

. append using `str';

. append using `one';

. append using `r13';

. outsheet geo geono h_flex`lastpass' pg_flex`lastpass' spg_flex`lastpa
> ss' dum rural news reg_tpi strata spdomain using "$path/work/poverty_
> flexBask.csv", replace c;

. *********************************************************************
> *****
> * Convergence graph (based on 5 iterations)
> *********************************************************************
> *****;
. #delimit cr
delimiter now cr
. 
. clear

. set obs 1
obs was 0, now 1

. gen iteration=.
(1 missing value generated)

. tempfile converg

. save `converg'
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00001b.tmp saved

. 
. forvalues X = 1/`maxit' {
  2.         use "$path/work/cons_real_it`X'.dta", clear
  3.         collapse (mean) h_flex`X' pg_flex`X' spg_flex`X' [aw=popwt
> ], by(strata)
  4.         rename h_flex`X' h_flex
  5.         rename pg_flex`X' pg_flex
  6.         rename spg_flex`X' spg_flex
  7.         gen iteration=`X'
  8.         order iteration
  9.         *sum
.         if `X' != 1     {
 10.                 append using `converg'
 11.                         }
 12.         save `converg', replace
 13.         }
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00001b.tmp saved
(label lstrata already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00001b.tmp saved
(label lstrata already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00001b.tmp saved
(label lstrata already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00001b.tmp saved
(label lstrata already defined)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00001b.tmp saved

. 
. use `converg', clear

. sum

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
   iteration |        50           3    1.428571          1          5
      strata |        50         5.5    2.901442          1         10
      h_flex |        50    10.43137    11.86342   .0755901   43.19118
     pg_flex |        50     2.81895    3.835563   .0254514   14.00029
    spg_flex |        50    1.147617    1.713579   .0085696   6.218487

. 
. twoway (connected h_flex iteration), by(, title(Convergence graph: Po
> verty rate. %) subtitle(After iterative procedure)) by(strata)

. graph export "$path/work/converge_pov_rate.tif", replace
(file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
> 2/work/converge_pov_rate.tif written in TIFF format)

. 
. sort strata iteration

. 
. for var h_flex pg_flex spg_flex: replace X = round(X,0.01)

->  replace h_flex = round(h_flex,0.01)
(50 real changes made)

->  replace pg_flex = round(pg_flex,0.01)
(50 real changes made)

->  replace spg_flex = round(spg_flex,0.01)
(50 real changes made)

. 
. list strata iteration h_flex pg_flex spg_flex

     +--------------------------------------------------------+
     |        strata   iterat~n   h_flex   pg_flex   spg_flex |
     |--------------------------------------------------------|
  1. |       Kampala          1    42.13     12.84       5.62 |
  2. |       Kampala          2    43.19     13.94       6.19 |
  3. |       Kampala          3    42.99     13.89       6.16 |
  4. |       Kampala          4    43.19        14       6.22 |
  5. |       Kampala          5    43.19        14       6.22 |
     |--------------------------------------------------------|
  6. |     Central 1          1     4.31       .78        .22 |
  7. |     Central 1          2     8.14      1.82        .58 |
  8. |     Central 1          3      3.9       .72         .2 |
  9. |     Central 1          4     3.94       .73         .2 |
 10. |     Central 1          5     6.77      1.44        .42 |
     |--------------------------------------------------------|
 11. |     Central 2          1     5.85      1.04        .29 |
 12. |     Central 2          2     11.1         3       1.24 |
 13. |     Central 2          3      6.3      1.06        .31 |
 14. |     Central 2          4     5.85       .98        .27 |
 15. |     Central 2          5     10.6      2.54        .98 |
     |--------------------------------------------------------|
 16. |  East Central          1     4.93      1.13        .42 |
 17. |  East Central          2     4.88      1.14        .43 |
 18. |  East Central          3      4.8      1.12        .43 |
 19. |  East Central          4     4.88      1.14        .43 |
 20. |  East Central          5     4.88      1.15        .43 |
     |--------------------------------------------------------|
 21. |       Eastern          1     5.16      1.51        .65 |
 22. |       Eastern          2     5.03      1.51        .66 |
 23. |       Eastern          3     5.03      1.49        .65 |
 24. |       Eastern          4     5.03      1.51        .66 |
 25. |       Eastern          5     5.03      1.52        .66 |
     |--------------------------------------------------------|
 26. |  Mid Northern          1       .3       .03        .01 |
 27. |  Mid Northern          2     4.46      1.09        .42 |
 28. |  Mid Northern          3       .3       .03        .01 |
 29. |  Mid Northern          4      .41       .06        .02 |
 30. |  Mid Northern          5      .08       .03        .01 |
     |--------------------------------------------------------|
 31. |    North East          1     6.28      1.52         .6 |
 32. |    North East          2     9.25      2.27        .94 |
 33. |    North East          3     6.14      1.51        .61 |
 34. |    North East          4     6.65      1.55        .62 |
 35. |    North East          5     6.51      1.54        .62 |
     |--------------------------------------------------------|
 36. |     West Nile          1      .35       .14        .06 |
 37. |     West Nile          2     4.81      1.07        .33 |
 38. |     West Nile          3      .35       .14        .07 |
 39. |     West Nile          4      .35       .15        .07 |
 40. |     West Nile          5      .35       .14        .06 |
     |--------------------------------------------------------|
 41. |   Mid Western          1    13.93      3.44       1.31 |
 42. |   Mid Western          2    13.85      3.44       1.32 |
 43. |   Mid Western          3    13.85      3.43       1.31 |
 44. |   Mid Western          4    13.81      3.43       1.31 |
 45. |   Mid Western          5    14.01      3.43       1.32 |
     |--------------------------------------------------------|
 46. | South Western          1    14.93      3.29       1.15 |
 47. | South Western          2    14.89       3.3       1.16 |
 48. | South Western          3    14.89      3.29       1.16 |
 49. | South Western          4    14.89      3.29       1.16 |
 50. | South Western          5    14.83      3.31       1.16 |
     +--------------------------------------------------------+

.         
. #delimit ;
delimiter now ;
. *********************************************************************
> *****
> * 140_iterate.do        (end)
> *********************************************************************
> *****;
. cap log close;

. 
end of do-file

.                                 
. $no_temp_rev    do "$path/new/150_price_unit_fix.do"    /* Fixed bask
> et: Prices */

. $no_temp_rev    do "$path/new/160_food_basket_fix.do"   /* Fixed food
>  basket */

.                                 do "$path/new/170_pref_r_price_bjorn.
> do"                /* Revealed preference tests */

. *global path "C:/user/gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/170_pref_r_price.log", replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/170_pref_r_price.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:51

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> *****
> * 170_pref_r_price.do           (start)
> *
> * This file conducts revealed preference comparisons so that
> * we can check the quality of the regional baskets.
> * It also exports the price and quantity data for work in GAMS
> * Rather than make up for missing prices with shares, we estimate
> * a missing price in this case
> *********************************************************************
> *****;
. *global n_spdom "13";
. *global it_n "5";
. /*
> This file uses:
>         work/quan_flex_it$it_n.dta
>         work/povline_food_flex_it$it_n.dta
>         work/price_unit_flex_it$it_n.dta
>                 
> This file creates:
>         work/pref_r_price.dta
>         work/revpref_price_`i'.dta
>         work/product_flex.inc
>         work/price_unit_flex.inc
>         work/quan_flex.inc
> */
> 
> 
> 
> *********************************************************************
> ******;
. * Export price, codes and quantity data to text
> *********************************************************************
> ******;
. use "$path/work/price_unit_flex_it$it_n.dta";

. gen reg=spdomain ;

. gen crap=1;

.  lab def crap
>          1  ".";

.  lab val crap crap;

. outsheet product crap reg bswt price_uw$it_n using "$path/work/price_
> unit_flex.inc",  noquote noname replace ;

. collapse (min) spdomain, by(product);

. outsheet product  using "$path/work/product_flex.inc", noname replace
> ;

. use "$path/work/quan_flex_it$it_n.dta", clear;

. gen reg=spdomain;

. gen crap=1;

.  lab def crap
>          1  ".";

.  lab val crap crap;

. format calperg quan$it_n calpp %14.9e;

. outsheet  product crap reg calperg quan$it_n  calpp povline_f_flex90_
> $it_n using "$path/work/quan_flex.inc", noname noquote replace;

. clear;

. *********************************************************************
> *****;
. * Revealed preference calculations
> * get the basket for the region we want to test
> *********************************************************************
> *****;
. tempfile quanreg;

. tempfile getmiss;

. tempfile codmiss;

. gen crap=0;

. save "$path/work/pref_r_price.dta", replace;
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved

. forvalues i=1/$n_spdom {                ;
  2.         clear;
  3.         gen crap=0;
  4.         save "$path/work/revpref_price_`i'.dta", replace;
  5.         clear;
  6.                 use "$path/work/quan_flex_it$it_n.dta", clear;
  7.                 keep product spdomain quan$it_n price_uw$it_n val_
> ir$it_n povline_f_flex90_$it_n calpp;
  8.         gen share=val_ir$it_n/povline_f_flex90_$it_n;
  9.         rename price_uw$it_n pquanreg;
 10.         rename spdomain spdomainq;
 11.         drop if spdomainq~= `i';
 12.         sort product;
 13.                                 *rescale quantities to hit constan
> t calorie target;
.                 gen ratquan=2150/calpp;
 14.             gen quan_s=quan$it_n*ratquan;
 15.             lab var quan_s "quantities rescaled to hit 2150 calori
> es pp";
 16.         save `quanreg', replace;
 17. ******************************************************************
> ********;
. * Now get the prices in other regions so that you can use them 
> * to build  a new poverty line
> *********************************************************************
> *****;
.         forvalues j= 1/$n_spdom {               ;
 18.                 use "$path/work/price_unit_flex_it$it_n.dta";
 19.                                 keep product spdomain price_uw$it_
> n descript count bswt;
 20.                         sort product;
 21.                 keep if spdomain==`j';
 22.                 sort product;
 23.                 merge product using `quanreg';
 24.                     *here we have to deal with the fact that not a
> ll commodities are consumed in every region;
.                 *so we might have a quantity from region i but no pri
> ce in region j;
.                 *these will have _merge value=2;
.                 *alternatively the number of observations might be to
> o small;
.                 *deal with these problems by TAKING THE MAX PRICE OBS
> ERVED ELSEWHERE (excluding Maputo)
>                         
>                 tab _m;
.                 drop if _m==1;
 25.                                 *CA modified to handle the countin
> g of bswt instead of count
>                   replace price_uw$it_n=. if round(bswt)<5;
.                         gen pricemiss=0;
 26.                   replace spdomain=`j' if _m==2 ;
 27.                   replace pricemiss=1 if _m==2 | round(bswt)<5;
 28.                         lab var pricemiss "identify those items wi
> th no price observation";
 29.                   drop _m;
 30.                         sort product;
 31. *browse;
.                *this is the tempfile containing observed quans and pr
> ices;
.              save `getmiss', replace;
 32.                         keep if pricemiss==1;
 33.                         if _N>0 {
>                             keep product;
 34.                                             sort product;
 35.                                             *this file contains th
> e price codes that are missing for the region in question;
.                             save `codmiss', replace;
 36. *browse;
.                                   use "$path/work/price_unit_flex_it$
> it_n.dta", clear;
 37.                         sort product;
 38. *browse;
.                         merge product using `codmiss';
 39.                                                 tab _m;
 40.                         keep if _m==3 ;
 41.                                 *exclude Maputo province and city 
> from other price calculation;
.                                 drop if spdomain>10;
 42.                         collapse (max) price_uw$it_n, by(product);
 43.                   *this file contains the code and the max price;
.                   save `codmiss', replace;
 44. *browse;
.                         use `getmiss';
 45.                               merge product using `codmiss';
 46. *browse;
.                         tab _m;
 47.                         drop _m;
 48.                         *end if;
.                  };
 49.                                                             else u
> se `getmiss', clear;
 50.                         gen val_q=quan_s*price_uw$it_n;
 51.                                                 collapse (sum) val
> _q pricemiss (mean) spdomainq ratquan, by(spdomain);
 52.                   gen linf_q=val_q/.9;
 53.                   drop val_q;
 54.                         append using "$path/work/revpref_price_`i'
> .dta";
 55.                         sort spdomain;
 56.                 save "$path/work/revpref_price_`i'.dta", replace;
 57.    *browse;
.         *close j loop;
.         };
 58.         *aggregate into a big data set;
.         append using "$path/work/pref_r_price.dta";
 59.       sort spdomain spdomainq;
 60.       save "$path/work/pref_r_price.dta", replace;
 61.  *close i loop;
. };
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(181 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(357 observations deleted)
(label lspdomain already defined)
(10 observations deleted)
(4 real changes made)
(14 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(12 observations deleted)
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        275       70.69       70.69
          3 |        114       29.31      100.00
------------+-----------------------------------
      Total |        389      100.00
(275 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         12       46.15       46.15
          3 |         14       53.85      100.00
------------+-----------------------------------
      Total |         26      100.00
(4 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        381       97.94       97.94
          3 |          8        2.06      100.00
------------+-----------------------------------
      Total |        389      100.00
(381 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         25       96.15       96.15
          3 |          1        3.85      100.00
------------+-----------------------------------
      Total |         26      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(349 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(4 real changes made)
(11 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(15 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        302       77.63       77.63
          3 |         87       22.37      100.00
------------+-----------------------------------
      Total |        389      100.00
(302 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         15       57.69       57.69
          3 |         11       42.31      100.00
------------+-----------------------------------
      Total |         26      100.00
(4 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(348 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(5 real changes made)
(12 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(14 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        293       75.32       75.32
          3 |         96       24.68      100.00
------------+-----------------------------------
      Total |        389      100.00
(293 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         14       53.85       53.85
          3 |         12       46.15      100.00
------------+-----------------------------------
      Total |         26      100.00
(5 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        381       97.94       97.94
          3 |          8        2.06      100.00
------------+-----------------------------------
      Total |        389      100.00
(381 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         25       96.15       96.15
          3 |          1        3.85      100.00
------------+-----------------------------------
      Total |         26      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_1.dta saved
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(201 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(40 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(357 observations deleted)
(label lspdomain already defined)
(26 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(343 observations deleted)
(label lspdomain already defined)
(40 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(343 observations deleted)
(label lspdomain already defined)
(40 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(343 observations deleted)
(label lspdomain already defined)
(40 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(349 observations deleted)
(label lspdomain already defined)
(34 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(348 observations deleted)
(label lspdomain already defined)
(35 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(343 observations deleted)
(label lspdomain already defined)
(40 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(343 observations deleted)
(label lspdomain already defined)
(40 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(6 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_2.dta saved
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(181 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(357 observations deleted)
(label lspdomain already defined)
(8 observations deleted)
(2 real changes made)
(13 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(13 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        282       72.49       72.49
          3 |        107       27.51      100.00
------------+-----------------------------------
      Total |        389      100.00
(282 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         13       50.00       50.00
          3 |         13       50.00      100.00
------------+-----------------------------------
      Total |         26      100.00
(2 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(349 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(4 real changes made)
(8 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        328       84.32       84.32
          3 |         61       15.68      100.00
------------+-----------------------------------
      Total |        389      100.00
(328 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         18       69.23       69.23
          3 |          8       30.77      100.00
------------+-----------------------------------
      Total |         26      100.00
(4 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(348 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(5 real changes made)
(8 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        327       84.06       84.06
          3 |         62       15.94      100.00
------------+-----------------------------------
      Total |        389      100.00
(327 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         18       69.23       69.23
          3 |          8       30.77      100.00
------------+-----------------------------------
      Total |         26      100.00
(5 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        382       98.20       98.20
          3 |          7        1.80      100.00
------------+-----------------------------------
      Total |        389      100.00
(382 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         25       96.15       96.15
          3 |          1        3.85      100.00
------------+-----------------------------------
      Total |         26      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(343 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_3.dta saved
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(176 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(15 observations deleted)
(0 real changes made)
(2 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(29 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        373       95.89       95.89
          3 |         16        4.11      100.00
------------+-----------------------------------
      Total |        389      100.00
(373 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         29       93.55       93.55
          3 |          2        6.45      100.00
------------+-----------------------------------
      Total |         31      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(357 observations deleted)
(label lspdomain already defined)
(8 observations deleted)
(7 real changes made)
(17 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(14 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        246       63.24       63.24
          3 |        143       36.76      100.00
------------+-----------------------------------
      Total |        389      100.00
(246 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         14       45.16       45.16
          3 |         17       54.84      100.00
------------+-----------------------------------
      Total |         31      100.00
(7 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(343 observations deleted)
(label lspdomain already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(31 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(343 observations deleted)
(label lspdomain already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(31 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(343 observations deleted)
(label lspdomain already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(31 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(349 observations deleted)
(label lspdomain already defined)
(10 observations deleted)
(1 real change made)
(8 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(23 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        325       83.55       83.55
          3 |         64       16.45      100.00
------------+-----------------------------------
      Total |        389      100.00
(325 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         23       74.19       74.19
          3 |          8       25.81      100.00
------------+-----------------------------------
      Total |         31      100.00
(1 missing value generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(348 observations deleted)
(label lspdomain already defined)
(13 observations deleted)
(3 real changes made)
(7 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(24 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        332       85.35       85.35
          3 |         57       14.65      100.00
------------+-----------------------------------
      Total |        389      100.00
(332 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         24       77.42       77.42
          3 |          7       22.58      100.00
------------+-----------------------------------
      Total |         31      100.00
(3 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(343 observations deleted)
(label lspdomain already defined)
(15 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(30 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        381       97.94       97.94
          3 |          8        2.06      100.00
------------+-----------------------------------
      Total |        389      100.00
(381 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         30       96.77       96.77
          3 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(343 observations deleted)
(label lspdomain already defined)
(15 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(31 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_4.dta saved
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(179 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(2 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        373       95.89       95.89
          3 |         16        4.11      100.00
------------+-----------------------------------
      Total |        389      100.00
(373 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         26       92.86       92.86
          3 |          2        7.14      100.00
------------+-----------------------------------
      Total |         28      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(357 observations deleted)
(label lspdomain already defined)
(10 observations deleted)
(6 real changes made)
(16 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(12 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        253       65.04       65.04
          3 |        136       34.96      100.00
------------+-----------------------------------
      Total |        389      100.00
(253 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         12       42.86       42.86
          3 |         16       57.14      100.00
------------+-----------------------------------
      Total |         28      100.00
(6 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(349 observations deleted)
(label lspdomain already defined)
(13 observations deleted)
(1 real change made)
(8 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(20 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        324       83.29       83.29
          3 |         65       16.71      100.00
------------+-----------------------------------
      Total |        389      100.00
(324 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         20       71.43       71.43
          3 |          8       28.57      100.00
------------+-----------------------------------
      Total |         28      100.00
(1 missing value generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(348 observations deleted)
(label lspdomain already defined)
(15 observations deleted)
(2 real changes made)
(4 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(24 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356       91.52       91.52
          3 |         33        8.48      100.00
------------+-----------------------------------
      Total |        389      100.00
(356 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         24       85.71       85.71
          3 |          4       14.29      100.00
------------+-----------------------------------
      Total |         28      100.00
(2 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(2 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(26 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        373       95.89       95.89
          3 |         16        4.11      100.00
------------+-----------------------------------
      Total |        389      100.00
(373 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         26       92.86       92.86
          3 |          2        7.14      100.00
------------+-----------------------------------
      Total |         28      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_5.dta saved
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(189 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(28 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(17 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        381       97.94       97.94
          3 |          8        2.06      100.00
------------+-----------------------------------
      Total |        389      100.00
(381 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17       94.44       94.44
          3 |          1        5.56      100.00
------------+-----------------------------------
      Total |         18      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(357 observations deleted)
(label lspdomain already defined)
(17 observations deleted)
(3 real changes made)
(7 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(11 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        329       84.58       84.58
          3 |         60       15.42      100.00
------------+-----------------------------------
      Total |        389      100.00
(329 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         11       61.11       61.11
          3 |          7       38.89      100.00
------------+-----------------------------------
      Total |         18      100.00
(3 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(343 observations deleted)
(label lspdomain already defined)
(28 observations deleted)
(0 real changes made)
(2 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(16 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        373       95.89       95.89
          3 |         16        4.11      100.00
------------+-----------------------------------
      Total |        389      100.00
(373 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         16       88.89       88.89
          3 |          2       11.11      100.00
------------+-----------------------------------
      Total |         18      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(343 observations deleted)
(label lspdomain already defined)
(28 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(343 observations deleted)
(label lspdomain already defined)
(28 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(349 observations deleted)
(label lspdomain already defined)
(22 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(348 observations deleted)
(label lspdomain already defined)
(23 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(343 observations deleted)
(label lspdomain already defined)
(28 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(17 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        381       97.94       97.94
          3 |          8        2.06      100.00
------------+-----------------------------------
      Total |        389      100.00
(381 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17       94.44       94.44
          3 |          1        5.56      100.00
------------+-----------------------------------
      Total |         18      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(343 observations deleted)
(label lspdomain already defined)
(28 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_6.dta saved
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(188 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(27 observations deleted)
(0 real changes made)
(2 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(17 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        373       95.89       95.89
          3 |         16        4.11      100.00
------------+-----------------------------------
      Total |        389      100.00
(373 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17       89.47       89.47
          3 |          2       10.53      100.00
------------+-----------------------------------
      Total |         19      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(357 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(5 real changes made)
(9 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(10 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        313       80.46       80.46
          3 |         76       19.54      100.00
------------+-----------------------------------
      Total |        389      100.00
(313 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         10       52.63       52.63
          3 |          9       47.37      100.00
------------+-----------------------------------
      Total |         19      100.00
(5 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(343 observations deleted)
(label lspdomain already defined)
(27 observations deleted)
(0 real changes made)
(2 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(17 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        373       95.89       95.89
          3 |         16        4.11      100.00
------------+-----------------------------------
      Total |        389      100.00
(373 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17       89.47       89.47
          3 |          2       10.53      100.00
------------+-----------------------------------
      Total |         19      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(343 observations deleted)
(label lspdomain already defined)
(27 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(19 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(343 observations deleted)
(label lspdomain already defined)
(27 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(19 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(349 observations deleted)
(label lspdomain already defined)
(21 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        381       97.94       97.94
          3 |          8        2.06      100.00
------------+-----------------------------------
      Total |        389      100.00
(381 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         18       94.74       94.74
          3 |          1        5.26      100.00
------------+-----------------------------------
      Total |         19      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(348 observations deleted)
(label lspdomain already defined)
(22 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(19 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(343 observations deleted)
(label lspdomain already defined)
(27 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        381       97.94       97.94
          3 |          8        2.06      100.00
------------+-----------------------------------
      Total |        389      100.00
(381 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         18       94.74       94.74
          3 |          1        5.26      100.00
------------+-----------------------------------
      Total |         19      100.00
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(343 observations deleted)
(label lspdomain already defined)
(27 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(19 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_7.dta saved
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(182 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(357 observations deleted)
(label lspdomain already defined)
(9 observations deleted)
(2 real changes made)
(13 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(12 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        279       71.72       71.72
          3 |        110       28.28      100.00
------------+-----------------------------------
      Total |        389      100.00
(279 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         12       48.00       48.00
          3 |         13       52.00      100.00
------------+-----------------------------------
      Total |         25      100.00
(2 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(343 observations deleted)
(label lspdomain already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(343 observations deleted)
(label lspdomain already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(343 observations deleted)
(label lspdomain already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(349 observations deleted)
(label lspdomain already defined)
(17 observations deleted)
(2 real changes made)
(7 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(18 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        332       85.35       85.35
          3 |         57       14.65      100.00
------------+-----------------------------------
      Total |        389      100.00
(332 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         18       72.00       72.00
          3 |          7       28.00      100.00
------------+-----------------------------------
      Total |         25      100.00
(2 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(348 observations deleted)
(label lspdomain already defined)
(20 observations deleted)
(4 real changes made)
(8 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(17 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        323       83.03       83.03
          3 |         66       16.97      100.00
------------+-----------------------------------
      Total |        389      100.00
(323 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17       68.00       68.00
          3 |          8       32.00      100.00
------------+-----------------------------------
      Total |         25      100.00
(4 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(343 observations deleted)
(label lspdomain already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(343 observations deleted)
(label lspdomain already defined)
(21 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(25 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_8.dta saved
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved
(note: dataset contains 0 observations)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(179 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(1 real change made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(27 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        381       97.94       97.94
          3 |          8        2.06      100.00
------------+-----------------------------------
      Total |        389      100.00
(381 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         27       96.43       96.43
          3 |          1        3.57      100.00
------------+-----------------------------------
      Total |         28      100.00
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(357 observations deleted)
(label lspdomain already defined)
(10 observations deleted)
(6 real changes made)
(17 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(11 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        250       64.27       64.27
          3 |        139       35.73      100.00
------------+-----------------------------------
      Total |        389      100.00
(250 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         11       39.29       39.29
          3 |         17       60.71      100.00
------------+-----------------------------------
      Total |         28      100.00
(6 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(349 observations deleted)
(label lspdomain already defined)
(16 observations deleted)
(4 real changes made)
(11 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(17 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        303       77.89       77.89
          3 |         86       22.11      100.00
------------+-----------------------------------
      Total |        389      100.00
(303 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         17       60.71       60.71
          3 |         11       39.29      100.00
------------+-----------------------------------
      Total |         28      100.00
(4 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(348 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(5 real changes made)
(9 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(19 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved
variable product does not uniquely identify observations in the
    master data
(label lspdomain already defined)

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        319       82.01       82.01
          3 |         70       17.99      100.00
------------+-----------------------------------
      Total |        389      100.00
(319 observations deleted)
(0 observations deleted)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         19       67.86       67.86
          3 |          9       32.14      100.00
------------+-----------------------------------
      Total |         28      100.00
(5 missing values generated)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(343 observations deleted)
(label lspdomain already defined)
(18 observations deleted)
(0 real changes made)
(0 real changes made)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved
(28 observations deleted)
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/revpref_price_9.dta saved
(label lspdomain already defined)
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved

. *bring in actual flexible bundle numbers;
. use "$path/work/povline_food_flex_it$it_n.dta", clear;

.         merge spdomain using "$path/work/pref_r_price.dta";
variable spdomain does not uniquely identify observations in
    C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP
    > 2/work/pref_r_price.dta
(label lspdomain already defined)

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |         81      100.00      100.00
------------+-----------------------------------
      Total |         81      100.00

.          drop crap;

.         drop _m;

.         order spdomainq spdomain;

.       sort spdomainq spdomain;

.         *rescale expenditures to hit a constant calorie target;
.         gen povline_f5_s=ratquan*povline_f_flex90_$it_n;

.       compress;
spdomainq was float now byte
spdomain was float now byte
pricemiss was double now byte

. *browse;
.         *categorize revealed preference performance;
.       gen pref_r=0;

.       replace pref_r=1 if float(linf_q)>float(povline_f5_s);
(41 real changes made)

.       replace pref_r=2 if float(linf_q)<float(povline_f5_s);
(35 real changes made)

.       lab var pref_r "Fails or passes revealed preference test";

.       lab def pref_r
>                         0 "comparison of the same region with itself"
>                         1 "passes revealed preference test"
>                         2 "fails revealed preference test" ;

.         lab val pref_r pref_r;

.       drop if spdomainq==spdomain;
(9 observations deleted)

.         tab pref_r;

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |         39       54.17       
> 54.17
         fails revealed preference test |         33       45.83      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |         72      100.00

.              sort spdomainq ;

.       by spdomainq: tab pref_r;

-----------------------------------------------------------------------
-> spdomainq = 1

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |          5       62.50       
> 62.50
         fails revealed preference test |          3       37.50      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00

-----------------------------------------------------------------------
-> spdomainq = 2

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
         fails revealed preference test |          8      100.00      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00

-----------------------------------------------------------------------
-> spdomainq = 3

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |          6       75.00       
> 75.00
         fails revealed preference test |          2       25.00      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00

-----------------------------------------------------------------------
-> spdomainq = 4

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |          3       37.50       
> 37.50
         fails revealed preference test |          5       62.50      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00

-----------------------------------------------------------------------
-> spdomainq = 5

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |          4       50.00       
> 50.00
         fails revealed preference test |          4       50.00      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00

-----------------------------------------------------------------------
-> spdomainq = 6

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |          3       37.50       
> 37.50
         fails revealed preference test |          5       62.50      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00

-----------------------------------------------------------------------
-> spdomainq = 7

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |          3       37.50       
> 37.50
         fails revealed preference test |          5       62.50      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00

-----------------------------------------------------------------------
-> spdomainq = 8

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |          7       87.50       
> 87.50
         fails revealed preference test |          1       12.50      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00

-----------------------------------------------------------------------
-> spdomainq = 9

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |          8      100.00      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |          8      100.00


. save "$path/work/pref_r_price.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/pref_r_price.dta saved

. *drop comparisons with Maputo ;
. drop if spdomain>=11;
(0 observations deleted)

. drop if spdomainq>=11;
(0 observations deleted)

. display "this is with maputo dropped";
this is with maputo dropped

. tab pref_r;

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |         39       54.17       
> 54.17
         fails revealed preference test |         33       45.83      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |         72      100.00

. *further drop Nampula rural and urban;
. drop if spdomain==3 | spdomain==4;
(16 observations deleted)

. display "this is with maputo and nampula dropped (MAH: Actually not -
>  experimenting with 6 spatial domains)";
this is with maputo and nampula dropped (MAH: Actually not - experiment
> ing with 6 spatial domains)

. tab pref_r;

    Fails or passes revealed preference |
                                   test |      Freq.     Percent       
>  Cum.
----------------------------------------+------------------------------
> -----
        passes revealed preference test |         30       53.57       
> 53.57
         fails revealed preference test |         26       46.43      1
> 00.00
----------------------------------------+------------------------------
> -----
                                  Total |         56      100.00

. *********************************************************************
> *****
> * 170_pref_r_price.do           (end)
> *********************************************************************
> *****;
. log close;
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/170_pref_r_price.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:53
-----------------------------------------------------------------------

. 
end of do-file

. $no_temp_rev    do "$path/new/180_povline_food_fix.do"  /* Inflating 
> year t1's poverty lines to year t2 */

. 
. *** execute as super user:
. *sudo ./gams "/home/bjvca/data/data/GAP/Haruna/UNHS_2005/GAPP2/new/19
> 0a_revpref13_r_bjorn.gms o=""/home/bjvca/data/data/GAP/Haruna/UNHS_20
> 05/GAPP2/new/list.lst"
. 
. 
. /* Adjusting flexible basket: inside pref. constraints */
. 
. $no_temp_rev    do "$path/new/200_povmeas_fix.do"               /* Fi
> xed basket: Poverty rates */

.                                 do "$path/new/210_povmeas_ent_flex.do
> "  /* Flexible basket, adjusted: Poverty rates */

. *global path "C:\user\gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/210_povmeas_ent_flex.log" , replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/210_povmeas_ent_flex.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:53

. clear

. set more off

. #delimit ;
delimiter now ;
. *********************************************************************
> ************
> * 210_povmeas_ent_flex.do               (start)
> *
> * This file produces poverty measures taking the entropy adjusted pov
> erty 
> * lines as a base. It produces two sets of poverty measures. In one, 
> * Maputo is treated with the logic of the fixed bundle. In the second
> , the revealed preference logic
> * is maintained. Here, the flexible bundle is viewed as being determi
> ned by the 
> * lower constraint on the value of the food bundle dictated by P_t2*Q
> _t1. In this case,
> * the year t2 food shares are calculated and applied.
> *
> * Fixed poverty lines/etc. are mentioned here and there. But there ar
> e NO fixed
> * calculations for Maputo (or other provinces) anymore
> *
> *********************************************************************
> ************;
. /*
> This file uses:
>         work\povline_food_ent.csv
>         work\conpc.dta
>         work\hhdata.dta
>         work/temp_index_reg_tpi.dta
> 
> This file creates:
>         work\povlines_ent.dta
>         work\povmeas_ent_flex.dta
>         work\povlines_ent.dta
>       work\nat_pov_ent_m.csv
>       work\rur_pov_ent_m.csv
>       work\news_pov_ent_m.csv
>       work\reg_tpi_pov_ent_m.csv
>       work\strata_pov_ent_m.csv
>       work\spdomain_pov_ent_m.csv
>       work\spdomain_pov_ent_m.csv
>         work\povlines_ent.csv
> */
> 
> 
> 
> *********************************************************************
> *****;
. * Bring in data file with nominal consumption per capita, and deflate
>  it
> * by temporal price index.
> *********************************************************************
> *****;
. use "$path/work/hhdata.dta", clear;

.         sort reg_tpi survquar;

.         merge reg_tpi survquar using "$path/work/temp_index_reg_tpi.d
> ta";
variables reg_tpi survquar do not uniquely identify observations in
    the master data
(label lsurvquar already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |      7,426      100.00      100.00
------------+-----------------------------------
      Total |      7,426      100.00

.         drop _merge;

.         sort hhid;

.         merge hhid using "$path/work/conpc.dta";

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

.         gen food_pc_tpi  = food_pc_nom /tpi_trim;
(12 missing values generated)

.         lab var food_pc_tpi "Temp-adjusted per capita food consumptio
> n/day";

.         gen cons_pc_tpi = food_pc_tpi + nf_pc_nom;
(13 missing values generated)

.         lab var cons_pc_tpi "Temp adjusted total consumption/day";

.         gen one=1;

.         tempfile contpi;

. save `contpi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000001.tmp saved

. *********************************************************************
> *****;
. * Calculate the food shares for people near the food poverty line
> *********************************************************************
> *****;
. *Bring in entropy estimated flexible lines;
. clear;

. insheet using "$path/work/povline_food_ent.csv";
(3 vars, 9 obs)

.         rename ent food_povline_ent;

.      keep spdomain food_povline_ent;

.      sort spdomain;

. *Bring in fixed bundle poverty lines for Maputo ;
. *This is the same level for both entropy and fixed bundle analysis;
. *since the Q02*P02<=Q96*P02 constraint is binding;
. *$no_temp_rev   merge spdomain using "$path/work/povline_food_fix.dta
> ";
. *$no_temp_rev    replace food_povline_ent=food_povline_w if spdomain>
> 10;
.       keep spdomain food_povline_ent;

.       sort spdomain;

.       tempfile food_povline_ent;

. save `food_povline_ent';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000002.tmp saved

. clear;

. use `contpi';

.         sort spdomain;

.         merge spdomain using `food_povline_ent';
variable spdomain does not uniquely identify observations in the
    master data

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

. gen     triwt = 0 ;

. replace triwt = 10 - round(abs(cons_pc_tpi/food_povline_ent-1))
>                 if abs(cons_pc_tpi/food_povline_ent-1)<=10;
(6355 real changes made)

.         gen tripopwt=triwt*hhweight*hhsize;
(12 missing values generated)

.         collapse (mean) nf_pc_nom food_povline_ent [aw=tripopwt] ,
>         by(spdomain);

.         rename nf_pc_nom povline_nf;

.         lab var povline_nf "Nonfood poverty line";

.         sort spdomain;

. *       merge spdomain using "$foodshr_pastSurvey", keep(spdomain $fd
> shr_t1);
. *       tab _m;
. *       drop _m;
. *       gen fdshr_t1 = $fdshr_t1;
. *       drop $fdshr_t1;
. *       lab var fdshr_t1 "year t1 (e.g. 1996) poverty line food share
> ";
.      *calculate line for all provinces with flexible food shares;
.                         gen povline_ent_m=food_povline_ent + povline_
> nf;

.         gen fdshr=food_povline_ent/povline_ent;

.         lab var fdshr "year t2 (e.g. 2002) poverty line food share";

.       *redo for maputo inserting the fixed food share;
.  *     gen povline_ent=povline_ent_m;
. *MAH;
. *$no_temp_rev   replace povline_ent=food_povline_ent/fdshr_t1 if spdo
> main >=11;
. *       lab var povline_ent   "poverty lines with Maputo regions calc
> ulated using fixed bundle non-food shares";
.     lab var povline_ent   "poverty lines with all regions calculated 
> using flexible bundle non-food shares";

. *    lab var povline_ent_m "poverty lines with Maputo regions calcula
> ted using flexible bundle non-food shares";
.         sort spdomain;

. tempfile povlines_ent;

. save `povlines_ent', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000003.tmp saved

. clear;

. *********************************************************************
> *****;
. * Calculate poverty measures with all regions using flexible year t2 
> food shares
> *********************************************************************
> *****;
. use `contpi';

.         sort spdomain;

.         merge spdomain using `povlines_ent';
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

. *********************************************************************
> *****;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first. The middle of the 
> 13
> * codes is code 7 -- that's arbirtary enough.
> *********************************************************************
> *****;
.         gen cr= cons_pc_tpi ;
(13 missing values generated)

.         gen linpob=povline_ent;
(1 missing value generated)

. *MAH;
.  *Now only 6 regions, so base is chosen as the 1;
.         *qui sum linpob if spdomain==7, meanonly;
.         qui sum linpob if spdomain==1, meanonly;

.         global spi_base=r(mean);

.         gen spi=linpob/$spi_base;
(1 missing value generated)

.         gen cr2=cr/spi;
(13 missing values generated)

.         qui sum cr [aw=hhweight*hhsize];

.         global sumcr=r(sum);

.         qui sum cr2 [aw=hhweight*hhsize];

.         global sumcr2=r(sum);

.         replace spi=spi*$sumcr2/$sumcr;
(7426 real changes made)

.         gen linpobr=linpob/spi;
(1 missing value generated)

.         replace cr2=cr/spi;
(7414 real changes made)

.         sum cr cr2 linpob linpobr [aw=hhweight*hhsize];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          cr |    7414  30109848.2    1044.199   1186.301   57.35136   
> 112846.5
         cr2 |    7414  30109848.2    1044.199   900.7869   72.35502   
> 76665.96
      linpob |    7415  30112959.1    457.0394   163.9359   208.9561   
> 922.7589
     linpobr |    7415  30112959.1    463.4272   .0000144   463.4272   
> 463.4272

.         lab var cr      "Temporally-adjusted cons pc";

.         lab var cr2     "Spatially & temporally adjusted cons pc";

.         lab var linpob  "Poverty line";

.         lab var linpobr "Real poverty line";

.         lab var spi     "Spatial price index";

.         *calculate poverty measures;
.         gen h = 100     if cr2 <=(linpobr);
(6553 missing values generated)

.         replace  h = 0  if cr2 > (linpobr);
(6553 real changes made)

.         gen             pg      = ((linpobr - cr2 )/linpobr) *100;
(13 missing values generated)

.         replace         pg      = 0             if h==0;
(6553 real changes made)

.         gen             spg     = ((( linpobr - cr2 )/ linpobr )^2)*1
> 00;
(13 missing values generated)

.         replace         spg     = 0             if h==0;
(6553 real changes made)

.         gen h_ent  =h;

.         gen pg_ent =pg;
(1 missing value generated)

.         gen spg_ent=spg;
(1 missing value generated)

.         lab var h_ent   "Poverty headcount entropy bundle with Maputo
>  food share fixed";

.         lab var pg_ent  "Poverty gap entropy bundle with Maputo food 
> share fixed";

.         lab var spg_ent "Squared poverty gap entropy bundle with Mapu
> to food share fixed";

.         sort hhid;

.         merge hhid using "$path/work/hhdata.dta";
(label lspdomain already defined)
(label lrural already defined)
(label lstrata already defined)
(label lsurvmon already defined)
(label lsurvquar already defined)
(label VERIFIER already defined)
(label ENTRANT already defined)
(label OUR_RESP already defined)
(label RESPCODE already defined)
(label EDITCODE already defined)
(label SCODE already defined)
(label INIDPCMP already defined)
(label SUBSTRAT already defined)
(label DISTRICT already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop if _merge~=3;
(1 observation deleted)

.         drop _merge;

.         gen popwt=hhsize*hhweight;
(11 missing values generated)

.         lab var popwt "Population weights = hhsize X hhweight";

.                 * Stata 10.1 syntax ;
.         svyset , clear;

.         svyset [pweight=popwt] , str(strata) psu(psu);

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>

. *MAH: Below at various places the original reg13 has been changed int
> o spdomain or spdomain ;
.                 svy: mean h_ent pg_ent spg_ent;
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
       h_ent |   13.57455   .5826486      12.42787    14.72122
      pg_ent |   3.109262   .1797243      2.755558    3.462966
     spg_ent |   1.077712   .0832363      .9138997    1.241524
--------------------------------------------------------------

.         svy: mean h_ent pg_ent spg_ent , over(rural);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent        |
       Urban |   10.62924   1.284399      8.101496    13.15699
       Rural |   14.12814   .6815058      12.78692    15.46937
-------------+------------------------------------------------
pg_ent       |
       Urban |   2.465697   .3944965      1.689313    3.242081
       Rural |   3.230226   .2042938      2.828168    3.632284
-------------+------------------------------------------------
spg_ent      |
       Urban |   .8914539   .1822138      .5328502    1.250058
       Rural |   1.112721   .0934079      .9288907    1.296551
--------------------------------------------------------------

.         svy: mean h_ent pg_ent spg_ent , over(strata);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Kampala: strata = Kampala
    _subpop_2: strata = Central 1
    _subpop_3: strata = Central 2
    _subpop_4: strata = East Central
      Eastern: strata = Eastern
    _subpop_6: strata = Mid Northern
    _subpop_7: strata = North East
    _subpop_8: strata = West Nile
    _subpop_9: strata = Mid Western
   _subpop_10: strata = South Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent        |
     Kampala |   9.890896   2.189968      5.580955    14.20084
   _subpop_2 |   14.81276   1.622125      11.62036    18.00517
   _subpop_3 |   16.33148   1.781144      12.82612    19.83683
   _subpop_4 |   10.45813   1.082757      8.327222    12.58903
     Eastern |    16.7012   1.808178      13.14264    20.25976
   _subpop_6 |   6.092102    1.39215      3.352297    8.831906
   _subpop_7 |   23.58261   3.769074      16.16493    31.00029
   _subpop_8 |    4.22173   1.515289      1.239583    7.203877
   _subpop_9 |   16.24195   1.791062      12.71708    19.76683
  _subpop_10 |   17.56518   1.832025      13.95969    21.17068
-------------+------------------------------------------------
pg_ent       |
     Kampala |    2.46401   .7375863      1.012412    3.915608
   _subpop_2 |   3.080291   .4467669      2.201036    3.959545
   _subpop_3 |   4.018606   .5235182      2.988303     5.04891
   _subpop_4 |   2.757257   .3074442      2.152195    3.362319
     Eastern |   3.581908   .6099232      2.381556     4.78226
   _subpop_6 |   1.137678    .366812      .4157778    1.859578
   _subpop_7 |   5.389289   .8360658      3.743879    7.034698
   _subpop_8 |   .6927667   .2613945      .1783324    1.207201
   _subpop_9 |   4.125748   .8541251      2.444797    5.806698
  _subpop_10 |   3.866027   .5259356      2.830966    4.901089
-------------+------------------------------------------------
spg_ent      |
     Kampala |   .9664337   .3914144      .1961153    1.736752
   _subpop_2 |   .9879309   .1988181      .5966494    1.379213
   _subpop_3 |   1.384525   .2207348      .9501102    1.818939
   _subpop_4 |   1.017017   .1652665      .6917661    1.342268
     Eastern |   1.161779   .2752885      .6200004    1.703557
   _subpop_6 |   .3257865   .1227839      .0841432    .5674299
   _subpop_7 |   1.685866   .2409415      1.211684    2.160048
   _subpop_8 |   .2469096   .1220134      .0067827    .4870365
   _subpop_9 |   1.578538   .4521486      .6886919    2.468383
  _subpop_10 |   1.369471   .2378879      .9012985    1.837643
--------------------------------------------------------------

.         svy: mean h_ent pg_ent spg_ent , over(spdomain);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent        |
     Kampala |   9.890896   2.189968      5.580955    14.20084
   _subpop_2 |   5.935991   3.407979     -.7710421    12.64302
   _subpop_3 |   16.99628   1.426589       14.1887    19.80386
   _subpop_4 |   14.88576   2.868062      9.241309    20.53022
   _subpop_5 |   13.92226   1.067168      11.82203    16.02249
   _subpop_6 |   10.39326   2.814225       4.85476    15.93176
   _subpop_7 |   6.439277   1.197491      4.082569    8.795985
   _subpop_8 |   15.95235   1.850871      12.30977    19.59493
   _subpop_9 |   17.14697   1.436946        14.319    19.97493
-------------+------------------------------------------------
pg_ent       |
     Kampala |    2.46401   .7375863      1.012412    3.915608
   _subpop_2 |   1.400103   .9279336     -.4261057    3.226312
   _subpop_3 |   3.875466   .3912017      3.105566    4.645366
   _subpop_4 |   3.437404   .9401375      1.587178    5.287631
   _subpop_5 |   3.325439   .3128101      2.709816    3.941061
   _subpop_6 |    2.20817   .7983671      .6369535    3.779387
   _subpop_7 |    1.16073   .2956575      .5788649    1.742595
   _subpop_8 |   3.485987   .5948393      2.315321    4.656654
   _subpop_9 |   4.008091   .4992335      3.025581    4.990602
-------------+------------------------------------------------
spg_ent      |
     Kampala |   .9664337   .3914144      .1961153    1.736752
   _subpop_2 |   .5288661   .3698513     -.1990153    1.256748
   _subpop_3 |   1.287466   .1686986      .9554607    1.619471
   _subpop_4 |   1.151978   .3667526       .430195    1.873761
   _subpop_5 |   1.148629   .1450247       .863215    1.434043
   _subpop_6 |    .716064   .3224765      .0814179     1.35071
   _subpop_7 |   .3273297   .0951171      .1401355    .5145238
   _subpop_8 |   1.217128   .2583201      .7087446    1.725512
   _subpop_9 |   1.470605   .2454933      .9874648    1.953745
--------------------------------------------------------------

.         svy: mean h_ent pg_ent spg_ent , over(spdomain);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent        |
     Kampala |   9.890896   2.189968      5.580955    14.20084
   _subpop_2 |   5.935991   3.407979     -.7710421    12.64302
   _subpop_3 |   16.99628   1.426589       14.1887    19.80386
   _subpop_4 |   14.88576   2.868062      9.241309    20.53022
   _subpop_5 |   13.92226   1.067168      11.82203    16.02249
   _subpop_6 |   10.39326   2.814225       4.85476    15.93176
   _subpop_7 |   6.439277   1.197491      4.082569    8.795985
   _subpop_8 |   15.95235   1.850871      12.30977    19.59493
   _subpop_9 |   17.14697   1.436946        14.319    19.97493
-------------+------------------------------------------------
pg_ent       |
     Kampala |    2.46401   .7375863      1.012412    3.915608
   _subpop_2 |   1.400103   .9279336     -.4261057    3.226312
   _subpop_3 |   3.875466   .3912017      3.105566    4.645366
   _subpop_4 |   3.437404   .9401375      1.587178    5.287631
   _subpop_5 |   3.325439   .3128101      2.709816    3.941061
   _subpop_6 |    2.20817   .7983671      .6369535    3.779387
   _subpop_7 |    1.16073   .2956575      .5788649    1.742595
   _subpop_8 |   3.485987   .5948393      2.315321    4.656654
   _subpop_9 |   4.008091   .4992335      3.025581    4.990602
-------------+------------------------------------------------
spg_ent      |
     Kampala |   .9664337   .3914144      .1961153    1.736752
   _subpop_2 |   .5288661   .3698513     -.1990153    1.256748
   _subpop_3 |   1.287466   .1686986      .9554607    1.619471
   _subpop_4 |   1.151978   .3667526       .430195    1.873761
   _subpop_5 |   1.148629   .1450247       .863215    1.434043
   _subpop_6 |    .716064   .3224765      .0814179     1.35071
   _subpop_7 |   .3273297   .0951171      .1401355    .5145238
   _subpop_8 |   1.217128   .2583201      .7087446    1.725512
   _subpop_9 |   1.470605   .2454933      .9874648    1.953745
--------------------------------------------------------------

.                 compress;
region was float now byte
psu was int now byte
survquar was float now byte
survmon was float now byte
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
bswt was float now byte
one was float now byte
h was float now byte
h_ent was float now byte

.       gen dum=1;

.         sort hhid;

.         *set aside the spatial price index;
.       tempfile spi;

. *      use "$path/work/povmeas_ent.dta", clear;
.       collapse (mean) spi, by(spdomain);

.       sort spdomain;

. save `spi', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000004.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000004.tmp saved

. clear;

. *********************************************************************
> *****;
. * Calculate poverty measures with Maputo regions on flexible food sha
> res
> *********************************************************************
> *****;
. use `contpi';

.         sort spdomain;

.         merge spdomain using `povlines_ent';
variable spdomain does not uniquely identify observations in the
    master data
(label lspdomain already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop _merge;

. *********************************************************************
> *****;
. * Create spatial price index, based on the total poverty line, with
> * adjustment so that mean (and total) nominal consumption equals
> * mean (and total) spatially deflated consumption.
> *
> * Choose arbitrary strata to be the base at first. The middle of the 
> 13
> * codes is code 7 -- that's arbirtary enough.
> *********************************************************************
> *****;
.         gen cr= cons_pc_tpi ;
(13 missing values generated)

.         gen linpob=povline_ent_m;
(1 missing value generated)

.         qui sum linpob if spdomain==1, meanonly;

.         global spi_base=r(mean);

.         gen spi=linpob/$spi_base;
(1 missing value generated)

.         gen cr2=cr/spi;
(13 missing values generated)

.         qui sum cr [aw=hhweight*hhsize];

.         global sumcr=r(sum);

.         qui sum cr2 [aw=hhweight*hhsize];

.         global sumcr2=r(sum);

.         replace spi=spi*$sumcr2/$sumcr;
(7426 real changes made)

.         gen linpobr=linpob/spi;
(1 missing value generated)

.         replace cr2=cr/spi;
(7414 real changes made)

.         sum cr cr2 linpob linpobr [aw=hhweight*hhsize];

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          cr |    7414  30109848.2    1044.199   1186.301   57.35136   
> 112846.5
         cr2 |    7414  30109848.2    1044.199   900.7869   72.35502   
> 76665.96
      linpob |    7415  30112959.1    457.0394   163.9359   208.9561   
> 922.7589
     linpobr |    7415  30112959.1    463.4272   .0000144   463.4272   
> 463.4272

.         lab var cr      "Temporally-adjusted cons pc";

.         lab var cr2     "Spatially & temporally adjusted cons pc";

.         lab var linpob  "Poverty line";

.         lab var linpobr "Real poverty line";

.         lab var spi     "Spatial price index";

.         *calculate poverty measures;
.         gen h = 100     if cr2 <=(linpobr);
(6553 missing values generated)

.         replace  h = 0 if cr2 > (linpobr);
(6553 real changes made)

.         gen             pg      = ((linpobr - cr2 )/linpobr) *100;
(13 missing values generated)

.         replace         pg      = 0             if h==0;
(6553 real changes made)

.         gen             spg     = ((( linpobr - cr2 )/ linpobr )^2)*1
> 00;
(13 missing values generated)

.         replace         spg     = 0             if h==0;
(6553 real changes made)

.         gen h_ent_m  =h;

.         gen pg_ent_m =pg;
(1 missing value generated)

.         gen spg_ent_m=spg;
(1 missing value generated)

.         lab var h_ent_m   "Poverty headcount entropy bundle. Food sha
> re flexible. Flexible bundle";

.         lab var pg_ent_m  "Poverty gap entropy bundle. Food share fle
> xible. Flexible bundle";

.         lab var spg_ent_m "Squared poverty gap entropy. Food share fl
> exible. Flexible bundle";

.         sort hhid;

.         merge hhid using "$path/work/hhdata.dta";
(label lspdomain already defined)
(label lrural already defined)
(label lstrata already defined)
(label lsurvmon already defined)
(label lsurvquar already defined)
(label VERIFIER already defined)
(label ENTRANT already defined)
(label OUR_RESP already defined)
(label RESPCODE already defined)
(label EDITCODE already defined)
(label SCODE already defined)
(label INIDPCMP already defined)
(label SUBSTRAT already defined)
(label DISTRICT already defined)
(label region already defined)

.         tab _merge;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          1        0.01        0.01
          3 |      7,426       99.99      100.00
------------+-----------------------------------
      Total |      7,427      100.00

.         drop if _merge~=3;
(1 observation deleted)

.         drop _merge;

.         gen popwt=hhsize*hhweight;
(11 missing values generated)

.         lab var popwt "Population weights = hhsize X hhweight";

.                 * Stata 10.1 syntax ;
.         svyset , clear;

.         svyset [pweight=popwt] , str(strata) psu(psu);

      pweight: popwt
          VCE: linearized
  Single unit: missing
     Strata 1: strata
         SU 1: psu
        FPC 1: <zero>

.                 svy: mean h_ent_m pg_ent_m spg_ent_m;
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
     h_ent_m |   13.57455   .5826486      12.42787    14.72122
    pg_ent_m |   3.109262   .1797243      2.755558    3.462966
   spg_ent_m |   1.077712   .0832363      .9138997    1.241524
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(rural);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

        Urban: rural = Urban
        Rural: rural = Rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
       Urban |   10.62924   1.284399      8.101496    13.15699
       Rural |   14.12814   .6815058      12.78692    15.46937
-------------+------------------------------------------------
pg_ent_m     |
       Urban |   2.465697   .3944965      1.689313    3.242081
       Rural |   3.230226   .2042938      2.828168    3.632284
-------------+------------------------------------------------
spg_ent_m    |
       Urban |   .8914539   .1822138      .5328502    1.250058
       Rural |   1.112721   .0934079      .9288907    1.296551
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(news);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Central: news = Central
      Eastern: news = Eastern
     Northern: news = Northern
      Western: news = Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
     Central |    14.4809   1.063977      12.38696    16.57485
     Eastern |   13.99914   1.000709      12.02971    15.96857
    Northern |    7.03288   1.088404      4.890859    9.174901
     Western |   17.05226   1.327354      14.43998    19.66455
-------------+------------------------------------------------
pg_ent_m     |
     Central |   3.347314   .3191118       2.71929    3.975339
     Eastern |   3.334372   .2976679       2.74855    3.920194
    Northern |    1.31798   .2710544      .7845346    1.851425
     Western |   3.966702   .4608982      3.059637    4.873767
-------------+------------------------------------------------
spg_ent_m    |
     Central |   1.147321   .1456274      .8607209    1.433922
     Eastern |   1.148896   .1367064       .879853     1.41794
    Northern |   .3856895   .0927427      .2031684    .5682106
     Western |   1.450511   .2273435       1.00309    1.897931
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(reg_tpi);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Central: reg_tpi = Central
      Eastern: reg_tpi = Eastern
     Northern: reg_tpi = Northern
      Western: reg_tpi = Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
     Central |    14.4809   1.063977      12.38696    16.57485
     Eastern |   13.99914   1.000709      12.02971    15.96857
    Northern |    7.03288   1.088404      4.890859    9.174901
     Western |   17.05226   1.327354      14.43998    19.66455
-------------+------------------------------------------------
pg_ent_m     |
     Central |   3.347314   .3191118       2.71929    3.975339
     Eastern |   3.334372   .2976679       2.74855    3.920194
    Northern |    1.31798   .2710544      .7845346    1.851425
     Western |   3.966702   .4608982      3.059637    4.873767
-------------+------------------------------------------------
spg_ent_m    |
     Central |   1.147321   .1456274      .8607209    1.433922
     Eastern |   1.148896   .1367064       .879853     1.41794
    Northern |   .3856895   .0927427      .2031684    .5682106
     Western |   1.450511   .2273435       1.00309    1.897931
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(strata);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Kampala: strata = Kampala
    _subpop_2: strata = Central 1
    _subpop_3: strata = Central 2
    _subpop_4: strata = East Central
      Eastern: strata = Eastern
    _subpop_6: strata = Mid Northern
    _subpop_7: strata = North East
    _subpop_8: strata = West Nile
    _subpop_9: strata = Mid Western
   _subpop_10: strata = South Western

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
     Kampala |   9.890896   2.189968      5.580955    14.20084
   _subpop_2 |   14.81276   1.622125      11.62036    18.00517
   _subpop_3 |   16.33148   1.781144      12.82612    19.83683
   _subpop_4 |   10.45813   1.082757      8.327222    12.58903
     Eastern |    16.7012   1.808178      13.14264    20.25976
   _subpop_6 |   6.092102    1.39215      3.352297    8.831906
   _subpop_7 |   23.58261   3.769074      16.16493    31.00029
   _subpop_8 |    4.22173   1.515289      1.239583    7.203877
   _subpop_9 |   16.24195   1.791062      12.71708    19.76683
  _subpop_10 |   17.56518   1.832025      13.95969    21.17068
-------------+------------------------------------------------
pg_ent_m     |
     Kampala |    2.46401   .7375863      1.012412    3.915608
   _subpop_2 |   3.080291   .4467669      2.201036    3.959545
   _subpop_3 |   4.018606   .5235182      2.988303     5.04891
   _subpop_4 |   2.757257   .3074442      2.152195    3.362319
     Eastern |   3.581908   .6099232      2.381556     4.78226
   _subpop_6 |   1.137678    .366812      .4157778    1.859578
   _subpop_7 |   5.389289   .8360658      3.743879    7.034698
   _subpop_8 |   .6927667   .2613945      .1783324    1.207201
   _subpop_9 |   4.125748   .8541251      2.444797    5.806698
  _subpop_10 |   3.866027   .5259356      2.830966    4.901089
-------------+------------------------------------------------
spg_ent_m    |
     Kampala |   .9664337   .3914144      .1961153    1.736752
   _subpop_2 |   .9879309   .1988181      .5966494    1.379213
   _subpop_3 |   1.384525   .2207348      .9501102    1.818939
   _subpop_4 |   1.017017   .1652665      .6917661    1.342268
     Eastern |   1.161779   .2752885      .6200004    1.703557
   _subpop_6 |   .3257865   .1227839      .0841432    .5674299
   _subpop_7 |   1.685866   .2409415      1.211684    2.160048
   _subpop_8 |   .2469096   .1220134      .0067827    .4870365
   _subpop_9 |   1.578538   .4521486      .6886919    2.468383
  _subpop_10 |   1.369471   .2378879      .9012985    1.837643
--------------------------------------------------------------

.         svy: mean h_ent_m pg_ent_m spg_ent_m , over(spdomain);
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =      10        Number of obs    =      7415
Number of PSUs   =     305        Population size  =  30112959
                                  Design df        =       295

      Kampala: spdomain = Kampala
    _subpop_2: spdomain = Central urban
    _subpop_3: spdomain = Central rural
    _subpop_4: spdomain = Eastern urban
    _subpop_5: spdomain = Eastern rural
    _subpop_6: spdomain = Northern urban
    _subpop_7: spdomain = Northern rural
    _subpop_8: spdomain = Western urban
    _subpop_9: spdomain = Western rural

--------------------------------------------------------------
             |             Linearized
        Over |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
h_ent_m      |
     Kampala |   9.890896   2.189968      5.580955    14.20084
   _subpop_2 |   5.935991   3.407979     -.7710421    12.64302
   _subpop_3 |   16.99628   1.426589       14.1887    19.80386
   _subpop_4 |   14.88576   2.868062      9.241309    20.53022
   _subpop_5 |   13.92226   1.067168      11.82203    16.02249
   _subpop_6 |   10.39326   2.814225       4.85476    15.93176
   _subpop_7 |   6.439277   1.197491      4.082569    8.795985
   _subpop_8 |   15.95235   1.850871      12.30977    19.59493
   _subpop_9 |   17.14697   1.436946        14.319    19.97493
-------------+------------------------------------------------
pg_ent_m     |
     Kampala |    2.46401   .7375863      1.012412    3.915608
   _subpop_2 |   1.400103   .9279336     -.4261057    3.226312
   _subpop_3 |   3.875466   .3912017      3.105566    4.645366
   _subpop_4 |   3.437404   .9401375      1.587178    5.287631
   _subpop_5 |   3.325439   .3128101      2.709816    3.941061
   _subpop_6 |    2.20817   .7983671      .6369535    3.779387
   _subpop_7 |    1.16073   .2956575      .5788649    1.742595
   _subpop_8 |   3.485987   .5948393      2.315321    4.656654
   _subpop_9 |   4.008091   .4992335      3.025581    4.990602
-------------+------------------------------------------------
spg_ent_m    |
     Kampala |   .9664337   .3914144      .1961153    1.736752
   _subpop_2 |   .5288661   .3698513     -.1990153    1.256748
   _subpop_3 |   1.287466   .1686986      .9554607    1.619471
   _subpop_4 |   1.151978   .3667526       .430195    1.873761
   _subpop_5 |   1.148629   .1450247       .863215    1.434043
   _subpop_6 |    .716064   .3224765      .0814179     1.35071
   _subpop_7 |   .3273297   .0951171      .1401355    .5145238
   _subpop_8 |   1.217128   .2583201      .7087446    1.725512
   _subpop_9 |   1.470605   .2454933      .9874648    1.953745
--------------------------------------------------------------

.         drop bswt one h pg spg;

.         compress;
region was float now byte
psu was int now byte
survquar was float now byte
survmon was float now byte
strata was float now byte
rural was float now byte
reg_tpi was float now byte
spdomain was float now byte
news was float now byte
h_ent_m was float now byte

. label data "Final data set. Official published poverty rates are calc
> ulated from this data set";
note: label truncated to 80 characters

.         sort hhid;

.         save "$path/work/povmeas_ent_flex.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povmeas_ent_flex.dta saved

. gen dum=1;

.         *output the national measures;
.         collapse  (mean) dum h_ent_m pg_ent_m spg_ent_m [aw=hhweight*
> hhsize];

. gen geo="National";

. gen geono=dum;

. tempfile nat;

. save `nat';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000005.tmp saved

.         *output the rural/urban measures;
.         use "$path/work/povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from t
> his data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsi
> ze], by(rural);

. gen geo="Rural/Urban";

. gen geono=rural;

. tempfile rur;

. save `rur';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000006.tmp saved

.         *output the North South Center measures;
.         use "$path/work/povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from t
> his data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsi
> ze], by(news);

. gen geo="North/Center/South";

. gen geono=news;

. tempfile new;

. save `new';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000007.tmp saved

.         *output the North South Center rural/urban measures;
.         use "$path/work/povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from t
> his data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsi
> ze], by(reg_tpi);

. gen geo="TPI - 6 regions";

. gen geono=reg_tpi;

. tempfile rtp;

. save `rtp';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000008.tmp saved

.         *output the provincial measures;
.         use "$path/work/povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from t
> his data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsi
> ze], by(strata);

. gen geo="Provinces";

. gen geono=strata;

. tempfile str;

. save `str';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l000009.tmp saved

.                 *output the dominios espaciais measures;
.         use "$path/work/povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from t
> his data s)

.         collapse  (mean) h_ent_m pg_ent_m spg_ent_m [aw=hhweight*hhsi
> ze], by(spdomain);

. gen geo="Spatial domains";

. gen geono=spdomain;

. tempfile r13;

. save `r13';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000a.tmp saved

. clear;

. set obs 1;
obs was 0, now 1

. gen geo=" ";

. tempfile one;

. save `one';
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000b.tmp saved

. use          `nat';
(Final data set. Official published poverty rates are calculated from t
> his data s)

. append using `one';

. append using `rur';
geo was str8 now str11

. append using `one';

. append using `new';
geo was str11 now str18

. append using `one';

. append using `rtp';
(label region already defined)

. append using `one';

. append using `str';

. append using `one';

. append using `r13';

. outsheet geo geono h_ent_m pg_ent_m spg_ent_m dum rural news reg_tpi 
> strata spdomain using "$path/work/poverty_ent_flexBask.csv", replace 
> c ;

.         *set aside the spatial price index;
.       tempfile spi_m;

.       use "$path/work/povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from t
> his data s)

.       collapse (mean) spi, by(spdomain);

.       rename spi spi_m;

.       sort spdomain;

. save `spi_m', replace;
(note: file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp not fo
> und)
file C:\Users\TEMPLE~1\AppData\Local\Temp\ST_0l00000c.tmp saved

. use `povlines_ent';

.        sort spdomain;

.        merge spdomain using `spi';
(label lspdomain already defined)

.        tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |          9      100.00      100.00
------------+-----------------------------------
      Total |          9      100.00

.  drop _m;

.        sort spdomain;

.        merge spdomain using `spi_m';
(label lspdomain already defined)

.         tab _m;

     _merge |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |          9      100.00      100.00
------------+-----------------------------------
      Total |          9      100.00

.  drop _m;

. save "$path/work/povlines.dta", replace;
file C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_2005\GAPP2
> /work/povlines.dta saved

. outsheet spdomain food_povline_ent povline_ent fdshr using "$path/wor
> k/povlines.csv", replace c;

.  ********************************************************************
> *************
> * 210_povmeas_ent_flex.do               (end)
> *********************************************************************
> ************;
. log close;
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/210_povmeas_ent_flex.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:55
-----------------------------------------------------------------------

. 
end of do-file

. 
.                                 do "$path/new/220_gen_results.do"    
>            /* Final poverty and inequality rates */

. *global path "C:\user\gapp"
. clear all

. set mem 999m

. 
. cap log close

. log using "$path/rep/220_gen_results.log", text replace
-----------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/220_gen_results.log
  log type:  text
 opened on:   9 Jul 2013, 11:07:55

. set more off

. #delimit ;
delimiter now ;
. *****************************************************************
> * 220_gen_results.do            (start)
> *
> * Do file to generate poverty and inequality results at various
> * levels of aggregation, and save the results for each 
> * bootstrap replication in a file.
> * NOTE: for some reason, -ineqdeco- doesn't generate results
> *       for GE(0), GE(1), GE(2), Gini, etc. when an "if" condition
> *               is used, so I'm using preserve/restore blocks for
> *               sub-groups instead.
> *               Also, saving results presented a few wrinkles, but
> *               doing it via matrices works.
> *****************************************************************;
. /*
>         This file uses:
>                 work/povmeas_ent_flex.dta (the bootstrapped version)
>                 out/bs_results.dta
>         
>         This file creates:
>                 out/bs_results.dta (updated)    
> */
> 
> 
> 
> 
> * Housecleaning;
. cap mat drop rep nat rur urb full;

. * Save the poverty lines in data file created for that purpose,;
. * and store in a matrix, for saving to a data file later.;
. use "$path/work/povmeas_ent_flex.dta", clear;
(Final data set. Official published poverty rates are calculated from t
> his data s)

.         foreach reg of numlist 1/13 {;
  2.                 qui sum linpob if spdomain==`reg';
  3.                 global linpob`reg'=r(mean);
  4.         };

.         mat input rep=(0);

.         mat input linpob=($linpob1 $linpob2 $linpob3 $linpob4 $linpob
> 5 $linpob6 
>                 $linpob7 $linpob8 $linpob9 $linpob10 $linpob11 $linpo
> b12 $linpob13);

.         mat linpob = rep, linpob;

.         mat colnames linpob = rep linpob1 linpob2 linpob3 linpob4 lin
> pob5 linpob6 
>                 linpob7 linpob8 linpob9 linpob10 linpob11 linpob12 li
> npob13;

.         #delimit cr
delimiter now cr
. 
.         * Change poverty measures from percentage to index terms;
.         gen h   = h_ent_   /100

.         gen pg  = pg_ent_m /100

.         gen spg = spg_ent_m/100

. 
.         * National figures;
.         sum h [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
           h |    7415  30112959.1    .1357455   .3425412          0   
>        1

.         glob p0_nat=r(mean)

.         sum pg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          pg |    7415  30112959.1    .0310926    .099054          0   
> .8438697

.         glob p1_nat=r(mean)

.         sum spg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
         spg |    7415  30112959.1    .0107771   .0460546          0   
> .7121161

.         glob p2_nat=r(mean)

.         ineqdeco cr2 [aw=hhweight*hhsize]
(11 missing values generated)
 
 
Percentile ratios for distribution of cr2: all valid obs.
------------------------------------------------------------
p90/p10  p90/p50  p10/p50  p75/p25  p75/p50  p25/p50
------------------------------------------------------------
  4.498    2.285    0.508    2.121    1.496    0.705
              
Generalized Entropy indices GE(a), where a = income difference
 sensitivity parameter, and Gini coefficient

----------------------------------------------------------------------
  All obs |     GE(-1)       GE(0)       GE(1)       GE(2)        Gini
----------+-----------------------------------------------------------
        0 |                                                           
----------------------------------------------------------------------
   
Atkinson indices, A(e), where e > 0 is the inequality aversion paramete
> r

----------------------------------------------
  All obs |     A(0.5)        A(1)        A(2)
----------+-----------------------------------
          |    0.09669     0.17634     0.30467
----------------------------------------------

.         glob gini_nat=$S_gini

.         glob ge0_nat =$S_i0

.         glob ge1_nat =$S_i1

.         glob ge2_nat =$S_i2

.         mat input nat=($p0_nat $p1_nat $p2_nat $gini_nat $ge0_nat $ge
> 1_nat $ge2_nat)

. 
.         * Rural figures;
.         preserve

.                 keep if rural==1
(1699 observations deleted)

.                 sum h [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
           h |    5724  25348470.8    .1412814   .3483421          0   
>        1

.                 glob p0_rur=r(mean)

.                 sum pg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          pg |    5724  25348470.8    .0323023   .1004268          0   
> .7709621

.                 glob p1_rur=r(mean)

.                 sum spg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
         spg |    5724  25348470.8    .0111272    .045778          0   
> .5943826

.                 glob p2_rur=r(mean)

.                 ineqdeco cr2 [aw=hhweight*hhsize]
(3 missing values generated)
 
 
Percentile ratios for distribution of cr2: all valid obs.
------------------------------------------------------------
p90/p10  p90/p50  p10/p50  p75/p25  p75/p50  p25/p50
------------------------------------------------------------
  4.297    2.202    0.512    2.054    1.459    0.710
              
Generalized Entropy indices GE(a), where a = income difference
 sensitivity parameter, and Gini coefficient

----------------------------------------------------------------------
  All obs |     GE(-1)       GE(0)       GE(1)       GE(2)        Gini
----------+-----------------------------------------------------------
        0 |                                                           
----------------------------------------------------------------------
   
Atkinson indices, A(e), where e > 0 is the inequality aversion paramete
> r

----------------------------------------------
  All obs |     A(0.5)        A(1)        A(2)
----------+-----------------------------------
          |    0.09080     0.16678     0.29019
----------------------------------------------

.                 glob gini_rur=$S_gini

.                 glob ge0_rur =$S_i0

.                 glob ge1_rur =$S_i1

.                 glob ge2_rur =$S_i2

.         restore

.         mat input rur=($p0_rur $p1_rur $p2_rur $gini_rur $ge0_rur $ge
> 1_rur $ge2_rur)

. 
.         * Urban figures;
.         preserve

.                 keep if rural==0
(5727 observations deleted)

.                 sum h [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
           h |    1691  4764488.22    .1062924   .3083027          0   
>        1

.                 glob p0_urb=r(mean)

.                 sum pg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
          pg |    1691  4764488.22     .024657   .0911674          0   
> .8438697

.                 glob p1_urb=r(mean)

.                 sum spg [aw=hhweight*hhsize]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min   
>      Max
-------------+---------------------------------------------------------
> --------
         spg |    1691  4764488.22    .0089145   .0474715          0   
> .7121161

.                 glob p2_urb=r(mean)

.                 ineqdeco cr2 [aw=hhweight*hhsize]
(8 missing values generated)
 
 
Percentile ratios for distribution of cr2: all valid obs.
------------------------------------------------------------
p90/p10  p90/p50  p10/p50  p75/p25  p75/p50  p25/p50
------------------------------------------------------------
  5.193    2.407    0.464    2.401    1.584    0.660
              
Generalized Entropy indices GE(a), where a = income difference
 sensitivity parameter, and Gini coefficient

----------------------------------------------------------------------
  All obs |     GE(-1)       GE(0)       GE(1)       GE(2)        Gini
----------+-----------------------------------------------------------
        0 |                                                           
----------------------------------------------------------------------
   
Atkinson indices, A(e), where e > 0 is the inequality aversion paramete
> r

----------------------------------------------
  All obs |     A(0.5)        A(1)        A(2)
----------+-----------------------------------
          |    0.11453     0.20686     0.35743
----------------------------------------------

.                 glob gini_urb=$S_gini

.                 glob ge0_urb =$S_i0

.                 glob ge1_urb =$S_i1

.                 glob ge2_urb =$S_i2

.         restore

.         mat input urb=($p0_urb $p1_urb $p2_urb $gini_urb $ge0_urb $ge
> 1_urb $ge2_urb)

. 
.         * Assemble the matrix pieces and save this set of estimates i
> n the data file;
.                 #delimit;
delimiter now ;
.                 mat full= rep, nat, rur, urb;

.                 mat colnames full = rep 
>                                         p0_nat  p1_nat  p2_nat  gini_
> nat  ge0_nat  ge1_nat      ge2_nat
>                                         p0_rur  p1_rur  p2_rur  gini_
> rur  ge0_rur  ge1_rur      ge2_rur
>                                         p0_urb  p1_urb  p2_urb  gini_
> urb  ge0_urb  ge1_urb      ge2_urb;

.         #delimit cr
delimiter now cr
.         mat list full

full[1,22]
          rep     p0_nat     p1_nat     p2_nat   gini_nat    ge0_nat
r1          0  .13574546  .03109262  .01077712          .          .

      ge1_nat    ge2_nat     p0_rur     p1_rur     p2_rur   gini_rur
r1          .          .  .14128145  .03230226  .01112721          .

      ge0_rur    ge1_rur    ge2_rur     p0_urb     p1_urb     p2_urb
r1          .          .          .  .10629242  .02465697  .00891454

     gini_urb    ge0_urb    ge1_urb    ge2_urb
r1          .          .          .          .

. 
. 
. drop _all

. 
. svmat full , names(col)
number of observations will be reset to 1
Press any key to continue, or Break to abort
obs was 0, now 1

.         tempfile rep

.         compress
rep was float now byte
gini_nat was float now byte
ge0_nat was float now byte
ge1_nat was float now byte
ge2_nat was float now byte
gini_rur was float now byte
ge0_rur was float now byte
ge1_rur was float now byte
ge2_rur was float now byte
gini_urb was float now byte
ge0_urb was float now byte
ge1_urb was float now byte
ge2_urb was float now byte

. 
. 
. 
. 
. 
. *****************************************************************
. * 220_gen_results.do            (end)
. *****************************************************************;
. 
. log close
      name:  <unnamed>
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/220_gen_results.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:55
-----------------------------------------------------------------------

. 
end of do-file

.                 
. *quietly        do "$path/new/230_assets_possession"                 
>    /* Extra: Deprivation */
. *quietly        do "$path/new/240_compare_nat_acc.do"                
>    /* Extra: Compare survey with national accounts */
. 
. 
. 
. *********************************************************************
> *;
. * 000_boom.do   (end)
. *********************************************************************
> *;
. 
. log close log_000_boom
      name:  log_000_boom
       log:  C:\Users\Templeton\Desktop\GAPP\GAPP-UGANDA-HARUNA\UNHS_20
> 05\GAPP2/rep/000_boom.log
  log type:  text
 closed on:   9 Jul 2013, 11:07:55
-----------------------------------------------------------------------
